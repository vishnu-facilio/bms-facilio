(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[20245],{
/***/520245:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNAROptimize}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/newTools/v1/FNAROptimize.vue?vue&type=template&id=a2293cac
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"analytics-section mT20"},[_c("div",{staticClass:"new-analytics-filter-section",staticStyle:{"text-align":"center"}},[_vm.showHeadingOnlyForPdf&&_vm.pdfloading?_c("div",{staticClass:"text-center label-txt-black4 bold pB20"},[_vm.excludeParamsObj.title&&_vm.excludeParamsObj.logo?_vm._e():_c("div",{staticClass:"report-pdf-header",staticStyle:{overflow:"hidden"}},[_vm.$org.logoUrl?_c("div",{staticClass:"fc-report-cus-logo",class:{"logo-visible":_vm.excludeParamsObj.logo}},[_c("img",{staticStyle:{width:"100px",height:"50px"},attrs:{src:_vm.$org.logoUrl}})]):_c("div",{staticClass:"fc-logo-report",class:{"logo-visible":_vm.excludeParamsObj.logo}},[_c("img",{attrs:{src:__webpack_require__(181242)}})]),_vm.excludeParamsObj.title?_vm._e():_c("div",{staticClass:"f18 fc-widget-label ellipsis max-width350px"},[_vm._v(" "+_vm._s(_vm.reportName||"AlarmReport")+" ")])]),_vm.printView?_c("div",{staticClass:"fc-report-author-sec pdf-text-left pdf-margin-top"},[_vm.excludeParamsObj.description?_vm._e():_c("div",[_c("div",{staticClass:"fc-report-author-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.generated_on"))+" "),_c("span",{staticClass:"fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(_vm.formatDate())+" ")])]),_c("div",{staticClass:"fc-report-author-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.generated_by"))+" "),_c("span",{staticClass:"fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(_vm.$account.user.name)+" ")])])]),_vm.excludeParamsObj.filter?_vm._e():_c("div",{staticClass:"fc-report-author-txt flex-middle"},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.date_range")+":")+" "),_c("div",{staticClass:"f9 fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(_vm.getDateRangeString)+" ")])])]):_vm._e()]):_vm._e(),_vm.config.hidedatepicker?_vm._e():_c("new-date-picker",{key:_vm.componentkey,ref:"newDatePicker",staticClass:"filter-field date-filter-comp inline",style:_vm.config&&2===_vm.config.analyticsType?"margin-left:120px;":"",attrs:{zone:_vm.$timezone,dateObj:_vm.config.dateFilter,isDateFixed:_vm.config.applyReportDate},on:{"update:dateObj":function($event){return _vm.$set(_vm.config,"dateFilter",$event)},"update:date-obj":function($event){return _vm.$set(_vm.config,"dateFilter",$event)},date:_vm.setDateFilter}}),this.reportObj&&this.reportObj.options&&!0===this.reportObj.options.settings.timeperiod&&[1,4].includes(_vm.config.mode)?_c("div",{staticClass:"chart-icon pointer flRight pB8 el-popover__reference",staticStyle:{"margin-right":"120px"}},[_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"period-select width20 fc-input-full-border2 ",attrs:{placeholder:"Period",title:"Time period","data-arrow":"true"},on:{change:_vm.onPeriodChange},model:{value:_vm.config.period,callback:function($$v){_vm.$set(_vm.config,"period",$$v)},expression:"config.period"}},_vm._l(_vm.getAvailablePeriods,(function(period,index){return _c("el-option",{key:index,attrs:{label:period.name,value:period.value,disabled:!period.enable}})})),1)],1):_vm._e(),_vm.showTemplateFilter&&_vm.resultObj&&_vm.resultObj.report&&_vm.resultObj.report.currentTemplate&&_vm.resultObj.report.currentTemplate.show?_c("div",[_c("el-tooltip",{attrs:{effect:"dark",content:"can be accessed only in view mode",placement:"bottom"}},[_c("el-select",{staticClass:"fc-input-full-border-h35 fc-report-label-position",attrs:{disabled:!0,filterable:""},on:{change:_vm.changeParentForTemplate},model:{value:_vm.resultObj.report.currentTemplate.parentId,callback:function($$v){_vm.$set(_vm.resultObj.report.currentTemplate,"parentId",$$v)},expression:"resultObj.report.currentTemplate.parentId"}},[_c("span",_vm._l(_vm.resultObj.report.currentTemplate.chooseValues,(function(asset,assetIdx){return _c("el-option",{key:assetIdx,attrs:{value:asset.id,label:asset.name}})})),1)])],1)],1):_vm._e(),!_vm.config.hidechartoptions&&_vm.reportObj&&!0===!_vm.isRegression?_c("f-chart-settings",{attrs:{dataPoints:_vm.reportObj&&_vm.reportObj.options?_vm.reportObj.options.dataPoints:null,settings:_vm.reportObj&&_vm.reportObj.options?_vm.reportObj.options.settings:null,showChart:!1,showTable:!1,showChartMode:_vm.showChartMode&&!(_vm.reportObj&&_vm.reportObj.options&&_vm.reportObj.options.isGroupedByTime),showTimePeriod:_vm.showTimePeriod,showFilterBar:_vm.showFilterBar,showAlarm:!!(_vm.reportObj&&_vm.reportObj.options&&_vm.reportObj.options.common&&[1,4].includes(_vm.reportObj.options.common.type)),showSafelimit:!!(_vm.reportObj&&_vm.reportObj.options&&_vm.reportObj.options.common&&1===_vm.reportObj.options.common.type&&"undefined"===typeof _vm.resultObj.regression),disableChartMode:_vm.reportObj.booleanData},on:{onSettingsChange:_vm.onSettingsChange}}):_vm._e(),_vm.config&&2===_vm.config.analyticsType&&1===_vm.config.mode&&0===_vm.config.period?_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"chart-icon pointer flRight mT5 flex-middle border-right mR60 pR10",style:_vm.$parent.filterToggle?"margin-top: -40px;":"",attrs:{title:"Filter","data-arrow":"true"},on:{click:_vm.openReportFilterDialog}},[_vm.hasReportFilter?_c("span",{staticClass:"filter-indicator"}):_vm._e(),_c("InlineSvg",{staticClass:"fc-grey-svg2",staticStyle:{top:"2px"},attrs:{src:"svgs/filter2",iconClass:"icon icon-sm-md"}})],1):_vm._e(),_vm.resultObj&&_vm.resultObj.report&&0!==_vm.resultObj.report.dataPoints.length&&!_vm.isRegression?_c("span"):_vm._e()],1),!_vm.$mobile&&_vm.predictive&&_vm.config.predictionTimings&&_vm.config.predictionTimings.length?_c("prediction-timings-bar",{staticClass:" prediction-timing-bar",attrs:{reportObj:_vm.reportObj,config:_vm.config}}):_vm._e(),_vm.loading?_c("spinner",{staticClass:"analytics-spinner",attrs:{show:_vm.loading,size:"80"}}):_vm.failed?_c("div",{staticStyle:{"margin-top":"30px",opacity:"0.7","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("div",[_vm._v(_vm._s(_vm.$t("home.dashboard.data_loading_failed")))])]):_vm.reportObj.data?_c("div",[_vm.config.hidechart?_vm._e():_c("div",[!_vm.isHeatMap&&!_vm.isTreeMap&&_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout&&"multi"===_vm.reportObj.options.settings.chartMode?_c("f-mobile-multi-chart",{ref:"multiChart",attrs:{isWidget:!!_vm.config,width:_vm.config&&_vm.config.width?_vm.config.width:null,resultObj:_vm.resultObj,height:_vm.config&&_vm.config.height?_vm.config.height:null,data:_vm.reportObj.data,options:_vm.reportObj.options,alarms:_vm.reportObj.alarms,dateRange:_vm.reportObj.dateRange,hidecharttypechanger:_vm.config&&_vm.config.widget,booleanData:_vm.reportObj.booleanData}}):!_vm.isHeatMap&&!_vm.isTreeMap&&_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout&&"multi"===_vm.reportObj.options.settings.chartMode?_c("div",{staticClass:"empty-multi-chart"},[_vm._v(" Currently this chart not supported in the mobile ")]):_c("div",[!_vm.isHeatMap&&!_vm.isTreeMap&&_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout?_c("f-mobile-chart",{ref:"newChart",staticClass:"mobile-chart",attrs:{data:_vm.reportObj.data,options:_vm.reportObj.options,dateRange:_vm.reportObj.dateRange,resultObj:_vm.resultObj}}):_vm._e()],1),_vm.isHeatMap||_vm.isTreeMap||!_vm.reportObj||"multi"!==_vm.reportObj.options.settings.chartMode||_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout?_vm._e():_c("f-multi-chart",{ref:"multiChart",attrs:{reportObj:_vm.reportObj,data:_vm.reportObj.data,options:_vm.reportObj?_vm.reportObj.options:null,alarms:_vm.reportObj.alarms,booleanData:_vm.reportObj.booleanData,dateRange:_vm.reportObj.dateRange,resultObj:_vm.resultObj,hidecharttypechanger:_vm.config.hidecharttypechanger||_vm.isRegression,config:_vm.config},on:{removeFilters:_vm.removeFilters}}),_vm.isHeatMap||_vm.isTreeMap?_vm._e():_c("f-new-chart",{ref:"newChart",attrs:{hidecharttypechanger:_vm.config.hidecharttypechanger||_vm.isRegression,resultObj:_vm.resultObj,reportObj:_vm.reportObj,options:_vm.reportObj?_vm.reportObj.options:null,fixedChartHeight:_vm.config.fixedChartHeight,config:_vm.config},on:{chartgenerate:_vm.chartgenerate}}),_vm.isHeatMap?_c("FNewHeatMap",{ref:"heatmap",attrs:{config:_vm.config,width:_vm.chartDimensions&&_vm.chartDimensions.width?_vm.chartDimensions.width:_vm.$el.clientWidth?_vm.$el.clientWidth:null,height:_vm.chartDimensions&&_vm.chartDimensions.height?_vm.chartDimensions.height:null,resultObject:_vm.resultObj,reportObject:_vm.reportObj}}):_vm._e(),_vm.isTreeMap?_c("FTreeMap",{ref:"treemap",attrs:{config:_vm.config,width:_vm.chartDimensions&&_vm.chartDimensions.width?_vm.chartDimensions.width:_vm.$el.clientWidth?_vm.$el.clientWidth:null,height:_vm.chartDimensions&&_vm.chartDimensions.height?_vm.chartDimensions.height:null,resultObject:_vm.resultObj,reportObject:_vm.reportObj}}):_vm._e()],1)]):_c("div",{staticStyle:{"margin-top":"30px","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.empty_data"))+" "),_vm.pdfDateRange.value?_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm._f("formatPeriod")(_vm.pdfDateRange.value,"MMM DD, YYYY")))]):_vm.resultObj&&_vm.resultObj.dateRange?_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm._f("formatPeriod")(_vm.resultObj.dateRange.value,"MMM DD, YYYY")))]):_vm._e()])],1)],1),!_vm.loading&&_vm.reportObj&&"multi"===_vm.reportObj.options.settings.chartMode&&"table"==_vm.reportObj.options.type?_c("div",[_vm.config.hidecharttypechanger?_vm._e():_c("f-chart-type",{staticClass:"chart-type-position fc-new-chart-type-single",attrs:{options:_vm.reportObj.options,skipTableType:!0,multichartkey:"datapoint_"+_vm.reportObj.options.dataPoints[0].alias},on:{getOptions:_vm.getOptionsFromTypeChart}})],1):_vm._e(),!_vm.loading&&(_vm.reportObj&&"multi"===_vm.reportObj.options.settings.chartMode||!0===_vm.chartgenerated||_vm.isHeatMap||_vm.isTreeMap)?_c("div",[_vm.config.hidetabular?_vm._e():_c("f-tabular-report",{ref:"newTable",staticClass:"new-analytics-table mL30 mR30",class:{"regression-table-fit":_vm.isRegression,"hide-table-pdf":_vm.hideTable},attrs:{reportObject:_vm.resultObj,reportConfig:_vm.reportObj,hideColumn:_vm.config.hideColumn}})],1):_vm._e(),_vm.showReportFilter?_c("report-filter",{attrs:{visibility:_vm.showReportFilter,config:_vm.config.reportFilter,existingOptions:_vm.existingOptions},on:{"update:visibility":function($event){_vm.showReportFilter=$event},reportFilter:_vm.setReportFilter}}):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),NewDatePicker=(__webpack_require__(169358),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(450886),__webpack_require__(228436),__webpack_require__(506203),__webpack_require__(689730),__webpack_require__(162506),__webpack_require__(903650),__webpack_require__(900773)),FNewChartOptimize=__webpack_require__(678873),FMobileChart=__webpack_require__(242208),FMultiChart=__webpack_require__(649206),NewDataFormatHelper=__webpack_require__(804911),AnalyticsMixin=__webpack_require__(244936),FTabularOptimizevue_type_template_id_235deb84_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showTable?_c("div",{staticClass:"mT50 f-tabular-page",style:{position:"relative","margin-bottom":_vm.widget?"30px":"150px"}},[_vm.reportObject&&_vm.isTabularReport?[_c("HotTable",{ref:"hotTable",style:_vm.styleCss,attrs:{root:_vm.root,settings:_vm.hotSettings}})]:_vm.reportObject?_c("div",{staticClass:"height100"},[_c("div",{staticClass:"pT0 height100 scrollable"},_vm._l(_vm.multiTables,(function(table,tindex){return _c("div",{key:tindex,ref:"fTableContainer_"+tindex,refInFor:!0,staticClass:"tablular-container row full-layout-white scrollbar-style tabular-data-border",style:[{"overflow-x":(_vm.isOverflowing,"scroll"),display:"block","margin-bottom":"20px"}]},[_c("pagination",{attrs:{total:_vm.reportObject.reportData.data.length,perPage:100},on:{fromto:_vm.fromto}}),_vm.hotSettings.data.length?_c("table",{ref:"fTable_"+tindex,refInFor:!0,staticClass:"wo-table workorder-table-list tabular-report-table"},[_c("thead",[_c("tr",[_vm.tableConfig.hideIndex?_vm._e():_c("th",[_vm._v("NO")]),tindex>0?_c("th",[_vm._v(_vm._s(_vm.multiTables[0].columns[0]))]):_vm._e(),_vm._l(table.columns,(function(header,index){return _c("th",{key:index,class:["table-col-"+index,"pL0","pR0"],staticStyle:{"padding-left":"0 !important","padding-right":"0 !important"},attrs:{colspan:_vm.hotSettings.columns[index].columnSpan}},[_c("div",{staticClass:"inline pT20 pB20",domProps:{innerHTML:_vm._s(header)}}),_vm.hotSettings.columns[index].hasOwnProperty("subColumnHeaders")?_c("table",{staticClass:"width100 tabular-inner-table"},[_c("thead",[_c("tr",_vm._l(_vm.hotSettings.columns[index].subColumnHeaders,(function(sColumnHeader,sIdx){return _c("th",{key:sIdx+index,staticClass:"text-left tabular-inner-table-th",staticStyle:{"bordee-bottom":"0 !important"}},[_vm._v(" "+_vm._s(sColumnHeader)+" ")])})),0)])]):_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].showOptions&&!_vm.hotSettings.columns[index].hasOwnProperty("subColumnHeaders")?_c("div",{staticClass:"flRight"},[_c("f-popover",{attrs:{placement:"right",trigger:"click",width:"370",confirmTitle:"Save"},on:{save:function($event){return _vm.saveOptions(index,tindex)},show:function($event){return _vm.initOptions(index,tindex)}},model:{value:_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].popover,callback:function($$v){_vm.$set(_vm.hotSettings.columns[_vm.getColIdx(index,tindex)],"popover",$$v)},expression:"\n                        hotSettings.columns[getColIdx(index, tindex)].popover\n                      "}},[_vm.options.state&&_vm.options.state.enumMode?_c("div",{staticClass:"customize-input-block customize-radio-block"},[_c("p",{staticClass:"customize-label"},[_vm._v("Mode")]),_c("div",[_c("el-radio-group",{model:{value:_vm.options.state.enumMode,callback:function($$v){_vm.$set(_vm.options.state,"enumMode",$$v)},expression:"options.state.enumMode"}},[_c("el-radio-button",{attrs:{label:_vm.enumMode.DURATION}},[_vm._v("Duration")]),_c("el-radio-button",{attrs:{label:_vm.enumMode.PERCENT}},[_vm._v("Percent")])],1)],1),_c("el-checkbox",{staticClass:"pT10",model:{value:_vm.options.applyAll,callback:function($$v){_vm.$set(_vm.options,"applyAll",$$v)},expression:"options.applyAll"}},[_vm._v("Apply to all similar columns")])],1):_vm._e(),_c("div",{staticClass:"pointer",attrs:{slot:"reference"},slot:"reference"},[_c("i",{staticClass:"el-icon-more rotate90deg"})])])],1):_vm._e()])})),table.showExtraColumn?_c("th",{staticClass:"extra-th"}):_vm._e()],2)]),_c("tbody",{staticClass:"scroll-y"},_vm._l(_vm.hotSettings.data.slice(_vm.start-1,_vm.end),(function(data,idx){return _c("tr",{key:idx,staticClass:"tablerow"},[_vm.tableConfig.hideIndex?_vm._e():_c("td",{staticClass:"tabular-data-td",staticStyle:{"text-align":"center","min-width":"49px","max-width":"49px",color:"#000 !important","font-size":"12px","font-weight":"500","letter-spacing":"1px","text-transform":"uppercase"},style:_vm.isPrinting?"":"min-width: 49px;"},[_vm._v(" "+_vm._s(idx+_vm.start)+" ")]),tindex>0?_c("td",{staticClass:"tabular-data-td"},[_c("div",[_vm._v(_vm._s(data[0]))])]):_vm._l(table.columns,(function(header,index){return[!_vm.hotSettings.columns[index].columnSpan||_vm.hotSettings.columns[index].columnSpan&&0===_vm.hotSettings.columns[index].columnSpan?_c("td",{key:index,class:["tabular-data-td","table-col-"+index,"numeric"===_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].type?"text-right":"text-left"],style:_vm.isPrinting?"":{"min-width":table.colWidth,"max-width":table.colWidth}},["html"===_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].renderer?_c("div",{domProps:{innerHTML:_vm._s(data[_vm.getColIdx(index,tindex)])}}):_c("div",[_vm._v(_vm._s(data[_vm.getColIdx(index,tindex)]))])]):_vm._l(data[_vm.getColIdx(index,tindex)],(function(i,didx){return[_c("td",{key:didx+index,class:["tabular-data-td",(_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].type,"text-right")],style:_vm.isPrinting?"":{"min-width":table.colWidth,"max-width":table.colWidth}},[_vm._v(" "+_vm._s(i)+" ")])]}))]})),table.showExtraColumn?_c("td",{staticClass:"extra-td"}):_vm._e()],2)})),0)]):_vm._e()],1)})),0)]):_vm._e()],2):_vm._e()])},FTabularOptimizevue_type_template_id_235deb84_staticRenderFns=[],toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vue_handsontable=(__webpack_require__(339772),__webpack_require__(891719),__webpack_require__(865137),__webpack_require__(366258)),vue_handsontable_default=__webpack_require__.n(vue_handsontable),FNewAnalyticsModelHelper=__webpack_require__(146371),FTabularPaginationvue_type_template_id_28fa4922_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{class:{"fc-black-small-txt-12 text-right pB15":!_vm.hideToggle}},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" -")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm.hideToggle?_vm._e():[_vm._v(" of "+_vm._s(_vm.total)+" "),_c("span",{staticClass:"el-icon-arrow-left fc-black-small-txt-12 text-right pB15 fw-bold f16 pointer mL10 mR5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right fc-black-small-txt-12 text-right pB15 f16 pointer mR10 fw-bold",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})]],2):_vm._e()])},FTabularPaginationvue_type_template_id_28fa4922_staticRenderFns=[],FTabularPaginationvue_type_script_lang_js={props:["total","perPage","hideToggle"],data:function(){return{from:0,to:0,page:1}},mounted:function(){this.init()},computed:{pageQuery:function(){return this.$route.query.page}},watch:{total:function(){this.init()},pageQuery:function(val){val!==this.page&&this.init()}},methods:{init:function(){this.page=this.pageQuery||1,this.from=(this.page-1)*this.perPage+1;var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total,this.setPage()},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.setPage()},reset:function(){this.page=1,this.setPage(),this.init()},setPage:function(){this.$emit("fromto",this.from,this.to)}}},components_FTabularPaginationvue_type_script_lang_js=FTabularPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FTabularPaginationvue_type_script_lang_js,FTabularPaginationvue_type_template_id_28fa4922_render,FTabularPaginationvue_type_template_id_28fa4922_staticRenderFns,!1,null,null,null)
/* harmony default export */,FTabularPagination=component.exports,NumberFormatHelper=__webpack_require__(415402),FPopover=__webpack_require__(507008),d3=__webpack_require__(348727),formatter=__webpack_require__(676240),picklist=__webpack_require__(961358),MAX_COLUMN=6,EnumMode={DURATION:1,PERCENT:2,GRAPH:3},FTabularOptimizevue_type_script_lang_js={components:{HotTable:vue_handsontable_default(),FPopover:FPopover/* default */.Z,Pagination:FTabularPagination},mixins:[NewDataFormatHelper/* default */.Z],props:["reportObject","reportConfig","widget","showWidgetTable","hideColumn"],data:function(){return{assets:[],start:null,end:null,root:"tabular-report-hot",minWidth:225,maxWidth:335,hotSettings:{data:[],columns:[],colHeaders:!0,rowHeaders:!0,columnHeaderHeight:75,renderAllRows:!0,colWidths:"",readOnly:!0,columnSorting:!0,manualColumnResize:!0,manualColumnMove:!0,fixedColumnsLeft:1,stretchH:"none"},hotTable:null,autoRowSize:null,widgetSettings:{manualColumnResize:!1,manualColumnMove:!1,fixedColumnsLeft:0,stretchH:"all"},tableState:{
// table config to save
columns:[]},baselineMap:{},dataMap:{},initialRendered:!1,showExtraColumn:!1,isOverflowing:!1,multiTables:[],maxColumn:MAX_COLUMN,enumMode:EnumMode,options:{applyAll:!1,state:null},aggrMap:{2:"AVG",3:"SUM",4:"MIN",5:"MAX"}}},created:function(){this.loadAssetPickListData()},mounted:function(){this.init(),this.render()},updated:function(){this.isTabularReport||this.setHotColWidth()},computed:{showTable:function(){return this.reportObject&&(!this.widget||!1===this.reportConfig.options.settings.chart||this.showWidgetTable)&&this.reportConfig.options.settings.table},isTreeMap:function(){return this.reportConfig&&"treemap"===this.reportConfig.options.type},isTabularReport:function(){return this.reportConfig&&"tabular"===this.reportConfig.options.type},tableConfig:function(){return this.reportConfig&&this.reportConfig.tableConfig?this.reportConfig.tableConfig:this.reportConfig&&this.reportConfig.options&&this.reportConfig.options.table?this.reportConfig.options.table:{}},isPrinting:function(){return this.$route.query.print||this.$route.query.daterange;// daterange check temp
},styleCss:function(){return"width: 100% !important;"}},watch:{reportObject:{handler:function(newData,oldData){this.render()},deep:!0},reportConfig:{handler:function(newData,oldData){this.render()},deep:!0}},methods:{loadAssetPickListData:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"asset",skipDeserialize:!0}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this.$message.error(error.message||"Error Occured"):_this.assets=options;case 6:case"end":return _context.stop()}}),_callee)})))()},fromto:function(start,end){this.start=start,this.end=end},init:function(){var self=this;this.hotSettings.afterColumnMove=function(from,to){self.saveCurrentState()},this.hotSettings.afterColumnResize=function(col,width){self.saveCurrentState(),self.setTableHeight()},this.hotSettings.afterRender=function(){!self.hotTable&&self.$refs["hotTable"]&&(self.hotTable=self.$refs["hotTable"].table,self.setTableHeight()),self.initialRendered||(self.initialRendered=!0,self.setHotColWidth())}},resize:function(){this.setHotColWidth()},setTableHeight:function(){
/* this.$nextTick(() => {
        this.hotSettings.height = this.$refs['hotTable'].$el.querySelector('.ht_master .htCore').clientHeight
      }) */},setHotColWidth:function(){var _this2=this;if((!Array.isArray(this.hotSettings.colWidths)||!this.isTabularReport)&&this.showTable&&(this.$refs["hotTable"]||this.$refs["fTableContainer_0"]&&this.$refs["fTableContainer_0"][0])){var width=this.isTabularReport?this.$refs["hotTable"].$el.clientWidth-47:this.$refs["fTableContainer_0"][0].clientWidth-49;this.multiTables.length&&this.multiTables.forEach((function(table){var cols=table.columns.length,colWidth=width/cols;colWidth<_this2.minWidth?colWidth=_this2.minWidth:colWidth>_this2.maxWidth&&(colWidth=_this2.maxWidth),colWidth*cols<width&&(_this2.hideColumn?table.showExtraColumn=!_this2.hideColumn:table.showExtraColumn=!_this2.isPrinting),
// this.isOverflowing = width < this.$refs['fTable'].clientWidth - 50
table.colWidth=colWidth+"px",_this2.hotSettings.colWidths=colWidth+"px"}))}},render:function(){this.showTable&&(this.setTableStateConfig(),this.setHotConfig(),this.setTableData(),this.setMultipleTables())},
/**
     * Setting columns in table state..If state already available, order of columns will be maintained
     */
setTableStateConfig:function(){var _this3=this;this.tableState={columns:[]};var dataPoints=[],FieldsIncluded=[];this.isTreeMap?this.$helpers.getDataPoints(this.reportConfig.options.dataPoints,[1,2,4,6],!0).forEach((function(dp){"group"===dp.type?dp.children.forEach((function(children){!FieldsIncluded.includes(children.fieldId)&&children.visible&&(FieldsIncluded.push(children.fieldId),dataPoints.push(children))})):!FieldsIncluded.includes(dp.fieldId)&&dp.visible&&(FieldsIncluded.push(dp.fieldId),dataPoints.push(dp))})):this.$helpers.getDataPoints(this.reportConfig.options.dataPoints,[1,2,4,6],!0).forEach((function(dp){"group"===dp.type?dp.children.forEach((function(children){children.visible&&dataPoints.push(children)})):dp.visible&&dataPoints.push(dp)}));var aliases=[];this.reportConfig&&this.reportConfig.data&&(this.reportConfig.data.x||this.reportConfig.data.X||this.reportConfig.scatterConfig)&&aliases.push(this.reportObject.report.xAlias||"X"),
// if(this.reportConfig.options.regressionConfig){
//   let xDataPoint = this.reportObject.report.dataPoints.filter((dp) => dp.yAxis.fieldId === this.reportConfig.options.regressionConfig[0].xAxis.readingId
//     && dp.metaData.parentIds[0] === this.reportConfig.options.regressionConfig[0].xAxis.parentId
//   )
//   if(xDataPoint.length !== 0){
//     aliases.push(xDataPoint[0].aliases.actual)
//   }
// }
// else{
// }
dataPoints.forEach((function(dp){dp.pointType&&dp.pointType!==FNewAnalyticsModelHelper/* default */.Z.dataTypes().REGRESSION&&(
// if (!this.dataMap[dp.alias]) {
_this3.dataMap[dp.alias]=dp,dp.isBaseLine&&2===dp.pointType||aliases.push(dp.alias))}));var setTableStateColumns=function(aliases,idx){var _this3$tableState$col,_this3$tableState$col2,columns=aliases.map((function(alias){return{alias:alias}}));idx>=0?(_this3$tableState$col=_this3.tableState.columns).splice.apply(_this3$tableState$col,[idx,0].concat((0,toConsumableArray/* default */.Z)(columns))):(_this3$tableState$col2=_this3.tableState.columns).push.apply(_this3$tableState$col2,(0,toConsumableArray/* default */.Z)(columns))};if(this.reportObject.report.tabularState&&(this.tableState="string"===typeof this.reportObject.report.tabularState?JSON.parse(this.reportObject.report.tabularState):this.$helpers.cloneObject(this.reportObject.report.tabularState),
// Temp
this.tableState.columns.length&&!this.tableState.columns[0].alias&&(this.tableState.columns=[])),this.tableState.columns.length){
// TODO verify
if(this.tableState.columns=this.tableState.columns.filter((function(column){return aliases.includes(column.alias)})),this.tableState.columns[0].alias!==aliases[0]){var xColIdx=this.tableState.columns.findIndex((function(col){return col.alias===aliases[0]}));if(-1!==xColIdx){var xCols=this.tableState.columns.splice(xColIdx,1);this.tableState.columns.unshift(xCols[0])}else setTableStateColumns([aliases[0]],0)}if(this.tableState.columns.length!==aliases.length){var existingHeaders=this.tableState.columns.map((function(column){return column.alias})),remainingHeaders=aliases.filter((function(header){return!existingHeaders.includes(header)}));setTableStateColumns(remainingHeaders)}}else setTableStateColumns(aliases)},
/**
     * Setting Hot table configuration and column header names
     */
setHotConfig:function(){var label,_this4=this,hotColHeaders=[],hotColWidths=[],hotColumns=[],allDataPoints=FNewAnalyticsModelHelper/* default */.Z.getAllDataPoints(this.reportConfig.options),getHotType=(allDataPoints.find((function(dp){return"x"===dp.axes})),function(dataType){return 2===dataType||3===dataType?"numeric":"text"}),type="text";if(this.reportObject.report&&this.reportObject.report.reportState&&this.reportObject.report.reportState.reportResourceAliases&&"mvproject"===this.reportObject.report.reportState.reportResourceAliases.X)label="M&Vs";else if(6===this.reportObject.mode)label="Site";else if(7===this.reportObject.mode)label="Building";else if(8===this.reportObject.mode)label="Asset";else if(2===this.reportObject.mode)label="Asset";else{
//  else if (xDataPoint && !this.reportConfig.options.regressionConfig) {
//   label = xDataPoint.label
//   type = getHotType(xDataPoint.dataTypeId)
// }
var xAxis=this.reportObject.report.dataPoints[0].xAxis;label=xAxis.label,type=getHotType(xAxis.dataType)}hotColHeaders.push(label.toUpperCase());var xColumn=this.tableState.columns[0];hotColumns.push({type:type,name:xColumn.alias,columnSpan:0}),xColumn.width&&hotColWidths.push(xColumn.width);for(var noOfColumns=this.tableState.columns.length,_loop=function(){var column=_this4.tableState.columns[i],dataPoint=_this4.dataMap[column.alias];if(column.displayName)hotColHeaders.push(column.displayName.toUpperCase());else{var name=(!0===dataPoint.duplicateDataPoint&&_this4.reportObject&&(_this4.reportObject.report&&0!==_this4.reportObject.report.xAggr||![1,4,"reading"].includes(_this4.reportObject.mode))?_this4.aggrMap[dataPoint.aggr]+" OF ":"")+dataPoint.label.toUpperCase()+(dataPoint.unitStr?" ("+dataPoint.unitStr+")":"");hotColHeaders.push(name)}var columnSpan=0,subColumnHeaders=[],columnSpanDp=_this4.reportConfig.options.dataPoints.filter((function(dp){return dp.alias===column.alias}));if(0!==columnSpanDp.length&&"rangeGroup"===columnSpanDp[0].type)columnSpan=dataPoint.children.length;else if(_this4.reportConfig.options.isGroupedByTime){var keys=Object.keys(_this4.reportConfig.data);subColumnHeaders=keys.filter((function(key){return"x"!==key&&key.split("_")[0]===column.alias})),subColumnHeaders=subColumnHeaders.map((function(header){return header.split("_")[1]})),columnSpan=subColumnHeaders.length}else columnSpan=0;var type=null;type=dataPoint.dataTypeId||0===columnSpanDp.length||"rangeGroup"!==columnSpanDp[0].type?getHotType(dataPoint.dataTypeId):"array";var col={type:type,name:dataPoint.alias,columnSpan:columnSpan};0!==col.columnSpan&&(subColumnHeaders.length>0?col["subColumnHeaders"]=subColumnHeaders:col["subColumnHeaders"]=["min","avg","max"]),4!==dataPoint.dataTypeId&&8!==dataPoint.dataTypeId||(col.renderer="html",_this4.reportObject.xAggr?(col.showOptions=!0,column.enumMode?column.enumMode===EnumMode.PERCENT&&(hotColHeaders[i]=hotColHeaders[i]+" (%)"):column.enumMode=EnumMode.DURATION):column.enumMode=null),11===_this4.reportObject.mode&&6===dataPoint.dataTypeId&&(hotColHeaders[i]="Duration"),hotColumns.push(col),column.width&&hotColWidths.push(column.width)},i=1;i<noOfColumns;i++)_loop();hotColWidths.length===hotColumns.length&&(this.hotSettings.colWidths=hotColWidths),this.hotSettings.columns=hotColumns,this.hotSettings.colHeaders=hotColHeaders,this.widget&&Object.assign(this.hotSettings,this.widgetSettings)},setTableData:function(){var _this5=this,tableData=[],xColumn=this.tableState.columns[0],xDataType=null;FNewAnalyticsModelHelper/* default */.Z.getAllDataPoints(this.reportConfig.options).find((function(dP){return"x"===dP.axes}));
// if (xDataPoint) {
//   xDataType = xDataPoint.dataTypeId
// } else {
xDataType=this.reportObject.report.dataPoints[0].xAxis.dataType;
// }
var enumMap=this.reportObject.report.dataPoints[0].xAxis.enumMap,isTimeSeries=5===xDataType||6===xDataType,period=this.getTimePeriod(this.reportObject),data=null;if(data=this.reportObject.reportData.data,this.reportConfig.options.isGroupedByTime){if(this.reportConfig.options.isGroupedByTime){var timeMap={};data.forEach((function(row){var xVal,index=data.indexOf(row);xVal=_this5.reportConfig.options.regressionConfig?_this5.reportConfig.options.timeValues&&period?_this5.formatDate(_this5.reportConfig.options.timeValues[index],period):_this5.reportConfig.options.timeValues[index]:2===_this5.reportObject.mode?_this5.assets[row[xColumn.alias]]:row[xColumn.alias],isTimeSeries&&(xVal=_this5.formatDate(xVal,period)),11===_this5.reportObject.mode&&(xVal=enumMap[xVal]),timeMap[xVal]||(timeMap[xVal]={});var groupedData=row.group,groupByTimeAggr=parseInt(_this5.reportObject.report.reportState.groupByTimeAggr);if(groupedData){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(groupedData);try{for(_iterator.s();!(_step=_iterator.n()).done;){var gData=_step.value;if(gData[xColumn.alias]){var _period=_this5.getPeriodFromAggr(groupByTimeAggr),formattedTime=_this5.convertToDateFormat(new Date(gData[xColumn.alias]),_period);["hourofday","dayofmonth"].includes(_period)&&(formattedTime=_this5.convertToTooltipFormat(new Date(gData[xColumn.alias]),_period));var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(_this5.tableState.columns);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var column=_step2.value;column.alias!==xColumn.alias&&(timeMap[xVal][column.alias+"_"+formattedTime]=gData[column.alias]?gData[column.alias]:null)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}));for(var keys=Object.keys(this.reportConfig.data),_i2=0,_Object$keys=Object.keys(timeMap);_i2<_Object$keys.length;_i2++){var xVal=_Object$keys[_i2],newRow=[];newRow.push(xVal);var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(this.tableState.columns);try{var _loop3=function(){var column=_step3.value;if(column.alias!==xColumn.alias){var _step4,value=[],subColumnHeaders=keys.filter((function(key){return"x"!==key&&key.split("_")[0]===column.alias})).map((function(header){return header.split("_")[1]})),_iterator4=(0,createForOfIteratorHelper/* default */.Z)(subColumnHeaders);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var key=_step4.value;timeMap[xVal][column.alias+"_"+key]?value.push(timeMap[xVal][column.alias+"_"+key]):value.push(null)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}newRow.push(value)}};for(_iterator3.s();!(_step3=_iterator3.n()).done;)_loop3()}catch(err){_iterator3.e(err)}finally{_iterator3.f()}tableData.push(newRow)}}}else data.forEach((function(row){var xVal,newRow=[],index=data.indexOf(row);
// xVal = xVal  + ' (' + this.formatDate(this.reportConfig.options.timeValues[index], period) + ')'
xVal=_this5.reportConfig.options.regressionConfig?
// xVal = row['x']
_this5.reportConfig.options.timeValues&&period?_this5.formatDate(_this5.reportConfig.options.timeValues[index],period):_this5.reportConfig.options.timeValues[index]:2===_this5.reportObject.mode?_this5.assets[row[xColumn.alias]]:row[xColumn.alias],isTimeSeries&&(xVal=_this5.formatDate(xVal,period)),11===_this5.reportObject.mode&&(xVal=enumMap[xVal])
/* else if (xDataType === 2 || xDataType === 3) {
          xVal = d3.format(',')(xVal)
          } */,newRow.push(xVal);for(var _loop2=function(){var column=_this5.tableState.columns[i],value=null;if("rangeGroup"===_this5.dataMap[column.alias].type){var range=["min","avg","max"];value=[];for(var _i=0,_range=range;_i<_range.length;_i++){var r=_range[_i];value.push(row[column.alias+"."+r])}}else value=row[column.alias];if(value&&!_this5.reportConfig.options.isGroupedByTime){var dataPoint=_this5.dataMap[column.alias];if("rangeGroup"===dataPoint.type)value.forEach((function(val){return d3.format(",")(val)}));else if(2===dataPoint.dataTypeId||3===dataPoint.dataTypeId)value=_this5.tableConfig&&_this5.tableConfig.removeNegativeValue&&value<0?0:d3.format(",")(value);else if(4===dataPoint.dataTypeId||8===dataPoint.dataTypeId){var enumVal=value;if(value=null,column.enumMode){if(column.enumMode===EnumMode.GRAPH);else if(column.enumMode===EnumMode.PERCENT){if(enumVal.duration){var total=Object.keys(enumVal.duration).reduce((function(previous,key){return previous+enumVal.duration[key]}),0),percent="";Object.keys(enumVal.duration).sort().forEach((function(key){value=enumVal.duration[key]/total*100,value=Math.round(100*value)/100,percent+=dataPoint.enumMap[key]+": "+value+"<br/>"})),value=percent}}else
// DURATION
if(enumVal.duration){var duration="";Object.keys(enumVal.duration).sort().forEach((function(key){duration+=dataPoint.enumMap[key]+": "+(0,formatter/* formatDuration */.LU)(enumVal.duration[key],"milliseconds",null,7)+"<br/>"})),value=duration}
/* value = dataPoint.enumMap[0] + ': ' + d3.format(',')(value.duration[0]) + '<br/>' +
                  dataPoint.enumMap[1] + ': ' + d3.format(',')(value.duration[1]) */}else enumVal.timeline&&enumVal.timeline[0]&&(value=dataPoint.enumMap[enumVal.timeline[0].value],enumVal.timeline[1]&&(value=dataPoint.enumMap[enumVal.timeline[1].value]))}else 5===dataPoint.dataTypeId?value=_this5.formatDate(value,!0):6===dataPoint.dataTypeId?value=_this5.formatDate(value):11===_this5.reportObject.mode&&(value=NumberFormatHelper/* default */.Z.formatTime(value))}newRow.push(value)},i=1;i<_this5.tableState.columns.length;i++)_loop2();tableData.push(newRow)}));isTimeSeries&&[17,18,19].includes(this.reportObject.xAggr)&&(tableData=this.getSortedData(this.reportObject.xAggr,tableData)),this.hotSettings.data=tableData},
/**
     *   Splitting table for print view
     */
setMultipleTables:function(){this.multiTables=[],this.maxColumn=this.isPrinting?MAX_COLUMN:this.hotSettings.colHeaders.length;for(var i=0;i<this.hotSettings.colHeaders.length;i++){var tableNo=Math.floor(i/this.maxColumn),table=this.multiTables[tableNo];table||(table={columns:[],colWidth:"",showExtraColumn:!1},this.$set(this.multiTables,tableNo,table)),table.columns.push(this.hotSettings.colHeaders[i])}},saveCurrentState:function(){for(var _this6=this,stateColumns=[],_loop4=function(){var colWidth=_this6.hotTable.getColWidth(i),idx=_this6.hotTable.toPhysicalColumn(i),name=_this6.hotSettings.columns[idx].name,stateColumn=_this6.tableState.columns.find((function(col){return col.name===name}));stateColumn.width=colWidth,stateColumns.push(stateColumn)},i=0;i<this.hotTable.getColHeader().length;i++)_loop4();this.tableState.columns=stateColumns,this.reportConfig.params.tabularState=JSON.stringify(this.tableState)},formatDate:function(date,period){var dateFormat=this.getDateFormat(period);return this.$options.filters.toDateFormat(new Date(date),dateFormat.tooltip)},convertToDateFormat:function(date,period){var dateFormat=this.getDateFormat(period);return this.$options.filters.toDateFormat(new Date(date),dateFormat.format)},getColIdx:function(index,tindex){return index%this.maxColumn+(tindex>0?tindex*this.maxColumn:0)},initOptions:function(index,tindex){var idx=this.getColIdx(index,tindex);this.options.state=this.$helpers.cloneObject(this.tableState.columns[idx])},saveOptions:function(index,tindex){var _this7=this,setOption=function(colIdx){var column=_this7.tableState.columns[colIdx],dataPoint=_this7.dataMap[column.alias];!dataPoint||4!==dataPoint.dataTypeId&&8!==dataPoint.dataTypeId||_this7.$set(column,"enumMode",_this7.options.state.enumMode)};if(this.options.applyAll)this.tableState.columns.forEach((function(column,colIdx){setOption(colIdx)})),this.options.applyAll=!1;else{var idx=this.getColIdx(index,tindex);setOption(idx)}this.setHotConfig(),this.setTableData(),this.setMultipleTables(),this.reportConfig.params.tabularState=JSON.stringify(this.tableState)},getSortedData:function(xAggr,data){var referenceData=[],temp=[];17===parseInt(xAggr)?referenceData=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:18===parseInt(xAggr)?referenceData=["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","13th","14th","15th","16th","17th","18th","19th","20th","21st","22nd","23rd","24th","25th","26th","27th","28th","29th","30th","31st"]:19===parseInt(xAggr)&&(referenceData=["12 am","1 am","2 am","3 am","4 am","5 am","6 am","7 am","8 am","9 am","10 am","11 am","12 pm","1 pm","2 pm","3 pm","4 pm","5 pm","6 pm","7 pm","8 pm","9 pm","10 pm","11 pm"]);for(var _i3=0,_referenceData=referenceData;_i3<_referenceData.length;_i3++){var _step5,rdata=_referenceData[_i3],_iterator5=(0,createForOfIteratorHelper/* default */.Z)(data);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var record=_step5.value;record[0]===rdata&&temp.push(record)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}return temp}}},components_FTabularOptimizevue_type_script_lang_js=FTabularOptimizevue_type_script_lang_js,FTabularOptimize_component=(0,componentNormalizer/* default */.Z)(components_FTabularOptimizevue_type_script_lang_js,FTabularOptimizevue_type_template_id_235deb84_render,FTabularOptimizevue_type_template_id_235deb84_staticRenderFns,!1,null,null,null)
/* harmony default export */,FTabularOptimize=FTabularOptimize_component.exports,FNewChartSettings=__webpack_require__(83322),FMobileMultiChart=__webpack_require__(696593),PredictionTimingsBar=__webpack_require__(107387),NewDateHelper=__webpack_require__(105534),FNewHeatMap=__webpack_require__(283938),FTreeMap=__webpack_require__(650976),NewReportSummaryHelper=__webpack_require__(601458),ReportFilter=__webpack_require__(587365),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),vue_runtime_esm=__webpack_require__(720144),validation=__webpack_require__(990260),FChartType=__webpack_require__(294309),FNAROptimizevue_type_script_lang_js={props:["printView","config","baseLines","readings","showChartMode","showTimePeriod","showFilterBar","noChartState","heatMapOptions","chartDimensions","showHeadingOnlyForPdf"],mixins:[NewDataFormatHelper/* default */.Z,AnalyticsMixin/* default */.Z,NewDateHelper/* default */.Z,NewReportSummaryHelper/* default */.Z],components:{NewDatePicker:NewDatePicker/* default */.Z,FNewChart:FNewChartOptimize/* default */.Z,FMultiChart:FMultiChart/* default */.Z,FTabularReport:FTabularOptimize,FMobileChart:FMobileChart/* default */.Z,FChartSettings:FNewChartSettings/* default */.Z,FMobileMultiChart:FMobileMultiChart/* default */.Z,PredictionTimingsBar:PredictionTimingsBar/* default */.Z,FNewHeatMap:FNewHeatMap/* default */.Z,FTreeMap:FTreeMap/* default */.Z,ReportFilter:ReportFilter/* default */.Z,FChartType:FChartType/* default */.Z},data:function(){return{pdfDateRange:{},pdfloading:!1,loading:!0,predictive:!0,failed:!1,reportObj:null,resultObj:null,showRangeChartDialog:!1,chartgenerated:!1,showTemplateFilter:!1,componentkey:0,FirstDateFromPicker:!1,appliedDateFilter:null,trendLineDataPoints:null,showReportFilter:!1,hasReportFilter:!1,existingOptions:[],excludeParamsObj:{}}},mounted:function(){var _JSON$parse,_this$$route$query$ex=this.$route.query.excludeParams,excludeParams=void 0===_this$$route$query$ex?{}:_this$$route$query$ex;this.excludeParamsObj=(0,validation/* isEmpty */.xb)(excludeParams)?{}:null!==(_JSON$parse=JSON.parse(excludeParams))&&void 0!==_JSON$parse?_JSON$parse:{},this.init()},computed:{hideTable:function(){return this.excludeParamsObj.table},getDateRangeString:function(){var dateRange=(0,validation/* isEmpty */.xb)(this.pdfDateRange)?this.$getProperty(this.resultObj,"dateRange.value",{}):this.pdfDateRange.value,startTime=moment_timezone_default()(dateRange[0]).tz(vue_runtime_esm["default"].prototype.$timezone).format("DD/MM/YYYY"),endTime=moment_timezone_default()(dateRange[1]).tz(vue_runtime_esm["default"].prototype.$timezone).format("DD/MM/YYYY");return"".concat(startTime," to ").concat(endTime)},reportName:function(){return this.$getProperty(this,"reportObj.alarms.regions.0.alarms.0.subject")||null},isHeatMap:function(){return!(!this.$route||!this.$route.meta||"heatmap"!==this.$route.meta.analyticsType)||!(!this.config||3!==this.config.analyticsType)},isTreeMap:function(){return!(!this.$route||!this.$route.meta||"treemap"!==this.$route.meta.analyticsType)||!(!this.config||7!==this.config.analyticsType)},getAvailablePeriods:function(){var operationOnId=this.config.dateFilter.operationOnId,avail=[];
// avail.push({
//   name:'Week of year', // W1, W2
//   value: 16,
//   enable: true
// })
// avail.push({
//   name:'Month of year', // Jan, Feb , march
//   value: 15,
//   enable: true
// })
return avail.push({name:"High-res",value:0,enable:6===operationOnId||4!==operationOnId}),avail.push({name:"Hourly",value:20,enable:6===operationOnId||4!==operationOnId}),avail.push({name:"Daily",value:12,enable:!0}),avail.push({name:"Weekly",value:11,enable:!0}),avail.push({name:"Monthly",value:10,enable:!0}),avail.push({name:"Quarterly",value:25,enable:4===operationOnId||5===operationOnId}),avail.push({name:"Yearly",value:8,enable:4===operationOnId}),avail.push({name:"Hour of day",
// 12, 1, 2, 3
value:19,enable:!0}),avail.push({name:"Day of week",
// sun, mon
value:17,enable:!0}),avail.push({name:"Day of month",
// 1,2,3
value:18,enable:!0}),avail},isRegression:function(){return!!this.$route.path.includes("regression")}},created:function(){this.showHeadingOnlyForPdf&&(this.pdfDateRange=JSON.parse(this.$route.query.daterange)),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity")},watch:{config:{handler:function(newData,oldData){this.config.applyReportDate||(!this.config.mode||"reading"!==this.config.mode&&11!==this.config.mode||null!==this.config.dimensionDataPoint)&&this.init(!1)},deep:!0},heatMapOptions:{handler:function(newData,oldData){this.$refs["heatmap"]&&this.$refs["heatmap"].rerender(),this.$refs["treemap"]&&this.$refs["treemap"].rerender()},deep:!0},chartDimensions:{handler:function(newData,oldData){this.$refs["heatmap"]&&this.$refs["heatmap"].resize(),this.$refs["treemap"]&&this.$refs["treemap"].resize()},deep:!0},getAvailablePeriods:{handler:function(newData,oldData){var _this=this;if(3!==this.config.analyticsType){var avail=this.getAvailablePeriods,selected=avail.find((function(a){return a.value===_this.config.period&&a.enable}));if(!selected){var filterName=this.config.dateFilter.operationOn,defaultPeriod=avail.filter((function(a){return a.enable}))[0].value;"week"===filterName||"month"===filterName?defaultPeriod=12:"year"===filterName&&(defaultPeriod=10),this.config.period=defaultPeriod}}},immediate:!0}},methods:{forceRerender:function(){this.$refs["newDatePicker"]&&!this.FirstDateFromPicker?this.componentkey=this.componentkey+1:this.setDateFilter(this.appliedDateFilter)},getOptionsFromTypeChart:function(options,ctype){
//to set the chart type based on the widget
this.reportObj&&(this.reportObj.options.type=ctype.value)},changeParentForTemplate:function(){this.config.template&&(this.config.template.parentId=this.resultObj.report.currentTemplate.parentId)},onPeriodChange:function(){if(!this.config.dataPoints.length){var filter="D";20===this.config.period?filter="W":12===this.config.period?filter="M":10===this.config.period&&(filter="Y"),this.config.dateFilter=this.getDefaultDateFilter(filter)}},chartgenerate:function(value){var _this2=this;setTimeout((function(){return _this2.chartgenerated=value}),10)},addRangePoints:function(val,remainingDataPoints){var _step,ranges=["min","max","avg"],dataPoints=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(val);try{for(_iterator.s();!(_step=_iterator.n()).done;){var rangeConfig=_step.value;for(var key in rangeConfig){var config={};ranges.includes(key)&&(config["parentId"]=rangeConfig[key].parentId,config["prediction"]=!1,config["aliases"]={actual:rangeConfig[key].alias},config["yAxis"]={aggr:rangeConfig[key].aggr,fieldId:rangeConfig[key].fieldId},dataPoints.push(config))}}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(remainingDataPoints);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var dataPoint=_step2.value,_config={};_config["parentId"]=dataPoint.metaData.parentIds[0],_config["prediction"]=!1,_config["aliases"]={actual:dataPoint.aliases.actual},_config["yAxis"]={aggr:dataPoint.yAxis.aggr,fieldId:dataPoint.yAxis.fieldId},dataPoints.push(_config)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}var analyticConfig=this.$helpers.cloneObject(this.config);analyticConfig.dataPoints=dataPoints,analyticConfig.period="undefined"!==typeof this.config.period&&null!==this.config.period?0===this.config.period?this.getXAggr():this.config.period:0,this.$emit("update:config",analyticConfig)},setDateFilter:function(dateFilter){this.FirstDateFromPicker=!0,this.appliedDateFilter=dateFilter,this.$set(this.config,"dateFilter",dateFilter)},init:function(){this.$store.dispatch("loadAlarmSeverity"),this.config.dataPoints.length>0&&this.initChart()},resize:function(){this.$refs["newChart"]&&this.$refs["newChart"].resize(),this.$refs["multiChart"]&&this.$refs["multiChart"].resize(),this.$refs["heatmap"]&&this.$refs["heatmap"].resize(),this.$refs["treemap"]&&this.$refs["treemap"].resize(),this.$refs["newTable"]&&this.$refs["newTable"].resize()},getReportParams:function(){var baselines,baselineNames,_this3=this;if(this.config.baseLine&&Array.isArray(this.config.baseLine)&&this.config.baseLine.length){if(this.config.baseLine[0]>0){var bl={};bl.baseLineId=this.config.baseLine[0],this.config.baseLine.length>1&&(bl.adjustType=this.config.baseLine[1]);var blList=[];blList.push(bl),baselines=blList}}else this.config.baseLine&&this.config.baseLine>0&&(baselines=[{baseLineId:this.config.baseLine}]);baselines&&this.baseLines&&(baselineNames=[],baselines.forEach((function(baseline){var baseLineName=_this3.baseLines.find((function(bl){return bl.id===baseline.baseLineId})).name;baselineNames.push(baseLineName)})));var fields=[];if(3===this.config.mode){var _step3,parentId=[],fieldId=null,yAggr=3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(this.config.dataPoints);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var dp=_step3.value;parentId.push(dp.parentId),fieldId=dp.yAxis.fieldId,yAggr=this.getYAggr(dp)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}fields.push({parentId:parentId,yAxis:{fieldId:fieldId,aggr:0!==this.config.period&&0===yAggr?3:yAggr},type:1,aliases:{actual:"A"}}),this.setAlias(fields,baselineNames)}else{this.setAlias(this.config.dataPoints,baselineNames);var _step4,_iterator4=(0,createForOfIteratorHelper/* default */.Z)(this.config.dataPoints);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _dp=_step4.value,metaData={};_dp.categoryId&&(metaData.categoryId=_dp.categoryId),_dp.yAxis.aggr=this.getYAggr(_dp);var _params={};if(this.config.template?(_params={parentId:_dp.parentId?Array.isArray(_dp.parentId)?_dp.parentId:[_dp.parentId]:null,buildingId:_dp.buildingId?_dp.buildingId:-1,moduleName:_dp.moduleName,metaData:metaData,yAxis:{fieldId:_dp.yAxis.fieldId,aggr:_dp.yAxis.aggr},aliases:_dp.aliases,type:_dp.type>0?_dp.type:1,predictedTime:_dp.predictedTime,duplicateDataPoint:_dp.duplicateDataPoint,rule_aggr_type:null===_dp||void 0===_dp?void 0:_dp.rule_aggr_type,rightInclusive:null===_dp||void 0===_dp?void 0:_dp.rightInclusive},_dp.yAxis&&_dp.yAxis.dataType&&(_params.yAxis["dataType"]=_dp.yAxis.dataType),2===_dp.type&&(_params.yAxis["label"]=_dp.yAxis.label),_dp.yAxis.dynamicKpi&&(_params.yAxis.dynamicKpi=_dp.yAxis.dynamicKpi,_params.yAxis.dataType=null,_params.yAxis.fieldId=null)):_params={parentId:_dp.parentId?Array.isArray(_dp.parentId)?_dp.parentId:[_dp.parentId]:null,name:_dp.name,buildingId:_dp.buildingId?_dp.buildingId:-1,moduleName:_dp.moduleName,metaData:metaData,yAxis:_dp.yAxis,aliases:_dp.aliases,type:_dp.type>0?_dp.type:1,predictedTime:_dp.predictedTime,duplicateDataPoint:_dp.duplicateDataPoint,rule_aggr_type:null===_dp||void 0===_dp?void 0:_dp.rule_aggr_type,rightInclusive:null===_dp||void 0===_dp?void 0:_dp.rightInclusive},(0,validation/* isEmpty */.xb)(_dp.kpiType)||(_params["kpiType"]=_dp.kpiType),null!==this.config.dimensionDataPoint&&11!==this.config.mode){var xdp=this.config.dataPoints[this.config.dimensionDataPoint];xdp&&xdp.yAxis.fieldId&&xdp.parentId?_dp.yAxis.fieldId===xdp.yAxis.fieldId&&xdp.parentId===_dp.parentId&&xdp.aliases.actual===_dp.aliases.actual&&(_params["xDataPoint"]=!0):xdp&&2===xdp.type&&xdp.aliases.actual===_dp.aliases.actual&&(_params["xDataPoint"]=!0)}fields.push(_params)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}if(this.config.sorting&&[6,7,8,9,10,"mv"].includes(this.config.mode)&&(this.config.sorting.orderByFunc||this.config.sorting.limit)){var sortByField=this.config.sorting.sortByField;if(sortByField){var _field=fields.find((function(f){return f.yAxis.fieldId===sortByField}));_field||(sortByField=null)}sortByField||(sortByField=fields[0].yAxis.fieldId,this.config.sorting.sortByField=fields[0].yAxis.fieldId);var field=null;sortByField?field=fields.find((function(f){return f.yAxis.fieldId===sortByField})):this.config.dataPoints.length<=1&&(field=fields[0]),field&&(field.defaultSortPoint=!0,this.config.sorting.orderByFunc&&(field.orderByFunc=this.config.sorting.orderByFunc),this.config.sorting.limit&&(field.limit=this.config.sorting.limit))}var trendLine=null;this.config.savedReport&&this.config.savedReport.chartState&&(trendLine=JSON.stringify(JSON.parse(this.config.savedReport.chartState).trendLine));var params={mode:"reading"===this.config.mode?1:["mv"].includes(this.config.mode)?8:this.config.mode,startTime:(0,validation/* isEmpty */.xb)(this.pdfDateRange)?this.config.dateFilter.value[0]:this.pdfDateRange.value[0],endTime:(0,validation/* isEmpty */.xb)(this.pdfDateRange)?this.config.dateFilter.value[1]:this.pdfDateRange.value[1],groupByTimeAggr:this.config.groupByTimeAggr,
// xAggr: (this.config.mode === 1 || this.config.mode === 3 || this.config.mode === 4 || this.config.mode === 5) ? this.config.period : 0,
fields:JSON.stringify(fields),transformWorkflow:this.config.transformWorkflow,trendLine:trendLine};
// if (
//   this.config.savedReport &&
//   this.config.mode == 1 &&
//   this.config.period == 0
// ) {
//   if (this.config.savedReport && this.config.savedReport.timeFilter) {
//     params.timeFilter = this.config.savedReport.timeFilter
//   }
//   if (this.config.savedReport && this.config.savedReport.dataFilter) {
//     params.dataFilter = this.config.savedReport.dataFilter
//   }
// } else {
if(1==this.config.mode&&0==this.config.period&&("undefined"!==typeof this.config.reportFilter&&this.config.reportFilter.hasOwnProperty("timeFilter")&&(params.timeFilter=JSON.stringify(this.config.reportFilter.timeFilter)),"undefined"!==typeof this.config.reportFilter&&this.config.reportFilter.hasOwnProperty("dataFilter"))){var dConfig=this.config.reportFilter.dataFilter;for(var key in dConfig.conditions){var condition=dConfig.conditions[key];condition.currentAsset=this.$parent.filterToggle&&condition.parentId==this.config.dataPoints[0]["parentId"]}params.dataFilter=JSON.stringify(this.config.reportFilter.dataFilter)}
// }
if([6,7,9,10].includes(this.config.mode)||(params.xAggr=1===this.config.mode||3===this.config.mode||4===this.config.mode||5===this.config.mode?this.config.period:0),this.reportObj&&this.reportObj.options&&this.reportObj.options.settings?(params.showAlarms=this.reportObj.options.settings.alarm,params.showSafeLimit=this.reportObj.options.settings.safelimit):this.config.savedReport?(params.showAlarms=this.config.savedReport.showAlarms,params.showSafeLimit=this.config.savedReport.showSafeLimit):params.showSafeLimit=!0,(window.fetchMarkedAlso||this.shouldIncludeMarked)&&(params.shouldIncludeMarked=!0),baselines&&(params.baseLines=JSON.stringify(baselines)),this.config.filters&&![1,11,"reading"].includes(this.config.mode))if(this.config.filters.xCriteriaMode&&(["mv"].includes(this.config.mode)||this.config.mvPoints&&this.config.mvPoints.length>0))params.xCriteriaMode=5;else if(this.config.filters.xCriteriaMode)if(params.xCriteriaMode=this.config.filters.xCriteriaMode,this.config.filters.parentId&&this.config.filters.parentId.length)params.parentId=this.config.filters.parentId;else{var categoryId=this.config.filters.assetCategory;if(!categoryId||!categoryId.length){categoryId=[];var _step5,_iterator5=(0,createForOfIteratorHelper/* default */.Z)(this.config.dataPoints);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _dp2=_step5.value;-1===categoryId.indexOf(_dp2.categoryId)&&null!==_dp2.categoryId&&categoryId.push(_dp2.categoryId)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}categoryId.length&&(params.assetCategory=categoryId),this.config.filters.spaceId&&this.config.filters.spaceId.length&&(params.spaceId=this.config.filters.spaceId)}return this.$route.query&&this.$route.query.alarmId&&(params.alarmId=parseInt(this.$route.query.alarmId),params.showAlarms=!0),params},initChart:function(){var self=this;self.loading=!0,self.failed=!1;var Config=Object.assign({},this.config),apiURL=Config.api?Config.api:"/v2/report/readingReport",params=null;this.chartgenerated=!1,Config.alarmId&&(apiURL="/v2/report/fetchReadingsFromAlarm",params={alarmId:Config.alarmId,mode:1,xAggr:0,startTime:Config.dateFilter.value[0],endTime:Config.dateFilter.value[1],showAlarms:!0}),Config.readingRuleId&&(params.readingRuleId=Config.readingRuleId),Config.isWithPrerequsite&&(params.isWithPrerequsite=Config.isWithPrerequsite),params||(params=self.getReportParams()),Config.template&&Config.template.show&&(
// apiURL = apiURL + '?templateString=' + encodeURIComponent(JSON.stringify(this.config.template))
Config.template.parentId=null===Config.template.parentId?Config.dataPoints[0].parentId:Config.template.parentId,params.template=Config.template),Config.scatterConfig&&(params.scatterConfig=JSON.stringify({properties:Config.scatter,datapoints:Config.scatterConfig})),Config.analyticsType?params.analyticsType=Config.analyticsType:params.analyticsType=-1,Config&&Config.format&&(params.hmAggr=Config.format),params.newFormat=!0,params.defaultDate=Config.defaultDate,this.reportObj&&this.reportObj.options&&this.reportObj.options.trendLine.enable&&(params.trendLine=JSON.stringify(this.reportObj.options.trendLine)),self.$http.post(apiURL,params).then((function(response){var result=response.data.result,reportObj=JSON.parse(JSON.stringify(self.reportObj));
// To remove object observer from reportObj
result.xAggr=params.xAggr?params.xAggr:null,result.mode=params.mode,self.config.defaultDate&&(self.config.defaultDate=!1,Config.dateFilter.operatorId=result.report.dateOperator,self.config.dateFilter=result.dateRange=NewDateHelper/* default */.Z.getDatePickerObject(Config.dateFilter.operatorId,result.report.dateValue),self.$nextTick((function(){self.$refs.newDatePicker.loadFromObject()}))),Config.analyticsType&&(result.report.analyticsType=Config.analyticsType),Config.filters&&(result.filters=Config.filters),Config.sorting&&(result.sorting=Config.sorting),Config.applyReportDate?(Config.dateFilter=result.dateRange=NewDateHelper/* default */.Z.getDatePickerObject(Config.dateFilter.operatorId,result.report.dateValue),self.$nextTick((function(){self.$refs.newDatePicker.loadFromObject()}))):result.dateRange=Config.dateFilter,reportObj&&!Config.alarmId?(
// to save the current chart config into chartState meta for maintaining same chart config
"undefined"!==typeof self.noChartState?!1===self.noChartState&&(result.report.chartState=reportObj.options):result.report.chartState=reportObj.options,result.report.tabularState=reportObj.params.tabularState):Config.savedReport&&("undefined"!==typeof self.noChartState?!1===self.noChartState&&(result.report.chartState=Config.savedReport.chartState):result.report.chartState=Config.savedReport.chartState,result.report.tabularState=Config.savedReport.tabularState),self.existingOptions=[];var _step6,_iterator6=(0,createForOfIteratorHelper/* default */.Z)(result.report.dataPoints);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var dp=_step6.value;if(5!=dp.type&&2==Config.analyticsType){var existingOptionIds=self.existingOptions.map((function(option){return option.value})),assetId=dp.metaData&&dp.metaData.parentIds?dp.metaData.parentIds[0]:null;null==assetId||existingOptionIds.includes(assetId)||self.existingOptions.push({value:assetId,label:self.$parent.filterToggle?"Current Asset":dp.name.split(" (")[0]})}if(!0===dp.xDataPoint){result["Readingdp"]=dp;break}}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}
// if (result.report.chartState!=null && !result.report.chartState.settings.filterBar) {
//   result.report.dataPoints = result.report.dataPoints.filter(dp=>dp.type!=5)
// }
if(result.report.trendLineDataPoints&&(self.getTrendLineEquation(result),result.report.dataPoints=result.report.dataPoints.concat(result.report.trendLineDataPoints)),11===params.mode){var x=result.report.dataPoints[0].yAxis,y=result.report.dataPoints[0].xAxis;result.report.dataPoints[0].yAxis=y,result.report.dataPoints[0].xAxis=x}if(reportObj=self.prepareReport(result),2===Config.analyticsType&&1===Config.mode&&0===Config.period&&(self.hasReportFilter=Object.keys(self.config.reportFilter.timeFilter.conditions).length>0,self.hasReportFilter=Object.keys(self.config.reportFilter.dataFilter.conditions).length>0||self.hasReportFilter),(self.isHeatMap||self.isTreeMap)&&(reportObj.options.heatMapOptions=self.heatMapOptions),Config.template){var currentTemplate=JSON.parse(JSON.stringify(Config.template)),filters=self.getFiltersFromCriteria(currentTemplate);self.loadReportTemplateValues(currentTemplate,filters).then((function(){currentTemplate.parentId=null===currentTemplate.parentId?currentTemplate.defaultValue:currentTemplate.parentId,self.$set(self.resultObj.report,"currentTemplate",currentTemplate),self.showTemplateFilter=!0}))}(Config.isFromAlarmSummary||self.$route.query&&self.$route.query.isFromAlarmSummary&&!self.resultObj)&&reportObj.booleanData&&(reportObj.options.dataPoints=self.groupNonBooleanPoints(reportObj.options.dataPoints)),(self.$route.query&&self.$route.query.alarmId||Config.alarmId)&&(reportObj.options.settings.alarm=!0),self.resultObj=result,reportObj.params=params,reportObj.alarms=self.prepareBooleanReport(result.reportData.aggr),(Config.alarmId||self.alarmId)&&(reportObj.alarms.barSize="medium"),Config.regionConfig&&(reportObj.options.regionConfig=Config.regionConfig),Config.hideDataPoints&&(reportObj.options.hideDataPoints=Config.hideDataPoints),Config.chartType&&(reportObj.options.chartType=Config.chartType),Config.diffChartConfig&&(reportObj.options.diffChartConfig=Config.diffChartConfig),Config.point&&(reportObj.options.point=Config.point),Config.zoom&&(reportObj.options.zoom=Config.zoom),Config.axes&&(reportObj.options.axes=Config.axes),reportObj.options.xFormat="MM-DD-YYYY",Config.xFormat&&(reportObj.options.xFormat=Config.xFormat),Config.axis&&Object.keys(Config.axis).forEach((function(rt){reportObj.options.axis[rt].label&&(reportObj.options.axis[rt].label.text=Config.axis[rt].label)})),reportObj.options.predictionTimings=Config.predictionTimings,"single"!==reportObj.options.settings.chartMode||self.isHeatMap||self.isTreeMap||self.$route.meta&&self.$route.meta.layout&&"mobile"===self.$route.meta.layout||self.$nextTick((function(){self.$refs["newChart"]&&
// let renderObj = self.$helpers.cloneObject(reportObj)
// if(reportObj.options.trendLine.enable && self.trendLineDataPoints){
// renderObj.options.dataPoints = reportObj.options.dataPoints.concat(self.trendLineDataPoints)
// }
self.$refs["newChart"].render(reportObj)})),self.reportObj=reportObj,self.$emit("reportLoaded",reportObj,result),self.loading=!1,self.pdfloading=!0})).catch((function(error){error&&(self.loading=!1,self.failed=!0)}))},onSettingsChange:function(changedOption){"alarm"===changedOption?this.reportObj.alarms&&this.reportObj.alarms.regions.length||!this.reportObj.options.settings.alarm||this.init():"safelimit"===changedOption?!this.reportObj.options.safeLimit.length&&this.reportObj.options.settings.safelimit&&this.init():"filter"===changedOption&&this.reportObj.options.settings.hasOwnProperty("filterBar")&&this.init()},getYAggr:function(dp){return dp.yAxis&&dp.yAxis.aggr&&[2,3,4,5].includes(dp.yAxis.aggr)?6===dp.yAxis.aggr?3:dp.yAxis.aggr:dp.yAxis&&dp.yAxis.unitStr&&["currency","kwh","co2","kg","mwh"].includes(dp.yAxis.unitStr.trim().toLowerCase())?3:2},getTrendLineEquation:function(result){var self=this,trendLineProp=result.reportData.trendLineProp,trendLineObj={};trendLineObj=this.config.savedReport&&this.config.savedReport.chartState?JSON.parse(this.config.savedReport.chartState).trendLine:self.reportObj.options.trendLine;var decimalCount=trendLineObj.decimal,_loop=function(alias){var coef=trendLineProp[alias].coef;coef.forEach((function(data,index){coef[index]=self.showDecimal(data,decimalCount)+(0!==index?"x^"+index:"")})),coef.reverse(),coef=coef.join(" + ");var dataPoint=result.report.trendLineDataPoints.filter((function(dataPoint){return dataPoint.aliases.actual===alias}));dataPoint[0].name=coef,trendLineObj.showr2&&(dataPoint[0].name="R^2 = "+self.showDecimal(trendLineProp[dataPoint[0].aliases.actual].rSquare,decimalCount)+"; "+dataPoint[0].name)};for(var alias in trendLineProp)_loop(alias)},showDecimal:function(data,decimalCount){var splitData=data.split(".");return splitData[1]?splitData[0]+"."+splitData[1].slice(0,decimalCount):data},showRSquareValue:function(){var trendPoints=this.$helpers.getDataPoints(this.reportObj.options.dataPoints,[3],!1),trendLineProp=this.resultObj.reportData.trendLineProp;this.reportObj.options.trendLine.showr2?trendPoints.filter((function(point){point.label="R^2 = "+trendLineProp[point.alias].rSquare+";"+point.label})):trendPoints.filter((function(point){point.label=point.label.split("; ").splice(1)[0]})),self.$refs["newChart"].render(this.reportObj)},openReportFilterDialog:function(){this.showReportFilter=!0},setReportFilter:function(reportFilter){this.hasReportFilter=Object.keys(reportFilter.timeFilter.conditions).length>0,this.hasReportFilter=Object.keys(reportFilter.dataFilter.conditions).length>0||this.hasReportFilter,this.reportObj.options.settings.hasOwnProperty("filterBar")&&(this.reportObj.options.settings.filterBar=this.hasReportFilter),this.$set(this.config,"reportFilter",reportFilter)},removeFilters:function(parentKey){this.$emit("removeFilters",parentKey)}}},v1_FNAROptimizevue_type_script_lang_js=FNAROptimizevue_type_script_lang_js,FNAROptimize_component=(0,componentNormalizer/* default */.Z)(v1_FNAROptimizevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNAROptimize=FNAROptimize_component.exports},
/***/181242:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"da85ccff86897ff2fe48e5fab3a86d03.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/20245.js.map