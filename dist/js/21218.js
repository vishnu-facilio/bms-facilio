"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[21218],{
/***/864990:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Home}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/Home.vue?vue&type=template&id=01fe3d84
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.serverNotReachable?_c("div",[_c("server-not-reachable")],1):_vm.hasMetaLoaded?_c("div",{ref:"productLayout",staticClass:"newhome",class:{"tv-screen":_vm.isTvMode,normal:!_vm.isTvMode}},[_vm.serverNotReachable?_c("div",[_c("server-not-reachable")],1):[_c("FeatureNavBanner",{attrs:{showCollapseData:_vm.showCollapseData,bannerListData:_vm.bannerListData,showCloseBanner:_vm.showCloseBanner},on:{closeCollapseData:_vm.closeCollapseData,openCollapseData:_vm.openCollapseData}}),_c("div",{staticClass:"display-flex-between-space"},[_vm.$account.user.proxy?_c("el-alert",{staticClass:"fc-login-alert",attrs:{title:_vm.proxyBanner,type:"error",closable:!1,effect:"dark"}}):_vm._e()],1),_c("div",{class:_vm.getCollapseClass()},[_c("q-layout",{ref:"layout",staticClass:"fc-main",class:{themeClass:_vm.themeClass},style:_vm.getStyle(),attrs:{view:"HHr Lpr fFf"}},[_c("q-toolbar",{staticClass:"fc-toolbar toolbar",class:{"fc-honeywell-toolbar":_vm.isHoneywell&&"honeywell"===_vm.account.data.orgInfo.toolbar_theme},attrs:{slot:"header"},slot:"header"},[_vm.canShowAppLauncher?_c("div",{staticClass:"app-launcher",attrs:{id:"app-launcher",tabindex:"0"},on:{keypress:function(e){return _vm.dialogVisible="Enter"===e.key}}},[_c("img",{staticClass:"pointer",attrs:{src:__webpack_require__(369499),width:"20",height:"20"},on:{click:function($event){_vm.dialogVisible=!0}}})]):_vm._e(),"tjacob@nxn.ae"!==_vm.account.user.email?_c("router-link",{staticClass:"pointer",class:{customlogolink:_vm.isBuildingsTalk},attrs:{to:"/"}},[_c("ProductLogo",{attrs:{isHoneywell:_vm.isHoneywell,isBuildingsTalk:_vm.isBuildingsTalk,isMoro:_vm.isMoro}})],1):_c("div",{staticStyle:{"margin-left":"10px"}}),_vm.isBuildingsTalk?_c("div",{staticClass:"buildings-talk-text"},[_c("span",[_vm._v("buildings")]),_c("span",{staticStyle:{color:"#3eb359"}},[_vm._v("talk")])]):_vm._e(),_c("div",{staticClass:"fc-header-container"},[_vm.isTabsEnabled?_c("NavBar"):_c("modules-header",{attrs:{modulesList:_vm.modules,parentRef:this.$refs}}),_c("MenuBar",{ref:"menubar",attrs:{OfflineOnly:_vm.OfflineOnly,currentSite:_vm.currentSite,sites:_vm.site,setCurrentSite:_vm.setCurrentSite,newAlarms:_vm.newAlarms,resetAlarmUnseen:_vm.resetAlarmUnseen,account:_vm.account,toggleProfilePanel:function(){return _vm.profileContaioner=!_vm.profileContaioner}}})],1)],1),_c("sidebar"),_c("portal-target",{attrs:{name:"app-banner",slim:!0}}),_c("router-view",{staticClass:"pL60",class:{" tv-screen-layout":_vm.isTvMode},style:_vm.getScreenHeight()}),_c("footer-bar"),_vm.profileContaioner?_c("ProfilePanel",{attrs:{close:function(){return _vm.profileContaioner=!1},reportIssue:_vm.toggleReportIssue,account:_vm.account,isTvMode:_vm.isTvMode,switchAccount:_vm.switchAccount,switchScreen:_vm.switchScreen,switchTheme:_vm.switchTheme,orgs:_vm.orgs,screenTheame:_vm.screenTheame,logout:_vm.logout}}):_vm._e()],1)],1)],_vm.dialogVisible?_c("AppLauncher",{attrs:{close:function(){return _vm.dialogVisible=!1}}}):_vm._e(),_vm.dialogFormVisible?_c("NewApp",{attrs:{closeDialog:function(){return _vm.dialogFormVisible=!1}}}):_vm._e(),_c("ConnectedAppDialer"),_c("ConnectedAppTopbar"),_vm.showReportIssuePopup?_c("ReportIssue",{attrs:{onClose:function(){return _vm.toggleReportIssue(!1)}}}):_vm._e(),_c("Shortcuts")],2):_c("div",[_c("loader")],1),_c("popup-view",{ref:"dashboardPopupView"}),_c("quick-add-record",{ref:"quickAddRecord"})],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vue_runtime_esm=(__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(670560),__webpack_require__(720144)),HomeMixin=__webpack_require__(316322),vuex_esm=__webpack_require__(420629),ModulesHeader=__webpack_require__(154219),Sidebar=__webpack_require__(840174),ProfilePanel=__webpack_require__(735892),AppLauncher=__webpack_require__(518783),NewApp=__webpack_require__(808976),ProductLogo=__webpack_require__(673178),MenuBar=__webpack_require__(643951),NavBar=__webpack_require__(978483),ReportIssue=__webpack_require__(309182),router=__webpack_require__(329435),FeatureReleaseBanner=__webpack_require__(707034),validation=__webpack_require__(990260),ConnectedAppDialer=__webpack_require__(443036),ConnectedAppTopbarvue_type_template_id_3a0d83a1_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.widget?_c("div",[_vm.topbarMenuState.showMenu?_c("portal",{attrs:{to:"custom-topbar-menu",slim:""}},[_c("el-badge",{staticClass:"item",attrs:{"is-dot":_vm.topbarMenuState.badge.isDot,value:_vm.topbarMenuState.badge.value,max:_vm.topbarMenuState.badge.max,hidden:_vm.topbarMenuState.badge.hidden}},[_c("i",{class:_vm.topbarMenuState.icon,on:{click:_vm.onToggle}})])],1):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.topbarMenuState.visible,expression:"topbarMenuState.visible"}],staticClass:"capp-topbar-popover"},[_vm.topbarMenuState.header?_c("div",{staticClass:"capp-topbar-popover-header"},[_c("div",[_vm._v(" "+_vm._s(_vm.widget.widgetName)+" ")]),_c("i",{staticClass:"el-icon-close pointer f16 fwBold",on:{click:_vm.onToggle}})]):_vm._e(),_c("ConnectedAppViewWidget",{key:_vm.widget.id,ref:"ref-"+_vm.widget.id,staticClass:"capp-topbar-popover-container",style:{height:_vm.topbarMenuState.height+" !important"},attrs:{widgetId:_vm.widget.id,handlers:_vm.handlers}})],1)],1):_vm._e()},ConnectedAppTopbarvue_type_template_id_3a0d83a1_staticRenderFns=[],api=(__webpack_require__(648324),__webpack_require__(32284)),ConnectedAppViewWidget=__webpack_require__(767004),ConnectedAppTopbarvue_type_script_lang_js={components:{ConnectedAppViewWidget:ConnectedAppViewWidget["default"]},data:function(){return{widget:null,topbarMenuState:{showMenu:!1,header:!0,icon:"el-icon-help",height:"150px",visible:!1,badge:{value:null,max:null,isDot:!1,hidden:!1}},handlers:{}}},computed:{currentAppId:function(){return((0,router/* getApp */.wx)()||{}).id}},mounted:function(){this.initWidgetHandlers(),this.loadWidgets()},methods:{onToggle:function(){this.topbarMenuState.visible=!this.topbarMenuState.visible,this.topbarMenuState.visible?this.sendEvent("topbar.active",!0):this.sendEvent("topbar.inactive",!0)},initWidgetHandlers:function(){var _this=this,showMenu=function(_ref){var menu=_ref.menu;_this.topbarMenuState.showMenu=menu},showHeader=function(_ref2){var header=_ref2.header;_this.topbarMenuState.header=header},hide=function(){_this.topbarMenuState.visible=!1},resize=function(_ref3){var height=_ref3.height;_this.topbarMenuState.height=height||"150px"},setBadge=function(_ref4){var value=_ref4.value,max=_ref4.max,isDot=_ref4.isDot,hidden=_ref4.hidden;_this.topbarMenuState.badge.value=value||null,_this.topbarMenuState.badge.max=max||null,_this.topbarMenuState.badge.isDot=isDot||!1,_this.topbarMenuState.badge.hidden=hidden||!1},resetBadge=function(){_this.topbarMenuState.badge.value=null,_this.topbarMenuState.badge.max=null,_this.topbarMenuState.badge.isDot=!1,_this.topbarMenuState.badge.hidden=!1},setIcon=function(_ref5){var icon=_ref5.icon;_this.topbarMenuState.icon=icon||"el-icon-help"};this.handlers={showMenu:showMenu,showHeader:showHeader,hide:hide,resize:resize,setBadge:setBadge,resetBadge:resetBadge,setIcon:setIcon}},sendEvent:function(eventName,eventData){var id=this.widget.id,refElement=this.$refs["ref-".concat(id)];(0,validation/* isEmpty */.xb)(refElement)||refElement.sendEvent(eventName,eventData)},loadWidgets:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var filters,encodedFilters,url,_yield$API$get,data,_ref6,connectedAppWidgets;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return filters={entityType:{operatorId:9,value:["12"]},entityId:{operatorId:9,value:["".concat(_this2.currentAppId)]}},encodedFilters=encodeURIComponent(JSON.stringify(filters)),url="/v2/connectedApps/widgetList?filters=".concat(encodedFilters),_context.next=5,api/* API */.bl.get(url);case 5:_yield$API$get=_context.sent,data=_yield$API$get.data,data&&(_ref6=data||{},connectedAppWidgets=_ref6.connectedAppWidgets,connectedAppWidgets&&connectedAppWidgets.length&&(_this2.widget=connectedAppWidgets[0]));case 8:case"end":return _context.stop()}}),_callee)})))()}}},home_ConnectedAppTopbarvue_type_script_lang_js=ConnectedAppTopbarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(home_ConnectedAppTopbarvue_type_script_lang_js,ConnectedAppTopbarvue_type_template_id_3a0d83a1_render,ConnectedAppTopbarvue_type_template_id_3a0d83a1_staticRenderFns,!1,null,null,null)
/* harmony default export */,ConnectedAppTopbar=component.exports,Shortcuts=__webpack_require__(196735),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),track=__webpack_require__(801055),Homevue_type_script_lang_js={mixins:[HomeMixin/* default */.Z],components:{MenuBar:MenuBar/* default */.Z,Sidebar:Sidebar/* default */.Z,ProfilePanel:ProfilePanel/* default */.Z,ModulesHeader:ModulesHeader/* default */.Z,AppLauncher:AppLauncher/* default */.Z,NewApp:NewApp/* default */.Z,ProductLogo:ProductLogo/* default */.Z,NavBar:NavBar/* default */.Z,ReportIssue:ReportIssue/* default */.Z,FeatureNavBanner:FeatureReleaseBanner/* default */.Z,ConnectedAppDialer:ConnectedAppDialer/* default */.Z,ConnectedAppTopbar:ConnectedAppTopbar,Shortcuts:Shortcuts/* default */.Z},data:function(){return{showReportIssuePopup:!1,showCollapseData:!0,showCloseBanner:!0,keyPressed:[],counterPrefix:null,counter:null}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$store.dispatch("getCurrentAccount").then((function(){var _ref=_this.$route||{},path=_ref.path;(0,track/* track */.j)(path,_this.account)}));case 2:return _context.next=4,_this.$store.dispatch("getCurrentApp");case 4:return _context.next=6,_this.$store.dispatch("getFeatureLicenses");case 6:return _context.next=8,_this.initializeMeta();case 8:_this.$store.dispatch("loadSite"),_this.$store.dispatch("loadOrgs"),(0,router/* isWebTabsEnabled */.tj)()&&(document.addEventListener("keydown",_this.keyDownHandler),document.addEventListener("keyup",_this.keyUpHandler)),_this.$account.sessionEndTime&&(_this.counterPrefix="".concat(_this.$account.user.proxy," will be viewing as ").concat(_this.$account.user.userName," for "),_this.startTimer(_this.$account.sessionEndTime));case 12:case"end":return _context.stop()}}),_callee)})))()},mounted:function(){try{if(this.cssVariables)for(var cssvar in this.cssVariables)document.documentElement&&document.documentElement.style&&document.documentElement.style.setProperty(cssvar,this.cssVariables[cssvar]);
// eslint-disable-next-line no-empty
}catch(err){}},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&(document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account}})),(0,vuex_esm/* mapGetters */.Se)("webtabs",["isAppPrefEnabled"])),{},{isTabsEnabled:function(){return(0,router/* isWebTabsEnabled */.tj)()},proxyBanner:function(){return this.counterPrefix+(this.counter||"---")},canShowAppLauncher:function(){var isDevMode=!1,isEnabled=!1;if(this.isTabsEnabled)isEnabled=this.isAppPrefEnabled("canShowAppLauncher");else{var _this$$org=this.$org,$org=void 0===_this$$org?{}:_this$$org;isEnabled=[321,155,173,78,174,429,17,566,569,656,486].includes($org.id)&&!this.$helpers.isEtisalat()}return isDevMode||isEnabled}}),watch:{account:function(){var _this2=this;this.$refs["dashboardPopupView"]?(vue_runtime_esm["default"].prototype.$popupView=this.$refs["dashboardPopupView"],this.$refs["quickAddRecord"]&&(vue_runtime_esm["default"].prototype.$quickAdd=this.$refs["quickAddRecord"])):this.$nextTick((function(){vue_runtime_esm["default"].prototype.$popupView=_this2.$refs["dashboardPopupView"],_this2.$refs["quickAddRecord"]&&(vue_runtime_esm["default"].prototype.$quickAdd=_this2.$refs["quickAddRecord"])}))}},methods:{startTimer:function(endTime){var _this3=this,startTime=Date.now();if(!(startTime>endTime)){var duration=endTime-startTime,interval=1e3;setInterval((function(){duration=moment_timezone_default().duration(duration-interval,"milliseconds"),_this3.counter=moment_timezone_default().utc(duration.as("milliseconds")).format("HH:mm:ss")}),interval)}},toggleReportIssue:function(){var val=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.showReportIssuePopup=val},closeCollapseData:function(){this.showCollapseData=!1},openCollapseData:function(){this.showCollapseData=!0},getCollapseClass:function(){return 1===this.bannerListData.type?{bannerOpenActive:this.showCloseBanner,bannerCloseActive:!this.showCloseBanner}:2===this.bannerListData.type?{activeBanner:this.showCollapseData,inActive:!this.showCollapseData}:this.$account.user.proxy?"activeBanner":void 0},keyDownHandler:function(e){this.keyPressed.push(e.key)},keyUpHandler:function(){if(!(0,validation/* isEmpty */.xb)(this.keyPressed)){var _ref2=this.keyPressed||[],_ref3=(0,slicedToArray/* default */.Z)(_ref2,3),shiftKey=_ref3[0],aKey=_ref3[1],pKey=_ref3[2];"Shift"===shiftKey&&"A"===aKey&&"P"===pKey&&document.getElementById("app-launcher").focus(),this.keyPressed=[]}}}},pages_Homevue_type_script_lang_js=Homevue_type_script_lang_js,Home_component=(0,componentNormalizer/* default */.Z)(pages_Homevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Home=Home_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/21218.js.map