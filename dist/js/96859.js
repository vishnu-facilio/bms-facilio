"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[96859],{
/***/784683:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return WorkOrderInventoryPlan}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v3/widgets/plans/WorkOrderInventoryPlan.vue?vue&type=template&id=8cf03414
var WorkOrderPlans_render,WorkOrderPlans_staticRenderFns,WorkOrderPlannedItems_render,WorkOrderPlannedItems_staticRenderFns,WorkOrderPlannedTools_render,WorkOrderPlannedTools_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-tabs",{model:{value:_vm.moduleName,callback:function($$v){_vm.moduleName=$$v},expression:"moduleName"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("common.header.items"),name:"workOrderPlannedItems"}},["workOrderPlannedItems"==_vm.moduleName?_c("WorkOrderPlannedItems",_vm._b({staticClass:"height-100",attrs:{workOrderId:_vm.details.id,workorder:_vm.workorder,widget:_vm.widget,disableActionableUIElements:_vm.disableActionableUIElements}},"WorkOrderPlannedItems",_vm.$attrs,!1)):_vm._e()],1),_c("el-tab-pane",{attrs:{label:_vm.$t("common.header.tools"),name:"workOrderPlannedTools"}},["workOrderPlannedTools"==_vm.moduleName?_c("WorkOrderPlannedTools",_vm._b({staticClass:"height-100",attrs:{workOrderId:_vm.details.id,workorder:_vm.workorder,widget:_vm.widget,disableActionableUIElements:_vm.disableActionableUIElements}},"WorkOrderPlannedTools",_vm.$attrs,!1)):_vm._e()],1),_c("el-tab-pane",{attrs:{label:_vm.$t("common.products.services"),name:"workOrderPlannedServices"}},["workOrderPlannedServices"==_vm.moduleName?_c("WorkOrderPlannedServices",_vm._b({staticClass:"height-100",attrs:{workOrderId:_vm.details.id,workorder:_vm.workorder,widget:_vm.widget,disableActionableUIElements:_vm.disableActionableUIElements}},"WorkOrderPlannedServices",_vm.$attrs,!1)):_vm._e()],1),_c("el-tab-pane",{attrs:{label:_vm.$t("common.header.labours"),name:"workOrderPlannedLabours"}},["workOrderPlannedLabours"==_vm.moduleName?_c("WorkOrderPlannedLabours",_vm._b({staticClass:"height-100",attrs:{workOrderId:_vm.details.id,resizeWidget:_vm.resizeWidget,workorder:_vm.workorder,widget:_vm.widget,disableActionableUIElements:_vm.disableActionableUIElements}},"WorkOrderPlannedLabours",_vm.$attrs,!1)):_vm._e()],1)],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),CustomModuleData=(__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(670560),__webpack_require__(689565)),WorkorderPlannedInventoryvue_type_template_id_4aa6489a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("LineItemList",_vm._b({ref:"lineItemTable",staticClass:"height-100",attrs:{config:_vm.listConfiguration,moduleName:_vm.moduleName,widgetDetails:_vm.widgetDetails,additionalParams:_vm.additionalParams,moduleDisplayName:_vm.moduleDisplayName,viewname:"all"},on:{onDelete:function($event){return _vm.reloadCost()},onCreateOrUpdate:function($event){return _vm.reloadCost()},handleSelection:_vm.selectedRecords},scopedSlots:_vm._u([{key:"bulk-actions",fn:function(){return[_c("div",{staticClass:"d-flex"},[_c("span",{class:{"cursor-not-allowed disabled":_vm.disableActionableUIElements}},[_vm.checkWoManageInventoryPermission()?_c("div",{staticClass:"btn-container margin-auto",class:{"pointer-events-none":_vm.disableActionableUIElements},on:{click:function($event){return _vm.reserveMultipleLineItems()}}},[_c("div",{staticClass:"text-center"},[_c("Inline-svg",{attrs:{src:"svgs/plans/ic-check-circle-reserve",iconClass:"icon icon-sm-md"}})],1),_c("span",{staticClass:"reserve text-center"},[_vm._v(" "+_vm._s(_vm.$t("common._common.reserve"))+" ")])]):_vm._e()]),_c("span",{class:{"cursor-not-allowed disabled":_vm.disableActionableUIElements}},[_c("div",{staticClass:"btn-container margin-auto",class:{"pointer-events-none":_vm.disableActionableUIElements},on:{click:function($event){return _vm.deleteLineItems()}}},[_c("div",{staticClass:"text-center"},[_c("Inline-svg",{attrs:{src:"svgs/plans/ic-delete",iconClass:"icon icon-sm-md"}})],1),_c("div",{staticClass:"reserve text-center"},[_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")])])])])]},proxy:!0},{key:_vm.tableSlotList[0].name,fn:function(ref){var record=ref.record;return[_vm.showReserveButton(record)?_c("span",{class:{"cursor-not-allowed disabled":_vm.disableActionableUIElements}},[_c("el-button",{staticClass:"reserve-btn visibility-hide-actions",class:{"pointer-events-none":_vm.disableActionableUIElements},on:{click:function($event){return _vm.reserveLineItem(record)}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.reserve"))+" ")])],1):_vm.isReserved(record)?_c("div",{staticClass:"flex-middle reserve-msg"},[_c("fc-icon",{attrs:{group:"action",name:"circle-tick",size:"14",color:"#008759"}}),_c("div",{staticClass:"mL4"},[_vm._v(" "+_vm._s(_vm.$t("common._common.reserved"))+" ")])],1):_vm._e()]}}],null,!0)},"LineItemList",_vm.$attrs,!1)),_c("el-dialog",{attrs:{visible:_vm.showReservationSummary,fullscreen:!1,title:_vm.$t("common._common.reservation_summary"),open:"top",width:"80%","custom-class":"vendor-wizard assetaddvaluedialog fc-dialog-center-container fc-dialog-return inventory-store-dialog fc-web-form-dialog","append-to-body":!0},on:{"update:visible":function($event){_vm.showReservationSummary=$event}}},[_c("el-table",{staticClass:"rfq-award-vendors-table",staticStyle:{width:"100%"},attrs:{data:_vm.reservingLineItems,height:"300px"}},[_c("el-table-column",{attrs:{prop:"reservingLineItems",formatter:_vm.inventoryName,label:_vm.$t("common.header.item"),"min-width":"200"}}),_c("el-table-column",{attrs:{prop:"reservingLineItems",formatter:_vm.description,label:_vm.$t("common.roles.description"),"min-width":"150"}}),_c("el-table-column",{attrs:{prop:"reservingLineItems",formatter:_vm.storeroomName,label:_vm.$t("common.products.storeroom"),"min-width":"100"}}),_c("el-table-column",{attrs:{prop:"reservingLineItems",formatter:_vm.availableQuantity,label:_vm.$t("common.header.available_quantity"),"min-width":"150"}}),_c("el-table-column",{attrs:{prop:"quantity",label:_vm.$t("common._common.quantity"),"min-width":"100"}}),_c("el-table-column",{attrs:{prop:"reservingLineItems","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(reservingLineItem){return[_c("div",{staticClass:"fw-550 flex-middle"},[_vm.errorMsg(reservingLineItem)?_c("fc-icon",{attrs:{group:"alert",name:"circle-warning",color:"#DE340A",size:"14"}}):_vm.warningMsg(reservingLineItem)?_c("fc-icon",{attrs:{group:"alert",name:"triangle-warning",color:"#FFAB00",size:"14"}}):_vm._e(),_c("div",{staticClass:"mL4"},[_vm._v(" "+_vm._s(_vm.$getProperty(reservingLineItem,"row.errorType",""))+" ")])],1),_c("div",[_vm._v(" "+_vm._s(_vm.$getProperty(reservingLineItem,"row.errorMessage",""))+" ")])]}}])})],1),_c("div",{staticClass:"text-right reservation-footer"},[_c("span",{staticClass:"reservation-summary-msg"},[_c("div",{staticClass:"quantity-reservable-text"},[_vm._v(" "+_vm._s(_vm.getReservationQuantityMsg)+" ")]),_c("div",{staticClass:"continue-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.continue"))+" ")])]),_c("el-button",{staticClass:"reserve-save-btn",attrs:{disabled:_vm.canShowReserveButton},on:{click:_vm.reservePlannedItems}},[_c("span",{staticClass:"reserve-btn-text"},[_vm._v(" "+_vm._s(_vm.$t("common._common.reserve"))+" ")])]),_c("el-button",{staticClass:"cancel-reserve-btn",on:{click:function($event){return _vm.closeReservationSummary()}}},[_c("span",{staticClass:"cancel-btn-text"},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))])])],1)],1)],1)},WorkorderPlannedInventoryvue_type_template_id_4aa6489a_scoped_true_staticRenderFns=[],LineItemList=__webpack_require__(197724),validation=__webpack_require__(990260),api=(__webpack_require__(947522),__webpack_require__(32284)),eventBus=__webpack_require__(398011),WorkOrderPlansvue_type_script_lang_js={name:"WorkOrderPlans",computed:{additionalParams:function(){var _ref=this.workorder||{},currencyCode=_ref.currencyCode,exchangeRate=_ref.exchangeRate;return{workOrder:{id:this.workOrderId},currencyCode:currencyCode,exchangeRate:exchangeRate}},filters:function(){return{workOrder:{operatorId:36,value:[this.workOrderId+""]}}},getLabel:function(){var moduleName=this.moduleName;return"workOrderPlannedItems"===moduleName?this.$t("common.inventory.select_item"):"workOrderPlannedTools"===moduleName?this.$t("common.inventory.select_tool"):"workOrderPlannedServices"===moduleName?this.$t("common.inventory.select_service"):""}},methods:{reloadCost:function(){eventBus/* eventBus */.Y.$emit("loadCost")},selectedRecords:function(selectedList){this.selectedLineItems=selectedList},deleteLineItems:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var selectedLineItems,_yield$API$deleteReco,error,message,_this$$refs$lineItemT,_this$$refs$lineItemT2,moduleDisplayName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return selectedLineItems=_this.selectedLineItems,_this.recordIds=[],selectedLineItems.forEach((function(lineItem){var id=_this.$getProperty(lineItem,"id");_this.recordIds.push(id)})),_context.next=5,api/* API */.bl.deleteRecord(_this.moduleName,_this.recordIds);case 5:if(_yield$API$deleteReco=_context.sent,error=_yield$API$deleteReco.error,!error){_context.next=13;break}return message=error.message,_this.$message.error(message||_this.$t("common._common.error_occured")),_context.abrupt("return",{});case 13:moduleDisplayName=_this.moduleDisplayName,_this.$message.success("".concat(moduleDisplayName," ").concat(_this.$t("custommodules.list.delete_success"))),null===(_this$$refs$lineItemT=_this.$refs["lineItemTable"])||void 0===_this$$refs$lineItemT||_this$$refs$lineItemT.refreshRecordList(!0),null===(_this$$refs$lineItemT2=_this.$refs["lineItemTable"])||void 0===_this$$refs$lineItemT2||_this$$refs$lineItemT2.clearSelection();case 17:case"end":return _context.stop()}}),_callee)})))()}}},plans_WorkOrderPlansvue_type_script_lang_js=WorkOrderPlansvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(plans_WorkOrderPlansvue_type_script_lang_js,WorkOrderPlans_render,WorkOrderPlans_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkOrderPlans=component.exports,InventoryMixin=__webpack_require__(796689),WorkorderPlannedInventoryvue_type_script_lang_js={name:"Plans",extends:WorkOrderPlans,mixins:[InventoryMixin/* default */.Z],props:["workOrderId","widget","disableActionableUIElements"],data:function(){return{recordIds:[],recordsCount:null,reservingLineItems:[],showReservationSummary:!1,selectedLineItems:[],reservableLineItems:[],tableSlotList:[{name:"additional-action-reservation",isActionColumn:!0,columnAttrs:{width:130,class:"visibility-visible-actions",fixed:"right"}}]}},components:{LineItemList:LineItemList/* default */.Z},computed:{listConfiguration:function(){var _this=this,formConfig=this.formConfig,tableSlotList=this.tableSlotList,filters=this.filters,disableActionableUIElements=this.disableActionableUIElements;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({filters:filters,skipModulePermission:{editPermission:!0,deletePermission:!0}},formConfig||{}),{},{tableSlotList:tableSlotList||[],isRecordEditable:function(record){return!_this.$getProperty(record,"isReserved")},isRecordDeletable:function(record){return!_this.$getProperty(record,"isReserved")},checkSelection:function(record){return!_this.$getProperty(record,"isReserved")},disableActionableUIElements:disableActionableUIElements})},widgetDetails:function(){var widget=this.widget,moduleDisplayName=this.moduleDisplayName,emptyStateBtnList=this.emptyStateBtnList,_ref=widget||{},widgetParams=_ref.widgetParams,_ref2=widgetParams||{},summaryWidgetName=_ref2.summaryWidgetName,emptyStateText=this.$t("setup.relationship.no_module_available",{moduleName:moduleDisplayName});return{canHideTitle:!0,perPage:5,summaryWidgetName:summaryWidgetName,emptyStateText:emptyStateText,actionButtonList:emptyStateBtnList}},canShowReserveButton:function(){var reservableLineItems=this.reservableLineItems;return(0,validation/* isEmpty */.xb)(reservableLineItems)}},methods:{storeroomName:function(val){return this.$getProperty(val,"storeRoom.name","---")},availableQuantity:function(val){return this.$getProperty(val,"availableQuantity","---")},description:function(val){return this.$getProperty(val,"description","---")},showReserveButton:function(record){return!this.$getProperty(record,"isReserved")&&this.checkWoManageInventoryPermission()},isReserved:function(record){return this.$getProperty(record,"isReserved")},closeReservationSummary:function(){this.showReservationSummary=!1},errorMsg:function(lineItem){return"Non-reservable"===this.$getProperty(lineItem,"row.errorType")},warningMsg:function(lineItem){return"Reservable"===this.$getProperty(lineItem,"row.errorType")},setReservableLineItems:function(reservingLineItems){var _this2=this;this.reservableLineItems=(reservingLineItems||[]).filter((function(lineItem){var errorType=_this2.$getProperty(lineItem,"errorType");return"Non-reservable"!==errorType}))}}},plans_WorkorderPlannedInventoryvue_type_script_lang_js=WorkorderPlannedInventoryvue_type_script_lang_js,WorkorderPlannedInventory_component=(0,componentNormalizer/* default */.Z)(plans_WorkorderPlannedInventoryvue_type_script_lang_js,WorkorderPlannedInventoryvue_type_template_id_4aa6489a_scoped_true_render,WorkorderPlannedInventoryvue_type_template_id_4aa6489a_scoped_true_staticRenderFns,!1,null,"4aa6489a",null)
/* harmony default export */,WorkorderPlannedInventory=WorkorderPlannedInventory_component.exports,WorkOrderPlannedItemsvue_type_script_lang_js={extends:WorkorderPlannedInventory,computed:{moduleName:function(){return"workOrderPlannedItems"},moduleDisplayName:function(){return this.$t("common.inventory._items")},getReservationQuantityMsg:function(){var reservableLineItems=this.reservableLineItems,reservingLineItems=this.reservingLineItems,msg="".concat(reservableLineItems.length," of ").concat(reservingLineItems.length," items reservable");return msg},formConfig:function(){return{formType:"POP_UP_FORM",modifyFieldPropsHook:function(field){var _ref=field||{},name=_ref.name;if("itemType"===name)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{isDisabled:!0})}}},emptyStateBtnList:function(){return[{label:this.$t("common.inventory.select_item"),value:{lookupModuleName:"itemTypes",lookupModuleDisplayName:this.$t("common.inventory._item_types"),getRecordDetails:function(){var _getRecordDetails=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(payload){var _ref2,id,moduleName,workOrderPlannedItem;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref2=payload||{},id=_ref2.id,moduleName=_ref2.moduleName,workOrderPlannedItem={itemType:{id:id}},_context.abrupt("return",new CustomModuleData/* CustomModuleData */.u((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},workOrderPlannedItem),{},{moduleName:moduleName})));case 3:case"end":return _context.stop()}}),_callee)})));function getRecordDetails(_x){return _getRecordDetails.apply(this,arguments)}return getRecordDetails}()}}]}},methods:{getNonRotatingItemTypes:function(itemTypes){var nonRotatingItemTypes=(itemTypes||{}).filter((function(itemType){var _ref3=itemType||{},rotating=_ref3.rotating;return!rotating}));return nonRotatingItemTypes},inventoryName:function(val){return this.$getProperty(val,"itemType.name","---")},reservePlannedItems:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var reservableLineItems,plannedItems,url,params,_yield$API$post,error,_this$$refs$lineItemT,_this$$refs$lineItemT2;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(reservableLineItems=_this.reservableLineItems,plannedItems=(reservableLineItems||[]).map((function(lineItem){return{id:_this.$getProperty(lineItem,"id")}})),url="v3/modules/bulkPatch/workOrderPlannedItems",params={data:{workOrderPlannedItems:plannedItems},moduleName:"workOrderPlannedItems",params:{reserve:!0}},(0,validation/* isEmpty */.xb)(plannedItems)){_context2.next=10;break}return _context2.next=7,api/* API */.bl.post(url,params);case 7:_yield$API$post=_context2.sent,error=_yield$API$post.error,error?_this.$message.error(error.message||_this.$t("common._common.error_occured")):(_this.$message.success(_this.$t("common._common.reserve_success")),_this.showReservationSummary=!1,null===(_this$$refs$lineItemT=_this.$refs["lineItemTable"])||void 0===_this$$refs$lineItemT||_this$$refs$lineItemT.refreshRecordList(!0),null===(_this$$refs$lineItemT2=_this.$refs["lineItemTable"])||void 0===_this$$refs$lineItemT2||_this$$refs$lineItemT2.clearSelection());case 10:case"end":return _context2.stop()}}),_callee2)})))()},reserveLineItem:function(record){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var queryParam,_yield$API$get,data,error,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this2.recordIds=[],_this2.recordIds.push(record.id),queryParam={recordIds:_this2.recordIds},_context3.next=5,api/* API */.bl.get("/v3/workOrderPlannedItems/reserve",queryParam);case 5:if(_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error){_context3.next=14;break}return message=error.message,_this2.$message.error(message||_this2.$t("common._common.error_occured")),_context3.abrupt("return",{});case 14:_this2.reservingLineItems=_this2.$getProperty(data,"workOrderPlannedItems"),_this2.setReservableLineItems(_this2.reservingLineItems),_this2.showReservationSummary=!0;case 17:case"end":return _context3.stop()}}),_callee3)})))()},reserveMultipleLineItems:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var selectedLineItems,_iterator,_step,lineItem,id,queryParam,_yield$API$get2,data,error,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:selectedLineItems=_this3.selectedLineItems,_this3.recordIds=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(selectedLineItems);try{for(_iterator.s();!(_step=_iterator.n()).done;)lineItem=_step.value,id=_this3.$getProperty(lineItem,"id"),_this3.recordIds.push(id)}catch(err){_iterator.e(err)}finally{_iterator.f()}return queryParam={recordIds:_this3.recordIds},_context4.next=7,api/* API */.bl.get("/v3/workOrderPlannedItems/reserve",queryParam);case 7:if(_yield$API$get2=_context4.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,!error){_context4.next=16;break}return message=error.message,_this3.$message.error(message||_this3.$t("common._common.error_occured")),_context4.abrupt("return",{});case 16:_this3.reservingLineItems=_this3.$getProperty(data,"workOrderPlannedItems"),_this3.setReservableLineItems(_this3.reservingLineItems),_this3.showReservationSummary=!0;case 19:case"end":return _context4.stop()}}),_callee4)})))()}}},plans_WorkOrderPlannedItemsvue_type_script_lang_js=WorkOrderPlannedItemsvue_type_script_lang_js,WorkOrderPlannedItems_component=(0,componentNormalizer/* default */.Z)(plans_WorkOrderPlannedItemsvue_type_script_lang_js,WorkOrderPlannedItems_render,WorkOrderPlannedItems_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkOrderPlannedItems=WorkOrderPlannedItems_component.exports,WorkOrderPlannedToolsvue_type_script_lang_js={extends:WorkorderPlannedInventory,computed:{moduleName:function(){return"workOrderPlannedTools"},moduleDisplayName:function(){return this.$t("common.inventory._tools")},getReservationQuantityMsg:function(){var reservableLineItems=this.reservableLineItems,reservingLineItems=this.reservingLineItems,msg="".concat(reservableLineItems.length," of ").concat(reservingLineItems.length," tools reservable");return msg},formConfig:function(){return{formType:"POP_UP_FORM",modifyFieldPropsHook:function(field){var _ref=field||{},name=_ref.name;if("toolType"===name)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{isDisabled:!0})}}},emptyStateBtnList:function(){return[{label:this.$t("common.inventory.select_tool"),value:{lookupModuleName:"toolTypes",lookupModuleDisplayName:this.$t("common.inventory._tool_types"),getRecordDetails:function(){var _getRecordDetails=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(payload){var _ref2,id,moduleName,workOrderPlannedTool;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref2=payload||{},id=_ref2.id,moduleName=_ref2.moduleName,workOrderPlannedTool={toolType:{id:id}},_context.abrupt("return",new CustomModuleData/* CustomModuleData */.u((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},workOrderPlannedTool),{},{moduleName:moduleName})));case 3:case"end":return _context.stop()}}),_callee)})));function getRecordDetails(_x){return _getRecordDetails.apply(this,arguments)}return getRecordDetails}()}}]}},methods:{
// getNonRotatingItemTypes() {
//   return
// },
inventoryName:function(val){return this.$getProperty(val,"toolType.name","---")},reservePlannedItems:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var reservableLineItems,plannedTools,url,params,_yield$API$post,error,_this$$refs$lineItemT,_this$$refs$lineItemT2;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(reservableLineItems=_this.reservableLineItems,plannedTools=(reservableLineItems||[]).map((function(lineItem){return{id:_this.$getProperty(lineItem,"id")}})),url="v3/modules/bulkPatch/workOrderPlannedTools",params={data:{workOrderPlannedTools:plannedTools},moduleName:"workOrderPlannedTools",params:{reserve:!0}},(0,validation/* isEmpty */.xb)(plannedTools)){_context2.next=10;break}return _context2.next=7,api/* API */.bl.post(url,params);case 7:_yield$API$post=_context2.sent,error=_yield$API$post.error,error?_this.$message.error(error.message||_this.$t("common._common.error_occured")):(_this.$message.success(_this.$t("common._common.reserve_success")),_this.showReservationSummary=!1,null===(_this$$refs$lineItemT=_this.$refs["lineItemTable"])||void 0===_this$$refs$lineItemT||_this$$refs$lineItemT.refreshRecordList(!0),null===(_this$$refs$lineItemT2=_this.$refs["lineItemTable"])||void 0===_this$$refs$lineItemT2||_this$$refs$lineItemT2.clearSelection());case 10:case"end":return _context2.stop()}}),_callee2)})))()},reserveLineItem:function(record){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var queryParam,_yield$API$get,data,error,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this2.recordIds=[],_this2.recordIds.push(record.id),queryParam={recordIds:_this2.recordIds},_context3.next=5,api/* API */.bl.get("/v3/workOrderPlannedTools/reserve",queryParam);case 5:if(_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error){_context3.next=14;break}return message=error.message,_this2.$message.error(message||_this2.$t("common._common.error_occured")),_context3.abrupt("return",{});case 14:_this2.reservingLineItems=_this2.$getProperty(data,"workOrderPlannedTools"),_this2.setReservableLineItems(_this2.reservingLineItems),_this2.showReservationSummary=!0;case 17:case"end":return _context3.stop()}}),_callee3)})))()},reserveMultipleLineItems:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var selectedLineItems,_iterator,_step,lineItem,id,queryParam,_yield$API$get2,data,error,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:selectedLineItems=_this3.selectedLineItems,_this3.recordIds=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(selectedLineItems);try{for(_iterator.s();!(_step=_iterator.n()).done;)lineItem=_step.value,id=_this3.$getProperty(lineItem,"id"),_this3.recordIds.push(id)}catch(err){_iterator.e(err)}finally{_iterator.f()}return queryParam={recordIds:_this3.recordIds},_context4.next=7,api/* API */.bl.get("/v3/workOrderPlannedTools/reserve",queryParam);case 7:if(_yield$API$get2=_context4.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,!error){_context4.next=16;break}return message=error.message,_this3.$message.error(message||_this3.$t("common._common.error_occured")),_context4.abrupt("return",{});case 16:_this3.reservingLineItems=_this3.$getProperty(data,"workOrderPlannedTools"),_this3.setReservableLineItems(_this3.reservingLineItems),_this3.showReservationSummary=!0;case 19:case"end":return _context4.stop()}}),_callee4)})))()}}},plans_WorkOrderPlannedToolsvue_type_script_lang_js=WorkOrderPlannedToolsvue_type_script_lang_js,WorkOrderPlannedTools_component=(0,componentNormalizer/* default */.Z)(plans_WorkOrderPlannedToolsvue_type_script_lang_js,WorkOrderPlannedTools_render,WorkOrderPlannedTools_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkOrderPlannedTools=WorkOrderPlannedTools_component.exports,WorkOrderPlannedServicesvue_type_template_id_2625c118_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("LineItemList",_vm._b({ref:"lineItemTable",staticClass:"height-100",attrs:{config:_vm.listConfiguration,moduleName:_vm.moduleName,widgetDetails:_vm.widgetDetails,additionalParams:_vm.additionalParams,moduleDisplayName:_vm.moduleDisplayName,viewname:"all"},on:{onDelete:function($event){return _vm.reloadCost()},onCreateOrUpdate:function($event){return _vm.reloadCost()},handleSelection:_vm.selectedRecords},scopedSlots:_vm._u([{key:"bulk-actions",fn:function(){return[_c("span",{class:{"cursor-not-allowed disabled":_vm.disableActionableUIElements}},[_c("div",{staticClass:"delete-btn-container margin-auto",class:{"pointer-events-none":_vm.disableActionableUIElements},on:{click:function($event){return _vm.deleteLineItems()}}},[_c("div",{staticClass:"text-center"},[_c("Inline-svg",{attrs:{src:"svgs/plans/ic-delete",iconClass:"icon icon-sm-md"}})],1),_c("div",{staticClass:"reserve text-center"},[_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")])])])]},proxy:!0}])},"LineItemList",_vm.$attrs,!1))],1)},WorkOrderPlannedServicesvue_type_template_id_2625c118_scoped_true_staticRenderFns=[],WorkOrderPlannedServicesvue_type_script_lang_js={extends:WorkOrderPlans,props:["workOrderId","widget","disableActionableUIElements","workorder"],components:{LineItemList:LineItemList/* default */.Z},data:function(){return{selectedLineItems:[]}},computed:{moduleName:function(){return"workOrderPlannedServices"},moduleDisplayName:function(){return this.$t("common.inventory._services")},listConfiguration:function(){var formConfig=this.formConfig,filters=this.filters,disableActionableUIElements=this.disableActionableUIElements;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({filters:filters,skipModulePermission:{editPermission:!0,deletePermission:!0}},formConfig||{}),{},{disableActionableUIElements:disableActionableUIElements})},formConfig:function(){return{formType:"POP_UP_FORM",modifyFieldPropsHook:function(field){var _ref=field||{},name=_ref.name;if("service"===name)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{isDisabled:!0})}}},widgetDetails:function(){var widget=this.widget,moduleDisplayName=this.moduleDisplayName,emptyStateBtnList=this.emptyStateBtnList,_ref2=widget||{},widgetParams=_ref2.widgetParams,_ref3=widgetParams||{},summaryWidgetName=_ref3.summaryWidgetName,emptyStateText=this.$t("setup.relationship.no_module_available",{moduleName:moduleDisplayName});return{canHideTitle:!0,perPage:5,summaryWidgetName:summaryWidgetName,emptyStateText:emptyStateText,actionButtonList:emptyStateBtnList}},emptyStateBtnList:function(){return[{label:this.$t("common.inventory.select_service"),value:{lookupModuleName:"service",lookupModuleDisplayName:this.$t("common.inventory._services"),getRecordDetails:function(){var _getRecordDetails=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(payload){var _ref4,id,moduleName,workOrderPlannedService;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref4=payload||{},id=_ref4.id,moduleName=_ref4.moduleName,workOrderPlannedService={service:{id:id}},_context.abrupt("return",new CustomModuleData/* CustomModuleData */.u((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},workOrderPlannedService),{},{moduleName:moduleName})));case 3:case"end":return _context.stop()}}),_callee)})));function getRecordDetails(_x){return _getRecordDetails.apply(this,arguments)}return getRecordDetails}()}}]}}},plans_WorkOrderPlannedServicesvue_type_script_lang_js=WorkOrderPlannedServicesvue_type_script_lang_js,WorkOrderPlannedServices_component=(0,componentNormalizer/* default */.Z)(plans_WorkOrderPlannedServicesvue_type_script_lang_js,WorkOrderPlannedServicesvue_type_template_id_2625c118_scoped_true_render,WorkOrderPlannedServicesvue_type_template_id_2625c118_scoped_true_staticRenderFns,!1,null,"2625c118",null)
/* harmony default export */,WorkOrderPlannedServices=WorkOrderPlannedServices_component.exports,WorkOrderPlannedLaboursvue_type_template_id_051a546b_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("LineItemList",_vm._b({ref:"lineItemTable",staticClass:"height-100",attrs:{config:_vm.listConfiguration,moduleName:_vm.moduleName,widgetDetails:_vm.widgetDetails,moduleDisplayName:_vm.moduleDisplayName,additionalParams:_vm.additionalParams,viewname:"all"},on:{onDelete:function($event){return _vm.reloadCost()},onCreateOrUpdate:function($event){return _vm.reloadCost()}}},"LineItemList",_vm.$attrs,!1))},WorkOrderPlannedLaboursvue_type_template_id_051a546b_staticRenderFns=[],WorkOrderPlannedLaboursvue_type_script_lang_js=(__webpack_require__(976801),{extends:WorkOrderPlans,props:["workOrderId","resizeWidget","widget","disableActionableUIElements","workorder"],components:{LineItemList:LineItemList/* default */.Z},data:function(){return{details:null,selectedLookupId:null}},computed:{moduleName:function(){return"workorderLabourPlan"},moduleDisplayName:function(){return"Work Order Labor Plan(s)"},filters:function(){var filterObj={parent:{operatorId:9,value:["".concat(this.workOrderId)]}};return filterObj},formConfig:function(){return{formType:"POP_UP_FORM",modifyFieldPropsHook:function(field){var _ref=field||{},name=_ref.name;if(["craft","totalPrice"].includes(name))return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{isDisabled:!0})}}},listConfiguration:function(){var filters=this.filters,detailsLayout=this.detailsLayout,formConfig=this.formConfig,disableActionableUIElements=this.disableActionableUIElements;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({canHideHeader:!1,canHideEdit:!1,canHideDelete:!1,canHideFooter:!1,canHideFilter:!1,canHideSummaryWidget:!1,isSelectionEnabled:!0,accordion:!0,
//expand one at a time
detailsLayout:detailsLayout,
//details construction for quick summary
labelPosition:"vertical",
// vertical or horizontal
columns:2,
//colunms split in quick summary; max cols allowed is 4
canShowActions:!0,canShowEdit:!0,canShowDelete:!0,canHideColumnConfig:!0},formConfig||{}),{},{filters:filters,searchType:"ADAVANCE_SEARCH",formTitle:{defaultForm:"Labour",addForm:"Labour Details",editForm:"Labour Details"},disableActionableUIElements:disableActionableUIElements})},widgetDetails:function(){var _this=this,widget=this.widget,_ref2=widget||{},widgetParams=_ref2.widgetParams,_ref3=widgetParams||{},summaryWidgetName=_ref3.summaryWidgetName,emptyStateText=this.$t("setup.relationship.no_module_available",{moduleName:"Labors"});return{title:this.$t("common._common.list_of_labours"),canHideTitle:!0,perPage:5,summaryWidgetName:summaryWidgetName,emptyStateText:emptyStateText,actionButtonList:[{label:this.$t("common._common.add_craft"),value:{lookupModuleName:"crafts",lookupModuleDisplayName:"Craft",getRecordDetails:function(){var _getRecordDetails=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(payload){var _ref4,id,moduleName,lookupModuleName,params,_yield$API$get,data,error,_ref5,workorderLabourPlan;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref4=payload||{},id=_ref4.id,moduleName=_ref4.moduleName,lookupModuleName=_ref4.lookupModuleName,params={recordId:id,moduleName:lookupModuleName},_context.next=4,api/* API */.bl.get("/v3/workOrderLabour/plans",params);case 4:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error){_context.next=11;break}_this.$message.error(error.message||_this.$t("common._common.error_occured")),_context.next=13;break;case 11:return _ref5=data||{},workorderLabourPlan=_ref5.workorderLabourPlan,_context.abrupt("return",new CustomModuleData/* CustomModuleData */.u((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},workorderLabourPlan||{}),{},{moduleName:moduleName})));case 13:case"end":return _context.stop()}}),_callee)})));function getRecordDetails(_x){return _getRecordDetails.apply(this,arguments)}return getRecordDetails}()}}]}},additionalParams:function(){var params={parent:{id:this.workOrderId}};return params}}}),plans_WorkOrderPlannedLaboursvue_type_script_lang_js=WorkOrderPlannedLaboursvue_type_script_lang_js,WorkOrderPlannedLabours_component=(0,componentNormalizer/* default */.Z)(plans_WorkOrderPlannedLaboursvue_type_script_lang_js,WorkOrderPlannedLaboursvue_type_template_id_051a546b_render,WorkOrderPlannedLaboursvue_type_template_id_051a546b_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkOrderPlannedLabours=WorkOrderPlannedLabours_component.exports,WorkOrderInventoryPlanvue_type_script_lang_js={props:["details","widget"],components:{WorkOrderPlannedLabours:WorkOrderPlannedLabours,WorkOrderPlannedItems:WorkOrderPlannedItems,WorkOrderPlannedTools:WorkOrderPlannedTools,WorkOrderPlannedServices:WorkOrderPlannedServices},data:function(){return{moduleName:"workOrderPlannedItems"}},computed:{workOrderSettings:function(){var details=this.details,_ref=details||{},_ref$workOrderSetting=_ref.workOrderSettings,workOrderSettings=void 0===_ref$workOrderSetting?{}:_ref$workOrderSetting;return workOrderSettings},disableActionableUIElements:function(){var workOrderSettings=this.workOrderSettings,_ref2=workOrderSettings||{},inventoryPlaning=_ref2.inventoryPlaning,_ref3=inventoryPlaning||{},_ref3$allowed=_ref3.allowed,canDoActionsOnPlans=void 0===_ref3$allowed||_ref3$allowed;return!canDoActionsOnPlans},workorder:function(){var _ref4=this.details||{},workorder=_ref4.workorder;return workorder}}},plans_WorkOrderInventoryPlanvue_type_script_lang_js=WorkOrderInventoryPlanvue_type_script_lang_js,WorkOrderInventoryPlan_component=(0,componentNormalizer/* default */.Z)(plans_WorkOrderInventoryPlanvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkOrderInventoryPlan=WorkOrderInventoryPlan_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/96859.js.map