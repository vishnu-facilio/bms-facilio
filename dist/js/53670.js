(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[53670,26737],{
/***/822902:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AlertBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AlertBanner.vue?vue&type=template&id=1787a4c4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"error-block-page"},[_vm.hasAlert?_c("div",{staticClass:"fc-error-block",attrs:{id:"alert"}},[_c("el-row",[_c("el-col",{attrs:{span:1}},[_c("InlineSvg",{attrs:{src:"svgs/info-warning",iconClass:"icon icon-sm fill-red vertical-text-super"}})],1),_c("el-col",{attrs:{span:23}},[_c("div",{staticClass:"error-txt"},[_vm._v(" "+_vm._s(_vm.alertMessage?_vm.alertMessage:"Invalid Reading")+" ")])])],1)],1):_vm._e()])},staticRenderFns=[],AlertBannervue_type_script_lang_js={props:["alert","alertMessage"],computed:{hasAlert:{get:function(){return this.alert},set:function(value){this.$emit("update:alert",value)}}}},components_AlertBannervue_type_script_lang_js=AlertBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlertBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlertBanner=component.exports},
/***/303514:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AsyncButton}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AsyncButton.vue?vue&type=template&id=16ca9ad1
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-button",_vm._b({class:_vm.buttonClass,attrs:{loading:_vm.showLoading,type:_vm.buttonType,size:_vm.size,disabled:_vm.disabled},on:{click:function($event){return _vm.save()}}},"el-button",_vm.$attrs,!1),[_vm._t("default")],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),AsyncButtonvue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),{props:["clickAction","actionParams","buttonType","buttonClass","size","disabled","loading"],data:function(){return{isLoading:!1}},computed:{showLoading:function(){return this.loading||this.isLoading}},methods:{save:function(){var _this=this;if(this.clickAction&&"function"===typeof this.clickAction){this.isLoading=!0;var returnPromise=this.actionParams?this.clickAction.apply(this,(0,toConsumableArray/* default */.Z)(this.actionParams)):this.clickAction(),minimumTimeout=this.$helpers.delay(1e3);returnPromise?Promise.all([returnPromise,minimumTimeout]).finally((function(){_this.isLoading=!1})):this.$helpers.delay(1e3).then((function(){return _this.isLoading=!1}))}}}}),components_AsyncButtonvue_type_script_lang_js=AsyncButtonvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AsyncButtonvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AsyncButton=component.exports},
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/142885:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return InstantTranslate}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/InstantTranslate.vue?vue&type=template&id=7d2632e2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.detectLangShow?_c("div",[_vm.orgAndUserLanguage!==_vm.detectLanguage.language?_c("div",[_vm.extraContent?_c("div",_vm._l(_vm.translateListMoreThan,(function(translate,inex){return _c("div",{key:inex},[_c("div",{staticClass:"fc-translate-text"},[_c("div",{staticClass:"fc-grey8-14 f13 bold"},[_vm._v(" "+_vm._s(_vm.$t("common.translation.translate_text"))+" "),translate&&translate.detectedSourceLanguage?_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Translated from "+_vm.languagesData[translate.detectedSourceLanguage]||0,placement:"top-start"}},[_c("i",{staticClass:"el-icon-info"})]):_vm._e()],1),_c("div",{staticClass:"pT5 fc-grey8-14 f13 line-height20"},[_vm._v(" "+_vm._s(translate.translatedText)+" ")])])])})),0):_c("div",{staticClass:"fc-grey8-14 f13 fc-translate-text"},[_c("div",{staticClass:"fc-grey8-14 f13 bold"},[_vm._v(" "+_vm._s(_vm.$t("common.translation.translate_text"))+" "),_vm.translateListData&&_vm.translateListData.detectedSourceLanguage?_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Translated from "+_vm.languagesData[_vm.translateListData.detectedSourceLanguage],placement:"top-start"}},[_c("i",{staticClass:"el-icon-info"})]):_vm._e()],1),_c("div",{staticClass:"pT5 fc-grey8-14 f13 line-height20"},[_vm._v(" "+_vm._s(_vm.translateListData.translatedText)+" ")])])]):_vm._e()]):_vm._e()])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),axios=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(634338),__webpack_require__(409669)),axios_default=__webpack_require__.n(axios),validation=__webpack_require__(586529),languages=__webpack_require__(601273),InstantTranslatevue_type_script_lang_js={props:["content","extraContent"],data:function(){return{detectLanguage:[],loading:!0,translateListData:[],languageData:this.$org.language,seeTranslation:!1,seeTranslationStartContent:!0,googleKey:"AIzaSyAeJBX0k0BxzMvvlRyCsOtPYWKVs62603w",translateListMoreThan:[],detectLangShow:!1,languages:null,languageTranslateData:{}}},computed:{orgAndUserLanguage:function(){return(0,validation/* isEmpty */.xb)(this.$account.user.language)?this.$org.language:this.$account.user.language},languagesData:function(){var _this=this,data={};return languages/* default */.Z.forEach((function(rt){_this.$set(data,rt.value,rt.label)})),data}},mounted:function(){var _this2=this;this.$nextTick((function(){_this2.getDetectLanguage()}))},methods:{
// This API for detect app language
detectAppLanguage:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this3.loading=!0,_context.next=3,axios_default().post("https://translation.googleapis.com/language/translate/v2/detect?key=".concat(_this3.googleKey,"&q=").concat(_this3.content));case 3:response=_context.sent,_this3.detectLanguage=response.data&&response.data.data&&response.data.data.detections[0][0],_this3.loading=!1;case 6:case"end":return _context.stop()}}),_callee)})))()},
// This API for translate text
translateLanguageList:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this4.loading=!0,params={q:[_this4.content]},_this4.extraContent&&(params.q=[_this4.content,_this4.extraContent]),_context2.next=5,axios_default().post("https://translation.googleapis.com/language/translate/v2?key=".concat(_this4.googleKey,"&target=").concat(_this4.orgAndUserLanguage,"&format=html"),params);case 5:response=_context2.sent,_this4.translateListData=response.data&&response.data.data&&response.data.data.translations[0],_this4.translateListMoreThan=response.data&&response.data.data&&response.data.data.translations,_this4.loading=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},showLanguageHideList:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this5.seeTranslation=!0,_this5.seeTranslationStartContent=!1,_context3.next=4,_this5.translateLanguageList();case 4:_this5.$emit("onData");case 5:case"end":return _context3.stop()}}),_callee3)})))()},backToOriginal:function(){this.seeTranslation=!1,this.seeTranslationStartContent=!0},getDetectLanguage:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this6.detectAppLanguage(),_context4.next=3,_this6.translateLanguageList();case 3:_this6.$emit("reLoad"),_this6.$emit("onData"),_this6.detectLangShow=!0;case 6:case"end":return _context4.stop()}}),_callee4)})))()}}},components_InstantTranslatevue_type_script_lang_js=InstantTranslatevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_InstantTranslatevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,InstantTranslate=component.exports},
/***/391810:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return MobileAttachment2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/MobileAttachment2.vue?vue&type=template&id=46fd5568
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},[_c("div",{staticClass:"row"},[_c("div",[_c("div",{staticClass:"header-label pB15"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.before"))+" ")]),_vm.beforeImage?_c("div",[_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px"},attrs:{width:"100",height:"auto",src:_vm.beforeImage},on:{click:function($event){return _vm.imgaeBefore(1)}}})])]):_c("div",[_c("div",{staticClass:"inputover"},[_vm._m(0),_vm.doNotSave?_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.marshallFile($event.target.files,1)}}}):_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.filesChange($event.target.files,1)}}})])])]),_c("div",{staticClass:"mL30"},[_c("div",{staticClass:"header-label pB15",staticStyle:{"padding-left":"0px"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.after"))+" ")]),_vm.afterImage?_c("div",[_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px"},attrs:{width:"100",height:"auto",src:_vm.afterImage},on:{click:function($event){return _vm.imgaeBefore(2)}}})])]):_c("div",[_c("div",{staticClass:"inputover"},[_vm._m(1),_vm.doNotSave?_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.marshallFile($event.target.files,2)}}}):_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.filesChange($event.target.files,2)}}})])])])])])])]),_vm.visibility&&_vm.selectedAttachment?_c("preview-file",{attrs:{visibility:_vm.visibility,showDelete:"true",previewFile:_vm.selectedAttachment,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event},onDelete:_vm.taskPhotoDletion}}):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("label",{staticClass:"custom-file-upload",attrs:{for:"file-upload"}},[_c("i",{staticClass:"fa fa-camera"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("label",{staticClass:"custom-file-upload",attrs:{for:"file-upload"}},[_c("i",{staticClass:"fa fa-camera"})])}],createForOfIteratorHelper=__webpack_require__(566347),PreviewFile=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(720096)),api=__webpack_require__(32284),validation=__webpack_require__(990260),MobileAttachment2vue_type_script_lang_js={props:["module","record","disabled","doNotSave"],data:function(){return{loading:!0,before:!1,after:null,status:{UPLOADING:1,SUCCESS:2,FAILED:3},beforeImage:null,afterImage:null,attachments:[],formFieldName:"attachment",attachmentType:-1,selectedAttachment:null,visibility:!1,afterImageDetail:{},beforeImageDetail:{}}},watch:{record:function(recordObj){this.loadAttachments()},attachments:function(newVal){this.record.noOfAttachments=this.attachments.length}},components:{PreviewFile:PreviewFile/* default */.Z},mounted:function(){this.loadAttachments()},methods:{taskPhotoDletion:function(file){var _this=this,dialogObj={title:"Delete Task Attachment",message:"Are you sure you want to delete this attachment?",rbDanger:!0,rbLabel:"Delete"};this.$dialog.confirm(dialogObj).then((function(value){if(value){var url="/v2/tasks/deleteTaskAttachment",id=file.id,params={recordId:_this.record.id,attachmentId:[id],module:"taskattachments"};api/* API */.bl.post(url,params).then((function(_ref){_ref.data;var error=_ref.error;error?_this.$message.error(error.message||"Error Occured"):(1===file.type?_this.beforeImage=null:2===file.type&&(_this.afterImage=null),_this.$emit("taskattachmentactivity"),_this.visibility=!1)}))}}))},marshallFile:function(fileList,attType){var _this2=this,attachmentInfo={module:this.module,recordId:this.record.id,attachmentType:attType,formFieldName:this.formFieldName,file:fileList[0],fileName:fileList[0].name},picReader=new FileReader;picReader.addEventListener("load",(function(event){var picFile=event.target;1===attType?_this2.beforeImage=picFile.result:2===attType&&(_this2.afterImage=picFile.result)})),picReader.readAsDataURL(fileList[0]),this.$emit("marshalled",attachmentInfo)},loadAttachments:function(){if(!this.record&&!this.record.id)return!1;var self=this;return self.loading=!0,this.$http.get("/attachment?module="+this.module+"&recordId="+this.record.id).then((function(response){if(200===response.status)if(self.loading=!1,self.attachments=response.data.attachments?response.data.attachments:[],self.attachments.length>0){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(self.attachments);try{for(_iterator.s();!(_step=_iterator.n()).done;){var attachment=_step.value;1===attachment.type?self.beforeImage=attachment.previewUrl:2===attachment.type&&(self.afterImage=attachment.previewUrl),self.setAttachmentDetail(attachment)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else self.beforeImage=null,self.afterImage=null}))},imgaeBefore:function(type){if(this.attachments.length>0){this.visibility=!0;var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.attachments);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var attachment=_step2.value;type===attachment.type&&(this.selectedAttachment=attachment,this.setAttachmentDetail(attachment))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}},filesChange:function(fileList,attType){var self1=this,formData=new FormData;formData.append("module",this.module),formData.append("recordId",this.record.id),formData.append("attachmentType",attType),formData.append(this.formFieldName,fileList[0],fileList[0].name);var picReader=new FileReader;picReader.addEventListener("load",(function(event){var picFile=event.target;1===attType?(self1.beforeImage=picFile.result,self1.beforeImageDetail={}):2===attType&&(self1.afterImage=picFile.result,self1.afterImageDetail={})})),picReader.readAsDataURL(fileList[0]);var self=this;self.$http.post("/attachment/add",formData).then((function(response){if(self.$emit("taskattachmentactivity"),200===response.status){self.$message.success("Attachment added successfully");var _ref2=response||{},data=_ref2.data,_ref3=data||[],attachments=_ref3.attachments;(0,validation/* isEmpty */.xb)(attachments)||attachments.forEach((function(attachment){self.attachments.push(attachment),self.setAttachmentDetail(attachment)}));
// window.location.reload()
}})).catch((function(){self.$message.error("Error in adding attachment")}))},setAttachmentDetail:function(attachment){1==attachment.type&&(this.beforeImageDetail=attachment),2==attachment.type&&(this.afterImageDetail=attachment)}}},components_MobileAttachment2vue_type_script_lang_js=MobileAttachment2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_MobileAttachment2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MobileAttachment2=component.exports},
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/252669:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TaskAttachmentPreview}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/TaskAttachmentPreview.vue?vue&type=template&id=178d141f&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):[_c("div",{staticClass:"header-label pB15"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.before"))+" ")]),_c("div",{staticClass:"flex-middle"},[_vm.beforeImage?_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px","max-height":"80px"},attrs:{width:"100",src:_vm.beforeImage},on:{click:function($event){return _vm.imgaeBefore(1)}}})]):_c("div",{staticClass:"inputover"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.you_dont_have_attachment_permission"),placement:"right",disabled:!_vm.disabled}},[_c("label",{staticClass:"custom-upload",class:_vm.isNotAllowed,attrs:{for:"file-upload-before"}},[_c("i",{staticClass:"fa fa-camera"})])]),_c("input",{attrs:{id:"file-upload-before",name:"before",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.uploadBeforeImage($event.target)}}})],1),_vm.beforeImage&&_vm.beforeImageDetail.createdTime?_c("div",{staticClass:"mL20"},[_c("div",{staticClass:"f11 text-fc-pink bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.uploaded_time"))+" ")]),_c("div",{staticClass:"mT6 fL fc-italic f11"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.beforeImageDetail.createdTime))+" ")])]):_vm._e()]),_c("div",{staticClass:"header-label pB15 mT20",staticStyle:{"padding-left":"0px"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.after"))+" ")]),_c("div",{staticClass:"flex-middle"},[_vm.afterImage?_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px","max-height":"80px"},attrs:{width:"100",src:_vm.afterImage},on:{click:function($event){return _vm.imgaeBefore(2)}}})]):_c("div",{staticClass:"inputover"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.you_dont_have_attachment_permission"),placement:"right",disabled:!_vm.disabled}},[_c("label",{staticClass:"custom-upload",class:_vm.isNotAllowed,attrs:{for:"file-upload-after"}},[_c("i",{staticClass:"fa fa-camera"})])]),_c("input",{attrs:{id:"file-upload-after",name:"after",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.uploadAfterImage($event.target)}}})],1),_vm.afterImage&&_vm.afterImageDetail.createdTime?_c("div",{staticClass:"mL20"},[_c("div",{staticClass:"f11 text-fc-pink bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.uploaded_time"))+" ")]),_c("div",{staticClass:"mT6 fL fc-italic f11"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.afterImageDetail.createdTime))+" ")])]):_vm._e()])],_vm.visibility&&_vm.selectedAttachment?_c("preview-file",{attrs:{visibility:_vm.visibility,showDelete:"true",isLockedState:_vm.isLockedState,isTaskClosed:_vm.isTaskClosed,previewFile:_vm.selectedAttachment,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event},onDelete:_vm.taskPhotoDletion}}):_vm._e()],2)},staticRenderFns=[],MobileAttachment2=__webpack_require__(391810),TaskAttachmentPreviewvue_type_script_lang_js={props:["isLockedState","isTaskClosed"],extends:MobileAttachment2/* default */.Z,computed:{isNotAllowed:function(){var disabled=this.disabled;return disabled?"cursor-not-allowed":"pointer"}},methods:{uploadAfterImage:function(event){this.filesChange(event.files,2)},uploadBeforeImage:function(event){this.filesChange(event.files,1)}}},components_TaskAttachmentPreviewvue_type_script_lang_js=TaskAttachmentPreviewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_TaskAttachmentPreviewvue_type_script_lang_js,render,staticRenderFns,!1,null,"178d141f",null)
/* harmony default export */,TaskAttachmentPreview=component.exports},
/***/38278:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WarningBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/WarningBanner.vue?vue&type=template&id=00ba6567
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-warning-card"},[_vm.hasWarning?_c("div",{staticClass:"fc-warning-info",attrs:{id:"warning"}},[_c("el-row",[_c("el-col",{attrs:{span:1}},[_c("i",{staticClass:"el-icon-warning-outline rotate180"})]),_c("el-col",{attrs:{span:23}},[_c("div",{staticClass:"warning-txt"},[_vm._v(" "+_vm._s(_vm.warningMessage?_vm.warningMessage:"Invalid Reading")+" ")])])],1)],1):_vm._e()])},staticRenderFns=[],WarningBannervue_type_script_lang_js={props:["warning","warningMessage"],computed:{hasWarning:{get:function(){return this.warning},set:function(value){this.$emit("update:warning",value)}}}},components_WarningBannervue_type_script_lang_js=WarningBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_WarningBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WarningBanner=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/874249:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return RichTextArea}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/RichTextArea.vue?vue&type=template&id=7711575b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isRichText?_c("div",{staticClass:"richtext-area"},[_c("RichText",{style:{minHeight:_vm.minHeight,maxHeight:_vm.maxHeight,overflow:_vm.overflow},attrs:{readOnly:_vm.disabled,placeholder:_vm.placeholder,hideImgTool:_vm.hideImgTool,hideUnorderedList:_vm.hideUnorderedList,hideOrderedList:_vm.hideOrderedList,secondaryToolbar:_vm.secondaryToolbar,istoolbarPositionBottom:_vm.istoolbarPositionBottom,isMoreOption:_vm.isMoreOption,customToolOrder:_vm.customToolOrder,iconColor:_vm.iconColor},scopedSlots:_vm._u([_vm.canShowModeToggle?{key:"editorMode",fn:function(){return[_c("div",{staticClass:"self-center marginL-auto mR15 cursor-pointer mode-btn",on:{click:function($event){return _vm.changeMode()}}},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.plain_text_mode"))+" ")])]},proxy:!0}:null],null,!0),model:{value:_vm.content,callback:function($$v){_vm.content=$$v},expression:"content"}})],1):_c("div",{staticClass:"richtext-area plain-text-mode"},[_c("div",{staticClass:"richtext-editor"},[_c("div",{staticClass:"richtext-toolbar"},[_c("div",{staticClass:"toolbar-button marginL-auto cursor-pointer mode-btn",on:{click:function($event){return _vm.changeMode()}}},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.switch_to_richtext"))+" ")])]),_c("el-input",{key:"plain-text",staticClass:"richtext-content",attrs:{type:"textarea",resize:"none",placeholder:_vm.placeholder},model:{value:_vm.content,callback:function($$v){_vm.content=$$v},expression:"content"}})],1)])},staticRenderFns=[],ui_forms=(__webpack_require__(879288),__webpack_require__(141323)),filters=__webpack_require__(638203),RichTextAreavue_type_script_lang_js={props:{value:{type:String},field:{type:Object},rows:{type:Number,default:10},maxRows:{type:Number,default:12},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Enter text here"},isEdit:{type:Boolean,default:!1},hideImgTool:{type:Boolean,default:!1},hideOrderedList:{type:Boolean,default:!1},hideUnorderedList:{type:Boolean,default:!1},isRichTextMode:{type:Boolean,default:!0},canShowModeToggle:{type:Boolean,default:!1},istoolbarPositionBottom:{type:Boolean},customToolOrder:{type:Array},isMoreOption:{type:Boolean},secondaryToolbar:{type:Boolean},iconColor:{type:String}},components:{RichText:ui_forms/* RichText */.Ho},computed:{content:{get:function(){return this.value},set:function(value){this.$emit("input",value)}},isRichText:{get:function(){return this.isRichTextMode},set:function(value){this.$emit("update:isRichTextMode",value)}},
// Assuming a <p></p> tag inside editor
// has fonts-size 1rem and margin-bottom 1rem
minHeight:function(){return"".concat(2*this.rows,"rem")},maxHeight:function(){return"".concat(2*this.maxRows,"rem")},overflow:function(){return"hidden"}},methods:{changeMode:function(){var isRichText=this.isRichText,value=this.value;if(isRichText)this.showConfirmModeSwitch();else{var htmlContent="<p>".concat(value,"</p>");this.content=htmlContent,this.proceedChangingModes()}},showConfirmModeSwitch:function(){var _this=this,dialogObj={htmlMessage:"".concat(this.$t("forms.builder.switch_alert")),rbDanger:!0,rbLabel:"Confirm"};this.$dialog.confirm(dialogObj).then((function(canProceed){if(canProceed){var value=_this.value,textContent=(0,filters/* htmlToText */.s9)(value);_this.content=textContent,_this.proceedChangingModes()}}))},proceedChangingModes:function(){var isRichText=this.isRichText;this.isRichText=!isRichText}}},forms_RichTextAreavue_type_script_lang_js=RichTextAreavue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_RichTextAreavue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,RichTextArea=component.exports},
/***/786113:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WorkOrderSpecialFieldsList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/WorkOrderSpecialFieldsList.vue?vue&type=template&id=c5129894
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["resource"===_vm.field.name?_c("div",{staticClass:"q-item-division relative-position",staticStyle:{"min-width":"170px"}},[_vm.$validation.isEmpty(_vm.moduleData.resource)||_vm.$validation.isEmpty(_vm.moduleData.resource.id)?_c("div",[_c("span",{staticClass:"q-item-label secondary-color color-d"},[_vm._v("--- "+_vm._s(_vm.$t("maintenance.wr_list.space_asset"))+" ---")])]):_c("div",[_c("div",{staticClass:"flLeft mR7"},[1===_vm.moduleData.resource.resourceType?_c("img",{staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(572902)}}):_c("img",{staticStyle:{height:"11px",width:"14px"},attrs:{src:__webpack_require__(30684)}})]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flLeft q-item-label ellipsis max-width140px",attrs:{small:"","data-position":"bottom",title:_vm.moduleData.resource.name}},[_vm._v(_vm._s(_vm.moduleData.resource.name))])])]):"assignedTo"===_vm.field.name?_c("div",{staticClass:"q-item-division relative-position wo_assignedto_avatarblock"},[_c("div",{staticClass:"wo-assigned-avatar fL"},[_c("user-avatar",{attrs:{size:"md",user:_vm.moduleData.assignedTo,group:_vm.moduleData.assignmentGroup,showLabel:!0,moduleName:"lookupModuleName"}})],1)]):"noOfNotes"===_vm.field.name?_c("div",[_vm._m(0),_c("span",{staticClass:"width5px q-item-sublabel comment-counnt-txt"},[_vm._v(_vm._s(_vm.notesLabel))])]):"noOfTasks"===_vm.field.name?_c("div",[_vm.canShowTaskIcon?_c("inline-svg",{staticClass:"vertical-middle cursor-pointer",attrs:{src:"svgs/task-list",iconClass:"icon icon-sm mT5 mR5 task-icon"}}):_vm._e(),_c("span",{staticClass:"q-item-sublabel pL5"},[_vm._v(_vm._s(_vm.taskLabel))])],1):"noOfAttachments"===_vm.field.name?_c("div",{staticStyle:{float:"left"}},[_vm._m(1),_c("span",{staticClass:"width5px q-item-sublabel comment-counnt-txt"},[_vm._v(_vm._s(_vm.attachmentLabel))])]):_vm._e()])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",[_c("img",{staticStyle:{width:"14px",height:"12.8px"},attrs:{src:__webpack_require__(293656)}})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",[_c("img",{staticStyle:{width:"14px",height:"12.8px"},attrs:{src:__webpack_require__(345265)}})])}],User=(__webpack_require__(634338),__webpack_require__(426803)),validation=__webpack_require__(990260),WorkOrderSpecialFieldsListvue_type_script_lang_js={components:{UserAvatar:User/* default */.Z},props:["field","moduleData"],computed:{canShowTaskIcon:function(){var moduleData=this.moduleData;return!(0,validation/* isEmpty */.xb)(moduleData.noOfTasks)&&0!==moduleData.noOfNotes},taskLabel:function(){var moduleData=this.moduleData,noOfTasks=moduleData.noOfTasks,noOfNotes=moduleData.noOfNotes,noOfClosedTasks=moduleData.noOfClosedTasks,taskLabel="---";return(0,validation/* isEmpty */.xb)(noOfTasks)||0===noOfNotes?taskLabel:(0,validation/* isEmpty */.xb)(noOfClosedTasks)?"0":"".concat(noOfClosedTasks,"/").concat(noOfTasks)},notesLabel:function(){var moduleData=this.moduleData,noOfNotes=moduleData.noOfNotes;return(0,validation/* isEmpty */.xb)(noOfNotes)||0===noOfNotes?"0":moduleData.noOfNotes},attachmentLabel:function(){var moduleData=this.moduleData,_ref=moduleData||{},noOfAttachments=_ref.noOfAttachments;return(0,validation/* isEmpty */.xb)(noOfAttachments)||0===noOfAttachments?"0":noOfAttachments}}},list_WorkOrderSpecialFieldsListvue_type_script_lang_js=WorkOrderSpecialFieldsListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_WorkOrderSpecialFieldsListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkOrderSpecialFieldsList=component.exports},
/***/806339:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WidgetPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/utils/WidgetPagination.vue?vue&type=template&id=6b10cd5b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-widget-pagination"},[_vm.total>0?_c("div",{class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" -")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm.hideToggle?_vm._e():[_vm._v(" of "+_vm._s(_vm.total)+" "),_c("span",{staticClass:"el-icon-arrow-left fc-black-small-txt-12 fw-bold f16 pointer mL10 mR5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right fc-black-small-txt-12 f16 pointer mR10 fw-bold",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})]],2):_vm._e()])},staticRenderFns=[],WidgetPaginationvue_type_script_lang_js={props:["currentPage","perPage","total","hideToggle"],data:function(){return{from:0,to:0,page:1}},mounted:function(){this.init()},watch:{total:function(){this.init()},currentPage:function(val){val!==this.page&&this.init()}},methods:{init:function(){this.page=this.currentPage||1,this.from=(this.page-1)*this.perPage+1;var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.updateCurrentPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.updateCurrentPage()},updateCurrentPage:function(){
// Update currentPage value
this.$emit("update:currentPage",this.page),this.$emit("onChange")}}},utils_WidgetPaginationvue_type_script_lang_js=WidgetPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(utils_WidgetPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WidgetPagination=component.exports},
/***/323796:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TransitionForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/stateflow/TransitionForm.vue?vue&type=template&id=406a8f2a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-header-hide wo-state-transition-dialog-center",staticStyle:{"z-index":"999999"},attrs:{"append-to-body":!0,visible:!0,"custom-class":"wo-web-form",width:_vm.hasMultiColumnElements?"70%":"35%"}},[_vm.isLoading||_vm.isFormDataLoading?_c("Spinner",{attrs:{size:"80",show:!0}}):[_c("div",{staticClass:"header pL30 pB20 pT10 d-flex bold"},[_c("div",{staticClass:"title mT10"},[_vm._v(_vm._s(_vm.formObj.displayName))])]),_c("f-webform",{attrs:{form:_vm.formObj,module:_vm.moduleName,isSaving:_vm.isSaving,isV3Api:_vm.isV3Api,canShowNotifyRequester:_vm.canShowNotifyRequester,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isEdit:!0,isEditForm:!0,moduleData:_vm.moduleData,moduleDataId:_vm.moduleDataId,modifyFieldPropsHook:_vm.modifyFieldPropsHook,formLabelPosition:"top"},on:{"update:form":function($event){_vm.formObj=$event},save:_vm.submitForm,cancel:_vm.closeAction}})]],2)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FormCreation=(__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(260228),__webpack_require__(373729)),FWebform=__webpack_require__(434500),validation=__webpack_require__(990260),api=__webpack_require__(32284),CustomButtonUtil=__webpack_require__(746095),TransitionFormvue_type_script_lang_js={extends:FormCreation/* default */.Z,components:{FWebform:FWebform/* default */.Z},props:["moduleName","recordId","transition","record","formId","closeAction","saveAction","isExternalModule","isV3","actionType","isFormOfCustomButton"],data:function(){return{isSaving:!1,selectedForm:{id:this.formId},isFormDataLoading:!1,hasMultiColumnElements:!1,isLoading:!0}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!_this.formId){_context.next=5;break}return _context.next=3,_this.loadModuleData();case 3:return _context.next=5,_this.loadFormData();case 5:case"end":return _context.stop()}}),_callee)})))()},computed:{moduleDataId:function(){return this.recordId},canShowNotifyRequester:function(){var moduleName=this.moduleName,record=this.record;return"workorder"===moduleName&&!(0,validation/* isEmpty */.xb)((record||{}).requester)},isV3Api:function(){return this.isV3}},methods:{init:function(){
// override to prevent default code in formcreation
},loadFormData:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var selectedForm,moduleName,moduleData,transition,formModuleName,id,name,formObj,_moduleName,formUrl,_yield$API$get,error,data,form,sections;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return selectedForm=_this2.selectedForm,moduleName=_this2.moduleName,moduleData=_this2.moduleData,transition=_this2.transition,formModuleName=transition.formModuleName,id=selectedForm.id,name=selectedForm.name,formObj={},_moduleName=_this2.isExternalModule?formModuleName:moduleName,formUrl=-1===id?"/v2/forms/".concat(_moduleName,"?formName=").concat(name,"&fetchFormRuleFields=true"):"/v2/forms/".concat(_moduleName,"?formId=").concat(id,"&fetchFormRuleFields=true"),_this2.isLoading=!0,_context2.next=9,api/* API */.bl.get(formUrl);case 9:return _yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this2.$message.error(error.message):(form=data.form,(0,validation/* isEmpty */.xb)(form)||(formObj=form,_this2.$set(_this2,"formObj",formObj),_this2.setFormLabels(),form.sections&&(
// Check if there are any subforms
// TODO: Also handle for cases where fields with
// span !== 1..ie multiple fields in the same row
sections=form.sections,_this2.hasMultiColumnElements=sections.some((function(section){return section.subFormId>0}))),_this2.isExternalModule||(0,validation/* isEmpty */.xb)(moduleData)||_this2.deserializeData(moduleData))),_this2.isLoading=!1,_context2.abrupt("return",formObj);case 15:case"end":return _context2.stop()}}),_callee2)})))()},setFormLabels:function(){this.formObj.primaryBtnLabel=this.$t("common.roles.save"),this.formObj.secondaryBtnLabel=this.$t("common._common.cancel")},loadModuleData:function(){var _this3=this;
// Keeping this async in case we need to load data from api here
return(0,validation/* isEmpty */.xb)(this.record)?Promise.resolve():new Promise((function(resolve){_this3.$set(_this3,"moduleData",_this3.record),resolve()}))},modifyFieldPropsHook:function(field){var moduleName=this.moduleName,recordId=this.recordId,isFormOfCustomButton=this.isFormOfCustomButton,actionType=this.actionType,isExternalModule=this.isExternalModule,_ref=field||{},displayTypeEnum=_ref.displayTypeEnum,lookupModuleName=_ref.lookupModuleName,isRelatedModuleField="LOOKUP_SIMPLE"===displayTypeEnum&&lookupModuleName===moduleName,isDisabled=isFormOfCustomButton?actionType===CustomButtonUtil/* ACTION_TYPES */.aI.CREATE_RECORD:isExternalModule;if(isRelatedModuleField)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{isDisabled:isDisabled,value:recordId})},submitForm:function(data){var _this4=this;this.isSaving=!0;var formObj=this.formObj,formId=this.formId,_data=data,subFormFiles=_data.subFormFiles;data=this.serializedData(formObj,data),subFormFiles&&(data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},data),{},{subFormFiles:subFormFiles})),this.saveAction(data,formId).catch((function(){_this4.closeAction()})).finally((function(){_this4.isSaving=!1}))}}},stateflow_TransitionFormvue_type_script_lang_js=TransitionFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(stateflow_TransitionFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,TransitionForm=component.exports},
/***/706881:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CurrencyPopOver}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/organizationSetting/currency/CurrencyPopOver.vue?vue&type=template&id=434b446a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showCurrencyField?_c("div",{staticClass:"d-flex"},[_vm.showInfo?_c("span",[_vm._v(_vm._s(_vm.getMultiCurrencyFieldValue||"---"))]):_vm._e(),_vm.showMultiCurrencyInfo?_c("el-popover",{attrs:{placement:"right",title:_vm.$t("setup.currency.rate"),width:"230",trigger:"hover",content:_vm.currencyContent,"open-delay":5,disabled:_vm.isEmpty(_vm.baseValue)}},[_vm.showInfo?_vm._e():_c("div",{class:[_vm.baseValue&&"pointer"],attrs:{slot:"reference"},slot:"reference"},[_c("div",[_vm._v(_vm._s(""+_vm.getMultiCurrencyFieldValue))]),_c("div",{staticClass:"f12"},[_vm._v(_vm._s(_vm.baseValue))])]),_vm.isBaseCode||!_vm.showInfo||_vm.hideInfoBtn?_vm._e():_c("fc-icon",{staticClass:"pointer info-position mL2",attrs:{slot:"reference",group:"dsm",name:"info",size:"13"},slot:"reference"})],1):_c("span",[_vm._v(_vm._s(_vm.getMultiCurrencyFieldValue||"---"))])],1):_c("span",[_vm._v("---")])])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(990260)),CurrencyUtil=__webpack_require__(15426),vuex_esm=__webpack_require__(420629),CurrencyPopOvervue_type_script_lang_js={props:["field","details","showInfo","hideInfoBtn"],data:function(){return{baseValue:"",isEmpty:validation/* isEmpty */.xb}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account},currencyList:function(state){return state.activeCurrencies}})),{},{showMultiCurrencyInfo:function(){var _ref=this.multiCurrency||{},multiCurrencyEnabled=_ref.multiCurrencyEnabled;return multiCurrencyEnabled},isBaseCode:function(){var _ref2=this.multiCurrency||{},baseCode=_ref2.currencyCode,_ref3=this.details||{},currencyCode=_ref3.currencyCode;return baseCode===currencyCode},showCurrencyField:function(){var currencyValue=this.currencyValue;return!(0,validation/* isEmpty */.xb)(currencyValue)&&"---"!=currencyValue},multiCurrency:function(){var _ref4=this.$getProperty(this.account,"data.currencyInfo")||{},displaySymbol=_ref4.displaySymbol,currencyCode=_ref4.currencyCode,multiCurrencyEnabled=_ref4.multiCurrencyEnabled;return{displaySymbol:displaySymbol,currencyCode:currencyCode,multiCurrencyEnabled:multiCurrencyEnabled}},currencyContent:function(){var details=this.details,currencyValue=this.currencyValue,baseSymbol=this.multiCurrency.displaySymbol;if(!(0,validation/* isEmpty */.xb)(currencyValue)){var _ref5=details||{},exchangeRate=_ref5.exchangeRate,currencyCode=_ref5.currencyCode,currency=(this.currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode}));if((0,validation/* isEmpty */.xb)(currency)||currency.displaySymbol===baseSymbol)return null;var _ref6=currency||{},displaySymbol=_ref6.displaySymbol,content="".concat(baseSymbol," 1 = ").concat(displaySymbol," ").concat(exchangeRate);return content}return"---"},currencyValue:function(){var details=this.details,field=this.field,_ref7=details||{},data=_ref7.data;return field.displayValue||details[field.name]||(null===data||void 0===data?void 0:data[field.name])},getMultiCurrencyFieldValue:function(){var currencyValue=this.currencyValue,showInfo=this.showInfo,_this$multiCurrency=this.multiCurrency,baseSymbol=_this$multiCurrency.displaySymbol,baseCode=_this$multiCurrency.currencyCode,multiCurrencyEnabled=_this$multiCurrency.multiCurrencyEnabled,_ref8=this.details||{},currencyCode=_ref8.currencyCode,exchangeRate=_ref8.exchangeRate,currency=(this.currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode})),baseCurrency=(this.currencyList||[]).find((function(currency){return baseCode===currency.currencyCode}));if((0,validation/* isEmpty */.xb)(currency)&&!(0,validation/* isEmpty */.xb)(currencyValue))return"".concat(baseSymbol," ").concat(currencyValue);var _ref9=currency||{},displaySymbol=_ref9.displaySymbol;displaySymbol=(0,validation/* isEmpty */.xb)(displaySymbol)?baseSymbol:displaySymbol;var baseValue="";if(multiCurrencyEnabled&&baseCode!==currencyCode){var value=(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(currencyValue/exchangeRate,baseCurrency);baseValue="( ".concat(baseSymbol," ").concat(value," )")}return currencyValue=(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(currencyValue,currency),this.setBaseValue(baseValue),showInfo?"".concat(displaySymbol," ").concat(currencyValue," ").concat(baseValue):"".concat(displaySymbol," ").concat(currencyValue)}}),created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$store.dispatch("getActiveCurrencyList");case 2:case"end":return _context.stop()}}),_callee)})))()},methods:{setBaseValue:function(value){this.baseValue=value}}},currency_CurrencyPopOvervue_type_script_lang_js=CurrencyPopOvervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(currency_CurrencyPopOvervue_type_script_lang_js,render,staticRenderFns,!1,null,"434b446a",null)
/* harmony default export */,CurrencyPopOver=component.exports},
/***/297813:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return TasksMonolith}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v3/widgets/TasksMonolith.vue?vue&type=template&id=5cec4191&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("div",{staticClass:"text-center width100 pT50 mT50"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_c("div",[_c("div",{staticClass:"pm-summary-inner-container height100",attrs:{id:"summarytask"}},[_c("div",{staticClass:"wo-task-display"},[_c("div",{staticClass:"pR5 height100 pB100 inline-block fL fc-res-dell",class:{width71:!_vm.showAddTask,width66:_vm.showAddTask}},[_c("div",{staticClass:"height100"},[_vm.taskChartData&&_vm.taskChartData.value&&_vm.taskChartData.value>0?_c("div",{staticClass:"p20 white-bg-block mB20"},[_c("el-row",[_c("el-col",{staticClass:"mT10",attrs:{span:_vm.taskResources.length>1&&_vm.taskResources.length<=30?14:15}},[_c("div",{staticClass:"fc__wo__task__bar fc__wo__task__bar-stacked"},[_c("span",{staticClass:"fc__task__gradient__bar",style:"width:"+_vm.taskChartData.currentValue/_vm.taskChartData.value*100+"%",attrs:{data:_vm.taskChartData}})])]),_c("el-col",{staticClass:"mT15",attrs:{span:3}},[_c("div",{staticClass:"flex-middle justify-content-center"},[_c("div",{staticClass:"green-txt-12"},[_vm._v(" "+_vm._s(_vm.taskChartData.currentValue)+" ")]),_c("div",{staticClass:"fc-grey-text12 pL3"},[_vm._v(" / "+_vm._s(_vm.taskChartData.value)+" ")])])]),_c("el-col",{staticClass:"text-right",attrs:{span:5}},[_vm.taskChartData.currentValue!==_vm.taskChartData.value?_c("el-button",{staticClass:"fc-pink-border-btn",attrs:{type:"button",disabled:_vm.canDisableCloseTask(_vm.allTaskStatus)},on:{click:_vm.closeAllTask}},[_vm._v(" "+_vm._s(_vm.selectedTaskResource?_vm.$t("maintenance._workorder.close_filtered_task"):_vm.$t("maintenance._workorder.close_all_task"))+" ")]):_c("div",{staticClass:"pT15 green-txt-13"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.all_task_closed"))+" ")])],1),_vm.taskResources.length>1&&_vm.taskResources.length<=30?_c("el-col",{staticClass:"flRight mT15 pL20",attrs:{span:1}},[_c("div",{staticClass:"pointer user-select-none",on:{click:function($event){_vm.showTaskResourceFilter=!_vm.showTaskResourceFilter}}},[_c("span",{staticClass:"rotate90"},[_c("img",{staticStyle:{width:"15px"},attrs:{src:__webpack_require__(684890)}})])])]):_vm._e()],1)],1):_vm._e(),_vm.showTaskResourceFilter?_c("div",{staticClass:"p10 white-bg-block mB20 flRight task-resource-filter",staticStyle:{width:"35%"}},[_c("el-select",{staticClass:"width100",attrs:{filterable:"",clearable:""},model:{value:_vm.selectedTaskResource,callback:function($$v){_vm.selectedTaskResource=$$v},expression:"selectedTaskResource"}},_vm._l(_vm.taskResources,(function(resource){return _c("el-option",{key:resource.id,attrs:{label:resource.name,value:resource.id}})})),1)],1):_vm._e(),_c("div",{staticClass:"clearboth"}),_c("div",{staticClass:"position-relative fc-visibility-gicon-visible height100"},[_c("div",{staticClass:"height100 overflow-y-scroll"},[_vm.isTaskFilling?_c("spinner",{attrs:{show:_vm.isTaskFilling,size:"80"}}):_vm.isTaskListEmpty?_vm.isTaskListEmpty?_c("div",{staticClass:"pT30 text-center white-bg-block pB30"},[_c("div",{staticClass:"mB10"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/task",iconClass:"icon text-center icon-xxxlg"}})],1),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.emptyStateMsg)+" ")]),_c("div",{staticClass:"pB20 pT20"},[_c("el-tooltip",{attrs:{effect:"dark",disabled:_vm.canShowAddTaskButton,content:_vm.addTaskButtonMessage,placement:"top"}},[_c("span",[_c("el-button",{staticClass:"fc-btn-green-medium-fill",attrs:{disabled:!_vm.canShowAddTaskButton,"data-test-selector":"Add_Task"},on:{click:_vm.addNewTask}},[_c("img",{staticClass:"wo-task-addimg",attrs:{src:__webpack_require__(97573)}}),_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.add_task"))+" ")])],1)]),_c("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"fc-btn-green-medium-border mL10",on:{click:_vm.addNewTask}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_section")))])],1)]):_vm._e():_c("div",{staticClass:"white-bg-block mB20 pB40 pT20"},[0===Object.keys(_vm.sections).length?_c("div",{staticClass:"item float_right_2"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.addTaskButtonMessage,placement:"top"}},[_c("span",[_vm.workorderSourceTypeNotPlanned&&!_vm.isTaskListEmpty?_c("el-button",{staticClass:"p5",attrs:{disabled:!_vm.showAddNewTask,"data-test-selector":"Add_Task",icon:"el-icon-plus",type:"text"},on:{click:function($event){return _vm.addNewTask()}}}):_vm._e()],1)])],1):_vm._e(),_vm._l(_vm.getSortedTaskList(),(function(obj,index){return _c("div",{key:index,staticClass:"mT20"},[_vm.sections[obj.sectionId]?_c("div",{staticClass:"label-txt-black p20 border-bottom4 fw-bold"},[_vm._v(" "+_vm._s(_vm.sections[obj.sectionId].name)+" "),_vm.woDescriptiontranslate?_c("InstantTranslate",{attrs:{content:_vm.sections[obj.sectionId].name}}):_vm._e(),_c("div",{staticClass:"float_right_1"},[_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:_vm.addTaskButtonMessage,placement:"top"}},[_c("span",[_vm.workorderSourceTypeNotPlanned&&!_vm.isTaskListEmpty?_c("el-button",{attrs:{disabled:!_vm.showAddNewTask,"data-test-selector":"Add_Task",icon:"el-icon-plus",type:"text"},on:{click:function($event){return _vm.addNewTaskToASection(obj.sectionId)}}}):_vm._e()],1)])],1)],1):_vm._e(),_vm._l(obj.taskList,(function(task,index1){return _c("div",{key:index1,staticClass:"fc__sum__task__list width100",class:{selected:_vm.selectedTask===task,closed:"OPEN"!==task.status.type},attrs:{disabled:!_vm.isPrerequisiteCompleted}},[_c("div",{staticClass:"width40px",staticStyle:{cursor:"pointer","padding-left":"5px"},attrs:{disabled:!_vm.isPrerequisiteCompleted||!_vm.canExecuteTask},on:{click:function($event){_vm.isPrerequisiteCompleted&&_vm.canExecuteTask&&_vm.changeTaskStatus(task)}}},["OPEN"===task.status.type?_c("i",{staticClass:"fa fa-circle-thin",staticStyle:{color:"#ff3184","font-size":"28px"},attrs:{disabled:!_vm.isPrerequisiteCompleted}}):_c("i",{staticClass:"el-icon-circle-check",staticStyle:{color:"#ff3184","font-size":"28px"},attrs:{disabled:!_vm.isPrerequisiteCompleted}})]),_c("div",{staticClass:"task-item width50",staticStyle:{"padding-left":"10px",position:"relative"},on:{click:function($event){return _vm.showTaskDetails(task)}}},[-1===task.id?_c("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:_vm.$t("maintenance._workorder.write_a_task_name")},model:{value:task.subject,callback:function($$v){_vm.$set(task,"subject",$$v)},expression:"task.subject"}}):_c("div",{class:[{closedTask:"OPEN"!==task.status.type},"label-txt-black pointer"],staticStyle:{width:"100%","word-wrap":"break-word"},attrs:{type:"text",placeholder:""}},[_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(task.uniqueId))]),_vm._v(" "+_vm._s(task.subject)+" "),_c("div",[_vm.woDescriptiontranslate?_c("InstantTranslate",{attrs:{content:task.subject}}):_vm._e()],1)]),-1===task.id||task.resource&&task.resource.name?_c("div",{staticClass:"pT5 inline-flex"},[-1===task.id?_c("div",{staticClass:"flLeft",staticStyle:{height:"10px",width:"10px",cursor:"pointer"},on:{click:function($event){return _vm.showSpaceAssetChooser()}}},[_c("img",{attrs:{src:__webpack_require__(539884)}})]):_c("div",{staticClass:"flLeft"},[1===task.resource.resourceType?_c("img",{staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(572902)}}):_c("img",{staticStyle:{height:"11px",width:"14px"},attrs:{src:__webpack_require__(30684)}})]),_c("div",{staticClass:"fc-grey2-text12 pL5"},[_vm._v(" "+_vm._s(task.resource.name||"")+" ")])]):_vm._e()],1),1!==task.inputType&&-1!==task.id?_c("div",{staticClass:"f-element text-right width50 wo-text-input-width flex-middle justify-content-end"},[2===task.inputType||"2"===task.inputType?_c("div",[!task.readingField||"NUMBER"!==task.readingField.dataTypeEnum&&"DECIMAL"!==task.readingField.dataTypeEnum||5!==task.readingField.metric?_c("div",{staticClass:"position-relative"},[_c("div",{staticClass:"flex-middle justify-content-end"},[task.lastReading&&-1!==task.lastReading&&"-1"!==task.lastReading?_c("div",{staticClass:"inline mR10"},[_c("q-icon",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#prevpopup_"+task.id,position:"bottom",arrow:!0,theme:"light",animation:"scale"},expression:"{\n                                  html: '#prevpopup_' + task.id,\n                                  position: 'bottom',\n                                  arrow: true,\n                                  theme: 'light',\n                                  animation: 'scale',\n                                }"}],staticClass:"info-icon mL10",staticStyle:{"vertical-align":"middle"},attrs:{name:"info_outline",size:"18px",title:""}})],1):_vm._e(),task.readingField&&_vm.isBooleanField(task.readingField)?_c("el-radio-group",{staticClass:"fc-radio-btn",attrs:{disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.onReadingChange(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},[_c("el-radio",{staticClass:"pT15",attrs:{color:"secondary",label:"1"}},[_vm._v(_vm._s(task.readingField.trueVal||"True"))]),_c("el-radio",{staticClass:"pT15",attrs:{color:"secondary",label:"0"}},[_vm._v(_vm._s(task.readingField.falseVal||"False"))])],1):_vm.isReadingEnum(task)?_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{disabled:_vm.canDisableField(task)},on:{change:function($event){return _vm.onReadingChange(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},_vm._l(_vm.fieldOptions(task),(function(item){return _c("el-option",{key:item.id,attrs:{label:item.value,value:item.id}})})),1):_c("el-input",{staticClass:"input-with-select",class:{"wo-task-group-input":_vm.isReadingFieldValidationEnabled,"wo-reading-input-width":task.readingFieldUnit<0},attrs:{type:"number",placeholder:_vm.$t("maintenance._workorder.enter_reading"),disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.onReadingChange(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},[_vm.isReadingFieldValidationEnabled&&task.readingField&&task.readingField.metric>0&&task.readingFieldUnit>0?_c("el-select",{attrs:{slot:"append",disabled:!_vm.canExecuteTask},on:{change:function($event){return _vm.onReadingChange(task)}},slot:"append",model:{value:task.readingFieldUnit,callback:function($$v){_vm.$set(task,"readingFieldUnit",$$v)},expression:"task.readingFieldUnit"}},_vm._l(_vm.getReadingFieldUnits(task.readingField.metric),(function(readingFieldUnit,index){return _c("el-option",{key:index,attrs:{label:readingFieldUnit.symbol,value:readingFieldUnit.unitId}})})),1):_vm._e()],1),!_vm.isReadingFieldValidationEnabled&&task.readingField&&task.readingField.unit?_c("div",{staticClass:"inline pL8"},[_vm._v(" "+_vm._s(task.readingField.unit)+" ")]):_vm._e()],1),_c("div",{staticClass:"time-error wo-time-error"},[_c("el-date-picker",{staticClass:"fc__wo__reading__time",attrs:{placeholder:_vm.setDateToString,type:"datetime",editable:!1,disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted,"default-value":new Date(_vm.workorder.createdTime),"picker-options":_vm.readingPickerOptions},on:{change:function($event){return _vm.updateReading(task)}},model:{value:task.inputTime,callback:function($$v){_vm.$set(task,"inputTime",$$v)},expression:"task.inputTime"}})],1),_vm.isReadingFieldValidationEnabled?_c("div",{staticClass:"clearboth"},[_vm.isReadingFieldValidationEnabled&&_vm.readingFieldErrorToggle?_c("div",[task.id==_vm.currentTaskObj.id?_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{visible:_vm.readingFieldErrorToggle,title:_vm.$t("common.header.alert"),fullscreen:!1,"before-close":_vm.beforeCloseDialogBox,"append-to-body":!0,width:"46%"},on:{"update:visible":function($event){_vm.readingFieldErrorToggle=$event}}},[_c("div",{staticClass:"wo-error-dialog-body"},[_c("div",[_c("AlertBanner",{attrs:{alert:_vm.readingFieldErrorToggle,alertMessage:_vm.readingFieldError},on:{"update:alert":function($event){_vm.readingFieldErrorToggle=$event},"update:alertMessage":function($event){_vm.readingFieldError=$event},"update:alert-message":function($event){_vm.readingFieldError=$event}}})],1),_vm.readingFieldSuggestionToggle?_c("div",{staticClass:"mT20"},_vm._l(_vm.readingFieldSuggestions,(function(readingFieldSuggestion,key){return _c("div",{key:key},[_c("WarningBanner",{attrs:{warning:_vm.readingFieldSuggestionToggle,warningMessage:readingFieldSuggestion},on:{"update:warning":function($event){_vm.readingFieldSuggestionToggle=$event},"update:warningMessage":function($event){readingFieldSuggestion=$event},"update:warning-message":function($event){readingFieldSuggestion=$event}}})],1)})),0):_vm._e(),_c("div",{staticClass:"fc-pink f14 bold text-left pT20"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.reset_reading"))+" ")]),_c("div",{staticClass:"mT20 mR5"},[_c("el-radio-group",{model:{value:_vm.readingData,callback:function($$v){_vm.readingData=$$v},expression:"readingData"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:3}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.yes")))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:6}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.no")))])],1),3===_vm.readingData?_c("el-row",{staticClass:"flex-middle pT20"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"pR20 bold text-left fc-black-13"},[_vm._v(" "+_vm._s(task.subject)+" ")])]),_c("el-col",{attrs:{span:12}},[_c("el-input",{staticClass:"fc-input-full-border",class:{"wo-task-group-input":_vm.isReadingFieldValidationEnabled,"wo-reading-input-width":task.readingFieldUnit<0},attrs:{type:"number",placeholder:_vm.$t("maintenance._workorder.enter_reading"),disabled:!_vm.canExecuteTask},on:{focus:function($event){return _vm.checkAndShowTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},[_vm.isReadingFieldValidationEnabled&&task.readingField&&task.readingField.metric>0&&task.readingFieldUnit>0?_c("el-select",{staticClass:"fc-value-border",attrs:{slot:"append",disabled:!_vm.canExecuteTask},slot:"append",model:{value:task.readingFieldUnit,callback:function($$v){_vm.$set(task,"readingFieldUnit",$$v)},expression:"task.readingFieldUnit"}},_vm._l(_vm.getReadingFieldUnits(task.readingField.metric),(function(readingFieldUnit,index){return _c("el-option",{key:index,attrs:{label:readingFieldUnit.symbol,value:readingFieldUnit.unitId}})})),1):_vm._e()],1)],1),_c("div",[_vm.woDescriptiontranslate?_c("InstantTranslate",{attrs:{content:task.subject}}):_vm._e()],1)],1):_vm._e(),3===_vm.readingData?_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"bold fc-black-13 text-left"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.enter_the_consumption"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 fc-width-input mT10 mR20",attrs:{placeholder:_vm.$t("common.placeholders.enter_the_consumption"),disabled:!_vm.canExecuteTask},model:{value:_vm.consumptionData,callback:function($$v){_vm.consumptionData=$$v},expression:"consumptionData"}},[_vm.isReadingFieldValidationEnabled&&task.readingField&&task.readingField.metric>0&&task.readingFieldUnit>0?_c("el-select",{staticClass:"width110px",attrs:{slot:"append",disabled:!_vm.canExecuteTask},slot:"append",model:{value:task.readingFieldUnit,callback:function($$v){_vm.$set(task,"readingFieldUnit",$$v)},expression:"task.readingFieldUnit"}},_vm._l(_vm.getReadingFieldUnits(task.readingField.metric),(function(readingFieldUnit,index){return _c("el-option",{key:index,attrs:{label:readingFieldUnit.symbol,value:readingFieldUnit.unitId}})})),1):_vm._e()],1)],1):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[3===_vm.readingData?_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeReadingFieldErrorDialogBox}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel")))]):_vm._e(),3===_vm.readingData?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",disabled:_vm.isDisabled},on:{click:function($event){return _vm.onReadingChange(task)}}},[_vm._v(_vm._s(_vm.$t("common._common._save"))+" ")]):_c("el-button",{staticClass:"modal-btn-error uppercase",on:{click:_vm.closeReadingFieldErrorDialogBox}},[_vm._v(" "+_vm._s(_vm.$t("common._common.try_again"))+" ")])],1)])]):_vm._e()],1):_vm.isReadingFieldValidationEnabled&&_vm.readingFieldSuggestionToggle&&!_vm.readingFieldErrorToggle?_c("div",[_c("el-dialog",{key:"1",staticClass:"fc-dialog-center-container",attrs:{visible:_vm.readingFieldSuggestionToggle,title:_vm.$t("common.header.note"),fullscreen:!1,"before-close":_vm.beforeCloseDialogBox,"append-to-body":!0,width:"41%"},on:{"update:visible":function($event){_vm.readingFieldSuggestionToggle=$event}}},[_c("div",{staticClass:"wo-error-dialog-body"},[_vm._l(_vm.readingFieldSuggestions,(function(readingFieldSuggestion,key){return _c("div",{key:key},[_c("WarningBanner",{attrs:{warning:_vm.readingFieldSuggestionToggle,warningMessage:readingFieldSuggestion},on:{"update:warning":function($event){_vm.readingFieldSuggestionToggle=$event},"update:warningMessage":function($event){readingFieldSuggestion=$event},"update:warning-message":function($event){readingFieldSuggestion=$event}}})],1)})),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeReadingFieldSuggestionDialogBox}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.back"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.callOnReadingChangeWithoutValidation(_vm.currentTaskObj)}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.continue_anyway"))+" ")])],1)],2)])],1):_vm._e()]):_vm._e(),_c("div",{staticClass:"hide",attrs:{id:"prevpopup_"+task.id}},[_c("div",{staticClass:"task-prevreading"},[_vm._v(" "+_vm._s(task.lastReading)+_vm._s(task.readingField&&task.readingField.unit?task.readingField.unit:"")+" "),_c("span",[_vm._v(" ("+_vm._s(_vm.$t("maintenance._workorder.previous_reading"))+") ")])])])]):_c("div",{staticClass:"flex-middle justify-content-end"},[_c("el-input",{staticClass:"inline task-minutes-hours-input task-right-right-r-remove",attrs:{type:"number",disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.checkForHoursAndMins(task)}},model:{value:task.hours,callback:function($$v){_vm.$set(task,"hours",$$v)},expression:"task.hours"}},[_c("span",{staticClass:"pR10 fc-grey6 f12 duration",attrs:{slot:"suffix"},slot:"suffix"},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.hours")))])]),_c("el-input",{ref:"fTaskMin"+task.id,refInFor:!0,staticClass:"inline task-minutes-hours-input mR10 task-right-left-r-remove",attrs:{type:"number",disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.checkForHoursAndMins(task)}},model:{value:task.minutes,callback:function($$v){_vm.$set(task,"minutes",$$v)},expression:"task.minutes"}},[_c("span",{staticClass:"pR10 fc-grey6 f12 duration",attrs:{slot:"suffix"},slot:"suffix"},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.minutes")))])])],1)]):_vm._e(),3===task.inputType||"3"===task.inputType?_c("el-input",{attrs:{type:"text",placeholder:_vm.$t("maintenance._workorder.enter_text"),disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.addTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}}):_vm._e(),4===task.inputType||"4"===task.inputType?_c("el-input",{attrs:{type:"number",placeholder:_vm.$t("maintenance._workorder.enter_numeric_value"),disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.addTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}}):_vm._e(),5===task.inputType||"5"===task.inputType?_c("span",[_vm.checkOptionsLength(task.options)?_c("el-radio-group",{staticClass:"fc-radio-btn",attrs:{disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){_vm.checkAndShowTask(task),_vm.addTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},_vm._l(task.options,(function(option,index){return _c("el-radio",{key:index,staticClass:"pT15",attrs:{color:"secondary",label:option}},[_vm._v(_vm._s(option))])})),1):_c("el-select",{attrs:{"popper-class":"f-dropdown",disabled:_vm.canDisableField(task)},on:{change:function($event){return _vm.addTask(task)},focus:function($event){return _vm.checkAndShowTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},_vm._l(task.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option,value:option}})})),1)],1):_vm._e()],1):_vm._e()])}))],2)}))],2)],1)])])])]),_vm.showAddTask&&-1!==_vm.selectedTask.id?_c("div",{staticClass:"fR pm-summary-inner-right-con mT0 fc-wo-summary-task-fixed width32-4 fc-scrollbar-wrap"},[_c("div",{staticClass:"mT0"},[_c("div",{staticClass:"white-bg-block fc__sum__task__details position-relative"},[_c("div",{},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,placement:"top"},expression:"{\n                arrow: true,\n                placement: 'top',\n              }"}],staticClass:"q-icon el-icon-close material-icons pull-right pointer wo__close__icon",attrs:{"aria-hidden":"true",title:_vm.$t("common._common.close")},on:{click:_vm.closedisplay}}),_c("div",{staticClass:"inline-flex"},[_c("div",{staticClass:"pL30 pT20 pR30"},[_c("div",{staticClass:"fc-black2-18"},[_vm._v(" "+_vm._s(_vm.selectedTask.subject?_vm.selectedTask.subject:"")+" ")]),_c("div",{staticClass:"flex-middle mT10"},[_vm.selectedTask.resource?_c("div",{staticClass:"pR5 vertical-middle"},[1===_vm.selectedTask.resource.resourceType?_c("img",{staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(572902)}}):_c("img",{staticStyle:{height:"11px",width:"14px"},attrs:{src:__webpack_require__(30684)}})]):_vm._e(),_c("div",{staticClass:"fc-grey2-text12"},[_vm._v(" "+_vm._s(_vm.selectedTask.resource?_vm.selectedTask.resource.name:"")+" ")])])])])]),_c("div",{staticClass:"mL30 mR30"},[_c("div",{staticClass:"fc-black-13"},[_vm._v(" "+_vm._s(_vm.selectedTask.description)+" ")]),_c("div",{staticClass:"fc-scrollbar-wrap mT20"},[2===_vm.selectedTask.inputType||"2"===_vm.selectedTask.inputType?_c("div",[_c("div",{staticClass:"taskoptions pB10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.enter"))+" "+_vm._s(_vm.getSelectedTaskReadingFieldProperty("displayName"))+" "+_vm._s("(in "+_vm.getSelectedTaskReadingFieldProperty("unit")+")")+" ")]),_vm.selectedTask.readingField&&_vm.isBooleanField(_vm.selectedTask.readingField)?_c("el-radio-group",{staticClass:"fc-radio-btn",attrs:{disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}},[_c("el-radio",{staticClass:"pT15",attrs:{color:"secondary",label:"1"}},[_vm._v(_vm._s(_vm.selectedTask.readingField.trueVal||"True"))]),_c("el-radio",{staticClass:"pT15",attrs:{color:"secondary",label:"0"}},[_vm._v(_vm._s(_vm.selectedTask.readingField.falseVal||"False"))])],1):_vm.isReadingEnum(_vm.selectedTask)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{disabled:_vm.canDisableField(_vm.selectedTask)},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}},_vm._l(_vm.fieldOptions(_vm.selectedTask),(function(item){return _c("el-option",{key:item.id,attrs:{label:item.value,value:item.id}})})),1):_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"number",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}}),_c("el-date-picker",{staticClass:"inputtime-detail fc-input-full-border2 width100 mT20",attrs:{type:"datetime",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.onReadingChange(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputTime,callback:function($$v){_vm.$set(_vm.selectedTask,"inputTime",$$v)},expression:"selectedTask.inputTime"}})],1):_vm._e(),3===_vm.selectedTask.inputType||"3"===_vm.selectedTask.inputType?_c("div",[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}})],1):_vm._e(),4===_vm.selectedTask.inputType||"4"===_vm.selectedTask.inputType?_c("div",[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"number",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}})],1):_vm._e(),5===_vm.selectedTask.inputType||"5"===_vm.selectedTask.inputType?_c("div",{staticClass:"f-element"},_vm._l(_vm.selectedTask.options,(function(option,index){return _c("div",{key:index},[_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:option,disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}},[_vm._v(_vm._s(option))])],1)})),0):_vm._e(),6===_vm.selectedTask.inputType||"6"===_vm.selectedTask.inputType?_c("div",[_c("el-checkbox-group",{attrs:{disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValues,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValues",$$v)},expression:"selectedTask.inputValues"}},_vm._l(_vm.selectedTask.options,(function(option,index){return _c("el-checkbox",{key:index,staticClass:"newradio pT15 f-checkbox",attrs:{color:"secondary",label:option}},[_vm._v(_vm._s(option))])})),1)],1):_vm._e(),_c("div",{staticClass:"taskoptions pB10 mT20"},[_c("task-attachment-preview",{key:_vm.selectedTask.id,attrs:{module:"taskattachments",isLockedState:_vm.isLockedState||!_vm.canExecuteTask,isTaskClosed:_vm.isTaskClosed(_vm.selectedTask),record:_vm.selectedTask,disabled:_vm.canDisableAttachment(_vm.selectedTask)},on:{taskattachmentactivity:function($event){return _vm.updateWoActions()}}})],1),_c("div",{staticClass:"taskoptions pB10 pT20 fc__wo__remarks"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted,placeholder:_vm.$t("common.products.add_remarks")},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.remarks,callback:function($$v){_vm.$set(_vm.selectedTask,"remarks",$$v)},expression:"selectedTask.remarks"}})],1)])]),_c("div",{staticClass:"fc__task__complete__btn"},[_c("el-button",{staticClass:"fc-pink-btn-full-width",attrs:{type:"button",disabled:!_vm.isPrerequisiteCompleted||!_vm.canExecuteTask},on:{click:function($event){return _vm.changeTaskStatus(_vm.selectedTask)}}},[_vm._v(_vm._s(_vm.getButtonName(_vm.selectedTask)))])],1)])])]):_vm.showAddTask&&-1===_vm.selectedTask.id?_c("div",{staticClass:"fR pm-summary-inner-right-con mT0 fc-wo-summary-task-fixed width32-4 fc-scrollbar-wrap"},[_c("div",{staticClass:"mT0"},[_c("div",{staticClass:"white-bg-block fc__sum__task__details position-relative"},[_c("div",[_c("div",{staticStyle:{"padding-bottom":"25px","padding-top":"17px","padding-left":"30px","padding-right":"30px"}},[_c("div",{staticClass:"fw-bold label-txt-black pB15"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.add_task"))+" ")]),_c("i",{staticClass:"q-icon el-icon-close material-icons destroy pull-right pointer",attrs:{"aria-hidden":"true"},on:{click:_vm.closedisplay}}),_c("div",{staticClass:"inline-flex"},[_vm._m(0),_c("div",{staticClass:"flLeft"},[_c("div",{staticClass:"taskheader"},[_c("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:_vm.$t("maintenance._workorder.write_a_task_name")},model:{value:_vm.selectedTask.subject,callback:function($$v){_vm.$set(_vm.selectedTask,"subject",$$v)},expression:"selectedTask.subject"}})],1),_c("div",{staticStyle:{"margin-top":"-3px"}},[_c("div",{staticClass:"tasksubheader flLeft",staticStyle:{"padding-left":"10px"}},[_vm._v(" "+_vm._s(_vm.selectedTask.selectedResourceName)+" ")]),_c("div",{staticClass:"flLeft",staticStyle:{height:"10px",width:"10px","margin-left":"10px",cursor:"pointer"},on:{click:function($event){return _vm.showSpaceAssetChooser()}}},[_c("img",{attrs:{src:__webpack_require__(539884)}})]),_c("div",{staticClass:"clearboth"})])]),_c("div",{staticClass:"clearboth"})])]),_c("div",{staticStyle:{"margin-left":"30px","margin-right":"30px","margin-top":"30px"}},[_c("div",[_c("el-row",{attrs:{align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"label-txt-black fw-bold"},[_c("div",{staticClass:"taskdescinput",staticStyle:{"font-size":"13px","letter-spacing":"0.4px",color:"#6b7e91"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" ")]),_c("el-input",{staticClass:"form-item pT20 fc-input-full-border-select2",attrs:{type:"textarea"},model:{value:_vm.selectedTask.description,callback:function($$v){_vm.$set(_vm.selectedTask,"description",$$v)},expression:"selectedTask.description"}})],1)])],1),_c("div",{staticClass:"enableInput",staticStyle:{"padding-top":"25px"}},[_c("el-checkbox",{model:{value:_vm.selectedTask.attachmentRequired,callback:function($$v){_vm.$set(_vm.selectedTask,"attachmentRequired",$$v)},expression:"selectedTask.attachmentRequired"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.photo")))])],1),_c("div",{staticClass:"enableInput",staticStyle:{"padding-top":"25px"}},[_c("el-checkbox",{on:{change:function($event){_vm.selectedTask.inputType=_vm.selectedTask.enableInput?_vm.selectedTask.inputType:1}},model:{value:_vm.selectedTask.enableInput,callback:function($$v){_vm.$set(_vm.selectedTask,"enableInput",$$v)},expression:"selectedTask.enableInput"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.enable_input")))])],1),_vm.selectedTask.enableInput?_c("div",{staticClass:"f-element"},[_c("div",{staticClass:"pT30",staticStyle:{"font-size":"13px","letter-spacing":"0.4px",color:"#6b7e91"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.task_type"))+" ")]),_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{disabled:!_vm.selectedTask.resource||!_vm.selectedTask.resource.id||-1===_vm.selectedTask.resource.id||!_vm.isPrerequisiteCompleted,color:"secondary",label:"2"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.reading"))+" "+_vm._s(_vm.selectedTask.resource&&_vm.selectedTask.resource.id&&-1!==_vm.selectedTask.resource.id?"":_vm.$t("maintenance._workorder.select_asset_space"))+" ")]),_c("div",[_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:"3"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.text")))])],1),_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:"4"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.numeric")))]),_c("div",[_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:"5"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.option")))])],1),_c("el-radio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:"6"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.checkbox")))])],1):_vm._e(),"2"===_vm.selectedTask.inputType?_c("div",{staticStyle:{"padding-top":"20px"}},[_c("div",{staticStyle:{"padding-top":"20px","font-size":"13px","letter-spacing":"0.4px",color:"#6b7e91"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.reading_field"))+" ")]),_c("div",[_c("el-select",{staticClass:"form-item",staticStyle:{width:"100%"},attrs:{placeholder:_vm.$t("maintenance.old_pm.select")},model:{value:_vm.selectedTask.readingFieldId,callback:function($$v){_vm.$set(_vm.selectedTask,"readingFieldId",$$v)},expression:"selectedTask.readingFieldId"}},_vm._l(_vm.taskReadingFields,(function(readingField){return _c("el-option",{key:readingField.id,attrs:{label:readingField.displayName,value:readingField.id}})})),1)],1)]):_vm._e(),"5"===_vm.selectedTask.inputType||"6"===_vm.selectedTask.inputType?_c("div",[_c("div",{staticClass:"pT30",staticStyle:{"font-size":"13px","letter-spacing":"0.4px",color:"#6b7e91","padding-bottom":"10px"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.options"))+" ")]),_vm._l(_vm.selectedTask.options,(function(option){return _c("div",{key:option,staticStyle:{"padding-bottom":"10px"}},["5"===_vm.selectedTask.inputType?_c("div",{staticClass:"circle flLeft",staticStyle:{width:"14px",height:"14px","margin-top":"9px"}}):_vm._e(),"6"===_vm.selectedTask.inputType?_c("div",{staticClass:"flLeft",staticStyle:{width:"14px",height:"14px","margin-top":"9px","margin-right":"7px","border-radius":"3px",border:"1px solid #c4d1dd"}}):_vm._e(),_c("div",{staticClass:"flLeft",staticStyle:{"padding-left":"3px",width:"200px"}},[_c("el-input",{staticClass:"options-input",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:""},model:{value:option.name,callback:function($$v){_vm.$set(option,"name",$$v)},expression:"option.name"}})],1),_c("div",{staticClass:"clearboth"})])})),_c("div",{staticStyle:{"margin-bottom":"30px","font-size":"13px",color:"rgb(57, 178, 194)",cursor:"pointer","border-bottom":"1px solid rgb(57, 178, 194)",width:"70px","padding-top":"10px"},on:{click:function($event){return _vm.addTaskOption(_vm.selectedTask)}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.add_option"))+" ")])],2):_vm._e()],1),_c("div",{staticClass:"p30"},[_c("el-button",{staticClass:"btnsize txt fc-btn-green-medium-fill",attrs:{"data-test-selector":"Save_Task"},on:{click:function($event){return _vm.addTask(_vm.selectedTask)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.save")))])],1)])])])])]):_vm.taskActionPermission?_c("wo-field-details",{ref:"wo-field-details",attrs:{workorder:_vm.workorder,excludeFields:[],refreshWoDetails:_vm.refreshWoDetails,updateWoActions:_vm.updateWoActions,currentView:_vm.currentView,forV3:!0}}):_vm._e(),_c("el-dialog",{attrs:{visible:_vm.showMandatoryInputsDialog,title:_vm.mandatoryInputsTitle,"custom-class":"fc-dialog-center-container"},on:{"update:visible":function($event){_vm.showMandatoryInputsDialog=$event}}},[_vm.showMandatoryInputsDialog?_c("div",{staticClass:"max-height500 pB100"},[_vm.addAttachmentRequiredDialog?_c("div",{staticClass:"pB20"},[_c("mobile-attachment",{attrs:{module:"taskattachments",record:_vm.selectedTask,disabled:"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted,doNotSave:!0},on:{marshalled:function($event){return _vm.handlePhotoUpload($event)}}})],1):_vm._e(),_vm.addTaskRemarksDialog?_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.remarks"))+" ")]),_c("div",[_c("el-input",{staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:_vm.$t("common.products.add_remarks"),resize:"none",disabled:!_vm.canExecuteTask},model:{value:_vm.selectedTask.remarks,callback:function($$v){_vm.$set(_vm.selectedTask,"remarks",$$v)},expression:"selectedTask.remarks"}})],1)])],1):_vm._e()],1):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showMandatoryInputsDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){_vm.addTask(_vm.selectedTask),_vm.showMandatoryInputsDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common._save")))])],1)])],1),_c("task-space-asset-chooser",{attrs:{visibility:_vm.visibility,quickSearchQuery:_vm.quickSearchQuery,filter:_vm.filter},on:{associate:_vm.associate,"update:visibility":function($event){_vm.visibility=$event}}})],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flLeft"},[_c("i",{staticClass:"el-icon-circle-check",staticStyle:{color:"rgb(255, 49, 132)","font-size":"28px"}})])}],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(169358),__webpack_require__(879288),__webpack_require__(186466),__webpack_require__(648324),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(425728),__webpack_require__(162506),__webpack_require__(821057),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(538077),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(336585),__webpack_require__(420629)),MobileAttachment2=__webpack_require__(391810),TaskAttachmentPreview=__webpack_require__(252669),workorderHelper=__webpack_require__(865764),AlertBanner=__webpack_require__(822902),WarningBanner=__webpack_require__(38278),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),quasar_esm=__webpack_require__(641358),validation=__webpack_require__(990260),eventBus=__webpack_require__(398011),WorkOrderFieldDetails=__webpack_require__(587971),CustomButtonUtil=__webpack_require__(746095),picklist=__webpack_require__(961358),sanitize=__webpack_require__(678042),SpaceAssetChooser=__webpack_require__(372587),InstantTranslate=__webpack_require__(142885),router=__webpack_require__(329435),field=__webpack_require__(815872),METRIC_HASH={DURATION:5},TasksMonolithvue_type_script_lang_js={name:"WorkorderSummary",mixins:[workorderHelper/* default */.Z],components:{QIcon:quasar_esm/* QIcon */.oF,MobileAttachment:MobileAttachment2/* default */.Z,AlertBanner:AlertBanner/* default */.Z,WarningBanner:WarningBanner/* default */.Z,WoFieldDetails:WorkOrderFieldDetails/* default */.Z,TaskSpaceAssetChooser:SpaceAssetChooser/* default */.Z,TaskAttachmentPreview:TaskAttachmentPreview/* default */.Z,InstantTranslate:InstantTranslate/* default */.Z},data:function(){return{woDescriptiontranslate:!1,taskErrorMap:{},invokeRelatedListWidget:!1,woWidget:{relatedList:{module:{}}},rules:{taskSubject:[{required:!0,message:"Please enter Task Subject",trigger:"blur"}]},permitWidget:{relatedList:{module:{},field:{name:"ticket"}}},showPermitListWidget:!1,nextExecutionTime:null,photos:[],onFocus:!1,photoUploadUrl:null,photoUploadData:{},showAssetBreakdown:!1,assetBDSourceDetails:{condition:null,assetid:null,sourceId:null,sourceType:null},tasks:[],module_name:"workorder",activeName:"first",dialogVisible:!1,showSiteEdit:!0,validationRules:{},errorMap:{},errorQue:{},errorMessage:{},taskBulkList:[],fields:[],noOfUpdatedTAsk:0,testVar:null,customFieldUpdate:!1,visibility:!1,quickSearchQuery:"",loading:!0,summoryview:!0,fieldvisibility:!1,showWorkDurationDialog:!1,workDurationCallBack:null,radio2:"",selectedFieldUpdate:null,selectedFieldValue:null,summaryWindow:"true",subSection:"summarypage",sequencedData:!1,summarySection:"details",taskReadingFields:[],editFormVisibilty:!1,duedate:"",value1:"",subheaderMenu:[{label:this.$t("common.events.today"),path:{path:"/app/fa/events/today"}},{label:this.$t("common.events.yesterday"),path:{path:"/app/fa/events/yesterday"}},{label:this.$t("common.events.this_week"),path:{path:"/app/fa/events/thisweek"}},{label:this.$t("common.events.last_week"),path:{path:"/app/fa/events/lastweek"}},{label:this.$t("common.events.all_events"),path:{path:"/app/fa/events/all"}}],comments:[],taskList:{},preRequestList:{},newTaskList:[],sections:{},preRequestSections:{},newComment:{parentModuleLinkName:"ticketnotes",parentId:this.$route.params.id,body:null,notifyRequester:!1},commentFocus:!0,newTask:{subject:"",description:"",resource:{id:-1},isReadingTask:!1,readingFieldId:null,options:[],taskType:-1,enableInput:!1,inputType:1,attachmentRequired:!1,inputValidation:null,minSafeLimit:null,maxSafeLimit:null,id:-1},showAddTask:!1,selectedTask:{inputValidationRuleId:-1,inputValidation:null,safeLimitRuleId:-1,minSafeLimit:null,maxSafeLimit:null,options:[],taskType:-1,enableInput:!1,inputType:1,attachmentRequired:!1,subject:"",selectedResourceName:"",inputValues:[]},showAddPreRequest:!1,selectedPreRequest:{inputValidationRuleId:-1,inputValidation:null,safeLimitRuleId:-1,minSafeLimit:null,maxSafeLimit:null,options:[],taskType:-1,enableInput:!1,inputType:1,attachmentRequired:!1,subject:"",selectedResourceName:"",inputValues:[]},pickerOptions:{disabledDate:function(time){return time.getTime()<Date.now()-864e5}},waitBoolean:!0,downloadSummary:!1,workOrderTotalCost:null,workOrderSubTotal:null,taskChartData:null,workOrderStates:[],activeWoStateData:null,selectedTaskResource:null,showTaskResourceFilter:!1,metricWithUnits:{},readingFieldUnits:[],skipValidation:!1,readingFieldErrorToggle:!1,readingFieldError:null,currentValue:null,previousValue:null,readingFieldSuggestionToggle:!1,readingFieldSuggestions:[],averageValue:[],suggestedUnits:[],currentTaskObj:null,addTaskRemarksDialog:!1,showMandatoryInputsDialog:!1,addAttachmentRequiredDialog:!1,vendorsList:[],openTaskOptions:!1,hazardWidget:{relatedList:{module:{},field:{name:"workorder"}}},showHazardListWidget:!1,currentTaskformData:{},POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz,readingData:6,consumptionData:"",isUserAddingTask:!1,isTaskFilling:!1}},created:function(){var _this=this;this.isBooleanField=field/* isBooleanField */.Mw,window.addEventListener("click",this.blurCommentBox),this.$store.dispatch("loadSite"),this.$store.dispatch("loadTicketStatus","workorder"),this.$store.dispatch("loadApprovalStatus"),this.$store.dispatch("view/loadModuleMeta","workorder"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups"),eventBus/* eventBus */.Y.$on("woDescriptiontranslate",(function(woDescriptiontranslate){_this.woDescriptiontranslate=woDescriptiontranslate}))},destroyed:function(){var _this2=this;eventBus/* eventBus */.Y.$off("woDescriptiontranslate",(function(){_this2.woDescriptiontranslate=!1}))},mounted:function(){var _this3=this;this.init();var woPromise=this.fetchWo(!0),taskPromise=this.loadTasks(this.workorder);this.loadComments(),this.loadReadingFieldUnits(),this.$setProperty(this,"isTaskFilling",!0),Promise.all([woPromise,taskPromise]).then((function(resp){var workorder=_this3.workorder,_ref=workorder||{},pm=_ref.pm,_ref2=pm||{},pmId=_ref2.id;(0,validation/* isEmpty */.xb)(pm)||(0,validation/* isEmpty */.xb)(pmId)?_this3.$setProperty(_this3,"isTaskFilling",!1):_this3.getNextWorkOrderTime().then((function(resp){if(resp.data.result){if(_this3.nextExecutionTime=resp.data.result.nextExecutionTime,_this3.taskList)for(var keys=Object.keys(_this3.taskList),i=0;i<keys.length;i++)for(var tasks=_this3.taskList[keys[i]],k=0;k<tasks.length;k++)if(_this3.workorder.pm&&(!_this3.taskList[keys[i]][k].inputTime||-1===_this3.taskList[keys[i]][k].inputTime)){var nextExec=_this3.nextExecutionTime;if(nextExec&&nextExec>0){var currentTime=(new Date).valueOf();currentTime>=_this3.workorder.createdTime&&currentTime<nextExec||(_this3.taskList[keys[i]][k].inputTime=_this3.convertTimeAsIfFromDatePicker(_this3.workorder.createdTime))}}_this3.$setProperty(_this3,"isTaskFilling",!1)}}))}));var currentSiteId=Number(this.$cookie.get("fc.currentSite"))||-1;-1!==currentSiteId&&(this.showSiteEdit=!1),this.$http.get("v2/photos/prerequisitephotos?parentId="+this.openWorkorderId).then((function(response){response.data&&0===response.data.responseCode&&(_this3.photos=response.data.result.photos?response.data.result.photos:[])})),this.loadVendorsPicklist(),eventBus/* eventBus */.Y.$on("refesh-parent",(function(){_this3.fetchWo(!0)}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketcategory:function(state){return state.ticketCategory},ticketpriority:function(state){return state.ticketPriority},ticketstatus:function(state){return state.ticketStatus.workorder},moduleMeta:function(state){return state.view.metaInfo},sites:function(state){return state.site},hasWorkOrderClosePermission:function(){return(0,router/* isWebTabsEnabled */.tj)()?this.$hasPermission("".concat(this.moduleName,":UPDATE_CLOSE_WORKORDER")):this.$hasPermission("".concat(this.moduleName,":CLOSE_WORK_ORDER"))}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketTypePickList","getTicketPriority","getApprovalStatus","isStatusLocked"])),{},{mandatoryInputsTitle:function(){return this.addAttachmentRequiredDialog&&this.addTaskRemarksDialog?"Attach Photo and Add Remarks":this.addAttachmentRequiredDialog?"Attach Photo":this.addTaskRemarksDialog?"Add Remarks":""},isWorkOrderFeatureSettingsLicenseEnabled:function(){var $helpers=this.$helpers,_ref3=$helpers||{},isLicenseEnabled=_ref3.isLicenseEnabled;return isLicenseEnabled("WORK_ORDER_FEATURE_SETTINGS")},isWorkPermitLicenseEnabled:function(){var $helpers=this.$helpers,_ref4=$helpers||{},isLicenseEnabled=_ref4.isLicenseEnabled;return isLicenseEnabled("WORK_PERMIT")},readingPickerOptions:function(){if(!this.workorder.pm||!this.nextExecutionTime||this.nextExecutionTime<=0)return{disabledDate:function(time){return!1}};var startTime=this.$helpers.getOrgMoment(this.workorder.createdTime).valueOf(),endTime=this.$helpers.getOrgMoment(this.nextExecutionTime).valueOf();return{disabledDate:function(time){var res=!(time.getTime()>=startTime&&time.getTime()<endTime||time.getTime()+864e5>=startTime&&time.getTime()<endTime);return res}}},tickettype:function(){return this.getTicketTypePickList()},isPrerequisiteCompleted:function(){return!this.workorder.prerequisiteEnabled||!this.workorder.allowNegativePreRequisite||-1===this.workorder.allowNegativePreRequisite||!this.workorder.preRequestStatus||-1===this.workorder.preRequestStatus||this.workorder.preRequestStatus&&2===this.workorder.allowNegativePreRequisite&&(2===this.workorder.preRequestStatus||3===this.workorder.preRequestStatus)||3===this.workorder.allowNegativePreRequisite&&3===this.workorder.preRequestStatus},enablePrerequisiteApprove:function(){return this.workorder.prerequisiteEnabled&&this.workorder.allowNegativePreRequisite&&3===this.workorder.allowNegativePreRequisite&&this.workorder.prerequisiteApprover&&!this.workorder.preRequisiteApproved&&2===this.workorder.preRequestStatus},isTenantEnabled:function(){return this.$helpers.isLicenseEnabled("TENANTS")},isReadingFieldValidationEnabled:function(){return this.$helpers.isLicenseEnabled("READING_FIELD_UNITS_VALIDATION")},canEdit:function(){var hasState=this.$getProperty(this.workorder,"moduleState.id",null),moduleStateId=this.$getProperty(this.workorder,"moduleState.id",-1),isLocked=this.isStatusLocked(moduleStateId,"workorder"),isRequestedState=this.isRequestedState;return hasState&&!isLocked&&!isRequestedState},openWorkorderId:function(){var id=this.$attrs.id||this.$route.params.id;return id?parseInt(id):-1},allTaskStatus:function(){var status=null,closedCount=0,taskCount=0;for(var idx in this.taskList)for(var idx2 in this.taskList[idx]){taskCount+=1;var isOpen="OPEN"===this.taskList[idx][idx2].status.type,hasInputValue=this.taskList[idx][idx2].inputValue;isOpen&&1!==this.taskList[idx][idx2].inputType&&!hasInputValue?(null===status&&(status=!1),status=status&&!1):(null===status&&(status=!0),status=status&&!0,isOpen||(closedCount+=1))}return closedCount===taskCount&&(status=!1),status;// status will be false -> when (taskCount == closedCount) OR if there's any Open task with no input
},openStatusId:function(){var id=this.$store.getters.getTicketStatusByLabel("Submitted","workorder").id;return id?parseInt(id):id},closedStatusId:function(){var id=this.$store.getters.getTicketStatusByLabel("Closed","workorder").id;return id?parseInt(id):id},resolvedStatusId:function(){var id=this.$store.getters.getTicketStatusByLabel("Resolved","workorder").id;return id?parseInt(id):id},workorder:function(){var details=this.$attrs.details,_ref5=details||{},_ref5$workorder=_ref5.workorder,workorder=void 0===_ref5$workorder?{}:_ref5$workorder;return(0,validation/* isEmpty */.xb)(workorder)?(0,validation/* isEmpty */.xb)(details)?this.$store.state.workorder.currentWorkOrder:details:workorder},workorderSourceTypeNotPlanned:function(){var workorder=this.workorder,_ref6=workorder||{},sourceType=_ref6.sourceType;return!(0,validation/* isEmpty */.xb)(sourceType)&&5!==sourceType},emptyStateMsg:function(){var workorderSourceTypeNotPlanned=this.workorderSourceTypeNotPlanned;return workorderSourceTypeNotPlanned?
// ? this.$t('maintenance._workorder.task_body_text')
"":this.$t("maintenance._workorder.no_task_body_text")},ticketStatusValue:function(){return this.workorder&&this.workorder.status&&this.workorder.status.id&&this.$store.getters.getTicketStatus(this.workorder.status.id,"workorder")||""},inventory:function(){return this.$store.state.inventory.inventory},stockedTools:function(){return this.$store.state.stockedtool.stockedTools},taskResources:function(){var obj={};if(this.taskList)for(var idx in this.taskList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.taskList[idx]);try{for(_iterator.s();!(_step=_iterator.n()).done;){var task=_step.value;task.resource&&task.resource.id>0&&(obj[task.resource.id]=task.resource)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return Object.values(obj)},filter:function(){var filter={},workorder=this.workorder;return workorder&&workorder.siteId&&workorder.siteId>0&&(filter.site=Number(workorder.siteId)),filter},allowEdit:function(){return!1},isApprovalEnabled:function(){var _this$workorder=this.workorder,workorder=void 0===_this$workorder?{}:_this$workorder,_ref7=workorder||{},approvalFlowId=_ref7.approvalFlowId,approvalStatus=_ref7.approvalStatus;return!(0,validation/* isEmpty */.xb)(approvalFlowId)&&!(0,validation/* isEmpty */.xb)(approvalStatus)},isRequestedState:function(){var workorder=this.workorder,_ref8=workorder||{},approvalStatus=_ref8.approvalStatus;if((0,validation/* isEmpty */.xb)(approvalStatus))return!1;var statusObj=this.getApprovalStatus(approvalStatus.id);return this.$getProperty(statusObj,"requestedState",!1)},canDisable:function(){return this.isApprovalEnabled&&!this.isRequestedState},currentView:function(){var viewName=this.$attrs.viewname||this.$route.params.viewname||"all";return viewName},isDisabled:function(){return!this.consumptionData},canShowReportDownTime:function(){var workorder=this.workorder,isNotPortal=this.isNotPortal,_ref9=workorder||{},resource=_ref9.resource,_ref10=resource||{},resourceType=_ref10.resourceType,id=_ref10.id;return isNotPortal&&2===resourceType&&-1!==id},selectedResourceName:function(){return JSON.parse(JSON.stringify(this.selectedTask))},setDateToString:function(){return String(new Date(this.workorder.createdTime))},isLockedState:function(){var workorder=this.workorder,_ref11=workorder||{},moduleState=_ref11.moduleState;return this.$getProperty(moduleState,"recordLocked",!1)},taskActionPermission:function(){var _ref12=(0,router/* getApp */.wx)()||{},linkName=_ref12.linkName;return"client"!==linkName},hasAddTaskPermission:function(){return this.$hasPermission("workorder:ADD_UPDATE_DELETE_TASK")||this.$hasPermission("workorder:UPDATE_TASK")},hasExecuteTaskPermission:function(){
// hasUpdateTaskPermission changed to hasExecuteTaskPermission
var _ref13=(0,router/* getApp */.wx)()||{},linkName=_ref13.linkName;return"newapp"===linkName||this.$hasPermission("workorder:UPDATE_WORKORDER_TASK")},
//TODO: WORK_ORDER_FEATURE_SETTINGS license check
canExecuteTask:function(){
// -- can be removed later --
var isWorkOrderFeatureSettingsLicenseEnabled=this.isWorkOrderFeatureSettingsLicenseEnabled;if(!isWorkOrderFeatureSettingsLicenseEnabled){var hasExecuteTaskPermission=this.hasExecuteTaskPermission;return hasExecuteTaskPermission}
// -- can be removed later --
var workOrderSettings=this.workOrderSettings,_ref14=workOrderSettings||{},executeTask=_ref14.executeTask,_ref15=executeTask||{},_ref15$allowed=_ref15.allowed,allowed=void 0!==_ref15$allowed&&_ref15$allowed;return allowed},
//TODO: WORK_ORDER_FEATURE_SETTINGS license check
canAddTask:function(){
// -- can be removed later --
var isWorkOrderFeatureSettingsLicenseEnabled=this.isWorkOrderFeatureSettingsLicenseEnabled;if(!isWorkOrderFeatureSettingsLicenseEnabled)return!0;
// -- can be removed later --
var workOrderSettings=this.workOrderSettings,_ref16=workOrderSettings||{},manageTask=_ref16.manageTask,_ref17=manageTask||{},_ref17$allowed=_ref17.allowed,allowed=void 0!==_ref17$allowed&&_ref17$allowed;return allowed},isUpdateTaskAllowed:function(){var hasExecuteTaskPermission=this.hasExecuteTaskPermission;return hasExecuteTaskPermission?"":"pointer-events-none"},isUpdateAllowed:function(){var hasExecuteTaskPermission=this.hasExecuteTaskPermission;return hasExecuteTaskPermission?"":"cursor-not-allowed"},addTaskCheckBasedOnWorkOrderFeatureSetting:function(){var hasAddTaskPermission=this.hasAddTaskPermission,canAddTask=this.canAddTask,isWorkOrderFeatureSettingsLicenseEnabled=this.isWorkOrderFeatureSettingsLicenseEnabled,addTaskCheck=!1;
// TODO: after this license is removed entirely keep this part
return addTaskCheck=isWorkOrderFeatureSettingsLicenseEnabled?canAddTask:hasAddTaskPermission,addTaskCheck},showAddNewTask:function(){var workorder=this.workorder,canEdit=this.canEdit,taskList=this.taskList,resolvedStatusId=this.resolvedStatusId,isUserAddingTask=this.isUserAddingTask,addTaskCheckBasedOnWorkOrderFeatureSetting=this.addTaskCheckBasedOnWorkOrderFeatureSetting,_ref18=workorder||{},sourceType=_ref18.sourceType,moduleState=_ref18.moduleState,_ref19=moduleState||{},id=_ref19.id;
// can add the workorder planning setting check here (and) and move if to :disabled check
return!(0,validation/* isEmpty */.xb)(sourceType)&&!(0,validation/* isEmpty */.xb)(taskList)&&5!==sourceType&&canEdit&&id!==resolvedStatusId&&!isUserAddingTask&&addTaskCheckBasedOnWorkOrderFeatureSetting},isTaskListEmpty:function(){var taskList=this.taskList;return(0,validation/* isEmpty */.xb)(taskList)},canShowAddTaskButton:function(){var workorderSourceTypeNotPlanned=this.workorderSourceTypeNotPlanned,addTaskCheckBasedOnWorkOrderFeatureSetting=this.addTaskCheckBasedOnWorkOrderFeatureSetting;
// can add the workorder planning setting check here (and) and move if to :disabled check
return workorderSourceTypeNotPlanned&&addTaskCheckBasedOnWorkOrderFeatureSetting},workOrderSettings:function(){var details=this.$attrs.details,_ref20=details||{},_ref20$workOrderSetti=_ref20.workOrderSettings,workOrderSettings=void 0===_ref20$workOrderSetti?{}:_ref20$workOrderSetti;return workOrderSettings},addTaskButtonMessage:function(){var showAddNewTask=this.showAddNewTask;if(showAddNewTask)return"Add Task";
// -- can be removed later --
var isWorkOrderFeatureSettingsLicenseEnabled=this.isWorkOrderFeatureSettingsLicenseEnabled;if(!isWorkOrderFeatureSettingsLicenseEnabled)return"You cannot add new Task!";
// -- can be removed later --
var workOrderSettings=this.workOrderSettings,_ref21=workOrderSettings||{},manageTask=_ref21.manageTask,_ref22=manageTask||{},reason=_ref22.reason;return(0,validation/* isEmpty */.xb)(reason)?"":reason}}),methods:{convertTimeAsIfFromDatePicker:function(dateInMillis){var currentBrowserTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone;return moment_timezone_default().tz(this.$helpers.getOrgMoment(dateInMillis).format("YYYY-MM-DD HH:mm:ss"),currentBrowserTimeZone)},getDescription:function(record){var description=record.description;return(0,validation/* isEmpty */.xb)(description)?"---":(0,sanitize/* sanitize */.N)(description)},onTransitionSuccess:function(){this.workorder.loadTimer=!1,this.refreshWoDetails(),this.reloadRelatedRecords(),this.onStateFlowFormSaved(),this.loadTasks(),this.reloadInventorySummary()},reloadRelatedRecords:function(){eventBus/* eventBus */.Y.$emit("refresh-related-list")},reloadInventorySummary:function(){eventBus/* eventBus */.Y.$emit("refresh-inventory-summary")},deleteNote:function(note){var _this4=this,obj={noteId:note.id,module:"ticketnotes",parentModuleName:"workorder",note:note};this.$dialog.confirm({title:this.$t("common.header.delete_note"),message:this.$t("common.header.are_you_sure_you_want_to_delete_this_note_form_workorder"),rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&_this4.$http.post("/v2/notes/delete",obj).then((function(_ref23){var _ref23$data=_ref23.data,message=_ref23$data.message,responseCode=_ref23$data.responseCode;_ref23$data.result;if(0!==responseCode)throw new Error(message);_this4.$message.success(_this4.$t("common.products.note_deleted_successfully"));var doNote=_this4.comments.find((function(r){return r.id===note.id}));doNote&&_this4.comments.splice(_this4.comments.indexOf(doNote),1)}))}))},handlePhotoUpload:function(attachment){this.selectedTask.attachment||(this.selectedTask.attachment={}),this.selectedTask.attachment.module=attachment.module,this.selectedTask.attachment.recordId=attachment.recordId,1===attachment.attachmentType?(this.selectedTask.attachment.beforeFile=attachment.file,this.selectedTask.attachment.beforeFileName=attachment.fileName):(this.selectedTask.attachment.afterFile=attachment.file,this.selectedTask.attachment.afterFileName=attachment.fileName)},openParentWo:function(parentWo){var _ref24=parentWo||{},id=_ref24.id;if(id)if((0,router/* isWebTabsEnabled */.tj)()){var currentView=this.currentView,_ref25=(0,router/* findRouteForModule */.Jp)("workorder",router/* pageTypes */.As.OVERVIEW)||{},name=_ref25.name;name&&this.$router.push({name:name,params:{viewname:currentView,id:id}})}else this.$router.push({path:"/app/wo/orders/summary/"+id})},openPrintOptionDialog:function(){this.openTaskOptions=!0},init:function(){var _this5=this,isWorkPermitLicenseEnabled=this.isWorkPermitLicenseEnabled;this.woWidget.relatedList.module=(this.moduleMeta||{}).module,isWorkPermitLicenseEnabled&&this.$http.get("module/meta?moduleName=workPermit").then((function(response){200===response.status&&(_this5.$setProperty(_this5,"permitWidget.relatedList.module",_this5.$getProperty(response,"data.meta.module",null)),_this5.showPermitListWidget=!0)})),this.loadSafetyPlanWidgets(),this.invokeRelatedListWidget=!0,this.loading=!1},loadSafetyPlanWidgets:function(){var _this6=this;this.$helpers.isLicenseEnabled("SAFETY_PLAN")&&this.$http.get("module/meta?moduleName=workorderHazard").then((function(response){200===response.status&&(_this6.$setProperty(_this6,"hazardWidget.relatedList.module",_this6.$getProperty(response,"data.meta.module",null)),_this6.$setProperty(_this6,"hazardWidget.relatedList.module.displayName","Hazards"),_this6.showHazardListWidget=!0)}))},updateReading:function(selectedTask){if(selectedTask.inputTime&&this.nextExecutionTime&&this.nextExecutionTime>0){var startTime=this.workorder.createdTime,endTime=this.nextExecutionTime;if(!(selectedTask.inputTime.valueOf()>=startTime&&selectedTask.inputTime.valueOf()<endTime)){var s=this.$helpers.getOrgMoment(startTime).format("D MMM, h:mm a"),e=this.$helpers.getOrgMoment(endTime).format("D MMM, h:mm a");return void this.$message.error(this.$t("maintenance._workorder.task_input_time_invalid",[s,e]))}}this.onReadingChange(selectedTask)},checkForHoursAndMins:function(task){var _this7=this;this.$nextTick((function(){if(_this7.$refs["fTaskMin"+task.id]&&_this7.$refs["fTaskMin"+task.id][0]&&document.activeElement===_this7.$refs["fTaskMin"+task.id][0].$el.querySelector(".el-input input.el-input__inner"));else{if(task&&(task.hours||task.minutes)){var seconds=moment_timezone_default().duration("".concat(task.hours?task.hours:"00",":").concat(task.minutes?task.minutes:"00",":00")).asSeconds();task.inputValue=seconds;var _ref26=task||{},readingField=_ref26.readingField,_ref27=readingField||{},metric=_ref27.metric;(0,validation/* isEmpty */.xb)(metric)||metric==METRIC_HASH["DURATION"]&&(task.readingFieldUnit=20)}_this7.onReadingChange(task)}}))},onUpload:function(_ref28){var file=_ref28.file,data=(_ref28.onSuccess,_ref28.onError,{parentId:this.openWorkorderId,module:"prerequisitephotos"}),formData=new FormData;for(var key in formData.append("file",file,file.name),data)this.$helpers.setFormData(key,data[key],formData);return this.$http.post("v2/photos/upload",formData)},onUploadSuccess:function(response){var _response$data=response.data,responseCode=_response$data.responseCode,result=_response$data.result;0===responseCode&&(this.photos.push(result.photos[0]),this.getPrerequisiteStatus(),this.loadactivitie())},onPhotoDelete:function(file){this.deletePhoto(file)},focusCommentBoxtextarea:function(){this.$refs.commentBoxRef.focus(),this.commentFocus=!0},callOnReadingChangeWithoutValidation:function(currentTaskObj){(0,validation/* isEmpty */.xb)(currentTaskObj)||(this.onReadingChange(currentTaskObj,!1),this.resetReadingFieldUnitDialogBox())},beforeCloseDialogBox:function(done){this.resetReadingFieldUnitDialogBox(),done()},closeReadingFieldSuggestionDialogBox:function(){this.readingFieldSuggestionToggle=!1,this.readingFieldSuggestions=[],this.currentTaskObj=null},closeReadingFieldErrorDialogBox:function(){this.resetReadingFieldUnitDialogBox(),this.readingData=6,// meterReset state is now false .
this.consumptionData=""},resetReadingFieldUnitDialogBox:function(){this.readingFieldErrorToggle=!1,this.readingFieldError=null,this.readingFieldSuggestionToggle=!1,this.readingFieldSuggestions=[],this.currentTaskObj=null},deletePhoto:function(value){var _this8=this;value&&this.$http.post("v2/photos/delete?module=prerequisitephotos",{id:value.id,parentId:value.parentId,photoId:value.photoId}).then((function(response){if(response.data&&response.data.result&&response.data.result.Id){var pht=_this8.photos.find((function(r){return r.id===response.data.result.Id}));pht&&_this8.photos.splice(_this8.photos.indexOf(pht),1),_this8.getPrerequisiteStatus(),_this8.loadactivitie(),_this8.$message.success(_this8.$t("common._common.delete_success"))}else _this8.$message.error(_this8.$t("common._common.deletion_operation_failed"))}))},getPrerequisiteStatus:function(){var self=this;self.$http.get("v2/workorders/getPrerequisiteStatus?workOrderId="+self.openWorkorderId).then((function(response){self.workorder.preRequestStatus=response.data.result.preRequestStatus}))},openTenant:function(id){if(id)if((0,router/* isWebTabsEnabled */.tj)()){var _ref29=(0,router/* findRouteForModule */.Jp)("tenant",router/* pageTypes */.As.OVERVIEW)||{},name=_ref29.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else{var url="/app/tm/tenants/all/"+id+"/overview";this.$router.replace({path:url})}},updateWoActions:function(){this.loadactivitie()},refreshWoDetails:function(){this.fetchWo(!0).then((function(){}))},onStateFlowFormSaved:function(){this.updateWoActions(),this.loadComments()},associate:function(selectedObj){this.visibility=!1,this.selectedTask.resource=selectedObj},preRequisiteApprove:function(){this.updateWorkOrder([this.openWorkorderId],{preRequisiteApproved:!0,preRequestStatus:3})},blurCommentBox:function(e){var _ref30=e||{},path=_ref30.path,itTargetPar=(path||[]).filter((function(ele){return"commentBoxPar"===ele.id}));this.newComment.body&&""!==this.newComment.body.trim()||(0,validation/* isEmpty */.xb)(this.comments)||itTargetPar.length||(this.commentFocus=!1)},loadReadingFieldUnits:function(){var _this9=this;this.$http.get("v2/getReadingFieldUnits").then((function(response){response.data&&0===response.data.responseCode&&(_this9.metricWithUnits=response.data.result.readingFieldUnits.MetricsWithUnits)}))},getReadingFieldUnits:function(readingFieldMetricId){if(!(0,validation/* isEmpty */.xb)(this.metricWithUnits)){var currentMetricId=Object.keys(this.metricWithUnits).find((function(metricUnitKey){return metricUnitKey==readingFieldMetricId})),readingFieldUnits=this.metricWithUnits[currentMetricId];return readingFieldUnits}},redirectToSpecialModule:function(field,data){if(!(0,validation/* isEmpty */.xb)(field)&&!(0,validation/* isEmpty */.xb)(data)){var fieldName=field.name,_field$lookupModule=field.lookupModule,lookupModule=void 0===_field$lookupModule?{}:_field$lookupModule;if(!(0,validation/* isEmpty */.xb)(lookupModule)){var name=lookupModule.name;if((0,router/* isWebTabsEnabled */.tj)()){var _ref31=(0,router/* findRouteForModule */.Jp)(name,router/* pageTypes */.As.OVERVIEW)||{},routeName=_ref31.name;if(routeName){var _ref32="vendors"===name?data[name]:data[fieldName],id=_ref32.id;this.$router.push({routeName:routeName,params:{viewname:"all",id:id}})}}else{var urlHash={vendors:{name:"vendorsummary",params:{viewname:"all",vendorid:data["vendors"].id}},custom:{name:"custommodules-summary",params:{viewName:"all",id:data[fieldName].id,moduleName:name}}},routerParams={};"vendors"===name?routerParams=urlHash["vendors"]:"CUSTOM"===lookupModule.typeEnum&&(routerParams=urlHash["custom"]),(0,validation/* isEmpty */.xb)(routerParams)||this.$router.push(routerParams)}}}},loadVendorsPicklist:function(){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"vendors"}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this10.$message.error(error.message||"Error Occured"):_this10.vendorsList=options;case 6:case"end":return _context.stop()}}),_callee)})))()},updateUrl:function(transition){if(!(0,validation/* isEmpty */.xb)(transition)){var stateObj=this.$store.getters.getTicketStatus(transition.toStateId,"workorder");return"CLOSED"===this.$getProperty(stateObj,"type")?"/v2/workorders/close":"/v2/workorders/update"}},transitionFilter:function(transition){var stateObj=this.$store.getters.getTicketStatus(transition.toStateId,"workorder"),isDisallowedState="CLOSED"===stateObj.type&&!hasWorkOrderClosePermission;return!isDisallowedState},getSelectedTaskReadingFieldProperty:function(property){return this.$getProperty(this.selectedTask,"readingField.".concat(property),"")},fieldOptions:function(task){var _ref33=task||{},readingField=_ref33.readingField,options=[];if(!(0,validation/* isEmpty */.xb)(readingField)){var enumMap=readingField.enumMap;options=Object.entries(enumMap||{}).map((function(_ref34){var _ref35=(0,slicedToArray/* default */.Z)(_ref34,2),key=_ref35[0],value=_ref35[1];return{id:key,value:value}}))}return options},isReadingEnum:function(task){var _ref36=task||{},readingField=_ref36.readingField;return readingField&&(0,field/* isEnumField */.Ri)(readingField)},canDisableField:function(field){var type=this.$getProperty(field,"status.type",""),isPrerequisiteCompleted=this.isPrerequisiteCompleted,canExecuteTask=this.canExecuteTask;return!canExecuteTask||!isPrerequisiteCompleted||"OPEN"!==type},canDisableCloseTask:function(allTaskStatus){var isPrerequisiteCompleted=this.isPrerequisiteCompleted,canExecuteTask=this.canExecuteTask;return!canExecuteTask||!isPrerequisiteCompleted||!allTaskStatus},isTaskClosed:function(task){var type=this.$getProperty(task,"status.type","");return"OPEN"!==type},canDisableAttachment:function(task){var isLockedState=this.isLockedState,isPrerequisiteCompleted=this.isPrerequisiteCompleted,moduleMeta=this.moduleMeta,canExecuteTask=this.canExecuteTask,type=this.$getProperty(task,"status.type",""),hideGallery=this.$getProperty(moduleMeta,"moduleSetting.hideGallery",!1);return"OPEN"!==type||!isPrerequisiteCompleted||isLockedState||hideGallery||!canExecuteTask},getButtonName:function(task){return this.isTaskClosed(task)?this.$t("maintenance._workorder.reopen_task"):this.$t("maintenance._workorder.complete_task")}},watch:{workorder:function(){var title="[#"+this.workorder.serialNumber+"] "+this.workorder.subject;this.setTitle(title),this.workorder.priority&&(this.workorder.priority=this.getTicketPriority(this.workorder.priority.id)),this.workorder.data||(this.workorder.data={}),this.setDueDate(this.workorder.dueDate),this.updateTaskChartData()},openWorkorderId:function(){this.fetchWo(!0)},filteredComments:function(list){(0,validation/* isEmpty */.xb)(list)&&(this.commentFocus=!0)},moduleMeta:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.init()},isActive:function(_isActive){!_isActive&&this.canShowAllComments&&this.showAllComments()},selectedResourceName:function(newVal,oldVal){var _ref37=this.selectedTask||-1,id=_ref37.id;if(-1===id&&newVal&&oldVal&&newVal.resource&&oldVal.resource){var newName=this.$getProperty(newVal,"resource.name"),oldName=this.$getProperty(oldVal,"resource.name");newName&&oldName&&newName!=oldName&&(this.selectedTask.readingFieldId="",this.selectedTask.inputType=1,this.selectedTask.enableInput=!1,this.selectedTask.options=[])}}},beforeDestroy:function(){this.$store.dispatch("workorder/removeCurrentWo")},filters:{getUser:function(id,users){var userObj=users.find((function(user){return user.id===id}));return userObj||{name:"System"}},options:function(jsonobj,type){var array=[];if("category"===type||"priority"===type)for(var jsonkey in jsonobj){var val=jsonobj[jsonkey];array.push({label:val,value:parseInt(jsonkey)})}else if("user"===type||"space"===type)for(var key in jsonobj)array.push({label:jsonobj[key].name,value:jsonobj[key].id});return array}}},widgets_TasksMonolithvue_type_script_lang_js=TasksMonolithvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(widgets_TasksMonolithvue_type_script_lang_js,render,staticRenderFns,!1,null,"5cec4191",null)
/* harmony default export */,TasksMonolith=component.exports},
/***/97573:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"870bb338eafdd8d0c5141aa88b89c7fa.svg";
/***/},
/***/345265:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"35079cf978684c9b6a17e182df923ff5.svg";
/***/},
/***/293656:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"e179f34e6169d9164845bf6c1d403c8e.svg";
/***/},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/},
/***/684890:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"c5bbcb00b28261c206e2f2de4a9fe124.svg";
/***/},
/***/30684:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"52c2ff301190417db7febd08d4cd5153.svg";
/***/},
/***/572902:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"db5324b7cf9058a0aa45899e55bf6444.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/53670.js.map