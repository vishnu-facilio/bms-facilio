"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[72519,62083,8725,59297],{
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/576583:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAddDataPoint}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/components/FAddDataPoint.vue?vue&type=template&id=d1ff10a8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"text-left"},["reading"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Type")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",disabled:_vm.canDisableTypePicker},model:{value:_vm.compareObject.type,callback:function($$v){_vm.$set(_vm.compareObject,"type",$$v)},expression:"compareObject.type"}},[_c("el-option",{attrs:{label:"Space",value:"space"}}),_c("el-option",{attrs:{label:"Asset",value:"asset"}})],1)],1),"space"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt pT10"},[_vm._v("Space")]),_vm.multipleParent?_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{multiple:"",filterable:""},on:{change:_vm.loadReadingsOnly},model:{value:_vm.compareObject.parentIds,callback:function($$v){_vm.$set(_vm.compareObject,"parentIds",$$v)},expression:"compareObject.parentIds"}},_vm._l(_vm.spaceList,(function(space,index){return _c("el-option",{key:index,attrs:{label:space.name+" ("+space.spaceTypeVal+")",value:parseInt(space.id)}})})),1):_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectSpace},model:{value:_vm.compareObject.spaceId,callback:function($$v){_vm.$set(_vm.compareObject,"spaceId",$$v)},expression:"compareObject.spaceId"}},_vm._l(_vm.spaceList,(function(space,index){return _c("el-option",{key:index,attrs:{label:space.name+" ("+space.spaceTypeVal+")",value:parseInt(space.id)}})})),1)],1):_vm._e(),"asset"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Asset")]),_vm.multipleParent?_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",multiple:""},on:{change:_vm.loadReadingsOnly},model:{value:_vm.compareObject.parentIds,callback:function($$v){_vm.$set(_vm.compareObject,"parentIds",$$v)},expression:"compareObject.parentIds"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1):_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectAsset},model:{value:_vm.compareObject.assetId,callback:function($$v){_vm.$set(_vm.compareObject,"assetId",$$v)},expression:"compareObject.assetId"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1):_vm._e(),_vm.newReading?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt pT10"},[_vm._v("Reading")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.setReading},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.field.displayName,value:field.field.id}})})),1)],1):_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Reading")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.id}})})),1)],1),!_vm.compareObject.readingFieldId||"undefined"!==typeof _vm.aggregate&&0===_vm.aggregate?_vm._e():_c("div",{staticClass:"p5b hide",class:{hide:!_vm.source}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Aggregate")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-dropDown",attrs:{filterable:"",placeholder:"Choose Function",title:"Choose Function"},model:{value:_vm.compareObject.aggregateFunc,callback:function($$v){_vm.$set(_vm.compareObject,"aggregateFunc",$$v)},expression:"compareObject.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return func.value>0&&("lastValue"!==func.name||_vm.showLastValue)?_c("el-option",{key:funcidx,attrs:{label:func.label,value:func.value}}):_vm._e()})),1)],1)]):_vm._e(),"meter"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Building")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectBuilding},model:{value:_vm.compareObject.buildingId,callback:function($$v){_vm.$set(_vm.compareObject,"buildingId",$$v)},expression:"compareObject.buildingId"}},_vm._l(_vm.$store.getters.getBuildingsPickList(),(function(building,key){return _c("el-option",{key:key,attrs:{label:building,value:key}})})),1)],1),_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Meter")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectAsset},model:{value:_vm.compareObject.assetId,callback:function($$v){_vm.$set(_vm.compareObject,"assetId",$$v)},expression:"compareObject.assetId"}},_vm._l(_vm.subMeters,(function(meter,index){return _c("el-option",{key:index,attrs:{label:meter.name,value:meter.id}})})),1)],1),!_vm.compareObject.readingFieldId||"undefined"!==typeof _vm.aggregate&&0===_vm.aggregate?_vm._e():_c("div",{staticClass:"p5 hide",class:{hide:!_vm.source}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Aggregate")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",placeholder:"Choose Function",title:"Choose Function"},model:{value:_vm.compareObject.aggregateFunc,callback:function($$v){_vm.$set(_vm.compareObject,"aggregateFunc",$$v)},expression:"compareObject.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return func.value>0&&("lastValue"!==func.name||_vm.showLastValue)?_c("el-option",{key:funcidx,attrs:{label:func.label,value:parseInt(func.value)}}):_vm._e()})),1)],1)]):_vm._e(),"enpi"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Building")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectBuilding},model:{value:_vm.compareObject.buildingId,callback:function($$v){_vm.$set(_vm.compareObject,"buildingId",$$v)},expression:"compareObject.buildingId"}},_vm._l(_vm.buildingList,(function(building,key){return _c("el-option",{key:key,attrs:{label:building,value:key}})})),1)],1),_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("EnPI")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.readingFields,value:field.id}})})),1)],1)]):_vm._e(),_c("div",{staticClass:"row mT30"},[_c("div",{staticClass:"modal-btn-cancel col-6 fc-el-btn",on:{click:_vm.cancel}},[_vm._v("cancel")]),_c("div",{staticClass:"modal-btn-save fc-el-btn col-6",on:{click:_vm.save}},[_vm._v("Ok")])])])},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(670560),__webpack_require__(420629)),validation=__webpack_require__(990260),FAddDataPointvue_type_script_lang_js={props:["type","aggregate","reading","showLastValue","source","newReading","editdata","multipleParent","readingType"],data:function(){return{compareObject:{type:"space",buildingId:"",spaceId:"",parentIds:[],assetId:"",readingFieldId:"",aggregateFunc:3,hasBaseline:!1,baseLineId:""},canDisableTypePicker:!1,baselineList:[],assetList:[],spaceList:[],subMeters:[],readingFields:[],aggregateFunctions:[{label:"Actual",value:0,name:"actual"},{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"},{label:"Current Value",value:6,name:"lastValue"}]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getBuildingsPickList"])),{},{buildingList:function(){return this.getBuildingsPickList()},dataPointType:function(){return this.type?this.type:"reading"},"compareObject.assetId":function(){return parseInt(this.compareObject.assetId)}}),created:function(){var _this=this;this.$store.dispatch("loadEnergyMeters"),this.$store.dispatch("loadBuildings").then((function(){_this.init()}))},mounted:function(){},methods:{init:function(){this.loadSpaces(),this.loadAssets(),this.loadBaselines(),this.readingType&&(this.compareObject.type=this.readingType,this.canDisableTypePicker=!0)},reset:function(){this.compareObject=null,this.compareObject={type:"space",spaceId:"",assetId:"",readingFieldId:"",aggregateFunc:0,hasBaseline:!1,baseLineId:""}},open:function(options){this.reset(),options&&(this.compareObject=Object.assign(this.compareObject,this.compareObject,options),this.compareObject.type=this.compareObject.parentType,this.compareObject.buildingId?(this.compareObject.assetId=parseInt(this.compareObject.parentId),this.loadSubMeters()):"space"===this.compareObject.parentType?this.compareObject.parentId&&(this.compareObject.spaceId=parseInt(this.compareObject.parentId)):this.compareObject.parentId&&(this.compareObject.assetId=parseInt(this.compareObject.parentId)),this.compareObject.readingFieldId&&this.loadReadingFields()),0===this.aggregate?this.compareObject.aggregateFunc=this.aggregate:this.compareObject.yAggr?this.compareObject.aggregateFunc=this.compareObject.yAggr:this.compareObject.aggregateFunc=3},save:function(){var _this2=this;if(this.compareObject.readingFieldId){var reportName="";this.compareObject.spaceId&&(this.compareObject.space=this.spaceList.find((function(a){return a.id===_this2.compareObject.spaceId})),reportName=this.compareObject.space.name),this.compareObject.assetId&&(this.compareObject.asset=this.assetList.find((function(a){return a.id===_this2.compareObject.assetId})),reportName=this.compareObject.asset.name),this.compareObject.readingFieldId&&(this.newReading?(this.compareObject.readingField=this.readingFields.find((function(a){return a.field.id===_this2.compareObject.readingFieldId})).field,this.reading||(reportName+=" ("+this.compareObject.readingField.displayName+")")):(this.compareObject.readingField=this.readingFields.find((function(a){return a.id===_this2.compareObject.readingFieldId})),this.reading||(reportName+=" ("+this.compareObject.readingField.displayName+")"))),this.compareObject.name=reportName,this.compareObject.aggregateFunctions=this.aggregateFunctions,this.$emit("save",this.compareObject)}else this.$message.error("Please select the reading")},cancel:function(){this.$emit("cancel")},selectSpace:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},selectAsset:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},loadReadingsOnly:function(){this.loadReadingFieldsArray()},loadAssets:function(){var _this3=this;this.loading=!0;var self=this;this.$util.loadAsset({withReadings:!0}).then((function(response){response.assets&&(_this3.assetList=response.assets,self.editdata&&self.editdata.editmode&&(self.$store.getters.getBuildingsPickList()[self.editdata.parentId]?(self.compareObject.type="space",self.compareObject.spaceId=self.editdata.parentId):_this3.assetList.find((function(rt){return rt.id===self.editdata.parentId}))&&(self.compareObject.type="asset",self.compareObject.assetId=self.editdata.parentId,self.compareObject.readingFieldId=self.editdata.reading?self.editdata.reading.readingFieldId:self.editdata.readingFieldId)),_this3.compareObject.assetId&&_this3.loadReadingFields(),_this3.loading=!1)}))},getAsset:function(id){return this.assetList.find((function(obj){return obj.id===id}))},loadSpaces:function(){var self=this,url="/basespace";this.$http.get(url).then((function(response){response.data&&(self.spaceList=response.data.basespaces,self.compareObject.spaceId&&self.loadReadingFields())}))},getSpace:function(id){return this.spaceList.find((function(obj){return obj.id===id}))},loadBaselines:function(){var self=this;self.$http.get("/baseline/all").then((function(response){200===response.status&&(self.baselineList=response.data?response.data:[])}))},setReading:function(){},loadReadingFieldsArray:function(){var _this4=this,assetId=this.compareObject.parentIds.length?this.compareObject.parentIds[0]:null,spaceId=this.compareObject.parentIds.length?this.compareObject.parentIds[0]:null;"asset"===this.compareObject.type&&assetId?this.$util.loadAssetReadingFields(assetId).then((function(readingFields){if(_this4.readingFields=readingFields,!_this4.compareObject.readingFieldId){var defaultReadingName=_this4.reading?_this4.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=_this4.readingFields.find((function(r){return r.columnName===defaultReadingName}));_this4.compareObject.readingFieldId=energyDelta?energyDelta.id:_this4.readingFields[0].id}})):"space"===this.compareObject.type&&spaceId&&this.$util.loadSpaceReadingFields(spaceId).then((function(readingFields){_this4.readingFields="enpi"!==_this4.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.typeEnum._name})),!_this4.compareObject.readingFieldId&&_this4.readingFields.length&&(_this4.compareObject.readingFieldId=_this4.readingFields[0].id)}))},loadReadingFields:function(){var _this5=this,self=this;this.newReading?"asset"===this.compareObject.type&&this.compareObject.assetId?this.$util.loadLatestReading(this.compareObject.assetId).then((function(readingFields){self.readingFields=readingFields;var defaultReadingName=self.reading?self.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=self.readingFields.find((function(r){return r.field.columnName===defaultReadingName}))?self.readingFields.find((function(r){return r.field.columnName===defaultReadingName})).field:[];energyDelta.readingType=self.readingFields.find((function(r){return r.field.columnName===defaultReadingName}))?self.readingFields.find((function(r){return r.field.columnName===defaultReadingName})).readingType:-1,energyDelta?((0,validation/* isEmpty */.xb)(self.compareObject.readingFieldId)&&(self.compareObject.readingFieldId=energyDelta.id),self.compareObject.fullList=self.$helpers.cloneObject(readingFields)):(0,validation/* isEmpty */.xb)(self.compareObject.readingFieldId)&&(self.compareObject.readingFieldId=self.readingFields[0].field.id)})):"space"===self.compareObject.type&&self.compareObject.spaceId&&self.$util.loadLatestReading(self.compareObject.spaceId).then((function(readingFields){self.readingFields="enpi"!==self.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.field.dataTypeEnum})),
// if (self.editdata && self.editdata.editmode) {
//   self.save()
// }
!self.compareObject.readingFieldId&&self.readingFields.length&&(self.compareObject.readingFieldId=self.readingFields[0].field.id)})):"asset"===this.compareObject.type&&this.compareObject.assetId?this.$util.loadAssetReadingFields(this.compareObject.assetId).then((function(readingFields){if(_this5.readingFields=readingFields,!_this5.compareObject.readingFieldId){var defaultReadingName=_this5.reading?_this5.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=_this5.readingFields.find((function(r){return r.columnName===defaultReadingName}));_this5.compareObject.readingFieldId=energyDelta?energyDelta.id:_this5.readingFields[0].id}})):"space"===this.compareObject.type&&this.compareObject.spaceId&&this.$util.loadSpaceReadingFields(this.compareObject.spaceId).then((function(readingFields){_this5.readingFields="enpi"!==_this5.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.typeEnum._name})),!_this5.compareObject.readingFieldId&&_this5.readingFields.length&&(_this5.compareObject.readingFieldId=_this5.readingFields[0].id)}))},selectBuilding:function(){"meter"===this.type?(this.compareObject.type="asset",this.loadSubMeters()):"enpi"===this.type&&(this.compareObject.type="space",this.compareObject.spaceId=parseInt(this.compareObject.buildingId),this.loadReadingFields())},loadSubMeters:function(){var self=this,url="/dashboard/getSubMeters?buildingId="+this.compareObject.buildingId;self.$http.get(url).then((function(response){var energyAssets=response.data.energyMeters,subMeterList=[];if(energyAssets&&self.assetList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(energyAssets);try{var _loop=function(){var ea=_step.value,asset=self.assetList.find((function(aa){return aa.id===ea.id}));asset&&subMeterList.push(ea)};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}else subMeterList=energyAssets;self.subMeters=subMeterList,self.compareObject.assetId&&self.loadReadingFields()}))}}},components_FAddDataPointvue_type_script_lang_js=FAddDataPointvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAddDataPointvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAddDataPoint=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/72519.js.map