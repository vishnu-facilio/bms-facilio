"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[76146],{
/***/574655:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return BulkUpdateViewer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/BulkUpdateViewer.vue?vue&type=template&id=147d3385
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("f-dialog",{attrs:{"append-to-body":!0,visible:_vm.fieldUpdateValue,width:"45%",maxHeight:"300px",title:"Bulk Update",confirmTitle:"UPDATE"},on:{"update:visible":function($event){_vm.fieldUpdateValue=$event},save:function($event){return _vm.actionSave(_vm.fieldMatcher)},close:function($event){_vm.fieldUpdateValue=!1,_vm.actioncancel()}}},[_c("div",{staticClass:"height330 overflow-y-scroll pB50"},_vm._l(_vm.fieldMatcher,(function(element,index){return _c("div",{key:index},[_c("el-row",{staticClass:"visibility-visible-actions fc-row-hover pT10 pB10 pL10 pointer"},[_c("el-col",{attrs:{span:1}},[_c("div",{staticClass:"criteria-alphabet-block pT6"},[_c("div",{staticClass:"alphabet-circle"},[_vm._v(" "+_vm._s(index+1)+" ")])])]),_c("el-col",{staticClass:"mL10",attrs:{span:9}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:""},on:{change:function($event){return _vm.statusFieldName(element,index)}},model:{value:element.field,callback:function($$v){_vm.$set(element,"field",$$v)},expression:"element.field"}},_vm._l(_vm.updateFields,(function(field,index){return _c("el-option",{key:index,attrs:{disabled:!_vm.checkUpdate(field),label:field.displayName,value:field.name}})})),1)],1),_c("el-col",{attrs:{span:9}},[_c("div",[element.fieldObj?element.isSpacePicker?_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100 mL40",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){return _vm.checkinput(element)}},model:{value:_vm.selectedspace,callback:function($$v){_vm.selectedspace=$$v},expression:"selectedspace"}},[_vm.searchbool?_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0,_vm.assignindex(index)}},slot:"suffix"}):_vm._e()]),_c("space-asset-chooser",{attrs:{visibility:_vm.chooserVisibility},on:{associate:_vm.associate,"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1):element.isAssigned?_c("div",[_c("div",{staticClass:"fc-border-input-div2 width100 mL40"},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.confirmRequest)))]),_c("span",{staticStyle:{float:"right","padding-right":"12px"}},[_c("img",{staticClass:"svg-icon team-down-icon",attrs:{src:__webpack_require__(620955)}})])]),_c("f-assignment",{attrs:{model:_vm.confirmRequest,viewtype:"form"},on:{value:function($event){return _vm.updateConfirmRequest($event,index)}}})],1):_c("div",["NUMBER"===element.fieldObj[0].dataTypeEnum._name||"DECIMAL"===element.fieldObj[0].dataType?_c("el-input",{staticClass:"fc-input-full-border-select2 mL40 width140px",attrs:{type:"number"},on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}}):"BOOLEAN"===element.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 mL40 width140px",on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}},[_c("el-option",{attrs:{label:element.fieldObj[0].trueVal?element.fieldObj[0].trueVal:"Yes",value:"true"}}),_c("el-option",{attrs:{label:element.fieldObj[0].falseVal?element.fieldObj[0].falseVal:"No",value:"false"}})],1):"ENUM"===element.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mL40",attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}},_vm._l(_vm.picklistOptions[element.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):"DATE"===element.fieldObj[0].dataTypeEnum._name||"DATE_TIME"===element.fieldObj[0].dataTypeEnum._name?_c("el-row",{staticClass:"mL40"},[_c("el-date-picker",{staticClass:"fc-input-full-border-select2 width100 date-editor",staticStyle:{width:"290px"},attrs:{type:"datetime"},on:{change:function($event){_vm.changeDataType(element,index),_vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}})],1):"LOOKUP"!==element.fieldObj[0].dataTypeEnum._name||"LOOKUP_SIMPLE"!==element.fieldObj[0].displayType._name&&"LOOKUP_POPUP"!==element.fieldObj[0].displayType._name?_vm.isMultiLookUpField(element)?_c("FLookupField",{key:index+" "+element.fieldObj[0].id,staticClass:"width100 mL40 bulk-update-flookup",attrs:{"data-test-selector":""+element.fieldObj[0].name,model:element.valueArray,field:_vm.getMultiLookUpFieldObj(element.fieldObj[0]),canShowLookupWizard:_vm.showLookupFieldWizard},on:{recordSelected:function($event){_vm.changeDataType(element,index),_vm.checkinput(element)},"update:model":function($event){return _vm.$set(element,"valueArray",$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue}}):_c("el-input",{staticClass:"fc-input-full-border-select2 mL40 width100",on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}}):_c("FLookupField",{key:index+" "+element.fieldObj[0].id,staticClass:"width100 mL40 bulk-update-flookup",attrs:{"data-test-selector":""+element.fieldObj[0].name,model:element.valueArray,field:element.fieldObj[0],canShowLookupWizard:_vm.showLookupFieldWizard},on:{recordSelected:function($event){_vm.changeDataType(element,index),_vm.checkinput(element)},"update:model":function($event){return _vm.$set(element,"valueArray",$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue}})],1):_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 mL40 width100",on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}})],1)])]),_c("el-col",{attrs:{span:4}},[_c("div",{staticClass:"visibility-hide-actions pT15 pL55 pointer"},[_c("img",{staticClass:"pointer",attrs:{src:__webpack_require__(353654)},on:{click:function($event){return _vm.addRow(element)}}}),_vm.indexbool?_c("img",{staticClass:"pointer mL5",attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRow(element,index)}}}):_vm._e()])])],1)],1)})),0),_vm.showLookupFieldWizard?_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.showLookupFieldWizard,selectedLookupField:_vm.selectedLookupField,withReadings:!0},on:{"update:canShowLookupWizard":function($event){_vm.showLookupFieldWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.showLookupFieldWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}}):_vm._e()],1)],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(339772),__webpack_require__(420629)),picklist=__webpack_require__(961358),FAssignment=__webpack_require__(383274),SpaceAssetChooser=__webpack_require__(372587),FDialogNew=__webpack_require__(436756),validation=__webpack_require__(990260),FLookupField=__webpack_require__(855048),FLookupFieldWizard=__webpack_require__(499751),TeamStaffMixin=__webpack_require__(462599),BulkUpdateViewervue_type_script_lang_js={created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadGroups")},mixins:[TeamStaffMixin/* default */.Z],computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketcategory:function(state){return state.ticketCategory},assetCategory:function(state){return state.assetCategory},ticketpriority:function(state){return state.ticketPriority},moduleFields:function(state){return state.view.metaInfo.fields}})),data:function(){return{confirmRequest:{assignedTo:{id:null},assignmentGroup:{id:null}},showLookupFieldWizard:!1,indexcount:0,checkbool:!1,indexbool:!1,updateFields:[],fieldbool:!1,fielddeletelist:[],fieldupdatelist:[],fieldnewlist:[],searchbool:!0,selectedspace:null,referindex:-1,index:null,fieldContext:"",chooserVisibility:!1,picklistOptions:{},fieldUpdateValue:!0,spacePicker:!1,fieldMatcher:[],selectedLookupField:null}},components:{FAssignment:FAssignment/* default */.Z,FDialog:FDialogNew/* default */.Z,SpaceAssetChooser:SpaceAssetChooser/* default */.Z,FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"]},props:["module","fieldlist"],watch:{},mounted:function(){this.addRow(),this.update()},methods:{updateConfirmRequest:function(value,index){null!=value.assignedTo.id&&(this.confirmRequest.assignedTo.id=value.assignedTo.id,this.fieldMatcher[index].value=value.assignedTo.id),null!=value.assignmentGroup.id&&(this.confirmRequest.assignmentGroup.id=value.assignmentGroup.id,this.fieldMatcher[index].valueArray=value.assignmentGroup.id)},checkinput:function(selectedField){this.fieldupdatelist.push(selectedField.field)},actioncancel:function(){this.$emit("closed")},assignindex:function(val){this.index=val},associate:function(selectedObj){this.searchbool=!1,this.fieldMatcher[this.index].parseLabel=selectedObj,this.selectedspace=selectedObj.name,this.chooserVisibility=!1},update:function(){var _this=this;this.fieldnewlist=this.fieldlist,this.moduleFields&&this.fieldnewlist&&(this.updateFields=this.moduleFields.filter((function(field){return!field.default||_this.fieldnewlist.includes(field.name)})),this.updateFields.find((function(fm){"assignedTo"===fm.name&&(fm.displayName="Team / Staff")})))},checkUpdate:function(field){return!this.fieldupdatelist.find((function(fm){return fm===field.name}))},statusFieldName:function(selectedField,index){void 0!=selectedField&&this.fieldupdatelist.push(selectedField.field);var field=this.moduleFields.filter((function(field){return field.name===selectedField.field}));if(this.fieldMatcher[index].fieldObj=field,this.fieldMatcher[index].isSpacePicker=!1,this.fieldMatcher[index].isAssigned=!1,field.length>0){if(this.fieldMatcher[index].columnName=field[0].completeColumnName,"ENUM"===field[0].dataTypeEnum._name&&this.$set(this.picklistOptions,field[0].name,field[0].enumMap),"LOOKUP"===field[0].dataTypeEnum._name&&field[0].specialType)"requester"===field[0].specialType?this.loadPickList(field[0].lookupModule.name,field[0].name):this.loadSpecialTypePickList(field[0].specialType,field[0].name,index);else if("LOOKUP"===field[0].dataTypeEnum._name&&field[0].lookupModule)if("ticketpriority"===field[0].lookupModule.name){var priority={};this.ticketpriority.forEach((function(d){priority[d.id]=d.displayName})),this.$set(this.picklistOptions,field[0].name,priority)}else"resource"===field[0].lookupModule.name?this.loadSpecialTypePickList(field[0].lookupModule.name,field[0].name,index):this.loadPickList(field[0].lookupModule.name,field[0].name);this.$forceUpdate()}},loadPickList:function(moduleName,fieldName){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this2.$message.error(error.message||"Error Occured"):_this2.$set(_this2.picklistOptions,fieldName,options);case 6:case"end":return _context.stop()}}),_callee)})))()},changeDataType:function(criteria,index){if((0,validation/* isEmpty */.xb)(index)||(0,validation/* isEmpty */.xb)(criteria[index])||"DATE_TIME"!==criteria[index].fieldObj[0].dataTypeEnum._name&&"DATE"!==criteria[index].fieldObj[0].dataTypeEnum._name)criteria.valueArray&&(criteria.value={id:criteria.valueArray});else if(criteria[index].value){var interval=this.$helpers.daysHoursMinuToSec(criteria[index].value);criteria[index].value=1e3*interval,this.fieldMatcher[index].value=criteria[index].value}this.$forceUpdate()},actionSave:function(datas){var data=this.$helpers.cloneObject(datas);data&&this.$emit("submit",data)},addRow:function(){var _this3=this;this.indexcount++;var fieldMatcher=this.fieldMatcher;this.indexcount>1?this.indexbool=!0:this.indexbool=!1,this.moduleFields&&this.fieldlist&&(this.updateFields=this.moduleFields.filter((function(field){return!field.default||_this3.fieldlist.includes(field.name)})),this.updateFields.find((function(fm){"assignedTo"===fm.name&&(fm.displayName="Team / Staff")})));var newField={field:"",isSpacePicker:!1,isAssigned:!1,value:null,parseLabel:null,valueArray:null,dateObject:{},fieldObj:[{displayName:"",dataTypeEnum:{_name:""}}]};this.$set(this.fieldMatcher,fieldMatcher.length,newField)},deleteRow:function(element,index){this.indexcount--,this.indexcount>1?this.indexbool=!0:this.indexbool=!1;for(var i=0;i<this.fieldupdatelist.length;i++)this.fieldupdatelist[i]===element.field&&(this.referindex=i);-1!=this.referindex&&this.fieldupdatelist.splice(this.referindex,1),this.referindex=-1,
// this.fielddeletelist.push(element.field)
this.fieldMatcher.splice(index,1)},loadSpecialTypePickList:function(specialType,fieldName,index){var self=this,pickOption={};if("users"===specialType||"groups"===specialType)this.fieldMatcher[index].isAssigned=!0;else if("basespace"===specialType){this.fieldMatcher[index].isSpacePicker=!0;var _step,spaceList=self.$store.state.spaces,_iterator=(0,createForOfIteratorHelper/* default */.Z)(spaceList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var space=_step.value;pickOption[space.id]=space.name}}catch(err){_iterator.e(err)}finally{_iterator.f()}self.$set(self.picklistOptions,fieldName,pickOption)}else"resource"===specialType?this.fieldMatcher[index].isSpacePicker=!0:"sourceType"===specialType&&self.$set(self.picklistOptions,fieldName,this.$constants.SourceType)},showLookupWizard:function(field,canShow){this.selectedLookupField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{config:{}}),this.showLookupFieldWizard=canShow},setLookupFieldValue:function(value){var _this4=this,field=value.field,selectedItems=field.selectedItems,fieldMatcher=this.fieldMatcher,selectedLookupField=this.selectedLookupField,currentFieldIndex=fieldMatcher.findIndex((function(field){var name=_this4.$getProperty(field,"fieldObj.0.name");return name===selectedLookupField.name})),currentField=fieldMatcher[currentFieldIndex];if(field.multiple){var valueArrayItems=[];selectedItems.forEach((function(selectedItem){var _ref=selectedItem||{},value=_ref.value;valueArrayItems.push(value)})),currentField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},currentField),{},{valueArray:valueArrayItems})}else currentField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},currentField),{},{valueArray:selectedItems[0].value});(0,validation/* isEmpty */.xb)(fieldMatcher[currentFieldIndex])||(this.$set(this.fieldMatcher,currentFieldIndex,currentField),this.changeDataType(currentField,currentFieldIndex),this.checkinput(currentField)),this.showLookupFieldWizard=!1},isMultiLookUpField:function(element){var _ref2=element||{},fieldObj=_ref2.fieldObj,_ref3=fieldObj[0]||{},displayType=_ref3.displayType,dataTypeEnum=_ref3.dataTypeEnum,_ref4=displayType||{},displayTypeName=_ref4._name,_ref5=dataTypeEnum||{},dataTypeEnumName=_ref5._name;return!("MULTI_LOOKUP"!==dataTypeEnumName||!["MULTI_LOOKUP_POPUP","MULTI_LOOKUP_SIMPLE"].includes(displayTypeName))},getMultiLookUpFieldObj:function(variable){return variable["multiple"]=!0,variable}}},components_BulkUpdateViewervue_type_script_lang_js=BulkUpdateViewervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_BulkUpdateViewervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,BulkUpdateViewer=component.exports},
/***/962223:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewBulkUpdateViewer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/NewBulkUpdateViewer.vue?vue&type=template&id=30854afa
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"costdialog",class:["f-dialog","f-bulk-update-dialog"],attrs:{visible:_vm.fieldUpdateValue,"before-close":_vm.close,width:"45%","append-to-body":!0,"close-on-click-modal":!1},on:{"update:visible":function($event){_vm.fieldUpdateValue=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s("BULK UPDATE")+" ")])]}))],2),_vm.loading||_vm.status?_vm._e():_c("div",{staticClass:"bulk-action-banner"},[_vm._v(" "+_vm._s("This bulk action is applicable to all "+_vm.recordCount+" records.")+" ")]),_c("div",{staticClass:"f-dialog-content relative",style:_vm.styleCss},[_vm.loading?_c("div",{staticClass:"height330 overflow-y-scroll pB50"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm.status&&!_vm.loading?_c("div",{staticClass:"height330 overflow-y-scroll pB50"},[_c("div",{staticClass:"status-message"},[_vm._v(_vm._s(_vm.statusMessage))])]):_c("div",{staticClass:"height330 overflow-y-scroll pB50"},_vm._l(_vm.fieldMatcher,(function(element,index){return _c("div",{key:index},[_c("el-row",{staticClass:"visibility-visible-actions fc-row-hover pT10 pB10 pL10 pointer"},[_c("el-col",{attrs:{span:1}},[_c("div",{staticClass:"criteria-alphabet-block pT6"},[_c("div",{staticClass:"alphabet-circle"},[_vm._v(" "+_vm._s(index+1)+" ")])])]),_c("el-col",{staticClass:"mL10",attrs:{span:9}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:""},on:{change:function($event){return _vm.statusFieldName(element,index)}},model:{value:element.field,callback:function($$v){_vm.$set(element,"field",$$v)},expression:"element.field"}},_vm._l(_vm.filteredFields,(function(field,index){return _c("el-option",{key:index,attrs:{disabled:field.disabled,label:field.displayName,value:field.name}})})),1)],1),_c("el-col",{attrs:{span:9}},[_c("div",[element.fieldObj?element.isSpacePicker?_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100 mL40",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){return _vm.checkinput(element)}},model:{value:_vm.selectedspace,callback:function($$v){_vm.selectedspace=$$v},expression:"selectedspace"}},[_vm.searchbool?_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0,_vm.assignindex(index)}},slot:"suffix"}):_vm._e()]),_c("space-asset-chooser",{attrs:{visibility:_vm.chooserVisibility},on:{associate:_vm.associate,"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1):element.isAssigned?_c("div",[_c("div",{staticClass:"fc-border-input-div2 width100 mL40"},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.confirmRequest)))]),_c("span",{staticStyle:{float:"right","padding-right":"12px"}},[_c("img",{staticClass:"svg-icon team-down-icon",attrs:{src:__webpack_require__(620955)}})])]),_c("f-assignment",{attrs:{model:_vm.confirmRequest,viewtype:"form"},on:{value:function($event){return _vm.updateConfirmRequest($event,index)}}})],1):_c("div",[23===element.fieldObj[0].displayTypeInt?_c("el-row",{staticClass:"bulkupdate-duration"},[_c("f-duration-field",{key:index+" "+element.fieldObj[0].id,staticClass:"fc-input-full-border-select2 width100 duration-container",attrs:{field:element.fieldObj[0]},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}})],1):"NUMBER"===element.fieldObj[0].dataTypeEnum._name||"DECIMAL"===element.fieldObj[0].dataType?_c("el-input",{staticClass:"fc-input-full-border-select2 mL40 width140px",attrs:{type:"number"},on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}}):"BOOLEAN"===element.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 mL40 width140px",on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}},[_c("el-option",{attrs:{label:element.fieldObj[0].trueVal?element.fieldObj[0].trueVal:"Yes",value:"true"}}),_c("el-option",{attrs:{label:element.fieldObj[0].falseVal?element.fieldObj[0].falseVal:"No",value:"false"}})],1):"ENUM"===element.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mL40",attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}},_vm._l(_vm.picklistOptions[element.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):"DATE"===element.fieldObj[0].dataTypeEnum._name||"DATE_TIME"===element.fieldObj[0].dataTypeEnum._name?_c("el-row",{staticClass:"mL40"},[_c("el-date-picker",{staticClass:"fc-input-full-border-select2 width100 date-editor",staticStyle:{width:"290px"},attrs:{type:"datetime"},on:{change:function($event){_vm.changeDataType(element,index),_vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}})],1):"LOOKUP"!==element.fieldObj[0].dataTypeEnum._name||"LOOKUP_SIMPLE"!==element.fieldObj[0].displayType._name&&"LOOKUP_POPUP"!==element.fieldObj[0].displayType._name?_vm.isMultiLookUpField(element)?_c("FLookupField",{key:index+" "+element.fieldObj[0].id,staticClass:"width100 mL40 bulk-update-flookup",attrs:{"data-test-selector":""+element.fieldObj[0].name,model:element.valueArray,field:_vm.getMultiLookUpFieldObj(element.fieldObj[0]),canShowLookupWizard:_vm.showLookupFieldWizard},on:{recordSelected:function($event){_vm.changeDataType(element,index),_vm.checkinput(element)},"update:model":function($event){return _vm.$set(element,"valueArray",$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue}}):_c("el-input",{staticClass:"fc-input-full-border-select2 mL40 width100",on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}}):_c("FLookupField",{key:index+" "+element.fieldObj[0].id,staticClass:"width100 mL40 bulk-update-flookup",attrs:{"data-test-selector":""+element.fieldObj[0].name,model:element.valueArray,field:element.fieldObj[0],canShowLookupWizard:_vm.showLookupFieldWizard},on:{recordSelected:function($event){_vm.changeDataType(element,index),_vm.checkinput(element)},"update:model":function($event){return _vm.$set(element,"valueArray",$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue}})],1):_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 mL40 width100",on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}})],1)])]),_c("el-col",{attrs:{span:4}},[_c("div",{staticClass:"visibility-hide-actions pT15 pL55 pointer"},[_c("img",{staticClass:"pointer",attrs:{src:__webpack_require__(353654)},on:{click:function($event){return _vm.addRow(element)}}}),_vm.indexbool?_c("img",{staticClass:"pointer mL5",attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRow(element,index)}}}):_vm._e()])])],1)],1)})),0),_vm.showLookupFieldWizard?_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.showLookupFieldWizard,selectedLookupField:_vm.selectedLookupField,withReadings:!0},on:{"update:canShowLookupWizard":function($event){_vm.showLookupFieldWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.showLookupFieldWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}}):_vm._e()],1),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_vm.status?_c("div",[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-save fullwidth",on:{click:_vm.close}},[_vm._v(_vm._s("CLOSE"))])],1)]):_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",attrs:{disabled:_vm.loading},on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_vm.status?_vm._e():_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:function($event){return _vm.actionSave(_vm.fieldMatcher)}}},[_vm._v(_vm._s(_vm.loading?"Updating...":"Update"))])],1)]}))],2)])],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(162506),__webpack_require__(339772),__webpack_require__(420629)),picklist=__webpack_require__(961358),FAssignment=__webpack_require__(383274),SpaceAssetChooser=__webpack_require__(372587),validation=__webpack_require__(990260),FLookupField=__webpack_require__(855048),FLookupFieldWizard=__webpack_require__(499751),TeamStaffMixin=__webpack_require__(462599),FDurationField=__webpack_require__(482175),NewBulkUpdateViewervue_type_script_lang_js={created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadGroups")},mixins:[TeamStaffMixin/* default */.Z],computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketcategory:function(state){return state.ticketCategory},assetCategory:function(state){return state.assetCategory},ticketpriority:function(state){return state.ticketPriority},moduleFields:function(state){return state.view.metaInfo.fields}})),{},{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null},filteredFields:function(){var _this=this,bulkupdatefields=this.updateFields;return this.fieldupdatelist.forEach((function(value){bulkupdatefields.forEach((function(item){item.name!==value?_this.fieldupdatelist.includes(item.name)||_this.$set(item,"disabled",!1):_this.$set(item,"disabled",!0)}))})),bulkupdatefields}}),data:function(){return{maxHeight:"300px",confirmRequest:{assignedTo:{id:null},assignmentGroup:{id:null}},status:!1,statusMessage:"",loading:!1,showLookupFieldWizard:!1,indexcount:0,checkbool:!1,indexbool:!1,updateFields:[],fieldbool:!1,fielddeletelist:[],fieldupdatelist:[],fieldnewlist:[],searchbool:!0,selectedspace:null,referindex:-1,index:null,fieldContext:"",chooserVisibility:!1,picklistOptions:{},fieldUpdateValue:!0,spacePicker:!1,fieldMatcher:[],selectedLookupField:null,selectedFieldIndex:{}}},components:{FAssignment:FAssignment/* default */.Z,SpaceAssetChooser:SpaceAssetChooser/* default */.Z,FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"],FDurationField:FDurationField/* default */.Z},props:["module","fieldlist","recordCount"],watch:{},mounted:function(){this.resetErrorHnadle(),this.addRow(),this.update()},methods:{updateConfirmRequest:function(value,index){null!=value.assignedTo.id&&(this.confirmRequest.assignedTo.id=value.assignedTo.id,this.fieldMatcher[index].value=value.assignedTo.id),null!=value.assignmentGroup.id&&(this.confirmRequest.assignmentGroup.id=value.assignmentGroup.id,this.fieldMatcher[index].valueArray=value.assignmentGroup.id)},checkinput:function(selectedField){this.fieldupdatelist.push(selectedField.field)},close:function(){this.fieldUpdateValue=!1,this.actioncancel()},actioncancel:function(){this.resetErrorHnadle(),this.$emit("update:visible",!1),this.$emit("closed")},assignindex:function(val){this.index=val},associate:function(selectedObj){this.searchbool=!1,this.fieldMatcher[this.index].parseLabel=selectedObj,this.selectedspace=selectedObj.name,this.chooserVisibility=!1},update:function(){var _this2=this;this.fieldnewlist=this.fieldlist,this.moduleFields&&this.fieldnewlist&&(this.updateFields=this.moduleFields.filter((function(field){return!field.default||_this2.fieldnewlist.includes(field.name)})),this.updateFields.find((function(fm){"assignedTo"===fm.name&&(fm.displayName="Team / Staff")})))},checkUpdate:function(field){return!this.fieldupdatelist.find((function(fm){return fm===field.name}))},statusFieldName:function(selectedField,index){var _this3=this;void 0!=selectedField&&(""===this.selectedFieldIndex[index]||void 0===this.selectedFieldIndex[index]||(this.fieldupdatelist=this.fieldupdatelist.filter((function(item){return item!==_this3.selectedFieldIndex[index]}))),this.selectedFieldIndex[index]=selectedField.field,this.fieldupdatelist.push(selectedField.field));var field=this.moduleFields.filter((function(field){return field.name===selectedField.field}));if(this.fieldMatcher[index].fieldObj=field,this.fieldMatcher[index].fieldObj[0].value=[],this.fieldMatcher[index].value=0,this.fieldMatcher[index].isSpacePicker=!1,this.fieldMatcher[index].isAssigned=!1,field.length>0){if(this.fieldMatcher[index].columnName=field[0].completeColumnName,"ENUM"===field[0].dataTypeEnum._name&&this.$set(this.picklistOptions,field[0].name,field[0].enumMap),"LOOKUP"===field[0].dataTypeEnum._name&&field[0].specialType)"requester"===field[0].specialType?this.loadPickList(field[0].lookupModule.name,field[0].name):this.loadSpecialTypePickList(field[0].specialType,field[0].name,index);else if("LOOKUP"===field[0].dataTypeEnum._name&&field[0].lookupModule)if("ticketpriority"===field[0].lookupModule.name){var priority={};this.ticketpriority.forEach((function(d){priority[d.id]=d.displayName})),this.$set(this.picklistOptions,field[0].name,priority)}else"resource"===field[0].lookupModule.name?this.loadSpecialTypePickList(field[0].lookupModule.name,field[0].name,index):this.loadPickList(field[0].lookupModule.name,field[0].name);this.$forceUpdate()}},loadPickList:function(moduleName,fieldName){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this4.$message.error(error.message||"Error Occured"):_this4.$set(_this4.picklistOptions,fieldName,options);case 6:case"end":return _context.stop()}}),_callee)})))()},changeDataType:function(criteria,index){if((0,validation/* isEmpty */.xb)(index)||(0,validation/* isEmpty */.xb)(criteria[index])||"DATE_TIME"!==criteria[index].fieldObj[0].dataTypeEnum._name&&"DATE"!==criteria[index].fieldObj[0].dataTypeEnum._name)criteria.valueArray&&(criteria.value={id:criteria.valueArray});else if(criteria[index].value){var interval=this.$helpers.daysHoursMinuToSec(criteria[index].value);criteria[index].value=1e3*interval,this.fieldMatcher[index].value=criteria[index].value}this.$forceUpdate()},updateAPICallback:function(_ref){var message=_ref.message,error=_ref.error;this.loading=!1,this.handleErrorBanner(message,error)},handleErrorBanner:function(message){this.status=!0,this.statusMessage=message?"".concat(message):"UPDATED"},resetErrorHnadle:function(){this.status=!1,this.statusMessage=""},actionSave:function(datas){var data=this.$helpers.cloneObject(datas),emptyField=!1;data&&(data.forEach((function(item){null!==item.field&&void 0!==item.field&&""!==item.field||(emptyField=!0)})),emptyField?this.$message.warning("Field name cannot be empty"):(this.loading=!0,this.$emit("submit",data)))},addRow:function(){var _this5=this;this.indexcount++;var fieldMatcher=this.fieldMatcher;this.indexcount>1?this.indexbool=!0:this.indexbool=!1,this.moduleFields&&this.fieldlist&&(this.updateFields=this.moduleFields.filter((function(field){return!field.default||_this5.fieldlist.includes(field.name)})),this.updateFields.find((function(fm){"assignedTo"===fm.name&&(fm.displayName="Team / Staff")}))),1==this.indexcount&&this.updateFields.forEach((function(item){_this5.$set(item,"disabled",!1)}));var newField={field:"",isSpacePicker:!1,isAssigned:!1,value:null,parseLabel:null,valueArray:null,dateObject:{},fieldObj:[{displayName:"",dataTypeEnum:{_name:""}}]};this.$set(this.fieldMatcher,fieldMatcher.length,newField)},deleteRow:function(element,index){this.indexcount--,this.indexcount>1?this.indexbool=!0:this.indexbool=!1;for(var i=0;i<this.fieldupdatelist.length;i++)this.fieldupdatelist[i]===element.field&&(this.referindex=i);-1!=this.referindex&&this.fieldupdatelist.splice(this.referindex,1),this.referindex=-1,
// this.fielddeletelist.push(element.field)
this.fieldMatcher.splice(index,1)},loadSpecialTypePickList:function(specialType,fieldName,index){var self=this,pickOption={};if("users"===specialType||"groups"===specialType)this.fieldMatcher[index].isAssigned=!0;else if("basespace"===specialType){this.fieldMatcher[index].isSpacePicker=!0;var _step,spaceList=self.$store.state.spaces,_iterator=(0,createForOfIteratorHelper/* default */.Z)(spaceList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var space=_step.value;pickOption[space.id]=space.name}}catch(err){_iterator.e(err)}finally{_iterator.f()}self.$set(self.picklistOptions,fieldName,pickOption)}else"resource"===specialType?this.fieldMatcher[index].isSpacePicker=!0:"sourceType"===specialType&&self.$set(self.picklistOptions,fieldName,this.$constants.SourceType)},showLookupWizard:function(field,canShow){this.selectedLookupField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{config:{}}),this.showLookupFieldWizard=canShow},setLookupFieldValue:function(value){var _this6=this,field=value.field,selectedItems=field.selectedItems,fieldMatcher=this.fieldMatcher,selectedLookupField=this.selectedLookupField,currentFieldIndex=fieldMatcher.findIndex((function(field){var name=_this6.$getProperty(field,"fieldObj.0.name");return name===selectedLookupField.name})),currentField=fieldMatcher[currentFieldIndex];if(field.multiple){var valueArrayItems=[];selectedItems.forEach((function(selectedItem){var _ref2=selectedItem||{},value=_ref2.value;valueArrayItems.push(value)})),currentField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},currentField),{},{valueArray:valueArrayItems})}else currentField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},currentField),{},{valueArray:selectedItems[0].value});(0,validation/* isEmpty */.xb)(fieldMatcher[currentFieldIndex])||(this.$set(this.fieldMatcher,currentFieldIndex,currentField),this.changeDataType(currentField,currentFieldIndex),this.checkinput(currentField)),this.showLookupFieldWizard=!1},isMultiLookUpField:function(element){var _ref3=element||{},fieldObj=_ref3.fieldObj,_ref4=fieldObj[0]||{},displayType=_ref4.displayType,dataTypeEnum=_ref4.dataTypeEnum,_ref5=displayType||{},displayTypeName=_ref5._name,_ref6=dataTypeEnum||{},dataTypeEnumName=_ref6._name;return!("MULTI_LOOKUP"!==dataTypeEnumName||!["MULTI_LOOKUP_POPUP","MULTI_LOOKUP_SIMPLE"].includes(displayTypeName))},getMultiLookUpFieldObj:function(variable){return variable["multiple"]=!0,variable}}},components_NewBulkUpdateViewervue_type_script_lang_js=NewBulkUpdateViewervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_NewBulkUpdateViewervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewBulkUpdateViewer=component.exports},
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/520505:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return BulkActionBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/list/BulkActionBar.vue?vue&type=template&id=248f667a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visible?_c("div",{staticClass:"bulk-action-container"},[_c("span",[_vm._v(_vm._s(_vm.selectionText))]),_vm.isSelected?_c("span",{staticClass:"bulk-select-button",on:{click:_vm.toggleSelection}},[_vm._v(_vm._s(_vm.$t("filters.bulk_action.clear_selection")))]):_c("span",{staticClass:"bulk-select-button",on:{click:_vm.toggleSelection}},[_vm._v(_vm._s(_vm.$t("maintenance.pm.select_all")+" "+_vm.totalCount+" "+_vm.$t("filters.bulk_action.records")))])]):_vm._e()},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),defineProperty=__webpack_require__(482482),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(634338),__webpack_require__(32284)),BulkActionBarvue_type_script_lang_js={name:"BulkActionBar",props:["totalCount","perPage","moduleName","visible","isAllSelected"],computed:{isSelected:{get:function(){return this.isAllSelected},set:function(value){this.$emit("update:isAllSelected",value)}},selectedCount:function(){var _ref=this||{},isSelected=_ref.isSelected,perPage=_ref.perPage,totalCount=_ref.totalCount;return isSelected?totalCount:perPage},selectionText:function(){var allText=this.$t("filters.bulk_action.all"),_ref2=this||{},selectedCount=_ref2.selectedCount,isSelected=_ref2.isSelected,selectText="";return selectText=isSelected?this.$t("filters.bulk_action.per_page_all_selected"):this.$t("filters.bulk_action.per_page_selected"),"".concat(allText," ").concat(selectedCount," ").concat(selectText)}},watch:{visible:function(value){value||(this.isSelected=!1)},isSelected:{handler:function(value){this.$emit("update:isAllSelected",value)},immediate:!0}},methods:{toggleSelection:function(){this.isSelected=!this.isSelected},updateRecord:function(params,filters){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref3,moduleName,url,data,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref3=_this||{},moduleName=_ref3.moduleName,url="v3/bulkActionPatch/".concat(moduleName,"?filters=").concat(filters),data={moduleName:moduleName,data:(0,defineProperty/* default */.Z)({},moduleName,params)},_context.next=5,api/* API */.bl.post(url,data);case 5:return response=_context.sent,_context.abrupt("return",response);case 7:case"end":return _context.stop()}}),_callee)})))()},deleteRecord:function(filters){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref4,moduleName,url,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref4=_this2||{},moduleName=_ref4.moduleName,url="v3/bulkActionDelete/".concat(moduleName,"?filters=").concat(filters),_context2.next=4,api/* API */.bl.post(url,{});case 4:return response=_context2.sent,_context2.abrupt("return",response);case 6:case"end":return _context2.stop()}}),_callee2)})))()},createRecord:function(params,filters){return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var url,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return url="v3/bulkAction/create?filters=".concat(filters),_context3.next=3,api/* API */.bl.post(url,params);case 3:return response=_context3.sent,_context3.abrupt("return",response);case 5:case"end":return _context3.stop()}}),_callee3)})))()}}},list_BulkActionBarvue_type_script_lang_js=BulkActionBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_BulkActionBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"248f667a",null)
/* harmony default export */,BulkActionBar=component.exports},
/***/844611:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewBulkActionBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/list/NewBulkActionBar.vue?vue&type=template&id=c41ae312
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visible?_c("div",{staticClass:"bulk-action-container"},[_c("span",[_vm._v(_vm._s(_vm.selectionText))]),!_vm.isSelected&&_vm.totalCount<=_vm.limit?_c("span",{staticClass:"bulk-select-button",on:{click:_vm.toggleSelection}},[_vm._v(_vm._s(_vm.$t("maintenance.pm.select_all")+" "+_vm.totalCount+" "+_vm.$t("filters.bulk_action.records")))]):_vm.isSelected&&_vm.totalCount<=_vm.limit?_c("span",{staticClass:"bulk-select-button",on:{click:_vm.toggleSelection}},[_vm._v(_vm._s(_vm.$t("filters.bulk_action.clear_selection")))]):_vm._e(),_vm.totalCount>_vm.limit?_c("span",{staticClass:"bulk-select-error"},[_vm._v(_vm._s(_vm.warningText))]):_vm._e()]):_vm._e()},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),defineProperty=__webpack_require__(482482),asyncToGenerator=__webpack_require__(548534),BulkActionBar=(__webpack_require__(634338),__webpack_require__(520505)),NewBulkActionBarvue_type_script_lang_js={extends:BulkActionBar/* default */.Z,props:["totalCount","perPage","moduleName","visible","isAllSelected","selectedItem","limit"],computed:{isSelected:{get:function(){return this.isAllSelected},set:function(value){this.$emit("update:isAllSelected",value)}},selectedCount:function(){var _ref=this||{},isSelected=_ref.isSelected,perPage=_ref.perPage,totalCount=_ref.totalCount;return isSelected?totalCount:perPage},selectionText:function(){var allText=this.$t("filters.bulk_action.all"),_ref2=this||{},selectedCount=_ref2.selectedCount,isSelected=_ref2.isSelected,selectText="";return isSelected?selectText=this.$t("filters.bulk_action.per_page_all_selected"):(selectText=this.$t("filters.bulk_action.per_page_selected"),selectedCount=this.selectedItem),"".concat(allText," ").concat(selectedCount," ").concat(selectText)},warningText:function(){var message="";return message=". Bulk update is limited to ".concat(this.limit," records. Please make sure your selection stays within this limit"),message}},watch:{visible:function(value){value||(this.isSelected=!1)},isSelected:{handler:function(value){this.$emit("update:isAllSelected",value)},immediate:!0}},methods:{toggleSelection:function(){this.isSelected=!this.isSelected,this.$emit("change",this.isSelected)},updateRecord:function(params,filters){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref3,moduleName,url,data,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref3=_this||{},moduleName=_ref3.moduleName,url="v3/bulkActionPatch/".concat(moduleName,"?filters=").concat(filters),data={moduleName:moduleName,data:(0,defineProperty/* default */.Z)({},moduleName,params)},_context.next=5,API.post(url,data);case 5:return response=_context.sent,_context.abrupt("return",response);case 7:case"end":return _context.stop()}}),_callee)})))()},deleteRecord:function(filters){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref4,moduleName,url,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref4=_this2||{},moduleName=_ref4.moduleName,url="v3/bulkActionDelete/".concat(moduleName,"?filters=").concat(filters),_context2.next=4,API.post(url,{});case 4:return response=_context2.sent,_context2.abrupt("return",response);case 6:case"end":return _context2.stop()}}),_callee2)})))()},createRecord:function(params,filters){return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var url,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return url="v3/bulkAction/create?filters=".concat(filters),_context3.next=3,API.post(url,params);case 3:return response=_context3.sent,_context3.abrupt("return",response);case 5:case"end":return _context3.stop()}}),_callee3)})))()}}},list_NewBulkActionBarvue_type_script_lang_js=NewBulkActionBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_NewBulkActionBarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewBulkActionBar=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/76146.js.map