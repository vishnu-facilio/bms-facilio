(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[49742],{
/***/647690:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AlarmBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AlarmBar.vue?vue&type=template&id=79c81abb
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"alarm-bar-cell position-relative"},[_vm.chartDataLoadStatus?_c("div",{staticClass:"text-fc-grey pL0 width100"},[_c("div",{staticClass:"mL30 mR30 animated-background booleancard-chart widget-alarmbar",staticStyle:{height:"26px"}})]):_vm.chartData&&_vm.chartData.data?_c("f-multi-chart",{key:"alarmbar"+_vm.parentId,ref:"barRefrs",staticClass:"booleancard-chart widget-alarmbar",attrs:{data:_vm.chartData.data,options:_vm.chartOptions,alarms:_vm.chartData.alarms,booleanAlarmsData:_vm.chartData.alarms,booleanData:_vm.chartData.booleanData,dateRange:_vm.chartData.dateRange,hidecharttypechanger:!0}}):_vm._e(),_vm.isNoDropButtom?_c("div",{staticClass:"empty-div-cell"}):_vm._e()],1)])},staticRenderFns=[],defineProperty=__webpack_require__(482482),NewDataFormatHelper=__webpack_require__(804911),NewDateHelper=__webpack_require__(105534),FMultiChart=__webpack_require__(649206),AlarmBarvue_type_script_lang_js={props:["parentId","sourceKey","dateOperator","dateValue","isResize","isRca","resourceId","parentAlarmId","rca","isOpen","isNoDropButtom"],mixins:[NewDataFormatHelper/* default */.Z,NewDateHelper/* default */.Z],components:{FMultiChart:FMultiChart/* default */.Z},data:function(){return{localDateFormat:[22,25,31,30,28,27,44,45],configData:{height:40,width:100,dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(22)},dateObj:NewDateHelper/* default */.Z.getDatePickerObject(28,null),chartDataLoadStatus:!1,chartData:null,chartOptions:{common:{mode:1,buildingIds:[],type:1},hideAlarmTitle:!0,general:{grid:{y:!1,x:!1},point:{show:!1},labels:!1,normalizeStack:!1,dataOrder:null,hideZeroes:!1},settings:{chartMode:"multi",alarm:!0,chart:!0,table:!1,safelimit:!1,enableAlarm:!0,autoGroup:!1,booleanAlarms:!0},tooltip:{grouped:!1,sortOrder:"none",showNullValues:!1},donut:{labelType:"percentage",centerText:{primaryText:null,secondaryText:null}},area:{above:!1,linearGradient:!0},axis:{rotated:!1,showy2axis:!0,x:{show:!1,label:{text:"Timestamp",position:"outer-center"},tick:{direction:"auto"},range:{min:null,max:null},datatype:"date_time",time:{period:null,format:{period:"minute",interval:"minutes",format:"MM-DD-YYYY HH:mm",d3Format:"%m-%d-%Y %H:%M",tooltip:"LLL"}}},y:{show:!1,label:{text:"PRE FILTER ALARM",position:"outer-middle",type:"auto"},unit:null,scale:"linear",range:{min:null,max:null},ticks:{count:5},format:{decimals:0},padding:{bottom:0},datatype:null},y2:{show:!1,label:{text:null,position:"outer-middle"},unit:null,scale:"linear",range:{min:null,max:null},ticks:{count:5},format:{decimals:0},padding:{bottom:0}}},legend:{show:!0,position:"top",width:180},widgetLegend:{show:!1},colorPalette:"auto",style:{pie:{label:{show:!0}},donut:{width:null,label:{show:!0}},gauge:{width:null,label:{show:!0},min:0,max:100,unit:" %"},line:{point:{show:!0,radius:5},lineMode:"default",stepType:"step",stroke:{width:1,opacity:1,dashed:{length:2,space:2}},connectNull:!1},area:{point:{show:!0,radius:5},lineMode:"default",stepType:"step",fillOpacity:null,stroke:{width:1,opacity:1,dashed:{length:2,space:2}},connectNull:!1},bar:{width:null},scatter:{point:{radius:5}}},type:"area",multichart:{},isSystemGroup:!1,dataPoints:[{label:"Status",children:[],type:"group",chartType:"",groupKey:1,unit:null,dataType:"BOOLEAN"}],safeLimit:[]}}},watch:{parentId:function(newVal){this.initializeCharts()},dateOperator:function(newVal){this.initializeCharts()},dateValue:function(newVal){this.initializeCharts()},isResize:function(newVal){
// if (newVal) {
// this.$refs
this.$refs["barRefrs"]&&this.$refs["barRefrs"].resize();
// }
}},mounted:function(){this.initializeCharts()},methods:{prepareGraph:function(result){this.chartDataLoadStatus=!1;var reportObj={data:{}};return reportObj.alarms=this.prepareBooleanReport(result),reportObj.alarms.barSize="small",this.configData.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(this.dateOperator,this.dateValue),reportObj.dateRange=NewDateHelper/* default */.Z.getDatePickerObject(this.dateOperator,this.dateValue),reportObj.xAggr=0,reportObj.report={xAggr:0},reportObj.dateRange=this.prepareHighResDateRange(reportObj),reportObj.data.x=reportObj.dateRange.range.domain,this.chartOptions.axis.x.range=reportObj.dateRange.range,reportObj},getChartData:function(){var _paramsJson,_this=this;this.chartDataLoadStatus=!0;var params={paramsJson:(_paramsJson={isRca:this.isRca},(0,defineProperty/* default */.Z)(_paramsJson,this.sourceKey,this.parentId),(0,defineProperty/* default */.Z)(_paramsJson,"dateOperator",this.dateOperator),(0,defineProperty/* default */.Z)(_paramsJson,"dateValue",this.dateValue),_paramsJson),staticKey:"resourceAlarmBar"};this.rca&&(params.paramsJson["isRca"]=!0),this.resourceId&&(params.paramsJson["parentId"]=this.resourceId),this.parentAlarmId&&(params.paramsJson["parentAlarmId"]=this.parentAlarmId),this.$http.post("dashboard/getCardData",params).then((function(response){_this.chartData=_this.chartData||{},_this.chartData=_this.prepareGraph(response.data.cardResult),_this.$nextTick((function(){_this.$refs["barRefrs"]&&_this.$refs["barRefrs"].resize()}))}))},initializeCharts:function(){this.getChartData()}}},components_AlarmBarvue_type_script_lang_js=AlarmBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlarmBarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmBar=component.exports},
/***/507008:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FPopover.vue?vue&type=template&id=878762a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{ref:_vm.getRef,attrs:{"popper-class":"f-popover",width:_vm.width||""===_vm.width?_vm.width:280,placement:_vm.placement,trigger:_vm.trigger||"click",hide:"hide"},on:{show:function(){return _vm.$emit("show")}},model:{value:_vm.showpopover,callback:function($$v){_vm.showpopover=$$v},expression:"showpopover"}},[_c("div",{staticClass:"fc-popover-content"},[_vm._t("header",(function(){return[_c("div",{staticClass:"title uppercase f12 bold",staticStyle:{"letter-spacing":"1.1px",color:"#000000"}},[_vm._v(" "+_vm._s(_vm.title)+" ")])]})),_c("div",[_vm._t("content")],2)],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.cancel}},[_c("span",[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.confirmTitle?_vm.confirmTitle:_vm.$t("common._common.ok")))])])]}))],2),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)},staticRenderFns=[],FPopovervue_type_script_lang_js={props:["popperClass","placement","value","popperRef","trigger","title","width","maxHeight","confirmTitle"],data:function(){return{showpopover:!1}},watch:{showpopover:function(val){null!=this.value&&this.$emit("input",val)},value:function(val){this.showpopover=val}},mounted:function(){var element=this.$refs[this.getRef].$el;if(this.popperClass&&element.firstElementChild.classList.add(this.popperClass),this.maxHeight){var content=element.querySelector(".fc-popover-content");content.classList.add("scrollable"),content.style["max-height"]=this.maxHeight+"px"}},computed:{getRef:function(){return this.popperRef?this.popperRef:"fpopup"}},methods:{save:function(){this.showpopover=!1,this.$emit("save")},cancel:function(){this.showpopover=!1,this.$emit("close")},hide:function(){this.$emit("hide")}}},components_FPopovervue_type_script_lang_js=FPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FPopover=component.exports},
/***/21864:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return OutsideClick}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/OutsideClick.vue?vue&type=template&id=6761c108
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.onOutsideClick,expression:"onOutsideClick"}]},[_vm._t("default")],2):_vm._e()},staticRenderFns=[],OutsideClickvue_type_script_lang_js={props:["visibility"],methods:{onOutsideClick:function(){this.$emit("onOutsideClick"),this.$emit("update:visibility",!1)}}},components_OutsideClickvue_type_script_lang_js=OutsideClickvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_OutsideClickvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,OutsideClick=component.exports},
/***/673559:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AnomalyRCA}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/anomalies/AnomalyRCA.vue?vue&type=template&id=69fe86c8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("portal",{attrs:{to:_vm.tab.name+"-title-section"}},[_c("div",{staticClass:"widget-header d-flex flex-direction-row justify-content-space flex-middle rca-header pL20"},[_c("div",{staticClass:"fc-black-com f18 "},[_vm._v("Root Causes")]),_c("div",{staticClass:"fR position-relative",staticStyle:{"margin-left":"auto",top:"5px"}},[_c("new-date-picker",{staticClass:"filter-field date-filter-comp",staticStyle:{"margin-left":"auto"},attrs:{zone:_vm.$timezone,dateObj:_vm.dateObj},on:{"update:dateObj":function($event){_vm.dateObj=$event},"update:date-obj":function($event){_vm.dateObj=$event},date:_vm.changeDateFilter}})],1)])]),_vm.loading?_c("div",{staticClass:"flex-middle fc-empty-white block"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm.rcaAlarms.length>0?_c("div",[_c("div",{staticClass:"width100 pT5 pB10"},[_c("el-row",{staticClass:"flex-middle pL20 pR20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-black-com f16 bold text-capitalize pT10 pB10"},[_vm._v(" "+_vm._s(_vm.details.alarm.resource?_vm.details.alarm.resource.name:"---")+" ")])])],1),_c("div",{staticClass:"fc-anomalies-head-barcell"},[_c("alarm-bar",{attrs:{parentId:_vm.details.alarm.id,sourceKey:"alarmId",dateOperator:_vm.dateOperator,dateValue:_vm.dateValue}})],1)],1),_c("el-collapse",{ref:"alarmlistcollapse",staticClass:"fc-anamoly-rca-collapse",attrs:{accordion:""},model:{value:_vm.activeRule,callback:function($$v){_vm.activeRule=$$v},expression:"activeRule"}},_vm._l(_vm.rcaAlarms,(function(rca,index){return _c("el-collapse-item",{key:index,staticClass:"position-relative",attrs:{name:rca.id}},[_c("template",{slot:"title"},[rca.viewDetails?_c("div",{staticClass:"width100"},[_c("el-row",{staticClass:"flex-middle pL20 pR20"},[_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"fc-black-com bold f14 text-capitalize visibility-visible-actions"},[_vm._v(" "+_vm._s(rca.resource?rca.resource.name:"---")+" "),_c("i",{staticClass:"visibility-hide-actions el-icon-right fc-grey",on:{click:function($event){return _vm.openRcaAlarm(rca)}}})])]),_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"flex-middle justify-content-end"},[_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("No of Anomalies :")]),_vm._v(" "+_vm._s(rca.count?rca.count:"---")+" ")]),_c("el-divider",{staticClass:"mL20 mR20",attrs:{direction:"vertical"}}),_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("Duration :")]),_vm._v(" "+_vm._s(rca.duration?_vm.$helpers.getFormattedDuration(rca.duration):"---")+" ")])],1)])],1),_c("div",{staticClass:"alarm-bar-cell"},[_c("alarm-bar",{attrs:{parentId:rca.alarm.id,sourceKey:"alarmId",isRca:!0,parentAlarmId:_vm.details.alarm.id,dateOperator:_vm.dateOperator,dateValue:_vm.dateValue}})],1)],1):_vm._e()]),rca.relatedAsset?_c("div",{staticClass:"clear"},[_c("el-collapse",{ref:"assetlistcollapse",refInFor:!0,staticClass:"position-relative",attrs:{accordion:""},model:{value:_vm.assetActiveRule,callback:function($$v){_vm.assetActiveRule=$$v},expression:"assetActiveRule"}},_vm._l(rca.relatedAsset,(function(asset){return _c("el-collapse-item",{key:asset.resource.id,staticClass:"position-relative",attrs:{name:asset.id}},[_c("template",{slot:"title"},[_c("div",{staticClass:"width100"},[_c("el-row",{staticClass:"flex-middle pL20 pR20"},[_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"fc-black-com bold f14 text-capitalize"},[_vm._v(" "+_vm._s(asset.subject)+" ")])]),_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"flex-middle justify-content-end"},[_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("Total Alarms :")]),_vm._v(" "+_vm._s(asset.count?asset.count:"---")+" ")]),_c("el-divider",{staticClass:"mL20 mR20",attrs:{direction:"vertical"}}),_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("Duration :")]),_vm._v(" "+_vm._s(asset.count?_vm.$helpers.getFormattedDuration(asset.duration):"---")+" ")])],1)])],1),_c("div",{staticClass:"alarm-bar-cell"},[_c("alarm-bar",{ref:"assetBarRef",refInFor:!0,attrs:{parentAlarmId:_vm.details.alarm.id,isRCA:"true",rca:_vm.isRca,isResize:_vm.isResize,parentId:asset.resource.id,sourceKey:"parentId",dateOperator:_vm.dateOperator,dateValue:_vm.dateValue}})],1)],1)]),_vm._l(asset.ruleBar,(function(rule){return _c("div",{key:rule.rule.id,staticClass:"clearboth"},[_c("div",{staticClass:"width100"},[_c("el-row",{staticClass:"flex-middle pL20 pR20 pB10"},[_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"fc-black-com f12 bold text-capitalize"},[_vm._v(" "+_vm._s(rule.subject)+" ")])]),_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"flex-middle justify-content-end"},[_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("Total Alarms :")]),_vm._v(" "+_vm._s(rule.count?rule.count:"---")+" ")]),_c("el-divider",{staticClass:"mL20 mR20",attrs:{direction:"vertical"}}),_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("Duration :")]),_vm._v(" "+_vm._s(rule.count?_vm.$helpers.getFormattedDuration(rule.duration):"---")+" ")])],1)])],1),_c("div",{staticClass:"alarm-bar-cell clearboth"},[_c("alarm-bar",{staticClass:"clearboth",attrs:{parentAlarmId:_vm.details.alarm.id,isRCA:"true",rca:_vm.isRca,isNoDropButtom:!0,parentId:rule.rule.id,isResize:_vm.isResize,resourceId:asset.resource.id,sourceKey:"ruleId",dateOperator:_vm.dateOperator,dateValue:_vm.dateValue}})],1)],1)])}))],2)})),1),_c("div",{staticClass:"clear"},[_c("div",{},[_c("div",{},[rca.latestAlarmOccurrence.id&&rca.analyticsConfig.intersections?_c("f-new-analytic-report",{ref:"newAlarmAnalyticReport",refInFor:!0,staticClass:"alarm-summary-chart anomaliesrca-summary-chart",attrs:{config:rca.analyticsConfig}}):_vm._e()],1)])])],1):_vm._e()],2)})),1)],1):_vm.parentRelatedAssets.length>0?_c("div",[_c("div",{staticClass:"width100 pT5 pB10"},[_c("el-row",{staticClass:"flex-middle pL20 pR20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-black-com f16 bold text-capitalize pT10 pB10"},[_vm._v(" "+_vm._s(_vm.details.alarm.resource?_vm.details.alarm.resource.name:"---")+" ")])])],1),_c("div",{staticClass:"fc-anomalies-head-barcell"},[_c("alarm-bar",{attrs:{parentId:_vm.details.alarm.id,sourceKey:"alarmId",dateOperator:_vm.dateOperator,dateValue:_vm.dateValue}})],1)],1),_c("el-collapse",{ref:"alarmlistcollapse",staticClass:"fc-anamoly-rca-collapse",attrs:{accordion:""},model:{value:_vm.parentActiveRule,callback:function($$v){_vm.parentActiveRule=$$v},expression:"parentActiveRule"}},_vm._l(_vm.parentRelatedAssets,(function(rca,index){return _c("el-collapse-item",{key:index,staticClass:"position-relative",attrs:{name:rca.id}},[_c("template",{slot:"title"},[_c("div",{staticClass:"width100"},[_c("el-row",{staticClass:"flex-middle pL20 pR20"},[_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"fc-black-com bold f14 text-capitalize"},[_vm._v(" "+_vm._s(rca.subject?rca.subject:"---")+" ")])]),_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"flex-middle justify-content-end"},[_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("No of Alarms :")]),_vm._v(" "+_vm._s(rca.count?rca.count:"---")+" ")]),_c("el-divider",{staticClass:"mL20 mR20",attrs:{direction:"vertical"}}),_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("Duration :")]),_vm._v(" "+_vm._s(rca.duration?_vm.$helpers.getFormattedDuration(rca.duration):"---")+" ")])],1)])],1),_c("div",{staticClass:"alarm-bar-cell"},[_c("alarm-bar",{attrs:{parentId:rca.resource.id,sourceKey:"parentId",dateOperator:_vm.dateOperator,dateValue:_vm.dateValue,parentAlarmId:_vm.details.alarm.id,isRCA:"true",rca:_vm.isRca}})],1)],1)]),_c("div",_vm._l(rca.ruleBar,(function(rule){return _c("div",{key:rule.rule.id},[_c("div",{staticClass:"width100"},[_c("el-row",{staticClass:"flex-middle pL20 pR20"},[_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"fc-black-com f12 bold text-capitalize"},[_vm._v(" "+_vm._s(rule.subject)+" ")])]),_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"flex-middle justify-content-end"},[_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("Total Alarms :")]),_vm._v(" "+_vm._s(rule.count?rule.count:"---")+" ")]),_c("el-divider",{staticClass:"mL20 mR20",attrs:{direction:"vertical"}}),_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v("Duration :")]),_vm._v(" "+_vm._s(rule.count?_vm.$helpers.getFormattedDuration(rule.duration):"---")+" ")])],1)])],1),_c("div",{staticClass:"alarm-bar-cell"},[_c("alarm-bar",{attrs:{isResize:_vm.isResize,parentId:rule.rule.id,resourceId:rule.resource.id,sourceKey:"ruleId",dateOperator:_vm.dateOperator,dateValue:_vm.dateValue,parentAlarmId:_vm.details.alarm.id,isRCA:"true",rca:_vm.isRca}})],1)],1)])})),0)],2)})),1)],1):_c("div",{staticClass:"block"},[_c("div",{staticClass:"mT40 mB40 text-center p30imp"},[_c("InlineSvg",{attrs:{src:"svgs/emptystate/alarmEmpty",iconClass:"icon text-center icon-xxxxlg emptystate-icon-size"}}),_c("div",{staticClass:"pT20 fc-black-dark f18 bold"},[_vm._v("No Root Cause Analysis!")])],1)])],1)},staticRenderFns=[],NewDataFormatHelper=(__webpack_require__(634338),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(506203),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(903650),__webpack_require__(804911)),NewDateHelper=__webpack_require__(105534),NewDatePicker=__webpack_require__(900773),AlarmBar=__webpack_require__(647690),FNewAnalyticsReportV1=__webpack_require__(937376),AnomalyRCAvue_type_script_lang_js={watch:{parentActiveRule:{handler:function(newValue){null!==newValue&&(this.isResize=!this.isResize)}},assetActiveRule:{handler:function(newValue){null!==newValue&&(this.isResize=!this.isResize)}},activeRule:{handler:function(newValue){null!==newValue&&(this.isResize=!this.isResize)}}},components:{NewDatePicker:NewDatePicker/* default */.Z,AlarmBar:AlarmBar/* default */.Z,FNewAnalyticReport:FNewAnalyticsReportV1/* default */.Z},props:["details","widget","tab"],data:function(){return{rcaAlarms:[],parentRelatedAssets:[],parentActiveRule:null,list:null,isRca:!0,isResize:!1,loading:{},assetActiveRule:null,localDateFormat:[22,25,31,30,28,27,44,45],configData:{height:40,width:100,dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(20)},dateObj:NewDateHelper/* default */.Z.getDatePickerObject(20,this.details.alarm?[this.details.alarm.lastOccurredTime-5184e5,this.details.alarm.lastOccurredTime]:null),dateOperator:20,assetChart:{},dateValue:null,activeRule:null}},mixins:[NewDataFormatHelper/* default */.Z,NewDateHelper/* default */.Z],mounted:function(){this.dateValue=[this.details.alarm.lastOccurredTime-5184e5,this.details.alarm.lastOccurredTime],this.dateObj=NewDateHelper/* default */.Z.getDatePickerObject(20,[this.details.alarm.lastOccurredTime-5184e5,this.details.alarm.lastOccurredTime]),this.loadRCAReport(),this.loadParentRelatedAssets()},methods:{loadParentRelatedAssets:function(){var _this=this,url="/v2/mlAnomalyAlarm/relatedAsset";if(this.details.alarm.resource.id>0){if(url+="?resourceId=".concat(this.details.alarm.resource.id),url+="&parentAlarmId=".concat(this.details.alarm.id),this.dateObj&&this.dateObj.operatorId){var operatorId=this.dateOperator;url+=NewDateHelper/* default */.Z.isValueRequired(operatorId)?"&dateOperator=".concat(operatorId,"&dateOperatorValue=").concat(this.dateValue):"&dateOperator=".concat(operatorId)}var promise=this.$http.get(url).then((function(response){0===response.data.responseCode&&(_this.parentRelatedAssets=response.data.result.alarms,_this.parentRelatedAssets.length>0&&_this.parentRelatedAssets.forEach((function(d){_this.loadAlarmInsightsResource(d)})))}));Promise.all([promise]).finally((function(){return _this.loading=!1}))}},changeDateFilter:function(dateFilter){this.dateObj=dateFilter,
// TODO...use alarmbarmixin for booleancard and alarminsight
this.localDateFormat.includes(dateFilter.operatorId)?(this.dateOperator=dateFilter.operatorId,this.dateValue=null):(this.dateOperator=20,this.dateValue=dateFilter.value.join()),this.loadRCAReport(),this.loadParentRelatedAssets()},openRcaAlarm:function(id){var url="/app/fa/anomalies/all/"+id+"/summary";this.$router.replace(url)},loadRCAReport:function(){if(this.loading=!0,this.details.alarm){var url="v2/mlAnomalyAlarm/rca?mlAnomalyAlarmId="+this.details.alarm.id;if(this.dateObj&&this.dateObj.operatorId){var operatorId=this.dateOperator;this.dateValue=this.dateObj.value.join(),url+=NewDateHelper/* default */.Z.isValueRequired(operatorId)?"&dateOperator=".concat(operatorId,"&dateOperatorValue=").concat(this.dateValue):"&dateOperator=".concat(operatorId)}var _self=this;_self.$http.get(url).then((function(response){_self.loading=!1,_self.rcaAlarms=response.data.result.mlRcaAlarms,_self.rcaAlarms.length>0&&_self.rcaAlarms.forEach((function(d){_self.$set(d,"analyticsConfig",null),_self.$set(d,"analyticsConfig",{alarmId:d.latestAlarmOccurrence.id,dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(_self.dateOperator,_self.dateValue),hidechartoptions:!0,hidetabular:!0,hidedatepicker:!0,hidecharttypechanger:!0,fixedChartHeight:300,showAlarms:!1,isFromAlarmSummary:!0,chartType:"line",period:20,size:{width:_self.$el.clientWidth+100},axis:{y:{show:!1}},colors:{A:"#39c2b0",B:"#c7d1e9"},axes:{A:"y",B:"y"},xFormat:"MM-DD-YYYY HH",pointShowRule:{
//based on the dataRange object so it will custamize the rule show options
offset:25,operationOn:"hour",period:"hourly",show:!0},point:{show:!1},disbaleNiceTickMarks:!0,intersections:[{from:{point:"B",color:"red",disable:!1,patter:"",class:"above"},to:{point:"A",color:"blue",disable:!1,patter:"",class:"below"},context:{id:"rcabounds-"+d.latestAlarmOccurrence.id,class:"rcabounds"}}]}),_self.loadAlarmInsights(d)}))})).catch((function(){}))}},loadRelatedAssets:function(rca){var _this2=this,url="/v2/mlAnomalyAlarm/relatedAsset";if(rca.resource.id>0){if(this.$set(rca,"relatedAsset",[]),url+="?resourceId=".concat(rca.resource.id),url+="&parentAlarmId=".concat(this.details.alarm.id),this.dateObj&&this.dateObj.operatorId){var operatorId=this.dateOperator;url+=NewDateHelper/* default */.Z.isValueRequired(operatorId)?"&dateOperator=".concat(operatorId,"&dateOperatorValue=").concat(this.dateValue):"&dateOperator=".concat(operatorId)}var promise=this.$http.get(url).then((function(response){0===response.data.responseCode&&(_this2.$set(rca,"relatedAsset",response.data.result.alarms),rca.relatedAsset.forEach((function(d){_this2.loadAlarmInsightsResource(d)})))}));Promise.all([promise]).finally((function(){return _this2.loading=!1}))}},loadAlarmDetails:function(rca){var _this3=this,url="/v2/alarm/get?id=".concat(rca.alarm.id),promise=this.$http.get(url).then((function(response){0===response.data.responseCode&&(_this3.$set(rca,"alarmDetails",response.data.result),_this3.$set(rca,"analyticsConfig",null),_this3.$set(rca,"analyticsConfig",{alarmId:response.data.result.latestAlarmOccurrence.id,dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(self.dateOperator,self.dateValue),hidechartoptions:!0,hidetabular:!0,hidecharttypechanger:!0,showAlarms:!1,fixedChartHeight:300,isFromAlarmSummary:!0}))}));Promise.all([promise]).finally((function(){return _this3.loading=!1}))},loadAlarmInsightsResource:function(d){var _this4=this;this.loading=!0;var url="/v2/alarms/insights";if(url+="?assetId=".concat(d.resource.id),url+="&parentAlarmId=".concat(this.details.alarm.id),this.dateObj&&this.dateObj.operatorId){var operatorId=this.dateOperator;url+=NewDateHelper/* default */.Z.isValueRequired(operatorId)?"&dateOperator=".concat(operatorId,"&dateOperatorValue=").concat(this.dateValue):"&dateOperator=".concat(operatorId)}var promise=this.$http.get(url).then((function(response){0===response.data.responseCode&&_this4.$set(d,"ruleBar",response.data.result.alarms)}));Promise.all([promise]).finally((function(){return _this4.loading=!1}))},loadAlarmInsights:function(rca){var _this5=this;this.loading=!0,rca.rcaloading=!0;var url="/v2/mlAnomalyAlarm/rcaInsights",ruleId=rca.alarm.id;if(url+="?alarmId=".concat(ruleId),url+="&parentAlarmId=".concat(this.details.alarm.id),this.dateObj&&this.dateObj.operatorId){var operatorId=this.dateOperator;url+=NewDateHelper/* default */.Z.isValueRequired(operatorId)?"&dateOperator=".concat(operatorId,"&dateOperatorValue=").concat(this.dateValue):"&dateOperator=".concat(operatorId)}this.isRCA&&(url+="&isRca=".concat(this.isRCA)),this.$set(rca,"viewDetails",null);var promise=this.$http.get(url).then((function(response){0===response.data.responseCode?(_this5.$set(rca,"viewDetails",response.data.result.alarm[0]),rca.viewDetails&&_this5.loadRelatedAssets(rca)):_this5.list=[]})).catch((function(){return _this5.list=[]}));Promise.all([promise]).finally((function(){return _this5.loading=!1}))}}},anomalies_AnomalyRCAvue_type_script_lang_js=AnomalyRCAvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(anomalies_AnomalyRCAvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AnomalyRCA=component.exports},
/***/83322:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewChartSettings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FNewChartSettings.vue?vue&type=template&id=bb085188
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{width:250,"popper-class":"pT0 pB0"},model:{value:_vm.popoverVisibility,callback:function($$v){_vm.popoverVisibility=$$v},expression:"popoverVisibility"}},[_c("outside-click",{staticClass:"pT20 pB20",attrs:{visibility:_vm.popoverVisibility},on:{onOutsideClick:function($event){_vm.popoverVisibility=!1}}},[!1!==_vm.showChartMode?_c("div",{staticClass:"pL10 pB20"},[_c("div",{staticClass:"label-txt-black pb5"},[_vm._v("Mode")]),_c("div",{},[_c("el-radio-group",{staticClass:"fc-radio-btn chart-setting-group pT10",attrs:{disabled:_vm.disableChartMode},on:{change:_vm.onChartModeChange},model:{value:_vm.settings.chartMode,callback:function($$v){_vm.$set(_vm.settings,"chartMode",$$v)},expression:"settings.chartMode"}},[_c("el-radio",{attrs:{label:"single"}},[_vm._v("Single")]),_c("el-radio",{attrs:{label:"multi"}},[_vm._v("Multiple")])],1)],1)]):_vm._e(),!1!==_vm.showAlarm?_c("div",{staticClass:"pL10 pB20"},[_c("div",{staticClass:"label-txt-black pb5"},[_vm._v("Alarm")]),_c("div",[_c("el-radio-group",{staticClass:"chart-setting-group fc-radio-btn pT10",on:{change:function($event){return _vm.onSettingsChange("alarm")}},model:{value:_vm.settings.alarm,callback:function($$v){_vm.$set(_vm.settings,"alarm",$$v)},expression:"settings.alarm"}},[_c("el-radio",{attrs:{label:!0}},[_vm._v("Show")]),_c("el-radio",{attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("fields.properties.hideFieldTxt")))])],1)],1)]):_vm._e(),!1!==_vm.showTimePeriod?_c("div",{staticClass:"pL10 pB20"},[_c("div",{staticClass:"label-txt-black pb5"},[_vm._v("Time period")]),_c("div",[_c("el-radio-group",{staticClass:"chart-setting-group fc-radio-btn pT10",model:{value:_vm.settings.timeperiod,callback:function($$v){_vm.$set(_vm.settings,"timeperiod",$$v)},expression:"settings.timeperiod"}},[_c("el-radio",{attrs:{label:!0}},[_vm._v("Show")]),_c("el-radio",{attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("fields.properties.hideFieldTxt")))])],1)],1)]):_vm._e(),_vm.showFilterBar?_c("div",{staticClass:"pL10 pB20"},[_c("div",{staticClass:"label-txt-black pb5"},[_vm._v("Filter")]),_c("div",[_c("el-radio-group",{staticClass:"chart-setting-group fc-radio-btn pT10",on:{change:function($event){return _vm.onSettingsChange("filter")}},model:{value:_vm.settings.filterBar,callback:function($$v){_vm.$set(_vm.settings,"filterBar",$$v)},expression:"settings.filterBar"}},[_c("el-radio",{attrs:{label:!0}},[_vm._v("Show")]),_c("el-radio",{attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("fields.properties.hideFieldTxt")))])],1)],1)]):_vm._e()]),_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"mR30 pT5 chart-icon pointer flRight portfolio-equiv-icon pB8",attrs:{slot:"reference",title:"Report Settings","data-arrow":"true"},slot:"reference"},[_c("span",{on:{click:function($event){$event.stopPropagation(),_vm.popoverVisibility=!0}}},[_c("InlineSvg",{staticClass:"rotate90 fc-grey-svg2",staticStyle:{top:"2px"},attrs:{src:"svgs/equalization",iconClass:"icon icon-sm-md"}})],1)])],1)},staticRenderFns=[],NewDataFormatHelper=(__webpack_require__(169358),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(804911)),InlineSvg=__webpack_require__(586166),OutsideClick=__webpack_require__(21864),FNewChartSettingsvue_type_script_lang_js={props:["dataPoints","settings","showChartMode","showAlarm","showChart","showTable","showSafelimit","showTimePeriod","disableChartMode","showFilterBar"],data:function(){return{popoverVisibility:!1}},mixins:[NewDataFormatHelper/* default */.Z],components:{InlineSvg:InlineSvg/* default */.Z,OutsideClick:OutsideClick/* default */.Z},methods:{onChartModeChange:function(){if("multi"===this.settings.chartMode){var unitCount=this.countUnits(this.dataPoints);Object.keys(unitCount).length>1?(this.settings.autoGroup=!0,this.autoGroupDataPoints(unitCount)):this.settings.autoGroup=!1}else this.settings.autoGroup=!1,this.autoGroupDataPoints()},onToggleChart:function(){this.settings.chart||(this.settings.table=!0)},onToggleTable:function(){this.settings.table||(this.settings.chart=!0)},autoGroupDataPoints:function(unitCount){if(this.settings.autoGroup)this.groupDataPoints(unitCount,this.dataPoints);else
// remove groups enabled by autogrouping
for(var groupIndex=this.dataPoints.length-1;groupIndex>=0;groupIndex--)if("group"===this.dataPoints[groupIndex].type&&(!this.dataPoints[groupIndex].unit||!this.dataPoints[groupIndex].dataType))for(var group=this.dataPoints.splice(groupIndex,1),children=group[0].children,childIndex=children.length-1;childIndex>=0;childIndex--){var removedChild=children.splice(childIndex,1);this.dataPoints.push(removedChild[0])}},groupDataPoints:function(unitCount,dataPoints){this.dataPoints=this.groupPoints(unitCount,dataPoints)},onSettingsChange:function(option){this.$emit("onSettingsChange",option)}}},components_FNewChartSettingsvue_type_script_lang_js=FNewChartSettingsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FNewChartSettingsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewChartSettings=component.exports},
/***/270352:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewChartType}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FNewChartType.vue?vue&type=template&id=22e8ddb0
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-chart-type",staticStyle:{"margin-right":"150px",position:"absolute"}},[_vm.options?_c("span",[_c("el-popover",{attrs:{"popper-class":"chart-type-popover",width:_vm.isCombo?452:200},model:{value:_vm.typePopover,callback:function($$v){_vm.typePopover=$$v},expression:"typePopover"}},[_c("div",[_vm.isCombo?_c("div",{staticClass:"chart-type-selector pT20 pB20"},[_c("div",{staticClass:"point-type pB20 pL20 pR20 border-bottom1px"},[_c("div",{staticClass:"type-label label-txt-black bold pT10"},[_vm._v(" Default Chart ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{disabled:_vm.isRangeMode},on:{change:_vm.resetCombo},model:{value:_vm.defaultOnCombo,callback:function($$v){_vm.defaultOnCombo=$$v},expression:"defaultOnCombo"}},[_c("template",{slot:"prefix"},[_c("chart-icon",{attrs:{icon:_vm.currentChartType}})],1),_vm._l(_vm.getChartTypes(_vm.options,_vm.allPoints,"default"),(function(ctype,index){return _c("el-option",{key:index,attrs:{label:ctype.label,value:ctype.value}},[_c("span",{staticClass:"chart-icon flLeft pR5",staticStyle:{"margin-right":"5px"}},[_c("chart-icon",{attrs:{icon:ctype.value}})],1),_c("div",{staticClass:"chart-label"},[_vm._v(_vm._s(ctype.label))])])}))],2)],1),_c("ul",_vm._l(_vm.allPoints,(function(dataPoint,index){return!1!==dataPoint.visible?_c("li",{key:index,staticClass:"point-type pB20"},[_c("svg",{staticClass:"dp-circle flLeft mR5"},[_c("circle",{attrs:{cx:5,cy:5,r:5,fill:dataPoint.color}})]),_c("div",{staticClass:"flLeft type-label label-chart"},[_vm._v(" "+_vm._s(dataPoint.label)+" ")]),_c("el-select",{staticClass:"flLeft type-select",attrs:{placeholder:"Default"},model:{value:dataPoint.chartType,callback:function($$v){_vm.$set(dataPoint,"chartType",$$v)},expression:"dataPoint.chartType"}},[dataPoint.chartType?_c("template",{slot:"prefix"},[_c("chart-icon",{attrs:{icon:dataPoint.chartType}})],1):_vm._e(),_vm._l(_vm.getChartTypes(_vm.options,_vm.allPoints,"rangeGroup"===dataPoint.type?"range":"point"),(function(ctype,index){return _c("el-option",{key:index,attrs:{label:ctype.label,value:ctype.value}},[_c("span",{staticClass:"chart-icon flLeft pR5",staticStyle:{"margin-right":"5px"}},[_c("chart-icon",{attrs:{icon:ctype.value}})],1),_c("div",{staticClass:"chart-label"},[_vm._v(_vm._s(ctype.label))])])}))],2)],1):_vm._e()})),0)]):_c("div",{staticClass:"chart-type-selector",staticStyle:{width:"100%"}},[_c("ul",_vm._l(_vm.getChartTypes(_vm.options,_vm.allPoints,"all",_vm.skipTableType),(function(ctype,index){return _c("li",{key:index,class:{active:_vm.currentChartType===ctype.value},on:{click:function($event){return _vm.onTypeChange(ctype)}}},[_c("span",{staticClass:"chart-icon",staticStyle:{"margin-right":"5px"}},[_c("chart-icon",{attrs:{icon:ctype.value}})],1),_c("span",{staticClass:"chart-label"},[_vm._v(_vm._s(ctype.label))])])})),0)])]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"chart-icon pointer",staticStyle:{display:"inline-block"},attrs:{slot:"reference",title:_vm.$t("home.dashboard.change_chart"),"data-arrow":"true"},slot:"reference"},[_c("chart-icon",{attrs:{icon:_vm.currentChartType}})],1)])],1):_vm._e()])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),NewChartTypes=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(862230)),chartIcon=__webpack_require__(588),FNewChartTypevue_type_script_lang_js={props:["options","multichartkey","skipTableType"],mixins:[NewChartTypes/* default */.Z],components:{ChartIcon:chartIcon/* default */.Z},data:function(){return{typePopover:!1,defaultOnCombo:"combo"}},computed:{isRangeMode:function(){return 0!==this.options.dataPoints.filter((function(dP){return"rangeGroup"===dP.type})).length},isMultiMode:function(){return this.options&&"multi"===this.options.settings.chartMode},isCombo:function(){var _this=this,isCombo=this.isMultiMode?this.options.multichart[this.multichartkey]&&this.options.multichart[this.multichartkey].combo:this.options&&this.options.combo;return isCombo||this.allPoints.length&&this.allPoints.some((function(dp){return dp.chartType!==_this.allPoints[0].chartType}))},currentChartType:function(){return this.isMultiMode?this.isCombo?"combo":this.allPoints&&this.allPoints.length?this.allPoints[0].chartType:"area":this.options.type},allPoints:function(){var points=[];if(this.options){var dataPoints=this.$helpers.getDataPoints(this.options.dataPoints,[1,2,4],!0);if(this.isMultiMode&&this.multichartkey){var keys=this.multichartkey.split("_"),type=keys[0],multiPointName=keys[1];dataPoints=dataPoints.filter((function(dp){return"datapoint"===type||"rangeGroup"===type?dp.key===multiPointName:dp.label===multiPointName}))}dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)}))}return points}},methods:{resetCombo:function(){var _this2=this;this.typePopover=!1,this.isMultiMode?this.$set(this.options.multichart[this.multichartkey],"combo",!1):this.$set(this.options,"combo",!1),this.allPoints.forEach((function(dp){
// dp.chartType = this.isMultiMode ? this.defaultOnCombo : ''
_this2.$set(dp,"chartType",_this2.isMultiMode?_this2.defaultOnCombo:"")})),this.isMultiMode||(this.options.type=this.defaultOnCombo),this.defaultOnCombo="combo"},onTypeChange:function(ctype){var _this3=this;if(this.typePopover=!1,"table"===ctype.value)this.options.settings.chart&&(this.options.settings.chart=!1),this.options.type=ctype.value;else if(this.options.settings.chart=!0,"combo"===ctype.value){var currentType;this.isMultiMode?(this.$set(this.options.multichart[this.multichartkey],"combo",!0),currentType=this.allPoints[0].chartType):(this.$set(this.options,"combo",!0),currentType=this.options.type);var defaultType=currentType&&"pie"!==currentType&&"donut"!==currentType?currentType:"area";this.allPoints.forEach((function(dp){dp.chartType||(dp.chartType=defaultType)})),this.$nextTick((function(_){_this3.typePopover=!0}))}else this.isMultiMode?this.allPoints.forEach((function(dp){dp.chartType=ctype.value})):this.options.type=ctype.value}}},components_FNewChartTypevue_type_script_lang_js=FNewChartTypevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FNewChartTypevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewChartType=component.exports},
/***/283938:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewHeatMap}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/components/FNewHeatMap.vue?vue&type=template&id=7e6f8403
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return 0!==_vm.heatMapStore.length?_c("div",{staticClass:"height100 heatmap"},[_vm.hidecharttypechanger?_vm._e():_c("f-chart-type",{staticClass:"charttypechanger fc-new-chart-type-single",attrs:{options:this.reportObject?this.reportObject.options:null},on:{getOptions:_vm.getOptionsFromTypeChart}}),_c("div",{ref:"heatmapDiv",staticClass:"height100"})],1):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),d3=(__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(865137),__webpack_require__(976801),__webpack_require__(348727)),FChartType=__webpack_require__(294309),ReportDataUtil=__webpack_require__(760396),ckmeans_min=__webpack_require__(196009),tooltip=(__webpack_require__(114769),__webpack_require__(460895)),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),vue_runtime_esm=__webpack_require__(720144),FNewHeatMapvue_type_script_lang_js={data:function(){return{constantMargins:{top:30,right:55,bottom:100,left:55},clientWidth:980,clientHeight:620,cellWidth:50,cellHeight:30,xformat:"hours",hidecharttypechanger:!0,gridSize:0,xAlias:null,yAliasList:[],updateTimeout:null,heatMapStore:[],selectedLabel:null,groupLabels:[],defaultColors:["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"]}},mixins:[ReportDataUtil/* default */.Z],components:{FChartType:FChartType/* default */.Z},mounted:function(){this.render()},props:["resultObject","reportObject","config","width","height"],computed:{chosenColors:function(){if(this.reportObject.options.heatMapOptions){var key=this.reportObject.options.heatMapOptions.chosenColors;return this.reportObject.options.heatMapOptions.Colors[key]}return this.defaultColors},heatMapMinValue:function(){return this.reportObject.options.heatMapOptions&&null!==this.reportObject.options.heatMapOptions.minValue&&""!==this.reportObject.options.heatMapOptions.minValue?this.reportObject.options.heatMapOptions.minValue:null},heatMapMaxValue:function(){return this.reportObject.options.heatMapOptions&&null!==this.reportObject.options.heatMapOptions.maxValue&&""!==this.reportObject.options.heatMapOptions.maxValue?this.reportObject.options.heatMapOptions.maxValue:null}},methods:{render:function(){var _this=this;this.reportObject&&(this.loadHeatMapStore(),this.$nextTick((function(){if(_this.resultObject){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(_this.resultObject.report.dataPoints);try{for(_iterator.s();!(_step=_iterator.n()).done;){var dataPoint=_step.value;_this.yAliasList.push(dataPoint.aliases.actual)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.xAlias="x"}_this.drawHeatMap()})))},loadHeatMapStore:function(){this.heatMapStore=this.reportObject.options.dataPoints},resize:function(){this.rerender()},rerender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),500)},groupValues:function(minValue,maxValue,n){for(var deviation=(maxValue-minValue)/n,group=[],i=0;i<n;i++){var temp=minValue+i*deviation;group.push(temp)}return group},drawHeatMap:function(){var _this3=this;Date.now();this.$mobile&&(this.constantMargins.left=30,this.constantMargins.right=20,this.constantMargins.top=10);var _step2,width=(null!==this.width&&this.width>0?this.width:this.clientWidth)-(this.constantMargins.left+this.constantMargins.right),height=(null!==this.height&&this.height>0?this.height:this.clientHeight)-(this.constantMargins.top+this.constantMargins.bottom),dataPoints=this.resultObject.report.dataPoints,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(dataPoints);try{var _loop=function(){var dp=_step2.value,unit=(dataPoints.indexOf(dp),null!==dp.yAxis.unitStr?dp.yAxis.unitStr:" "),isContinous=5===_this3.resultObject.report.dataPoints[0].xAxis.dataType||6===_this3.resultObject.report.dataPoints[0].xAxis.dataType,dataAlias=dp.aliases.actual,yMax=_this3.resultObject.reportData.aggr[dataAlias+".max"],yMin=_this3.resultObject.reportData.aggr[dataAlias+".min"];yMin=_this3.reportObject.options.heatMapOptions&&null!==_this3.reportObject.options.heatMapOptions.minValue&&""!==_this3.reportObject.options.heatMapOptions.minValue?_this3.reportObject.options.heatMapOptions.minValue:yMin,yMax=_this3.reportObject.options.heatMapOptions&&null!=_this3.reportObject.options.heatMapOptions.maxValue&&""!==_this3.reportObject.options.heatMapOptions.maxValue?_this3.reportObject.options.heatMapOptions.maxValue:yMax,2===_this3.resultObject.report.type?"hourly"===_this3.reportObject.dateRange.period?_this3.xformat="hours":"daily"===_this3.reportObject.dateRange.period?_this3.xformat="days":_this3.xformat="hours":_this3.xformat=_this3.resultObject&&_this3.resultObject.report&&_this3.resultObject.report.hmAggr&&null!==_this3.resultObject.report.hmAggr?_this3.resultObject.report.hmAggr:"hours";var dataWithAxis=_this3.transformDataForHeatMap(_this3.reportObject,_this3.resultObject.reportData.heatMapData,"X",dp.aliases.actual,isContinous,_this3.xformat),transformedData=dataWithAxis[0],xD=dataWithAxis[1],cellWidth=width/xD.length,x=d3.scaleBand().range([0,width]).domain(xD).padding(.005),clusterData=null;2===_this3.resultObject.report.type?(_this3.hidecharttypechanger=!1,clusterData=transformedData.filter((function(data){return null!==data.value})).map((function(data){return parseFloat(data.value)})),yMin=d3.min(clusterData),yMax=d3.max(clusterData),clusterData.sort()):clusterData=transformedData.filter((function(data){return null!==data.value&&data.value>=yMin&&data.value<=yMax})).map((function(data){return data.value}));var clusters=null;if(!(clusterData.length>5)||null!==_this3.heatMapMinValue&&""!==_this3.heatMapMinValue||null!==_this3.heatMapMaxValue&&""!==_this3.heatMapMaxValue)if(null!==_this3.heatMapMinValue&&""!==_this3.heatMapMinValue||null!==_this3.heatMapMaxValue&&""!==_this3.heatMapMaxValue){var minValue=null===_this3.heatMapMinValue||""===_this3.heatMapMinValue?d3.min(clusterData):_this3.heatMapMinValue,maxValue=null===_this3.heatMapMaxValue||""===_this3.heatMapMaxValue?d3.max(clusterData):_this3.heatMapMaxValue;clusters=_this3.groupValues(minValue,maxValue,5)}
// if (clusters && clusters[4] < yMax) {
//   clusters.push(yMax)
// }
else clusters=clusterData;else clusters=(0,ckmeans_min/* default */.Z)(clusterData,5);var yData=[];"hourly"===_this3.reportObject.dateRange.period&&(["month","year","quarter"].includes(_this3.reportObject.dateRange.operationOn)||"day"===_this3.reportObject.dateRange.operationOn&&_this3.reportObject.dateRange.offset>=32)?yData=dataWithAxis[2][0]:"weeks"===_this3.xformat&&["month","year","quarter"].includes(_this3.reportObject.dateRange.operationOn)?(yData=dataWithAxis[2][0],yData.sort()):yData=dataWithAxis[2];var cellHeight=height/yData.length;cellHeight>_this3.cellHeight&&(height=_this3.cellHeight*yData.length,cellHeight=_this3.cellHeight);var y=d3.scaleBand().range([0,height]).domain(yData).padding(.005),myColor=d3.scaleLinear().range(_this3.chosenColors).domain(clusters),border=1,bordercolor="#CCCCCC";_this3.$refs["heatmapDiv"].innerHTML="";var svg=d3.select(_this3.$refs["heatmapDiv"]).append("svg").attr("width",width+_this3.constantMargins.right+_this3.constantMargins.left).attr("height",height+_this3.constantMargins.top+_this3.constantMargins.bottom).attr("border",border).attr("class",_this3.$mobile?"":"widget-heatmap").append("g").attr("transform","translate("+_this3.constantMargins.left+","+_this3.constantMargins.top+")");svg.append("rect").attr("x",0).attr("y",0).attr("height",height).attr("width",width).style("stroke",bordercolor).style("fill","none").style("stroke-width",border);if("hours"===_this3.xformat){var xAxis=_this3.$mobile?["12a","4a","8a","12p","4p","8p","11p"]:["12a","1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12p","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p"],x1=d3.scaleBand().range([0,width]).domain(xAxis).padding(.005);svg.append("g").attr("class",_this3.$mobile?"xaxis":"x axis").call(d3.axisTop(x1).tickSize([0])).append("text").attr("class","label").attr("text-anchor","start")}else if("days"===_this3.xformat&&_this3.$mobile){var _xAxis=["01","06","11","16","21","26","31"],_x=d3.scaleBand().range([0,width]).domain(_xAxis).padding(.005);svg.append("g").attr("class",_this3.$mobile?"xaxis":"x axis").call(d3.axisTop(_x).tickSize([0])).append("text").attr("class","label").attr("text-anchor","start")}else svg.append("g").attr("class",_this3.$mobile?"xaxis":"x axis").call(d3.axisTop(x).tickSize([0])).append("text").attr("class","label").attr("text-anchor","start");if("hourly"===_this3.reportObject.dateRange.period&&(["month","year","quarter"].includes(_this3.reportObject.dateRange.operationOn)||"day"===_this3.reportObject.dateRange.operationOn&&_this3.reportObject.dateRange.offset>=32)){var y1=cellHeight<20?d3.scaleBand().range([0,height]).domain(dataWithAxis[2][1]).padding(.01):d3.scaleBand().range([0,height]).domain(dataWithAxis[2][0]).padding(.01);svg.append("g").attr("class","y axis").call(d3.axisLeft(y1).tickSize([0])).append("text").attr("class","label").attr("text-anchor","end").attr("transform","translate(0,90)")}else if("weeks"===_this3.xformat&&["month","year","quarter"].includes(_this3.reportObject.dateRange.operationOn)){var _y=cellHeight<20?d3.scaleBand().range([0,height]).domain(dataWithAxis[2][1]).padding(.01):d3.scaleBand().range([0,height]).domain(dataWithAxis[2][0]).padding(.01);svg.append("g").attr("class","y axis").call(d3.axisLeft(_y).tickSize([0])).append("text").attr("class","label").attr("text-anchor","end").attr("transform","translate(0,90)")}else svg.append("g").attr("class","y axis").call(d3.axisLeft(y).tickSize([0])).append("text").attr("class","label").attr("text-anchor","end");var self=_this3;svg.selectAll().data(transformedData,(function(d){d["X"],d["Y"]})).enter().append("rect").attr("x",(function(d){return x(d["X"])})).attr("y",(function(d){return y(d["Y"])})).attr("width",x.bandwidth()>cellWidth?cellWidth:x.bandwidth()).attr("height",y.bandwidth()>cellHeight?cellHeight:y.bandwidth()).style("stroke","#CCCCCC").style("fill","none").style("stroke-width",.05).style("fill",(function(d){var c=null!==d.value?myColor(d.value):window.localStorage&&"black"===window.localStorage.theme?"#090f2e":"#FFFFFF";return null!==d.value&&d.value<yMin?c=myColor(clusters[0]):null!==d.value&&d.value>yMax&&(c=myColor(clusters[4])),c})).on("mouseover",(function(d){var tooltipData=[{label:d["xTitle"],value:moment_timezone_default()(d["originalValue"]).tz(vue_runtime_esm["default"].prototype.$timezone).format(self.getTooltipFormat())},{label:d["yTitle"],value:null!==d.value?d["value"]+" "+unit:null!==d.violated_value?d["violated_value"]+" "+unit+" (violated value)":"No data"}],tooltipConfig={position:{left:d3.event.pageX,top:d3.event.pageY},data:tooltipData,color:self.getTooltipColor(d.value,myColor,yMin,yMax,clusters)};tooltip/* default */.Z.showTooltip(tooltipConfig)})).on("mouseout",(function(d){tooltip/* default */.Z.hideTooltip()}));var svgDefs=svg.append("defs"),legendref="legendGradient"+Date.now(),mainGradient=svgDefs.append("linearGradient").attr("id",legendref);mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[0])})).attr("offset","0%"),mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[1])})).attr("offset","25%"),mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[2])})).attr("offset","50%"),mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[3])})).attr("offset","75%"),mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[4])})).attr("offset","100%");var legendContainer=svg.append("g"),legend=legendContainer.selectAll(".heatLegend").data(clusters),legendSection=legend.enter().append("g").attr("class","heatLegend"),min=_this3.getRoundedNumber(yMin,"floor"),max=_this3.getRoundedNumber(yMax,"ceil");legendSection.append("rect").attr("x",(function(d,i){return self.$mobile?0:width/4})).attr("y",(function(d){return height+40})).attr("width",self.$mobile?width:width/2).attr("height",10).style("fill","url(#"+legendref+")"),legendSection.append("text").attr("class","legendLabel").attr("x",(function(d){return self.$mobile?0:width/4})).attr("y",(function(d){return height+70})).text((function(d){return min+" "+unit})),
// let textWidth = max.node().getComputedTextLength()
// console.log("textWidth",textWidth)
legendSection.append("text").text((function(d){return max+" "+unit})).attr("class","legendLabel").attr("x",(function(d){return self.$mobile?width-this.getComputedTextLength():width/4+width/2-this.getComputedTextLength()})).attr("y",(function(d){return height+70}))};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}},getTooltipColor:function(value,myColor,yMin,yMax,clusters){var c=null!==value?myColor(value):"#FFFFFF";return null!==value&&value<yMin?c=myColor(clusters[0]):null!==value&&value>yMax&&(c=myColor(clusters[4])),c},getTooltipFormat:function(){switch(this.xformat){case"hours":return"dddd, MMM D, YYYY h a";case"days":return"dddd, MMM D, YYYY";case"weeks":return"dddd, MMM D, [W]ww gggg";default:return"LLLL"}},getOptionsFromTypeChart:function(options,ctype){
//to set the chart type based on the widget
this.config&&this.config.widget&&this.config.widget.dataOptions&&(this.config.widget.dataOptions.chartType=ctype.chartTypeInt,this.config.widget.dataOptions.chartTypeInt=ctype.chartTypeInt)}}},components_FNewHeatMapvue_type_script_lang_js=FNewHeatMapvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FNewHeatMapvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewHeatMap=component.exports},
/***/107387:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PredictionTimingsBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/components/PredictionTimingsBar.vue?vue&type=template&id=3628f290
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.localtimings&&_vm.localtimings.length?_c("div",{staticClass:"prediction-component row"},[_c("div",{staticClass:"col-12 pr-date-picker"},[_vm._m(0),_c("el-date-picker",{ref:"new-prediction-time-picker",staticClass:"date-picker flLeft",attrs:{"prefix-icon":" ","clear-icon":" ",align:"right",type:"date","value-format":"timestamp","picker-options":_vm.pickerOptions},on:{change:_vm.changedate},model:{value:_vm.newTime,callback:function($$v){_vm.newTime=$$v},expression:"newTime"}})],1),_c("div",{staticClass:"date-picker col-12"},_vm._l(_vm.localtimings,(function(time,index){return _c("div",{key:index,staticClass:"prediction-container",class:{active:_vm.getActive(time),disabled:time>=_vm.currentTime}},[_c("div",{staticClass:"prediction-cube",class:{active:_vm.getActive(time)},on:{click:function($event){return _vm.addNewTime(time)}}},[_c("div",{staticClass:"prediction-time"},[_vm._v(" "+_vm._s(_vm.formatTime(time,"h a",!1))+" ")]),_c("div",{class:{active:_vm.getActive(time)}})])])})),0)]):_vm._e()},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pr-label"},[_c("i",{staticClass:"el-icon-time"}),_vm._v(" Predicted Timing : ")])}],AnalyticsMixin=(__webpack_require__(162506),__webpack_require__(339772),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(244936)),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),NewDateHelper=__webpack_require__(105534),PredictionTimingsBarvue_type_script_lang_js={props:["config","reportObj"],mixins:[AnalyticsMixin/* default */.Z,NewDateHelper/* default */.Z],data:function(){var time=moment_timezone_default()((new Date).valueOf()).tz(this.$timezone).startOf("day").valueOf();return{showPicker:!1,localtimings:[],splitRatio:10,newTime:time,timings:[],pickerOptions:{disabledDate:function(time){return time.getTime()>(new Date).valueOf()}}}},watch:{"config.dataPoints":{handler:function(newData,oldData){this.reloadBar()},deep:!0}},computed:{currentTime:function(){return moment_timezone_default()().tz(this.$timezone).startOf("hour").valueOf()},today:function(){return moment_timezone_default()().tz(this.$timezone).startOf("day").valueOf()}},mounted:function(){this.timings=this.$helpers.cloneObject(this.config.predictionTimings),this.getFullDayTimes(!1)},methods:{removeTime:function(index){this.removePrediction(index),this.config.predictionTimings.splice(index,1),this.timings.splice(index,1)},reloadBar:function(){this.timings=this.$helpers.cloneObject(this.config.predictionTimings)},formatTime:function(date,period,enableFormating){var dateFormat=period||"DD-MM-YYY",today=moment_timezone_default()().tz(this.$timezone).startOf("day").valueOf(),yesterday=moment_timezone_default()().tz(this.$timezone).subtract(1,"day").startOf("day").valueOf();return date>yesterday&&enableFormating&&date<=today?"YESTERDAY":date>today&&enableFormating?"TODAY":moment_timezone_default()(date).tz(this.$timezone).format(dateFormat)},changeTime:function(index){var time=this.getTime(this.timings[index]);this.changePredictionTime(index,time),this.$set(this.config.predictionTimings,index,time),this.$set(this.timings,index,time)},addNewTime:function(time){time<=this.currentTime&&(this.timings.findIndex((function(rt){return rt===time}))<0?(this.timings.push(time),
// this.setDateFilter(this.timings)
this.config.predictionTimings.push(time),this.addPredictionFields(this.config)):this.removeTime(this.timings.findIndex((function(rt){return rt===time}))))},
// setDateFilter (time) {
//   if (time && time.length) {
//     let dateFilter = {}
//     time = time.sort()
//     if (time.length === 1 && time[0] < this.today) {
//       dateFilter = newDateHelper.getDatePickerObject(20, [this.$options.filters.startOfDay(time[0]), this.$options.filters.endOfDay(time[0])])
//        this.config.dateFilter = dateFilter
//     }
//     else if (time[0] < this.today) {
//       dateFilter = newDateHelper.getDatePickerObject(20, [this.$options.filters.startOfDay(time[0]), this.$options.filters.endOfDay(time[time.length - 1])])
//        this.config.dateFilter = dateFilter
//        this.config.period = 20
//     }
//   }
// },
getActive:function(time){return!(this.timings.findIndex((function(rt){return rt===time}))<0)&&(this.timings.findIndex((function(rt){return rt===time}))>-1||void 0)},addTime:function(){var time=this.getTime(this.newTime);this.config.predictionTimings.push(time),this.timings.push(time),this.newTime=null,this.addPredictionFields(this.config)},getTime:function(time){return this.$options.filters.startOfHour(this.$helpers.getTimeInOrg(time))},getDpIndexes:function(predictionIndex){var oldTime=this.config.predictionTimings[predictionIndex],indexes=[];return this.config.dataPoints.forEach((function(point,idx){point.prediction&&point.predictedTime===oldTime&&indexes.push(idx)})),indexes},selectPredictedTime:function(){this.config.predictionTimings=this.timings},removePrediction:function(index){var _this=this,indexes=this.getDpIndexes(index);indexes.forEach((function(idx){_this.config.dataPoints.splice(idx,1)}))},changePredictionTime:function(index,newTime){var _this2=this,indexes=this.getDpIndexes(index);indexes.forEach((function(idx){_this2.$set(_this2.config.dataPoints[idx],"predictedTime",newTime)}))},changedate:function(){this.getFullDayTimes()},getFullDayTimes:function(mounted){for(var timings=[],time=moment_timezone_default()(this.newTime).tz(this.$timezone).valueOf(),i=0;i<24;i++)timings.push(this.$options.filters.nextHour(this.$helpers.getTimeInOrg(time),i));this.localtimings=this.$helpers.cloneObject(timings)}}},components_PredictionTimingsBarvue_type_script_lang_js=PredictionTimingsBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PredictionTimingsBarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PredictionTimingsBar=component.exports},
/***/515326:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return RangeChartDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/components/RangeChartDialog.vue?vue&type=template&id=58e68532
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{visible:_vm.visibility,title:"Range chart",width:"40%","append-to-body":!0,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function($event){_vm.visibility=$event},keydown:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"esc",27,$event.key,["Esc","Escape"])?null:_vm.closeRangeDialog.apply(null,arguments)}}},[_c("div",{staticClass:"height400 pB80"},[_c("el-button",{attrs:{type:"primary"},on:{click:function($event){return _vm.addNewRangeTemplate()}}},[_vm._v("New range point")]),_vm.showNewRangeTemplate?_c("div",[_c("div",[_c("el-row",[_c("el-col",{attrs:{span:24}},[_vm._v(" Avg: "),_c("el-select",{attrs:{clearable:""},on:{clear:function($event){return _vm.clearPoint("avg")},change:function($event){return _vm.setPointMeta($event,"avg")}},model:{value:_vm.rangeTemplate["avg"]["clientId"],callback:function($$v){_vm.$set(_vm.rangeTemplate["avg"],"clientId",$$v)},expression:"rangeTemplate['avg']['clientId']"}},_vm._l(_vm.filteredDataPoints,(function(dataPointAvg,dataPointAvgIdx){return!0===dataPointAvg.show?_c("el-option",{key:dataPointAvgIdx,attrs:{label:dataPointAvg.name,value:dataPointAvg.clientId}}):_vm._e()})),1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:12}},[_vm._v(" Min: "),_c("el-select",{attrs:{clearable:"",disabled:"undefined"===typeof _vm.rangeTemplate.avg.alias},on:{clear:function($event){return _vm.clearPoint("min")},change:function($event){return _vm.setPointMeta($event,"min")}},model:{value:_vm.rangeTemplate["min"]["clientId"],callback:function($$v){_vm.$set(_vm.rangeTemplate["min"],"clientId",$$v)},expression:"rangeTemplate['min']['clientId']"}},_vm._l(_vm.filteredDataPoints,(function(dataPointMin,dataPointMinIdx){return!0===dataPointMin.show?_c("el-option",{key:dataPointMinIdx,attrs:{label:dataPointMin.name,value:dataPointMin.clientId}}):_vm._e()})),1)],1),_c("el-col",{attrs:{span:12}},[_vm._v(" Max: "),_c("el-select",{attrs:{clearable:"",disabled:"undefined"===typeof _vm.rangeTemplate.avg.alias},on:{clear:function($event){return _vm.clearPoint("max")},change:function($event){return _vm.setPointMeta($event,"max")}},model:{value:_vm.rangeTemplate["max"]["clientId"],callback:function($$v){_vm.$set(_vm.rangeTemplate["max"],"clientId",$$v)},expression:"rangeTemplate['max']['clientId']"}},_vm._l(_vm.filteredDataPoints,(function(dataPointMax,dataPointMaxIdx){return!0===dataPointMax.show?_c("el-option",{key:dataPointMaxIdx,attrs:{label:dataPointMax.name,value:dataPointMax.clientId}}):_vm._e()})),1)],1)],1),_c("el-row",[_c("el-button",{attrs:{type:"primary"},on:{click:function($event){return _vm.insertRangePoint()}}},[_vm._v(" Add ")])],1)],1)]):_vm._e(),_vm.allRanges&&0!==_vm.allRanges.length?_c("div",_vm._l(_vm.allRanges,(function(allRange,allRangeIdx){return _c("div",{key:allRangeIdx},[_c("div",[_c("div",[_c("i",{staticClass:"el-icon-edit",on:{click:function($event){return _vm.editRangeConfig(allRange)}}}),_c("i",{staticClass:"el-icon-delete",on:{click:function($event){return _vm.deleteRangeConfig(allRangeIdx)}}})]),_c("div",[_vm._v(_vm._s("Avg:"+allRange.avg.displayName))]),_c("div",[_vm._v(_vm._s("Min:"+allRange.min.displayName))]),_c("div",[_vm._v(_vm._s("Max:"+allRange.max.displayName))])])])})),0):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeRangeDialog}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.addAllRangePoints}},[_vm._v("SAVE")])],1)],1)])},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),toConsumableArray=__webpack_require__(488478),RangeChartDialogvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(169358),__webpack_require__(648324),__webpack_require__(162506),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),{props:["visibility","dataPoints","chartState"],data:function(){return{showNewRangeTemplate:!1,rangeTemplate:null,allRanges:null,usedPoints:[],lastClientId:0}},watch:{dataPoints:{handler:function(newVal,oldVal){newVal&&this.filterDataPoints()},deep:!0}},computed:{filteredDataPoints:function(){return 0!==this.dataPoints.length?this.filterDataPoints():[]}},methods:{filterDataPoints:function(){var _this=this,points=[];if(points=(0,toConsumableArray/* default */.Z)(this.dataPoints.filter((function(dp){return 4!==dp.yAxis.dataType}))),points=this.reducePoints(points),this.usedPoints&&0!==this.usedPoints.length){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.usedPoints);try{var _loop=function(){var uP=_step.value,inDp=points.filter((function(dp){return dp.metaData.parentIds&&dp.metaData.parentIds[0]===uP.parentId&&dp.yAxis&&dp.yAxis.fieldId===uP.fieldId}));0!==inDp.length?inDp[0]["clientId"]=uP.clientId:_this.deleteUsedPoint(uP)};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}return this.setBooleanFilters(points),this.setClientIds(points),points},setBooleanFilters:function(points){var _this2=this;if(this.usedPoints&&0!==this.usedPoints.length){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(points);try{var _loop2=function(){var p=_step2.value,upFilter=_this2.usedPoints.filter((function(uP){return uP.fieldId===p.yAxis.fieldId&&uP.parentId===p.metaData.parentIds[0]}));0===upFilter.length?p["show"]=!0:p["show"]=!1};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop2()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}else{var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(points);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var d=_step3.value;d["show"]=!0}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}},reducePoints:function(points){
// Object with parent and filedId key
var _step4,uniqueKeys={},dpByAlias={},finalDataPoints=[],_iterator4=(0,createForOfIteratorHelper/* default */.Z)(points);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var dp=_step4.value;dpByAlias[dp.aliases.actual]=JSON.parse(JSON.stringify(dp)),dp.metaData.parentIds&&dp.yAxis.fieldId&&(uniqueKeys.hasOwnProperty(dp.metaData.parentIds[0]+"."+dp.yAxis.fieldId)||(uniqueKeys[dp.metaData.parentIds[0]+"."+dp.yAxis.fieldId]=[]),uniqueKeys[dp.metaData.parentIds[0]+"."+dp.yAxis.fieldId].push(dp.aliases.actual))}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}for(var key in uniqueKeys){var dataPoint=dpByAlias[uniqueKeys[key][0]];uniqueKeys[key].length>1?(
// reducing to a single point
dataPoint.aliases.actual=dataPoint.aliases.actual.split(".")[0],finalDataPoints.push(dataPoint)):finalDataPoints.push(dpByAlias[uniqueKeys[key][0]])}return finalDataPoints},deleteUsedPoint:function(point){var uPointIndex=this.usedPoints.indexOf(point);if(this.usedPoints.splice(uPointIndex,1),this.allRanges){var _step5,index=[],_iterator5=(0,createForOfIteratorHelper/* default */.Z)(this.allRanges);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var range=_step5.value;for(var key in range)range[key].parentId===point.parentId&&range[key].fieldId===point.fieldId&&index.push(this.allRanges.indexOf(range))}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}for(var _i=0,_index=index;_i<_index.length;_i++){var i=_index[_i];this.allRanges.splice(i,1)}}},setClientIds:function(dataPoints){var _step6,_iterator6=(0,createForOfIteratorHelper/* default */.Z)(dataPoints);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var p=_step6.value;p.clientId||(p["clientId"]=this.lastClientId),this.lastClientId++}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}},clearPoint:function(label){this.rangeTemplate[label]={}},insertRangePoint:function(){this.showNewRangeTemplate=!1,this.allRanges||(this.allRanges=[]);var uniqueStrings=new Set;for(var key in this.rangeTemplate)"min"!==key&&"avg"!==key&&"max"!==key||uniqueStrings.add(this.rangeTemplate[key].parentId+"."+this.rangeTemplate[key].fieldId+"."+this.rangeTemplate[key].clientId);var _step7,_iterator7=(0,createForOfIteratorHelper/* default */.Z)(uniqueStrings);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var string=_step7.value,split=string.split(".");this.usedPoints.push({parentId:parseInt(split[0]),fieldId:parseInt(split[1]),clientId:parseInt(split[2])})}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}this.hideDataPoints(),this.rangeTemplate["index"]=0===this.allRanges.length?this.allRanges.length:this.allRanges.length-1,this.allRanges.push(this.rangeTemplate),this.rangeTemplate=null},hideDataPoints:function(uniqueStrings){var _step8,_this3=this,_iterator8=(0,createForOfIteratorHelper/* default */.Z)(this.usedPoints);try{var _loop3=function(){var dP=_step8.value,mDataPoint=_this3.dataPoints.filter((function(mDp){return mDp.yAxis.fieldId===dP.fieldId&&mDp.metaData.parentIds[0]===dP.parentId}));0!==mDataPoint.length&&(mDataPoint["show"]=!1)};for(_iterator8.s();!(_step8=_iterator8.n()).done;)_loop3()}catch(err){_iterator8.e(err)}finally{_iterator8.f()}},deleteRangeConfig:function(rangeConfigIdx){var _this4=this,dataPointKeys=new Set;for(var key in this.allRanges[rangeConfigIdx])"min"!==key&&"max"!==key&&"avg"!==key||dataPointKeys.add(this.allRanges[rangeConfigIdx][key].parentId+"."+this.allRanges[rangeConfigIdx][key].fieldId);var _step9,_iterator9=(0,createForOfIteratorHelper/* default */.Z)(dataPointKeys.values());try{var _loop4=function(){var uKey=_step9.value,split=uKey.split("."),usedPoint=_this4.usedPoints.filter((function(uP){return uP.fieldId===parseInt(split[1])&&uP.parentId===parseInt(split[0])}));if(0!==usedPoint.length){var index=_this4.usedPoints.indexOf(usedPoint[0]);_this4.usedPoints.splice(index,1)}};for(_iterator9.s();!(_step9=_iterator9.n()).done;)_loop4()}catch(err){_iterator9.e(err)}finally{_iterator9.f()}this.rangeTemplate&&this.rangeTemplate.index===rangeConfigIdx&&(this.rangeTemplate=null),this.allRanges.splice(rangeConfigIdx,1)},editRangeConfig:function(rangeConfig){this.rangeTemplate=rangeConfig,this.showNewRangeTemplate=!0},setPointMeta:function(event,label,dp){var dataPoint=this.filteredDataPoints.filter((function(point){return point.clientId===parseInt(event)}));if(0!==dataPoint.length){var alias=dataPoint[0].aliases.actual;if("avg"===label)0===Object.keys(this.rangeTemplate.min).length&&0===Object.keys(this.rangeTemplate.max).length&&(this.$set(this.rangeTemplate.min,"clientId",event),this.$set(this.rangeTemplate.max,"clientId",event),this.rangeTemplate.min["fieldId"]=dataPoint[0].yAxis.fieldId,this.rangeTemplate.max["fieldId"]=dataPoint[0].yAxis.fieldId,this.rangeTemplate.min["displayName"]=dataPoint[0].name,this.rangeTemplate.max["displayName"]=dataPoint[0].name,this.rangeTemplate.min["alias"]=alias+".min",this.rangeTemplate.max["alias"]=alias+".max",this.rangeTemplate.min["aggr"]=4,this.rangeTemplate.max["aggr"]=5,this.rangeTemplate.min["parentId"]=dataPoint[0].metaData.parentIds[0],this.rangeTemplate.max["parentId"]=dataPoint[0].metaData.parentIds[0]),this.rangeTemplate.avg["fieldId"]=dataPoint[0].yAxis.fieldId,this.rangeTemplate.avg["parentId"]=dataPoint[0].metaData.parentIds[0],this.rangeTemplate.avg["aggr"]=2,this.rangeTemplate.avg["alias"]=alias+".avg";else if("min"===label){this.$set(this.rangeTemplate.min,"clientId",event),this.$set(this.rangeTemplate.min,"fieldId",dataPoint[0].yAxis.fieldId);var centrePointAlias=this.rangeTemplate.avg.alias.split(".");this.rangeTemplate.min["alias"]=centrePointAlias[0]+".min",this.rangeTemplate.min["fieldId"]=dataPoint[0].yAxis.fieldId,this.rangeTemplate.min["aggr"]=4}else{this.$set(this.rangeTemplate.max,"clientId",event),this.$set(this.rangeTemplate.max,"fieldId",dataPoint[0].yAxis.fieldId);var _centrePointAlias=this.rangeTemplate.avg.alias.split(".");this.rangeTemplate.max["alias"]=_centrePointAlias[0]+".max",this.rangeTemplate.max["fieldId"]=dataPoint[0].yAxis.fieldId,this.rangeTemplate.max["aggr"]=5}this.rangeTemplate[label].displayName=dataPoint[0].name,this.rangeTemplate[label].parentId=dataPoint[0].metaData.parentIds[0]}},addNewRangeTemplate:function(){var rangeTemplate={min:{},max:{},avg:{}};this.rangeTemplate=rangeTemplate,this.showNewRangeTemplate=!0},closeRangeDialog:function(){this.showNewRangeTemplate=!1,this.rangeTemplate=null,this.$emit("update:visibility",!1)},addAllRangePoints:function(){var _step10,allDataPoints=(0,toConsumableArray/* default */.Z)(this.filteredDataPoints),_iterator10=(0,createForOfIteratorHelper/* default */.Z)(this.usedPoints);try{var _loop5=function(){var usedPoint=_step10.value,point=allDataPoints.filter((function(f){return f.metaData.parentIds[0]+""+f.yAxis.fieldId===usedPoint.parentId+""+usedPoint.fieldId}));0!==point.length&&allDataPoints.splice(allDataPoints.indexOf(point[0]),1)};for(_iterator10.s();!(_step10=_iterator10.n()).done;)_loop5()}catch(err){_iterator10.e(err)}finally{_iterator10.f()}this.$emit("rangePoints",this.allRanges,allDataPoints),this.closeRangeDialog()}}}),components_RangeChartDialogvue_type_script_lang_js=RangeChartDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_RangeChartDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,RangeChartDialog=component.exports},
/***/937376:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewAnalyticsReportV1}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/newTools/v1/FNewAnalyticsReportV1.vue?vue&type=template&id=1fa73ec3&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"analytics-section mT20 height100"},[_c("div",{staticClass:"new-analytics-filter-section"},[_vm.config.hidedatepicker?_vm._e():_c("new-date-picker",{ref:"newDatePicker",staticClass:"filter-field date-filter-comp inline",attrs:{zone:_vm.$timezone,dateObj:_vm.config.dateFilter,isDateFixed:_vm.config.applyReportDate},on:{date:_vm.setDateFilter}}),this.reportObj&&this.reportObj.options&&!0===this.reportObj.options.settings.timeperiod&&[1,4].includes(_vm.config.mode)?_c("div",{staticClass:"chart-icon pointer flRight pB8 el-popover__reference",staticStyle:{"margin-right":"120px"}},[_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"period-select width20 fc-input-full-border2 ",attrs:{placeholder:"Period",title:"Time period","data-arrow":"true"},on:{change:_vm.onPeriodChange},model:{value:_vm.config.period,callback:function($$v){_vm.$set(_vm.config,"period",$$v)},expression:"config.period"}},_vm._l(_vm.getAvailablePeriods,(function(period,index){return _c("el-option",{key:index,attrs:{label:period.name,value:period.value,disabled:!period.enable}})})),1)],1):_vm._e(),_vm.showTemplateFilter&&_vm.resultObj&&_vm.resultObj.report&&_vm.resultObj.report.currentTemplate&&_vm.resultObj.report.currentTemplate.show?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-h35 fc-report-label-position",attrs:{filterable:""},on:{change:_vm.changeParentForTemplate},model:{value:_vm.resultObj.report.currentTemplate.parentId,callback:function($$v){_vm.$set(_vm.resultObj.report.currentTemplate,"parentId",$$v)},expression:"resultObj.report.currentTemplate.parentId"}},_vm._l(_vm.resultObj.report.currentTemplate.chooseValues,(function(asset,assetIdx){return _c("el-option",{key:assetIdx,attrs:{value:asset.id,label:asset.name}})})),1)],1):_vm._e(),!_vm.config.hidechartoptions&&_vm.reportObj&&!0===!_vm.isRegression?_c("f-chart-settings",{attrs:{dataPoints:_vm.reportObj.options.dataPoints,settings:_vm.reportObj.options.settings,showChart:!1,showTable:!1,showChartMode:_vm.showChartMode,showTimePeriod:_vm.showTimePeriod,showAlarm:!(!_vm.reportObj.options||!_vm.reportObj.options.common||1!==_vm.reportObj.options.common.type),showSafelimit:!(!_vm.reportObj.options||!_vm.reportObj.options.common||1!==_vm.reportObj.options.common.type||"undefined"!==typeof _vm.resultObj.regression),disableChartMode:_vm.reportObj.booleanData},on:{onSettingsChange:_vm.onSettingsChange}},[_vm._v(_vm._s(_vm.showTimePeriod))]):_vm._e(),_vm.resultObj&&_vm.resultObj.report&&0!==_vm.resultObj.report.dataPoints.length&&!_vm.isRegression?_c("span"):_vm._e()],1),!_vm.$mobile&&_vm.predictive&&_vm.config.predictionTimings&&_vm.config.predictionTimings.length?_c("prediction-timings-bar",{staticClass:" prediction-timing-bar",attrs:{reportObj:_vm.reportObj,config:_vm.config}}):_vm._e(),_vm.loading?_c("spinner",{staticClass:"analytics-spinner",attrs:{show:_vm.loading,size:"80"}}):_vm.failed?_c("div",{staticStyle:{"margin-top":"30px",opacity:"0.7","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("div",[_vm._v(_vm._s(_vm.$t("home.dashboard.data_loading_failed")))])]):_vm.reportObj.data?_c("div",{staticClass:"height100"},[_vm.config.hidechart?_vm._e():_c("div",{staticClass:"height100"},[_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout&&_vm.reportObj&&"multi"===_vm.reportObj.options.settings.chartMode?_c("f-mobile-multi-chart",{ref:"multiChart",attrs:{isWidget:!!_vm.config,width:_vm.config&&_vm.config.width?_vm.config.width:null,resultObj:_vm.resultObj,height:_vm.config&&_vm.config.height?_vm.config.height:null,data:_vm.reportObj.data,options:_vm.reportObj.options,alarms:_vm.reportObj.alarms,dateRange:_vm.reportObj.dateRange,hidecharttypechanger:_vm.config&&_vm.config.widget,booleanData:_vm.reportObj.booleanData}}):_vm._e(),_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout&&_vm.reportObj&&"multi"===_vm.reportObj.options.settings.chartMode?_c("div",{staticClass:"empty-multi-chart"},[_vm._v(" Currently this chart not supported in the mobile ")]):_vm.reportObj&&"multi"===_vm.reportObj.options.settings.chartMode?_c("f-multi-chart",{ref:"multiChart",attrs:{data:_vm.reportObj.data,options:_vm.reportObj.options,alarms:_vm.reportObj.alarms,booleanData:_vm.reportObj.booleanData,dateRange:_vm.reportObj.dateRange,resultObj:_vm.resultObj,hidecharttypechanger:_vm.config.hidecharttypechanger||_vm.isRegression}}):_c("div",{staticClass:"height100"},[_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout&&!_vm.isHeatMap?_c("f-mobile-chart",{ref:"newChart",staticClass:"mobile-chart",attrs:{data:_vm.reportObj.data,options:_vm.reportObj.options,dateRange:_vm.reportObj.dateRange,resultObj:_vm.resultObj}}):_vm.isHeatMap?_vm._e():_c("f-new-chart",{ref:"newChart",attrs:{data:_vm.reportObj.data,options:_vm.reportObj.options,alarms:_vm.reportObj.alarms,dateRange:_vm.reportObj.dateRange,resultObj:_vm.resultObj,hidecharttypechanger:_vm.config.hidecharttypechanger||_vm.isRegression,fixedChartHeight:_vm.config.fixedChartHeight,config:_vm.config,showWidgetLegends:!_vm.config||_vm.config.showWidgetLegends,chartTypeTarget:_vm.chartTypeTarget}},[_c("template",{slot:"relatedAlarmBar"},[_vm._t("relatedAlarmBarLayout")],2)],2),_vm.isHeatMap?_c("FNewHeatMap",{attrs:{config:_vm.config,resultObject:_vm.resultObj,reportObject:_vm.reportObj}}):_vm._e()],1)],1),_vm.config.hidetabular?_vm._e():_c("f-tabular-report",{ref:"newTable",staticClass:"new-analytics-table mL30 mR30",class:{"regression-table-fit":_vm.isRegression},attrs:{reportObject:_vm.resultObj,reportConfig:_vm.reportObj}})],1):_c("div",{staticStyle:{"margin-top":"30px","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.empty_data"))+" "),_vm.resultObj&&_vm.resultObj.dateRange?_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm._f("formatPeriod")(_vm.resultObj.dateRange.value,"MMM DD, YYYY")))]):_vm._e()])],1),_vm.resultObj?_c("RangeChartDialog",{attrs:{visibility:_vm.showRangeChartDialog,dataPoints:_vm.resultObj.report.dataPoints},on:{"update:visibility":function($event){_vm.showRangeChartDialog=$event},rangePoints:_vm.addRangePoints}}):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),NewDatePicker=(__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(900773)),FNewchartV1vue_type_template_id_4ddd8122_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 f-singlechart mL20 mR20"},[_vm.chartTypeTarget&&!_vm.hidecharttypechanger?_c("portal",{attrs:{to:_vm.chartTypeTarget,slim:""}},[_c("f-chart-type",{attrs:{options:_vm.options}})],1):_vm.hidecharttypechanger?_vm._e():_c("f-chart-type",{staticClass:"charttypechanger fc-new--chart-type-single",attrs:{options:_vm.options}}),_vm.chartContext&&!1!==_vm.options.settings.chart?_c("div",{staticStyle:{"text-align":"center"}},[_vm.chartContext.options.legend.show&&"top"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{ref:"chartLegend",attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config}}):_vm._e(),_vm._t("relatedAlarmBar"),_vm.chartContext.options.regionConfig?_c("f-chart-title",{ref:"chartTitle",attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config,chartContext:_vm.chartContext}}):_vm._e(),_c("div",{style:_vm.isWidget?"position: relative; top: 15px;":""},[_vm.showAlarms&&_vm.showAlarmTitle?_c("div",{staticClass:"fc-alarms-chart-title"},[_vm._v(" Alarms ")]):_vm._e(),_c("div",{ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart"})]),_c("div",{staticClass:"fc-newchart-container"},[_c("div",{ref:"newChartEle",staticClass:"fc-new-chart pdf-chart",class:{"hide-y2-axis":_vm.options&&_vm.options.axis&&!1===_vm.options.axis.showy2axis}}),_vm.chartContext.options.legend.show&&"right"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{style:{width:_vm.chartContext.options.legend.width+"px"},attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config}}):_vm._e()],1),_vm.chartContext.options.legend.show&&"bottom"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{ref:"chartLegend",attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap}}):_vm._e(),_vm.showWidget?_c("f-widget-legends",{ref:"newWidget",staticClass:"widget-legends",attrs:{chart:_vm.c3.chart,reportVarianceData:_vm.resultObj?_vm.resultObj.reportData.aggr:null,data:_vm.data,options:_vm.options}}):_vm._e()],2):_vm._e()],1)},FNewchartV1vue_type_template_id_4ddd8122_staticRenderFns=[],billboard=(__webpack_require__(212826),__webpack_require__(872695)),basechart=__webpack_require__(503162),c3_helper=__webpack_require__(167021),FChartLegends=__webpack_require__(906575),FChartTitle=__webpack_require__(23369),FWidgetLegends=__webpack_require__(547301),FNewChartType=__webpack_require__(270352),JumpToHelper=__webpack_require__(921466),tooltip=__webpack_require__(460895),color_helper=__webpack_require__(794211),deepmerge=__webpack_require__(708634),FNewchartV1vue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z],props:["resultObj","isWidget","showWidgetLegends","config","chartTypeTarget"],components:{FChartLegends:FChartLegends/* default */.Z,FWidgetLegends:FWidgetLegends/* default */.Z,FChartType:FNewChartType/* default */.Z,FChartTitle:FChartTitle/* default */.Z},computed:{showWidget:function(){return"undefined"===typeof this.showWidgetLegends||!!this.config.hasOwnProperty("showWidgetLegends")&&this.config.showWidgetLegends},isRegression:function(){return!!(this.$route.path.includes("regression")||this.resultObj&&this.resultObj.regressionConfig&&0!==this.resultObj.regressionConfig.length&&!0===this.resultObj.regression)},showAlarmTitle:function(){return!this.chartContext||!this.chartContext.options||!this.chartContext.options.hideAlarmTitle}},data:function(){return{chartContext:null,chartId:Math.random().toString(36).substr(2,9),c3:{params:null,chart:null},showAlarms:!1,updateTimeout:null}},mounted:function(){this.config.hidecharttypechanger&&(this.hidecharttypechanger=!0),this.isRegression&&(this.hidecharttypechanger=!0),this.render()},beforeDestroy:function(){tooltip/* default */.Z.hideTooltip(),this.c3&&this.c3.chart&&this.c3.chart.destroy(),this.chartContext=null,this.c3.params=null,this.c3.chart=null},methods:{render:function(){var _this=this;this.data&&(this.chartContext=null,this.$nextTick((function(){_this.chartContext={},_this.chartContext.options=_this.getOptions(),_this.chartContext.dateRange=_this.dateRange,_this.chartContext.data=_this.data,_this.chartContext.xValueMode=_this.isXValueMode(_this.chartContext.options,_this.data),_this.chartContext.unitMap=_this.getUnitMap(_this.options.dataPoints),_this.chartContext.enumMap=_this.getEnumMap(_this.options.dataPoints),_this.chartContext.openAlarm=function(alarmList){if(alarmList){var _step,alarmId=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(alarmList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var a=_step.value;alarmId.push(a.id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.jumpToAlarms(alarmId)}},"pie"!==_this.chartContext.options.type&&"donut"!==_this.chartContext.options.type||(_this.chartContext.options.padding.top=20);var c3Params=c3_helper/* default */.Z.prepare(_this.chartContext);c3Params&&(c3Params.data.onclick=function(d){_this.$emit("drilldown",d)}),_this.mergeOption&&(_this.chartContext.options.padding.left=_this.mergeOption.padding.left,_this.chartContext.options.padding.right=_this.mergeOption.padding.right,_this.chartContext.options.axis.x.label.text="Month",c3Params.axis.y.label.text="No of Work Request"),_this.isWidget&&(_this.chartContext.options.legend.show?c3Params.size.height=c3Params.size.height-50:c3Params.size.height=c3Params.size.height-20,_this.options.widgetLegend.show&&(c3Params.size.height=c3Params.size.height-75),_this.resultObj&&_this.resultObj.report.userFilters&&(c3Params.size.height=c3Params.size.height-65));var self=_this;self.showAlarms=1===_this.getOptions().common.mode&&_this.getOptions().settings.alarm,_this.config&&_this.config.hasOwnProperty("showAlarms")&&(self.showAlarms=_this.config.showAlarms),self.showAlarms&&(_this.chartContext.alarms=_this.alarms,c3Params.size.height=c3Params.size.height-100);var alarmsParams=null;if(self.showAlarms&&(alarmsParams=c3_helper/* default */.Z.prepareBooleanChart(_this.chartContext,c3Params.data.json.x,_this.alarms),self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams))),_this.chartContext.options.customizeC3){var defaultOptions={},mergedOptions=deepmerge/* default */.Z.objectAssignDeep(defaultOptions,c3Params,_this.chartContext.options.customizeC3);c3Params=mergedOptions}self.$refs["newChartEle"]?(c3Params.bindto=self.$refs["newChartEle"],self.isWidget&&self.$refs["chartLegend"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegend"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(c3Params)):_this.$nextTick((function(){self.showAlarms&&self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams)),c3Params.bindto=self.$refs["newChartEle"],self.isWidget&&self.$refs["chartLegend"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegend"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(c3Params)}))})))},isXValueMode:function(options,data){if("pie"===options.type||"donut"===options.type){if(options.xColorMap)return!0;if(data&&data.x&&2===Object.keys(data).length&&data.x.length<=15){for(var colors=color_helper/* default */.Z.newColorPicker(data.x.length),xColorMap={},i=0;i<data.x.length;i++){var xVal=data.x[i];xColorMap[xVal]=options.xColorMap&&options.xColorMap[xVal]?options.xColorMap[xVal]:colors[i]}return options.xColorMap=xColorMap,!0}}return!1},reRender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),500)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.reRender()}}},components_FNewchartV1vue_type_script_lang_js=FNewchartV1vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FNewchartV1vue_type_script_lang_js,FNewchartV1vue_type_template_id_4ddd8122_render,FNewchartV1vue_type_template_id_4ddd8122_staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewchartV1=component.exports,FMobileChart=__webpack_require__(242208),FMultiChart=__webpack_require__(649206),NewDataFormatHelper=__webpack_require__(804911),AnalyticsMixin=__webpack_require__(244936),FTabularReportNew=__webpack_require__(979),FNewChartSettings=__webpack_require__(83322),FMobileMultiChart=__webpack_require__(696593),PredictionTimingsBar=__webpack_require__(107387),NewDateHelper=__webpack_require__(105534),RangeChartDialog=__webpack_require__(515326),NewReportSummaryHelper=__webpack_require__(601458),FNewHeatMap=__webpack_require__(283938),FNewAnalyticsReportV1vue_type_script_lang_js={props:["config","baseLines","readings","showChartMode","showTimePeriod","chartTypeTarget"],mixins:[NewDataFormatHelper/* default */.Z,AnalyticsMixin/* default */.Z,NewDateHelper/* default */.Z,NewReportSummaryHelper/* default */.Z],components:{NewDatePicker:NewDatePicker/* default */.Z,FNewChart:FNewchartV1,FMultiChart:FMultiChart/* default */.Z,FTabularReport:FTabularReportNew/* default */.Z,FMobileChart:FMobileChart/* default */.Z,FChartSettings:FNewChartSettings/* default */.Z,FMobileMultiChart:FMobileMultiChart/* default */.Z,PredictionTimingsBar:PredictionTimingsBar/* default */.Z,RangeChartDialog:RangeChartDialog/* default */.Z,FNewHeatMap:FNewHeatMap/* default */.Z},data:function(){return{loading:!0,predictive:!0,failed:!1,reportObj:null,resultObj:null,showRangeChartDialog:!1,showTemplateFilter:!1}},mounted:function(){this.init()},created:function(){this.$store.dispatch("loadAssetCategory")},computed:{isHeatMap:function(){return!(!this.$route||!this.$route.meta||"heatmap"!==this.$route.meta.analyticsType)},getAvailablePeriods:function(){var operationOnId=this.config.dateFilter.operationOnId,avail=[];
// avail.push({
//   name:'Week of year', // W1, W2
//   value: 16,
//   enable: true
// })
// avail.push({
//   name:'Month of year', // Jan, Feb , march
//   value: 15,
//   enable: true
// })
return avail.push({name:"High-res",value:0,enable:6===operationOnId||4!==operationOnId}),avail.push({name:"Hourly",value:20,enable:6===operationOnId||4!==operationOnId}),avail.push({name:"Daily",value:12,enable:!0}),avail.push({name:"Weekly",value:11,enable:!0}),avail.push({name:"Monthly",value:10,enable:!0}),avail.push({name:"Quarterly",value:25,enable:4===operationOnId||5===operationOnId}),avail.push({name:"Yearly",value:8,enable:4===operationOnId}),avail.push({name:"Hour of day",
// 12, 1, 2, 3
value:19,enable:!0}),avail.push({name:"Day of week",
// sun, mon
value:17,enable:!0}),avail.push({name:"Day of month",
// 1,2,3
value:18,enable:!0}),avail},isRegression:function(){return!!this.$route.path.includes("regression")}},watch:{config:{handler:function(newData,oldData){this.config.applyReportDate&&this.config.period||this.init(!1)},deep:!0},getAvailablePeriods:{handler:function(newData,oldData){var _this=this,avail=this.getAvailablePeriods,selected=avail.find((function(a){return a.value===_this.config.period&&a.enable}));if(!selected){var filterName=this.config.dateFilter.operationOn,defaultPeriod=avail.filter((function(a){return a.enable}))[0].value;"week"===filterName||"month"===filterName?defaultPeriod=12:"year"===filterName&&(defaultPeriod=10),this.config.period=defaultPeriod}},immediate:!0}},methods:{changeParentForTemplate:function(){this.config.template&&(this.config.template.parentId=this.resultObj.report.currentTemplate.parentId)},onPeriodChange:function(){if(!this.config.dataPoints.length){var filter="D";20===this.config.period?filter="W":12===this.config.period?filter="M":10===this.config.period&&(filter="Y"),this.config.dateFilter=this.getDefaultDateFilter(filter)}},addRangePoints:function(val,remainingDataPoints){var _step,ranges=["min","max","avg"],dataPoints=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(val);try{for(_iterator.s();!(_step=_iterator.n()).done;){var rangeConfig=_step.value;for(var key in rangeConfig){var config={};ranges.includes(key)&&(config["parentId"]=rangeConfig[key].parentId,config["prediction"]=!1,config["aliases"]={actual:rangeConfig[key].alias},config["yAxis"]={aggr:rangeConfig[key].aggr,fieldId:rangeConfig[key].fieldId},dataPoints.push(config))}}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(remainingDataPoints);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var dataPoint=_step2.value,_config={};_config["parentId"]=dataPoint.metaData.parentIds[0],_config["prediction"]=!1,_config["aliases"]={actual:dataPoint.aliases.actual},_config["yAxis"]={aggr:dataPoint.yAxis.aggr,fieldId:dataPoint.yAxis.fieldId},dataPoints.push(_config)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}var analyticConfig=this.$helpers.cloneObject(this.config);analyticConfig.dataPoints=dataPoints,analyticConfig.period="undefined"!==typeof this.config.period&&null!==this.config.period?0===this.config.period?this.getXAggr():this.config.period:0,this.$emit("update:config",analyticConfig)},setDateFilter:function(dateFilter){this.$set(this.config,"dateFilter",dateFilter);
// this.$emit('update:config', this.config)
},init:function(){this.initChart()},resize:function(){this.$refs["newChart"]&&this.$refs["newChart"].resize(),this.$refs["multiChart"]&&this.$refs["multiChart"].resize(),this.$refs["newTable"]&&this.$refs["newTable"].resize()},getReportParams:function(){var baselines,baselineNames,_this2=this;if(this.config.baseLine&&Array.isArray(this.config.baseLine)&&this.config.baseLine.length){if(this.config.baseLine[0]>0){var bl={};bl.baseLineId=this.config.baseLine[0],this.config.baseLine.length>1&&(bl.adjustType=this.config.baseLine[1]);var blList=[];blList.push(bl),baselines=blList}}else this.config.baseLine&&this.config.baseLine>0&&(baselines=[{baseLineId:this.config.baseLine}]);baselines&&this.baseLines&&(baselineNames=[],baselines.forEach((function(baseline){var baseLineName=_this2.baseLines.find((function(bl){return bl.id===baseline.baseLineId})).name;baselineNames.push(baseLineName)})));var fields=[];if(3===this.config.mode){var _step3,parentId=[],fieldId=null,yAggr=3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(this.config.dataPoints);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var dp=_step3.value;parentId.push(dp.parentId),fieldId=dp.yAxis.fieldId,yAggr=dp.yAxis.aggr}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}fields.push({parentId:parentId,yAxis:{fieldId:fieldId,aggr:0!==this.config.period&&0===yAggr?3:yAggr},type:1,aliases:{actual:"A"}}),this.setAlias(fields,baselineNames)}else{this.setAlias(this.config.dataPoints,baselineNames);var _step4,_iterator4=(0,createForOfIteratorHelper/* default */.Z)(this.config.dataPoints);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _dp=_step4.value,metaData={};_dp.categoryId&&(metaData.categoryId=_dp.categoryId),this.config.template?fields.push({parentId:_dp.parentId?Array.isArray(_dp.parentId)?_dp.parentId:[_dp.parentId]:null,buildingId:_dp.buildingId?_dp.buildingId:-1,metaData:metaData,yAxis:{fieldId:_dp.yAxis.fieldId,aggr:_dp.yAxis.aggr},aliases:_dp.aliases,type:_dp.type>0?_dp.type:1,predictedTime:_dp.predictedTime,rule_aggr_type:null===_dp||void 0===_dp?void 0:_dp.rule_aggr_type}):fields.push({parentId:_dp.parentId?Array.isArray(_dp.parentId)?_dp.parentId:[_dp.parentId]:null,name:_dp.name,buildingId:_dp.buildingId?_dp.buildingId:-1,metaData:metaData,yAxis:_dp.yAxis,aliases:_dp.aliases,type:_dp.type>0?_dp.type:1,predictedTime:_dp.predictedTime,moduleName:_dp.reportModuleName})}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}if(this.config.sorting&&(6===this.config.mode||7===this.config.mode||8===this.config.mode)&&(this.config.sorting.orderByFunc||this.config.sorting.limit)){var sortByField=this.config.sorting.sortByField;if(sortByField){var _field=fields.find((function(f){return f.yAxis.fieldId===sortByField}));_field||(sortByField=null)}sortByField||(sortByField=fields[0].yAxis.fieldId,this.config.sorting.sortByField=fields[0].yAxis.fieldId);var field=null;sortByField?field=fields.find((function(f){return f.yAxis.fieldId===sortByField})):this.config.dataPoints.length<=1&&(field=fields[0]),field&&(field.defaultSortPoint=!0,this.config.sorting.orderByFunc&&(field.orderByFunc=this.config.sorting.orderByFunc),this.config.sorting.limit&&(field.limit=this.config.sorting.limit))}this.config.template&&null!==this.config.template.parentId&&fields.forEach((function(d){d.parentId=[_this2.config.template.parentId]}));var params={mode:this.config.mode,startTime:this.config.dateFilter.value[0],endTime:this.config.dateFilter.value[1],xAggr:1===this.config.mode||3===this.config.mode||4===this.config.mode||5===this.config.mode?this.config.period:0,fields:JSON.stringify(fields),transformWorkflow:this.config.transformWorkflow};if(this.reportObj&&this.reportObj.options&&this.reportObj.options.settings?(params.showAlarms=this.reportObj.options.settings.alarm,params.showSafeLimit=this.reportObj.options.settings.safelimit):this.config.savedReport?(params.showAlarms=this.config.savedReport.showAlarms,params.showSafeLimit=this.config.savedReport.showSafeLimit):params.showSafeLimit=!0,window.fetchMarkedAlso&&(params.shouldIncludeMarked=!0),baselines&&(params.baseLines=JSON.stringify(baselines)),this.config.filters&&this.config.filters.xCriteriaMode)if(params.xCriteriaMode=this.config.filters.xCriteriaMode,this.config.filters.parentId&&this.config.filters.parentId.length)params.parentId=this.config.filters.parentId;else{var categoryId=this.config.filters.assetCategory;if(!categoryId||!categoryId.length){categoryId=[];var _step5,_iterator5=(0,createForOfIteratorHelper/* default */.Z)(this.config.dataPoints);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _dp2=_step5.value;-1===categoryId.indexOf(_dp2.categoryId)&&categoryId.push(_dp2.categoryId)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}categoryId.length&&(params.assetCategory=categoryId),this.config.filters.spaceId&&this.config.filters.spaceId.length&&(params.spaceId=this.config.filters.spaceId)}return this.$route.query&&this.$route.query.alarmId&&(params.alarmId=parseInt(this.$route.query.alarmId),params.showAlarms=!0),params},initChart:function(){var self=this;self.loading=!0,self.failed=!1;var apiURL=this.config.api?this.config.api:"/v2/report/readingReport",params=null;this.config.alarmId&&(apiURL="/v2/report/fetchReadingsFromAlarm",params={alarmId:this.config.alarmId,mode:1,xAggr:this.config.period||0,startTime:this.config.dateFilter.value[0],endTime:this.config.dateFilter.value[1],showAlarms:!0}),this.config.readingRuleId&&(params.readingRuleId=this.config.readingRuleId),this.config.isWithPrerequsite&&(params.isWithPrerequsite=this.config.isWithPrerequsite),params||(params=self.getReportParams()),this.config.template&&this.config.template.show&&(apiURL=apiURL+"?templateString="+encodeURIComponent(JSON.stringify(this.config.template))),this.config.analyticsType&&(params.analyticsType=this.config.analyticsType),params.newFormat=!0,self.$http.post(apiURL,params).then((function(response){var result=response.data.result;if(result.xAggr=params.xAggr,result.mode=params.mode,self.config.analyticsType&&(result.report.analyticsType=self.config.analyticsType),self.config.filters&&(result.filters=self.config.filters),self.config.sorting&&(result.sorting=self.config.sorting),self.config.applyReportDate?(self.config.dateFilter=result.dateRange=NewDateHelper/* default */.Z.getDatePickerObject(self.config.dateFilter.operatorId,result.report.dateValue),self.$nextTick((function(){self.$refs.newDatePicker.loadFromObject()}))):result.dateRange=self.config.dateFilter,self.reportObj&&!self.config.alarmId?(result.report.chartState=self.reportObj.options,result.report.tabularState=self.reportObj.params.tabularState):self.config.savedReport&&(result.report.chartState=self.config.savedReport.chartState,result.report.tabularState=self.config.savedReport.tabularState),self.reportObj=self.prepareReport(result),self.config.customizeC3&&self.reportObj.options&&(self.reportObj.options["customizeC3"]=self.config.customizeC3),self.config.customizeChartOptions&&self.reportObj.options&&(self.reportObj.options=deepmerge/* default */.Z.objectAssignDeep(self.reportObj.options,self.config.customizeChartOptions)),self.config.template){var currentTemplate=JSON.parse(JSON.stringify(self.config.template)),filters=self.getFiltersFromCriteria(currentTemplate);self.loadReportTemplateValues(currentTemplate,filters).then((function(){currentTemplate.parentId=null===currentTemplate.parentId?currentTemplate.defaultValue:currentTemplate.parentId,self.$set(self.resultObj.report,"currentTemplate",currentTemplate),self.showTemplateFilter=!0}))}(self.config.isFromAlarmSummary||self.$route.query&&self.$route.query.isFromAlarmSummary&&!self.resultObj)&&self.reportObj.booleanData&&(self.reportObj.options.dataPoints=self.groupNonBooleanPoints(self.reportObj.options.dataPoints)),(self.$route.query&&self.$route.query.alarmId||self.config.alarmId)&&(self.reportObj.options.settings.alarm=!0),self.config.alarmId&&"undefined"!=typeof self.config.showAlarmBar&&(self.reportObj.options.settings.alarm=self.config.showAlarmBar),self.resultObj=result,self.reportObj.params=params,self.reportObj.tableConfig=self.config.tableConfig,self.reportObj.alarms=self.prepareBooleanReport(result.reportData.aggr),self.config.alarmId&&(self.reportObj.alarms.barSize="medium"),self.config.regionConfig&&(self.reportObj.options.regionConfig=self.config.regionConfig),self.config.hideDataPoints&&(self.reportObj.options.hideDataPoints=self.config.hideDataPoints),self.config.hasOwnProperty("disbaleNiceTickMarks")&&(self.reportObj.options.disbaleNiceTickMarks=self.config.disbaleNiceTickMarks),self.config.chartType&&(self.reportObj.options.chartType=self.config.chartType),self.config.diffChartConfig&&(self.reportObj.options.diffChartConfig=self.config.diffChartConfig),self.config.hideLegends&&self.reportObj.options.legend&&(self.reportObj.options.legend.show=!1),self.config.paddingOptions&&(self.reportObj.options.padding=self.config.paddingOptions),self.config.intersections&&(self.reportObj.options.intersections=self.config.intersections),self.config.point&&(self.config.pointShowRule?self.reportObj.options.point=self.pointShowRule(self.reportObj.dateRange,self.config.pointShowRule):self.reportObj.options.point=self.config.point),self.config.zoom&&(self.reportObj.options.zoom=self.config.zoom),self.config.size&&(self.config.size.width||self.config.size.height)&&(self.reportObj.options.size=self.config.size),self.config.axes&&(self.reportObj.options.axes=self.config.axes),self.reportObj.options.xFormat="MM-DD-YYYY",self.config.xFormat&&(self.reportObj.options.xFormat=self.config.xFormat),self.config.colors&&self.reportObj.options.dataPoints&&self.reportObj.options.dataPoints.length&&self.reportObj.options.dataPoints.forEach((function(rt){rt.color=self.config.colors[rt.key]})),self.config.axis&&(self.reportObj.options.fixedAxis=self.config.axis),self.reportObj.options.predictionTimings=self.config.predictionTimings,self.$emit("reportLoaded",self.reportObj,self.resultObj),self.loading=!1})).catch((function(error){error&&(self.loading=!1,self.failed=!0)}))},onSettingsChange:function(changedOption){"alarm"===changedOption?this.reportObj.alarms&&this.reportObj.alarms.regions.length||!this.reportObj.options.settings.alarm||this.init():"safelimit"===changedOption&&!this.reportObj.options.safeLimit.length&&this.reportObj.options.settings.safelimit&&this.init()}}},v1_FNewAnalyticsReportV1vue_type_script_lang_js=FNewAnalyticsReportV1vue_type_script_lang_js,FNewAnalyticsReportV1_component=(0,componentNormalizer/* default */.Z)(v1_FNewAnalyticsReportV1vue_type_script_lang_js,render,staticRenderFns,!1,null,"1fa73ec3",null)
/* harmony default export */,FNewAnalyticsReportV1=FNewAnalyticsReportV1_component.exports},
/***/754125:
/***/function(module,__unused_webpack_exports,__webpack_require__){var map={"./af":702525,"./af.js":702525,"./ar":689102,"./ar-dz":463778,"./ar-dz.js":463778,"./ar-kw":410960,"./ar-kw.js":410960,"./ar-ly":281490,"./ar-ly.js":281490,"./ar-ma":985507,"./ar-ma.js":985507,"./ar-sa":224042,"./ar-sa.js":224042,"./ar-tn":191523,"./ar-tn.js":191523,"./ar.js":689102,"./az":938365,"./az.js":938365,"./be":544860,"./be.js":544860,"./bg":709904,"./bg.js":709904,"./bm":660952,"./bm.js":660952,"./bn":709807,"./bn.js":709807,"./bo":858437,"./bo.js":858437,"./br":784557,"./br.js":784557,"./bs":979332,"./bs.js":979332,"./ca":493667,"./ca.js":493667,"./cs":276860,"./cs.js":276860,"./cv":515427,"./cv.js":515427,"./cy":158863,"./cy.js":158863,"./da":513520,"./da.js":513520,"./de":112111,"./de-at":30464,"./de-at.js":30464,"./de-ch":750701,"./de-ch.js":750701,"./de.js":112111,"./dv":494438,"./dv.js":494438,"./el":33121,"./el.js":33121,"./en-au":849197,"./en-au.js":849197,"./en-ca":753885,"./en-ca.js":753885,"./en-gb":551914,"./en-gb.js":551914,"./en-ie":880938,"./en-ie.js":880938,"./en-nz":619722,"./en-nz.js":619722,"./eo":742783,"./eo.js":742783,"./es":56820,"./es-do":559651,"./es-do.js":559651,"./es-us":146018,"./es-us.js":146018,"./es.js":56820,"./et":818686,"./et.js":818686,"./eu":831323,"./eu.js":831323,"./fa":261885,"./fa.js":261885,"./fi":263741,"./fi.js":263741,"./fo":219961,"./fo.js":219961,"./fr":802800,"./fr-ca":388121,"./fr-ca.js":388121,"./fr-ch":427979,"./fr-ch.js":427979,"./fr.js":802800,"./fy":428930,"./fy.js":428930,"./gd":695513,"./gd.js":695513,"./gl":224485,"./gl.js":224485,"./gom-latn":703878,"./gom-latn.js":703878,"./gu":25435,"./gu.js":25435,"./he":862825,"./he.js":862825,"./hi":727282,"./hi.js":727282,"./hr":402438,"./hr.js":402438,"./hu":591310,"./hu.js":591310,"./hy-am":614794,"./hy-am.js":614794,"./id":108761,"./id.js":108761,"./is":256593,"./is.js":256593,"./it":272196,"./it.js":272196,"./ja":812645,"./ja.js":812645,"./jv":471869,"./jv.js":471869,"./ka":174093,"./ka.js":174093,"./kk":919794,"./kk.js":919794,"./km":792637,"./km.js":792637,"./kn":828684,"./kn.js":828684,"./ko":94565,"./ko.js":94565,"./ky":465606,"./ky.js":465606,"./lb":472027,"./lb.js":472027,"./lo":280366,"./lo.js":280366,"./lt":327311,"./lt.js":327311,"./lv":531851,"./lv.js":531851,"./me":952700,"./me.js":952700,"./mi":673575,"./mi.js":673575,"./mk":195509,"./mk.js":195509,"./ml":429866,"./ml.js":429866,"./mr":713798,"./mr.js":713798,"./ms":526848,"./ms-my":701212,"./ms-my.js":701212,"./ms.js":526848,"./mt":863181,"./mt.js":863181,"./my":63977,"./my.js":63977,"./nb":47248,"./nb.js":47248,"./ne":891859,"./ne.js":891859,"./nl":127058,"./nl-be":66901,"./nl-be.js":66901,"./nl.js":127058,"./nn":561748,"./nn.js":561748,"./pa-in":634266,"./pa-in.js":634266,"./pl":79581,"./pl.js":79581,"./pt":687410,"./pt-br":906114,"./pt-br.js":906114,"./pt.js":687410,"./ro":138295,"./ro.js":138295,"./ru":539862,"./ru.js":539862,"./sd":59548,"./sd.js":59548,"./se":293236,"./se.js":293236,"./si":340289,"./si.js":340289,"./sk":658339,"./sk.js":658339,"./sl":574170,"./sl.js":574170,"./sq":615316,"./sq.js":615316,"./sr":668791,"./sr-cyrl":447630,"./sr-cyrl.js":447630,"./sr.js":668791,"./ss":65773,"./ss.js":65773,"./sv":731159,"./sv.js":731159,"./sw":422329,"./sw.js":422329,"./ta":267054,"./ta.js":267054,"./te":971280,"./te.js":971280,"./tet":154120,"./tet.js":154120,"./th":254679,"./th.js":254679,"./tl-ph":63270,"./tl-ph.js":63270,"./tlh":845386,"./tlh.js":845386,"./tr":664669,"./tr.js":664669,"./tzl":691434,"./tzl.js":691434,"./tzm":57217,"./tzm-latn":547665,"./tzm-latn.js":547665,"./tzm.js":57217,"./uk":969596,"./uk.js":969596,"./ur":985133,"./ur.js":985133,"./uz":349456,"./uz-latn":978737,"./uz-latn.js":978737,"./uz.js":349456,"./vi":905577,"./vi.js":905577,"./x-pseudo":464564,"./x-pseudo.js":464564,"./yo":68854,"./yo.js":68854,"./zh-cn":795817,"./zh-cn.js":795817,"./zh-hk":266634,"./zh-hk.js":266634,"./zh-tw":749292,"./zh-tw.js":749292};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=754125}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/49742.js.map