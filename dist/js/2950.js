"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[2950],{
/***/23369:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FChartTitle}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FChartTitle.vue?vue&type=template&id=1781dc98
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-new-chart-title"},[_vm.titeList&&_vm.titeList&&_vm.titeList.length&&!_vm.loading?_c("div",{staticClass:"flex-middle justify-center"},_vm._l(_vm.titeList,(function(data,index){return _c("div",{key:index,staticClass:"f-chart-mandv-title",style:_vm.getStyle(data)},[_vm._v(" "+_vm._s(data.title)+" ")])})),0):_vm._e()])},staticRenderFns=[],FChartTitlevue_type_script_lang_js={props:["chartContext","config"],data:function(){return{titeList:[],loading:!1}},mounted:function(){var self=this;this.loading=!0,setTimeout((function(){self.titeList=self.chartContext.regionsTitles,self.loading=!1}),1e3)},methods:{getStyle:function(data){return"width:"+data.diff+"px"}}},components_FChartTitlevue_type_script_lang_js=FChartTitlevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FChartTitlevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FChartTitle=component.exports},
/***/696593:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FMobileMultiChart}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FMobileMultiChart.vue?vue&type=template&id=28e74696
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_vm.c3ParamsList&&!1!==_vm.options.settings.chart?_c("div",{staticClass:"f-multichart"},[_vm.showAlarms?_c("div",{class:["mchart-child-title","mchart-boolean"]},[_vm._v(" Alarms ")]):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showAlarms,expression:"showAlarms"}],ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart"}),_vm._l(_vm.c3ParamsList,(function(c3Param,index){return _c("div",{key:index,staticClass:"f-multichart-print"},[_vm.chartContext?_c("div",{staticStyle:{"text-align":"center"}},[_vm.chartList&&_vm.chartList[index]&&_vm.chartList[index].chart&&(!_vm.chartContext.options.legend.show||c3Param.data.booleanChart)?_c("div",{staticClass:"boolean-text-style",class:["mchart-child-title",c3Param.data.booleanChart?"mchart-boolean":"mchart-non-boolean"],style:{color:c3Param.data.booleanChart?c3Param.data.booleanChart.color:""}},[_vm._v(" "+_vm._s(c3Param.label)+" ")]):_vm._e(),!_vm.chartContext.options.legend.show||c3Param.data&&c3Param.data.booleanChart?_vm._e():_c("f-mobile-chart-legends",{key:index,ref:"mobilechartLegend"+[index],refInFor:!0,attrs:{id:"mobilechartLegend_"+index,chart:_vm.chartList&&_vm.chartList[index]&&_vm.chartList[index].chart?_vm.chartList[index].chart:null,options:_vm.chartContext.options,multichart:c3Param.key,reportVarianceData:_vm.resultObj?_vm.resultObj.reportVarianceData:null,chartContext:_vm.chartContext,resultObj:_vm.resultObj}}),_c("div",{staticClass:"fc-newchart-container f-mobile-multi-chart pT10"},[_c("div",{ref:"newChartEle",refInFor:!0,staticClass:"fc-new-chart",class:{"fc-boolean-chart":c3Param.data.booleanChart,"hide-y2-axis":_vm.options&&_vm.options.multichart&&_vm.options.multichart[c3Param.key]&&_vm.options.multichart[c3Param.key].axis&&!1===_vm.options.multichart[c3Param.key].axis.showy2axis}})])],1):_vm._e()])}))],2):_vm._e()])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),createForOfIteratorHelper=__webpack_require__(566347),billboard=(__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(879288),__webpack_require__(872695)),basechart=__webpack_require__(503162),c3_helper=__webpack_require__(167021),FMobileChartLegends=__webpack_require__(38067),tooltip=__webpack_require__(460895),FMobileMultiChartvue_type_script_lang_js={mixins:[basechart/* default */.Z],props:["resultObj","isWidget","booleanData"],components:{FMobileChartLegends:FMobileChartLegends/* default */.Z},data:function(){return{chartContext:null,c3:{params:null,chart:null},c3ParamsList:null,chartList:[],showAlarms:!1,updateTimeout:null}},mounted:function(){this.render()},beforeDestroy:function(){if(tooltip/* default */.Z.hideTooltip(),this.updateTimeout&&clearTimeout(this.updateTimeout),this.chartList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.chartList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var chart=_step.value;chart.chart&&chart.chart.destroy()}}catch(err){_iterator.e(err)}finally{_iterator.f()}}this.chartContext=null,this.c3ParamsList=null,this.chartList=null},methods:{render:function(){if(this.data){this.chartContext={},this.chartContext.multichartUniqueKey=Math.random().toString(36).substr(2,9),this.chartContext.options=this.getOptions(),this.chartContext.options.isMobile=!0,this.chartContext.options.isMobileMulti=!0,this.chartContext.dateRange=this.dateRange,this.chartContext.options.axis.x.culling={max:4},this.chartContext.data=this.data,this.chartContext.booleanData=this.booleanData,this.chartContext.unitMap=this.getUnitMap(this.options.dataPoints),this.chartContext.enumMap=this.getEnumMap(this.options.dataPoints),this.showAlarms=1===this.chartContext.options.common.mode&&this.chartContext.options.settings.alarm,this.showAlarms&&(this.chartContext.alarms=this.alarms,this.chartContext.options.size.height=this.chartContext.options.size.height-100);var self=this;this.chartContext.tooltipCallback=function(d,config,title){for(var i=0;i<config.data.length;i++)self.$refs["mobilechartLegend"+[i]]&&self.$refs["mobilechartLegend"+[i]][0].showTooltip(d,config,title)},this.chartContext.tooltipHideCallback=function(d,config){var points=[];config.data.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)}));for(var i=0;i<points.length;i++)self.$refs["mobilechartLegend"+[i]]&&self.$refs["mobilechartLegend"+[i]][0].hideTooltip()},this.isWidget&&(this.chartContext.options.legend.show?this.chartContext.options.size.height=this.chartContext.options.size.height-50:this.chartContext.options.size.height=this.chartContext.options.size.height-20,this.options.widgetLegend.show&&(this.chartContext.options.size.height=this.chartContext.options.size.height-100)),this.c3ParamsList=c3_helper/* default */.Z.prepareMultichart(this.chartContext),this.chartList=[],this.$nextTick((function(){if(self.showAlarms){var alarmsParams=this.showBooleanAlarms?c3_helper/* default */.Z.prepareBooleanAlarmChart(this.chartContext,self.c3ParamsList[0].data.json.x,this.alarms):c3_helper/* default */.Z.prepareBooleanChart(this.chartContext,self.c3ParamsList[0].data.json.x,this.alarms);self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],this.$route.query&&document.getElementById("q-app")&&(alarmsParams.padding={top:10,left:45,right:15,bottom:-30},alarmsParams.size={width:document.getElementById("q-app").offsetWidth,height:47}),billboard.bb.generate(alarmsParams))}for(var i=0;i<self.c3ParamsList.length;i++){var c3Param=self.c3ParamsList[i];self.$refs["newChartEle"][i]&&(c3Param.bindto=self.$refs["newChartEle"][i],this.$route.meta.source&&"dashboard"===this.$route.meta.source&&(c3Param.size.width=document.getElementById("q-app").offsetWidth-30),
// if (
//   this.$route.meta.source &&
//   this.$route.meta.source === 'analytics' &&
//   document.getElementsByClassName('newanalytics-generater')[0]
// ) {
//   c3Param.size.height =
//     c3Param.data && c3Param.data.booleanChart
//       ? document.getElementById('q-app').offsetHeight * 0.05
//       : document.getElementById('q-app').offsetHeight * 0.3
// }
(!c3Param.data.booleanChart&&this.$route.query&&this.$route.query.reportId&&document.getElementById("q-app")||this.$route.query&&this.$route.query.analyticsConfig&&document.getElementById("q-app"))&&(c3Param.size.width=document.getElementById("q-app").offsetWidth-30,c3Param.size.height=c3Param.data&&c3Param.data.booleanChart?document.getElementById("q-app").offsetHeight*(this.$route.query&&this.$route.query&&this.$route.query.chartHeight?Number(this.$route.query.chartHeight)/100:.05):document.getElementById("q-app").offsetHeight*(this.$route.query&&this.$route.query&&this.$route.query.chartHeight?Number(this.$route.query.chartHeight)/100:.3)),c3Param=c3_helper/* default */.Z.prepareMobile(c3Param,!0),c3Param.axis.x.tick.count=4,self.chartList.push({params:c3Param,chart:billboard.bb.generate(c3Param)}))}}))}},getIndividualChartHeight:function(){var height=200;if(this.size.height){var calcHeight=this.size.height/this.chartList.length;calcHeight>=200&&(height=calcHeight)}return height},reRender:function(){var _this=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this.render()}),1e3)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.reRender()}}},components_FMobileMultiChartvue_type_script_lang_js=FMobileMultiChartvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FMobileMultiChartvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FMobileMultiChart=component.exports},
/***/649206:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FMultiChart}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FMultiChart.vue?vue&type=template&id=79e8165a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return"multi"===_vm.options.settings.chartMode||_vm.ismulti?_c("div",{staticClass:"height100"},[_vm.c3ParamsList&&!1!==_vm.options.settings.chart?_c("div",{staticClass:"f-multichart"},[_vm.showAlarms&&_vm.showAlarmTitle?_c("div",{staticClass:"fc-alarms-chart-title",style:"sensorrollupalarm"===_vm.moduleName?"color: #324056 !important;font-weight: bold;":""},[_vm._v(" "+_vm._s(_vm.$validation.isEmpty(_vm.alarms.barTitle)?"Alarms":_vm.alarms.barTitle)+" ")]):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showAlarms,expression:"showAlarms"}],ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart",on:{click:_vm.alarmDrilldown}}),_vm.relatedAlarms?_c("div",[_vm._l(_vm.relatedAlarms,(function(relAlarm,idx){return[_c("div",{key:idx,style:_vm.isWidget?"position: relative; top: 15px;":""},[_c("div",{staticClass:"fc-alarms-chart-title",staticStyle:{"text-transform":"capitalize",color:"#324056 !important"}},[_vm._v(" "+_vm._s(relAlarm?relAlarm.alarmTitle:"")+" ")]),_c("div",{ref:"relatedAlarmsChartEle",refInFor:!0,staticClass:"fc-alarms-chart pdf-chart"})])]}))],2):_vm._e(),_vm._l(_vm.c3ParamsList,(function(c3Param,index){return _c("div",{key:index,class:["f-multichart-print"]},[_vm.hidecharttypechanger||c3Param.data.booleanChart||c3Param.data.enumChart?_vm._e():_c("f-chart-type",{staticClass:"pT10",attrs:{options:_vm.options,multichartkey:c3Param.key}}),_vm.chartContext?_c("div",{staticStyle:{"text-align":"center"}},[_vm.chartList&&_vm.chartList[index]&&_vm.chartList[index].chart&&!_vm.options.legend.show?_c("div",{staticClass:"boolean-chart-title",style:{color:"#000"}},[_vm._v(" "+_vm._s(c3Param.label)+" ")]):_vm._e(),_vm.options.legend.show?_c("f-chart-legends",{ref:"chartLegend",refInFor:!0,class:{"boolean-chart":c3Param.data.booleanChart||c3Param.data.enumChart},attrs:{chart:_vm.chartList&&_vm.chartList[index]&&_vm.chartList[index].chart?_vm.chartList[index].chart:null,options:_vm.options,multichart:c3Param.key,config:_vm.config},on:{removeFilter:_vm.removeFilter}}):_vm._e(),_c("div",{staticClass:"fc-newchart-container"},[_c("div",{ref:"newChartEle",refInFor:!0,staticClass:"fc-new-chart",class:{"fc-boolean-chart":c3Param.data.booleanChart||c3Param.data.enumChart,"hide-y2-axis":_vm.options&&_vm.options.multichart&&_vm.options.multichart[c3Param.key]&&_vm.options.multichart[c3Param.key].axis&&!1===_vm.options.multichart[c3Param.key].axis.showy2axis}})])],1):_vm._e()],1)})),_c("f-widget-legends",{ref:"newWidget",staticClass:"widget-legends",attrs:{reportVarianceData:_vm.resultObj?_vm.resultObj.reportData.aggr:null,data:_vm.data,options:_vm.options}})],2):_vm._e()]):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),billboard=(__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(241830),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(872695)),basechart=__webpack_require__(503162),c3_helper=__webpack_require__(167021),FChartLegends=__webpack_require__(906575),FWidgetLegends=__webpack_require__(547301),JumpToHelper=__webpack_require__(921466),FChartType=__webpack_require__(294309),tooltip=__webpack_require__(460895),validation=__webpack_require__(990260),FMultiChartvue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z],props:["resultObj","isWidget","booleanData","booleanAlarmsData","config","ismulti","relatedAlarms","alarms","moduleName"],components:{FChartLegends:FChartLegends/* default */.Z,FWidgetLegends:FWidgetLegends/* default */.Z,FChartType:FChartType/* default */.Z},data:function(){return{chartContext:null,c3:{params:null,chart:null},c3ParamsList:null,chartList:[],showAlarms:!1,showBooleanAlarms:!1,updateTimeout:null}},mounted:function(){this.render()},computed:{showAlarmTitle:function(){return!this.chartContext||!this.chartContext.options||!this.chartContext.options.hideAlarmTitle}},beforeDestroy:function(){if(tooltip/* default */.Z.hideTooltip(),this.updateTimeout&&clearTimeout(this.updateTimeout),this.chartList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.chartList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var chart=_step.value;chart.chart&&chart.chart.destroy()}}catch(err){_iterator.e(err)}finally{_iterator.f()}}this.chartContext=null,this.c3ParamsList=null,this.chartList=null},methods:{render:function(){var _this=this;if(this.data){var chartContext={};chartContext.multichartUniqueKey=Math.random().toString(36).substr(2,9),chartContext.options=this.getOptions(),chartContext.dateRange=this.dateRange,chartContext.data=Object.freeze(this.data),this.resultObj&&this.resultObj.Readingdp&&(chartContext.Readingdp=this.resultObj.Readingdp),this.resultObj&&(this.resultObj.scatterConfig&&(chartContext.scatterConfig=this.resultObj.scatterConfig,chartContext.xMap=this.resultObj.xMap),this.resultObj.groupByMetrics&&(chartContext.groupByMetrics=!0)),chartContext.openAlarm=function(alarmList){if(alarmList){var _step2,alarmId=[],_iterator2=(0,createForOfIteratorHelper/* default */.Z)(alarmList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var a=_step2.value;alarmId.push(a.id)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}_this.$mobile||_this.jumpToAlarmsNew(alarmId)}},chartContext.booleanData=Object.freeze(this.booleanData),chartContext.unitMap=this.getUnitMap(this.options.dataPoints),chartContext.enumMap=this.getEnumMap(this.options.dataPoints),this.showAlarms=1===chartContext.options.common.mode&&chartContext.options.settings.alarm,this.showAlarms&&(chartContext.alarms=this.alarms,chartContext.options.size.height=chartContext.options.size.height-100),this.showBooleanAlarms=this.booleanAlarmsData&&this.booleanAlarmsData.regions&&this.booleanAlarmsData.regions.length&&1===chartContext.options.common.mode&&chartContext.options.settings.booleanAlarms,this.showBooleanAlarms&&(chartContext.booleanAlarmsData=this.booleanAlarmsData,chartContext.options.size.height=chartContext.options.size.height-100),this.isWidget&&(chartContext.options.legend.show?chartContext.options.size.height=chartContext.options.size.height-50:chartContext.options.size.height=chartContext.options.size.height-20,this.options.widgetLegend.show&&(chartContext.options.size.height=chartContext.options.size.height-100)),this.c3ParamsList=c3_helper/* default */.Z.prepareMultichart(chartContext),this.resultObj&&(this.resultObj.Readingdp||this.resultObj.scatterConfig)&&(this.c3ParamsList=this.c3ParamsList.filter((function(params){return!(0,validation/* isEmpty */.xb)(params.data.axes)}))),this.chartList=[],this.chartContext=chartContext;var self=this;this.$nextTick((function(){if(self.showAlarms){var alarmsParams=this.showBooleanAlarms?c3_helper/* default */.Z.prepareBooleanAlarmChart(chartContext,self.c3ParamsList[0].data.json.x,this.alarms):c3_helper/* default */.Z.prepareBooleanChart(chartContext,self.c3ParamsList[0].data.json.x,this.alarms);if(self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(Object.freeze(alarmsParams))),self.relatedAlarms&&self.relatedAlarms.length)for(var idx in self.relatedAlarms)if(self.$refs["relatedAlarmsChartEle"]&&self.$refs["relatedAlarmsChartEle"][idx]){var relalarmsParams=c3_helper/* default */.Z.prepareBooleanChart(this.chartContext,self.c3ParamsList[0].data.json.x,self.relatedAlarms[idx]);relalarmsParams.bindto=self.$refs["relatedAlarmsChartEle"][idx],billboard.bb.generate(relalarmsParams)}}self.$nextTick((function(){for(var j=0,i=0;i<self.c3ParamsList.length;i++){var c3Param=self.c3ParamsList[i];self.$refs["newChartEle"]&&self.$refs["newChartEle"][i]&&(c3Param.bindto=self.$refs["newChartEle"][i],!c3Param.data.booleanChart&&!c3Param.data.enumChart&&self.$refs["chartLegend"]&&self.$refs["chartLegend"][j]&&(c3Param.size.height=c3Param.size.height-self.$refs["chartLegend"][j++].$el.clientHeight,self.isWidget&&self.options&&self.options.widgetLegend.show&&(c3Param.size.height=c3Param.size.height+20)),self.chartList.push({params:c3Param,chart:billboard.bb.generate(Object.freeze(c3Param))}))}}))}))}},getIndividualChartHeight:function(){var height=100;if(this.size.height){var calcHeight=this.size.height/this.chartList.length;calcHeight>=100&&(height=calcHeight)}return height},reRender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),1e3)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.reRender()},alarmDrilldown:function(){this.$emit("alarmDrilldown")},removeFilter:function(parentKey){this.$emit("removeFilters",parentKey)}}},components_FMultiChartvue_type_script_lang_js=FMultiChartvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FMultiChartvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FMultiChart=component.exports},
/***/979:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FTabularReportNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/components/FTabularReportNew.vue?vue&type=template&id=27151678
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showTable?_c("div",{class:_vm.reportConfig&&_vm.reportConfig.options&&_vm.reportConfig.options.settings&&!1!==_vm.reportConfig.options.settings.chart?"f-tabular-report-new pT30":"f-tabular-report-new",style:{position:"relative","margin-bottom":_vm.widget?"30px":"150px"}},[_vm.reportObject&&_vm.isTabularReport?[_c("HotTable",{ref:"hotTable",style:_vm.styleCss,attrs:{root:_vm.root,settings:_vm.hotSettings}})]:_vm.reportObject?_c("div",{staticClass:"height100"},[_c("div",{staticClass:"pT0 height100 scrollable"},_vm._l(_vm.multiTables,(function(table,tindex){return _c("div",{key:tindex,ref:"fTableContainer_"+tindex,refInFor:!0,staticClass:"tablular-container row full-layout-white scrollbar-style tabular-data-border",style:[{"overflow-x":(_vm.isOverflowing,"scroll"),display:"block","margin-bottom":"20px"}]},[_vm.hotSettings.data.length?_c("table",{ref:"fTable_"+tindex,refInFor:!0,staticClass:"wo-table workorder-table-list tabular-report-table"},[_c("thead",[_c("tr",[_vm.tableConfig.hideIndex?_vm._e():_c("th",[_vm._v("NO")]),tindex>0?_c("th",[_vm._v(_vm._s(_vm.multiTables[0].columns[0]))]):_vm._e(),_vm._l(table.columns,(function(header,index){return _c("th",{key:index,class:["table-col-"+index,"pL0","pR0"],attrs:{colspan:_vm.hotSettings.columns[index].columnSpan}},[_c("div",{staticClass:"inline pT20 pB20",domProps:{innerHTML:_vm._s(header)}}),_vm.hotSettings.columns[index].hasOwnProperty("subColumnHeaders")?_c("table",{staticClass:"width100 tabular-inner-table"},[_c("thead",[_c("tr",_vm._l(_vm.hotSettings.columns[index].subColumnHeaders,(function(sColumnHeader,sIdx){return _c("th",{key:sIdx+index,staticClass:"text-left tabular-inner-table-th",staticStyle:{"bordee-bottom":"0 !important"}},[_vm._v(" "+_vm._s(sColumnHeader)+" ")])})),0)])]):_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].showOptions&&!_vm.hotSettings.columns[index].hasOwnProperty("subColumnHeaders")?_c("div",{staticClass:"flRight"},[_c("f-popover",{attrs:{placement:"right",trigger:"click",width:"370",confirmTitle:"Save"},on:{save:function($event){return _vm.saveOptions(index,tindex)},show:function($event){return _vm.initOptions(index,tindex)}},model:{value:_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].popover,callback:function($$v){_vm.$set(_vm.hotSettings.columns[_vm.getColIdx(index,tindex)],"popover",$$v)},expression:"\n                      hotSettings.columns[getColIdx(index, tindex)].popover\n                    "}},[_vm.options.state&&_vm.options.state.enumMode?_c("div",{staticClass:"customize-input-block customize-radio-block"},[_c("p",{staticClass:"customize-label"},[_vm._v("Mode")]),_c("div",[_c("el-radio-group",{model:{value:_vm.options.state.enumMode,callback:function($$v){_vm.$set(_vm.options.state,"enumMode",$$v)},expression:"options.state.enumMode"}},[_c("el-radio-button",{attrs:{label:_vm.enumMode.DURATION}},[_vm._v("Duration")]),_c("el-radio-button",{attrs:{label:_vm.enumMode.PERCENT}},[_vm._v("Percent")])],1)],1),_c("el-checkbox",{staticClass:"pT10",model:{value:_vm.options.applyAll,callback:function($$v){_vm.$set(_vm.options,"applyAll",$$v)},expression:"options.applyAll"}},[_vm._v("Apply to all similar columns")])],1):_vm._e(),_c("div",{staticClass:"pointer",attrs:{slot:"reference"},slot:"reference"},[_c("i",{staticClass:"el-icon-more rotate90deg"})])])],1):_vm._e()])})),table.showExtraColumn?_c("th",{staticClass:"extra-th"}):_vm._e()],2)]),_c("tbody",{staticClass:"scroll-y"},_vm._l(_vm.hotSettings.data,(function(data,idx){return _c("tr",{key:idx,staticClass:"tablerow"},[_vm.tableConfig.hideIndex?_vm._e():_c("td",{staticClass:"tabular-data-td",staticStyle:{"text-align":"center","min-width":"49px","max-width":"49px",color:"#000000 !important","font-size":"12px","font-weight":"500","letter-spacing":"1px","text-transform":"uppercase"},style:_vm.isPrinting?"":"min-width: 49px;"},[_vm._v(" "+_vm._s(idx+1)+" ")]),tindex>0?_c("td",{staticClass:"tabular-data-td"},[_c("div",[_vm._v(_vm._s(data[0]))])]):_vm._e(),_vm._l(table.columns,(function(header,index){return[!_vm.hotSettings.columns[index].columnSpan||_vm.hotSettings.columns[index].columnSpan&&0===_vm.hotSettings.columns[index].columnSpan?_c("td",{key:index,class:["tabular-data-td","table-col-"+index,"numeric"===_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].type?"text-right":"text-left"],style:_vm.isPrinting?"":{"min-width":table.colWidth,"max-width":table.colWidth}},["html"===_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].renderer?_c("div",{domProps:{innerHTML:_vm._s(data[_vm.getColIdx(index,tindex)])}}):_c("div",[_vm._v(_vm._s(data[_vm.getColIdx(index,tindex)]))])]):_vm._l(data[_vm.getColIdx(index,tindex)],(function(i,didx){return[_c("td",{key:didx+index,class:["tabular-data-td",(_vm.hotSettings.columns[_vm.getColIdx(index,tindex)].type,"text-right")],style:_vm.isPrinting?"":{"min-width":table.colWidth,"max-width":table.colWidth}},[_vm._v(" "+_vm._s(i)+" ")])]}))]})),table.showExtraColumn?_c("td",{staticClass:"extra-td"}):_vm._e()],2)})),0)]):_vm._e()])})),0)]):_vm._e()],2):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vue_handsontable=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(976801),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(162506),__webpack_require__(634338),__webpack_require__(169358),__webpack_require__(538077),__webpack_require__(339772),__webpack_require__(891719),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(865137),__webpack_require__(648324),__webpack_require__(434284),__webpack_require__(366258)),vue_handsontable_default=__webpack_require__.n(vue_handsontable),NewDataFormatHelper=__webpack_require__(804911),FNewAnalyticsModelHelper=__webpack_require__(146371),NumberFormatHelper=__webpack_require__(415402),FPopover=__webpack_require__(507008),d3=__webpack_require__(348727),formatter=__webpack_require__(676240),picklist=__webpack_require__(961358),MAX_COLUMN=6,EnumMode={DURATION:1,PERCENT:2,GRAPH:3},FTabularReportNewvue_type_script_lang_js={components:{HotTable:vue_handsontable_default(),FPopover:FPopover/* default */.Z},mixins:[NewDataFormatHelper/* default */.Z],props:["reportObject","reportConfig","widget","showWidgetTable","hideColumn"],data:function(){return{assets:[],root:"tabular-report-hot",minWidth:225,maxWidth:335,hotSettings:{data:[],columns:[],colHeaders:!0,rowHeaders:!0,columnHeaderHeight:75,renderAllRows:!0,colWidths:"",readOnly:!0,columnSorting:!0,manualColumnResize:!0,manualColumnMove:!0,fixedColumnsLeft:1,stretchH:"none"},hotTable:null,autoRowSize:null,widgetSettings:{manualColumnResize:!1,manualColumnMove:!1,fixedColumnsLeft:0,stretchH:"all"},tableState:{
// table config to save
columns:[]},baselineMap:{},dataMap:{},initialRendered:!1,showExtraColumn:!1,isOverflowing:!1,multiTables:[],maxColumn:MAX_COLUMN,enumMode:EnumMode,options:{applyAll:!1,state:null},aggrMap:{2:"AVG",3:"SUM",4:"MIN",5:"MAX"}}},created:function(){this.loadAssetPickListData()},mounted:function(){this.init(),this.render()},updated:function(){this.isTabularReport||this.setHotColWidth()},computed:{showTable:function(){return this.reportObject&&(!this.widget||!1===this.reportConfig.options.settings.chart||this.showWidgetTable)&&this.reportConfig.options.settings.table},isTreeMap:function(){return this.reportConfig&&"treemap"===this.reportConfig.options.type},isTabularReport:function(){return this.reportConfig&&"tabular"===this.reportConfig.options.type},tableConfig:function(){return this.reportConfig&&this.reportConfig.tableConfig?this.reportConfig.tableConfig:this.reportConfig&&this.reportConfig.options&&this.reportConfig.options.table?this.reportConfig.options.table:{}},isPrinting:function(){return this.$route.query.print||this.$route.query.daterange;// daterange check temp
},styleCss:function(){return"width: 100% !important;"}},watch:{reportObject:{handler:function(newData,oldData){this.render()},deep:!0},reportConfig:{handler:function(newData,oldData){this.render()},deep:!0}},methods:{loadAssetPickListData:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"asset",skipDeserialize:!0}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this.$message.error(error.message||"Error Occured"):_this.assets=options;case 6:case"end":return _context.stop()}}),_callee)})))()},init:function(){var self=this;this.hotSettings.afterColumnMove=function(from,to){self.saveCurrentState()},this.hotSettings.afterColumnResize=function(col,width){self.saveCurrentState(),self.setTableHeight()},this.hotSettings.afterRender=function(){!self.hotTable&&self.$refs["hotTable"]&&(self.hotTable=self.$refs["hotTable"].table,self.setTableHeight()),self.initialRendered||(self.initialRendered=!0,self.setHotColWidth())}},resize:function(){this.setHotColWidth()},setTableHeight:function(){
/* this.$nextTick(() => {
        this.hotSettings.height = this.$refs['hotTable'].$el.querySelector('.ht_master .htCore').clientHeight
      }) */},setHotColWidth:function(){var _this2=this;if((!Array.isArray(this.hotSettings.colWidths)||!this.isTabularReport)&&this.showTable&&(this.$refs["hotTable"]||this.$refs["fTableContainer_0"]&&this.$refs["fTableContainer_0"][0])){var width=this.isTabularReport?this.$refs["hotTable"].$el.clientWidth-47:this.$refs["fTableContainer_0"][0].clientWidth-49;this.multiTables.length&&this.multiTables.forEach((function(table){var cols=table.columns.length,colWidth=width/cols;colWidth<_this2.minWidth?colWidth=_this2.minWidth:colWidth>_this2.maxWidth&&(colWidth=_this2.maxWidth),colWidth*cols<width&&(_this2.hideColumn?table.showExtraColumn=!_this2.hideColumn:table.showExtraColumn=!_this2.isPrinting),
// this.isOverflowing = width < this.$refs['fTable'].clientWidth - 50
table.colWidth=colWidth+"px",_this2.hotSettings.colWidths=colWidth+"px"}))}},render:function(){this.showTable&&(this.setTableStateConfig(),this.setHotConfig(),this.setTableData(),this.setMultipleTables())},
/**
     * Setting columns in table state..If state already available, order of columns will be maintained
     */
setTableStateConfig:function(){var _this3=this;this.tableState={columns:[]};var dataPoints=[],FieldsIncluded=[];this.isTreeMap?this.$helpers.getDataPoints(this.reportConfig.options.dataPoints,[1,2,4,6],!0).forEach((function(dp){"group"===dp.type?dp.children.forEach((function(children){!FieldsIncluded.includes(children.fieldId)&&children.visible&&(FieldsIncluded.push(children.fieldId),dataPoints.push(children))})):!FieldsIncluded.includes(dp.fieldId)&&dp.visible&&(FieldsIncluded.push(dp.fieldId),dataPoints.push(dp))})):this.$helpers.getDataPoints(this.reportConfig.options.dataPoints,[1,2,4,6],!0).forEach((function(dp){"group"===dp.type?dp.children.forEach((function(children){children.visible&&dataPoints.push(children)})):dp.visible&&dataPoints.push(dp)}));var aliases=[];(this.reportConfig.data.x||this.reportConfig.data.X||this.reportConfig.scatterConfig)&&aliases.push(this.reportObject.report.xAlias||"X"),
// if(this.reportConfig.options.regressionConfig){
//   let xDataPoint = this.reportObject.report.dataPoints.filter((dp) => dp.yAxis.fieldId === this.reportConfig.options.regressionConfig[0].xAxis.readingId
//     && dp.metaData.parentIds[0] === this.reportConfig.options.regressionConfig[0].xAxis.parentId
//   )
//   if(xDataPoint.length !== 0){
//     aliases.push(xDataPoint[0].aliases.actual)
//   }
// }
// else{
// }
dataPoints.forEach((function(dp){dp.pointType&&dp.pointType!==FNewAnalyticsModelHelper/* default */.Z.dataTypes().REGRESSION&&(
// if (!this.dataMap[dp.alias]) {
_this3.dataMap[dp.alias]=dp,dp.isBaseLine&&2===dp.pointType||aliases.push(dp.alias))}));var setTableStateColumns=function(aliases,idx){var _this3$tableState$col,_this3$tableState$col2,columns=aliases.map((function(alias){return{alias:alias}}));idx>=0?(_this3$tableState$col=_this3.tableState.columns).splice.apply(_this3$tableState$col,[idx,0].concat((0,toConsumableArray/* default */.Z)(columns))):(_this3$tableState$col2=_this3.tableState.columns).push.apply(_this3$tableState$col2,(0,toConsumableArray/* default */.Z)(columns))};if(this.reportObject.report.tabularState&&(this.tableState="string"===typeof this.reportObject.report.tabularState?JSON.parse(this.reportObject.report.tabularState):this.$helpers.cloneObject(this.reportObject.report.tabularState),
// Temp
this.tableState.columns.length&&!this.tableState.columns[0].alias&&(this.tableState.columns=[])),this.tableState.columns.length){
// TODO verify
if(this.tableState.columns=this.tableState.columns.filter((function(column){return aliases.includes(column.alias)})),this.tableState.columns[0].alias!==aliases[0]){var xColIdx=this.tableState.columns.findIndex((function(col){return col.alias===aliases[0]}));if(-1!==xColIdx){var xCols=this.tableState.columns.splice(xColIdx,1);this.tableState.columns.unshift(xCols[0])}else setTableStateColumns([aliases[0]],0)}if(this.tableState.columns.length!==aliases.length){var existingHeaders=this.tableState.columns.map((function(column){return column.alias})),remainingHeaders=aliases.filter((function(header){return!existingHeaders.includes(header)}));setTableStateColumns(remainingHeaders)}}else setTableStateColumns(aliases)},
/**
     * Setting Hot table configuration and column header names
     */
setHotConfig:function(){var label,_this4=this,hotColHeaders=[],hotColWidths=[],hotColumns=[],allDataPoints=FNewAnalyticsModelHelper/* default */.Z.getAllDataPoints(this.reportConfig.options),getHotType=(allDataPoints.find((function(dp){return"x"===dp.axes})),function(dataType){return 2===dataType||3===dataType?"numeric":"text"}),type="text";if(this.reportObject.report&&this.reportObject.report.reportState&&this.reportObject.report.reportState.reportResourceAliases&&"mvproject"===this.reportObject.report.reportState.reportResourceAliases.X)label="M&Vs";else if(6===this.reportObject.mode)label="Site";else if(7===this.reportObject.mode)label="Building";else if(8===this.reportObject.mode)label="Asset";else if(2===this.reportObject.mode)label="Asset";else{var xAxis=this.reportObject.report.dataPoints[0].xAxis;label=xAxis.label,type=getHotType(xAxis.dataType)}hotColHeaders.push(label.toUpperCase());var xColumn=this.tableState.columns[0];hotColumns.push({type:type,name:xColumn.alias,columnSpan:0}),xColumn.width&&hotColWidths.push(xColumn.width);for(var noOfColumns=this.tableState.columns.length,_loop=function(){var column=_this4.tableState.columns[i],dataPoint=_this4.dataMap[column.alias];if(column.displayName)hotColHeaders.push(column.displayName.toUpperCase());else{var name=(!0===dataPoint.duplicateDataPoint&&_this4.reportObject&&(_this4.reportObject.report&&0!==_this4.reportObject.report.xAggr||![1,4,"reading"].includes(_this4.reportObject.mode))?_this4.aggrMap[dataPoint.aggr]+" OF ":"")+dataPoint.label.toUpperCase()+(dataPoint.unitStr?" ("+dataPoint.unitStr+")":"");hotColHeaders.push(name)}var columnSpan=0,subColumnHeaders=[],columnSpanDp=_this4.reportConfig.options.dataPoints.filter((function(dp){return dp.alias===column.alias}));if(0!==columnSpanDp.length&&"rangeGroup"===columnSpanDp[0].type)columnSpan=dataPoint.children.length;else if(_this4.reportConfig.options.isGroupedByTime){var keys=Object.keys(_this4.reportConfig.data);subColumnHeaders=keys.filter((function(key){return"x"!==key&&key.split("_")[0]===column.alias})),subColumnHeaders=subColumnHeaders.map((function(header){return header.split("_")[1]})),columnSpan=subColumnHeaders.length}else columnSpan=0;var type=null;type=dataPoint.dataTypeId||0===columnSpanDp.length||"rangeGroup"!==columnSpanDp[0].type?getHotType(dataPoint.dataTypeId):"array";var col={type:type,name:dataPoint.alias,columnSpan:columnSpan};0!==col.columnSpan&&(subColumnHeaders.length>0?col["subColumnHeaders"]=subColumnHeaders:col["subColumnHeaders"]=["min","avg","max"]),4!==dataPoint.dataTypeId&&8!==dataPoint.dataTypeId||(col.renderer="html",_this4.reportObject.xAggr?(col.showOptions=!0,column.enumMode?column.enumMode===EnumMode.PERCENT&&(hotColHeaders[i]=hotColHeaders[i]+" (%)"):column.enumMode=EnumMode.DURATION):column.enumMode=null),11===_this4.reportObject.mode&&6===dataPoint.dataTypeId&&(hotColHeaders[i]="Duration"),hotColumns.push(col),column.width&&hotColWidths.push(column.width)},i=1;i<noOfColumns;i++)_loop();hotColWidths.length===hotColumns.length&&(this.hotSettings.colWidths=hotColWidths),this.hotSettings.columns=hotColumns,this.hotSettings.colHeaders=hotColHeaders,this.widget&&Object.assign(this.hotSettings,this.widgetSettings)},setTableData:function(){var _this5=this,tableData=[],xColumn=this.tableState.columns[0],xDataType=null;FNewAnalyticsModelHelper/* default */.Z.getAllDataPoints(this.reportConfig.options).find((function(dP){return"x"===dP.axes}));
// if (xDataPoint) {
//   xDataType = xDataPoint.dataTypeId
// } else {
xDataType=this.reportObject.report.dataPoints[0].xAxis.dataType;
// }
var enumMap=this.reportObject.report.dataPoints[0].xAxis.enumMap,isTimeSeries=5===xDataType||6===xDataType,period=this.getTimePeriod(this.reportObject),data=null;if(data=this.reportObject.reportData.data,this.reportConfig.options.isGroupedByTime){if(this.reportConfig.options.isGroupedByTime){var timeMap={};data.forEach((function(row){var xVal,index=data.indexOf(row);xVal=_this5.reportConfig.options.regressionConfig?_this5.reportConfig.options.timeValues&&period?_this5.formatDate(_this5.reportConfig.options.timeValues[index],period):_this5.reportConfig.options.timeValues[index]:2===_this5.reportObject.mode?_this5.assets[row[xColumn.alias]]:row[xColumn.alias],isTimeSeries&&(xVal=_this5.formatDate(xVal,period)),11===_this5.reportObject.mode&&(xVal=enumMap[xVal]),timeMap[xVal]||(timeMap[xVal]={});var groupedData=row.group,groupByTimeAggr=parseInt(_this5.reportObject.report.reportState.groupByTimeAggr);if(groupedData){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(groupedData);try{for(_iterator.s();!(_step=_iterator.n()).done;){var gData=_step.value;if(gData[xColumn.alias]){var _period=_this5.getPeriodFromAggr(groupByTimeAggr),formattedTime=_this5.convertToDateFormat(new Date(gData[xColumn.alias]),_period);["hourofday","dayofmonth"].includes(_period)&&(formattedTime=_this5.convertToTooltipFormat(new Date(gData[xColumn.alias]),_period));var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(_this5.tableState.columns);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var column=_step2.value;column.alias!==xColumn.alias&&(timeMap[xVal][column.alias+"_"+formattedTime]=gData[column.alias]?gData[column.alias]:null)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}));for(var keys=Object.keys(this.reportConfig.data),_i2=0,_Object$keys=Object.keys(timeMap);_i2<_Object$keys.length;_i2++){var xVal=_Object$keys[_i2],newRow=[];newRow.push(xVal);var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(this.tableState.columns);try{var _loop3=function(){var column=_step3.value;if(column.alias!==xColumn.alias){var _step4,value=[],subColumnHeaders=keys.filter((function(key){return"x"!==key&&key.split("_")[0]===column.alias})).map((function(header){return header.split("_")[1]})),_iterator4=(0,createForOfIteratorHelper/* default */.Z)(subColumnHeaders);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var key=_step4.value;timeMap[xVal][column.alias+"_"+key]?value.push(timeMap[xVal][column.alias+"_"+key]):value.push(null)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}newRow.push(value)}};for(_iterator3.s();!(_step3=_iterator3.n()).done;)_loop3()}catch(err){_iterator3.e(err)}finally{_iterator3.f()}tableData.push(newRow)}}}else data.forEach((function(row){var xVal,newRow=[],index=data.indexOf(row);
// xVal = xVal  + ' (' + this.formatDate(this.reportConfig.options.timeValues[index], period) + ')'
xVal=_this5.reportConfig.options.regressionConfig?
// xVal = row['x']
_this5.reportConfig.options.timeValues&&period?_this5.formatDate(_this5.reportConfig.options.timeValues[index],period):_this5.reportConfig.options.timeValues[index]:2===_this5.reportObject.mode?_this5.assets[row[xColumn.alias]]:row[xColumn.alias],isTimeSeries&&(xVal=_this5.formatDate(xVal,period)),11===_this5.reportObject.mode&&(xVal=enumMap[xVal])
/* else if (xDataType === 2 || xDataType === 3) {
          xVal = d3.format(',')(xVal)
          } */,newRow.push(xVal);for(var _loop2=function(){var column=_this5.tableState.columns[i],value=null;if("rangeGroup"===_this5.dataMap[column.alias].type){var range=["min","avg","max"];value=[];for(var _i=0,_range=range;_i<_range.length;_i++){var r=_range[_i];value.push(row[column.alias+"."+r])}}else value=row[column.alias];if(value&&!_this5.reportConfig.options.isGroupedByTime){var dataPoint=_this5.dataMap[column.alias];if("rangeGroup"===dataPoint.type)value.forEach((function(val){return d3.format(",")(val)}));else if(2===dataPoint.dataTypeId||3===dataPoint.dataTypeId)value=_this5.tableConfig&&_this5.tableConfig.removeNegativeValue&&value<0?0:d3.format(",")(value);else if(4===dataPoint.dataTypeId||8===dataPoint.dataTypeId){var enumVal=value;if(value=null,column.enumMode){if(column.enumMode===EnumMode.GRAPH);else if(column.enumMode===EnumMode.PERCENT){if(enumVal.duration){var total=Object.keys(enumVal.duration).reduce((function(previous,key){return previous+enumVal.duration[key]}),0),percent="";Object.keys(enumVal.duration).sort().forEach((function(key){value=enumVal.duration[key]/total*100,value=Math.round(100*value)/100,percent+=dataPoint.enumMap[key]+": "+value+"<br/>"})),value=percent}}else
// DURATION
if(enumVal.duration){var duration="";Object.keys(enumVal.duration).sort().forEach((function(key){duration+=dataPoint.enumMap[key]+": "+(0,formatter/* formatDuration */.LU)(enumVal.duration[key],"milliseconds",null,7)+"<br/>"})),value=duration}
/* value = dataPoint.enumMap[0] + ': ' + d3.format(',')(value.duration[0]) + '<br/>' +
                  dataPoint.enumMap[1] + ': ' + d3.format(',')(value.duration[1]) */}else enumVal.timeline&&enumVal.timeline[0]&&(value=dataPoint.enumMap[enumVal.timeline[0].value],enumVal.timeline[1]&&(value=dataPoint.enumMap[enumVal.timeline[1].value]))}else 5===dataPoint.dataTypeId?value=_this5.formatDate(value,!0):6===dataPoint.dataTypeId?value=_this5.formatDate(value):11===_this5.reportObject.mode&&(value=NumberFormatHelper/* default */.Z.formatTime(value))}newRow.push(value)},i=1;i<_this5.tableState.columns.length;i++)_loop2();tableData.push(newRow)}));isTimeSeries&&[17,18,19].includes(this.reportObject.xAggr)&&(tableData=this.getSortedData(this.reportObject.xAggr,tableData)),this.hotSettings.data=tableData},
/**
     *   Splitting table for print view
     */
setMultipleTables:function(){this.multiTables=[],this.maxColumn=this.isPrinting?MAX_COLUMN:this.hotSettings.colHeaders.length;for(var i=0;i<this.hotSettings.colHeaders.length;i++){var tableNo=Math.floor(i/this.maxColumn),table=this.multiTables[tableNo];table||(table={columns:[],colWidth:"",showExtraColumn:!1},this.$set(this.multiTables,tableNo,table)),table.columns.push(this.hotSettings.colHeaders[i])}},saveCurrentState:function(){for(var _this6=this,stateColumns=[],_loop4=function(){var colWidth=_this6.hotTable.getColWidth(i),idx=_this6.hotTable.toPhysicalColumn(i),name=_this6.hotSettings.columns[idx].name,stateColumn=_this6.tableState.columns.find((function(col){return col.name===name}));stateColumn.width=colWidth,stateColumns.push(stateColumn)},i=0;i<this.hotTable.getColHeader().length;i++)_loop4();this.tableState.columns=stateColumns,this.reportConfig.params.tabularState=JSON.stringify(this.tableState)},formatDate:function(date,period){var dateFormat=this.getDateFormat(period);return this.$options.filters.toDateFormat(new Date(date),dateFormat.tooltip)},convertToDateFormat:function(date,period){var dateFormat=this.getDateFormat(period);return this.$options.filters.toDateFormat(new Date(date),dateFormat.format)},getColIdx:function(index,tindex){return index%this.maxColumn+(tindex>0?tindex*this.maxColumn:0)},initOptions:function(index,tindex){var idx=this.getColIdx(index,tindex);this.options.state=this.$helpers.cloneObject(this.tableState.columns[idx])},saveOptions:function(index,tindex){var _this7=this,setOption=function(colIdx){var column=_this7.tableState.columns[colIdx],dataPoint=_this7.dataMap[column.alias];!dataPoint||4!==dataPoint.dataTypeId&&8!==dataPoint.dataTypeId||_this7.$set(column,"enumMode",_this7.options.state.enumMode)};if(this.options.applyAll)this.tableState.columns.forEach((function(column,colIdx){setOption(colIdx)})),this.options.applyAll=!1;else{var idx=this.getColIdx(index,tindex);setOption(idx)}this.setHotConfig(),this.setTableData(),this.setMultipleTables(),this.reportConfig.params.tabularState=JSON.stringify(this.tableState)},getSortedData:function(xAggr,data){var referenceData=[],temp=[];17===parseInt(xAggr)?referenceData=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:18===parseInt(xAggr)?referenceData=["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","13th","14th","15th","16th","17th","18th","19th","20th","21st","22nd","23rd","24th","25th","26th","27th","28th","29th","30th","31st"]:19===parseInt(xAggr)&&(referenceData=["12 am","1 am","2 am","3 am","4 am","5 am","6 am","7 am","8 am","9 am","10 am","11 am","12 pm","1 pm","2 pm","3 pm","4 pm","5 pm","6 pm","7 pm","8 pm","9 pm","10 pm","11 pm"]);for(var _i3=0,_referenceData=referenceData;_i3<_referenceData.length;_i3++){var _step5,rdata=_referenceData[_i3],_iterator5=(0,createForOfIteratorHelper/* default */.Z)(data);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var record=_step5.value;record[0]===rdata&&temp.push(record)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}return temp}}},components_FTabularReportNewvue_type_script_lang_js=FTabularReportNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FTabularReportNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FTabularReportNew=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/2950.js.map