"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[81283],{
/***/952322:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AuditLogPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/AuditLog/AuditLogPagination.vue?vue&type=template&id=7bfb080a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flex-middle fc-setup-pagination"},[_c("el-button",{staticClass:"fc-pagination-arrow",attrs:{type:"button",disabled:_vm.isInFirstPage},on:{click:function($event){_vm.currentPage>1&&_vm.onClickPreviousPage()}}},[_c("i",{staticClass:"el-icon-arrow-left"})]),_c("div",{staticClass:"mL10 fc-black-14 text-left bold"},[_vm._v(" "+_vm._s(_vm.currentPage)+" ")]),_c("el-button",{staticClass:"fc-pagination-arrow mL10",attrs:{type:"button",disabled:0===_vm.total},on:{click:function($event){_vm.startPage!==_vm.total&&_vm.onClickNextPage()}}},[_c("i",{staticClass:"el-icon-arrow-right"})])],1)},staticRenderFns=[],AuditLogPaginationvue_type_script_lang_js=(__webpack_require__(879288),__webpack_require__(670560),{props:{totalPages:{type:Number},total:{type:Number,required:!0},currentPage:{type:Number,required:!0}},computed:{isInFirstPage:function(){return 1===this.currentPage},isInLastPage:function(){return this.currentPage===this.totalPages},startPage:function(){return 1===this.currentPage?1:this.currentPage-1},endPage:function(){return Math.min(this.totalPages)},pages:function(){for(var range=[],i=this.startPage;i<=this.endPage;i+=1)range.push({name:i,isDisabled:i===this.currentPage});return range}},methods:{onPageChange:function(page){this.currentPage=page},onClickPreviousPage:function(){this.$emit("pagechanged",this.currentPage-1)},onClickPage:function(page){this.$emit("pagechanged",page)},onClickNextPage:function(){this.total&&this.$emit("pagechanged",this.currentPage+1)},isPageActive:function(page){return this.currentPage===page}}}),AuditLog_AuditLogPaginationvue_type_script_lang_js=AuditLogPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(AuditLog_AuditLogPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AuditLogPagination=component.exports},
/***/50570:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewApp}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/apps/NewApp.vue?vue&type=template&id=0f4717e8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog fc-new-app-dialog","before-close":_vm.closeDialog}},[_c("el-form",{ref:"webtab-app",staticClass:"fc-form webtab-app",attrs:{model:_vm.appDetails,rules:_vm.rules,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?"ADD":"EDIT")+" APP ")])])]),_c("div",{staticClass:"new-body-modal enpi-body-modal"},[_c("div",{staticClass:"body-scroll"},[_c("el-form-item",{attrs:{label:_vm.$t("common._common.name"),prop:"name"}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:"Enter App Name"},model:{value:_vm.appDetails.name,callback:function($$v){_vm.$set(_vm.appDetails,"name",$$v)},expression:"appDetails.name"}})],1),_c("el-form-item",{attrs:{label:"Route",prop:"linkName"}},[_c("el-input",{staticClass:"width100 fc-input-full-border2 fc-route-input",attrs:{autofocus:"",type:"text",placeholder:"Enter app Route"},model:{value:_vm.appDetails.linkName,callback:function($$v){_vm.$set(_vm.appDetails,"linkName",$$v)},expression:"appDetails.linkName"}},[_c("template",{slot:"prepend"},[_vm._v(_vm._s(_vm.appUrl))])],2)],1),_c("el-form-item",{attrs:{label:"Description",prop:"description"}},[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{"min-rows":1,type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:_vm.$t("common._common.enter_desc"),resize:"none"},model:{value:_vm.appDetails.description,callback:function($$v){_vm.$set(_vm.appDetails,"description",$$v)},expression:"appDetails.description"}})],1),_c("el-form-item"),_c("el-form-item")],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" CANCEL ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm()}}},[_vm._v(" "+_vm._s(_vm.saving?"Saving...":"SAVE")+" ")])],1)])],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(434284),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(990260)),api=__webpack_require__(32284),NewAppvue_type_script_lang_js={props:["selectedApp"],data:function(){return{appDetails:{name:null,linkName:null,description:null,appCategory:3,layoutType:2,domainType:1,isDefault:!1},saving:!1,rules:{name:{required:!0,message:"Please enter a name",trigger:"change"},linkName:{required:!0,message:"Please enter a route",trigger:"change"}}}},created:function(){this.isNew||(this.appDetails=(0,objectSpread2/* default */.Z)({},this.selectedApp))},computed:{isNew:function(){return(0,validation/* isEmpty */.xb)(this.selectedApp)},appUrl:function(){var isNew=this.isNew,$account=this.$account,selectedApp=this.selectedApp,appDomain=null;if(isNew){var _ref=$account||{},user=_ref.user;appDomain=(user||{}).appDomain}else appDomain=selectedApp.appDomain;var _ref2=appDomain||{},domain=_ref2.domain;return"https://".concat(domain||"domain")}},methods:{submitForm:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this.$refs["webtab-app"].validate(function(){var _ref3=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(valid){var appDetails,isNew,params,name,linkName,description,isDefault,id,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(valid){_context.next=2;break}return _context.abrupt("return",!1);case 2:return appDetails=_this.appDetails,isNew=_this.isNew,params={application:{},addLayout:!0},isNew?params.application=(0,objectSpread2/* default */.Z)({},appDetails):(name=appDetails.name,linkName=appDetails.linkName,description=appDetails.description,isDefault=appDetails.isDefault,id=appDetails.id,params.application={name:name,linkName:linkName,description:description,isDefault:isDefault,id:id}),_this.saving=!0,_context.next=8,api/* API */.bl.post("/v2/application/addOrUpdate",params);case 8:_yield$API$post=_context.sent,error=_yield$API$post.error,error?_this.$message.error(error.message||"Error Occured"):(_this.$message.success("App saved successfully"),_this.$emit("onSave"),_this.closeDialog()),_this.saving=!1;case 12:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref3.apply(this,arguments)}}());case 1:case"end":return _context2.stop()}}),_callee2)})))()},closeDialog:function(){this.$emit("onClose")}}},apps_NewAppvue_type_script_lang_js=NewAppvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(apps_NewAppvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewApp=component.exports},
/***/775293:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PortalExistingUser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/portal/PortalExistingUser.vue?vue&type=template&id=90eb11e6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.canShowUserList?_c("el-dialog",{staticClass:"fc-dialog-center-container fc-dialog-center-body-p0 scale-up-center fc-dialog-header-hide",attrs:{visible:!0,width:"60%","before-close":_vm.close,"append-to-body":!0}},[_c("div",{staticClass:"new-header-container pL20 pR0 height60px line-height30"},[_c("div",{staticClass:"new-header-modal"},[_c("div",{staticClass:"new-header-text flex-middle justify-content-space height30"},[_c("div",{staticClass:"setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("common._common.add_existing_user"))+" ")]),_c("div",{staticClass:"flex-middle"},[_c("div",[_vm.searchHide?_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"pointer mR20",attrs:{content:"Search"},on:{click:_vm.searchShowHide}},[_c("i",{staticClass:"el-icon-search fc-black-14 text-right fwBold"})]):_vm._e(),_vm.searchShow?_c("div",{staticClass:"relative mR20"},[_c("el-input",{ref:"querySearch",staticClass:"fc-input-full-border2 fc-existing-user-search width250px mR20",attrs:{placeholder:"Search",clearable:""},on:{change:_vm.searchLoadData},model:{value:_vm.querySearch,callback:function($$v){_vm.querySearch=$$v},expression:"querySearch"}},[_c("el-select",{attrs:{slot:"prepend",placeholder:"Select"},slot:"prepend",model:{value:_vm.selectFiledSearch,callback:function($$v){_vm.selectFiledSearch=$$v},expression:"selectFiledSearch"}},[_c("el-option",{attrs:{label:"Name",value:"name"}}),_c("el-option",{attrs:{label:"Email",value:"email"}})],1)],1),_c("i",{staticClass:"el-icon-close fc-search-close fc-black-14 text-right fwBold f18 pointer",on:{click:_vm.searchClose}})],1):_vm._e()]),_c("pagination",{staticClass:"mR20",attrs:{total:_vm.userListCount,"current-page":_vm.page},on:{pagechanged:_vm.setPage}})],1)])])]),_vm.loading?_c("div",{staticClass:"flex-middle height450"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.userList)?_c("div",{staticClass:"height450 flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.no_users_available"))+" ")])],1):_c("div",[_c("el-table",{ref:"elTable",staticClass:"portal-existing-user-table fc-table-th-pLalign-reduce fc-table-td-user-pad pB50",staticStyle:{width:"100%","padding-bottom":"50px"},attrs:{data:_vm.userTableList,height:"450"}},[_c("el-table-column",{attrs:{prop:"name",label:_vm.$t("common.products.name")},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:data.row.id},model:{value:_vm.selectedUserId,callback:function($$v){_vm.selectedUserId=$$v},expression:"selectedUserId"}},[_vm._v(_vm._s(data.row.name)+" ")])]}}],null,!1,4230950907)}),_c("el-table-column",{attrs:{prop:"email",label:_vm.$t("common.header.email")}}),_c("el-table-column",{attrs:{prop:_vm.parentModule,label:_vm.parentModule}}),_c("el-table-column",{attrs:{prop:"role",label:_vm.$t("common.wo_report.role")}})],1)],1),_c("div",{staticClass:"dialog-footer"},[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.next()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.next"))+" ")])],1)])]):_vm.canShowRolesList?_c("el-dialog",{staticClass:"fc-dialog-center-container fc-dialog-center-body-p0 scale-up-center fc-dialog-header-hide",attrs:{visible:!0,width:"35%","before-close":_vm.close,"append-to-body":!0}},[_c("div",{staticClass:"p30 pB100"},[_c("p",{staticClass:"fc-input-label-txt pB10"},[_vm._v(" "+_vm._s(_vm.$t("common.products.user"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{disabled:""},model:{value:_vm.selectedUserId,callback:function($$v){_vm.selectedUserId=$$v},expression:"selectedUserId"}},_vm._l(_vm.userList,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1),_c("p",{staticClass:"fc-input-label-txt pT20 pB10"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.role"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},model:{value:_vm.selectedRoleId,callback:function($$v){_vm.selectedRoleId=$$v},expression:"selectedRoleId"}},_vm._l(_vm.rolesList,(function(role){return _c("el-option",{key:role.roleId,attrs:{label:role.name,value:role.roleId}})})),1)],1),_c("div",{staticClass:"dialog-footer"},[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.back()}}},[_vm._v(_vm._s(_vm.$t("common.header.back")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.saving,disabled:_vm.$validation.isEmpty(_vm.selectedRoleId),type:"primary"},on:{click:function($event){return _vm.saveRecord()}}},[_vm._v(" "+_vm._s(_vm.saving?_vm.$t("common.products.adding"):_vm.$t("common._common.add"))+" ")])],1)])]):_vm._e()},staticRenderFns=[],defineProperty=__webpack_require__(482482),objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(648324),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(32284)),vuex_esm=__webpack_require__(420629),AuditLogPagination=__webpack_require__(952322),PortalExistingUservue_type_script_lang_js={props:["app","save","fetchParams","parentModule","fetchParamsCount"],data:function(){return{saving:!1,loading:!0,userList:[],selectedUserId:null,canShowUserList:!0,canShowRolesList:!1,rolesList:[],selectedRoleId:null,searchHide:!0,searchShow:!1,querySearch:"",selectFiledSearch:"name",userListCount:0,page:1,perPage:50}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.$store.dispatch("loadRoles"),_context.next=3,_this.loadApplicationUser();case 3:return _context.next=5,_this.loadRolesForApp();case 5:case"end":return _context.stop()}}),_callee)})))()},components:{Pagination:AuditLogPagination/* default */.Z},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getRoleNameById"])),{},{userTableList:function(){var _this2=this,userList=this.userList,parentModule=this.parentModule,linkName=this.app.linkName;return userList.map((function(user){var _user$parentModule,_ref=user||{},name=_ref.name,id=_ref.id,email=_ref.email,rolesMap=_ref.rolesMap,currentUser={name:name,id:id,email:email},roleId=(rolesMap||{})[linkName];return currentUser[parentModule]=(null===(_user$parentModule=user[parentModule])||void 0===_user$parentModule?void 0:_user$parentModule.name)||"---",currentUser.role=roleId?_this2.getRoleNameById(roleId):"---",currentUser}))}}),watch:{page:function(newVal,oldVal){oldVal!=newVal&&this.loadApplicationUser()}},methods:{loadApplicationUser:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref2,params,url,dataKey,payload,filters,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref2=_this3.fetchParams||{},params=_ref2.params,url=_ref2.url,dataKey=_ref2.dataKey,payload=(0,objectSpread2/* default */.Z)({},params),_this3.querySearch&&(filters=payload.filters,filters=JSON.parse(filters),"email"===_this3.selectFiledSearch?filters.email={operatorId:5,value:[_this3.querySearch]}:filters.name={operatorId:5,value:[_this3.querySearch]},payload.filters=JSON.stringify(filters)),payload.page=_this3.page,payload.perPage=_this3.perPage,_this3.loading=!0,_context2.next=8,api/* API */.bl.get(url,payload);case 8:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this3.$message.error(error.message||"Error Occurred"):(_this3.userList=data[dataKey]||[],_this3.loadApplicationUserCount()),_this3.loading=!1;case 13:case"end":return _context2.stop()}}),_callee2)})))()},loadApplicationUserCount:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref3,params,url,_yield$API$get2,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.loading=!0,_ref3=_this4.fetchParamsCount||{},params=_ref3.params,url=_ref3.url,params.page=_this4.page,params.perPage=_this4.perPage,_context3.next=6,api/* API */.bl.get(url,params);case 6:_yield$API$get2=_context3.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error?_this4.$message.error(error.message||"Error Occurred"):_this4.userListCount=data.recordCount||[],_this4.loading=!1;case 11:case"end":return _context3.stop()}}),_callee3)})))()},loadRolesForApp:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var app,_yield$API$get3,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return app=_this5.app,_context4.next=3,api/* API */.bl.get("/setup/roles",{appId:app.id});case 3:_yield$API$get3=_context4.sent,error=_yield$API$get3.error,data=_yield$API$get3.data,error?_this5.$message.error(error.message||"Error Occured"):_this5.rolesList=(data.roles||[]).filter((function(role){return"Super Administrator"!==role.name}));case 7:case"end":return _context4.stop()}}),_callee4)})))()},saveRecord:function(){var _this6=this;this.saving=!0;var selectedUserId=this.selectedUserId,app=this.app,selectedRoleId=this.selectedRoleId,userList=this.userList,selectedUser=userList.find((function(user){return user.id===selectedUserId})),user=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},selectedUser),{},{rolesMap:(0,defineProperty/* default */.Z)({},app.linkName,selectedRoleId)});this.save(user).then((function(){_this6.close()})).catch((function(){})).finally((function(){_this6.saving=!1}))},close:function(){this.$emit("onClose")},next:function(){this.canShowUserList=!1,this.canShowRolesList=!0},back:function(){this.canShowRolesList=!1,this.canShowUserList=!0},searchShowHide:function(){this.searchHide=!1,this.searchShow=!0},searchClose:function(){this.searchHide=!0,this.searchShow=!1,this.querySearch=null},searchLoadData:function(){this.loadApplicationUser(),this.page=1},setPage:function(page){this.page=page,this.loadApplicationUser()}}},portal_PortalExistingUservue_type_script_lang_js=PortalExistingUservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(portal_PortalExistingUservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PortalExistingUser=component.exports},
/***/635141:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return EmployeePortalAppSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/portal/v1/EmployeePortalAppSummary.vue?vue&type=template&id=52718d11
var EmployeePortalDomainSSO_render,EmployeePortalDomainSSO_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100vh"},[_c("setupSummaryHeader",{scopedSlots:_vm._u([{key:"summaryLeftSide",fn:function(){return[_c("div",[_c("div",{staticClass:"flex-middle fc-setup-breadcrumb"},[_c("div",{staticClass:"fc-setup-breadcrumb-inner pointer",on:{click:_vm.setupHomeRoute}},[_vm._v(" "+_vm._s(_vm.$t("common.products.home"))+" ")]),_c("div",{staticClass:"fc-setup-breadcrumb-inner pL10 pR10"},[_c("i",{staticClass:"el-icon-arrow-right f14 fwBold"})]),_c("div",{staticClass:"fc-setup-breadcrumb-inner pointer",on:{click:_vm.setupUsersRoute}},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.employee_portal"))+" ")]),_c("div",{staticClass:"fc-setup-breadcrumb-inner pL10 pR10"},[_c("i",{staticClass:"el-icon-arrow-right f14 fwBold"})]),_c("div",{staticClass:"fc-breadcrumbBold-active"},[_vm._v(" "+_vm._s(_vm.$t("setup.portal.summary"))+" ")])]),_c("div",{staticClass:"setting-title-block flex-middle justify-content-space"},[_c("div",{staticClass:"flex-middle pT10"},[_c("div",{staticClass:"fc-portal-icon fc-portal-icon-occpupant-bg flex-center-vH align-center"},[_c("inline-svg",{attrs:{src:"svgs/apps/portal",iconClass:"icon icon-xl fill-white"}})],1),_c("div",{staticClass:"visibility-visible-actions"},[_c("div",{staticClass:"fc-grey-txt18 pL10 pB5"},[_vm._v(" "+_vm._s(_vm.application.name)+" "),_c("el-dropdown",{on:{command:function($event){return _vm.handleCommand($event)}}},[_c("span",{staticClass:"el-dropdown-link"},[_c("i",{staticClass:"el-icon-more fc-portal-summary-more"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"editApp"}},[_vm._v(" "+_vm._s(_vm.$t("setup.portal.edit_app"))+" ")])],1)],1)],1),_c("div",{staticClass:"flex-middle pT5"},[_c("a",{staticClass:"fc-app-link-color pL10 f14",attrs:{href:"https://"+_vm.application.appDomain.domain,target:"_blank"}},[_vm._v(" "+_vm._s("https://"+_vm.application.appDomain.domain)+" ")]),_c("div",{staticClass:"pointer pL10 visibility-hide-actions",on:{click:function($event){return _vm.copyLinkName("https://"+_vm.application.appDomain.domain)}}},[_c("inline-svg",{attrs:{src:"svgs/link-copy",iconClass:"icon icon-sm-md vertical-bottom op5"}})],1)])])])])])]},proxy:!0},{key:"summaryRightSide",fn:function(){return[_c("portal-target",{staticClass:"portal-summary flex-middle",attrs:{name:"header-buttons"}})]},proxy:!0}])}),_c("div",{staticClass:"fc-main d-flex relative"},[_vm.showSidebar?_c("setupSummarySidebar",{scopedSlots:_vm._u([{key:"setupsidebar",fn:function(){return _vm._l(_vm.sidebarMenuList,(function(sidebar,list){return _c("div",{key:list},_vm._l(sidebar.menuList,(function(headingName,inex){return _c("div",{key:inex},[_c("div",{staticClass:"fc-pink f14 bold pB10"},[_vm._v(" "+_vm._s(headingName.name)+" ")]),_vm._l(headingName.submenuList,(function(subMenu,iex){return _c("div",{key:iex},[_c("div",{staticClass:"label-txt-black fc-list-label pointer",class:{isActive:_vm.sidebarTabList==subMenu.link},on:{click:function($event){return _vm.showHideMenu(subMenu.link)}}},[_c("InlineSvg",{attrs:{src:subMenu.icon,iconClass:subMenu.iconClass}}),_vm._v(" "+_vm._s(subMenu.name)+" ")],1)])}))],2)})),0)}))},proxy:!0}],null,!1,1733647257)}):_vm._e(),_c("setupSummaryMainSection",{class:{widthChangeCon:0==_vm.showSidebar},scopedSlots:_vm._u([{key:"setupMain",fn:function(){return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"fc-open-arrow pointer",attrs:{content:"Open Sidebar"},on:{click:_vm.showArrow}},[_vm.showSideBarOpen?_c("i",{staticClass:"el-icon-d-arrow-right f18"}):_vm._e()]),"users"===_vm.sidebarTabList?[_c("portal",{attrs:{to:"header-buttons"}},[_c("el-dropdown",{on:{command:_vm.addNewForm}},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.add_user"))+" "),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"new"}},[_vm._v(_vm._s(_vm.$t("common.products.new_user")))]),_c("el-dropdown-item",{attrs:{command:"existing"}},[_vm._v(_vm._s(_vm.$t("common.header.existing_user")))])],1)],1)],1),_c("EmployeeUsers",{ref:"userList",attrs:{app:_vm.app,editEmployee:_vm.editEmployee}})]:"ssoShow"===_vm.sidebarTabList?[_c("sso",{staticClass:"fc-occupant-sso-header",attrs:{showHeader:!1}})]:"roles"===_vm.sidebarTabList?[_c("div",{staticClass:"fc-portal-inner-summary-header"},[_c("div",{staticClass:"fc-black2-18 text-left bold"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.roles"))+" ")])]),_c("portalRoles",{staticClass:"portal-summary",attrs:{app:_vm.app,isActiveRoles:"roles"===_vm.sidebarTabList}})]:"tabsLayout"===_vm.sidebarTabList?[_c("TabsAndLayouts",{staticClass:"portal-summary fc-occupant-portal-tabs",attrs:{appId:_vm.appId,isActive:"tabsLayout"===_vm.sidebarTabList}})]:_vm._e()]},proxy:!0}])})],1),_vm.showDialog?_c("EmployeeUserForm",{attrs:{isNew:_vm.isNew,formType:"employee",user:_vm.currentUser,app:_vm.app,save:_vm.saveEmployee},on:{onClose:function($event){_vm.showDialog=!1}}}):_vm._e(),_vm.showExistingDialog?_c("PortalExistingUser",{attrs:{app:_vm.app,fetchParams:_vm.fetchParams,parentModule:"employee",save:_vm.saveEmployee,fetchParamsCount:_vm.fetchParamsCount},on:{onSave:_vm.reloadEmployees,onClose:function($event){_vm.showExistingDialog=!1}}}):_vm._e(),_vm.showAppEdit?_c("NewApp",{attrs:{selectedApp:_vm.app},on:{onSave:_vm.updateApp,onClose:function($event){_vm.showAppEdit=!1}}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),api=(__webpack_require__(648324),__webpack_require__(670560),__webpack_require__(821057),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(32284)),pick=__webpack_require__(478718),pick_default=__webpack_require__.n(pick),EmployeePortalUsersvue_type_template_id_004de90e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[[_c("div",{staticClass:"fc-occupant-user-header"},[_c("div",{staticClass:"fc-black2-18 text-left bold"},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.users"))+" ")]),_c("div",{staticClass:"fc-user-search-header"},[_c("pagination",{ref:"pagination",staticClass:"fc-occupant-pagiantion",attrs:{total:_vm.employeeUsersCount,perPage:_vm.perPage,currentPage:_vm.page},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}}),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n            arrow: true,\n            arrowType: 'round',\n            animation: 'fade',\n          }"}],staticClass:"fc-portal-filter-border mT10",class:{filterActive:_vm.showFilter},attrs:{content:"Advanced filters"},on:{click:_vm.showExtraFilter}},[_c("inline-svg",{staticClass:"pointer",attrs:{src:"svgs/dashboard/filter",iconClass:"icon icon-md fc-fill-path-grey"}}),_c("div",{class:{"dot-active-pink":_vm.activeUserSearchData||_vm.activeTab}})],1)],1)]),_vm.showFilter?_c("div",{staticClass:"fc-show-filter-con"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"relative mR20"},[_c("div",{staticClass:"fc-black-13 text-left bold pB5"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.search"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 width250px",attrs:{placeholder:"Search"},on:{change:_vm.searchUsers},model:{value:_vm.activeUserSearchData,callback:function($$v){_vm.activeUserSearchData=$$v},expression:"activeUserSearchData"}})],1),_c("div",[_c("div",{staticClass:"fc-black-13 text-left bold pB5"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Select",clearable:"",filterable:""},on:{change:_vm.changeActiveTab},model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},_vm._l(_vm.tabList,(function(tab,inex){return _c("el-option",{key:inex,attrs:{label:tab.label,value:tab.value}})})),1)],1)])]):_vm._e(),_c("div",{staticClass:"occupantPortal-tabrow pL0 pR0"},[_vm.loading?_c("setup-loader",{staticClass:"m10 width98 shadow-none",scopedSlots:_vm._u([{key:"setupLoading",fn:function(){return[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})]},proxy:!0}],null,!1,3199698086)}):_vm.$validation.isEmpty(_vm.employeeUsers)&&!_vm.loading?_c("setup-empty",{staticClass:"m10 width98 shadow-none",scopedSlots:_vm._u([{key:"emptyImage",fn:function(){return[_c("inline-svg",{attrs:{src:"svgs/copy2",iconClass:"icon icon-sm-md"}})]},proxy:!0},{key:"emptyHeading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("setup.empty.empty_user"))+" ")]},proxy:!0},{key:"emptyDescription",fn:function(){},proxy:!0}])}):_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table",attrs:{width:"100%"}},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text uppercase"},[_vm._v(" "+_vm._s(_vm.$t("setup.approvalprocess.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text uppercase"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.email"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text uppercase"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.phone"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common.roles.role"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])]),_c("tbody",_vm._l(_vm.employeeUsers,(function(user,index){return _c("tr",{key:index,staticClass:"tablerow visibility-visible-actions"},[_c("td",[_c("user-avatar",{attrs:{size:"md",user:user}})],1),_c("td",[_vm._v(_vm._s(user.email))]),_c("td",[_vm._v(" "+_vm._s(user.phone?user.phone:"---")+" ")]),_c("td",[_vm._v(" "+_vm._s(_vm.getRoleName(user))+" ")]),_c("td",{staticClass:"nowrap"},[_c("i",{staticClass:"visibility-hide-actions el-icon-delete fc-setup-list-delete",on:{click:function($event){return _vm.removeEmployee(user)}}}),_c("i",{staticClass:"visibility-hide-actions el-icon-edit fc-setup-list-edit",on:{click:function($event){return _vm.editEmployeeUser(user)}}})])])})),0)])])],1)],_vm.showDialog?_c("EmployeeUserForm",{attrs:{isNew:_vm.isNew,formType:"employee",user:_vm.currentUser,app:_vm.app,save:_vm.saveEmployee},on:{onClose:function($event){_vm.showDialog=!1}}}):_vm._e()],2)},EmployeePortalUsersvue_type_template_id_004de90e_staticRenderFns=[],User=__webpack_require__(426803),vuex_esm=__webpack_require__(420629),WidgetPagination=__webpack_require__(806339),SetupLoader=__webpack_require__(233432),SetupEmptyState=__webpack_require__(622957),validation=__webpack_require__(990260),PortalUserForm=__webpack_require__(466919),EmployeePortalUsersvue_type_script_lang_js={props:["app"],components:{UserAvatar:User/* default */.Z,Pagination:WidgetPagination/* default */.Z,SetupLoader:SetupLoader/* default */.Z,SetupEmpty:SetupEmptyState/* default */.Z,EmployeeUserForm:PortalUserForm/* default */.Z},data:function(){return{activeTab:"",loading:!0,employeeUsers:[],showDialog:!1,employees:[],employeeUsersCount:"",activeUserSearchData:null,employeesCount:"",currentUser:null,showEmployeeDialog:!1,page:1,perPage:50,showFilter:!1,fetchParams:{params:{filters:JSON.stringify({employeePortalAccess:{operatorId:15,value:["true"]}})}},tabList:[{label:"All",value:"all"},{label:"Employees",value:"employees"}]}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$store.dispatch("loadRoles");case 2:return _context.next=4,_this.loadEmployeesCount();case 4:return _context.next=6,_this.loadEmployees();case 6:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getRoleNameById"])),{},{appId:function(){return this.app.id}}),watch:{page:function(newVal,oldVal){oldVal!=newVal&&this.loadEmployees()}},methods:{loadUsersList:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this2.loadEmployeesCount();case 2:return _context2.next=4,_this2.loadEmployees();case 4:case"end":return _context2.stop()}}),_callee2)})))()},loadEmployeesCount:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var appId,genericSearch,filters,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.loading=!0,_this3.loading=!0,appId=_this3.appId,filters={},filters="all"===_this3.activeTab?{employeePortalAccess:{value:["true"],operatorId:15},peopleType:{operatorId:54,value:["3"]}}:"employees"===_this3.activeTab?{peopleType:{operatorId:54,value:["3"]},employeePortalAccess:{value:["true"],operatorId:15}}:{employeePortalAccess:{value:["true"],operatorId:15},peopleType:{operatorId:54,value:["3"]}},_this3.activeUserSearchData&&(genericSearch=_this3.activeUserSearchData),_context3.next=8,api/* API */.bl.get("/v2/people/list?fetchCount=true&page=".concat(_this3.page,"&perPage=50"),{filters:(0,validation/* isEmpty */.xb)(filters)?null:JSON.stringify(filters),appId:appId,genericSearch:genericSearch});case 8:_yield$API$get=_context3.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this3.$message.error(error.message||"Error Occured"):_this3.employeeUsersCount=data.recordCount||[],_this3.loading=!1;case 13:case"end":return _context3.stop()}}),_callee3)})))()},loadEmployees:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var appId,genericSearch,filters,_yield$API$get2,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this4.loading=!0,_this4.loading=!0,appId=_this4.appId,filters={},filters="all"===_this4.activeTab?{employeePortalAccess:{value:["true"],operatorId:15},peopleType:{operatorId:54,value:["3"]}}:"employees"===_this4.activeTab?{peopleType:{operatorId:54,value:["3"]},employeePortalAccess:{value:["true"],operatorId:15}}:{employeePortalAccess:{value:["true"],operatorId:15},peopleType:{operatorId:54,value:["3"]}},_this4.activeUserSearchData&&(genericSearch=_this4.activeUserSearchData),_context4.next=8,api/* API */.bl.get("/v2/people/list?page=".concat(_this4.page,"&perPage=50"),{filters:(0,validation/* isEmpty */.xb)(filters)?null:JSON.stringify(filters),appId:appId,genericSearch:genericSearch});case 8:_yield$API$get2=_context4.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error?_this4.$message.error(error.message||"Error Occured"):_this4.employeeUsers=data.people||[],_this4.loading=!1;case 13:case"end":return _context4.stop()}}),_callee4)})))()},changeActiveTab:function(){this.loadEmployees(),this.loadEmployeesCount()},getRoleName:function(user){var linkName=this.app.linkName,rolesMap=user.rolesMap||{},roleId=rolesMap[linkName];return roleId?this.getRoleNameById(roleId):"---"},removeEmployee:function(user){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var _ref,id,employeePortalAccess,rolesMap,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return user.employeePortalAccess=!1,_ref=user||{},id=_ref.id,employeePortalAccess=_ref.employeePortalAccess,rolesMap=_ref.rolesMap,params={employees:[{id:id,employeePortalAccess:employeePortalAccess,rolesMap:rolesMap}]},_context5.next=5,api/* API */.bl.post("/v2/employee/update",params);case 5:if(_yield$API$post=_context5.sent,error=_yield$API$post.error,!error){_context5.next=12;break}throw _this5.$message.error(error.message||"Error Occurred"),new Error;case 12:
// this.$message.success(this.$t('people.employee.update_success'))
_this5.$message.success(_this5.$t("common._common.delete_success")),_this5.loadEmployees(),_this5.loadEmployeesCount();case 15:case"end":return _context5.stop()}}),_callee5)})))()},showExtraFilter:function(){this.showFilter=!this.showFilter},clearUser:function(){this.activeUserSearchData=null},searchUsers:function(){this.page=1,this.perPage=50,this.loadEmployees(),this.loadEmployeesCount()},editEmployeeUser:function(user){this.isNew=!1,this.showDialog=!0,this.currentUser=user},saveEmployee:function(employee){var _this6=this,isNew=this.isNew,url="",successMsg="";isNew?(url="/v2/employee/addfromPortal",successMsg=this.$t("common.products.new_employee_added")):(url="/v2/employee/updatefromPortal",successMsg=this.$t("common.products.employee_updated"));var props=["name","email","phone","rolesMap","securityPolicyMap","language"];isNew||props.push("id");var params={employees:[(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},pick_default()(employee,props)),{},{peopleType:3,employeePortalAccess:!0})]};return api/* API */.bl.post(url,params).then((function(_ref2){var error=_ref2.error;if(error)throw _this6.$message.error(error.message||"Error Ocurred"),new Error;_this6.$message(successMsg),_this6.loadEmployees(),_this6.loadEmployeesCount()}))}}},portal_EmployeePortalUsersvue_type_script_lang_js=EmployeePortalUsersvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(portal_EmployeePortalUsersvue_type_script_lang_js,EmployeePortalUsersvue_type_template_id_004de90e_render,EmployeePortalUsersvue_type_template_id_004de90e_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmployeePortalUsers=component.exports,sso=__webpack_require__(197614),EmployeePortalDomainSSOvue_type_script_lang_js={extends:sso/* default */.Z,methods:{getSSOType:function(){return"domainSSO"},downloadMetaUrl:function(){return"/api/v2/setup/portalsso/metadata?appDomainType=employeeportal"},getUpdateUrl:function(){return"/v2/setup/portalsso/update?appDomainType=employeeportal"},handleCommand:function(command){var _this=this;"edit"==command?this.configureSSO():"delete"==command&&this.$dialog.confirm({title:"Delete Single Sign-On Settings",message:"This will permanently delete your Single Sign-On Settings. Continue?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){if(value&&null!=_this.ssoData.id){var ssoObj={appDomainType:"employeeportal"};_this.$http.post("/v2/setup/portalsso/delete",ssoObj).then((function(response){200==response.status&&(_this.showContent=!1,_this.$emit("Your SSO configs are deleted"))}))}}))},updateCreateUserStatus:function(){var _this2=this;this.disabled=!0;var ssoData={createUserStatus:this.isCreateUserEnabled};this.$http.post("/v2/setup/portalsso/updateCreateUserStatus?appDomainType=employeeportal",ssoData).then((function(response){var status=response.status,errorMessage=response.data.errorMessage;errorMessage?_this2.$message.error(errorMessage):200===status&&_this2.isEnabled&&_this2.$message({type:"success",message:"SSO enabled successfully"})}))},changeSSO:function(){var _this3=this;this.disabled=!0;var ssoData={domainSSO:{isActive:this.isEnabled},appDomainType:"employeeportal"};this.$http.post("/v2/setup/portalsso/update",ssoData).then((function(response){var status=response.status,errorMessage=response.data.errorMessage;errorMessage?_this3.$message.error(errorMessage):200===status&&_this3.isEnabled?_this3.$message({type:"success",message:"SSO enabled successfully"}):200!==status||_this3.isEnabled||_this3.$message({type:"success",message:"SSO disabled successfully"}),_this3.disabled=!1}))},getSSOStatus:function(state){var _this4=this;this.ssoStatusLoading=!0,this.loading=!0,this.$http.get("/v2/setup/portalsso/get",{params:{appDomainType:"employeeportal"}}).then((function(response){200==response.status&&null!=response.data&&null==response.data.domainSSO?_this4.ssoStatusLoading=!1:200==response.status&&null!=response.data&&null!=response.data.domainSSO&&(_this4.isEnabled=response.data.domainSSO.isActive,_this4.isCreateUserEnabled=response.data.domainSSO.isCreateUser,_this4.ssoData.spAcsURL=response.data.spAcsURL,_this4.ssoData.spEntityId=response.data.spEntityId,_this4.ssoData.spMetadataURL=response.data.spMetadataURL,_this4.ssoData.showSSOLink=response.data.domainSSO.showSSOLink,response.data.domainSSO.SSOConfig&&(_this4.ssoData.certificate=response.data.domainSSO.SSOConfig.certificate,_this4.ssoData.entityId=response.data.domainSSO.SSOConfig.entityId,_this4.ssoData.loginUrl=response.data.domainSSO.SSOConfig.loginUrl,_this4.ssoData.logoutUrl=response.data.domainSSO.SSOConfig.logoutUrl),_this4.ssoData.id=response.data.domainSSO.id,_this4.loading=!1,_this4.ssoStatusLoading=!1,_this4.ssoData.loginUrl&&(_this4.showContent=!0),"onedit"==state&&(_this4.showDialog=!0))})).catch((function(err){_this4.loading=!1}))}}},setup_EmployeePortalDomainSSOvue_type_script_lang_js=EmployeePortalDomainSSOvue_type_script_lang_js,EmployeePortalDomainSSO_component=(0,componentNormalizer/* default */.Z)(setup_EmployeePortalDomainSSOvue_type_script_lang_js,EmployeePortalDomainSSO_render,EmployeePortalDomainSSO_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmployeePortalDomainSSO=EmployeePortalDomainSSO_component.exports,TabsAndLayouts=__webpack_require__(161693),NewApp=__webpack_require__(50570),SetupSummaryMainSection=__webpack_require__(825550),SetupSummarySidebar=__webpack_require__(426998),SetupSummaryHeader=__webpack_require__(202313),router=__webpack_require__(329435),PortalRoles=__webpack_require__(543354),PortalExistingUser=__webpack_require__(775293),EmployeePortalAppSummaryvue_type_script_lang_js={props:["application"],components:{EmployeeUsers:EmployeePortalUsers,EmployeeUserForm:PortalUserForm/* default */.Z,sso:EmployeePortalDomainSSO,TabsAndLayouts:TabsAndLayouts/* default */.Z,NewApp:NewApp/* default */.Z,setupSummaryMainSection:SetupSummaryMainSection/* default */.Z,setupSummarySidebar:SetupSummarySidebar/* default */.Z,setupSummaryHeader:SetupSummaryHeader/* default */.Z,portalRoles:PortalRoles/* default */.Z,PortalExistingUser:PortalExistingUser/* default */.Z},title:function(){return"Employee Portal"},data:function(){return{showDialog:!1,isNew:!1,loading:!1,showExistingDialog:!1,userlist:[],currentUser:null,showAppEdit:!1,app:null,portalInfo:[],showSidebar:!0,showSideBarOpen:!1,sidebarTabList:["users","roles","ssoShow","tabsLayout"],fetchParams:{params:{filters:JSON.stringify({employeePortalAccess:{operatorId:15,value:["false"]},peopleType:{operatorId:54,value:["3"]}})},url:"/v2/people/list",dataKey:"people"},fetchParamsCount:{params:{filters:JSON.stringify({employeePortalAccess:{operatorId:15,value:["false"]},peopleType:{operatorId:54,value:["3"]}}),fetchCount:!0},url:"/v2/people/list",dataKey:"people"},sidebarMenuList:[{menuList:[{name:"Manage",submenuList:[{name:"Users",link:"users",icon:"svgs/user-new1",iconClass:"icon icon-md op66 mR13"},{name:"Roles",link:"roles",icon:"svgs/roles-new",iconClass:"icon icon-xl op66 mR10 vertical-text-bottom fc-role-icon-align"},{name:"SSO",link:"ssoShow",icon:"svgs/sso",iconClass:"icon icon-lg op66 vertical-text-bottom fc-sso-icon"}]},{name:"Customization",submenuList:[{name:"Tabs And Layouts",link:"tabsLayout",icon:"svgs/tabs",iconClass:"icon icon-sm-md op66 mR14 vertical-bottom"}]}]}]}},created:function(){this.app=(0,objectSpread2/* default */.Z)({},this.application),this.sidebarTabList="users"},computed:{appId:function(){return this.app.id},appLinkName:function(){var appName=(0,router/* getApp */.wx)().linkName;return appName}},methods:{back:function(){this.$router.go(-1)},addNewForm:function(cmd){"new"===cmd?(this.currentUser=null,this.isNew=!0,this.showDialog=!0):"existing"===cmd&&(this.isNew=!1,this.showExistingDialog=!0)},editEmployee:function(user){this.isNew=!1,this.showDialog=!0,this.currentUser=user},saveEmployee:function(employee){var _this=this,isNew=this.isNew,url="",successMsg="";isNew?(url="/v2/employee/addfromPortal",successMsg=this.$t("common.products.new_employee_added")):(url="/v2/employee/updatefromPortal",successMsg=this.$t("common.products.employee_updated"));var props=["name","email","phone","rolesMap","language","securityPolicyMap"];isNew||props.push("id");var params={employees:[(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},pick_default()(employee,props)),{},{peopleType:3,employeePortalAccess:!0})]};return api/* API */.bl.post(url,params).then((function(_ref){var error=_ref.error;if(error)throw _this.$message.error(error.message||"Error Ocurred"),new Error;_this.$message(successMsg),_this.showDialog=!1,_this.showExistingDialog=!1,_this.reloadEmployees()}))},reloadEmployees:function(){this.$refs["userList"]&&this.$refs["userList"].loadUsersList(),this.showExistingDialog=!1},updateConfig:function(config){this.app=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.app),{},{configJSON:config,config:JSON.stringify(config)})},updateApp:function(){this.$emit("reload")},showHideMenu:function(link){return this.sidebarTabList="users"===link?"users":"ssoShow"===link?"ssoShow":"roles"===link?"roles":"preferences"===link?"preferences":"tabsLayout"===link?"tabsLayout":"users"},setupHomeRoute:function(){return this.$router.replace({path:"/".concat(this.appLinkName,"/setup/home")})},setupUsersRoute:function(){return this.$router.replace({path:"/".concat(this.appLinkName,"/setup/general/portal")})},
// loadPortInfo() {
//   API.get('/serviceportal/getportalinfo').then(({ data }) => {
//     this.portalInfo = data.protalInfo
//   })
// },
copyLinkName:function(copy){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,navigator.clipboard.writeText(copy);case 2:_this2.$message({message:"Copied - "+copy,type:"success"});case 3:case"end":return _context.stop()}}),_callee)})))()},showHideArrow:function(){this.showSidebar=!1,this.showSideBarOpen=!0},showArrow:function(){this.showSidebar=!0,this.showSideBarOpen=!1},handleCommand:function(command){"editApp"===command&&(this.showAppEdit=!0)}}},v1_EmployeePortalAppSummaryvue_type_script_lang_js=EmployeePortalAppSummaryvue_type_script_lang_js,EmployeePortalAppSummary_component=(0,componentNormalizer/* default */.Z)(v1_EmployeePortalAppSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,EmployeePortalAppSummary=EmployeePortalAppSummary_component.exports},
/***/197614:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return sso}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/sso.vue?vue&type=template&id=4d9dd103
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 d-flex flex-direction-column overflow-hidden"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"fc-black2-18 text-left bold pB0"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.sso_short"))+" ")]),_vm.showHeader?_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.sso_sign_in"))+" ")]):_vm._e()])]),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout overflow-y fc-sso-portal-con pL10 pR10"},[_c("el-card",{staticClass:"box-card width100",staticStyle:{"box-shadow":"0 4px 15px 0 rgba(14, 15, 43, 0.03)"},attrs:{shadow:"never"}},[_vm.showContent?_c("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[_c("div",{staticClass:"d-flex justify-content-space"},[_vm.showContent?_c("div",[_c("span",{staticClass:"f15 setting-form-title line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common._common.enable_sso"))+" ")]),_c("el-switch",{staticClass:"Notification-toggle p20",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeSSO()}},model:{value:_vm.isEnabled,callback:function($$v){_vm.isEnabled=$$v},expression:"isEnabled"}}),_c("el-dropdown",{staticClass:"sso-more-options",attrs:{trigger:"click"},on:{command:_vm.handleCommand}},[_c("span",{staticClass:"el-dropdown-link"},[_c("i",{staticClass:"el-icon-more f18 pointer"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{icon:"el-icon-edit mR3",command:"edit"}},[_vm._v(_vm._s(_vm.$t("common._common.edit")))]),_c("el-dropdown-item",{attrs:{icon:"el-icon-download mR3",command:"download"}},[_c("a",{staticClass:"label-txt-black",attrs:{href:""+_vm.ssoData.spMetadataURL}},[_vm._v(_vm._s(_vm.$t("common._common.download_metadata")))])]),_c("el-dropdown-item",{attrs:{icon:"el-icon-delete mR3",command:"delete"}},[_vm._v(_vm._s(_vm.$t("common._common.delete")))])],1)],1)],1):_vm._e()])]):_vm._e(),_vm.ssoStatusLoading?[_c("div",{directives:[{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],staticClass:"mB20 flex-center-vH",staticStyle:{height:"calc(100vh - 245px)"}})]:_vm.showContent&&!_vm.ssoStatusLoading?[_c("div",{staticClass:"mB20"},["domainSSO"===_vm.ssoType?_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"grid-content"},[_c("div",[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.header.create_user_if_not_present"))+" ")]),_c("el-switch",{staticClass:"Notification-toggle p20",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.updateCreateUserStatus()}},model:{value:_vm.isCreateUserEnabled,callback:function($$v){_vm.isCreateUserEnabled=$$v},expression:"isCreateUserEnabled"}})],1)])])],1):_vm._e(),_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"grid-content"},[_c("div",[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.products.service_provider_sp"))+" ")]),_c("div",{staticClass:"label-txt-black bold line-height25"},[_vm._v(" "+_vm._s(_vm.ssoData.spEntityId)+" ")])]),_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.header.identity_provider_idp"))+" ")]),_c("div",{staticClass:"label-txt-black bold line-height25"},[_vm._v(" "+_vm._s(_vm.ssoData.loginUrl)+" ")])])])]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"grid-content"},[_c("div",[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.header.assertion_cnsumer_service"))+" ")]),_c("div",{staticClass:"label-txt-black bold line-height25"},[_vm._v(" "+_vm._s(_vm.ssoData.spAcsURL)+" ")])]),_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.header.identity_provider_idp_logout"))+" ")]),_c("div",{staticClass:"label-txt-black bold line-height25"},[_vm._v(" "+_vm._s(_vm.ssoData.logoutUrl?_vm.ssoData.logoutUrl:"--")+" ")])])])])],1)],1)]:[_c("div",{staticClass:"saml-container"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"m15 mT0 fc-black2-18 f14 line-height22"},[_vm._v(" "+_vm._s(_vm.$t("common.header.single_sso_feature"))+" ")]),_c("el-button",{staticClass:"el-button setup-el-btn uppercase el-button--default pL30 pR30 pT15 pB15",on:{click:function($event){return _vm.setUpSSO()}}},[_vm._v(" "+_vm._s(_vm.$t("common.header.setup_now"))+" ")]),_c("div",{staticClass:"m15 label-txt-black f14 line-height22"},[_c("a",{attrs:{download:"",href:_vm.downloadMetaUrl}},[_c("i",{staticClass:"el-icon-download mR3"}),_vm._v("Download Metadata")])])],1)]],2)],1)]),_vm.showDialog?_c("ssoForm",{attrs:{entityId:_vm.ssoData.entityId,loginUrl:_vm.ssoData.loginUrl,logoutUrl:_vm.ssoData.logoutUrl,certificate:_vm.ssoData.certificate,visibility:_vm.showDialog,getSSOStatus:_vm.getSSOStatus,updateUrl:_vm.updateUrl,ssoType:_vm.ssoType,showSSOLink:_vm.ssoData.showSSOLink},on:{"update:visibility":function($event){_vm.showDialog=$event}}}):_vm._e()],1)},staticRenderFns=[],ssoFormvue_type_template_id_5b84018a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("el-form",{ref:"ssoForm",attrs:{model:_vm.sso,"label-position":"top",rules:_vm.rules}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.configure_saml"))+" ")])])]),_c("div",{staticClass:"new-body-modal"},[_c("el-form-item",{attrs:{label:_vm.$t("setup.setup_profile.login_url"),prop:"loginUrl"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",placeholder:_vm.$t("setup.setup_profile.enter_idp")},model:{value:_vm.sso.loginUrl,callback:function($$v){_vm.$set(_vm.sso,"loginUrl",$$v)},expression:"sso.loginUrl"}})],1),_c("el-form-item",{attrs:{label:_vm.$t("setup.setup_profile.saml_certificate"),prop:"certificate"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:_vm.$t("setup.setup_profile.saml_security_certificate")},model:{value:_vm.sso.certificate,callback:function($$v){_vm.$set(_vm.sso,"certificate",$$v)},expression:"sso.certificate"}})],1),"domainSSO"===_vm.ssoType?_c("el-form-item",{attrs:{label:_vm.$t("setup.setup_profile.show_sso_link")}},[_c("el-switch",{model:{value:_vm.sso.showSSOLink,callback:function($$v){_vm.$set(_vm.sso,"showSSOLink",$$v)},expression:"sso.showSSOLink"}})],1):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm("ssoForm")}}},[_vm._v(" "+_vm._s(_vm.saving?"Saving...":_vm.$t("common._common._save")))])],1)])],1)],1)},ssoFormvue_type_template_id_5b84018a_scoped_true_staticRenderFns=[],ssoFormvue_type_script_lang_js={props:["entityId","loginUrl","logoutUrl","certificate","visibility","getSSOStatus","ssoType","updateUrl","showSSOLink"],data:function(){return{saving:!1,sso:{entityId:this.entityId,loginUrl:this.loginUrl,logoutUrl:this.logoutUrl,certificate:this.certificate,showSSOLink:this.showSSOLink},rules:{loginUrl:[{required:!0,message:"Please input IdP Login URL",trigger:"blur"}],certificate:[{required:!0,message:"Please input SAML Certificate",trigger:"blur"}]}}},mounted:function(){},methods:{closeDialog:function(){this.$emit("update:visibility",!1)},cancel:function(){this.$emit("canceled")},submitForm:function(ssoForm){var _this=this;this.$refs[ssoForm].validate((function(valid){if(valid){_this.saving=!0;var _this$sso=_this.sso,certificate=_this$sso.certificate,entityId=_this$sso.entityId,loginUrl=_this$sso.loginUrl,logoutUrl=_this$sso.logoutUrl,showSSOLink=_this$sso.showSSOLink,ssoData={};ssoData[_this.ssoType]={name:"SAML",ssoTypeEnum:"SAML",config:{entityId:entityId,loginUrl:loginUrl,certificate:certificate,logoutUrl:logoutUrl},showSSOLink:showSSOLink,isActive:!0},_this.$http.post(_this.updateUrl,ssoData).then((function(response){var status=response.status,errorMessage=response.data.errorMessage;errorMessage?(_this.$message.error(errorMessage),_this.saving=!1):200!==status||errorMessage||(_this.getSSOStatus("refresh"),_this.$message({type:"success",message:"SAML Configuration saved successfully!"}),_this.saving=!1,_this.resetForm(),_this.$emit("SSO configs saved"),_this.$emit("update:visibility",!1))}))}}))},resetForm:function(){this.$refs["ssoForm"].resetFields()}}},setup_ssoFormvue_type_script_lang_js=ssoFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_ssoFormvue_type_script_lang_js,ssoFormvue_type_template_id_5b84018a_scoped_true_render,ssoFormvue_type_template_id_5b84018a_scoped_true_staticRenderFns,!1,null,"5b84018a",null)
/* harmony default export */,ssoForm=component.exports,ssovue_type_script_lang_js={props:["showHeader"],data:function(){return{loading:!1,disabled:!1,showContent:!1,ssoStatusLoading:!1,isEnabled:!1,isCreateUserEnabled:!1,isNew:!1,showDialog:!1,ssoData:{spAcsURL:null,spEntityId:null,spMetadataURL:null,certificate:null,entityId:null,loginUrl:null,logoutUrl:null,id:null},ssoType:"",updateUrl:""}},computed:{},created:function(){this.getSSOStatus("oncreate"),this.ssoType=this.getSSOType(),this.updateUrl=this.getUpdateUrl(),this.downloadMetaUrl=this.downloadMetaUrl()},mounted:function(){},components:{ssoForm:ssoForm},methods:{setUpSSO:function(){this.ssoData.certificate=null,this.ssoData.entityId=null,this.ssoData.loginUrl=null,this.ssoData.logoutUrl=null,this.ssoData.showSSOLink=!1,this.showDialog=!0},configureSSO:function(){this.getSSOStatus("onedit")}}},setup_ssovue_type_script_lang_js=ssovue_type_script_lang_js,sso_component=(0,componentNormalizer/* default */.Z)(setup_ssovue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,sso=sso_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/81283.js.map