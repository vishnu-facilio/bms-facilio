(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[81734,38254,20470],{
/***/125434:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageLayout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/components/PageLayout.vue?vue&type=template&id=057f2152
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"portal-layout"},[_c("div",{staticClass:"portal-layout-header"},[_c("div",{staticClass:"header-details"},[_c("div",{staticClass:"tab-header"},[_c("div",{staticClass:"tab-name"},[_vm._v(" "+_vm._s(_vm.currentTab.name)+" ")]),_c("div",{staticClass:"header-section"},[_vm._t("header")],2)]),_c("div",{staticClass:"d-flex align-center justify-content-space mT10 height30"},[_c("div",[_vm._t("views",(function(){return[_c("ViewHeader",{attrs:{moduleName:_vm.moduleName,canShowViewsSidePanel:_vm.canShowViewsSidePanel,groupViews:_vm.groupViews,getRoute:_vm.getRoute,retainFilters:_vm.retainFilters},on:{"update:canShowViewsSidePanel":function($event){_vm.canShowViewsSidePanel=$event},"update:can-show-views-side-panel":function($event){_vm.canShowViewsSidePanel=$event},onChange:_vm.goToView}})]}))],2),_c("div",{staticClass:"d-flex align-center"},[_vm._t("header-2")],2)])])]),_c("div",{staticClass:"portal-layout-container"},[_vm._t("views-list",(function(){return[_vm.canShowViewsSidePanel?_c("ViewSideBar",{attrs:{canShowViewsSidePanel:_vm.canShowViewsSidePanel,groupViews:_vm.groupViews,moduleName:_vm.moduleName},on:{"update:canShowViewsSidePanel":function($event){_vm.canShowViewsSidePanel=$event},"update:can-show-views-side-panel":function($event){_vm.canShowViewsSidePanel=$event},onChange:_vm.goToView}}):_vm._e()]})),_c("div",{staticClass:"module-list-container"},[_vm._t("default")],2)],2)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(420629)),validation=__webpack_require__(990260),router=__webpack_require__(329435),ViewSideBar=__webpack_require__(65865),ViewHeaderWithoutGroupsvue_type_template_id_54f371f0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"view-header-wg",on:{click:_vm.toggleViewsSidePanel}},[_c("inline-svg",{class:["hamburger-icon",_vm.canShowViewsSidePanel&&"active"],attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"}}),_vm.$validation.isEmpty(_vm.currentViewDisplayName)?_c("div",{staticClass:"view-name-loading loading-shimmer"}):_c("div",{staticClass:"view-name"},[_vm._v(_vm._s(_vm.currentViewDisplayName))])],1)},ViewHeaderWithoutGroupsvue_type_template_id_54f371f0_staticRenderFns=[],ViewHeadervue_type_template_id_031ebc9c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flex-middle mT17"},[_vm.canShowOpenViewSideBar?[_c("inline-svg",{class:["portal-view-header-burger-icon",_vm.canShowViewsSidePanel&&"active"],attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"},nativeOn:{click:function($event){return _vm.openViewsSidePanel.apply(null,arguments)}}}),_c("div",{staticClass:"grp-view-name"},[_vm._v(" "+_vm._s(_vm.currentGroup?_vm.currentGroup.displayName:"")+" ")]),_vm.$validation.isEmpty(_vm.groupViews)?_vm._e():_c("div",{staticClass:"fc-separator-lg mL30 mR30"})]:_vm._e(),_c("div",{staticClass:"flex-middle flex-direction-row"},[_vm._l(_vm.activeViews,(function(view,index){return _c("router-link",{key:view.name+index,attrs:{to:_vm.getRoute(view)},scopedSlots:_vm._u([{key:"default",fn:function(ref){var navigate=ref.navigate;return[_c("a",{class:[view.name===_vm.currentView&&"router-link-exact-active active"],on:{click:navigate}},[_c("div",{staticClass:"label-txt-black pointer mR30"},[_vm._v(" "+_vm._s(view.displayName)+" "),_c("div",{staticClass:"portal-active-tab"})])])]}}],null,!0)})})),_vm.$validation.isEmpty(_vm.moreViews)?_vm._e():_c("el-dropdown",{staticClass:"mT3 pointer more-views-dropdown",attrs:{trigger:"click"},on:{command:_vm.goToView}},[_c("span",{staticClass:"el-dropdown-link"},[_c("inline-svg",{attrs:{src:"svgs/header-more"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.moreViews,(function(view,index){return _c("el-dropdown-item",{key:view.name+index,attrs:{command:view}},[_vm._v(" "+_vm._s(view.displayName)+" ")])})),1)],1)],2)],2)},ViewHeadervue_type_template_id_031ebc9c_staticRenderFns=[],slicedToArray=__webpack_require__(554621),ViewHeadervue_type_script_lang_js=(__webpack_require__(339772),__webpack_require__(689730),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(538077),{props:["canShowViewsSidePanel","moduleName","groupViews","getRoute"],computed:{canShowOpenViewSideBar:function(){var groupViews=this.groupViews;return!(0,validation/* isEmpty */.xb)(groupViews)},activeViews:function(){var currentGroup=this.currentGroup,currentView=this.currentView,_ref=currentGroup||{},views=_ref.views,maxViewCount=3,activeViews=[];if(!(0,validation/* isEmpty */.xb)(views)){var currentViewIdx=(views||[]).findIndex((function(view){return view.name===currentView}));currentViewIdx<maxViewCount?activeViews=views.slice(0,maxViewCount):(activeViews=views.slice(0,maxViewCount-1),activeViews.push(views[currentViewIdx]))}return activeViews},moreViews:function(){var currentGroup=this.currentGroup,activeViews=this.activeViews,_ref2=currentGroup||{},views=_ref2.views,activeViewNames=(activeViews||[]).map((function(view){return view.name}));return(views||[]).filter((function(view){return!activeViewNames.includes(view.name)}))||[]},currentView:function(){return this.$route.params.viewname},currentGroup:function(){var _this=this,groupViews=this.groupViews,selectedGroup=(groupViews||[]).find((function(group){var _ref3=group||{},views=_ref3.views,selectedView=(views||[]).find((function(v){return v.name===_this.currentView}));return!(0,validation/* isEmpty */.xb)(selectedView)}));return selectedGroup}},methods:{openViewsSidePanel:function(){this.$emit("update:canShowViewsSidePanel",!this.canShowViewsSidePanel)},openGroup:function(command){var group=(this.groupViews||[]).find((function(g){return g.displayName===command})),_ref4=group||{},views=_ref4.views,_ref5=views||[],_ref6=(0,slicedToArray/* default */.Z)(_ref5,1),initialView=_ref6[0];!(0,validation/* isEmpty */.xb)(initialView)&&this.goToView(initialView)},goToView:function(view){this.$emit("onChange",view)}}}),components_ViewHeadervue_type_script_lang_js=ViewHeadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ViewHeadervue_type_script_lang_js,ViewHeadervue_type_template_id_031ebc9c_render,ViewHeadervue_type_template_id_031ebc9c_staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewHeader=component.exports,ViewHeaderWithoutGroupsvue_type_script_lang_js={extends:ViewHeader,computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)({getCurrentViewDetail:"view/getCurrentViewDetail"})),{},{currentViewDisplayName:function(){var currentGroup=this.currentGroup,_this$currentView=this.currentView,currentView=void 0===_this$currentView?"":_this$currentView,currentViewDetail=this.currentViewDetail,_ref=currentGroup||{},currentViewList=_ref.views,_ref2=(currentViewList||[]).find((function(view){return view.name===currentView}))||{},displayName=_ref2.displayName;return displayName||(null===currentViewDetail||void 0===currentViewDetail?void 0:currentViewDetail.displayName)||""},currentViewDetail:function(){return this.getCurrentViewDetail()}}),methods:{toggleViewsSidePanel:function(){this.$emit("update:canShowViewsSidePanel",!this.canShowViewsSidePanel)}}},components_ViewHeaderWithoutGroupsvue_type_script_lang_js=ViewHeaderWithoutGroupsvue_type_script_lang_js,ViewHeaderWithoutGroups_component=(0,componentNormalizer/* default */.Z)(components_ViewHeaderWithoutGroupsvue_type_script_lang_js,ViewHeaderWithoutGroupsvue_type_template_id_54f371f0_render,ViewHeaderWithoutGroupsvue_type_template_id_54f371f0_staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewHeaderWithoutGroups=ViewHeaderWithoutGroups_component.exports,debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),LIST=router/* pageTypes */.As.LIST,PageLayoutvue_type_script_lang_js={props:["moduleName"],components:{ViewSideBar:ViewSideBar/* default */.Z,ViewHeader:ViewHeaderWithoutGroups},data:function(){return{canShowViewsSidePanel:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("view",{groupViews:function(state){return(0,validation/* isEmpty */.xb)(state.groupViews)?[]:state.groupViews},metaInfo:function(state){return state.metaInfo}})),(0,vuex_esm/* mapState */.rn)("webtabs",{currentTab:function(state){return state.selectedTab}})),{},{currentView:function(){return this.$route.params.viewname},retainFilters:function(){return["search","includeParentFilter"]}}),watch:{moduleName:{handler:function(newVal,oldVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_ref=_this.metaInfo||{},name=_ref.name,[oldVal,name].includes(newVal)||(0,validation/* isEmpty */.xb)(newVal)){_context.next=5;break}return _context.next=4,_this.$store.dispatch("view/clearViews");case 4:_this.loadViews();case 5:case"end":return _context.stop()}}),_callee)})))()},immediate:!0},currentView:{handler:function(value){
// If current view is removed from URL, loadViews again and navigate to first group
(0,validation/* isEmpty */.xb)(value)?this.loadViews():this.loadViewDetails()},immediate:!0}},methods:{loadViews:debounce_default()((0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",this.$store.dispatch("view/loadGroupViews",{moduleName:this.moduleName}).then(this.initViews));case 1:case"end":return _context2.stop()}}),_callee2,this)}))),200),loadViewDetails:debounce_default()((0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var viewName,moduleName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return viewName=this.currentView,moduleName=this.moduleName,_context3.abrupt("return",this.$store.dispatch("view/loadViewDetail",{viewName:viewName,moduleName:moduleName}).catch((function(){})));case 2:case"end":return _context3.stop()}}),_callee3,this)}))),200),initViews:function(){if(!this.currentView){var _ref4=this.groupViews.find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref4.views;(0,validation/* isEmpty */.xb)(views)||this.goToView(views[0])}},goToView:function(view){var route=this.getRoute(view);this.$router.replace(route)},getRoute:function(view){if(!(0,validation/* isEmpty */.xb)(view&&view.name)){var _ref5=this.$route||{},query=_ref5.query,id=this.currentTab.id,_ref6=(0,router/* findRouteForTab */.OD)(id,{pageType:LIST})||{},_ref6$name=_ref6.name,name=void 0===_ref6$name?null:_ref6$name;return name?{name:name,params:{viewname:view.name},query:query}:null}}}},components_PageLayoutvue_type_script_lang_js=PageLayoutvue_type_script_lang_js,PageLayout_component=(0,componentNormalizer/* default */.Z)(components_PageLayoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageLayout=PageLayout_component.exports},
/***/65865:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ViewSideBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/components/ViewSideBar.vue?vue&type=template&id=2be7bd24
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",{attrs:{name:"fade"}},[_c("div",{staticClass:"portal-view-sidebar-fixed"},[_c("div",{staticClass:"side-bar-view"},[_vm._v(" "+_vm._s(_vm.$t("common._common.views"))+" ")]),_c("div",{staticClass:"portal-view-search-bar"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Search",type:"search","prefix-icon":"el-icon-search"},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}})],1),_c("div",{staticClass:"portal-view-sidebar"},_vm._l(_vm.filteredList,(function(group,grpIndex){return _c("div",{key:group.id+"_"+grpIndex,class:[_vm.$validation.isEmpty(_vm.searchText)&&"mB10"]},[_vm.$validation.isEmpty(group.views)?_vm._e():[_vm.$validation.isEmpty(_vm.searchText)?_c("div",{staticClass:"view-grp-name"},[_vm._v(" "+_vm._s(group.displayName||group.name)+" ")]):_vm._e(),_vm._l(group.views,(function(view,index){return _c("div",{key:index,staticClass:"view-item",class:_vm.isActiveView(view)?"active":"",on:{click:function($event){return _vm.changeView(view,group)}}},[_c("el-tooltip",{attrs:{content:view.displayName,placement:"top",manual:view.displayName.length<25,"open-delay":1e3}},[_c("div",{staticClass:"ellipsis"},[_vm._v(" "+_vm._s(view.displayName)+" ")])])],1)}))]],2)})),0)])])},staticRenderFns=[],ViewsSidePanel=__webpack_require__(409886),ViewSideBarvue_type_script_lang_js={extends:ViewsSidePanel/* default */.Z},components_ViewSideBarvue_type_script_lang_js=ViewSideBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ViewSideBarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewSideBar=component.exports},
/***/138254:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ModuleList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/custom-module/ModuleList.vue?vue&type=template&id=8baa5a96&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("PageLayout",{attrs:{moduleName:_vm.moduleName}},[_c("template",{slot:"title"},[_vm._v(" "+_vm._s(_vm.moduleDisplayName)+" ")]),_c("template",{slot:"header"},[_vm.isEmpty(_vm.viewname)?_vm._e():[_c("AdvancedSearchWrapper",{key:"ftags-list-"+_vm.moduleName,attrs:{filters:_vm.filters,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,hideSaveView:!0}})],_vm.isBulkActionLicenseEnabled?_c("CustomButton",{key:_vm.moduleName+"_"+_vm.viewname+"_"+_vm.POSITION.LIST_TOP,attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_TOP},on:{onSuccess:_vm.onCustomButtonSuccess}}):_vm._e(),_c("CreateButton",{on:{click:_vm.redirectToFormCreation}},[_vm._v(" "+_vm._s(_vm.createBtnText)+" ")])],2),_c("template",{slot:"header-2"},[_vm.isEmpty(_vm.viewname)?_vm._e():[_c("pagination",{attrs:{total:_vm.recordCount,perPage:_vm.perPage,currentPageCount:_vm.currentPageCount}}),_vm.recordCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.sort"),placement:"bottom"}},[_c("Sort",{key:_vm.moduleName+"-sort",attrs:{moduleName:_vm.moduleName},on:{onSortChange:_vm.updateSort}})],1),_vm.hasPermission("EXPORT")?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_vm.hasPermission("EXPORT")?_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.export"),"open-delay":500,placement:"top",tabindex:-1}},[_c("FExportSettings",{attrs:{module:_vm.moduleName,viewDetail:_vm.viewDetail,showViewScheduler:!1,showMail:!1,filters:_vm.filters}})],1):_vm._e()]],2),_vm.showLoading?_c("div",{staticClass:"list-loading"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm.isEmpty(_vm.viewname)?_c("div",{staticClass:"portal-view-empty-state-container"},[_c("inline-svg",{staticClass:"d-flex module-view-empty-state",attrs:{src:"svgs/no-configuration",iconClass:"icon"}}),_c("div",{staticClass:"line-height20 nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.no_view_config"))+" ")])],1):_vm.isEmpty(_vm.records)?_c("div",{staticClass:"list-empty-state"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/workorder",iconClass:"icon text-center icon-xxxxlg height-auto"}}),_c("div",{staticClass:"line-height20 nowo-label"},[_vm._v(" "+_vm._s(_vm.emptyStateText)+" ")])],1):_c("div",{staticClass:"portal-common-list"},[_vm.isBulkActionLicenseEnabled&&!_vm.$validation.isEmpty(_vm.selectedListItemsIds)?_c("div",{staticClass:"portal-table-header-actions"},[_vm.canShowDelete?_c("button",{staticClass:"portal-bulk-action-delete",on:{click:function($event){return _vm.deleteRecords(_vm.selectedListItemsIds)}}},[_vm._v(" "+_vm._s(_vm.$t("custommodules.list.delete"))+" ")]):_vm._e(),_c("CustomButton",{key:_vm.moduleName+"_"+_vm.viewname+"_"+_vm.POSITION.LIST_BAR,attrs:{selectedRecords:_vm.selectedListItemsObj,moduleName:_vm.moduleName,position:_vm.POSITION.LIST_BAR},on:{onSuccess:_vm.onCustomButtonSuccess}})],1):_vm._e(),_c("CommonList",{attrs:{moduleName:_vm.moduleName,viewDetail:_vm.viewDetail,records:_vm.records,columnConfig:_vm.columnConfig,slotList:_vm.slotList,redirectToOverview:_vm.redirectToOverview,refreshList:_vm.onCustomButtonSuccess,canShowCustomButton:_vm.isBulkActionLicenseEnabled,hideListSelect:!_vm.isBulkActionLicenseEnabled},on:{"selection-change":_vm.selectItems},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+record[_vm.slotList[0].name]))])])]}},{key:_vm.slotList[1].criteria,fn:function(ref){var record=ref.record;return[_c("router-link",{staticClass:"d-flex fw5 label-txt-black ellipsis main-field-column",attrs:{to:_vm.redirectToOverview(record.id)}},[record[_vm.photoFieldName]>0?_c("div",[_c("img",{staticClass:"img-container",attrs:{src:record.getImage(_vm.photoFieldName)}})]):_vm._e(),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$getProperty(record,_vm.mainFieldName,"---")||"---",placement:"top-end","open-delay":600}},[_c("div",{staticClass:"self-center width200px"},[_c("span",{staticClass:"list-main-field"},[_vm._v(" "+_vm._s(_vm.$getProperty(record,_vm.mainFieldName,"---")||"---")+" ")])])])],1)]}},_vm.hasActionPermissions?{key:_vm.slotList[2].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex text-center"},[_vm.canShowEdit&&record.canEdit?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editModule(record)}}}):_vm._e(),_vm.canShowDelete?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecords([record.id])}}}):_vm._e()])]}}:null],null,!0)})],1)],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),CommonModuleList=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(347446)),PageLayout=__webpack_require__(125434),CreateButtonvue_type_template_id_ae030fbc_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.hasPermission?_c("el-button",{staticClass:"fc-create-btn create-btn uppercase",staticStyle:{background:"#ef508f"},on:{click:_vm.handleClick}},[_vm.$validation.isEmpty(_vm.buttonDisplayName)?_vm._t("default"):[_vm._v(" "+_vm._s(_vm.buttonDisplayName)+" ")]],2):_vm._e()},CreateButtonvue_type_template_id_ae030fbc_staticRenderFns=[],vuex_esm=(__webpack_require__(670560),__webpack_require__(420629)),validation=__webpack_require__(990260),CreateButtonvue_type_script_lang_js={props:["to"],computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("webtabs",{currentTab:function(state){return state.selectedTab}})),(0,vuex_esm/* mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{hasPermission:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("CREATE",currentTab)},buttonDisplayName:function(){var currentTab=this.currentTab,configJSON=currentTab.configJSON,_ref=configJSON||{},actionName=_ref.actionName;return actionName}}),methods:{handleClick:function(){(0,validation/* isEmpty */.xb)(this.to)||this.$router.push(this.to),this.$emit("click")}}},components_CreateButtonvue_type_script_lang_js=CreateButtonvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CreateButtonvue_type_script_lang_js,CreateButtonvue_type_template_id_ae030fbc_render,CreateButtonvue_type_template_id_ae030fbc_staticRenderFns,!1,null,null,null)
/* harmony default export */,CreateButton=component.exports,AdvancedSearchWrapper=__webpack_require__(207001),ModuleListvue_type_script_lang_js={extends:CommonModuleList["default"],components:{PageLayout:PageLayout/* default */.Z,CreateButton:CreateButton,AdvancedSearchWrapper:AdvancedSearchWrapper/* default */.Z},data:function(){return{columnConfig:{fixedColumns:["id","name"],fixedSelectableColumns:["photo"],availableColumns:[],showLookupColumns:!1}}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("webtabs",{currentTab:function(state){return state.selectedTab}})),(0,vuex_esm/* mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{mainFieldName:function(){return this.mainFieldNamesList[0]||"name"},mainFieldNamesList:function(){var _ref=this.metaInfo||{},fields=_ref.fields,mainFields=(fields||[]).filter((function(fld){return fld.mainField})),mainFieldsNames=(mainFields||[]).map((function(fld){return fld.name}));return mainFieldsNames},canShowEdit:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("UPDATE",currentTab)},canShowDelete:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("DELETE",currentTab)},hasActionPermissions:function(){var canShowEdit=this.canShowEdit,canShowDelete=this.canShowDelete;return canShowEdit||canShowDelete},hasPagination:function(){var currentPageCount=this.currentPageCount,recordCount=this.recordCount;return!(0,validation/* isEmpty */.xb)(currentPageCount)&&parseInt(currentPageCount)>0||!(0,validation/* isEmpty */.xb)(recordCount)&&parseInt(recordCount)>0},isBulkActionLicenseEnabled:function(){return this.$helpers.isLicenseEnabled("BULK_ACTION_IN_PORTAL")}}),watch:{mainFieldNamesList:{handler:function(newVal){if(!(0,validation/* isEmpty */.xb)(newVal)){var _ref2=this.columnConfig||{},fixedColumns=_ref2.fixedColumns,newFixedCol=newVal.filter((function(fldName){return!fixedColumns.includes(fldName)}));fixedColumns=[].concat((0,toConsumableArray/* default */.Z)(fixedColumns),(0,toConsumableArray/* default */.Z)(newFixedCol)),this.$set(this.columnConfig,"fixedColumns",fixedColumns)}},immediate:!0}}},custom_module_ModuleListvue_type_script_lang_js=ModuleListvue_type_script_lang_js,ModuleList_component=(0,componentNormalizer/* default */.Z)(custom_module_ModuleListvue_type_script_lang_js,render,staticRenderFns,!1,null,"8baa5a96",null)
/* harmony default export */,ModuleList=ModuleList_component.exports},
/***/181734:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return WorkOrderList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/workorder/WorkOrderList.vue?vue&type=template&id=6fe7817a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("PageLayout",{attrs:{moduleName:_vm.moduleName}},[_c("template",{slot:"title"},[_vm._v(" "+_vm._s(_vm.$t("portal.tenant.work_request"))+" ")]),_c("template",{slot:"header"},[_c("AdvancedSearchWrapper",{key:"ftags-list-"+_vm.moduleName,attrs:{filters:_vm.filters,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,hideSaveView:!0}}),_vm.isBulkActionLicenseEnabled?_c("CustomButton",{key:_vm.moduleName+"_"+_vm.viewname+"_"+_vm.POSITION.LIST_TOP,attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_TOP},on:{onSuccess:_vm.onCustomButtonSuccess}}):_vm._e(),_c("CreateButton",{on:{click:_vm.redirectToFormCreation}},[_vm._v(" "+_vm._s(_vm.$t("common._common._new"))+" "+_vm._s(_vm.moduleDisplayName?_vm.moduleDisplayName:"")+" ")])],1),_c("template",{slot:"header-2"},[_c("pagination",{attrs:{total:_vm.recordCount,perPage:_vm.perPage,currentPageCount:_vm.currentPageCount}}),_vm.recordCount>0?_c("span",{staticClass:"separator pL10"},[_vm._v("|")]):_vm._e(),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.sort"),placement:"bottom"}},[_c("Sort",{key:_vm.moduleName+"-sort",attrs:{moduleName:_vm.moduleName},on:{onSortChange:_vm.updateSort}})],1),_c("span",{staticClass:"separator pL10"},[_vm._v("|")]),_vm.$hasPermission(_vm.moduleName+":EXPORT")?_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.export"),"open-delay":500,placement:"top"}},[_c("FExportSettings",{attrs:{module:_vm.moduleName,viewDetail:_vm.viewDetail,showViewScheduler:!1,showMail:!1,filters:_vm.filters}})],1):_vm._e()],1),_vm.showLoading?_c("div",{staticClass:"list-loading"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.records)&&!_vm.showLoading?_c("div",{staticClass:"list-empty-state"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"mT10 fc-black-dark f16 fw6"},[_vm._v(" "+_vm._s(_vm.$t("tenant.work.no_work_req"))+" ")]),_c("div",{staticClass:"fc-grayish f14 line-height30"},[_vm._v(" "+_vm._s(_vm.$t("tenant.work.no_work_req_view"))+" ")])],1):_vm._e(),_vm.showLoading||_vm.$validation.isEmpty(_vm.records)?_vm._e():[_c("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"view-column-chooser",on:{click:function($event){_vm.showColumnSettings=!0}}},[_c("img",{staticStyle:{"text-align":"center",position:"absolute",top:"35%",right:"29%"},attrs:{src:__webpack_require__(266707)}})]),_c("div",{staticClass:"portal-common-list"},[!_vm.$validation.isEmpty(_vm.selectedListItemsIds)&&_vm.isBulkActionLicenseEnabled?_c("div",{staticClass:"portal-table-header-actions"},[_vm.canShowDelete?_c("button",{staticClass:"portal-bulk-action-delete",on:{click:function($event){return _vm.deleteRecords(_vm.selectedListItemsIds)}}},[_vm._v(" "+_vm._s(_vm.$t("custommodules.list.delete"))+" ")]):_vm._e(),_c("CustomButton",{key:_vm.moduleName+"_"+_vm.viewname+"_"+_vm.POSITION.LIST_BAR,staticClass:"custom-button",attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_BAR,selectedRecords:_vm.selectedListItemsObj},on:{onSuccess:_vm.onCustomButtonSuccess}})],1):_vm._e(),_c("CommonList",{attrs:{viewDetail:_vm.viewDetail,records:_vm.records,columnConfig:_vm.columnConfig,slotList:_vm.slotList,redirectToOverview:_vm.redirectToOverview,moduleName:_vm.moduleName,refreshList:_vm.onCustomButtonSuccess,canShowCustomButton:_vm.isBulkActionLicenseEnabled,hideListSelect:!_vm.isBulkActionLicenseEnabled},on:{"selection-change":_vm.selectItems},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+record[_vm.slotList[0].name]))])])]}},{key:_vm.slotList[1].criteria,fn:function(ref){var record=ref.record;return[_c("router-link",{staticClass:"d-flex fw5 label-txt-black ellipsis main-field-column",attrs:{to:_vm.redirectToOverview(record.id)}},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$getProperty(record,_vm.mainFieldName,"---")||"---",placement:"top-end","open-delay":600}},[_c("div",{staticClass:"self-center width200px"},[_c("span",{staticClass:"list-main-field"},[_vm._v(" "+_vm._s(_vm.$getProperty(record,_vm.mainFieldName,"---")||"---")+" ")])])])],1)]}},{key:_vm.slotList[2].criteria,fn:function(ref){var record=ref.record;return[_c("span",{on:{click:function($event){record.noOfAttachments&&record.noOfAttachments>0&&_vm.showAttachments(record)}}},[_c("inline-svg",{attrs:{src:"svgs/attachment-icon",iconClass:"icon vertical-middle icon-sm fill-grey2"}}),_vm._v(" "+_vm._s(record.noOfAttachments?record.noOfAttachments:"0")+" ")],1)]}},{key:_vm.slotList[3].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"text-align-center"},[_c("div",{staticClass:"d-flex",on:{click:function($event){return _vm.showComments(record)}}},[_c("inline-svg",{staticClass:"mT5 mR5",attrs:{src:"comment",iconClass:"icon icon-xs"}}),_c("div",[_vm._v(" "+_vm._s(record.noOfNotes&&record.noOfNotes>0?record.noOfNotes:"0")+" ")])],1)])]}},{key:_vm.slotList[4].criteria,fn:function(ref){var record=ref.record;return[_vm._v(" "+_vm._s(_vm.$validation.isEmpty(record.urgency)?"---":_vm.WOUrgency[record.urgency])+" ")]}},_vm.hasActionPermissions?{key:_vm.slotList[5].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex text-center"},[_vm.canShowEdit&&record.canEdit?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":!0,title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editModule(record)}}}):_vm._e(),_vm.canShowDelete?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecords([record.id])}}}):_vm._e()])]}}:null,{key:_vm.slotList[6].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex"},[record.noOfTasks?_c("inline-svg",{staticClass:"mR5",attrs:{src:"done",iconClass:"icon vertical-middle icon-xs fill-grey2"}}):_vm._e(),_c("div",[_vm._v(_vm._s(_vm.formatTaskCompletionStatus(record)))])],1)]}},{key:_vm.slotList[7].criteria,fn:function(ref){var record=ref.record;return[_vm.canShowEdit?_c("el-popover",{attrs:{placement:"bottom",width:"200","popper-class":"fcPopover"}},[_c("div",{staticClass:"max-height400 overflo-auto"},[_c("ul",_vm._l(_vm.ticketType,(function(value,key){return _c("li",{key:key,staticClass:"el-dropdown-menu__item",on:{click:function($event){return _vm.updateRecordType(record,value)}}},[_vm._v(" "+_vm._s(value.name)+" ")])})),0)]),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._v(" "+_vm._s(record.type&&record.type.id?_vm.getTicketType(record.type.id).name:"---")+" "),_vm.canShowEdit?_c("i",{staticClass:"\n                      fa fa-sort-desc\n                      wl-icon-downarrow\n                      picklist-downarrow\n                    ",attrs:{"aria-hidden":"true"}}):_vm._e()])]):_c("div",[_vm._v(" "+_vm._s(record.type&&record.type.id?_vm.getTicketType(record.type.id).name:"---")+" ")])]}},{key:_vm.slotList[8].criteria,fn:function(ref){var record=ref.record;return[_vm.canShowEdit?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click","popper-class":"fcPopover"}},[_c("div",{staticClass:"max-height400 overflo-auto"},[_c("ul",_vm._l(_vm.ticketPriority,(function(value,key){return _c("li",{key:key,staticClass:"el-dropdown-menu__item",on:{click:function($event){return _vm.updateRecordPriority(record,value)}}},[_vm._v(" "+_vm._s(value.displayName)+" ")])})),0)]),_c("div",{attrs:{slot:"reference"},slot:"reference"},[record.priority?_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:record.priority.colour},attrs:{"aria-hidden":"true"}}):_vm._e(),_vm._v(" "+_vm._s(_vm.getWorkorderPriority(record.priority))+" "),_c("i",{staticClass:"\n                      fa fa-sort-desc\n                      wl-icon-downarrow\n                      picklist-downarrow\n                    ",attrs:{"aria-hidden":"true"}})])]):_c("div",[record.priority?_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:record.priority.colour},attrs:{"aria-hidden":"true"}}):_vm._e(),_vm._v(" "+_vm._s(_vm.getWorkorderPriority(record.priority))+" ")])]}},{key:_vm.slotList[9].criteria,fn:function(ref){var record=ref.record;return[_vm.canShowEdit?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click","popper-class":"fcPopover"}},[_c("div",{staticClass:"max-height400 overflo-auto"},[_c("ul",_vm._l(_vm.ticketcategory,(function(value,key){return _c("li",{key:key,staticClass:"el-dropdown-menu__item",on:{click:function($event){return _vm.updateRecordCategory(record,value)}}},[_vm._v(" "+_vm._s(value.displayName)+" ")])})),0)]),_c("div",{attrs:{slot:"reference"},slot:"reference"},[_vm._v(" "+_vm._s(_vm.getLookUpDisplayName("category",record)||"---")+" "),_c("i",{staticClass:"\n                      fa fa-sort-desc\n                      wl-icon-downarrow\n                      picklist-downarrow\n                    ",attrs:{"aria-hidden":"true"}})])]):_c("div",[_vm._v(" "+_vm._s(_vm.getLookUpDisplayName("category",record)||"---")+" ")])]}},{key:_vm.slotList[10].criteria,fn:function(ref){var record=ref.record;return[_c("div",{on:{click:function($event){return _vm.canShowSpaceAssetChooser(record)}}},[record.resource&&-1!==record.resource.id?_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"pR5"},[1===record.resource.resourceType?_c("img",{staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(572902)}}):_c("img",{staticStyle:{height:"11px",width:"14px"},attrs:{src:__webpack_require__(30684)}})]),_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"q-item-label ellipsis max-width140px",attrs:{small:"","data-position":"bottom",title:record.resource.name}},[_vm._v(" "+_vm._s(record.resource.name)+" ")])]):_c("div",[_c("span",{staticClass:"q-item-label secondary-color color-d"},[_vm._v(" ---"+_vm._s(_vm.$t("maintenance.wr_list.space_asset"))+"--- ")])])])]}},{key:_vm.slotList[11].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"wo-assigned-avatar fL"},[_c("user-avatar",{attrs:{size:"md",user:record.assignedTo,group:record.assignmentGroup,showPopover:!0,showLabel:!0,moduleName:"workorder"}})],1),_vm.canShowTeamStaffChooser(record)?_c("f-assignment",{attrs:{viewtype:"view",record:record,siteId:_vm.$getProperty(record,"siteId",null)},on:{assignactivity:_vm.onAssignWo}}):_vm._e()]}}],null,!0)})],1),_c("outside-click",{staticClass:"comment-dialog",staticStyle:{top:"50px",position:"fixed"},attrs:{visibility:_vm.showCommentsWindow}},[_c("div",[_c("div",{staticClass:"comment-dialog-header"},[_c("h3",{staticClass:"comment-dialog-heading",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.comments"))+" "),_c("span",[_vm._v(" "+_vm._s(_vm.selectedWorkorder.noOfNotes>0?"("+_vm.selectedWorkorder.noOfNotes+")":"")+" ")])]),_c("div",{staticClass:"comment-close"},[_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Close",placement:"bottom"}},[_c("i",{staticClass:"el-icon-close",attrs:{"aria-hidden":"true"},on:{click:function($event){_vm.showCommentsWindow=!1}}})])],1)]),_c("div",{staticClass:"comment-dialog-body"},[_c("comments",{attrs:{module:"ticketnotes",parentModule:"workorder",setNoOfNotesLength:_vm.setNoOfNotesLength,record:_vm.selectedWorkorder,isPortalsPage:!0}})],1)])]),_vm.showAttachmentsWindow?_c("WorkOrderAttachmentDialog",{attrs:{selectedWorkorder:_vm.selectedWorkorder},on:{onClose:function($event){_vm.showAttachmentsWindow=!1}}}):_vm._e()]],2)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),FExportSettings=(__webpack_require__(648324),__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(425728),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(538077),__webpack_require__(641435)),WorkOrderAttachmentDialogvue_type_template_id_16a80392_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-drawer",{staticClass:"el-drawer-header",attrs:{modal:!1,size:"31%",visible:!0,"with-header":!1,"before-close":_vm.close,"modal-append-to-body":!1}},[_c("div",{staticClass:"el-drawer-body"},[_c("div",{staticClass:"comment-dialog-header",staticStyle:{"flex-shrink":"0"}},[_c("h3",{staticClass:"comment-dialog-heading",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.attachments"))+" "),_c("span",[_vm._v(" "+_vm._s(_vm.noOfAttachments)+" ")])]),_c("div",{staticClass:"comment-close"},[_c("i",{staticClass:"el-icon-close",attrs:{"aria-hidden":"true"},on:{click:function($event){return _vm.close()}}})])]),_c("div",{staticClass:"comment-dialog-body flex-grow overflow-scroll"},[_c("Attachments",{attrs:{module:"ticketattachments",record:_vm.selectedWorkorder,diasbleAttachment:!0}})],1)])])},WorkOrderAttachmentDialogvue_type_template_id_16a80392_scoped_true_staticRenderFns=[],SummaryAttachment=__webpack_require__(526971),WorkOrderAttachmentDialogvue_type_script_lang_js={props:["selectedWorkorder"],components:{Attachments:SummaryAttachment/* default */.Z},computed:{noOfAttachments:function(){var _ref=this.selectedWorkorder||{},noOfAttachments=_ref.noOfAttachments;return noOfAttachments>0?"( ".concat(noOfAttachments," )"):""}},methods:{close:function(){this.$emit("onClose")}}},workorder_WorkOrderAttachmentDialogvue_type_script_lang_js=WorkOrderAttachmentDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(workorder_WorkOrderAttachmentDialogvue_type_script_lang_js,WorkOrderAttachmentDialogvue_type_template_id_16a80392_scoped_true_render,WorkOrderAttachmentDialogvue_type_template_id_16a80392_scoped_true_staticRenderFns,!1,null,"16a80392",null)
/* harmony default export */,WorkOrderAttachmentDialog=component.exports,ModuleList=__webpack_require__(138254),Comments2=__webpack_require__(487565),OutsideClick=__webpack_require__(21864),api=__webpack_require__(32284),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(586529),User=__webpack_require__(426803),FAssignment=__webpack_require__(383274),WorkOrderListvue_type_script_lang_js={extends:ModuleList["default"],components:{WorkOrderAttachmentDialog:WorkOrderAttachmentDialog,FExportSettings:FExportSettings/* default */.Z,Comments:Comments2/* default */.Z,OutsideClick:OutsideClick/* default */.Z,UserAvatar:User/* default */.Z,FAssignment:FAssignment/* default */.Z},created:function(){this.$store.dispatch("loadTicketStatus",this.moduleName),this.$store.dispatch("view/loadModuleMeta",this.moduleName),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketType")},data:function(){return{showColumnSettings:!1,columnConfig:{fixedColumns:["id","subject"],availableColumns:["noOfNotes","noOfTasks","noOfAttachments"],showLookupColumns:!1,lookupToShow:["vendor"]},WOUrgency:{1:"Not Urgent",2:"Urgent",3:"Emergency"},showCommentsWindow:!1,showAttachmentsWindow:!1,selectedWorkorder:{},showSpaceAssetDialog:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatus","isStatusLocked","getTicketType","getApprovalStatus","getTicketPriority","getTicketCategory"])),(0,vuex_esm/* mapState */.rn)({viewDetail:function(state){return state.view.currentViewDetail},ticketType:function(state){return state.ticketType},ticketcategory:function(state){return state.ticketCategory},ticketPriority:function(state){return state.ticketPriority}})),{},{currentViewDetail:function(){var viewDetail=this.viewDetail,filters=this.filters;return filters?"Filtered View":(viewDetail||{}).displayName||""},slotList:function(){return[{name:"localId",isHardcodedColumn:!0,columnAttrs:{"min-width":110,label:"ID",fixed:"left"}},{criteria:JSON.stringify({name:"subject"})},{criteria:JSON.stringify({name:"noOfAttachments"})},{criteria:JSON.stringify({name:"noOfNotes"})},{criteria:JSON.stringify({name:"urgency"})},{name:"editDelete",isActionColumn:!0,columnAttrs:{width:130,class:"visibility-visible-actions",fixed:"right"}},{criteria:JSON.stringify({name:"noOfTasks"})},{criteria:JSON.stringify({name:"type"})},{criteria:JSON.stringify({name:"priority"})},{criteria:JSON.stringify({name:"category"})},{criteria:JSON.stringify({name:"resource"})},{criteria:JSON.stringify({name:"assignedTo"})}]}}),watch:{viewDetail:function(){var _ref=this.viewDetail||{},_ref$sortFields=_ref.sortFields,sortFields=void 0===_ref$sortFields?[]:_ref$sortFields;if(!(0,validation/* isEmpty */.xb)(sortFields)){var _this$$getProperty=this.$getProperty(sortFields[0],"sortField",{}),name=_this$$getProperty.name;this.sortConfig={orderType:sortFields[0].isAscending?"asc":"desc",orderBy:name||""}}}},methods:{canShowTeamStaffChooser:function(workorder){return!(0,validation/* isEmpty */.xb)(workorder)&&this.hasChangeOwnershipPermission&&this.canShowEdit},showComments:function(workorder){this.selectedWorkorder=workorder,this.showCommentsWindow=!0},showAttachments:function(workorder){this.selectedWorkorder=workorder,this.showAttachmentsWindow=!0},setNoOfNotesLength:function(length){this.$set(this.selectedWorkorder,"noOfNotes",length)},onAssignWo:function(assignToObj){var _this=this;if(assignToObj){var woIds=this.$getProperty(assignToObj,"id",[]);woIds.forEach((function(woId){var workOrder=_this.records.find((function(wo){return wo.id===woId}));if(!(0,validation/* isEmpty */.xb)(workOrder)){var assignedTo=assignToObj.assignedTo,assignmentGroup=assignToObj.assignmentGroup,status=assignToObj.status,_ref2=workOrder.status||{},wOStatus=_ref2.status,index=_this.records.findIndex((function(wo){return wo.id===woId}));if(workOrder.id===woId){if(!(0,validation/* isEmpty */.xb)(assignedTo)){var id=assignedTo.id;workOrder.assignedTo=-1!==id?assignedTo:null}if(!(0,validation/* isEmpty */.xb)(assignmentGroup)){var _id=assignmentGroup.id;workOrder.assignmentGroup=-1!==_id?assignmentGroup:null}"Submitted"===wOStatus&&status&&(workOrder.status=status)}_this.records.splice(index,1,workOrder)}}))}},hasChangeOwnershipPermission:function(){return isWebTabsEnabled()?this.$hasPermission("".concat(this.moduleName,":UPDATE_CHANGE_OWNERSHIP")):this.$hasPermission("".concat(this.moduleName,":CHANGE_OWNERSHIP"))},canShowSpaceAssetChooser:function(workorder){this.canShowEdit&&(this.showSpaceAssetDialog=!0,this.workOrder=workorder,this.workorderSelected=workorder.id)},getLookUpDisplayName:function(fieldName,data){var _ref3=data[fieldName]||{},primaryValue=_ref3.primaryValue,name=_ref3.name,displayName=_ref3.displayName,subject=_ref3.subject,value=displayName||name||subject;return(0,validation/* isEmpty */.xb)(primaryValue)?value:primaryValue},getWorkorderPriority:function(priority){if(!priority||!priority.priority||!this.ticketPriority)return"---";var prio=this.ticketPriority.filter((function(tp){return tp.id===priority.id}));return 1!==prio.length?"---":prio[0].displayName},formatTaskCompletionStatus:function(wo){return wo&&wo.noOfTasks?wo.noOfClosedTasks?wo.noOfClosedTasks+"/"+wo.noOfTasks:"0/"+wo.noOfTasks:"---"},updateRecordType:function(wo,value){this.updateRecordWithV3(wo,{type:value})},updateRecordCategory:function(wo,value){this.updateRecordWithV3(wo,{category:value})},updateRecordPriority:function(wo,value){this.updateRecordWithV3(wo,{priority:value})},updateRecordResource:function(wo,value){this.updateRecordWithV3(wo,{resource:value})},updateRecordWithV3:function(wo,data){var _this2=this;api/* API */.bl.updateRecord(this.moduleName,{id:+wo.id,data:data}).then((function(){_this2.$message.success(_this2.$t("maintenance._workorder.wo_update_success"))})).then((function(){_this2.loadRecords()})).catch((function(){_this2.$message.error(_this2.$t("maintenance._workorder.wo_update_failed"))}))}}},workorder_WorkOrderListvue_type_script_lang_js=WorkOrderListvue_type_script_lang_js,WorkOrderList_component=(0,componentNormalizer/* default */.Z)(workorder_WorkOrderListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkOrderList=WorkOrderList_component.exports},
/***/487565:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Comments2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/Comments2.vue?vue&type=template&id=baa28728
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-new-comments fc-comments row"},[_c("div",{staticClass:"col-12 scroll-new"},[_c("notes",{staticClass:"assetsnotes new-summary-block fc-visibility-gicon-visible flex-grow overflow-y-scroll",attrs:{module:"ticketnotes",parentModule:"workorder",record:_vm.record,notify:!0,layoutParams:500,resizeWidget:this.resizeWidget,isActive:!1,forWO:!0,listViewComments:!0}})],1)])},staticRenderFns=[],Notes=(__webpack_require__(228436),__webpack_require__(120470)),Comments2vue_type_script_lang_js={extends:Notes["default"],props:["record","moduleName","details","layoutParams","widget","resizeWidget"],components:{Notes:Notes["default"]},data:function(){return{markdownshow:!1}},methods:{markdownhelplist:function(){this.markdownshow=!0},focusCommentBox:function(){this.commentFocus=!0},blurCommentBox:function(){!this.newComment.body||this.newComment.body.trim()}}},relatedlist_Comments2vue_type_script_lang_js=Comments2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_Comments2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Comments2=component.exports},
/***/526971:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SummaryAttachment}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/SummaryAttachment.vue?vue&type=template&id=3eb46d89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-attachments p0"},[_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",[_c("div",{staticClass:"row fc-summary-attchment",staticStyle:{"padding-top":"20px","margin-left":"15px","margin-right":"15px","margin-bottom":"20px","padding-left":"0px"}},_vm._l(_vm.attachments,(function(attachment){return _c("el-row",{key:attachment.attachmentId,staticStyle:{"border-bottom":"1px solid #ededed",width:"100%","padding-top":"10px","padding-bottom":"10px"}},[_c("el-col",{attrs:{span:22}},[_c("el-col",{staticClass:"mT5",attrs:{span:2}},[_c("img",{staticClass:"svg-icon",staticStyle:{width:"20px"},attrs:{src:__webpack_require__(250620)}})]),_c("el-col",{attrs:{span:18}},[_c("div",[attachment.previewUrl?_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                  placement: 'top',\n                  animation: 'shift-away',\n                  arrow: true,\n                }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:attachment.fileName},on:{click:function($event){return _vm.selectedFile(attachment)}}},[_vm._v(_vm._s(attachment.fileName))]):_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                  placement: 'top',\n                  animation: 'shift-away',\n                  arrow: true,\n                }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:attachment.fileName}},[_vm._v(_vm._s(attachment.fileName))]),_vm.getUser(attachment)>0?_c("div",{staticClass:"col-4 comment-file mT2",staticStyle:{border:"none"}},[_vm._v(" "+_vm._s(_vm.getUser(attachment))+" "),attachment.createdTime?_c("span",[_vm._v("| "+_vm._s(_vm._f("formatDate")(attachment.createdTime,"DD-MM_YYYY")))]):_vm._e()]):_c("div",{staticClass:"col-4 comment-file mT2",staticStyle:{border:"none"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(attachment.createdTime,"DD-MM_YYYY"))+" ")])])])],1),_c("el-col",{staticClass:"mT5 pointer",attrs:{span:2}},[_c("img",{attrs:{src:__webpack_require__(365565),width:"16",height:"16"},on:{click:function($event){return _vm.downloadAttachment(attachment.downloadUrl)}}})])],1)})),1),_vm.diasbleAttachment?_vm._e():_c("form",{staticStyle:{"margin-left":"15px","margin-right":"15px"},attrs:{enctype:"multipart/form-data",novalidate:""}},[_c("div",{staticClass:"dropbox"},[_c("input",{staticClass:"input-file",attrs:{type:"file",multiple:""},on:{change:function($event){return _vm.filesChange($event.target.files)}}}),_c("img",{staticClass:"upload-img mT10 opacity-05",attrs:{src:__webpack_require__(581121),height:"20",width:"20"}}),_c("p",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_files"))),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")])])])]),_vm.visibility&&_vm.selectedAttachedFile?_c("preview-file",{attrs:{visibility:_vm.visibility,previewFile:_vm.selectedAttachedFile,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),PreviewFile=(__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(891719),__webpack_require__(339772),__webpack_require__(720096)),validation=__webpack_require__(990260),SummaryAttachmentvue_type_script_lang_js={props:["module","record","diasbleAttachment"],data:function(){return{loading:!0,status:{UPLOADING:1,SUCCESS:2,FAILED:3},attachments:[],formFieldName:"attachment",exportDownloadUrl:null,selectedAttachedFile:null,visibility:!1}},components:{PreviewFile:PreviewFile/* default */.Z},mounted:function(){this.loadAttachments()},watch:{record:function(recordObj){this.loadAttachments()}},methods:{selectedFile:function(inList){this.selectedAttachedFile=inList,this.visibility=!0},loadAttachments:function(){var self=this;return self.loading=!0,this.$http.get("/attachment?module="+this.module+"&recordId="+this.record.id).then((function(response){self.loading=!1,self.attachments=response.data.attachments?response.data.attachments:[]})).catch((function(error){error&&(self.loading=!1,self.attachments=null)}))},filesChange:function(files){var _this=this,fileList=Array.from(files);if(fileList.length){
// append the files to FormData
var formData=new FormData;formData.append("module",this.module),formData.append("recordId",this.record.id);var _this$status=this.status,UPLOADING=_this$status.UPLOADING,SUCCESS=_this$status.SUCCESS,FAILED=_this$status.FAILED;fileList.forEach((function(file){var _ref=file||{},name=_ref.name,size=_ref.size,type=_ref.type,fileEntry={fileId:-1,fileName:name,fileSize:size,contentType:type,status:UPLOADING,error:null,previewUrl:null,uploadedBy:_this.$account.user.id};formData.append(_this.formFieldName,file,name),_this.attachments.unshift(fileEntry)})),this.$http.post("/attachment/add",formData).then((function(_ref2){var data=_ref2.data;data.attachments.forEach((function(attachment){var fileId=attachment.fileId,fileName=attachment.fileName,fileSize=attachment.fileSize,attachmentIdx=_this.attachments.findIndex((function(a){return a.fileName===fileName&&a.fileSize===fileSize}));if(!(0,validation/* isEmpty */.xb)(attachmentIdx)){var attachmentFile=_this.attachments[attachmentIdx];attachmentFile=fileId?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),attachment),{},{status:SUCCESS}):(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),{},{status:FAILED,error:"Upload failed."}),_this.$set(_this.attachments,attachmentIdx,attachmentFile)}}))})).catch((function(){fileList.forEach((function(file){var _ref3=file||{},name=_ref3.name,size=_ref3.size,attachmentIdx=_this.attachments.findIndex((function(a){return a.fileName===name&&a.fileSize===size}));if(!(0,validation/* isEmpty */.xb)(attachmentIdx)){var attachmentFile=_this.attachments[attachmentIdx];attachmentFile=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),{},{status:FAILED,error:"Upload failed."}),_this.$set(_this.attachments,attachmentIdx,attachmentFile)}}))}))}},getUser:function(assign){if(null!==assign&&assign.id){var assignto=this.$store.getters.getUser(assign.id);return assignto?assignto.name:"---"}return"---"},downloadAttachment:function(url){this.exportDownloadUrl=url},icon:function(file){return file&&"image/png"===file?"statics/icons/png.svg":"statics/icons/pdf.svg"}}},relatedlist_SummaryAttachmentvue_type_script_lang_js=SummaryAttachmentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_SummaryAttachmentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SummaryAttachment=component.exports},
/***/120470:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Notes}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/widget/Notes.vue?vue&type=template&id=3c8171f0
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.componentName?_c(_vm.componentName,_vm._b({key:_vm.recordId,tag:"component"},"component",_vm.$attrs,!1)):_vm._e()],1)},staticRenderFns=[],Notesvue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),{components:{NewNotes:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(89142),__webpack_require__.e(19347)]).then(__webpack_require__.bind(__webpack_require__,116920))},OldNotes:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(19037)]).then(__webpack_require__.bind(__webpack_require__,919037))}},computed:{componentName:function(){return this.$helpers.isLicenseEnabled("NEW_COMMENTS")?"NewNotes":"OldNotes"},recordId:function(){return this.$getProperty(this.$attrs,"record.id")}}}),widget_Notesvue_type_script_lang_js=Notesvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(widget_Notesvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Notes=component.exports},
/***/266707:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"aa8bf7d214fbcc77945abad62903a613.svg";
/***/},
/***/365565:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d022638208d4baab3e4d8fbec8ac38ca.svg";
/***/},
/***/250620:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"03daa5e7a5fe4964f41cd5e0c6dbcdb3.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/81734.js.map