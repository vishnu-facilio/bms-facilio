(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[75298,38254],{
/***/125434:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageLayout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/components/PageLayout.vue?vue&type=template&id=057f2152
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"portal-layout"},[_c("div",{staticClass:"portal-layout-header"},[_c("div",{staticClass:"header-details"},[_c("div",{staticClass:"tab-header"},[_c("div",{staticClass:"tab-name"},[_vm._v(" "+_vm._s(_vm.currentTab.name)+" ")]),_c("div",{staticClass:"header-section"},[_vm._t("header")],2)]),_c("div",{staticClass:"d-flex align-center justify-content-space mT10 height30"},[_c("div",[_vm._t("views",(function(){return[_c("ViewHeader",{attrs:{moduleName:_vm.moduleName,canShowViewsSidePanel:_vm.canShowViewsSidePanel,groupViews:_vm.groupViews,getRoute:_vm.getRoute,retainFilters:_vm.retainFilters},on:{"update:canShowViewsSidePanel":function($event){_vm.canShowViewsSidePanel=$event},"update:can-show-views-side-panel":function($event){_vm.canShowViewsSidePanel=$event},onChange:_vm.goToView}})]}))],2),_c("div",{staticClass:"d-flex align-center"},[_vm._t("header-2")],2)])])]),_c("div",{staticClass:"portal-layout-container"},[_vm._t("views-list",(function(){return[_vm.canShowViewsSidePanel?_c("ViewSideBar",{attrs:{canShowViewsSidePanel:_vm.canShowViewsSidePanel,groupViews:_vm.groupViews,moduleName:_vm.moduleName},on:{"update:canShowViewsSidePanel":function($event){_vm.canShowViewsSidePanel=$event},"update:can-show-views-side-panel":function($event){_vm.canShowViewsSidePanel=$event},onChange:_vm.goToView}}):_vm._e()]})),_c("div",{staticClass:"module-list-container"},[_vm._t("default")],2)],2)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(420629)),validation=__webpack_require__(990260),router=__webpack_require__(329435),ViewSideBar=__webpack_require__(65865),ViewHeaderWithoutGroupsvue_type_template_id_54f371f0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"view-header-wg",on:{click:_vm.toggleViewsSidePanel}},[_c("inline-svg",{class:["hamburger-icon",_vm.canShowViewsSidePanel&&"active"],attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"}}),_vm.$validation.isEmpty(_vm.currentViewDisplayName)?_c("div",{staticClass:"view-name-loading loading-shimmer"}):_c("div",{staticClass:"view-name"},[_vm._v(_vm._s(_vm.currentViewDisplayName))])],1)},ViewHeaderWithoutGroupsvue_type_template_id_54f371f0_staticRenderFns=[],ViewHeadervue_type_template_id_031ebc9c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flex-middle mT17"},[_vm.canShowOpenViewSideBar?[_c("inline-svg",{class:["portal-view-header-burger-icon",_vm.canShowViewsSidePanel&&"active"],attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"},nativeOn:{click:function($event){return _vm.openViewsSidePanel.apply(null,arguments)}}}),_c("div",{staticClass:"grp-view-name"},[_vm._v(" "+_vm._s(_vm.currentGroup?_vm.currentGroup.displayName:"")+" ")]),_vm.$validation.isEmpty(_vm.groupViews)?_vm._e():_c("div",{staticClass:"fc-separator-lg mL30 mR30"})]:_vm._e(),_c("div",{staticClass:"flex-middle flex-direction-row"},[_vm._l(_vm.activeViews,(function(view,index){return _c("router-link",{key:view.name+index,attrs:{to:_vm.getRoute(view)},scopedSlots:_vm._u([{key:"default",fn:function(ref){var navigate=ref.navigate;return[_c("a",{class:[view.name===_vm.currentView&&"router-link-exact-active active"],on:{click:navigate}},[_c("div",{staticClass:"label-txt-black pointer mR30"},[_vm._v(" "+_vm._s(view.displayName)+" "),_c("div",{staticClass:"portal-active-tab"})])])]}}],null,!0)})})),_vm.$validation.isEmpty(_vm.moreViews)?_vm._e():_c("el-dropdown",{staticClass:"mT3 pointer more-views-dropdown",attrs:{trigger:"click"},on:{command:_vm.goToView}},[_c("span",{staticClass:"el-dropdown-link"},[_c("inline-svg",{attrs:{src:"svgs/header-more"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.moreViews,(function(view,index){return _c("el-dropdown-item",{key:view.name+index,attrs:{command:view}},[_vm._v(" "+_vm._s(view.displayName)+" ")])})),1)],1)],2)],2)},ViewHeadervue_type_template_id_031ebc9c_staticRenderFns=[],slicedToArray=__webpack_require__(554621),ViewHeadervue_type_script_lang_js=(__webpack_require__(339772),__webpack_require__(689730),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(538077),{props:["canShowViewsSidePanel","moduleName","groupViews","getRoute"],computed:{canShowOpenViewSideBar:function(){var groupViews=this.groupViews;return!(0,validation/* isEmpty */.xb)(groupViews)},activeViews:function(){var currentGroup=this.currentGroup,currentView=this.currentView,_ref=currentGroup||{},views=_ref.views,maxViewCount=3,activeViews=[];if(!(0,validation/* isEmpty */.xb)(views)){var currentViewIdx=(views||[]).findIndex((function(view){return view.name===currentView}));currentViewIdx<maxViewCount?activeViews=views.slice(0,maxViewCount):(activeViews=views.slice(0,maxViewCount-1),activeViews.push(views[currentViewIdx]))}return activeViews},moreViews:function(){var currentGroup=this.currentGroup,activeViews=this.activeViews,_ref2=currentGroup||{},views=_ref2.views,activeViewNames=(activeViews||[]).map((function(view){return view.name}));return(views||[]).filter((function(view){return!activeViewNames.includes(view.name)}))||[]},currentView:function(){return this.$route.params.viewname},currentGroup:function(){var _this=this,groupViews=this.groupViews,selectedGroup=(groupViews||[]).find((function(group){var _ref3=group||{},views=_ref3.views,selectedView=(views||[]).find((function(v){return v.name===_this.currentView}));return!(0,validation/* isEmpty */.xb)(selectedView)}));return selectedGroup}},methods:{openViewsSidePanel:function(){this.$emit("update:canShowViewsSidePanel",!this.canShowViewsSidePanel)},openGroup:function(command){var group=(this.groupViews||[]).find((function(g){return g.displayName===command})),_ref4=group||{},views=_ref4.views,_ref5=views||[],_ref6=(0,slicedToArray/* default */.Z)(_ref5,1),initialView=_ref6[0];!(0,validation/* isEmpty */.xb)(initialView)&&this.goToView(initialView)},goToView:function(view){this.$emit("onChange",view)}}}),components_ViewHeadervue_type_script_lang_js=ViewHeadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ViewHeadervue_type_script_lang_js,ViewHeadervue_type_template_id_031ebc9c_render,ViewHeadervue_type_template_id_031ebc9c_staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewHeader=component.exports,ViewHeaderWithoutGroupsvue_type_script_lang_js={extends:ViewHeader,computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)({getCurrentViewDetail:"view/getCurrentViewDetail"})),{},{currentViewDisplayName:function(){var currentGroup=this.currentGroup,_this$currentView=this.currentView,currentView=void 0===_this$currentView?"":_this$currentView,currentViewDetail=this.currentViewDetail,_ref=currentGroup||{},currentViewList=_ref.views,_ref2=(currentViewList||[]).find((function(view){return view.name===currentView}))||{},displayName=_ref2.displayName;return displayName||(null===currentViewDetail||void 0===currentViewDetail?void 0:currentViewDetail.displayName)||""},currentViewDetail:function(){return this.getCurrentViewDetail()}}),methods:{toggleViewsSidePanel:function(){this.$emit("update:canShowViewsSidePanel",!this.canShowViewsSidePanel)}}},components_ViewHeaderWithoutGroupsvue_type_script_lang_js=ViewHeaderWithoutGroupsvue_type_script_lang_js,ViewHeaderWithoutGroups_component=(0,componentNormalizer/* default */.Z)(components_ViewHeaderWithoutGroupsvue_type_script_lang_js,ViewHeaderWithoutGroupsvue_type_template_id_54f371f0_render,ViewHeaderWithoutGroupsvue_type_template_id_54f371f0_staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewHeaderWithoutGroups=ViewHeaderWithoutGroups_component.exports,debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),LIST=router/* pageTypes */.As.LIST,PageLayoutvue_type_script_lang_js={props:["moduleName"],components:{ViewSideBar:ViewSideBar/* default */.Z,ViewHeader:ViewHeaderWithoutGroups},data:function(){return{canShowViewsSidePanel:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("view",{groupViews:function(state){return(0,validation/* isEmpty */.xb)(state.groupViews)?[]:state.groupViews},metaInfo:function(state){return state.metaInfo}})),(0,vuex_esm/* mapState */.rn)("webtabs",{currentTab:function(state){return state.selectedTab}})),{},{currentView:function(){return this.$route.params.viewname},retainFilters:function(){return["search","includeParentFilter"]}}),watch:{moduleName:{handler:function(newVal,oldVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_ref=_this.metaInfo||{},name=_ref.name,[oldVal,name].includes(newVal)||(0,validation/* isEmpty */.xb)(newVal)){_context.next=5;break}return _context.next=4,_this.$store.dispatch("view/clearViews");case 4:_this.loadViews();case 5:case"end":return _context.stop()}}),_callee)})))()},immediate:!0},currentView:{handler:function(value){
// If current view is removed from URL, loadViews again and navigate to first group
(0,validation/* isEmpty */.xb)(value)?this.loadViews():this.loadViewDetails()},immediate:!0}},methods:{loadViews:debounce_default()((0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",this.$store.dispatch("view/loadGroupViews",{moduleName:this.moduleName}).then(this.initViews));case 1:case"end":return _context2.stop()}}),_callee2,this)}))),200),loadViewDetails:debounce_default()((0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var viewName,moduleName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return viewName=this.currentView,moduleName=this.moduleName,_context3.abrupt("return",this.$store.dispatch("view/loadViewDetail",{viewName:viewName,moduleName:moduleName}).catch((function(){})));case 2:case"end":return _context3.stop()}}),_callee3,this)}))),200),initViews:function(){if(!this.currentView){var _ref4=this.groupViews.find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref4.views;(0,validation/* isEmpty */.xb)(views)||this.goToView(views[0])}},goToView:function(view){var route=this.getRoute(view);this.$router.replace(route)},getRoute:function(view){if(!(0,validation/* isEmpty */.xb)(view&&view.name)){var _ref5=this.$route||{},query=_ref5.query,id=this.currentTab.id,_ref6=(0,router/* findRouteForTab */.OD)(id,{pageType:LIST})||{},_ref6$name=_ref6.name,name=void 0===_ref6$name?null:_ref6$name;return name?{name:name,params:{viewname:view.name},query:query}:null}}}},components_PageLayoutvue_type_script_lang_js=PageLayoutvue_type_script_lang_js,PageLayout_component=(0,componentNormalizer/* default */.Z)(components_PageLayoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageLayout=PageLayout_component.exports},
/***/65865:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ViewSideBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/components/ViewSideBar.vue?vue&type=template&id=2be7bd24
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",{attrs:{name:"fade"}},[_c("div",{staticClass:"portal-view-sidebar-fixed"},[_c("div",{staticClass:"side-bar-view"},[_vm._v(" "+_vm._s(_vm.$t("common._common.views"))+" ")]),_c("div",{staticClass:"portal-view-search-bar"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Search",type:"search","prefix-icon":"el-icon-search"},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}})],1),_c("div",{staticClass:"portal-view-sidebar"},_vm._l(_vm.filteredList,(function(group,grpIndex){return _c("div",{key:group.id+"_"+grpIndex,class:[_vm.$validation.isEmpty(_vm.searchText)&&"mB10"]},[_vm.$validation.isEmpty(group.views)?_vm._e():[_vm.$validation.isEmpty(_vm.searchText)?_c("div",{staticClass:"view-grp-name"},[_vm._v(" "+_vm._s(group.displayName||group.name)+" ")]):_vm._e(),_vm._l(group.views,(function(view,index){return _c("div",{key:index,staticClass:"view-item",class:_vm.isActiveView(view)?"active":"",on:{click:function($event){return _vm.changeView(view,group)}}},[_c("el-tooltip",{attrs:{content:view.displayName,placement:"top",manual:view.displayName.length<25,"open-delay":1e3}},[_c("div",{staticClass:"ellipsis"},[_vm._v(" "+_vm._s(view.displayName)+" ")])])],1)}))]],2)})),0)])])},staticRenderFns=[],ViewsSidePanel=__webpack_require__(409886),ViewSideBarvue_type_script_lang_js={extends:ViewsSidePanel/* default */.Z},components_ViewSideBarvue_type_script_lang_js=ViewSideBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ViewSideBarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewSideBar=component.exports},
/***/875298:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ScheduleChangesList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/control-groups/ScheduleChangesList.vue?vue&type=template&id=2bd4177b&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_c("PageLayout",{attrs:{moduleName:_vm.moduleName}},[_c("template",{slot:"title"},[_vm._v(" "+_vm._s(_vm.moduleDisplayName)+" ")]),_c("template",{slot:"header"},[_c("AdvancedSearchWrapper",{key:"ftags-list-"+_vm.moduleName,attrs:{filters:_vm.filters,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,hideSaveView:!0}}),_c("CreateButton",{on:{click:function($event){return _vm.openChangeSchedule()}}},[_vm._v(" Change Schedule ")])],1),_c("template",{slot:"header-2"},[_vm.listCount?[_c("pagination",{attrs:{total:_vm.listCount,perPage:50}})]:_vm._e()],2),-1===_vm.openModuleId?_c("div",{staticClass:"fc-list-view p10 pT0 mT10 height100vh fc-table-td-height fc-table-viewchooser pB100 fc-v1-portal-table fc-workpermit-table fc-list-table-container"},[_vm.showLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.moduleRecordList)&&!_vm.showLoading?_c("div",{staticClass:"height100vh flex-middle justify-content-center flex-direction-column fc-empty-white"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/workorder",iconClass:"icon text-center icon-xxxxlg height-auto"}}),_c("div",{staticClass:"line-height20 nowo-label"},[_vm._v(" No "+_vm._s(_vm.moduleDisplayName?_vm.moduleDisplayName.toLowerCase():_vm.moduleName)+" available ")])],1):_vm._e(),_vm.showLoading||_vm.$validation.isEmpty(_vm.moduleRecordList)?_vm._e():_c("div",[_c("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"view-column-chooser",on:{click:function($event){_vm.showColumnSettings=!0}}},[_c("img",{staticStyle:{"text-align":"center",position:"absolute",top:"35%",right:"29%"},attrs:{src:__webpack_require__(266707)}})]),_c("el-table",{ref:"tableList",staticClass:"width100",attrs:{data:_vm.exceptionList,height:"auto",fit:!0}},[_c("el-table-column",{attrs:{fixed:"",prop:"",label:"ID","min-width":"120"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"fc-id"},[_vm._v(" "+_vm._s("#"+data.row[_vm.idField])+" ")])]}}],null,!1,629615325)}),_c("el-table-column",{attrs:{fixed:"",prop:"",label:_vm.nameColumn.displayName||"NAME","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flex-middle",attrs:{small:"",title:_vm.nameColumn?_vm.getColumnDisplayValue(_vm.nameColumn,data.row)||"":data.row.name}},[_c("div",{staticClass:"fw5 ellipsis textoverflow-ellipsis width200px"},[_vm._v(" "+_vm._s(_vm.nameColumn?_vm.getColumnDisplayValue(_vm.nameColumn,data.row)||"":data.row.name)+" ")])])]}}],null,!1,4057915590)}),_c("el-table-column",{attrs:{label:"Extend/Reduce","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(exception.row.offSchedule?"Reduced Hours":"Extended Hours")+" ")]}}],null,!1,2591026512)}),_c("el-table-column",{attrs:{label:"Frequency","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(exception.row.isDay?"Weekly":"Specific Date")+" ")]}}],null,!1,1586864579)}),_c("el-table-column",{attrs:{label:"From","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(_vm.getHour(exception.row.startTime,exception.row.isDay))+" ")]}}],null,!1,4041410792)}),_c("el-table-column",{attrs:{label:"To","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(_vm.getHour(exception.row.endTime,exception.row.isDay))+" ")]}}],null,!1,308228775)}),_vm._l(_vm.viewColumns,(function(field,index){return[!_vm.isFixedColumn(field.name)||field.parentField?_c("el-table-column",{key:index,attrs:{align:_vm.checkDecimalType(field)?"right":"left",prop:field.name,label:field.displayName,"min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[!_vm.isFixedColumn(field.name)||field.parentField?_c("div",[_c("div",{staticClass:"table-subheading",class:{"text-right":_vm.checkDecimalType(field)}},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(field,data.row)||"---")+" ")])]):_vm._e()]}}],null,!0)}):_vm._e()]})),_vm.canShowDelete?_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{width:"130",fixed:"right"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_vm.canShowActions(data.row)?_c("div",{staticClass:"text-center"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecord(data.row.id)}}})]):_vm._e()]}}],null,!1,1201378032)}):_vm._e()],2)],1)]):_vm._e()],2),_c("column-customization",{attrs:{visible:_vm.showColumnSettings,moduleName:_vm.moduleName,columnConfig:_vm.columnConfig,viewName:_vm.currentView},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}}),_vm.showChangeSchedule?_c("ChangeSchedule",{attrs:{closeDialog:_vm.closeDialog,isTenantGroup:!0,tenantId:_vm.tenantId,moduleName:"controlScheduleExceptionTenant"},on:{onSave:_vm.scheduleChange}}):_vm._e(),_vm.showDeleteDialog?_c("DeleteSchedule",{attrs:{closeDialog:_vm.closeDialog,recordId:_vm.exceptionId,moduleName:"controlScheduleExceptionTenant"}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),ModuleList=(__webpack_require__(450886),__webpack_require__(169358),__webpack_require__(138254)),ChangeSchedule=__webpack_require__(650871),DeleteSchedule=__webpack_require__(131187),validation=__webpack_require__(990260),helpers=__webpack_require__(778390),vuex_esm=__webpack_require__(420629),util=__webpack_require__(906363),moment=helpers/* default */.ZP.getOrgMoment,ScheduleChangesListvue_type_script_lang_js={extends:ModuleList["default"],components:{ChangeSchedule:ChangeSchedule/* default */.Z,DeleteSchedule:DeleteSchedule/* default */.Z},data:function(){return{currTenantId:null,showChangeSchedule:!1,exceptionId:null,showDeleteDialog:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({currentTab:function(state){return state.webtabs.selectedTab}})),(0,vuex_esm/* mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{tenantId:function(){var moduleRecordList=this.moduleRecordList;if((0,validation/* isEmpty */.xb)(moduleRecordList[0]))return null;var _ref=moduleRecordList[0]||{},tenant=_ref.tenant,_ref2=tenant||{},id=_ref2.id;return id},exceptionList:function(){var moduleRecordList=this.moduleRecordList;return moduleRecordList.map((function(exception){var startSchedule=exception.startSchedule,endSchedule=exception.endSchedule;if((0,validation/* isEmpty */.xb)(startSchedule)||(0,validation/* isEmpty */.xb)(endSchedule)){var startTime=exception.startTime,endTime=exception.endTime;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},exception),{},{startTime:startTime,endTime:endTime,isDay:!1})}startSchedule=JSON.parse(startSchedule),endSchedule=JSON.parse(endSchedule);var _startSchedule=startSchedule,startTimes=_startSchedule.times,_endSchedule=endSchedule,endTimes=_endSchedule.times;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},exception),{},{startTime:startTimes[0],endTime:endTimes[0],isDay:!0})}))},canShowDelete:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("DELETE",currentTab)}}),methods:{openChangeSchedule:function(){this.showChangeSchedule=!0},closeDialog:function(isSaved){this.showChangeSchedule=!1,this.showDeleteDialog=!1,isSaved&&this.loadRecords()},scheduleChange:function(){this.showChangeSchedule=!1,this.loadRecords()},getHour:function(time,isDay){return isDay?new moment(time,"HH:mm").format("hh:mm A"):new moment(time,"x").format("hh:mm A")},deleteRecord:function(id){this.exceptionId=id,this.showDeleteDialog=!0},canShowActions:function(record){var moduleName=this.moduleName;return!(0,util/* isRecordLocked */.x)(record,moduleName)&&!(0,util/* isRequestedState */.k)(record)}}},control_groups_ScheduleChangesListvue_type_script_lang_js=ScheduleChangesListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(control_groups_ScheduleChangesListvue_type_script_lang_js,render,staticRenderFns,!1,null,"2bd4177b",null)
/* harmony default export */,ScheduleChangesList=component.exports},
/***/138254:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ModuleList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/custom-module/ModuleList.vue?vue&type=template&id=8baa5a96&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("PageLayout",{attrs:{moduleName:_vm.moduleName}},[_c("template",{slot:"title"},[_vm._v(" "+_vm._s(_vm.moduleDisplayName)+" ")]),_c("template",{slot:"header"},[_vm.isEmpty(_vm.viewname)?_vm._e():[_c("AdvancedSearchWrapper",{key:"ftags-list-"+_vm.moduleName,attrs:{filters:_vm.filters,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,hideSaveView:!0}})],_vm.isBulkActionLicenseEnabled?_c("CustomButton",{key:_vm.moduleName+"_"+_vm.viewname+"_"+_vm.POSITION.LIST_TOP,attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_TOP},on:{onSuccess:_vm.onCustomButtonSuccess}}):_vm._e(),_c("CreateButton",{on:{click:_vm.redirectToFormCreation}},[_vm._v(" "+_vm._s(_vm.createBtnText)+" ")])],2),_c("template",{slot:"header-2"},[_vm.isEmpty(_vm.viewname)?_vm._e():[_c("pagination",{attrs:{total:_vm.recordCount,perPage:_vm.perPage,currentPageCount:_vm.currentPageCount}}),_vm.recordCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.sort"),placement:"bottom"}},[_c("Sort",{key:_vm.moduleName+"-sort",attrs:{moduleName:_vm.moduleName},on:{onSortChange:_vm.updateSort}})],1),_vm.hasPermission("EXPORT")?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_vm.hasPermission("EXPORT")?_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.export"),"open-delay":500,placement:"top",tabindex:-1}},[_c("FExportSettings",{attrs:{module:_vm.moduleName,viewDetail:_vm.viewDetail,showViewScheduler:!1,showMail:!1,filters:_vm.filters}})],1):_vm._e()]],2),_vm.showLoading?_c("div",{staticClass:"list-loading"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm.isEmpty(_vm.viewname)?_c("div",{staticClass:"portal-view-empty-state-container"},[_c("inline-svg",{staticClass:"d-flex module-view-empty-state",attrs:{src:"svgs/no-configuration",iconClass:"icon"}}),_c("div",{staticClass:"line-height20 nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.no_view_config"))+" ")])],1):_vm.isEmpty(_vm.records)?_c("div",{staticClass:"list-empty-state"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/workorder",iconClass:"icon text-center icon-xxxxlg height-auto"}}),_c("div",{staticClass:"line-height20 nowo-label"},[_vm._v(" "+_vm._s(_vm.emptyStateText)+" ")])],1):_c("div",{staticClass:"portal-common-list"},[_vm.isBulkActionLicenseEnabled&&!_vm.$validation.isEmpty(_vm.selectedListItemsIds)?_c("div",{staticClass:"portal-table-header-actions"},[_vm.canShowDelete?_c("button",{staticClass:"portal-bulk-action-delete",on:{click:function($event){return _vm.deleteRecords(_vm.selectedListItemsIds)}}},[_vm._v(" "+_vm._s(_vm.$t("custommodules.list.delete"))+" ")]):_vm._e(),_c("CustomButton",{key:_vm.moduleName+"_"+_vm.viewname+"_"+_vm.POSITION.LIST_BAR,attrs:{selectedRecords:_vm.selectedListItemsObj,moduleName:_vm.moduleName,position:_vm.POSITION.LIST_BAR},on:{onSuccess:_vm.onCustomButtonSuccess}})],1):_vm._e(),_c("CommonList",{attrs:{moduleName:_vm.moduleName,viewDetail:_vm.viewDetail,records:_vm.records,columnConfig:_vm.columnConfig,slotList:_vm.slotList,redirectToOverview:_vm.redirectToOverview,refreshList:_vm.onCustomButtonSuccess,canShowCustomButton:_vm.isBulkActionLicenseEnabled,hideListSelect:!_vm.isBulkActionLicenseEnabled},on:{"selection-change":_vm.selectItems},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+record[_vm.slotList[0].name]))])])]}},{key:_vm.slotList[1].criteria,fn:function(ref){var record=ref.record;return[_c("router-link",{staticClass:"d-flex fw5 label-txt-black ellipsis main-field-column",attrs:{to:_vm.redirectToOverview(record.id)}},[record[_vm.photoFieldName]>0?_c("div",[_c("img",{staticClass:"img-container",attrs:{src:record.getImage(_vm.photoFieldName)}})]):_vm._e(),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$getProperty(record,_vm.mainFieldName,"---")||"---",placement:"top-end","open-delay":600}},[_c("div",{staticClass:"self-center width200px"},[_c("span",{staticClass:"list-main-field"},[_vm._v(" "+_vm._s(_vm.$getProperty(record,_vm.mainFieldName,"---")||"---")+" ")])])])],1)]}},_vm.hasActionPermissions?{key:_vm.slotList[2].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex text-center"},[_vm.canShowEdit&&record.canEdit?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editModule(record)}}}):_vm._e(),_vm.canShowDelete?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecords([record.id])}}}):_vm._e()])]}}:null],null,!0)})],1)],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),CommonModuleList=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(347446)),PageLayout=__webpack_require__(125434),CreateButtonvue_type_template_id_ae030fbc_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.hasPermission?_c("el-button",{staticClass:"fc-create-btn create-btn uppercase",staticStyle:{background:"#ef508f"},on:{click:_vm.handleClick}},[_vm.$validation.isEmpty(_vm.buttonDisplayName)?_vm._t("default"):[_vm._v(" "+_vm._s(_vm.buttonDisplayName)+" ")]],2):_vm._e()},CreateButtonvue_type_template_id_ae030fbc_staticRenderFns=[],vuex_esm=(__webpack_require__(670560),__webpack_require__(420629)),validation=__webpack_require__(990260),CreateButtonvue_type_script_lang_js={props:["to"],computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("webtabs",{currentTab:function(state){return state.selectedTab}})),(0,vuex_esm/* mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{hasPermission:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("CREATE",currentTab)},buttonDisplayName:function(){var currentTab=this.currentTab,configJSON=currentTab.configJSON,_ref=configJSON||{},actionName=_ref.actionName;return actionName}}),methods:{handleClick:function(){(0,validation/* isEmpty */.xb)(this.to)||this.$router.push(this.to),this.$emit("click")}}},components_CreateButtonvue_type_script_lang_js=CreateButtonvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CreateButtonvue_type_script_lang_js,CreateButtonvue_type_template_id_ae030fbc_render,CreateButtonvue_type_template_id_ae030fbc_staticRenderFns,!1,null,null,null)
/* harmony default export */,CreateButton=component.exports,AdvancedSearchWrapper=__webpack_require__(207001),ModuleListvue_type_script_lang_js={extends:CommonModuleList["default"],components:{PageLayout:PageLayout/* default */.Z,CreateButton:CreateButton,AdvancedSearchWrapper:AdvancedSearchWrapper/* default */.Z},data:function(){return{columnConfig:{fixedColumns:["id","name"],fixedSelectableColumns:["photo"],availableColumns:[],showLookupColumns:!1}}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("webtabs",{currentTab:function(state){return state.selectedTab}})),(0,vuex_esm/* mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{mainFieldName:function(){return this.mainFieldNamesList[0]||"name"},mainFieldNamesList:function(){var _ref=this.metaInfo||{},fields=_ref.fields,mainFields=(fields||[]).filter((function(fld){return fld.mainField})),mainFieldsNames=(mainFields||[]).map((function(fld){return fld.name}));return mainFieldsNames},canShowEdit:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("UPDATE",currentTab)},canShowDelete:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("DELETE",currentTab)},hasActionPermissions:function(){var canShowEdit=this.canShowEdit,canShowDelete=this.canShowDelete;return canShowEdit||canShowDelete},hasPagination:function(){var currentPageCount=this.currentPageCount,recordCount=this.recordCount;return!(0,validation/* isEmpty */.xb)(currentPageCount)&&parseInt(currentPageCount)>0||!(0,validation/* isEmpty */.xb)(recordCount)&&parseInt(recordCount)>0},isBulkActionLicenseEnabled:function(){return this.$helpers.isLicenseEnabled("BULK_ACTION_IN_PORTAL")}}),watch:{mainFieldNamesList:{handler:function(newVal){if(!(0,validation/* isEmpty */.xb)(newVal)){var _ref2=this.columnConfig||{},fixedColumns=_ref2.fixedColumns,newFixedCol=newVal.filter((function(fldName){return!fixedColumns.includes(fldName)}));fixedColumns=[].concat((0,toConsumableArray/* default */.Z)(fixedColumns),(0,toConsumableArray/* default */.Z)(newFixedCol)),this.$set(this.columnConfig,"fixedColumns",fixedColumns)}},immediate:!0}}},custom_module_ModuleListvue_type_script_lang_js=ModuleListvue_type_script_lang_js,ModuleList_component=(0,componentNormalizer/* default */.Z)(custom_module_ModuleListvue_type_script_lang_js,render,staticRenderFns,!1,null,"8baa5a96",null)
/* harmony default export */,ModuleList=ModuleList_component.exports},
/***/650871:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ChangeSchedule}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/controls/controlgroups/components/ChangeSchedule.vue?vue&type=template&id=5310a446&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"agents-dialog fc-dialog-center-container change-schedule-container",staticStyle:{"z-index":"9999999999"},attrs:{title:"Schedule Change",visible:!0,width:"618px","append-to-body":!0,"before-close":function(){return _vm.closeDialog()},"show-close":!1}},[_vm.isEdit&&_vm.showLoading?_c("div",{staticClass:"p20"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_c("el-form",{ref:"form",staticClass:"pR30 pL30 pB30",attrs:{model:_vm.schedule,rules:_vm.rules,"label-width":"120px","label-position":"left"}},[_vm.isGroupEmpty?_c("el-form-item",{attrs:{label:"Group",prop:"selectedGroup"}},[_c("FLookupField",{staticClass:"flookup-field-groups width100",attrs:{model:(_vm.schedule.selectedGroup||{}).label,hideDropDown:!0,fetchOptionsOnLoad:!0,canShowLookupWizard:_vm.showLookupFieldWizard,field:_vm.fieldObj},on:{"update:model":function($event){_vm.$set(_vm.schedule.selectedGroup||{},"label",$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue}})],1):_vm._e(),_vm.isEdit?_vm._e():_c("el-form-item",{attrs:{label:"Name",prop:"name"}},[_c("el-input",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Enter a name for schedule"},model:{value:_vm.schedule.name,callback:function($$v){_vm.$set(_vm.schedule,"name",$$v)},expression:"schedule.name"}})],1),_vm.isEdit?_vm._e():_c("el-form-item",{attrs:{label:"Frequency"}},[_c("el-radio-group",{on:{change:_vm.clearValidation},model:{value:_vm.schedule.isDay,callback:function($$v){_vm.$set(_vm.schedule,"isDay",$$v)},expression:"schedule.isDay"}},[_c("el-radio",{staticClass:"fc-radio-btn mR10",attrs:{label:!0}},[_vm._v("Daily")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!1}},[_vm._v("Specific Date")])],1)],1),_vm.isEdit?_c("el-form-item",{attrs:{label:"Apply For"}},[_c("el-radio-group",{attrs:{disabled:_vm.schedule.isEdited||!_vm.schedule.isDay||_vm.isEditTypeDisabled},model:{value:_vm.schedule.isThisEvent,callback:function($$v){_vm.$set(_vm.schedule,"isThisEvent",$$v)},expression:"schedule.isThisEvent"}},[_c("el-radio",{staticClass:"fc-radio-btn mR10",attrs:{label:!0}},[_vm._v("This Event")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!1}},[_vm._v("Recurring Event")])],1)],1):_vm._e(),(_vm.isEdit?!_vm.schedule.isThisEvent:_vm.schedule.isDay)?[_c("el-form-item",{attrs:{label:"Select Days",prop:"selectedDays"}},[_c("el-checkbox",{attrs:{label:"All days"},on:{change:_vm.checkAllDay},model:{value:_vm.allDays,callback:function($$v){_vm.allDays=$$v},expression:"allDays"}}),_c("el-checkbox-group",{model:{value:_vm.schedule.selectedDays,callback:function($$v){_vm.$set(_vm.schedule,"selectedDays",$$v)},expression:"schedule.selectedDays"}},_vm._l(_vm.daysInWeek,(function(day,index){return _c("el-checkbox",{key:index,attrs:{label:day}})})),1)],1)]:_vm._e(),_vm.schedule.isDay?_vm._e():_c("el-form-item",{attrs:{label:"Date",prop:"date"}},[_c("FDatePicker",{staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"date",placeholder:"Select Date",pickerOptions:_vm.pickerOptions},model:{value:_vm.schedule.date,callback:function($$v){_vm.$set(_vm.schedule,"date",$$v)},expression:"schedule.date"}})],1),_c("div",{staticClass:"flex flex-row"},[_c("el-form-item",{attrs:{label:"Time",prop:"startTime"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 mR10",attrs:{placeholder:"From time"},model:{value:_vm.schedule.startTime,callback:function($$v){_vm.$set(_vm.schedule,"startTime",$$v)},expression:"schedule.startTime"}},_vm._l(_vm.getTimeInterval(_vm.startHour,_vm.endHour),(function(interval){return _c("el-option",{key:interval,attrs:{value:interval,label:interval}})})),1)],1),_c("span",{staticClass:"mT10"},[_vm._v("-")]),_c("el-form-item",{attrs:{prop:"endTime","label-width":"0px"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 mL10",attrs:{placeholder:"To time"},model:{value:_vm.schedule.endTime,callback:function($$v){_vm.$set(_vm.schedule,"endTime",$$v)},expression:"schedule.endTime"}},_vm._l(_vm.getTimeInterval(_vm.startHour,_vm.endHour),(function(interval){return _c("el-option",{key:interval,attrs:{value:interval,label:interval,disabled:_vm.isOptionsDisabled(interval)}})})),1)],1)],1),_c("el-form-item",{attrs:{label:"Select Type"}},[_c("el-radio-group",{model:{value:_vm.schedule.isScheduleExtension,callback:function($$v){_vm.$set(_vm.schedule,"isScheduleExtension",$$v)},expression:"schedule.isScheduleExtension"}},[_c("el-radio",{staticClass:"fc-radio-btn mR10",attrs:{label:!1}},[_vm._v("Extend Hours")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!0}},[_vm._v("Reduce Hours")])],1)],1)],2),_c("div",{staticClass:"schedule-btn-footer"},[_c("el-button",{staticClass:"modal-btn-cancel text-uppercase",on:{click:function(){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save mL0",attrs:{loading:_vm.saving},on:{click:_vm.save}},[_vm._v(" "+_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")])],1),_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.showLookupFieldWizard,selectedLookupField:_vm.fieldObj,withReadings:!0},on:{"update:canShowLookupWizard":function($event){_vm.showLookupFieldWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.showLookupFieldWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}})],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FDatePicker=(__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(947522),__webpack_require__(339772),__webpack_require__(865137),__webpack_require__(358551)),api=__webpack_require__(32284),validation=__webpack_require__(990260),helpers=__webpack_require__(778390),ControlScheduleUtil=__webpack_require__(294323),FLookupFieldWizard=__webpack_require__(499751),FLookupField=__webpack_require__(855048),moment=helpers/* default */.ZP.getOrgMoment,ChangeSchedulevue_type_script_lang_js={props:["closeDialog","group","moduleName","tenantId","isTenantGroup","record","isEditTypeDisabled"],components:{FDatePicker:FDatePicker/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"],FLookupField:FLookupField/* default */.Z},data:function(){return{startHour:0,endHour:23,daysInWeek:["Mon","Tue","Wed","Thurs","Fri","Sat","Sun"],showLoading:!1,allDays:!1,saving:!1,currentGroup:null,showLookupFieldWizard:!1,fieldObj:{isDataLoading:!1,options:[],lookupModuleName:"controlGroupv2TenantSharing",field:{lookupModule:{name:"controlGroupv2TenantSharing",displayName:"Control Group"}},forceFetchAlways:!0,filters:{},placeHolderText:"Select Group",isDisabled:!1},schedule:{selectedGroup:null,isDay:!0,isScheduleExtension:!0,selectedDays:[],startTime:"",endTime:"",date:null,name:"",isThisEvent:!0,isEdited:!1},rules:{selectedGroup:[{required:!0,message:"Please select a group",trigger:"change"}],name:[{required:!0,message:"Please enter a name for the schedule change",trigger:"blur"}],selectedDays:[{required:!0,message:"Please select days for which you want the schedule changes to be applied",trigger:"change"}],date:[{required:!0,message:"Please select date",trigger:"change"}],startTime:[{required:!0,message:"Please select a start Time",trigger:"change"}],endTime:[{required:!0,message:"Please select a end Time",trigger:"change"}]}}},computed:{isEdit:function(){return!(0,validation/* isEmpty */.xb)(this.record)},pickerOptions:function(){var todayDate=moment().startOf("date").valueOf();return{disabledDate:function(time){return time.getTime()<todayDate}}},isGroupEmpty:function(){var group=this.group;return(0,validation/* isEmpty */.xb)(group)},getModuleDetails:function(){var record=this.record,isThisEvent=this.schedule.isThisEvent,moduleName=this.moduleName,_ref=record||{},edited=_ref.edited,id=_ref.id,exception=_ref.exception,_ref2=exception||{},startSchedule=_ref2.startSchedule,recordId=_ref2.id,moduleDetails={};return moduleDetails=edited?{moduleName:"controlScheduleSlots",id:id}:(0,validation/* isEmpty */.xb)(startSchedule)||!isThisEvent?{moduleName:moduleName,id:recordId}:{moduleName:"controlScheduleSlots",id:id},moduleDetails}},created:function(){this.deserialize()},methods:{showLookupWizard:function(field,canShow){this.selectedLookupField=field,this.showLookupFieldWizard=canShow},setLookupFieldValue:function(value){var field=value.field,selectedItems=field.selectedItems;this.schedule.selectedGroup=selectedItems[0],this.showLookupFieldWizard=!1,this.fetchGroupDetails()},fetchGroupDetails:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var selectedGroup,_ref3,value,groupModuleName,_yield$API$fetchRecor,record;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(selectedGroup=_this.schedule.selectedGroup,_ref3=selectedGroup||{},value=_ref3.value,groupModuleName="controlGroupv2TenantSharing",!value){_context.next=9;break}return _context.next=6,api/* API */.bl.fetchRecord(groupModuleName,{id:value});case 6:_yield$API$fetchRecor=_context.sent,record=_yield$API$fetchRecor[groupModuleName],_this.currentGroup=record;case 9:case"end":return _context.stop()}}),_callee)})))()},deserialize:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this2$record,exception,startTime,endTime,startTimeMilli,edited,startSchedule,typeEnum,_startSchedule,offSchedule,name,_JSON$parse,values,days,_this2$record2,_startTime,_endTime,_offSchedule,_name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this2.currentGroup=_this2.group,(0,validation/* isEmpty */.xb)(_this2.record)||(_this2$record=_this2.record,exception=_this2$record.exception,startTime=_this2$record.startTime,endTime=_this2$record.endTime,startTimeMilli=_this2$record.startTimeMilli,edited=_this2$record.edited,startSchedule=exception.startSchedule,typeEnum=exception.typeEnum,edited||"RECURING"!==typeEnum||(_this2.schedule.isThisEvent=!1),(0,validation/* isEmpty */.xb)(startSchedule)?(_this2$record2=_this2.record,_startTime=_this2$record2.startTime,_endTime=_this2$record2.endTime,_offSchedule=_this2$record2.offSchedule,_name=_this2$record2.exception.name,_this2.schedule=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this2.schedule),{},{isDay:!1,startTime:moment(_startTime,"HH:mm").format("hh:mm A"),endTime:moment(_endTime,"HH:mm").format("hh:mm A"),date:startTimeMilli,name:_name,isScheduleExtension:_offSchedule||!1,isEdited:edited||!1})):(_startSchedule=exception.startSchedule,offSchedule=exception.offSchedule,name=exception.name,_JSON$parse=JSON.parse(_startSchedule),values=_JSON$parse.values,values&&(days=_this2.daysInWeek.filter((function(day,index){return values.includes(index+1)})),7===values.length&&(_this2.allDays=!0)),_this2.schedule=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this2.schedule),{},{selectedDays:days,isDay:!0,startTime:moment(startTime,"HH:mm").format("hh:mm A"),endTime:moment(endTime,"HH:mm").format("hh:mm A"),name:name,date:startTimeMilli,isScheduleExtension:offSchedule||!1,isEdited:edited||!1})));case 2:case"end":return _context2.stop()}}),_callee2)})))()},checkAllDay:function(selectedVal){this.schedule.selectedDays=selectedVal?this.daysInWeek:[]},getTimeInterval:function(startHour,endHour){var startTime=moment(startHour,"HH:mm"),endTime=moment(endHour,"HH:mm");endTime.isBefore(startTime)&&endTime.add(1,"day");var timeStops=[];while(startTime<=endTime)timeStops.push(new moment(startTime).format("hh:mm A")),startTime.add(1,"hours");return timeStops},save:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_this3.$refs["form"].validate(function(){var _ref4=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(valid){var data,promise,_this3$getModuleDetai,moduleName,id,_yield$promise,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!valid){_context3.next=10;break}return _this3.saving=!0,data=_this3.serialize(),_this3.isEdit?(_this3$getModuleDetai=_this3.getModuleDetails,moduleName=_this3$getModuleDetai.moduleName,id=_this3$getModuleDetai.id,promise=api/* API */.bl.updateRecord(moduleName,{data:data,id:id})):promise=api/* API */.bl.createRecord(_this3.moduleName,{data:data}),_context3.next=6,promise;case 6:_yield$promise=_context3.sent,error=_yield$promise.error,error?_this3.$message.error(error.message||"Error Occured"):(_this3.$message.success("Exception ".concat(_this3.isEdit?"Edited":"Created"," successfully")),_this3.closeDialog(!0)),_this3.saving=!1;case 10:case"end":return _context3.stop()}}),_callee3)})));return function(_x){return _ref4.apply(this,arguments)}}());case 1:case"end":return _context4.stop()}}),_callee4)})))()},serialize:function(){var schedule=this.schedule,daysInWeek=this.daysInWeek,name=schedule.name,startTime=schedule.startTime,endTime=schedule.endTime,isScheduleExtension=schedule.isScheduleExtension,isDay=schedule.isDay,selectedDays=schedule.selectedDays,date=schedule.date,isThisEvent=schedule.isThisEvent;if(this.isEdit&&isThisEvent){var _this$group=this.group,scheduleId=_this$group.controlSchedule.id,groupId=_this$group.id,_this$record=this.record,id=_this$record.id,exceptionId=_this$record.exception.id,startTimeMilli=_this$record.startTimeMilli,_date=moment(startTimeMilli).format("DD MM"),actualDate=moment(_date,"DD MM").format("x"),data={controlGroupModuleName:"controlGroupv2TenantSharing",startTime:this.getDateWithTime(actualDate,startTime),endTime:this.getDateWithTime(actualDate,endTime),exception:{id:exceptionId},group:{id:groupId},schedule:{id:scheduleId},id:id,offSchedule:isScheduleExtension};return data}var _this$currentGroup=this.currentGroup,_scheduleId=_this$currentGroup.controlSchedule.id,parentGroupId=_this$currentGroup.parentGroup.id,_data={name:name,type:isDay?1:2,offSchedule:isScheduleExtension,schedule:{id:_scheduleId}};if(isDay){var scheduleParam={frequency:1,frequencyType:1,values:[],times:[(0,ControlScheduleUtil/* getHour */.ex)(startTime,"HH:mm")],custom:!0},values=scheduleParam.values;selectedDays.forEach((function(currDay){var index=daysInWeek.findIndex((function(day){return day===currDay}));values.push(index+1),values.sort()})),_data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_data),{},{startScheduleJson:scheduleParam,endScheduleTime:(0,ControlScheduleUtil/* getHour */.ex)(endTime,"HH:mm")})}else _data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_data),{},{startTime:this.getDateWithTime(date,startTime),endTime:this.getDateWithTime(date,endTime)});if(this.isTenantGroup){var tenantSpecificData={tenant:{id:parseInt(this.tenantId)},parentGroup:{id:parentGroupId}};_data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_data),tenantSpecificData)}return _data},getDateWithTime:function(date,time){var milli=moment(date,"x").add((0,ControlScheduleUtil/* getHour */.ex)(time,"HH:mm"),"hours").format("x");return parseInt(milli)},isOptionsDisabled:function(currTimeInterval){var startTime=this.schedule.startTime;if((0,validation/* isEmpty */.xb)(startTime))return!0;var formattedStartTime=(0,ControlScheduleUtil/* getHour */.ex)(startTime,"H"),formattedInterval=(0,ControlScheduleUtil/* getHour */.ex)(currTimeInterval,"H");return!(formattedInterval>formattedStartTime)},clearValidation:function(){this.$refs["form"].clearValidate()}}},components_ChangeSchedulevue_type_script_lang_js=ChangeSchedulevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ChangeSchedulevue_type_script_lang_js,render,staticRenderFns,!1,null,"5310a446",null)
/* harmony default export */,ChangeSchedule=component.exports},
/***/131187:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DeleteSchedule}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/controls/controlgroups/components/DeleteSchedule.vue?vue&type=template&id=4152d249&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"agents-dialog fc-dialog-center-container mT10rem",staticStyle:{"z-index":"9999999999"},attrs:{title:_vm.$t("common.header.delete_schedule"),visible:!0,width:_vm.isSlotDeletion?"540px":"618px","append-to-body":!0,"before-close":function(){return _vm.closeDialog()},"show-close":!1}},[_vm.isSlotDeletion?_c("div",{staticClass:"pR30 pL30 pB30"},[_c("div",{staticClass:"delete-slot-content"},[_vm._v(" "+_vm._s(_vm.$t("common.header.are_you_sure_you_want_to_delete_this_slot"))+" ")])]):_c("div",{staticClass:"d-flex flex-row pR30 pL30 pB30"},[_c("div",{staticClass:"pR20 mT3 "},[_vm._v(_vm._s(_vm.$t("common._common.delete")))]),_c("el-radio-group",{attrs:{disabled:_vm.$validation.isEmpty(_vm.slotData)},model:{value:_vm.isThisEvent,callback:function($$v){_vm.isThisEvent=$$v},expression:"isThisEvent"}},[_c("el-radio",{staticClass:"fc-radio-btn mR10",attrs:{label:!0}},[_vm._v(_vm._s(_vm.$t("common.events.this_event")))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("common.wo_report.recurring")))])],1)],1),_c("div",{staticClass:"schedule-btn-footer"},[_c("el-button",{staticClass:"modal-btn-cancel text-uppercase",on:{click:function(){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save delete-dialog mL0",attrs:{loading:_vm.deleting},on:{click:_vm.deleteRecord}},[_vm._v(" "+_vm._s(_vm.deleting?_vm.$t("common._common.deleting"):_vm.$t("common._common.delete"))+" ")])],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=__webpack_require__(32284),validation=__webpack_require__(990260),DeleteSchedulevue_type_script_lang_js={props:["closeDialog","recordId","moduleName","slotData"],data:function(){return{isThisEvent:!0,deleting:!1}},created:function(){var slotData=this.slotData;(0,validation/* isEmpty */.xb)(slotData)&&(this.isThisEvent=!1)},computed:{getModuleDetails:function(){var slotData=this.slotData,isThisEvent=this.isThisEvent,recordId=this.recordId,moduleName=this.moduleName,_ref=slotData||{},edited=_ref.edited,id=_ref.id,exception=_ref.exception,_ref2=exception||{},startSchedule=_ref2.startSchedule,moduleDetails={};return moduleDetails=edited?{moduleName:"controlScheduleSlots",id:id}:(0,validation/* isEmpty */.xb)(startSchedule)||!isThisEvent?{moduleName:moduleName,id:recordId}:{moduleName:"controlScheduleSlots",id:id},moduleDetails},isSlotDeletion:function(){var slotData=this.slotData;if((0,validation/* isEmpty */.xb)(slotData))return!0;var _ref3=slotData||{},edited=_ref3.edited,exception=_ref3.exception,_ref4=exception||{},startSchedule=_ref4.startSchedule;return edited||(0,validation/* isEmpty */.xb)(startSchedule)}},methods:{deleteRecord:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$getModuleDetail,moduleName,id,_yield$API$deleteReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.deleting=!0,_this$getModuleDetail=_this.getModuleDetails,moduleName=_this$getModuleDetail.moduleName,id=_this$getModuleDetail.id,_context.next=4,api/* API */.bl.deleteRecord(moduleName,id);case 4:_yield$API$deleteReco=_context.sent,error=_yield$API$deleteReco.error,error?(_this.$message.error(error.message||"Error Occured"),_this.closeDialog()):(_this.$message.success(_this.$t("common.products.exception_deleted_successfully")),_this.closeDialog(!0)),_this.deleting=!1;case 8:case"end":return _context.stop()}}),_callee)})))()}}},components_DeleteSchedulevue_type_script_lang_js=DeleteSchedulevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_DeleteSchedulevue_type_script_lang_js,render,staticRenderFns,!1,null,"4152d249",null)
/* harmony default export */,DeleteSchedule=component.exports},
/***/266707:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"aa8bf7d214fbcc77945abad62903a613.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/75298.js.map