"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[75057,32686,80865,53021],{
/***/343540:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewTermsAndCondition}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/purchase/tandc/NewTermsAndCondition.vue?vue&type=template&id=da3d557c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,"before-close":_vm.closeDialog,"append-to-body":!0,title:_vm.formDisplayName,fullscreen:!0,"custom-class":"terms-form-dialog fc-dialog-form setup-dialog50 setup-dialog fc-web-form-dialog f-webform-right-dialog"},on:{"update:visible":function($event){_vm.visibility=$event}}},[_vm.isLoading?_vm._e():_c("div",{staticClass:"fc-pm-main-content-H"},[_vm._v(" "+_vm._s(_vm.formDisplayName)+" ")]),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("f-webform",{attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.formDisplayName,isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,moduleDataId:_vm.moduleDataId,isEdit:!_vm.$validation.isEmpty(_vm.moduleDataId)},on:{"update:form":function($event){_vm.formObj=$event},save:_vm.saveRecord,cancel:_vm.closeDialog}})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),FWebform=__webpack_require__(434500),FormCreation=__webpack_require__(373729),api=__webpack_require__(32284),validation=__webpack_require__(990260),NewTermsAndConditionvue_type_script_lang_js={extends:FormCreation/* default */.Z,components:{FWebform:FWebform/* default */.Z},props:["tAndCData","visibility","editId","isRevised"],data:function(){return{isSaving:!1}},computed:{formDisplayName:function(){return(this.formObj||{}).displayName},moduleDisplayName:function(){return this.formObj&&this.formObj.module?this.formObj.module.displayName:""},moduleDataId:function(){return this.editId},moduleName:function(){return"termsandconditions"},isV3Api:function(){return!0}},methods:{saveRecord:function(formModel){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var formObj,moduleName,moduleDataId,isRevised,formId,response,data,requestObj,_response,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(formObj=_this.formObj,moduleName=_this.moduleName,moduleDataId=_this.moduleDataId,isRevised=_this.isRevised,formId=formModel.formId,response={},data=_this.serializedData(formObj,formModel),(0,validation/* isEmpty */.xb)(formId)||(data.formId=formId),(0,validation/* isEmpty */.xb)(moduleDataId)||(data.id=moduleDataId),_this.isSaving=!0,!(0,validation/* isEmpty */.xb)(moduleDataId)&&!isRevised){_context.next=15;break}return requestObj={data:data},isRevised&&(requestObj.data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},data),{},{isPublished:!0}),requestObj.params={revise:!0}),_context.next=12,api/* API */.bl.createRecord(moduleName,requestObj);case 12:response=_context.sent,_context.next=18;break;case 15:return _context.next=17,api/* API */.bl.updateRecord(moduleName,{id:moduleDataId,data:data});case 17:response=_context.sent;case 18:_this.isSaving=!1,
// Hook to handle notification after crud operation
_this.notificationHandler(response),_response=response,error=_response.error,error||(_this.$emit("saved"),_this.closeDialog());case 22:case"end":return _context.stop()}}),_callee)})))()},closeDialog:function(){this.$emit("update:visibility",!1)}}},tandc_NewTermsAndConditionvue_type_script_lang_js=NewTermsAndConditionvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(tandc_NewTermsAndConditionvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewTermsAndCondition=component.exports},
/***/974514:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return RichTextAreaEditor}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/purchase/tandc/RichTextAreaEditor.vue?vue&type=template&id=b994cd6e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:_vm.$t("common.products.long_description"),visible:!0,width:"50%","append-to-body":!0,"before-close":_vm.cancel}},[_c("div",{staticClass:"pB70"},[_c("RichTextArea",{attrs:{disabled:_vm.disabled,isEdit:!0},model:{value:_vm.description,callback:function($$v){_vm.description=$$v},expression:"description"}})],1),_vm.disabled?_vm._e():_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.cancel}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.$t("common.roles.save"))+" ")])],1)])},staticRenderFns=[],RichTextArea=(__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(874249)),RichTextAreaEditorvue_type_script_lang_js={props:["content","disabled"],components:{RichTextArea:RichTextArea/* default */.Z},data:function(){return{description:null}},created:function(){this.content&&(this.description=this.content)},methods:{cancel:function(){this.$emit("onClose")},save:function(){this.$emit("onSave",this.description)}}},tandc_RichTextAreaEditorvue_type_script_lang_js=RichTextAreaEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(tandc_RichTextAreaEditorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,RichTextAreaEditor=component.exports},
/***/812708:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return TermsAndConditionSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/purchase/tandc/TermsAndConditionSummary.vue?vue&type=template&id=ae4e6d2c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"custom-modules-overview overflow-y-scroll",class:_vm.$validation.isEmpty(_vm.customClass)?"":_vm.customClass},[!_vm.isLoading&&_vm.customModuleData?_c("div",{staticClass:"header pT10 pB15 pL20 pR20"},[_vm.$validation.isEmpty(_vm.customModuleData)?_vm._e():_c("div",{staticClass:"asset-details"},[_c("div",{staticClass:"d-flex flex-middle"},[_vm.showPhotoField?_c("div",[_vm.customModuleData[_vm.photoFieldName]?_c("div",[_c("img",{staticClass:"img-container",attrs:{src:_vm.getImage(_vm.customModuleData[_vm.photoFieldName])}})]):_vm.showAvatar?_c("div",[_c("avatar",{attrs:{size:"lg",user:{name:_vm.customModuleData.name}}})],1):_vm._e()]):_vm._e(),_c("div",{staticClass:"mL5"},[_c("div",{staticClass:"asset-id mT10"},[_vm.$account.portalInfo?_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{animateFill:!1,animation:"shift-toward"},expression:"{ animateFill: false, animation: 'shift-toward' }"}],staticClass:"el-icon-back fc-grey3-text14 fw6 pR10 pointer",attrs:{content:"back",arrow:""},on:{click:_vm.back}}):_vm._e(),_vm._v(" #"+_vm._s(_vm.customModuleData.id)+" ")]),_c("div",{staticClass:"asset-name mb5 mT10"},[_vm.isRecordLocked?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fa fa-lock locked-wo mT0",attrs:{"data-arrow":"true",title:_vm.$t("common._common.locked_state")}}):_vm._e(),_vm._v(" "+_vm._s(_vm.customModuleData[_vm.mainFieldKey])+" "),_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL10"},[_vm._v(" "+_vm._s(_vm.getPublishedStatus())+" ")]),_vm.currentModuleState?_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.currentModuleState)+" ")]):_vm._e()])])])]),_c("div",{staticClass:"d-flex flex-direction-row",staticStyle:{"margin-left":"auto"}},[_c("CustomButton",{staticClass:"p10",attrs:{record:_vm.customModuleData,moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY},on:{refresh:function($event){return _vm.refreshObj(!0)},onError:function(){}}}),_vm.isStateFlowEnabled?[_c("TransitionButtons",{key:_vm.customModuleData.id,staticClass:"mR10",attrs:{moduleName:_vm.moduleName,record:_vm.customModuleData,disabled:_vm.isApprovalEnabled,buttonClass:"asset-el-btn"},on:{currentState:function(){},transitionSuccess:function($event){return _vm.refreshObj(!0)},transitionFailure:function(){}}})]:_vm._e(),_vm.isApprovalEnabled?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_c("ApprovalBar",{key:_vm.customModuleData.id+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:_vm.moduleName,record:_vm.customModuleData,hideApprovers:_vm.shouldHideApprovers},on:{onSuccess:function($event){return _vm.refreshObj()},onFailure:function(){}}})],1):_vm._e(),_c("div",{staticClass:"mL10 self-center fc-btn-ico-lg pT3 pB3 pL8 pR8 pointer"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-s-order pointer edit-icon-color",attrs:{"data-arrow":"true",title:_vm.$t("common.products.long_description")},on:{click:function($event){_vm.longDescVisibility=!0}}})]),_vm.canShowOptions?_c("el-dropdown",{staticClass:"mL10 self-center fc-btn-ico-lg pT3 pB3 pL8 pR8 pointer",attrs:{trigger:"click"},on:{command:function(action){return _vm.summaryDropDownAction(action)}}},[_c("span",{staticClass:"el-dropdown-link"},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"svgs/menu",iconClass:"icon icon-md"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[!_vm.isRecordLocked&&_vm.canShowPublish?[_c("el-dropdown-item",{attrs:{command:"edit"}},[_vm._v(_vm._s(_vm.$t("common._common.edit")))]),_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(_vm._s(_vm.$t("common._common.delete")))]),_c("el-dropdown-item",{attrs:{command:"publish"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.publish")))])]:_vm._e(),_vm.canShowRevise?_c("el-dropdown-item",{attrs:{command:"revise"}},[_vm._v(_vm._s(_vm.$t("common.products.revise")))]):_vm._e()],2)],1):_vm._e()],2)]):_vm._e(),_vm.longDescVisibility?_c("LongDescriptionEditor",{attrs:{content:_vm.termsandconditionsDetails.longDesc,disabled:!_vm.canShowEdit},on:{onSave:_vm.updateLongDescriptionData,onClose:function($event){_vm.longDescVisibility=!1}}}):_vm._e(),!_vm.isLoading&&_vm.customModuleData&&_vm.customModuleData.id?_c("page",{key:_vm.customModuleData.id,attrs:{module:_vm.moduleName,id:_vm.customModuleData.id,details:_vm.customModuleData,primaryFields:_vm.primaryFields,notesModuleName:_vm.notesModuleName,attachmentsModuleName:_vm.attachmentsModuleName,isV3Api:!0}}):_vm._e(),_vm.termsFormVisibility?_c("terms-and-condition-form",{attrs:{visibility:_vm.termsFormVisibility,tAndCData:_vm.termsandconditionsDetails,editId:_vm.id,isRevised:_vm.isRevised},on:{"update:visibility":function($event){_vm.termsFormVisibility=$event},saved:function($event){return _vm.refreshObj(!0)}}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),Overview=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(422273)),vuex_esm=__webpack_require__(420629),api=__webpack_require__(32284),eventBus=__webpack_require__(398011),validation=__webpack_require__(990260),CustomButton=__webpack_require__(623857),CustomButtonUtil=__webpack_require__(746095),NewTermsAndCondition=__webpack_require__(343540),RichTextAreaEditor=__webpack_require__(974514),router=__webpack_require__(329435),TermsAndConditionSummaryvue_type_script_lang_js={extends:Overview/* default */.Z,components:{CustomButton:CustomButton/* default */.Z,TermsAndConditionForm:NewTermsAndCondition/* default */.Z,LongDescriptionEditor:RichTextAreaEditor/* default */.Z},props:["viewname","field","moduleData"],data:function(){return{notesModuleName:"termsnotes",attachmentsModuleName:"termsattachments",primaryFields:["localId","longDesc"],termsandconditionsDetails:null,POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz,termsFormVisibility:!1,isRevised:!1,longDescVisibility:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatus","isStatusLocked"])),{},{customModuleData:function(){return this.termsandconditionsDetails}},(0,vuex_esm/* mapState */.rn)({ticketStatus:function(state){return state.ticketStatus.termsandconditions},metaInfo:function(state){return state.view.metaInfo}})),{},{moduleStateId:function(){return this.$getProperty(this,"customModuleData.moduleState.id")},canShowPublish:function(){var _ref=this.termsandconditionsDetails||{},isPublished=_ref.isPublished;return!isPublished},canShowRevise:function(){var moduleName=this.moduleName,canShowPublish=this.canShowPublish,_ref2=this.termsandconditionsDetails||{},isRevised=_ref2.isRevised;return this.$hasPermission("".concat(moduleName,":CREATE"))&&!canShowPublish&&!isRevised},canShowOptions:function(){var moduleName=this.moduleName,canShowPublish=this.canShowPublish,canShowRevise=this.canShowRevise,isRecordLocked=this.isRecordLocked,canShowOptions=!isRecordLocked&&canShowPublish||canShowRevise;return this.$hasPermission("".concat(moduleName,":UPDATE"))&&canShowOptions},isRecordLocked:function(){var moduleName=this.moduleName,_ref3=this.customModuleData||{},moduleState=_ref3.moduleState;if(this.isStateFlowEnabled){var hasState=this.$getProperty(moduleState,"id");return hasState&&this.isStatusLocked(hasState,moduleName)}return!1},isStateFlowEnabled:function(){return this.$getProperty(this,"customModuleData.moduleState.id")},canShowEdit:function(){var isRecordLocked=this.isRecordLocked,canShowPublish=this.canShowPublish,$hasPermission=this.$hasPermission,moduleName=this.moduleName;return $hasPermission("".concat(moduleName,":UPDATE"))&&!isRecordLocked&&canShowPublish}}),title:function(){},mounted:function(){eventBus/* eventBus */.Y.$on("refesh-parent",this.refreshObj)},beforeDestroy:function(){eventBus/* eventBus */.Y.$off("refesh-parent",this.refreshObj)},methods:{updateLongDescriptionData:function(longDesc){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleName,customModuleData,id,params,_yield$API$updateReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return moduleName=_this.moduleName,customModuleData=_this.customModuleData,id=customModuleData.id,params={id:id,data:{longDesc:longDesc}},_context.next=5,api/* API */.bl.updateRecord(moduleName,params);case 5:_yield$API$updateReco=_context.sent,error=_yield$API$updateReco.error,error?_this.$message.error(error.message||"Error Occured"):(_this.$message.success(_this.$t("common.products.long_description_edited_successfully")),_this.longDescVisibility=!1,_this.loadCustomModuleData());case 8:case"end":return _context.stop()}}),_callee)})))()},getPublishedStatus:function(){var published=this.termsandconditionsDetails.published;return published?"published":"not published"},refreshObj:function(refreshList){this.loadCustomModuleData(),(refreshList||this.canShowRevise)&&this.$emit("refreshSummaryList",!0)},loadCustomModuleData:function(){var _arguments=arguments,_this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var force,config,_yield$API$fetchRecor,termsandconditions,error,_error$message,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],config=force?{force:force}:{},_this2.isLoading=!0,_context2.next=5,api/* API */.bl.fetchRecord(_this2.moduleName,{id:_this2.id},config);case 5:_yield$API$fetchRecor=_context2.sent,termsandconditions=_yield$API$fetchRecor.termsandconditions,error=_yield$API$fetchRecor.error,(0,validation/* isEmpty */.xb)(error)?_this2.termsandconditionsDetails=termsandconditions:(_error$message=error.message,message=void 0===_error$message?"Error Occured while fetching Terms and Condition":_error$message,_this2.$message.error(message)),_this2.isLoading=!1;case 10:case"end":return _context2.stop()}}),_callee2)})))()},delete:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var value,id,_yield$API$deleteReco,error,_ref4,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this3.$dialog.confirm({title:_this3.$t("common.header.delete_terms_and_conditions"),message:_this3.$t("common._common.are_you_want_delete_terms_and_conditions"),rbDanger:!0,rbLabel:_this3.$t("common._common.delete")});case 2:if(value=_context3.sent,!value){_context3.next=10;break}return id=_this3.id,_context3.next=7,api/* API */.bl.deleteRecord("termsandconditions",id);case 7:_yield$API$deleteReco=_context3.sent,error=_yield$API$deleteReco.error,error?_this3.$message.error(error.message||"Error Occured"):(_this3.$message.success(_this3.$t("common._common.delete_success")),(0,router/* isWebTabsEnabled */.tj)()?(_ref4=(0,router/* findRouteForModule */.Jp)(_this3.getCurrentModule,router/* pageTypes */.As.LIST)||{},name=_ref4.name,name&&_this3.$router.push({name:name,params:{viewname:_this3.viewname},query:_this3.$route.query})):_this3.$router.push({path:"/app/purchase/tandc/".concat(_this3.viewname)}));case 10:case"end":return _context3.stop()}}),_callee3)})))()},summaryDropDownAction:function(action){"edit"===action?this.termsFormVisibility=!0:"delete"===action?this.delete():"revise"===action?this.revise():"publish"===action&&this.publish()},publish:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var id,moduleName,_yield$API$updateReco2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return id=_this4.id,moduleName=_this4.moduleName,_context4.next=3,api/* API */.bl.updateRecord(moduleName,{id:id,data:{},params:{publish:!0}});case 3:if(_yield$API$updateReco2=_context4.sent,error=_yield$API$updateReco2.error,!error){_context4.next=9;break}_this4.$message.error(error.message||"Error Occurred"),_context4.next=12;break;case 9:return _this4.$message.success("Published Successfully"),_context4.next=12,_this4.loadCustomModuleData(!0);case 12:case"end":return _context4.stop()}}),_callee4)})))()},revise:function(){this.isRevised=!0,this.termsFormVisibility=!0}}},tandc_TermsAndConditionSummaryvue_type_script_lang_js=TermsAndConditionSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(tandc_TermsAndConditionSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,TermsAndConditionSummary=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/75057.js.map