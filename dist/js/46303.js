"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[46303,71569],{
/***/806339:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WidgetPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/utils/WidgetPagination.vue?vue&type=template&id=6b10cd5b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-widget-pagination"},[_vm.total>0?_c("div",{class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" -")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm.hideToggle?_vm._e():[_vm._v(" of "+_vm._s(_vm.total)+" "),_c("span",{staticClass:"el-icon-arrow-left fc-black-small-txt-12 fw-bold f16 pointer mL10 mR5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right fc-black-small-txt-12 f16 pointer mR10 fw-bold",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})]],2):_vm._e()])},staticRenderFns=[],WidgetPaginationvue_type_script_lang_js={props:["currentPage","perPage","total","hideToggle"],data:function(){return{from:0,to:0,page:1}},mounted:function(){this.init()},watch:{total:function(){this.init()},currentPage:function(val){val!==this.page&&this.init()}},methods:{init:function(){this.page=this.currentPage||1,this.from=(this.page-1)*this.perPage+1;var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.updateCurrentPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.updateCurrentPage()},updateCurrentPage:function(){
// Update currentPage value
this.$emit("update:currentPage",this.page),this.$emit("onChange")}}},utils_WidgetPaginationvue_type_script_lang_js=WidgetPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(utils_WidgetPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WidgetPagination=component.exports},
/***/784823:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AdvancedSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/search/AdvancedSearch.vue?vue&type=template&id=66305202
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"d-flex align-center",on:{click:function($event){return _vm.openCloseSearch(!0)}}},[_vm._t("icon",(function(){return[_c("InlineSvg",{staticClass:"d-flex mT3 cursor-pointer",attrs:{src:"svgs/search",iconClass:"icon icon-sm self-center mR5"}})]}))],2),_vm.canShowSearchWiz?_c("el-dialog",{attrs:{title:_vm.title,visible:_vm.canShowSearchWiz,fullscreen:!0,"append-to-body":!0,"custom-class":"advance-search-container"},on:{"update:visible":function($event){_vm.canShowSearchWiz=$event}}},[_c("AdvancedSearch",{attrs:{moduleName:_vm.moduleName,searchParam:_vm.searchParam,hideQuery:_vm.hideQuery,filterList:_vm.filterList},on:{applyFilters:_vm.applyFilters,closeDialog:function(){return _vm.openCloseSearch(!1)}}})],1):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),router=(__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(329435)),dist=__webpack_require__(191853),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),AdvancedSearchvue_type_script_lang_js={props:["moduleName","moduleDisplayName","filterList","hideQuery","onSave"],components:{AdvancedSearch:dist/* AdvancedSearch */.ZJ},data:function(){return{searchText:"",canShowSearchWiz:!1,isSaving:!1,searchableFields:[],isOpenWizPressed:!1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&(document.addEventListener("keydown",this.keyDownHandler),document.addEventListener("keyup",this.keyUpHandler))},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&(document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler))},computed:{title:function(){var moduleDisplayName=this.moduleDisplayName,title="".concat(this.$t("commissioning.sheet.filter")," ").concat(moduleDisplayName," ").concat(this.$t("filters.search.by"));return title},searchParam:function(){var $route=this.$route,_ref=$route||{},query=_ref.query,_ref2=query||{},search=_ref2.search;return(0,validation/* isEmpty */.xb)(search)?"":search}},mounted:function(){this.fetchSearchableFields({moduleName:this.moduleName})},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({fetchSearchableFields:"search/fetchSearchableFields"})),{},{openCloseSearch:function(canShow){this.searchText="",this.canShowSearchWiz=canShow},applyFilters:function(filters){var hideQuery=this.hideQuery;hideQuery?this.onSave({filters:filters}):this.$store.dispatch("search/applyFilters",filters),this.openCloseSearch(!1)},keyDownHandler:function(e){if(e.shiftKey&&"Slash"===e.code)this.isOpenWizPressed=!0;else{var _navigator=navigator,userAgentData=_navigator.userAgentData,platform=_navigator.platform,_ref3=userAgentData||{},userPlatform=_ref3.platform,currentOS=userPlatform||platform,isMac=currentOS.toUpperCase().indexOf("MAC")>=0;(isMac&&e.metaKey||!isMac&&e.ctrlKey)&&"Enter"===e.key&&this.applyFilter()}},keyUpHandler:function(){this.isOpenWizPressed&&(this.openCloseSearch(!0),this.isOpenWizPressed=!1)}})},search_AdvancedSearchvue_type_script_lang_js=AdvancedSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(search_AdvancedSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AdvancedSearch=component.exports},
/***/622957:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupEmptyState}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupEmptyState.vue?vue&type=template&id=839bdf38
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-empty"},[_c("div",{staticClass:"fc-setup-empty-image"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}})],1),_c("div",{staticClass:"fc-setup-empty-txt"},[_vm._t("emptyHeading")],2),_c("div",{staticClass:"fc-setup-empty-txt-desc"},[_vm._t("emptyDescription")],2)])},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupEmptyState=component.exports},
/***/233432:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupLoader.vue?vue&type=template&id=367e612c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-loader"},[_vm._t("setupLoading")],2)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupLoader=component.exports},
/***/326869:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return KPITemplatesList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/readingkpi/KPITemplatesList.vue?vue&type=template&id=18f28917&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"kpi-list"},[_c("portal",{attrs:{to:"kpi-setup-tab-actions"}},[_c("div",{staticClass:"search-and-pagination-container flex-middle"},[_c("AdvancedSearch",{key:_vm.moduleName+"-search",attrs:{moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,hideQuery:!0,onSave:_vm.applyReadingKpiFilters,filterList:_vm.kpiFilterList}}),_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticClass:"pagination-container"},[_c("Pagination",{attrs:{currentPage:_vm.page,total:_vm.recordCount,perPage:_vm.perPage},on:{"update:currentPage":[function($event){_vm.page=$event},_vm.loadNextPage],"update:current-page":function($event){_vm.page=$event}}})],1)],1)]),_c("FTags",{key:"ftags-list-"+_vm.moduleName,staticClass:"border-tlbr-none mT0 mR0 mL0 mb5",attrs:{filterList:_vm.kpiFilterList,hideQuery:!0,hideSaveView:!0},on:{updateFilters:_vm.applyReadingKpiFilters,resetFilters:_vm.resetFilters}}),_vm.isLoading?_c("SetupLoader",{scopedSlots:_vm._u([{key:"setupLoading",fn:function(){return[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})]},proxy:!0}],null,!1,3036156284)}):_vm.$validation.isEmpty(_vm.records)&&!_vm.isLoading?_c("div",[_c("SetupEmpty",{scopedSlots:_vm._u([{key:"emptyImage",fn:function(){return[_c("inline-svg",{attrs:{src:"svgs/copy2",iconClass:"icon icon-sm-md"}})]},proxy:!0},{key:"emptyHeading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("kpi.kpi.no_kpi_available"))+" ")]},proxy:!0},{key:"emptyDescription",fn:function(){},proxy:!0}])})],1):_vm._e(),_c("el-table",{staticClass:"width100 fc-setup-table fc-setup-table-th-borderTop",attrs:{data:_vm.records,height:"calc(100vh - 225px)"}},[_c("el-table-column",{attrs:{prop:"name",label:_vm.$t("common.products._name"),width:"200",fixed:""},scopedSlots:_vm._u([{key:"default",fn:function(readingKpi){return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade",distance:0,interactive:!0},expression:"{\n            arrow: true,\n            arrowType: 'round',\n            animation: 'fade',\n            distance: 0,\n            interactive: true,\n          }"}],staticClass:"overflow-handle",attrs:{content:_vm.getKpiName(readingKpi.row)}},[_vm._v(" "+_vm._s(_vm.getKpiName(readingKpi.row))+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"assetCategory",label:_vm.$t("asset.assets.asset_category"),width:"200",fixed:""},scopedSlots:_vm._u([{key:"default",fn:function(readingKpi){return[_c("div",{staticClass:"overflow-handle"},[_vm._v(" "+_vm._s(_vm.getAssetCategory(readingKpi.row))+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"spaceOrAsset",label:_vm.$t("common._common.space/asset"),width:"200"},scopedSlots:_vm._u([{key:"default",fn:function(readingKpi){return[_c("div",{staticClass:"overflow-handle"},[_vm._v(" "+_vm._s(_vm.getResourceName(readingKpi.row))+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"frequency",label:_vm.$t("asset.assets.asset_freq"),width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(readingKpi){return[_vm._v(" "+_vm._s(_vm.getFrequency(readingKpi.row))+" ")]}}])}),_c("el-table-column",{attrs:{prop:"createdBy",label:_vm.$t("custommodules.list.created_by"),width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(readingKpi){return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade",distance:0,interactive:!0},expression:"{\n            arrow: true,\n            arrowType: 'round',\n            animation: 'fade',\n            distance: 0,\n            interactive: true,\n          }"}],staticClass:"overflow-handle",attrs:{content:_vm.getCreatedUserName(readingKpi.row)}},[_vm._v(" "+_vm._s(_vm.getCreatedUserName(readingKpi.row))+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"modifiedBy",label:_vm.$t("common.failure_class.modified_by"),width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(readingKpi){return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade",distance:0,interactive:!0},expression:"{\n            arrow: true,\n            arrowType: 'round',\n            animation: 'fade',\n            distance: 0,\n            interactive: true,\n          }"}],staticClass:"overflow-handle",attrs:{content:_vm.getModifiedUserName(readingKpi.row)}},[_vm._v(" "+_vm._s(_vm.getModifiedUserName(readingKpi.row))+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"status",label:_vm.$t("alarm.alarm.alarm_status"),width:"100"},scopedSlots:_vm._u([{key:"default",fn:function(readingKpi){return[_c("el-switch",{attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.toggleStatus(readingKpi.row)}},model:{value:readingKpi.row.status,callback:function($$v){_vm.$set(readingKpi.row,"status",$$v)},expression:"readingKpi.row.status"}})]}}])}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{prop:"",label:"",width:"110px",fixed:"right"},scopedSlots:_vm._u([{key:"default",fn:function(readingKpi){return[_c("div",{staticClass:"text-center template-actions content-between inline-flex"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit edit-icon visibility-hide-actions pR15",attrs:{"data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editKpi(readingKpi.row)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete fc-delete-icon visibility-hide-actions pR10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecords([readingKpi.row.id])}}}),_vm.isActiveKpi(readingKpi)&&!_vm.isDynamicKpi(readingKpi)?_c("el-dropdown",{attrs:{trigger:"click"},on:{command:function($event){return _vm.handleDropDown($event,readingKpi.row)}}},[_c("span",{staticClass:"el-dropdown-link"},[_c("fc-icon",{staticClass:"visibility-hide-actions ellipsis-icon",attrs:{group:"default",name:"ellipsis-vertical",size:"16"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"runHistory"}},[_vm._v(_vm._s(_vm.$t("kpi.historical.run_historical")))])],1)],1):_vm._e()],1)]}}])})],1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),SetupLoader=(__webpack_require__(648324),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(169358),__webpack_require__(434284),__webpack_require__(233432)),SetupEmptyState=__webpack_require__(622957),WidgetPagination=__webpack_require__(806339),AdvancedSearch=__webpack_require__(784823),FTags=__webpack_require__(775676),api=__webpack_require__(32284),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),CustomModuleData=__webpack_require__(689565),frequencies={"1 Min":1,"2 Mins":2,"3 Mins":3,"4 Mins":4,"5 Mins":5,"10 Mins":6,"15 Mins":7,"20 Mins":8,"30 Mins":9,"1 Hr":10,"2 Hr":11,"3 Hr":12,"4 Hr":13,"8 Hr":14,"12 Hr":15,"1 Day":16,"Weekly ":17,"Monthly ":18,"Quarterly ":19,"Half Yearly":20,"Annually ":21},KPITemplatesListvue_type_script_lang_js={components:{SetupLoader:SetupLoader/* default */.Z,SetupEmpty:SetupEmptyState/* default */.Z,Pagination:WidgetPagination/* default */.Z,AdvancedSearch:AdvancedSearch/* default */.Z,FTags:FTags["default"]},data:function(){return{showDialog:!1,isLoading:!1,records:[],kpiFilterList:[],selectedImpact:null,recordCount:null,page:1,perPage:50,frequencies:frequencies}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadRecords({force:!0});case 2:_this.$store.dispatch("loadAssetCategory");case 3:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategoryList:function(state){return state.assetCategory}})),(0,vuex_esm/* mapGetters */.Se)(["getUser"])),{},{moduleName:function(){return"readingkpi"},moduleDisplayName:function(){return"ReadingKPI"},modelDataClass:function(){return CustomModuleData/* CustomModuleData */.u}}),methods:{resetPage:function(){this.page=1},resetFilters:function(){this.kpiFilterList=[],this.resetPage(),this.loadRecords({filters:this.kpiFilterList})},toggleStatus:function(kpiObj){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref,id,status,dataObj,payload,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref=kpiObj||{},id=_ref.id,status=_ref.status,dataObj={status:status},payload={data:dataObj,moduleName:_this2.moduleName,id:id},_context2.next=5,api/* API */.bl.post("v3/modules/data/patch",payload);case 5:_yield$API$post=_context2.sent,error=_yield$API$post.error,(0,validation/* isEmpty */.xb)(error)?_this2.$message.success(_this2.$t("kpi.kpi.status_update_success")):_this2.$message.error(error.message||_this2.$t("kpi.kpi.status_update_failed"));case 8:case"end":return _context2.stop()}}),_callee2)})))()},applyReadingKpiFilters:function(_ref2){var filters=_ref2.filters;this.kpiFilterList=filters,this.resetPage(),this.loadRecords({filters:JSON.stringify(this.kpiFilterList)})},loadRecords:function(props){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref3,filters,force,moduleName,page,perPage,params,_yield$API$get,data,meta,_ref4,readingkpi,_ref5,pagination,_ref6,totalCount;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_ref3=props||{},filters=_ref3.filters,force=_ref3.force,moduleName=_this3.moduleName,page=_this3.page,perPage=_this3.perPage,params={moduleName:moduleName,page:page,perPage:perPage,force:force,filters:filters,withCount:!0,orderBy:"SYS_CREATED_TIME",orderType:"desc"},_this3.isLoading=!0,_context3.next=7,api/* API */.bl.get("v3/modules/data/list",params);case 7:_yield$API$get=_context3.sent,data=_yield$API$get.data,meta=_yield$API$get.meta,_ref4=data||{},readingkpi=_ref4.readingkpi,_this3.records=readingkpi,_ref5=meta||{},pagination=_ref5.pagination,_ref6=pagination||{},totalCount=_ref6.totalCount,_this3.recordCount=totalCount,_context3.next=20;break;case 17:_context3.prev=17,_context3.t0=_context3["catch"](0),_this3.$message.error(_context3.t0);case 20:_this3.isLoading=!1;case 21:case"end":return _context3.stop()}}),_callee3,null,[[0,17]])})))()},editKpi:function(record){var _ref7=record||{},id=_ref7.id;this.$router.push({name:"edit-kpi",params:{id:id},query:this.$route.query})},loadNextPage:function(page){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this4.page=page,_context4.next=3,_this4.loadRecords();case 3:case"end":return _context4.stop()}}),_callee4)})))()},getKpiName:function(kpi){return this.$getProperty(kpi,"name","---")},getResourceName:function(kpiObj){var _ref8=kpiObj||{},ns=_ref8.ns,assetCategory=_ref8.assetCategory,firstAssetName=_ref8.firstAssetName,includedAssetIds=this.$getProperty(ns,"includedAssetIds",[]),displayName=assetCategory.displayName;if((0,validation/* isEmpty */.xb)(includedAssetIds))return(0,validation/* isEmpty */.xb)(assetCategory)?"---":"All  ".concat(displayName,"s");var assetCategoryId=this.$getProperty(assetCategory,"id");if(assetCategoryId>0){var message,assetCount=includedAssetIds.length;if(!(0,validation/* isEmpty */.xb)(assetCount)){if(1===assetCount)return firstAssetName;message="".concat(assetCount," ").concat(displayName,"s")}return message}return 1===includedAssetIds.length?firstAssetName:void 0},getAssetCategory:function(record){var _ref9=record||{},assetCategory=_ref9.assetCategory;return this.$getProperty(assetCategory,"displayName","---")},getFrequency:function(record){var freq,frequencies=this.frequencies,frequency=record.frequency,kpiType=record.kpiType;return 1!==kpiType&&2!==kpiType||(freq=Object.keys(frequencies).find((function(key){return frequencies[key]===frequency}))),(0,validation/* isEmpty */.xb)(freq)?"---":freq},getStatus:function(record){return this.$getProperty(record,"status","---")},getCreatedUserName:function(readingKpi){var _ref10=readingKpi||{},sysCreatedBy=_ref10.sysCreatedBy;return this.getUserName(sysCreatedBy)},getModifiedUserName:function(readingKpi){var _ref11=readingKpi||{},sysModifiedBy=_ref11.sysModifiedBy;return this.getUserName(sysModifiedBy)},getUserName:function(userObj){if(!(0,validation/* isEmpty */.xb)(userObj)){var id=userObj.id,currentUser=this.getUser(id);return"Unknown"===currentUser.name?"---":currentUser.name}return"---"},deleteRecords:function(idList){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var value,moduleName,_yield$API$deleteReco,error,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_this5.$dialog.confirm({title:_this5.$t("kpi.kpi.delete_kpi"),message:_this5.$t("kpi.kpi.delete_confirm"),rbDanger:!0,rbLabel:_this5.$t("common._common.delete")});case 2:if(value=_context5.sent,!value){_context5.next=10;break}return moduleName=_this5.moduleName,_context5.next=7,api/* API */.bl.deleteRecord(moduleName,idList);case 7:_yield$API$deleteReco=_context5.sent,error=_yield$API$deleteReco.error,error?(message=error.message,_this5.$message.error(message)):(_this5.$message.success(_this5.$t("kpi.kpi.delete_success")),_this5.loadRecords(!0));case 10:case"end":return _context5.stop()}}),_callee5)})))()},handleDropDown:function(command,record){var _ref12=record||{},id=_ref12.id;"runHistory"===command&&this.$router.push({name:"readingkpi.logs",params:{kpiId:id}})},isActiveKpi:function(record){var _ref13=record||{},_ref13$row=_ref13.row,_ref13$row2=void 0===_ref13$row?{}:_ref13$row,status=_ref13$row2.status;return status},isDynamicKpi:function(record){var _ref14=record||{},_ref14$row=_ref14.row,_ref14$row2=void 0===_ref14$row?{}:_ref14$row,kpiType=_ref14$row2.kpiType;return 3===kpiType}}},readingkpi_KPITemplatesListvue_type_script_lang_js=KPITemplatesListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(readingkpi_KPITemplatesListvue_type_script_lang_js,render,staticRenderFns,!1,null,"18f28917",null)
/* harmony default export */,KPITemplatesList=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/46303.js.map