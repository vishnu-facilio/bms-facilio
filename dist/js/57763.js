(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[57763],{
/***/490966:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ColumnCustomization}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ColumnCustomization.vue?vue&type=template&id=3753cf18
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.showDialog,fullscreen:!0,"custom-class":"cc-dialog",title:_vm.$t("common._common.column_settings"),"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"scrollable",staticStyle:{padding:"20px 0","max-height":"85vh"}},[_vm.fixedFields&&_vm.fixedFields.length?_c("div",{staticClass:"fixed-column"},[_c("el-checkbox-group",{model:{value:_vm.selectedFixedColumns,callback:function($$v){_vm.selectedFixedColumns=$$v},expression:"selectedFixedColumns"}},_vm._l(_vm.fixedFields,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",staticStyle:{border:"none"},attrs:{disabled:field.disabled,label:field.fieldId}},[_vm._v(_vm._s(_vm.getDisplayName(field)))])})),1)],1):_vm._e(),_c("el-divider",{staticClass:"mT0 mB20"}),_c("el-checkbox-group",{staticClass:"fc-column-checkbox pL20 pR20 pT0 pB0",model:{value:_vm.selectedColumns,callback:function($$v){_vm.selectedColumns=$$v},expression:"selectedColumns"}},[_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.sortedFields,"data-parent":"default"}},_vm._l(_vm.sortedFields,(function(field){return _c("el-checkbox",{key:field.name,staticClass:"column-item",class:{checkboxSelected:!0===field.edit},attrs:{label:field.name,value:field.name}},[_c("el-row",[_c("el-col",{attrs:{span:1}},[_c("inline-svg",{staticClass:"vertical-middle cursor-drag icon-right column-drag-icon",staticStyle:{cursor:"-webkit-grabbing"},attrs:{src:"drag-drop",iconClass:"icon icon-sm-md"}})],1),_c("el-col",{attrs:{span:22}},[field.edit?_c("el-input",{ref:"columnRenameInp",refInFor:!0,staticClass:"fc-input-border-remove width90 column-name-change-input",attrs:{placeholder:"Change your column name",autofocus:!0},on:{blur:function($event){field.edit=!1,_vm.$emit("update")},keyup:function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter"))return null;field.edit=!1,_vm.$emit("update")}},model:{value:field.columnDisplayName,callback:function($$v){_vm.$set(field,"columnDisplayName",$$v)},expression:"field.columnDisplayName"}}):_c("div",{},[_vm._v(" "+_vm._s(field.columnDisplayName)+" "),field.field&&field.field.displayName!==field.columnDisplayName?_c("span",{staticClass:"fc-grey-text12 pL5"},[_vm._v(_vm._s(field.field.displayName))]):_vm._e()])],1),_c("el-col",{staticClass:"visibility-hide-actions text-right",attrs:{span:1}},[_c("i",{staticClass:"el-icon-edit pR10 fc-grey3-text14 pL25 column-edit-icon",on:{click:function($event){return $event.stopPropagation(),$event.preventDefault(),_vm.showRenameColumn(field)}}})])],1)],1)})),1),_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.selectedlookupColumns,"data-parent":_vm.selectedLookup}},_vm._l(_vm.selectedlookupColumns,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",attrs:{label:field.fieldId,"data-field-id":field.fieldId},on:{change:function($event){return _vm.onLookupSelected(field)}}},[_vm._v(" "+_vm._s(field.columnDisplayName)+" ")])})),1)],1)],1),_c("div",{staticClass:"modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving,disabled:_vm.isSaving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.isSaving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),vuex_esm=(__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(339772),__webpack_require__(947522),__webpack_require__(420629)),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),validation=__webpack_require__(990260),jquery=__webpack_require__(619755),jquery_default=__webpack_require__.n(jquery),columnConfigUtil=__webpack_require__(486613),ColumnCustomizationvue_type_script_lang_js={props:["visible","moduleName","viewName","relatedViewDetail","relatedMetaInfo","refreshRelatedList","excludeMainField"],data:function(){return{selectedColumns:[],selectedFixedColumns:[],showDialog:this.visible,sortedFields:this.allFields,nonSelectableColumns:["localId","photoId"],lookupMetaColumns:{},selectedLookup:"",dragOptions:{handle:".icon-right",ghostClass:"drag-ghost",dragClass:"custom-drag",animation:150},columnNameShow:!1,isSaving:!1,editedColumn:null}},components:{draggable:vuedraggable_umd_default()},created:function(){var _this$nonSelectableCo,nonSelectableColumns=this.$getProperty(this.columnConfig,"nonSelectableColumns");(0,validation/* isEmpty */.xb)(nonSelectableColumns)||(_this$nonSelectableCo=this.nonSelectableColumns).push.apply(_this$nonSelectableCo,(0,toConsumableArray/* default */.Z)(nonSelectableColumns));this.sortedFields=this.allFields},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({stateMetaInfo:function(state){return state.view.metaInfo},stateViewDetail:function(state){return state.view.currentViewDetail}})),{},{metaInfo:function(){var stateMetaInfo=this.stateMetaInfo,relatedMetaInfo=this.relatedMetaInfo;return(0,validation/* isEmpty */.xb)(relatedMetaInfo)?stateMetaInfo:relatedMetaInfo},viewDetail:function(){var stateViewDetail=this.stateViewDetail,relatedViewDetail=this.relatedViewDetail;return(0,validation/* isEmpty */.xb)(relatedViewDetail)?stateViewDetail:relatedViewDetail},currentView:function(){return this.viewName?this.viewName:this.$route.params.viewname?this.$route.params.viewname:"all"},columnConfig:function(){var _ref=this.$attrs||{},columnConfig=_ref.columnConfig;return(0,validation/* isEmpty */.xb)(columnConfig)?(0,columnConfigUtil/* getColumnConfig */.U)(this.moduleName):columnConfig},fixedColumns:function(){
// Will be disabled. User wont be able to select
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedColumns=columnConfig.fixedColumns;return fixedColumns}return[]},fixedSelectableColumns:function(){
// Cannot change the order
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedSelectableColumns=columnConfig.fixedSelectableColumns;return fixedSelectableColumns}return[]},availableColumns:function(){var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var availableColumns=columnConfig.availableColumns;return availableColumns}return[]},metaColumns:function(){var _this=this,columns=[];return this.metaInfo&&this.metaInfo.fields&&this.viewDetail&&(columns=this.metaInfo.fields.map((function(field){return field.columnDisplayName=_this.viewDetail.defaultModuleFields&&_this.viewDetail.defaultModuleFields[field.name]?_this.viewDetail.defaultModuleFields[field.name].columnDisplayName:field.displayName,field}))),columns},allFields:function(){var _this2=this,viewFields=this.viewFields.filter((function(field){return 17!==_this2.$getProperty(field,"field.dataType")})),metaColumns=this.metaColumns.filter((function(field){return!_this2.viewFields.find((function(val){return val.name===field.name}))&&!(_this2.nonSelectableColumns||[]).includes(field.name)&&(!(_this2.availableColumns||{}).length||-1!==_this2.availableColumns.indexOf(field.name)||!field.default)&&17!==field.dataType})),columns=[].concat((0,toConsumableArray/* default */.Z)(viewFields),(0,toConsumableArray/* default */.Z)(metaColumns)).filter((function(field){return!(_this2.allFixedColumns||[]).includes(field.name)}));return columns},viewFields:function(){var _this3=this,columns=[];return this.viewDetail&&this.viewDetail.fields&&(columns=this.viewDetail.fields.map((function(vf){vf.name=(vf.field||{}).name||vf.fieldName,vf.fieldId=(vf.field||{}).fieldId;var defaultColumnName=_this3.viewDetail.defaultModuleFields&&_this3.viewDetail.defaultModuleFields[vf.name]?_this3.viewDetail.defaultModuleFields[vf.name].columnDisplayName:null;return vf.columnDisplayName=vf.columnDisplayName||defaultColumnName||vf.field.displayName,vf}))),columns},fixedFields:function(){var _this4=this;return this.metaColumns.filter((function(field){return(_this4.allFixedColumns||[]).includes(field.name)})).map((function(field){return field.disabled=(_this4.fixedColumns||[]).includes(field.name),field}))},allFixedColumns:function(){return(0,validation/* isEmpty */.xb)(this.fixedSelectableColumns)?this.fixedColumns:this.fixedColumns.concat(this.fixedSelectableColumns)},lookupList:function(){var _this5=this,fields=[];return(this.columnConfig||{}).lookupToShow&&this.metaColumns&&(fields=this.metaColumns.filter((function(field){return field.lookupModule&&(!_this5.columnConfig.lookupToShow.length||(_this5.columnConfig.lookupToShow||[]).includes(field.name))}))),fields},selectedlookupColumns:function(){var _this6=this;return this.lookupMetaColumns[this.selectedLookup]?this.lookupMetaColumns[this.selectedLookup].filter((function(field){return-1===_this6.sortedFields.findIndex((function(vf){return vf.fieldId===field.fieldId}))})).map((function(field){return field.columnDisplayName=field.displayName,field.parentFieldId=_this6.selectedLookupObj.fieldId,field})):[]},selectedLookupObj:function(){var _this7=this;return this.lookupList.find((function(field){return field.name===_this7.selectedLookup}))},mainField:function(){return this.metaColumns.find((function(field){return field.mainField}))}}),watch:{visible:function(val,oldVal){val&&this.reInit(),this.showDialog=val},showDialog:function(val,oldVal){this.$emit("update:visible",val)},allFields:function(val){this.sortedFields=val}},methods:{showRenameColumn:function(field){var _this8=this;this.$set(field,"edit",!0),this.$nextTick((function(){_this8.$refs["columnRenameInp"][0].focus()}))},save:function(){var _this9=this;this.isSaving=!0;var excludeMainField=this.excludeMainField,fields=[];fields=(0,validation/* isEmpty */.xb)(excludeMainField)?[{fieldId:this.mainField.id}].concat((0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}})))):(0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}}))),fields=[].concat((0,toConsumableArray/* default */.Z)(fields),(0,toConsumableArray/* default */.Z)(this.selectedFixedColumns.map((function(id){return{fieldId:id}}))));var self=this;this.$store.dispatch("view/customizeColumns",{moduleName:this.moduleName,viewName:this.currentView,fields:fields}).then((function(){self.isSaving=!1,self.showDialog=!1,self.$emit("refreshRelatedList"),self.$message.success(self.$t("common._common.view_updated_successfully"))})).catch((function(error){_this9.$message.error(error.message||_this9.$t("common._common.error_occured"))}))},editColumn:function(){this.editedColumn=this.field},reInit:function(){var _this10=this;this.selectedLookup="",this.selectedColumns=[],this.selectedFixedColumns=[],this.viewFields.forEach((function(vf){(_this10.allFixedColumns||[]).includes(vf.name)&&-1===vf.parentFieldId?(_this10.fixedSelectableColumns||[]).includes(vf.name)&&_this10.selectedFixedColumns.push(vf.fieldId):_this10.selectedColumns.push(vf.name)}))},loadModuleMeta:function(){var _this11=this;this.selectedLookup&&!this.lookupMetaColumns[this.selectedLookup]&&this.$http.get("/module/meta?moduleName="+this.selectedLookupObj.lookupModule.name).then((function(response){_this11.$set(_this11.lookupMetaColumns,_this11.selectedLookup,response.data.meta.fields)}))},getDisplayName:function(field){var displayName=field.columnDisplayName;if(this.viewDetail&&this.viewDetail.fields){var vf=this.viewDetail.fields.find((function(vf){return vf.name===field.name}));vf&&(displayName=vf.columnDisplayName||displayName)}return displayName},onLookupSelected:function(field){this.animate(field.fieldId,(function(){this.selectedlookupColumns=this.selectedlookupColumns.filter((function(lf){return lf.fieldId!==field.fieldId})),field.columnDisplayName+=" ("+this.selectedLookupObj.displayName+")",this.sortedFields.push(field)}))},animate:function(fieldId,cbk){var $selectedElement=jquery_default()('[data-field-id="'+fieldId+'"]'),oldOffset=$selectedElement.offset();$selectedElement.appendTo(jquery_default()("[data-parent='default']"));var newOffset=$selectedElement.offset(),temp=$selectedElement.clone().appendTo("body");temp.css({position:"absolute",left:oldOffset.left,top:oldOffset.top,zIndex:3e3,width:$selectedElement[0].offsetWidth}),$selectedElement.css("visibility","hidden");var self=this;temp.animate({top:newOffset.top,left:newOffset.left},350,(function(){
// $selectedElement.css('visibility', 'visible')
$selectedElement.remove(),temp.remove(),cbk.call(self)}))}}},components_ColumnCustomizationvue_type_script_lang_js=ColumnCustomizationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ColumnCustomizationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ColumnCustomization=component.exports},
/***/430797:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewAlarm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/alarms/NewAlarm.vue?vue&type=template&id=493ef7ef
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-formlayout"},[_c("div",[_c("q-toolbar",{attrs:{inverted:""}},[_c("q-toolbar-title",[_vm._v("New Alarm")])],1),_c("form",{staticStyle:{padding:"0 25px"},on:{submit:function($event){return $event.preventDefault(),_vm.submit.apply(null,arguments)}}},[_c("div",{staticClass:"row md-gutter"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("div",[_c("el-input",{attrs:{"float-label":"Subject"},model:{value:_vm.alarm.subject,callback:function($$v){_vm.$set(_vm.alarm,"subject",$$v)},expression:"alarm.subject"}}),_c("el-select",{attrs:{"float-label":"Type",options:_vm.alarmtype},model:{value:_vm.alarm.type,callback:function($$v){_vm.$set(_vm.alarm,"type",$$v)},expression:"alarm.type"}}),_c("el-select",{attrs:{"float-label":"Sensor",options:_vm._f("options")(_vm.devices)},model:{value:_vm.alarm.asset.id,callback:function($$v){_vm.$set(_vm.alarm.asset,"id",$$v)},expression:"alarm.asset.id"}})],1)]),_c("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12",attrs:{align:"right"}},[_c("q-btn",{attrs:{flat:"",type:"button",cancel:""},on:{click:_vm.close}},[_vm._v("Cancel")]),_c("q-btn",{attrs:{loader:"",color:"primary"},model:{value:_vm.submitBtn,callback:function($$v){_vm.submitBtn=$$v},expression:"submitBtn"}},[_vm._v(" Save "),_c("span",{attrs:{slot:"loading"},slot:"loading"},[_vm._v("Saving...")])])],1)])])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=__webpack_require__(420629),quasar_esm=__webpack_require__(641358),NewAlarmvue_type_script_lang_js={data:function(){return{alarm:{subject:null,description:"alarms",type:1,asset:{id:null},alarmStatus:1,statusVal:"Active"},submitBtn:!1,alarmtype:[{label:"Maintenance",value:1},{label:"Critical",value:2},{label:"Life Safety",value:3},{label:"Energy",value:5}]}},mounted:function(){},components:{QBtn:quasar_esm/* QBtn */.OV,QToolbar:quasar_esm/* QToolbar */.UX,QToolbarTitle:quasar_esm/* QToolbarTitle */.OU},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({addAlarmApi:"alarm/addAlarm"})),{},{close:function(){this.alarm={subject:null,description:"alarms",type:1,asset:{id:null},alarmStatus:1,statusVal:"Active"},this.submitBtn=!1,this.$emit("closed")},submit:function(){var newAlarm=this.alarm;this.addAlarmApi(newAlarm),this.close()}}),computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({devices:function(state){return state.assets}}))},alarms_NewAlarmvue_type_script_lang_js=NewAlarmvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(alarms_NewAlarmvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewAlarm=component.exports},
/***/657763:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AlarmList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/alarms/v2/AlarmList.vue?vue&type=template&id=f9d60efa
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 alarm-list-page"},[-1===_vm.openAlarmId?_c("div",{staticClass:"pL10 pR10 height100 scrollable mT10",staticStyle:{"padding-bottom":"70px"}},[_c("div",{staticClass:"row full-layout-white fc-border-1 scrollbar-style",staticStyle:{"padding-bottom":"20px","overflow-x":"scroll",display:"block"}},[_c("table",{staticClass:"fc-list-view-table fc-list-view-table2 fc-alarm-summary-table"},[_c("thead",[_vm.canShowColumn("severity")?_c("th",{staticClass:"text-left"}):_vm._e(),_c("th",{staticClass:"text-left uppercase",staticStyle:{width:"350px"}},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.message"))+" ")]),_vm._l(_vm.viewColumns,(function(field,index){return _vm.isFixedColumn(field.name)?_vm._e():_c("th",{key:index,staticClass:"uppercase"},["noOfOccurrences"===field.name?_c("div",{staticClass:"p10",class:{"text-center":"noOfOccurrences"===field.name}}):_c("div",{class:{"text-center":"noOfOccurrences"===field.name}},[_vm._v(" "+_vm._s(field.displayName)+" ")])])})),_vm.canShowColumn("noOfOccurrences")?_c("th"):_vm._e(),_vm.canShowColumn("acknowledgedBy")?_c("th",{staticClass:"text-left uppercase"}):_vm._e(),_c("th")],2),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_c("tbody",[_vm.alarms.length?_vm._l(_vm.alarms,(function(alarm,index){return _c("tr",{key:index,staticClass:"tablerow"},[_vm.canShowColumn("severity")?_c("td",[alarm.severity?_c("div",{staticClass:"q-item-label self-center f10 secondary-color",staticStyle:{"min-width":"90px","margin-left":"13%"}},[_c("div",{staticClass:"q-item-label uppercase severityTag",style:{"background-color":_vm.getAlarmSeverity(alarm.severity.id).color}},[_vm._v(" "+_vm._s(alarm.severity.id?_vm.getAlarmSeverity(alarm.severity.id).displayName:"---")+" ")])]):_vm._e()]):_vm._e(),_c("td",{on:{click:function($event){return _vm.opensummary(alarm.id)}}},[_c("div",{staticClass:"q-item-main q-item-section",staticStyle:{"min-width":"230px"}},[_c("div",{staticClass:"q-item-sublabel ellipsis",staticStyle:{"margin-top":"5px","font-size":"12px"}},[_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(alarm.id))])]),_c("div",{staticClass:"q-item-label fw5",staticStyle:{"margin-top":"1px","font-size":"15px","letter-spacing":"0.3px"}},[_vm._v(" "+_vm._s(alarm.subject)+" ")]),_c("div",{staticClass:"ellipsis",staticStyle:{"font-size":"12px",color:"#8a8a8a","margin-top":"5px"}},[_c("span",{},[_vm._v(_vm._s(_vm._f("fromNow")(alarm.lastOccurredTime)))])])])]),_vm._l(_vm.viewColumns,(function(field,index){return _vm.isFixedColumn(field.name)?_vm._e():_c("td",{key:index},["alarmType"===field.name?_c("div",[_c("span",{staticClass:"q-item-label",staticStyle:{"font-size":"13px","letter-spacing":"0.4px"}},[_vm._v(_vm._s(alarm.alarmTypeVal?alarm.alarmTypeVal:"---"))])]):"noOfOccurrences"===field.name?_c("div",[_vm._m(0,!0),_c("span",{staticClass:"q-item-label pL5",staticStyle:{"font-size":"13px","letter-spacing":"0.4px"}},[_vm._v(" "+_vm._s(alarm.noOfOccurrences&&alarm.noOfOccurrences>-1?alarm.noOfOccurrences:"0")+" ")]),_c("div",{staticStyle:{clear:"both"}})]):"readingAlarmCategory"===field.name?_c("div",[_c("span",{staticClass:"q-item-label",staticStyle:{"font-size":"13px","letter-spacing":"0.4px"}},[_vm._v(" "+_vm._s(alarm.readingAlarmCategory&&alarm.readingAlarmCategory.id>-1?_vm.getReadingAlarmCategory(alarm.readingAlarmCategory.id).name:"---")+" ")])]):"lastOccurredTime"===field.name?_c("div",{staticStyle:{"min-width":"150px"},on:{click:function($event){return _vm.opensummary(alarm.id)}}},[_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#timer_popover_"+alarm.id,distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0},expression:"{\n                    html: '#timer_popover_' + alarm.id,\n                    distance: 0,\n                    interactive: true,\n                    theme: 'light',\n                    animation: 'scale',\n                    arrow: true,\n                  }"}],staticClass:"alarm-timer alarm-list-timer p10",attrs:{time:alarm.lastOccurredTime,title:_vm._f("formatDate")(alarm.lastOccurredTime)}}),_c("div",{staticClass:"hide",attrs:{id:"timer_popover_"+alarm.id}},[_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.5px",color:"#666666"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(alarm.lastOccurredTime))+" ")])])],1):"lastCreatedTime"===field.name?_c("div",{staticStyle:{"min-width":"150px"},on:{click:function($event){return _vm.opensummary(alarm.id)}}},[_c("div",{attrs:{id:"timer_popover_"+alarm.id}},[alarm.lastCreatedTime>-1?_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.5px",color:"#666666"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(alarm.lastCreatedTime))+" ")]):_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.5px",color:"#666666"}},[_vm._v(" --- ")])])]):_c("div",{staticStyle:{width:"200px","max-width":"200px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},[_c("span",{staticClass:"q-item-label",staticStyle:{"font-size":"13px","letter-spacing":"0.4px"}},[_vm._v(_vm._s(_vm.getColumnDisplayValue(field,alarm)))]),"resource"===field.name&&alarm.resource&&alarm.resource.space&&alarm.resource.space.id>0?_c("div",{staticStyle:{"padding-top":"5px"}},[_c("img",{staticClass:"flLeft",staticStyle:{height:"11px",width:"12px","margin-right":"3px"},attrs:{src:__webpack_require__(572902)}}),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flLeft q-item-label ellipsis",staticStyle:{"max-width":"85%","font-size":"10px"},attrs:{small:"","data-position":"bottom",title:alarm.resource.space.name}},[_vm._v(_vm._s(alarm.resource.space.name))])]):_vm._e()])])})),_vm.canShowColumn("noOfOccurrences")?_c("td",[alarm.noOfOccurrences>0?_c("div",{staticStyle:{width:"55px"}},[_vm._m(1,!0),_c("span",{staticClass:"flLeft pL5"},[_vm._v(_vm._s(alarm.noOfOccurrences))]),_c("div",{staticStyle:{clear:"both"}})]):_vm._e()]):_vm._e(),_vm.canShowColumn("acknowledgedBy")?_c("td",[_vm.$hasPermission("alarm:ACKNOWLEDGE_ALARM")?_c("div",{staticClass:"pull-left",staticStyle:{"font-size":"13px",color:"#383434","white-space":"nowrap"}},[!alarm.acknowledged&&_vm.isActiveAlarm(alarm)?_c("q-btn",{staticClass:"uppercase fia-alert-btn",attrs:{color:"secondary",small:"",outline:""},on:{click:function($event){return _vm.acknowledgeAlarm({alarm:alarm,occurrence:{id:alarm&&alarm.lastOccurrenceId?alarm.lastOccurrenceId:null},acknowledged:!0,acknowledgedBy:_vm.$account.user})}}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.acknowledge")))]):_vm.isActiveAlarm(alarm)?_c("span",{staticClass:"q-item-label f11"},[_c("div",{staticClass:"hide ackhover",attrs:{id:"contentpopup2_"+alarm.id}},[_c("div",[_c("div",{staticClass:"ackhover-row"},[_c("div",{staticClass:"hover-row"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.acknowledge_by"))+" ")]),_c("div",{staticClass:"hover-row"},[_c("span",[_c("user-avatar",{attrs:{size:"sm",user:_vm.getUserName(alarm.acknowledgedBy.id)}})],1)]),_c("div",{staticClass:"hover-row"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(alarm.acknowledgedTime>0?alarm.acknowledgedTime:new Date))+" ")])])])]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"contentpopup2_"+alarm.id,interactive:!0,reactive:!0,distance:15,theme:"light",animation:"scale"},expression:"{\n                      html: 'contentpopup2_' + alarm.id,\n                      interactive: true,\n                      reactive: true,\n                      distance: 15,\n                      theme: 'light',\n                      animation: 'scale',\n                    }"}],staticClass:"f11 pB10",staticStyle:{"font-size":"14px","letter-spacing":"0.3px",color:"#333333"}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.acknowledged")))]),_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.4px","text-align":"left",color:"#8a8a8a","padding-top":"5px"}},[_vm._v(" "+_vm._s(_vm._f("fromNow")(alarm.acknowledgedTime>0?alarm.acknowledgedTime:new Date))+" ")])]):_c("span",{staticClass:"q-item-label"})],1):_vm._e()]):_vm._e(),_c("td",{staticClass:"self-center secondary-color"},[_c("q-icon",{staticStyle:{float:"right","font-size":"20px",color:"#d8d8d8"},attrs:{slot:"right",name:"more_vert"},slot:"right"},[_c("q-popover",{ref:"moreactionspopover",refInFor:!0},[_c("q-list",{staticClass:"no-border",attrs:{link:""}},[_vm.isActiveAlarm(alarm)?_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.clear")},on:{click:function($event){return _vm.updateAlarmsStatus(alarm)}}})],1):_vm._e(),alarm.lastWoId>0?_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.view_workorder")},on:{click:function($event){_vm.viewAlarm(alarm.lastWoId),_vm.$refs.moreactionspopover[index].close()}}})],1):_vm.$hasPermission("alarm:CREATE_WO")&&alarm&&alarm.lastOccurrenceId&&_vm.isActiveAlarm(alarm)?_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.create_workorder")},on:{click:function($event){return _vm.openAlarmWoCreation(alarm.lastOccurrenceId)}}})],1):_vm._e(),_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("common._common.delete")},on:{click:function($event){_vm.deleteAlarmConf([alarm.id]),_vm.$refs.moreactionspopover[index].close()}}})],1)],1)],1)],1)],1)],2)})):_c("tr",{staticClass:"nowotd"},[_c("td",{attrs:{colspan:"100%"}},[_c("div",{staticClass:"flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/alarmEmpty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.no_alarms_found"))+" ")])],1)])]),_vm.fetchingMore?_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.fetchingMore,size:"50"}})],1)]):_vm._e()],2)]),_c("span",{staticClass:"view-column-chooser fc-alarm-list-view",on:{click:function($event){_vm.showColumnSettings=!0}}},[_c("img",{staticStyle:{"text-align":"center",position:"absolute",top:"36%",right:"25%"},attrs:{src:__webpack_require__(266707)}})])])]):_c("div",{staticClass:"fc-column-view height100 border-border-none"},[_c("div",{staticClass:"row fc-column-view-title height100"},[_c("div",{staticClass:"col-4 fc-column-view-left height100",staticStyle:{"max-width":"26.3333%",flex:"0 0 26.3333%"}},[_c("div",{staticClass:"row container col-header pL20"},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"pull-left"},[_c("i",{staticClass:"el-icon-back fw6 pointer pR10",on:{click:_vm.back}}),_c("el-dropdown",{staticClass:"alarm-dp",attrs:{trigger:"click",placement:"top-end"},on:{command:_vm.openChild}},[_c("span",{staticClass:"el-dropdown-link pointer"},[_vm._v(" "+_vm._s(_vm.currentViewDetail.displayName)+" "),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{staticClass:"alarm-dropdownmenu",attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.$store.state.view.groupViews,(function(views,idx){return"sensorAlarmViews"!==views.name?_c("div",{key:idx},[_c("div",{staticClass:"alarm-view-name-dp pT10"},[_vm._v(" "+_vm._s(views.displayName)+" ")]),_vm._l(views.views,(function(view,idx){return view.name!==_vm.currentViewDetail.name?_c("el-dropdown-item",{key:idx,attrs:{command:view.name}},[_vm._v(_vm._s(view.displayName))]):_vm._e()}))],2):_vm._e()})),0)],1)],1)])]),_c("v-infinite-scroll",{staticStyle:{height:"100vh","padding-bottom":"150px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:"fc-list-view-table",staticStyle:{height:"calc(100vh - 100px)","overflow-y":"scroll",display:"block","padding-bottom":"60px"}},[_vm.alarms.length?_c("tbody",[_vm._l(_vm.alarms,(function(alarm,index){return[_c("tr",{key:index,staticClass:"tablerow",class:{active:_vm.openAlarmId===alarm.id},on:{click:function($event){return _vm.opensummary(alarm.id)}}},[_c("td",{staticClass:"text-left width100 pL5"},[_c("div",{staticClass:"q-item-main q-item-section pL10"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fw5 workRequest-heading f14 textoverflow-height-ellipsis",attrs:{title:alarm.Subject}},[_vm._v(" "+_vm._s(alarm.subject)+" ")]),_c("div",{staticClass:"flex-middle pT5"},[_c("div",{staticClass:"uppercase fc-id"},[_vm._v("#"+_vm._s(alarm.id))]),_c("div",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticClass:"fc-grey2-text12"},[_c("img",{staticClass:"flLeft",staticStyle:{height:"11px",width:"12px","margin-right":"3px"},attrs:{src:__webpack_require__(572902)}}),alarm.hasOwnProperty("agent")?_c("span",[_vm._v(_vm._s(alarm.agent?alarm.agent.name:"--"))]):_c("span",[_vm._v(_vm._s(alarm.resource?alarm.resource.name:"--"))])])])])]),alarm.severity?_c("td",{staticClass:"text-left clearboth"},[_c("span",{staticClass:"ellipsis pT5"},[_c("span",{staticClass:"q-item-label"},[_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:_vm.getAlarmSeverity(alarm.severity.id).color},attrs:{"aria-hidden":"true"}})]),_c("span",{staticClass:"q-item-label uppercase secondary-color",staticStyle:{"font-size":"10px","letter-spacing":"0.7px",color:"#333333"}},[_vm._v(" "+_vm._s(_vm.getAlarmSeverity(alarm.severity.id).displayName)+" ")])])]):_vm._e()])]}))],2):_vm._e()])])],1),_c("div",{staticClass:"col-8 fc-column-alarm-right new-alarm-summ-bg",staticStyle:{"max-width":"73.6667%",flex:"0 0 73.6667%"}},[_c("div",{attrs:{slot:"right"},slot:"right"},[_c("router-view",{attrs:{name:"summary"}})],1)])])]),_c("q-modal",{ref:"createNewAlarmModel",attrs:{position:"right","content-classes":"fc-create-record"},on:{close:_vm.closeDialog}},[_c("q-btn",{attrs:{flat:""},on:{click:function($event){return _vm.$refs.createNewAlarmModel.close()}}},[_c("q-icon",{attrs:{name:"close"}})],1),_c("new-alarm",{on:{closed:_vm.closeDialog}})],1),_vm.canShowAlarmWoCreation?_c("AlarmWoCreation",{attrs:{canShowDialog:_vm.canShowAlarmWoCreation,currentAlarmId:_vm.currentAlarmId},on:{"update:canShowDialog":function($event){_vm.canShowAlarmWoCreation=$event},"update:can-show-dialog":function($event){_vm.canShowAlarmWoCreation=$event},"update:currentAlarmId":function($event){_vm.currentAlarmId=$event},"update:current-alarm-id":function($event){_vm.currentAlarmId=$event},onSuccess:_vm.onAlarmWoCreation}}):_vm._e(),_c("column-customization",{attrs:{visible:_vm.showColumnSettings,moduleName:"newreadingalarm",columnConfig:_vm.columnConfig,viewName:_vm.currentView},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}})],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flLeft"},[_c("img",{staticClass:"flLeft",staticStyle:{width:"15px"},attrs:{src:__webpack_require__(912146)}})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flLeft"},[_c("img",{staticClass:"flLeft",staticStyle:{width:"15px"},attrs:{src:__webpack_require__(912146)}})])}],objectSpread2=__webpack_require__(595082),v_infinite_scroll=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(425728),__webpack_require__(857267),__webpack_require__(648324),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),User=__webpack_require__(426803),Timer=__webpack_require__(114857),NewAlarm=__webpack_require__(430797),vuex_esm=__webpack_require__(420629),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ColumnCustomization=__webpack_require__(490966),ViewMixin=__webpack_require__(453877),quasar_esm=__webpack_require__(641358),AlarmWoCreation=__webpack_require__(209881),log_map_state=__webpack_require__(766331),AlarmListvue_type_script_lang_js={mixins:[ViewMixin/* default */.Z],data:function(){return{subListLoading:!1,createWoIds:[],loading:!0,fetchingMore:!1,sortConfig:{orderBy:{label:this.$t("alarm.alarm.date_modified"),value:"lastOccurredTime"},orderType:"desc",list:[{label:this.$t("maintenance.wr_list.created_on"),value:"lastCreatedTime"},{label:this.$t("maintenance.wr_list.due_by_time"),value:"dueDate"},{label:this.$t("maintenance.wr_list.subject"),value:"subject"}]},showColumnSettings:!1,columnConfig:{fixedColumns:["subject"],fixedSelectableColumns:["severity","noOfOccurrences","acknowledgedBy"],availableColumns:["resource","lastOccurredTime","lastCreatedTime","acknowledgedBy","acknowledged","readingalarmcategory","acknowledgedTime","severity","faultType"],showLookupColumns:!1,lookupToShow:["asset","space"]},canShowAlarmWoCreation:!1,currentAlarmId:null}},components:{QList:quasar_esm/* QList */.tu,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QIcon:quasar_esm/* QIcon */.oF,QPopover:quasar_esm/* QPopover */.oe,QModal:quasar_esm/* QModal */.hc,NewAlarm:NewAlarm/* default */.Z,Timer:Timer/* default */.Z,UserAvatar:User/* default */.Z,VInfiniteScroll:v_infinite_scroll_default(),QBtn:quasar_esm/* QBtn */.OV,ColumnCustomization:ColumnCustomization/* default */.Z,AlarmWoCreation:AlarmWoCreation/* default */.Z},directives:{infiniteScroll:vue_infinite_scroll_default()},created:function(){this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadReadingAlarmCategory")},mounted:function(){this.loadAlarms(),this.loadAlarmCount()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},views:function(state){return state.view.views},severityStatus:function(state){return state.alarmSeverity},currentViewDetail:function(state){return state.view.currentViewDetail}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketCategory","getReadingAlarmCategory","getAlarmSeverity"])),{},{alarms:function(){return this.$store.state.newAlarm.alarms.filter((function(n){return n}))},openAlarmId:function(){return this.$route.params.id?(this.$emit("showTag",!1),parseInt(this.$route.params.id)):(this.$emit("showTag",!0),-1)},currentGroupViewDetails:function(){var _this=this;return this.getviewtype().filter((function(d){return d.name===_this.currentView}))},currentView:function(){return this.$route.params.viewname?this.$route.params.viewname:"all"},filters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},sorting:function(){return this.$store.state.newAlarm.sorting},searchQuery:function(){return this.$store.state.newAlarm.quickSearchQuery},canLoadMore:function(){return this.$store.state.newAlarm.canLoadMore},scrollDisabled:function(){return this.loading||!this.canLoadMore||this.fetchingMore},page:function(){return this.$route.query.page||1}}),watch:{currentViewDetail:function(newVal,oldVal){oldVal!==newVal&&(this.loadAlarms(),this.loadAlarmCount())},filters:function(newVal){this.loadAlarms(),this.loadAlarmCount()},sorting:function(newVal){this.sortConfig.orderBy=this.sorting.orderBy,this.sortConfig.orderType=this.sorting.orderType,this.loadAlarms(),this.loadAlarmCount()},page:function(newVal,oldVal){oldVal===newVal||this.loading||this.loadAlarms()},searchQuery:function(newVal){this.quickSearchQuery=this.searchQuery,this.loadAlarms(),this.loadAlarmCount()}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({assignAlarmApi:"newAlarm/assignAlarm",updateAlarmStatus:"newAlarm/updateAlarmStatus",notifyAlarm:"newAlarm/notifyAlarm",acknowledgeAlarm:"newAlarm/acknowledgeAlarm",createWoFromAlarm:"newAlarm/createWoFromAlarm",getRelatedWorkorderId:"newAlarm/getRelatedWorkorderId",deleteAlarm:"newAlarm/deleteAlarm",deleteAlarmNew:"newAlarm/deleteAlarmNew"})),{},{getviewtype:function(){var group=this.$store.state.view.groupViews;if(group){for(var elem=[],types=[],len=group.length,itr=0;itr<len;itr++)elem.push(group[itr].views),types=types.concat(elem[itr]);return types}},deleteAlarmConf:function(id){var _this2=this;this.$dialog.confirm({title:"Delete Alarm",message:"Are you sure you want to delete this alarm ?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&_this2.$store.dispatch("newAlarm/deleteAlarmNew",id).then((function(){_this2.$dialog.notify("Alarm deleted successfully")})),_this2.loadAlarmCount()}))},nextPage:function(){this.scrollDisabled||(this.subListLoading=!0,this.fetchingMore=!0,this.loadAlarms(!0))},updateAlarmsStatus:function(alarm){this.updateAlarmStatus({occurrence:{id:alarm.lastOccurrenceId},alarm:alarm,clearedTime:Date.now(),severity:this.severityStatus.find((function(status){return"Clear"===status.severity}))}),this.alarms.clearedBy=this.$account.user,this.loadAlarms(),this.loadAlarmCount()},getName:function(index){var ref="moreactionspopover";return ref+=index,ref},closePopover:function(index){this.$refs[this.getName(index)].close()},openChild:function(viewNames){var url="/app/fa/faults/"+viewNames+"/newsummary/null";this.$router.replace({path:url});var moduleName=this.currentGroupViewDetails&&this.currentGroupViewDetails[0]?this.currentGroupViewDetails[0].moduleName:"newreadingalarm",self=this,queryObj={viewname:viewNames,page:this.page,filters:this.filters,orderBy:this.sortConfig.orderBy.value,orderType:this.sortConfig.orderType,search:this.quickSearchQuery,criteriaIds:this.$route.query.criteriaIds,includeParentFilter:this.includeParentFilter,isNew:!0,moduleName:moduleName};this.$store.dispatch("newAlarm/fetchAlarms",queryObj).then((function(response){if(self.$store.state.newAlarm.alarms.length>0)self.$router.push({path:"/app/fa/faults/"+viewNames+"/newsummary/"+self.$store.state.newAlarm.alarms[0].id,query:self.$route.query});else{var newPath=self.$route.path.substring(0,self.$route.path.indexOf("/alarms/"));newPath+="/alarms/"+viewNames,self.$router.push({path:newPath,query:self.$route.query})}}))},createWO:function(data){var self=this,fields={};data.category&&(fields.category={id:data.category,name:this.getTicketCategory(data.category).name}),data.priority&&(fields.priority={id:data.priority}),data.assignedTo&&(fields.assignedTo=data.assignedTo),data.assignmentGroup&&(fields.assignmentGroup=data.assignmentGroup),data.siteId>0&&(fields.siteId=data.siteId),self.$store.dispatch("newAlarm/createWoFromAlarm",{id:self.createWoIds,fields:fields}).then((function(d){1===d.data.responseCode?self.$message({message:d.data.message,type:"error"}):(self.$dialog.notify("Workorder created successfully!"),self.$refs["createWOModel"].close())}))},createWoDialog:function(idList){this.createWoIds=idList,this.$refs["createWOModel"].open(),this.$refs.confirmWoModel.reset()},closeWoDialog:function(){this.$refs["createWOModel"].close()},loadAlarms:function(subList){var self=this;self.loading=!0;var moduleName=this.currentGroupViewDetails&&this.currentGroupViewDetails[0]?this.currentGroupViewDetails[0].moduleName:"newreadingalarm",queryObj={viewname:this.currentView,page:subList?this.$store.state.newAlarm.currentPage+1:this.page,filters:this.filters,orderBy:this.sortConfig.orderBy.value,orderType:this.sortConfig.orderType,search:this.quickSearchQuery,criteriaIds:this.$route.query.criteriaIds,includeParentFilter:this.includeParentFilter,isNew:!0,subList:subList,moduleName:moduleName};self.$store.dispatch("newAlarm/fetchAlarms",queryObj).then((function(response){self.loading=!1,self.fetchingMore=!1})).catch((function(error){error&&(self.loading=!1,self.fetchingMore=!1)})),self.setTitle(this.currentGroupViewDetails[0]?this.currentGroupViewDetails[0].displayName:"Alarm")},loadAlarmCount:function(){var params,self=this,moduleName=this.currentGroupViewDetails&&this.currentGroupViewDetails[0]?this.currentGroupViewDetails[0].moduleName:"newreadingalarm",queryObj={viewname:this.currentView,filters:this.filters,search:this.quickSearchQuery,criteriaIds:this.$route.query.criteriaIds,includeParentFilter:this.includeParentFilter,moduleName:moduleName,count:!0},url="v2/newAlarms/view/"+queryObj.viewname+"?fetchCount=true";params="isCount="+queryObj.count,queryObj.filters&&(params=params+"&filters="+encodeURIComponent(JSON.stringify(queryObj.filters))),params=params+"&alarmModule="+queryObj.moduleName,queryObj.search&&(params=params+"&search="+queryObj.search),queryObj.criteriaIds&&(params=params+"&criteriaIds="+queryObj.criteriaIds),queryObj.includeParentFilter&&(params=params+"&includeParentFilter="+queryObj.includeParentFilter),url=url+"&"+params,self.$http.get(url).then((function(response){self.listcount=response.data.count,self.$emit("syncCount",response.data.result.count)})).catch((function(error){}))},isActiveAlarm:function(alarm){return"Clear"!==this.getAlarmSeverity(alarm.severity.id).severity},getUserName:function(id){return-1!==id&&id?this.$store.getters.getUser(id).name:"Unkown"},openFromTablesummary:function(row,col){"ID"!==col.label&&"message"!==col.label||this.$router.push({path:"/app/fa/faults/"+this.$route.params.viewname+"/newsummary/"+row.id,query:this.$route.query})},opensummary:function(id){this.$router.push({path:"/app/fa/faults/"+this.$route.params.viewname+"/newsummary/"+id,query:this.$route.query})},assignAlarm:function(alarm,userId,userName){var data={id:[alarm.id],alarm:{assignedTo:{id:userId,name:userName}}};this.assignAlarmApi({data:data,alarm:alarm})},indexMethod:function(index){return 2*index},viewAlarm:function(ticketId){var self=this;self.$router.push({path:"/app/wo/orders/summary/"+ticketId})},closeDialog:function(){},loadMore:function(){this.fetchingMore=!0,this.loadAlarms(!0)},back:function(){var url="/app/fa/faults/"+this.$route.params.viewname;this.$router.push({path:url,query:this.$route.query})},openAlarmWoCreation:function(alarmId){this.canShowAlarmWoCreation=!0,this.currentAlarmId=alarmId},onAlarmWoCreation:function(props){var lastOccurenceId=props.lastOccurenceId,woId=props.woId,_this$alarms=this.alarms,alarms=void 0===_this$alarms?[]:_this$alarms,selectedAlarm=alarms.find((function(alarm){return alarm.lastOccurrenceId===lastOccurenceId}))||{},selectedAlarmIndex=alarms.indexOf(selectedAlarm);this.$store.commit("newAlarm/UPDATE_ALARM_CREATE_WO",{alarmIndex:selectedAlarmIndex,isWoCreated:!0,woId:woId})}})},v2_AlarmListvue_type_script_lang_js=AlarmListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v2_AlarmListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmList=component.exports},
/***/266707:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"aa8bf7d214fbcc77945abad62903a613.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/57763.js.map