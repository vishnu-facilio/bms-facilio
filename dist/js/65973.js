(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[65973,32686,80865,71569,53021],{
/***/490966:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ColumnCustomization}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ColumnCustomization.vue?vue&type=template&id=3753cf18
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.showDialog,fullscreen:!0,"custom-class":"cc-dialog",title:_vm.$t("common._common.column_settings"),"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"scrollable",staticStyle:{padding:"20px 0","max-height":"85vh"}},[_vm.fixedFields&&_vm.fixedFields.length?_c("div",{staticClass:"fixed-column"},[_c("el-checkbox-group",{model:{value:_vm.selectedFixedColumns,callback:function($$v){_vm.selectedFixedColumns=$$v},expression:"selectedFixedColumns"}},_vm._l(_vm.fixedFields,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",staticStyle:{border:"none"},attrs:{disabled:field.disabled,label:field.fieldId}},[_vm._v(_vm._s(_vm.getDisplayName(field)))])})),1)],1):_vm._e(),_c("el-divider",{staticClass:"mT0 mB20"}),_c("el-checkbox-group",{staticClass:"fc-column-checkbox pL20 pR20 pT0 pB0",model:{value:_vm.selectedColumns,callback:function($$v){_vm.selectedColumns=$$v},expression:"selectedColumns"}},[_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.sortedFields,"data-parent":"default"}},_vm._l(_vm.sortedFields,(function(field){return _c("el-checkbox",{key:field.name,staticClass:"column-item",class:{checkboxSelected:!0===field.edit},attrs:{label:field.name,value:field.name}},[_c("el-row",[_c("el-col",{attrs:{span:1}},[_c("inline-svg",{staticClass:"vertical-middle cursor-drag icon-right column-drag-icon",staticStyle:{cursor:"-webkit-grabbing"},attrs:{src:"drag-drop",iconClass:"icon icon-sm-md"}})],1),_c("el-col",{attrs:{span:22}},[field.edit?_c("el-input",{ref:"columnRenameInp",refInFor:!0,staticClass:"fc-input-border-remove width90 column-name-change-input",attrs:{placeholder:"Change your column name",autofocus:!0},on:{blur:function($event){field.edit=!1,_vm.$emit("update")},keyup:function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter"))return null;field.edit=!1,_vm.$emit("update")}},model:{value:field.columnDisplayName,callback:function($$v){_vm.$set(field,"columnDisplayName",$$v)},expression:"field.columnDisplayName"}}):_c("div",{},[_vm._v(" "+_vm._s(field.columnDisplayName)+" "),field.field&&field.field.displayName!==field.columnDisplayName?_c("span",{staticClass:"fc-grey-text12 pL5"},[_vm._v(_vm._s(field.field.displayName))]):_vm._e()])],1),_c("el-col",{staticClass:"visibility-hide-actions text-right",attrs:{span:1}},[_c("i",{staticClass:"el-icon-edit pR10 fc-grey3-text14 pL25 column-edit-icon",on:{click:function($event){return $event.stopPropagation(),$event.preventDefault(),_vm.showRenameColumn(field)}}})])],1)],1)})),1),_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.selectedlookupColumns,"data-parent":_vm.selectedLookup}},_vm._l(_vm.selectedlookupColumns,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",attrs:{label:field.fieldId,"data-field-id":field.fieldId},on:{change:function($event){return _vm.onLookupSelected(field)}}},[_vm._v(" "+_vm._s(field.columnDisplayName)+" ")])})),1)],1)],1),_c("div",{staticClass:"modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving,disabled:_vm.isSaving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.isSaving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),vuex_esm=(__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(339772),__webpack_require__(947522),__webpack_require__(420629)),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),validation=__webpack_require__(990260),jquery=__webpack_require__(619755),jquery_default=__webpack_require__.n(jquery),columnConfigUtil=__webpack_require__(486613),ColumnCustomizationvue_type_script_lang_js={props:["visible","moduleName","viewName","relatedViewDetail","relatedMetaInfo","refreshRelatedList","excludeMainField"],data:function(){return{selectedColumns:[],selectedFixedColumns:[],showDialog:this.visible,sortedFields:this.allFields,nonSelectableColumns:["localId","photoId"],lookupMetaColumns:{},selectedLookup:"",dragOptions:{handle:".icon-right",ghostClass:"drag-ghost",dragClass:"custom-drag",animation:150},columnNameShow:!1,isSaving:!1,editedColumn:null}},components:{draggable:vuedraggable_umd_default()},created:function(){var _this$nonSelectableCo,nonSelectableColumns=this.$getProperty(this.columnConfig,"nonSelectableColumns");(0,validation/* isEmpty */.xb)(nonSelectableColumns)||(_this$nonSelectableCo=this.nonSelectableColumns).push.apply(_this$nonSelectableCo,(0,toConsumableArray/* default */.Z)(nonSelectableColumns));this.sortedFields=this.allFields},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({stateMetaInfo:function(state){return state.view.metaInfo},stateViewDetail:function(state){return state.view.currentViewDetail}})),{},{metaInfo:function(){var stateMetaInfo=this.stateMetaInfo,relatedMetaInfo=this.relatedMetaInfo;return(0,validation/* isEmpty */.xb)(relatedMetaInfo)?stateMetaInfo:relatedMetaInfo},viewDetail:function(){var stateViewDetail=this.stateViewDetail,relatedViewDetail=this.relatedViewDetail;return(0,validation/* isEmpty */.xb)(relatedViewDetail)?stateViewDetail:relatedViewDetail},currentView:function(){return this.viewName?this.viewName:this.$route.params.viewname?this.$route.params.viewname:"all"},columnConfig:function(){var _ref=this.$attrs||{},columnConfig=_ref.columnConfig;return(0,validation/* isEmpty */.xb)(columnConfig)?(0,columnConfigUtil/* getColumnConfig */.U)(this.moduleName):columnConfig},fixedColumns:function(){
// Will be disabled. User wont be able to select
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedColumns=columnConfig.fixedColumns;return fixedColumns}return[]},fixedSelectableColumns:function(){
// Cannot change the order
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedSelectableColumns=columnConfig.fixedSelectableColumns;return fixedSelectableColumns}return[]},availableColumns:function(){var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var availableColumns=columnConfig.availableColumns;return availableColumns}return[]},metaColumns:function(){var _this=this,columns=[];return this.metaInfo&&this.metaInfo.fields&&this.viewDetail&&(columns=this.metaInfo.fields.map((function(field){return field.columnDisplayName=_this.viewDetail.defaultModuleFields&&_this.viewDetail.defaultModuleFields[field.name]?_this.viewDetail.defaultModuleFields[field.name].columnDisplayName:field.displayName,field}))),columns},allFields:function(){var _this2=this,viewFields=this.viewFields.filter((function(field){return 17!==_this2.$getProperty(field,"field.dataType")})),metaColumns=this.metaColumns.filter((function(field){return!_this2.viewFields.find((function(val){return val.name===field.name}))&&!(_this2.nonSelectableColumns||[]).includes(field.name)&&(!(_this2.availableColumns||{}).length||-1!==_this2.availableColumns.indexOf(field.name)||!field.default)&&17!==field.dataType})),columns=[].concat((0,toConsumableArray/* default */.Z)(viewFields),(0,toConsumableArray/* default */.Z)(metaColumns)).filter((function(field){return!(_this2.allFixedColumns||[]).includes(field.name)}));return columns},viewFields:function(){var _this3=this,columns=[];return this.viewDetail&&this.viewDetail.fields&&(columns=this.viewDetail.fields.map((function(vf){vf.name=(vf.field||{}).name||vf.fieldName,vf.fieldId=(vf.field||{}).fieldId;var defaultColumnName=_this3.viewDetail.defaultModuleFields&&_this3.viewDetail.defaultModuleFields[vf.name]?_this3.viewDetail.defaultModuleFields[vf.name].columnDisplayName:null;return vf.columnDisplayName=vf.columnDisplayName||defaultColumnName||vf.field.displayName,vf}))),columns},fixedFields:function(){var _this4=this;return this.metaColumns.filter((function(field){return(_this4.allFixedColumns||[]).includes(field.name)})).map((function(field){return field.disabled=(_this4.fixedColumns||[]).includes(field.name),field}))},allFixedColumns:function(){return(0,validation/* isEmpty */.xb)(this.fixedSelectableColumns)?this.fixedColumns:this.fixedColumns.concat(this.fixedSelectableColumns)},lookupList:function(){var _this5=this,fields=[];return(this.columnConfig||{}).lookupToShow&&this.metaColumns&&(fields=this.metaColumns.filter((function(field){return field.lookupModule&&(!_this5.columnConfig.lookupToShow.length||(_this5.columnConfig.lookupToShow||[]).includes(field.name))}))),fields},selectedlookupColumns:function(){var _this6=this;return this.lookupMetaColumns[this.selectedLookup]?this.lookupMetaColumns[this.selectedLookup].filter((function(field){return-1===_this6.sortedFields.findIndex((function(vf){return vf.fieldId===field.fieldId}))})).map((function(field){return field.columnDisplayName=field.displayName,field.parentFieldId=_this6.selectedLookupObj.fieldId,field})):[]},selectedLookupObj:function(){var _this7=this;return this.lookupList.find((function(field){return field.name===_this7.selectedLookup}))},mainField:function(){return this.metaColumns.find((function(field){return field.mainField}))}}),watch:{visible:function(val,oldVal){val&&this.reInit(),this.showDialog=val},showDialog:function(val,oldVal){this.$emit("update:visible",val)},allFields:function(val){this.sortedFields=val}},methods:{showRenameColumn:function(field){var _this8=this;this.$set(field,"edit",!0),this.$nextTick((function(){_this8.$refs["columnRenameInp"][0].focus()}))},save:function(){var _this9=this;this.isSaving=!0;var excludeMainField=this.excludeMainField,fields=[];fields=(0,validation/* isEmpty */.xb)(excludeMainField)?[{fieldId:this.mainField.id}].concat((0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}})))):(0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}}))),fields=[].concat((0,toConsumableArray/* default */.Z)(fields),(0,toConsumableArray/* default */.Z)(this.selectedFixedColumns.map((function(id){return{fieldId:id}}))));var self=this;this.$store.dispatch("view/customizeColumns",{moduleName:this.moduleName,viewName:this.currentView,fields:fields}).then((function(){self.isSaving=!1,self.showDialog=!1,self.$emit("refreshRelatedList"),self.$message.success(self.$t("common._common.view_updated_successfully"))})).catch((function(error){_this9.$message.error(error.message||_this9.$t("common._common.error_occured"))}))},editColumn:function(){this.editedColumn=this.field},reInit:function(){var _this10=this;this.selectedLookup="",this.selectedColumns=[],this.selectedFixedColumns=[],this.viewFields.forEach((function(vf){(_this10.allFixedColumns||[]).includes(vf.name)&&-1===vf.parentFieldId?(_this10.fixedSelectableColumns||[]).includes(vf.name)&&_this10.selectedFixedColumns.push(vf.fieldId):_this10.selectedColumns.push(vf.name)}))},loadModuleMeta:function(){var _this11=this;this.selectedLookup&&!this.lookupMetaColumns[this.selectedLookup]&&this.$http.get("/module/meta?moduleName="+this.selectedLookupObj.lookupModule.name).then((function(response){_this11.$set(_this11.lookupMetaColumns,_this11.selectedLookup,response.data.meta.fields)}))},getDisplayName:function(field){var displayName=field.columnDisplayName;if(this.viewDetail&&this.viewDetail.fields){var vf=this.viewDetail.fields.find((function(vf){return vf.name===field.name}));vf&&(displayName=vf.columnDisplayName||displayName)}return displayName},onLookupSelected:function(field){this.animate(field.fieldId,(function(){this.selectedlookupColumns=this.selectedlookupColumns.filter((function(lf){return lf.fieldId!==field.fieldId})),field.columnDisplayName+=" ("+this.selectedLookupObj.displayName+")",this.sortedFields.push(field)}))},animate:function(fieldId,cbk){var $selectedElement=jquery_default()('[data-field-id="'+fieldId+'"]'),oldOffset=$selectedElement.offset();$selectedElement.appendTo(jquery_default()("[data-parent='default']"));var newOffset=$selectedElement.offset(),temp=$selectedElement.clone().appendTo("body");temp.css({position:"absolute",left:oldOffset.left,top:oldOffset.top,zIndex:3e3,width:$selectedElement[0].offsetWidth}),$selectedElement.css("visibility","hidden");var self=this;temp.animate({top:newOffset.top,left:newOffset.left},350,(function(){
// $selectedElement.css('visibility', 'visible')
$selectedElement.remove(),temp.remove(),cbk.call(self)}))}}},components_ColumnCustomizationvue_type_script_lang_js=ColumnCustomizationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ColumnCustomizationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ColumnCustomization=component.exports},
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/850504:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return VisitorAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/VisitorAvatar.vue?vue&type=template&id=159e524a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.recordData?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl||_vm.defaultIcon?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl?_vm.$prependBaseUrl(_vm.avatarUrl):_vm.defaultIcon}}):_vm._e()]),_vm.showName?[_c("div",{staticClass:"textoverflow-ellipsis width110px pL8"},[_vm._v(" "+_vm._s(_vm.getDisplayName())+" ")])]:_vm._e()],2)]):_vm._e()},staticRenderFns=[],VisitorAvatarvue_type_script_lang_js=(__webpack_require__(434284),__webpack_require__(976801),{props:["size","recordData","name","hovercard","module"],data:function(){return{avatarUrl:null,defaultIcon:null,sizeClass:"fc-avatar-"+this.size,showName:!!this.name}},watch:{recordData:{handler:function(){this.loadAvatarUrl()},immediate:!0}},methods:{loadAvatarUrl:function(){var _ref=this.recordData||{},avatarUrl=_ref.avatarUrl;avatarUrl?this.avatarUrl=avatarUrl:this.recordData&&(["visitor","visitorlog","invitevisitor"].includes(this.module)?this.defaultIcon=__webpack_require__(128951):this.defaultIcon=__webpack_require__(73188))},getDisplayName:function(){var _ref2=this.recordData||{},visitorName=_ref2.visitorName,name=_ref2.name;return"visitorlog"===this.module?visitorName||"---":name||"---"}}}),avatar_VisitorAvatarvue_type_script_lang_js=VisitorAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_VisitorAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"159e524a",null)
/* harmony default export */,VisitorAvatar=component.exports},
/***/434579:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ListAttachmentPreview}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/ListAttachmentPreview.vue?vue&type=template&id=4dc204e5
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-image",{class:["fc-image-list-preview fc-avatar-square",_vm.customClass?_vm.customClass:null],attrs:{src:_vm.imageAttachment?_vm.$prependBaseUrl(_vm.imageAttachment.previewUrl):"",fit:"cover"},on:{click:function($event){return $event.target!==$event.currentTarget?null:($event.preventDefault(),_vm.openAttachmentsPreview(!0,_vm.imageAttachment))}}},[_c("div",{attrs:{slot:"error"},slot:"error"},[_c("div",{on:{click:function($event){return $event.preventDefault(),_vm.openAttachmentsPreview(!1)}}},[_vm.attachments.length>0?_vm._t("no-image",(function(){return[_c("InlineSvg",{attrs:{src:"clip",iconClass:"icon fill-grey icon-xxlll op5 vertical-middle object-contain"}})]})):_vm._t("no-data",(function(){return[_c("InlineSvg",{attrs:{src:"svgs/photo",iconClass:"icon fill-grey icon-xxlll op5 vertical-middle object-contain"}})]}))],2)])]),_vm.visibility?_c("preview-file",{attrs:{visibility:_vm.visibility,previewFile:_vm.previewFile,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event}}}):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),PreviewFile=(__webpack_require__(670560),__webpack_require__(720096)),api=__webpack_require__(32284),ListAttachmentPreviewvue_type_script_lang_js={components:{PreviewFile:PreviewFile/* default */.Z},props:["module","record","customClass","id"],data:function(){return{loading:!1,attachments:[],visibility:!1,imageAttachment:null,previewFile:null,imageAttachments:[]}},created:function(){this.loadAttachments()},computed:{recordId:function(){return this.id?this.id:this.record.id}},methods:{openAttachmentsPreview:function(fileAttached,image){this.attachments.length>0&&(this.visibility=!0,this.previewFile=fileAttached?image:this.attachments[0])},setImageUrl:function(){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.attachments);try{for(_iterator.s();!(_step=_iterator.n()).done;){var attachment=_step.value;-1!==attachment.contentType.indexOf("image")&&(this.imageAttachment||(this.imageAttachment=attachment),this.imageAttachments.push(attachment))}}catch(err){_iterator.e(err)}finally{_iterator.f()}},loadAttachments:function(){var _this=this;return this.loading=!0,api/* API */.bl.get("/attachment",{module:this.module,recordId:this.recordId}).then((function(_ref){var error=_ref.error,data=_ref.data;error?_this.attachments=[]:(_this.attachments=data.attachments?data.attachments:[],_this.setImageUrl()),_this.loading=!1}))}}},relatedlist_ListAttachmentPreviewvue_type_script_lang_js=ListAttachmentPreviewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_ListAttachmentPreviewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ListAttachmentPreview=component.exports},
/***/890608:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ListPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/ListPagination.vue?vue&type=template&id=31fbeab9&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.canShowPagination?_c("div",{staticClass:"flex-center-row-space fc-black-small-txt-12"},[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow f16 pointer p5 fw-bold",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[0!==_vm.currentPageCount?_c("div",{staticClass:"p8",class:[_vm.canShowPopup&&"button-hover pointer"],attrs:{slot:"reference"},slot:"reference"},[_vm.canShowPaginationParts?_c("div",{staticClass:"flex-middle justify-between "},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",{staticClass:"mL5"},[_vm._v(_vm._s(_vm.to))]),_vm.skipTotalCount?_vm._e():_c("span",{staticClass:"d-flex lp-page"},[_c("span",[_vm._v(_vm._s("of"))]),_vm.shimmerLoading?_c("span",{staticClass:"count-shimmer-line loading-shimmer mT1 "}):_c("span",[_vm._v(_vm._s(_vm.total))])])]):_c("div",{staticClass:"page-shimmer-line loading-shimmer mT2"})]):_vm._e(),_vm.$validation.isEmpty(_vm.total)?_vm._e():_c("el-pagination",{staticClass:"pagination-without-count-popover",attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_c("span",[_c("span",{staticClass:"el-icon-arrow-right pagination-arrow  f16 pointer p5 fw-bold",class:{disable:!_vm.canGoNextPage},on:{click:function($event){_vm.canGoNextPage&&_vm.next()}}})])],1):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),router=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(329435)),validation=__webpack_require__(990260),ListPaginationvue_type_script_lang_js={props:{total:[Number,String],currentPageCount:Number,perPage:{type:Number,default:50},currentPage:Number,hidePopover:{type:Boolean,default:!1},skipTotalCount:{type:Boolean,default:!1}},data:function(){return{from:0,to:0,page:1,shimmerLoading:!0,navigatingToNextPage:!0}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},computed:{pageQuery:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},page=_ref2.page;return parseInt(page)||1},hasMorePage:function(){return this.total/this.perPage>1},disablePopup:function(){return this.hidePopover||!this.hasMorePage},canShowPages:function(){return!(0,validation/* isEmpty */.xb)(this.total)},canGoNextPage:function(){return(0,validation/* isEmpty */.xb)(this.total)?this.perPage==this.currentPageCount:this.to!==this.total},canShowPaginationParts:function(){return!(!this.currentPageCount&&!this.total)},canShowPagination:function(){return 1!==this.page||!this.navigatingToNextPage||(this.currentPageCount>0||!(0,validation/* isEmpty */.xb)(this.total))},canShowPopup:function(){return!this.disablePopup&&!(0,validation/* isEmpty */.xb)(this.total)}},watch:{total:{handler:function(newVal){this.shimmerLoading=!0,(0,validation/* isEmpty */.xb)(newVal)||(this.shimmerLoading=!1),this.init()},immediate:!0},currentPageCount:function(newVal){!(0,validation/* isEmpty */.xb)(newVal)&&(0,validation/* isEmpty */.xb)(this.total)&&this.init()},pageQuery:function(val){val!==this.page&&this.init()}},methods:{init:function(){this.page=this.currentPage?this.currentPage:this.pageQuery,this.from=(this.page-1)*this.perPage+1;var to=this.from+this.perPage-1;this.to=(0,validation/* isEmpty */.xb)(this.total)?this.from+this.currentPageCount-1:this.total>to?to:this.total},handleCurrentChange:function(val){this.page=val,this.from=(this.page-1)*this.perPage+1,this.to=this.total>=this.from+this.perPage?this.from+this.perPage-1:this.total,this.setPage()},next:function(){if(this.from=this.to+1,!(0,validation/* isEmpty */.xb)(this.total)){var to=this.from+this.perPage-1;to>this.total&&(to=this.total),this.to=to}this.page++,this.navigatingToNextPage=!0,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?(this.from=1,this.page=1):this.page--,this.navigatingToNextPage=!1,this.setPage()},setPage:function(){if(this.currentPage)this.$emit("update:currentPage",this.page);else{var query=(0,objectSpread2/* default */.Z)({},this.$route.query);(0,validation/* isEmpty */.xb)(query)?query={page:this.page}:query.page=this.page,this.$router.push({query:query})}},keyDownHandler:function(e){e.shiftKey&&("ArrowRight"!==e.key||this.to===this.total&&this.to===this.currentPageCount?"ArrowLeft"===e.key&&this.from>1&&this.prev():this.next())}}},components_ListPaginationvue_type_script_lang_js=ListPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ListPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"31fbeab9",null)
/* harmony default export */,ListPagination=component.exports},
/***/487390:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Sort}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/Sort.vue?vue&type=template&id=31d08398&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"page-sort-popover p0"},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click","popper-class":"sort-popover page-sort-popover","visible-arrow":!0,tabindex:-1},model:{value:_vm.visible,callback:function($$v){_vm.visible=$$v},expression:"visible"}},[_c("el-input",{staticClass:"tag-list-search",attrs:{type:"text",placeholder:"Search..."},model:{value:_vm.search,callback:function($$v){_vm.search=$$v},expression:"search"}}),_c("div",{staticClass:"pointer user-select-none sort-icon-container",attrs:{slot:"reference"},slot:"reference"},[_c("img",{staticClass:"sort-icon",attrs:{src:__webpack_require__(137308)}})]),_c("div",{staticClass:"sort-popovernew",attrs:{link:""}},_vm._l(_vm.filteredSortFieldList,(function(field,index){return _c("div",{key:index,staticClass:"position-relative sort-active-check",on:{click:function($event){$event.stopPropagation(),_vm.updateOrderBy(field.name),_vm.close()}}},[_c("div",{staticClass:"fc-div-hover page-sort-list",class:{"selected flex-middle":_vm.orderBy===field.name},attrs:{label:field.name}},[_vm._v(" "+_vm._s(field.displayName)+" ")]),_c("i",{class:{"el-icon-check":_vm.orderBy===field.name}})])})),0),_c("div",{staticClass:"scr-sep"}),_c("div",{staticClass:"sort-popovernew"},[_c("div",{staticClass:"position-relative sort-active-check",on:{click:function($event){$event.stopPropagation(),_vm.updateOrderType("asc"),_vm.close()}}},[_c("div",{staticClass:"q-item-bottom-p page-sort-list fc-div-hover flex-middle"},[_vm.config.orderType?_c("div",{attrs:{separator:""}},[_c("div",{class:{selected:"asc"===_vm.orderType}},[_vm._v(" "+_vm._s(_vm.$t("common._common.ascending"))+" ")])]):_vm._e()]),_c("i",{class:{"el-icon-check":"asc"===_vm.orderType}})]),_c("div",{staticClass:"position-relative sort-active-check",on:{click:function($event){$event.stopPropagation(),_vm.updateOrderType("desc"),_vm.close()}}},[_c("div",{staticClass:"q-item-bottom-p page-sort-list fc-div-hover flex-middle active-sort-type"},[_vm.config.orderType?_c("div",[_c("div",{class:{selected:"desc"===_vm.orderType}},[_vm._v(" "+_vm._s(_vm.$t("common._common.descending"))+" ")])]):_vm._e()]),_c("i",{class:{"el-icon-check":"desc"===_vm.orderType}})])])],1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(434284),__webpack_require__(450886),__webpack_require__(990260)),vuex_esm=__webpack_require__(420629),Sortvue_type_script_lang_js={props:["config","sortList","excludeFields"],data:function(){return{visible:!1,search:"",skipDisplayTypeHash:["MULTI_LOOKUP","MULTI_ENUM","MULTI_LOOKUP_SIMPLE","LOOKUP_SIMPLE","LOOKUP_POPUP"]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({moduleMeta:function(state){return state.view.metaInfo}})),{},{orderBy:function(){var orderBy=this.config.orderBy;return(0,validation/* isObject */.Kn)(orderBy)?orderBy.value:(0,validation/* isEmpty */.xb)(orderBy)?null:orderBy},orderType:function(){return this.config.orderType?this.config.orderType:null},filteredSortFieldList:function(){var search=this.search,sortListDataType=this.sortListDataType;return(0,validation/* isEmpty */.xb)(search)?sortListDataType||[]:(sortListDataType||[]).filter((function(fld){var displayName=fld.displayName,lcDisplayName=displayName.toLowerCase(),lcSearch=search.toLowerCase();return lcDisplayName.includes(lcSearch)}))},sortListDataType:function(){var _this=this,moduleMeta=this.moduleMeta,_this$excludeFields=this.excludeFields,excludeFields=void 0===_this$excludeFields?[]:_this$excludeFields,skipDisplayTypeHash=this.skipDisplayTypeHash;if(!(0,validation/* isEmpty */.xb)(moduleMeta)){var _ref=moduleMeta||{},fields=_ref.fields,currentSortFields=(fields||[]).filter((function(fld){return(_this.sortList||[]).includes(null===fld||void 0===fld?void 0:fld.name)})),filteredFields=(currentSortFields||[]).filter((function(fld){var _ref2=fld||{},displayType=_ref2.displayType,fieldName=_ref2.name,_ref3=displayType||{},_name=_ref3._name;return!skipDisplayTypeHash.includes(_name)&&!(excludeFields||[]).includes(fieldName)}));return(filteredFields||[]).map((function(fld){return{name:fld.name,displayName:fld.displayName}}))}return[]}}),methods:{close:function(){this.visible=!1},updateOrderBy:function(orderBy){this.config.orderBy=orderBy,this.$emit("onchange",{orderBy:orderBy,orderType:this.orderType})},updateOrderType:function(orderType){this.config.orderType=orderType,this.$emit("onchange",{orderBy:this.orderBy,orderType:orderType})}}},components_Sortvue_type_script_lang_js=Sortvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Sortvue_type_script_lang_js,render,staticRenderFns,!1,null,"31d08398",null)
/* harmony default export */,Sort=component.exports},
/***/700201:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ViewHeaderWithoutGroups}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/ViewHeaderWithoutGroups.vue?vue&type=template&id=d2a5b10e&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"view-header-wg"},[_c("div",{on:{click:_vm.toggleViewsSidePanel}},[_c("inline-svg",{class:["hamburger-icon",_vm.canShowViewsSidePanel&&"active"],attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"}})],1),_vm.$validation.isEmpty(_vm.currentViewDisplayName)?_c("div",{staticClass:"view-name-loading loading-shimmer"}):!_vm.canShowViewsSidePanel&&_vm.currentGroupViews.length>1?_c("div",[_c("el-dropdown",{attrs:{trigger:"click",placement:"bottom-end"},on:{command:_vm.goToView}},[_c("span",{staticClass:"el-dropdown-link view-name view-header-dropdown"},[_vm._v(_vm._s(_vm.currentViewDisplayName)+" "),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{staticClass:"pB0",attrs:{slot:"dropdown"},slot:"dropdown"},[_c("div",{staticClass:"dropdown-custom-class-scroll"},[_c("div",{staticClass:"view-header-group-title text-uppercase flex"},[_c("fc-icon",{attrs:{group:"files",name:"folder",color:"#ff3184"}}),_vm._v(" "+_vm._s(_vm.currentGroup.displayName)+" ")],1),_vm._l(_vm.currentGroupViews,(function(group,key){return _c("el-dropdown-item",{key:"group.id-"+key,staticClass:"view-drop-item",class:[_vm.currentViewDisplayName==group.label&&"selected-dropdown"],attrs:{command:group}},[_vm._v(" "+_vm._s(group.label))])}))],2),_c("el-dropdown-item",[_c("div",{staticClass:"view-all-btn",on:{click:_vm.toggleViewsSidePanel}},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.show_all"))+" ")])])],1)],1)],1):_c("div",{staticClass:"view-name cursor-auto pL5"},[_vm._v(" "+_vm._s(_vm.currentViewDisplayName)+" ")])])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),ViewHeader=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(629039)),ViewHeaderWithoutGroupsvue_type_script_lang_js={extends:ViewHeader/* default */.Z,computed:{currentViewDisplayName:function(){var currentViews=this.currentViews,_this$currentView=this.currentView,currentView=void 0===_this$currentView?"":_this$currentView,_ref=(currentViews||[]).find((function(view){return view.name===currentView}))||{},label=_ref.label;return label||""},currentGroupViews:function(){var filteredViews=this.filteredViews,_ref2=filteredViews||{},list=_ref2.list,more=_ref2.more,views=[].concat((0,toConsumableArray/* default */.Z)(list||[]),(0,toConsumableArray/* default */.Z)(more||[]));return views||{}}},methods:{toggleViewsSidePanel:function(){this.$emit("update:canShowViewsSidePanel",!this.canShowViewsSidePanel)}}},components_ViewHeaderWithoutGroupsvue_type_script_lang_js=ViewHeaderWithoutGroupsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ViewHeaderWithoutGroupsvue_type_script_lang_js,render,staticRenderFns,!1,null,"d2a5b10e",null)
/* harmony default export */,ViewHeaderWithoutGroups=component.exports},
/***/784823:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AdvancedSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/search/AdvancedSearch.vue?vue&type=template&id=66305202
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"d-flex align-center",on:{click:function($event){return _vm.openCloseSearch(!0)}}},[_vm._t("icon",(function(){return[_c("InlineSvg",{staticClass:"d-flex mT3 cursor-pointer",attrs:{src:"svgs/search",iconClass:"icon icon-sm self-center mR5"}})]}))],2),_vm.canShowSearchWiz?_c("el-dialog",{attrs:{title:_vm.title,visible:_vm.canShowSearchWiz,fullscreen:!0,"append-to-body":!0,"custom-class":"advance-search-container"},on:{"update:visible":function($event){_vm.canShowSearchWiz=$event}}},[_c("AdvancedSearch",{attrs:{moduleName:_vm.moduleName,searchParam:_vm.searchParam,hideQuery:_vm.hideQuery,filterList:_vm.filterList},on:{applyFilters:_vm.applyFilters,closeDialog:function(){return _vm.openCloseSearch(!1)}}})],1):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),router=(__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(329435)),dist=__webpack_require__(191853),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),AdvancedSearchvue_type_script_lang_js={props:["moduleName","moduleDisplayName","filterList","hideQuery","onSave"],components:{AdvancedSearch:dist/* AdvancedSearch */.ZJ},data:function(){return{searchText:"",canShowSearchWiz:!1,isSaving:!1,searchableFields:[],isOpenWizPressed:!1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&(document.addEventListener("keydown",this.keyDownHandler),document.addEventListener("keyup",this.keyUpHandler))},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&(document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler))},computed:{title:function(){var moduleDisplayName=this.moduleDisplayName,title="".concat(this.$t("commissioning.sheet.filter")," ").concat(moduleDisplayName," ").concat(this.$t("filters.search.by"));return title},searchParam:function(){var $route=this.$route,_ref=$route||{},query=_ref.query,_ref2=query||{},search=_ref2.search;return(0,validation/* isEmpty */.xb)(search)?"":search}},mounted:function(){this.fetchSearchableFields({moduleName:this.moduleName})},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({fetchSearchableFields:"search/fetchSearchableFields"})),{},{openCloseSearch:function(canShow){this.searchText="",this.canShowSearchWiz=canShow},applyFilters:function(filters){var hideQuery=this.hideQuery;hideQuery?this.onSave({filters:filters}):this.$store.dispatch("search/applyFilters",filters),this.openCloseSearch(!1)},keyDownHandler:function(e){if(e.shiftKey&&"Slash"===e.code)this.isOpenWizPressed=!0;else{var _navigator=navigator,userAgentData=_navigator.userAgentData,platform=_navigator.platform,_ref3=userAgentData||{},userPlatform=_ref3.platform,currentOS=userPlatform||platform,isMac=currentOS.toUpperCase().indexOf("MAC")>=0;(isMac&&e.metaKey||!isMac&&e.ctrlKey)&&"Enter"===e.key&&this.applyFilter()}},keyUpHandler:function(){this.isOpenWizPressed&&(this.openCloseSearch(!0),this.isOpenWizPressed=!1)}})},search_AdvancedSearchvue_type_script_lang_js=AdvancedSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(search_AdvancedSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AdvancedSearch=component.exports},
/***/207001:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AdvancedSearchWrapper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/search/AdvancedSearchWrapper.vue?vue&type=template&id=780ce107&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex align-center filter-cont",class:_vm.filters&&"filter-list"},[_c("el-tooltip",{staticClass:"filter-icons",class:[_vm.filters?"icon-left":"fl-icon-hover"],attrs:{effect:"dark",content:_vm.$t("common._common.search"),"open-delay":500,placement:"top",tabindex:-1}},[_c("AdvancedSearch",{key:_vm.moduleName+"-search",attrs:{moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName},scopedSlots:_vm._u([{key:"icon",fn:function(){return[_c("fc-icon",{staticClass:"pointer",attrs:{group:"filter",name:"filter",size:"16"}})]},proxy:!0}])})],1),_c("filter-tags",{staticClass:"filter-icons icon-right",attrs:{moduleName:_vm.moduleName,hideSaveView:_vm.hideSaveView}})],1)},staticRenderFns=[],AdvancedSearch=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(784823)),FilterTagsvue_type_template_id_6cda4f8a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.$validation.isEmpty(_vm.tagsArr)?_vm._e():_c("div",{staticClass:"filter-tags pointer"},[_c("el-popover",{attrs:{placement:"bottom-end",trigger:"click","popper-class":"filter-tags-popover"}},[_c("div",{staticClass:"d-flex align-center",attrs:{slot:"reference"},slot:"reference"},[_vm._v(" "+_vm._s(_vm.tagLength)+" "),_c("i",{staticClass:"el-icon-arrow-down"})]),_c("div",{staticClass:"filter-tag-container"},[_c("div",{staticClass:"d-flex justify-content-space f14 mB8"},[_c("span",{staticClass:"flt-txt"},[_vm._v(_vm._s(_vm.$t("common.filters.filtered_results")))]),_c("span",{staticClass:"fl-blue-txt pointer",on:{click:_vm.resetFilters}},[_vm._v(_vm._s(_vm.$t("common.filters.clear_all")))])]),_c("div",{staticClass:"d-flex filter-tags-holder"},_vm._l(_vm.filterTag,(function(tag,index){return _c("el-tag",{key:index,staticClass:"round-tag d-flex"},[_c("div",{staticClass:"pR5 truncate-text ftag-text"},[_vm._v(" "+_vm._s(tag.tagString)+" ")]),_vm.hideClose?_vm._e():_c("fc-icon",{staticClass:"pointer",attrs:{group:"action",name:"cross",size:"16",color:"#0074d1"},on:{click:function($event){return _vm.clearFilter(tag)}}})],1)})),1)]),_vm.canSaveView?_c("div",{staticClass:"tags-save-filter"},[_vm.isSystemView?_c("el-button",{staticClass:"save-filter",on:{click:function($event){return _vm.savingView("new")}}},[_vm._v(_vm._s(_vm.$t("filters.tags.save_view")))]):_c("el-dropdown",{on:{command:_vm.savingView}},[_c("el-button",{staticClass:"save-filter"},[_vm._v(" "+_vm._s(_vm.$t("filters.tags.save_view_as"))),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{staticClass:"text-capitalize",attrs:{command:"new"}},[_vm._v(_vm._s(_vm.$t("filters.tags.save_as_new")))]),_c("el-dropdown-item",{staticClass:"text-capitalize",attrs:{command:"edit"}},[_vm._v(_vm._s(_vm.$t("filters.tags.save_to_existing")))])],1)],1)],1):_vm._e()])],1)},FilterTagsvue_type_template_id_6cda4f8a_scoped_true_staticRenderFns=[],objectSpread2=__webpack_require__(595082),FTags=(__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(775676)),validation=__webpack_require__(990260),FilterTagsvue_type_script_lang_js={extends:FTags["default"],computed:{tagLength:function(){var _this$tagsArr=this.tagsArr,tagsArr=void 0===_this$tagsArr?[]:_this$tagsArr;return tagsArr.length},filterTag:function(){var _this$tagsArr2=this.tagsArr,tagsArr=void 0===_this$tagsArr2?[]:_this$tagsArr2;return tagsArr.map((function(tag){var _ref=tag||{},fieldDisplayName=_ref.fieldDisplayName,operatorDisplayName=_ref.operatorDisplayName,valueStr=_ref.valueStr,parentDisplayName=_ref.parentDisplayName,tagString="";return tagString=(0,validation/* isEmpty */.xb)(parentDisplayName)?"".concat(fieldDisplayName," ").concat(operatorDisplayName," ").concat(valueStr):"".concat(parentDisplayName,"/").concat(fieldDisplayName," ").concat(operatorDisplayName," ").concat(valueStr),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},tag),{},{tagString:tagString})}))}}},components_FilterTagsvue_type_script_lang_js=FilterTagsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FilterTagsvue_type_script_lang_js,FilterTagsvue_type_template_id_6cda4f8a_scoped_true_render,FilterTagsvue_type_template_id_6cda4f8a_scoped_true_staticRenderFns,!1,null,"6cda4f8a",null)
/* harmony default export */,FilterTags=component.exports,AdvancedSearchWrappervue_type_script_lang_js={props:["moduleName","moduleDisplayName","hideSaveView"],components:{AdvancedSearch:AdvancedSearch/* default */.Z,FilterTags:FilterTags},computed:{filters:function(){var $route=this.$route,_ref=$route||{},search=_ref.query.search;return(0,validation/* isEmpty */.xb)(search)?null:JSON.parse(search)}}},search_AdvancedSearchWrappervue_type_script_lang_js=AdvancedSearchWrappervue_type_script_lang_js,AdvancedSearchWrapper_component=(0,componentNormalizer/* default */.Z)(search_AdvancedSearchWrappervue_type_script_lang_js,render,staticRenderFns,!1,null,"780ce107",null)
/* harmony default export */,AdvancedSearchWrapper=AdvancedSearchWrapper_component.exports},
/***/951478:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CommonLayout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/list/CommonLayout.vue?vue&type=template&id=bf8b3d92
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"layout cm-common-list-layout d-flex"},[_vm._t("views-list",(function(){return[_vm.canShowViewsSidePanel?_c("ViewsList",{attrs:{canShowViewsSidePanel:_vm.canShowViewsSidePanel,groupViews:_vm.groupViews,moduleName:_vm.moduleName,hideArrowIcon:!0},on:{"update:canShowViewsSidePanel":function($event){_vm.canShowViewsSidePanel=$event},"update:can-show-views-side-panel":function($event){_vm.canShowViewsSidePanel=$event},onChange:_vm.goToView}}):_vm._e()]})),_c("div",{staticClass:"list-content-container"},[_c("div",{class:["view-header-container subheader-section d-flex justify-content-space",!0===_vm.hasQuery&&"filter-class"]},[_vm._t("views",(function(){return[_c("ViewHeader",{attrs:{moduleName:_vm.moduleName,showRearrange:_vm.showViewRearrange,showEditIcon:_vm.showViewEdit,pathPrefix:_vm.pathPrefix,retainFilters:_vm.filtersToRetain,canShowViewsSidePanel:_vm.canShowViewsSidePanel},on:{"update:canShowViewsSidePanel":function($event){_vm.canShowViewsSidePanel=$event},"update:can-show-views-side-panel":function($event){_vm.canShowViewsSidePanel=$event},viewsLoaded:function($event){return _vm.$emit("viewsLoaded")},hideViewSidebar:function(val){return _vm.hideViewSidebar=val}}})]})),_c("div",{staticClass:"header-right"},[_vm._t("header")],2)],2),_vm._t("sub-header",(function(){return[_vm.hideSubHeader?_vm._e():_c("div",{staticClass:"view-sub-header-container  d-flex  justify-content-space align-center"},[_vm._t("sub-header-content",(function(){return[_c("div",{staticClass:"cm-sub-header-txt"},[_vm.isEmpty(_vm.recordCount)?_c("span",{staticClass:"count-shimmer-line loading-shimmer"}):_c("span",{staticClass:"bold pR5"},[_vm._v(_vm._s(_vm.recordCount))]),_vm.recordCount>1?_c("span",[_vm._v(_vm._s(_vm.$t("common._common.tot_records")))]):_vm._e(),1===_vm.recordCount?_c("span",[_vm._v(_vm._s(_vm.$t("common._common.tot_record")))]):_vm._e()])]})),_c("div",{staticClass:"d-flex align-center"},[_vm._t("sub-header-actions")],2)],2)]})),_c("div",{staticClass:"select-all-container"},[_vm._t("sub-header-selectedall")],2),_c("div",{staticClass:"height100 common-content-container"},[_vm._t("content"),_vm._t("default")],2)],2)],2)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(689730),__webpack_require__(634338),__webpack_require__(420629)),validation=__webpack_require__(990260),ViewHeaderWithoutGroups=__webpack_require__(700201),ViewsSidePanel=__webpack_require__(409886),router=__webpack_require__(329435),CommonLayoutvue_type_script_lang_js={props:["moduleName","getPageTitle","showViewRearrange","visibleViewCount","showViewEdit","pathPrefix","retainFilters","hideSubHeader","recordCount","recordLoading"],components:{ViewHeader:ViewHeaderWithoutGroups/* default */.Z,ViewsList:ViewsSidePanel/* default */.Z},created:function(){this.$store.dispatch("view/clearViews").catch((function(){})),(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},data:function(){return{isEmpty:validation/* isEmpty */.xb,currentModuleName:this.moduleName,hideViewSidebar:!1,isSidePanelOpen:!1}},title:function(){var title=this.getPageTitle();return(0,validation/* isEmpty */.xb)(title)?"":title},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo},viewDetail:function(state){return state.view.currentViewDetail},showSearch:function(state){return state.search.active},currentTab:function(state){return state.webtabs.selectedTab},groupViews:function(state){return(0,validation/* isEmpty */.xb)(state.view.groupViews)?[]:state.view.groupViews}})),{},{currentView:function(){var $route=this.$route;return $route.params.viewname?$route.params.viewname:null},filtersToRetain:function(){var retainFilters=this.retainFilters;return(0,validation/* isNull */.Ft)(retainFilters)?[]:(0,validation/* isEmpty */.xb)(retainFilters)?["search","includeParentFilter"]:retainFilters},hasQuery:function(){var query=this.$route.query;return""===query.filters||!!query.filters},canShowViewsSidePanel:{get:function(){var isSidePanelOpen=this.isSidePanelOpen,$slots=this.$slots,isViewHeaderOverriden=!(0,validation/* isEmpty */.xb)($slots.views);return isSidePanelOpen&&!isViewHeaderOverriden},set:function(value){this.isSidePanelOpen=value}}}),watch:{moduleName:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.setPageTitle()},$route:function(newVal,oldVal){newVal.params.viewname!==oldVal.params.viewname&&this.setPageTitle()},metaInfo:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.setPageTitle()},currentView:{handler:function(newVal,oldVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!newVal||oldVal===newVal){_context.next=5;break}return _context.next=3,_this.loadViewDetails();case 3:_this.getMetaInfo(),_this.setPageTitle();case 5:case"end":return _context.stop()}}),_callee)})))()},immediate:!0}},methods:{reloadList:function(){var routeParams=this.$getProperty(this,"$route.params");this.$router.push({params:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},routeParams),{},{viewname:""})}).catch((function(){})),this.$router.push({params:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},routeParams),{},{viewname:routeParams.viewname})}).catch((function(){}))},getMetaInfo:function(){this.$store.dispatch("view/loadModuleMeta",this.moduleName).catch((function(){}))},goToView:function(view){var group=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,validation/* isEmpty */.xb)(view)){var viewname=view.name;if("rearrange-views"===viewname)return void(this.showReorderPanel=!0);var currentTab=this.currentTab,_this$filtersToRetain=this.filtersToRetain,filtersToRetain=void 0===_this$filtersToRetain?[]:_this$filtersToRetain,query=this.$route.query,filteredQuery=Object.keys(query||{}).reduce((function(obj,key){return filtersToRetain.includes(key)&&(obj[key]=query[key]),obj}),{});if((0,router/* isWebTabsEnabled */.tj)()){var route=(0,router/* findRouteForTab */.OD)(currentTab.id,{pageType:router/* pageTypes */.As.LIST})||{};route&&this.$router.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},route),{},{params:{viewname:viewname},query:filteredQuery})).catch((function(error){}))}else{var path=this.getPathForView(view,group);this.$router.push({path:path,query:filteredQuery}).catch((function(){}))}}},getPathForView:function(view){var pathPrefix=this.pathPrefix,prefix="/"===pathPrefix[pathPrefix.length-1]?pathPrefix.slice(0,-1):pathPrefix;return"".concat(prefix,"/").concat(view.name)},loadViewDetails:function(){this.$store.dispatch("view/loadViewDetail",{viewName:this.currentView,moduleName:this.moduleName}).catch((function(){}))},setPageTitle:function(){var getPageTitle=this.getPageTitle,setTitle=this.setTitle,currentView=this.currentView,title=getPageTitle(currentView);(0,validation/* isEmpty */.xb)(title)||setTitle(title)},keyDownHandler:function(e){if(e.shiftKey&&"N"===e.key&&(0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.CREATE)||{},name=_ref.name;"body"===e.target.localName&&name&&this.$router.push({name:name}).catch((function(){}))}}}},list_CommonLayoutvue_type_script_lang_js=CommonLayoutvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_CommonLayoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CommonLayout=component.exports},
/***/792649:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return VisitsAndInvitesForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/visitors/visits/VisitsAndInvitesForm.vue?vue&type=template&id=42afda89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.otpVisibility?_c("InviteCodeForm",{on:{submitOtp:_vm.submitOtp,onClose:_vm.closeForm}}):_vm._e(),_vm.typeChooserVisibility?_c("VisitsLogForm",{attrs:{showInviteCode:_vm.isVisitModule,moduleName:_vm.moduleName},on:{loadForm:_vm.openForm,openInviteCode:_vm.openInviteCode,onClose:_vm.closeForm}}):_vm._e(),_vm.formVisibility&&_vm.isVisitModule?_c("VisitorLogCreation",{attrs:{moduleName:_vm.currentModule,formData:_vm.selectedForm,visitorTypeId:_vm.selectedVisitorTypeId,recordData:_vm.recordData,requestedBy:_vm.requestedBy},on:{"update:formData":function($event){_vm.selectedForm=$event},"update:form-data":function($event){_vm.selectedForm=$event},closeForm:_vm.closeForm,saved:_vm.savedForm}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),api=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(32284)),router=__webpack_require__(329435),VisitsAndInvitesFormvue_type_script_lang_js={props:["moduleName","formMode","requestedBy"],components:{InviteCodeForm:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(8199)]).then(__webpack_require__.bind(__webpack_require__,608199))},VisitsLogForm:function(){return __webpack_require__.e(/* import() */34002).then(__webpack_require__.bind(__webpack_require__,934002))},VisitorLogCreation:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(54766)]).then(__webpack_require__.bind(__webpack_require__,1755))}},data:function(){return{formVisibility:!1,otpVisibility:!1,typeChooserVisibility:!1,recordData:null,selectedForm:null,selectedVisitorTypeId:null,currentModule:""}},created:function(){this.typeChooserVisibility=!0},computed:{isVisitModule:function(){return"visitorlog"===this.moduleName}},methods:{openInviteCode:function(){var _this=this;this.typeChooserVisibility=!1,this.$nextTick((function(){return _this.otpVisibility=!0}))},submitOtp:function(visitorLog){var visitorType=visitorLog.visitorType,formId=visitorLog.formId;this.recordData=visitorLog,this.loadform(visitorType,formId)},openForm:function(visitorType){if(this.$helpers.isLicenseEnabled("GROUP_INVITES"))if(this.isVisitModule)this.loadFormData(visitorType);else{var _formMode=this.formMode,_inviteFormId=visitorType.visitorFormId,_query={visitorTypeId:visitorType.id,formId:_inviteFormId};if((0,router/* isWebTabsEnabled */.tj)())if("bulk"==_formMode){var _moduleName="groupinvite",_route=(0,router/* findRouteForModule */.Jp)(_moduleName,router/* pageTypes */.As.CREATE);_route&&(_formMode&&(_query=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_query),{},{formMode:_formMode})),this.$router.push({name:_route.name,query:_query}))}else{var _moduleName2=this.moduleName,_route2=(0,router/* findRouteForModule */.Jp)(_moduleName2,router/* pageTypes */.As.CREATE);_route2&&(_formMode&&(_query=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_query),{},{formMode:_formMode})),this.$router.push({name:_route2.name,query:_query}))}else"bulk"==_formMode?this.$router.push({name:"group-invites-create",query:(0,objectSpread2/* default */.Z)({formMode:_formMode},_query)}):this.$router.push({name:"invites-create",query:(0,objectSpread2/* default */.Z)({formMode:_formMode},_query)});this.closeForm()}else if(this.isVisitModule)this.loadFormData(visitorType);else{var formMode=this.formMode,inviteFormId=visitorType.visitorFormId,query={visitorTypeId:visitorType.id,formId:inviteFormId};if((0,router/* isWebTabsEnabled */.tj)()){var moduleName=this.moduleName,route=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.CREATE);route&&(formMode&&(query=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},query),{},{formMode:formMode})),this.$router.push({name:route.name,query:query}))}else this.$router.push({name:"invites-create",query:(0,objectSpread2/* default */.Z)({formMode:formMode},query)});this.closeForm()}},loadFormForType:function(visitorType,visitorForm){var _this2=this,url="v2/visitorSettings/get",param={visitorType:{id:visitorType.id}};api/* API */.bl.post(url,param).then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this2.$message.error(error.message||"Error Occured");else{var visitorSettings=data.visitorSettings;_this2.selectedForm=_this2.$getProperty(visitorSettings,visitorForm,null),_this2.currentModule="visitorLogForm"===visitorForm?"visitorlog":"invitevisitor",_this2.selectedVisitorTypeId=visitorType.id,_this2.typeChooserVisibility=!1,_this2.otpVisibility=!1,_this2.$nextTick((function(){return _this2.formVisibility=!0}))}}))},loadFormData:function(visitorType){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this3.currentModule="visitorlog",_this3.selectedForm=visitorType.form,_this3.typeChooserVisibility=!1,_this3.selectedVisitorTypeId=visitorType.id,_this3.otpVisibility=!1,_this3.$nextTick((function(){return _this3.formVisibility=!0}));case 6:case"end":return _context.stop()}}),_callee)})))()},loadform:function(visitorType,formId){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return params={fetchFormRuleFields:!0,formId:formId},_this4.isLoading=!0,_context2.next=4,api/* API */.bl.get("/v2/forms/invitevisitor",params);case 4:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this4.$message.error(error.message||"Error Occured"):_this4.selectedForm=data.form,_this4.isLoading=!1,_this4.currentModule="invitevisitor",_this4.typeChooserVisibility=!1,_this4.selectedVisitorTypeId=visitorType.id,_this4.otpVisibility=!1,_this4.$nextTick((function(){return _this4.formVisibility=!0}));case 14:case"end":return _context2.stop()}}),_callee2)})))()},savedForm:function(){this.$emit("onSave"),this.closeForm()},closeForm:function(){this.$emit("onClose")}}},visits_VisitsAndInvitesFormvue_type_script_lang_js=VisitsAndInvitesFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(visits_VisitsAndInvitesFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,VisitsAndInvitesForm=component.exports},
/***/706756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return VisitsList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/visitors/visits/VisitsList.vue?vue&type=template&id=1a78c29f&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("CommonListLayout",{attrs:{moduleName:_vm.moduleName,showViewRearrange:!0,showViewEdit:!0,visibleViewCount:3,hideSubHeader:_vm.isEmpty(_vm.visitsList),getPageTitle:function(){return"Visit"},recordCount:_vm.listCount,recordLoading:_vm.showLoading,pathPrefix:"/app/vi/visits/"},scopedSlots:_vm._u([{key:"header",fn:function(){return[_c("AdvancedSearchWrapper",{key:_vm.moduleName+"-search",attrs:{moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName}}),[_vm.$hasPermission(_vm.moduleName+":CREATE")?_c("button",{staticClass:"fc-create-btn",on:{click:function($event){_vm.showFormVisibility=!0}}},[_vm._v(" "+_vm._s(_vm.$t("common.products.check_in"))+" ")]):_vm._e()]]},proxy:!0},{key:"sub-header-actions",fn:function(){return[_vm.isEmpty(_vm.visitsList)?_vm._e():[_c("pagination",{staticClass:"pL15 fc-black-small-txt-12",attrs:{total:_vm.listCount,perPage:50,skipTotalCount:!0}}),_vm.listCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.sort"),placement:"right"}},[_c("sort",{key:_vm.moduleName+"-sort",attrs:{config:_vm.sortConfig,sortList:_vm.sortConfigList},on:{onchange:_vm.updateSort}})],1),_c("span",{staticClass:"separator"},[_vm._v("|")]),_vm.isAltayerNonPrivilagedUser?_vm._e():[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.export"),placement:"left"}},[_c("f-export-settings",{attrs:{module:_vm.moduleName,viewDetail:_vm.viewDetail,showViewScheduler:!1,showMail:!1,filters:_vm.filters}})],1)]]]},proxy:!0}])},[_c("div",{staticClass:"fc-card-popup-list-view"},[_c("div",{staticClass:" fc-list-view p10 pT0  fc-list-table-container height100vh fc-table-td-height fc-table-viewchooser pB100"},[_vm.showLoading?_c("spinner",{staticClass:"mT40",attrs:{show:_vm.showLoading}}):_vm.$validation.isEmpty(_vm.visitsList)?_c("div",{staticClass:"fc-list-empty-state-container"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"mT10 fc-black-dark f16 fw6"},[_vm._v(" "+_vm._s(_vm.$t("home.visitor.visitor_log_no_data"))+" ")])],1):_vm.$validation.isEmpty(_vm.visitsList)?_vm._e():_c("div",[_c("div",{staticClass:"view-column-chooser",on:{click:function($event){_vm.showColumnSettings=!0}}},[_c("img",{staticStyle:{"text-align":"center",position:"absolute",top:"35%",right:"29%"},attrs:{src:__webpack_require__(266707)}})]),_vm.$validation.isEmpty(_vm.selectedRecords)?_vm._e():_c("div",{staticClass:"pull-left table-header-actions"},[_c("div",{staticClass:"action-btn-slide btn-block"},[_c("button",{staticClass:"btn btn--tertiary",class:{disabled:_vm.watchListLoading},on:{click:function($event){return _vm.addToWatchList("vip")}}},[_vm._v(" "+_vm._s(_vm.$t("home.visitor.mark_as_vip"))+" ")])]),_c("div",{staticClass:"action-btn-slide btn-block"},[_c("button",{staticClass:"btn btn--tertiary",class:{disabled:_vm.watchListLoading},on:{click:function($event){return _vm.addToWatchList("block")}}},[_vm._v(" "+_vm._s(_vm.$t("home.visitor.mark_as_blocked"))+" ")])]),_c("div",{staticClass:"action-btn-slide btn-block"},[_c("button",{staticClass:"btn btn--tertiary",on:{click:function($event){return _vm.printBadge()}}},[_c("i",{staticClass:"el-icon-printer"}),_vm._v(" "+_vm._s(_vm.$t("common._common.print_badge"))+" ")])])]),_c("el-table",{ref:"tableList",staticClass:"width100",attrs:{data:_vm.visitsList,height:"auto",fit:!0},on:{"selection-change":_vm.selectRecords}},[_c("el-table-column",{attrs:{type:"selection",width:"60"}}),_c("el-table-column",{attrs:{fixed:"",label:_vm.$t("common._common.id"),"min-width":"90"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+data.row.id))])]}}])}),_c("el-table-column",{attrs:{fixed:"",label:_vm.$t("common.products._name"),width:"300"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flex-middle",attrs:{small:"",title:_vm.$getProperty(data,"row.visitorName","---")},on:{click:function($event){return _vm.goToOverview(data.row)}}},[_c("VisitorAvatar",{attrs:{module:"visitorlog",size:"lg",recordData:data.row}}),_c("div",{staticClass:"fw5 ellipsis width200px mL10"},[_vm._v(" "+_vm._s(_vm.$getProperty(data,"row.visitorName","---"))+" ")])],1)]}}])}),_vm._l(_vm.viewColumns,(function(field,index){return[!_vm.isFixedColumn(field.name)||field.parentField?_c("el-table-column",{key:index,staticClass:"visibility-visible-actions",attrs:{align:"DECIMAL"===field.field.dataTypeEnum?"right":"left",prop:field.name,label:field.displayName,"min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(data){return["attachmentPreview"===field.name?_c("div",{staticClass:"text-align-center"},[_c("FListAttachmentPreview",{attrs:{module:"newvisitorlogattachments",record:data.row}})],1):"actualVisitDuration"===field.name?_c("div",{staticClass:"text-align-center"},[_vm._v(" "+_vm._s(_vm.getActualVisitDuration(field,data.row))+" ")]):_c("div",{class:["table-subheading",{"text-right":"DECIMAL"===field.field.dataTypeEnum}]},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(field,data.row)||"---")+" ")])]}}],null,!0)}):_vm._e()]})),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{width:_vm.calculateColumnWidth()},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"text-center visibility-hide-actions"},[_c("TransitionButtons",{attrs:{record:data.row,moduleName:_vm.moduleName,stateFlowList:_vm.stateflows},on:{transitionSuccess:_vm.loadRecordList}})],1)]}}])}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{width:"120",fixed:"right"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"text-center flex-middle"},[_c("div",{on:{click:function($event){return _vm.goToOverview(data.row)}}},[_c("InlineSvg",{attrs:{src:"svgs/binoculars",iconClass:"icon text-center icon-sm-md mR10 fill-grey2 visibility-hide-actions vertical-text-bottom"}})],1),_vm.$hasPermission(_vm.moduleName+":DELETE")?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("home.visitor.delete_visitor_log")},on:{click:function($event){return _vm.deleteRecord(data.row)}}}):_vm._e()])]}}])})],2)],1)],1)]),_c("portal",{attrs:{to:"view-manager-link"}},[_c("router-link",{staticClass:"view-manager-btn",attrs:{tag:"div",to:{name:"vi-viewmanager",params:{moduleName:_vm.moduleName}}}},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"}}),_c("span",{staticClass:"label mL10 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.views_manager"))+" ")])],1)],1),_c("column-customization",{attrs:{visible:_vm.showColumnSettings,moduleName:_vm.moduleName,viewName:_vm.currentView},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}}),_vm.showFormVisibility?_c("VisitsAndInvitesForm",{attrs:{moduleName:_vm.moduleName},on:{onSave:_vm.loadRecordList,onClose:function($event){_vm.showFormVisibility=!1}}}):_vm._e(),_c("router-view")],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(434284),__webpack_require__(450886),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(857267),__webpack_require__(634338),__webpack_require__(879288),__webpack_require__(186466),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(420629)),validation=__webpack_require__(990260),VisitsAndInvitesForm=__webpack_require__(792649),CommonLayout=__webpack_require__(951478),ListPagination=__webpack_require__(890608),FExportSettings=__webpack_require__(641435),Sort=__webpack_require__(487390),VisitorAvatar=__webpack_require__(850504),TransitionButtonsForList=__webpack_require__(181585),ListAttachmentPreview=__webpack_require__(434579),ViewMixin=__webpack_require__(453877),ColumnCustomization=__webpack_require__(490966),api=__webpack_require__(32284),router=__webpack_require__(329435),OtherMixin=__webpack_require__(964967),AdvancedSearchWrapper=__webpack_require__(207001),VisitsListvue_type_script_lang_js={props:["moduleName","viewname"],mixins:[ViewMixin/* default */.Z,OtherMixin/* default */.Z],components:{VisitsAndInvitesForm:VisitsAndInvitesForm/* default */.Z,CommonListLayout:CommonLayout/* default */.Z,Pagination:ListPagination/* default */.Z,FExportSettings:FExportSettings/* default */.Z,Sort:Sort/* default */.Z,VisitorAvatar:VisitorAvatar/* default */.Z,TransitionButtons:TransitionButtonsForList/* default */.Z,FListAttachmentPreview:ListAttachmentPreview/* default */.Z,ColumnCustomization:ColumnCustomization/* default */.Z,AdvancedSearchWrapper:AdvancedSearchWrapper/* default */.Z},data:function(){return{showFormVisibility:!1,loading:!1,tableLoading:!1,listCount:null,visitsList:null,selectedRecords:[],stateflows:{},watchListLoading:!1,sortConfig:{orderType:"asc"},sortConfigList:[],showColumnSettings:!1,availableStates:[],isEmpty:validation/* isEmpty */.xb}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("view",{views:function(state){return state.groupViews},viewDetail:function(state){return state.currentViewDetail},viewLoading:function(state){return state.isLoading}})),{},{filters:function(){var query=this.$route.query,_ref=query||{},search=_ref.search;return search?JSON.parse(search):null},currentView:function(){return this.viewname},page:function(){var query=this.$route.query,_ref2=query||{},page=_ref2.page;return page||1},showLoading:function(){return this.viewLoading||this.loading||this.tableLoading},isV3Api:function(){return!0},viewDetailFields:function(){return this.viewDetail.fields}}),watch:{currentView:{handler:function(newVal,oldVal){oldVal===newVal||(0,validation/* isEmpty */.xb)(newVal)||(this.loadRecordList(),this.fetchMetaFields())},immediate:!0},filters:function(){this.loadRecordList()},page:function(newVal,oldVal){oldVal!==newVal&&this.loadRecordList()},viewDetail:function(){var _ref3=this.viewDetail||{},_ref3$sortFields=_ref3.sortFields,sortFields=void 0===_ref3$sortFields?[]:_ref3$sortFields;if(!(0,validation/* isEmpty */.xb)(sortFields)){var _this$$getProperty=this.$getProperty(sortFields[0],"sortField",{}),name=_this$$getProperty.name;this.sortConfig={orderType:sortFields[0].isAscending?"asc":"desc",orderBy:name||""}}},viewDetailFields:function(){var _this=this;this.tableLoading=!0,this.$nextTick((function(){_this.$refs.tableList&&_this.$refs.tableList.doLayout(),_this.tableLoading=!1}))}},methods:{fetchMetaFields:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,error,data,_ref4,fields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,api/* API */.bl.get("/module/metafields?moduleName=".concat(_this2.moduleName));case 2:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error||(_ref4=data.meta||{},fields=_ref4.fields,(0,validation/* isEmpty */.xb)(fields)||(_this2.sortConfigList=fields.map((function(fld){return fld.name}))),_this2.sortConfigList.push("localId"));case 6:case"end":return _context.stop()}}),_callee)})))()},loadRecordList:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,page,currentView,filters,params,_yield$API$fetchAll,list,_yield$API$fetchAll$m,_yield$API$fetchAll$m2,pagination,stateflows,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this3.loading=!0,moduleName=_this3.moduleName,page=_this3.page,currentView=_this3.currentView,filters=_this3.filters,params={withCount:!0,viewName:currentView,includeParentFilter:_this3.includeParentFilter,page:page,perPage:50,filters:(0,validation/* isEmpty */.xb)(filters)?null:JSON.stringify(filters)},_context2.next=5,api/* API */.bl.fetchAll(moduleName,params);case 5:_yield$API$fetchAll=_context2.sent,list=_yield$API$fetchAll.list,_yield$API$fetchAll$m=_yield$API$fetchAll.meta,_yield$API$fetchAll$m2=_yield$API$fetchAll$m.pagination,pagination=void 0===_yield$API$fetchAll$m2?{}:_yield$API$fetchAll$m2,stateflows=_yield$API$fetchAll$m.stateflows,error=_yield$API$fetchAll.error,error?_this3.$message.error(error.message||"Error Occured"):(_this3.visitsList=list||[],_this3.listCount=_this3.$getProperty(pagination,"totalCount",null),_this3.stateflows=stateflows||{},_this3.columnWidth()),_this3.loading=!1;case 14:case"end":return _context2.stop()}}),_callee2)})))()},updateSort:function(sorting){var _this4=this,moduleName=this.moduleName,currentView=this.currentView,sortObj={viewName:currentView,orderBy:sorting.orderBy,orderType:sorting.orderType,moduleName:moduleName};this.$store.dispatch("view/savesorting",sortObj).then((function(){return _this4.loadRecordList()}))},goToOverview:function(_ref5){var id=_ref5.id,moduleName=this.moduleName,currentView=this.currentView,$route=this.$route,params={viewname:currentView,id:id},_ref6=$route||{},query=_ref6.query;if((0,router/* isWebTabsEnabled */.tj)()){var _ref7=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref7.name;name&&this.$router.replace({name:name,params:params,query:query})}else this.$router.replace({name:"visits-overview",params:params,query:query})},addToWatchList:function(type){var _this5=this,moduleName=this.moduleName,visitorlog=this.selectedRecords.map((function(visit){var id=visit.id,purposeOfVisit=visit.purposeOfVisit,currentType={};return"vip"===type?currentType={isVip:!0}:"block"===type&&(currentType={isBlocked:!0}),(0,objectSpread2/* default */.Z)({id:id,purposeOfVisit:purposeOfVisit},currentType)}));this.watchListLoading=!0,api/* API */.bl.put("v3/modules/data/bulkpatch",{data:{visitorlog:visitorlog},moduleName:moduleName}).then((function(_ref8){var error=_ref8.error;error?_this5.$message.error(error.message||"Error Occured"):(_this5.$message.success(_this5.$t("common.products.records_added__watchlist_successfully")),_this5.$refs.tableList.clearSelection(),_this5.loadRecordList()),_this5.watchListLoading=!0}))},printBadge:function(){var recordIds=this.selectedRecords.map((function(rec){return rec.id+""}));window.open(window.location.protocol+"//"+window.location.host+"/app/pdf/visitorbadge?visitId="+recordIds)},selectRecords:function(records){this.selectedRecords=records},deleteRecord:function(_ref9){var _this6=this,id=_ref9.id;this.$dialog.confirm({title:this.$t("home.visitor.delete_visitor_log"),message:this.$t("home.visitor.delete_visitor_log_confirmation"),rbDanger:!0,rbLabel:this.$t("common._common.delete")}).then((function(value){value&&api/* API */.bl.deleteRecord(_this6.moduleName,id).then((function(_ref10){var error=_ref10.error;error?_this6.$message.error(error.messsage||"Error Occured"):(_this6.$message.success(_this6.$t("home.visitor.visitor_log_delete_success")),_this6.loadRecordList())}))}))},getActualVisitDuration:function(field,data){var seconds=this.$getProperty(data,"actualVisitDuration",null),unit=this.$getProperty(field,"field.unit");if((0,validation/* isEmpty */.xb)(seconds))return"---";if((0,validation/* isEmpty */.xb)(unit)){if(seconds<60)return"".concat(seconds," sec");seconds=Number(seconds);var d=Math.floor(seconds/86400),h=Math.floor(seconds%86400/3600),m=Math.floor(seconds%3600/60),dDisplay=d>0?d+(1==d?" day, ":" days, "):"",hDisplay=h>0?h+(1==h?" hr, ":" hrs, "):"",mDisplay=m>0?m+(1==m?" min ":" mins "):"";return"".concat(dDisplay).concat(hDisplay).concat(mDisplay," ")}return"".concat(seconds," ").concat(unit)},columnWidth:function(){var _valuesArray$,_this7=this,valuesArray=Object.values(this.stateflows);null===(_valuesArray$=valuesArray[0])||void 0===_valuesArray$||_valuesArray$.forEach((function(field){var _ref11=field||{},typeEnum=_ref11.typeEnum;"NORMAL"===typeEnum&&_this7.availableStates.push(field)}))},calculateColumnWidth:function(){var pixels=this.availableStates&&this.availableStates.length>2?"420":2==this.availableStates.length?"350":0==this.availableStates.length?"10":"210";return pixels}}},visits_VisitsListvue_type_script_lang_js=VisitsListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(visits_VisitsListvue_type_script_lang_js,render,staticRenderFns,!1,null,"1a78c29f",null)
/* harmony default export */,VisitsList=component.exports},
/***/266707:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"aa8bf7d214fbcc77945abad62903a613.svg";
/***/},
/***/137308:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f5655b5c7d337eaaa1c310ef6456f44e.svg";
/***/},
/***/73188:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/item-img.7bf6d6bd.jpg"}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/65973.js.map