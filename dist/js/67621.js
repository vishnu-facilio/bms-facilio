"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[67621],{
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/767621:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return MetricsWorkLog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/common/MetricsWorkLog.vue?vue&type=template&id=6f88dae9
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"timeLogListContainer",staticClass:"related-list-container"},[_c("div",{staticClass:"related-list-header"},[_c("div",{staticClass:"header justify-content-space"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"releated-widget-title d-flex flex-direction-column justify-center mL0"},[_vm._v(" "+_vm._s(_vm.$t("common.products.time_log"))+" ")])]),_c("div",{staticClass:"flex-middle"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"pointer fwBold pL15 f16",attrs:{content:"Refresh"},on:{click:_vm.reloadLog}},[_c("i",{staticClass:"el-icon-refresh fwBold f16"})]),_c("pagination",{staticClass:"mL10",attrs:{total:_vm.totalCount,"current-page":_vm.logPage},on:{pagechanged:_vm.setPage}})],1)])]),_c("div",{staticClass:"width100"},[_c("div",{staticClass:"fc-related-list-table contract-table"},[_vm.loading?_c("div",{staticClass:"height55vh flex-center-vH"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.logModuleData)&&!_vm.loading?_c("div",{staticClass:"text-center height55vh flex-center-vH"},[_c("InlineSvg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxxlg emptystate-icon-size"}}),_c("div",{staticClass:"fc-black-dark f18 bold pL50 line-height10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.no_log_available"))+" ")])],1):_c("el-table",{staticClass:"fc-table-th-pad0",staticStyle:{width:"100%"},attrs:{data:_vm.logModuleData,height:"100%",fit:!0}},[_c("el-table-column",{staticClass:"pR0",scopedSlots:_vm._u([{key:"default",fn:function(log){return[_c("div",{staticClass:"table-subheading"},[_vm._v(" "+_vm._s(_vm.$getProperty(log.row,"fromStatus.displayName"))+" ")])]}}])},[_c("template",{slot:"header"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.state"))+" ")])],2),_c("el-table-column",{staticClass:"pR0",attrs:{label:"Start Time"},scopedSlots:_vm._u([{key:"default",fn:function(log){return[_c("div",{staticClass:"table-subheading"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(log.row.startTime))+" ")])]}}])}),_c("el-table-column",{staticClass:"pR0",attrs:{label:"End Time"},scopedSlots:_vm._u([{key:"default",fn:function(log){return[-1===log.row.endTime?_c("div",{staticClass:"table-subheading"},[_vm._v(" --- ")]):log.row.endTime?_c("div",{staticClass:"table-subheading"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(log.row.endTime))+" ")]):_c("div",{staticClass:"table-subheading fc-grey-notext14"},[_vm._v(" --- ")])]}}])}),_c("el-table-column",{staticClass:"pR0",scopedSlots:_vm._u([{key:"default",fn:function(log){return[log.row.doneBy?_c("div",{staticClass:"table-subheading"},[_vm._v(" "+_vm._s(_vm.$getProperty(log.row,"doneBy.name"))+" ")]):_c("div",{staticClass:"table-subheading"},[_vm._v(" --- ")])]}}])},[_c("template",{slot:"header"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.performed_by"))+" ")])],2),_c("el-table-column",{staticClass:"pR0",attrs:{label:"Duration"},scopedSlots:_vm._u([{key:"default",fn:function(log){return[-1===log.row.duration?_c("div",{staticClass:"table-subheading"},[_vm._v(" --- ")]):log.row.duration?_c("div",{staticClass:"table-subheading"},[_vm._v(" "+_vm._s(_vm.$helpers.getFormattedDurationSeconds(log.row.duration))+" ")]):_c("div",{staticClass:"table-subheading"},[_vm._v(" 0 sec ")])]}}])}),_c("el-table-column",{scopedSlots:_vm._u([{key:"default",fn:function(log){return[!0===log.row.timerEnabled?_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"table-subheading",attrs:{title:_vm.$t("common.wo_report.state_enabled")}},[_c("InlineSvg",{attrs:{src:"svgs/clock",iconClass:"icon icon-sm fc-color"}})],1):_vm._e()]}}])})],1)],1)])])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(634338),__webpack_require__(648324),__webpack_require__(260228),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(538077),__webpack_require__(32284)),AuditLogPagination=__webpack_require__(952322),Spinner=__webpack_require__(604947),validation=__webpack_require__(586529),MetricsWorkLogvue_type_script_lang_js={props:["details","moduleName","resizeWidget"],data:function(){return{loading:!0,logModuleData:[],totalCount:0,perPage:10,statusModelData:null,performedModelData:null,logPage:1,stateListData:[],userListData:[],userlist:[],timerEnabled:!1}},components:{Pagination:AuditLogPagination/* default */.Z,Spinner:Spinner/* default */.Z},mounted:function(){this.getLogModule(),this.getState(),this.loadusers(),this.autoResize()},methods:{getLogModule:function(){var _arguments=arguments,_this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var force,filters,_yield$API$get,error,data,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return force=!(_arguments.length>0&&void 0!==_arguments[0])||_arguments[0],_this.loading=!0,filters={},_this.statusModelData&&(filters.fromStatusId={operatorId:9,value:[_this.statusModelData]}),_this.performedModelData&&(filters.doneById={operatorId:9,value:[_this.performedModelData]}),_this.timerEnabled&&(filters.timerEnabled={operatorId:15,value:["true"]}),_context.next=8,api/* API */.bl.get("/v2/statetransition/timelog?parentModuleName=".concat(_this.moduleName,"&includeParentFilter=true&id=").concat(_this.details.id,"&page=").concat(_this.logPage,"&perPage=").concat(_this.perPage),{filters:(0,validation/* isEmpty */.xb)(filters)?null:JSON.stringify(filters)},{force:force});case 8:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?(message=error.message,_this.$message.error(message)):(_this.logModuleData=data.Timelogs||[],_this.totalCount=_this.logModuleData.length),_this.loading=!1;case 13:case"end":return _context.stop()}}),_callee)})))()},reloadLog:function(){this.getLogModule(!0)},statusFilter:function(status){var filters={};filters.moduleState={operatorId:36,value:[status.id]},this.getLogModule()},setPage:function(page){this.logPage=page,this.getLogModule()},getState:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get2,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.loading=!0,_context2.next=3,api/* API */.bl.get("v2/state/list?parentModuleName",{moduleName:_this2.moduleName});case 3:_yield$API$get2=_context2.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error?_this2.$message.error(error.message):_this2.stateListData=data.status,_this2.loading=!1;case 8:case"end":return _context2.stop()}}),_callee2)})))()},loadusers:function(){var _this3=this;this.loading=!0,api/* API */.bl.get("/v2/application/users/list?inviteAcceptStatus=true").then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this3.$message.error(error.message||"Error Occured");else{_this3.userlist=data.users||[];var uniqueValuesSet=new Set;_this3.userListData=_this3.userlist.filter((function(obj){var isPresentInSet=uniqueValuesSet.has(obj.ouid);return uniqueValuesSet.add(obj.ouid),!isPresentInSet}))}_this3.loading=!1}))},autoResize:function(){var _this4=this;this.$nextTick((function(){var container=_this4.$refs["timeLogListContainer"];if(container){var width=container.scrollWidth;_this4.resizeWidget&&_this4.resizeWidget({height:545,width:width})}}))}}},common_MetricsWorkLogvue_type_script_lang_js=MetricsWorkLogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(common_MetricsWorkLogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MetricsWorkLog=component.exports},
/***/952322:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AuditLogPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/AuditLog/AuditLogPagination.vue?vue&type=template&id=7bfb080a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flex-middle fc-setup-pagination"},[_c("el-button",{staticClass:"fc-pagination-arrow",attrs:{type:"button",disabled:_vm.isInFirstPage},on:{click:function($event){_vm.currentPage>1&&_vm.onClickPreviousPage()}}},[_c("i",{staticClass:"el-icon-arrow-left"})]),_c("div",{staticClass:"mL10 fc-black-14 text-left bold"},[_vm._v(" "+_vm._s(_vm.currentPage)+" ")]),_c("el-button",{staticClass:"fc-pagination-arrow mL10",attrs:{type:"button",disabled:0===_vm.total},on:{click:function($event){_vm.startPage!==_vm.total&&_vm.onClickNextPage()}}},[_c("i",{staticClass:"el-icon-arrow-right"})])],1)},staticRenderFns=[],AuditLogPaginationvue_type_script_lang_js=(__webpack_require__(879288),__webpack_require__(670560),{props:{totalPages:{type:Number},total:{type:Number,required:!0},currentPage:{type:Number,required:!0}},computed:{isInFirstPage:function(){return 1===this.currentPage},isInLastPage:function(){return this.currentPage===this.totalPages},startPage:function(){return 1===this.currentPage?1:this.currentPage-1},endPage:function(){return Math.min(this.totalPages)},pages:function(){for(var range=[],i=this.startPage;i<=this.endPage;i+=1)range.push({name:i,isDisabled:i===this.currentPage});return range}},methods:{onPageChange:function(page){this.currentPage=page},onClickPreviousPage:function(){this.$emit("pagechanged",this.currentPage-1)},onClickPage:function(page){this.$emit("pagechanged",page)},onClickNextPage:function(){this.total&&this.$emit("pagechanged",this.currentPage+1)},isPageActive:function(page){return this.currentPage===page}}}),AuditLog_AuditLogPaginationvue_type_script_lang_js=AuditLogPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(AuditLog_AuditLogPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AuditLogPagination=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/67621.js.map