"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[78532],{
/***/378532:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ScoringRulesList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/scoringRules/ScoringRulesList.vue?vue&type=template&id=05b8d651
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"scoring-rule-list"},[_c("div",{staticClass:"scoring-rule-header"},[_c("div",[_c("div",{staticClass:"scoring-rule-name"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.scoring_rules"))+" ")]),_c("div",{staticClass:"scoring-rule-desc"},[_vm._v(" "+_vm._s(_vm.$t("common._common.list_of_all_modulename_scoring_rule",{moduleName:_vm.moduleDisplayName||_vm.moduleName}))+" ")])]),_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:_vm.addRule}},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.add_scoring_rule"))+" ")])],1),_c("portal-target",{staticClass:"mB30",attrs:{name:"automation-modules"}}),_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.scoringRulesList,"cell-style":{padding:"12px 30px"},"empty-text":_vm.$t("common.header.no_scoring_rules_available"),height:"calc(100vh - 230px)"}},[_c("el-table-column",{attrs:{label:_vm.$t("common.products.name")},scopedSlots:_vm._u([{key:"default",fn:function(rule){return[_c("div",{on:{click:function($event){return _vm.editRule(rule.row)}}},[_vm._v(" "+_vm._s(rule.row.scoreDetails.name)+" ")])]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("common.wo_report.report_description")},scopedSlots:_vm._u([{key:"default",fn:function(rule){return[_vm._v(" "+_vm._s(rule.row.scoreDetails.description||"---")+" ")]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("common.wo_report.rating_scale")},scopedSlots:_vm._u([{key:"default",fn:function(rule){return[1===rule.row.scoreDetails.scoreType?[_vm._v("%")]:[_vm._v(_vm._s(rule.row.scoreDetails.scoreRange))]]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("common._common.status"),width:"150px"},scopedSlots:_vm._u([{key:"default",fn:function(rule){return[_c("el-switch",{attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeStatus(rule.row)}},model:{value:rule.row.status,callback:function($$v){_vm.$set(rule.row,"status",$$v)},expression:"rule.row.status"}})]}}])}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{width:"200px"},scopedSlots:_vm._u([{key:"default",fn:function(rule){return[_c("div",{staticClass:"text-center"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit edit-icon visibility-hide-actions pR15",attrs:{"data-arrow":"true",title:_vm.$t("setup.setup.edit_scoring_rule")},on:{click:function($event){return _vm.editRule(rule.row)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete fc-delete-icon visibility-hide-actions",attrs:{"data-arrow":"true",title:_vm.$t("setup.setup.delete_scoring_rule")},on:{click:function($event){return _vm.deleteRule(rule.row)}}})])]}}])})],1)],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(990260)),ScoringRuleModel=__webpack_require__(398780),ScoringRulesListvue_type_script_lang_js={props:["moduleName","moduleDisplayName"],data:function(){return{loading:!1,scoringRulesList:[]}},created:function(){this.loadScoringRule()},methods:{loadScoringRule:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,_context.prev=1,_context.next=4,ScoringRuleModel/* ScoringRule */.s.fetchAll(_this.moduleName);case 4:_this.scoringRulesList=_context.sent,_context.next=10;break;case 7:_context.prev=7,_context.t0=_context["catch"](1),_this.$message.error(_context.t0);case 10:_this.loading=!1;case 11:case"end":return _context.stop()}}),_callee,null,[[1,7]])})))()},addRule:function(){var moduleName=this.moduleName;this.$router.push({name:"scoringrules.new",params:{moduleName:moduleName}})},changeStatus:function(rule){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,rule.patch();case 3:_this2.$message.success(_this2.$t("common.wo_report.changed_scoring_rule_status")),_context2.next=9;break;case 6:_context2.prev=6,_context2.t0=_context2["catch"](0),_this2.$message.error(_context2.t0||_this2.$t("common._common.failed_to_changed_rule_status"));case 9:case"end":return _context2.stop()}}),_callee2,null,[[0,6]])})))()},editRule:function(rule){var moduleName=this.moduleName,_ref=rule||{},scoreDetails=_ref.scoreDetails,_ref2=scoreDetails||{},id=_ref2.id;this.$router.push({name:"scoringrules.edit",params:{moduleName:moduleName,id:id}})},deleteRule:function(rule){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var value,_ref3,scoreDetails,_ref4,id,idx;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this3.$dialog.confirm({title:_this3.$t("common.header.delete_scoring_rule"),htmlMessage:_this3.$t("common.wo_report.are_you_sure_delete_scoring_rule"),rbDanger:!0,rbLabel:_this3.$t("common.login_expiry.rbLabel")});case 2:if(value=_context3.sent,value){_context3.next=5;break}return _context3.abrupt("return");case 5:return _ref3=rule||{},scoreDetails=_ref3.scoreDetails,_ref4=scoreDetails||{},id=_ref4.id,_context3.prev=7,_context3.next=10,ScoringRuleModel/* ScoringRule */.s.delete(id);case 10:idx=_this3.scoringRulesList.findIndex((function(t){return t.id===id})),!(0,validation/* isEmpty */.xb)(idx)&&_this3.scoringRulesList.splice(idx,1),_this3.$message.success(_this3.$t("common.header.scoring_rule_deleted_successfully")),_context3.next=18;break;case 15:_context3.prev=15,_context3.t0=_context3["catch"](7),_this3.$message.error(_context3.t0);case 18:case"end":return _context3.stop()}}),_callee3,null,[[7,15]])})))()}}},scoringRules_ScoringRulesListvue_type_script_lang_js=ScoringRulesListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(scoringRules_ScoringRulesListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ScoringRulesList=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/78532.js.map