"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[2773],{
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/243170:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewState}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/stateflow/NewState.vue?vue&type=template&id=ac21c150&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-form",{ref:"new-stateflow-form",attrs:{model:_vm.state,rules:_vm.rules,"label-position":"top"},nativeOn:{submit:function($event){$event.preventDefault()}}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event}}}),_c("div",{staticClass:"new-header-container pL20 pR30 state-transition-header"},[_c("div",{staticClass:"d-flex"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"mR10 pointer",attrs:{title:"Go Back"},on:{click:_vm.cancel}},[_c("inline-svg",{attrs:{src:"left-arrow",iconClass:"icon vertical-middle"}})],1),_c("div",{staticClass:"stateflow-setup-title"},[_vm._v(" "+_vm._s(_vm.isNew?"New State":"Edit State")+" ")])]),_vm.canShowDelete?_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove_state")},on:{click:function($event){return _vm.remove(_vm.state)}}},[_c("InlineSvg",{staticClass:"pointer pT3",attrs:{src:"remove-icon",iconClass:"icon icon-md mR5"}})],1):_vm._e()]),_vm.showProgressBar?_c("div",{class:["sidebar-loader",_vm.saving&&"on"]}):_vm._e(),_c("div",{staticClass:"new-body-modal new-stateflow-modal"},[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"displayName"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(_vm._s(_vm.$t("setup.stateflow.name")))]),_c("el-input",{staticClass:"pR20",attrs:{placeholder:_vm.$t("setup.stateflow.name_placeholder"),autofocus:!0},on:{change:function($event){return _vm.autoSave()}},model:{value:_vm.state.displayName,callback:function($$v){_vm.$set(_vm.state,"displayName",$$v)},expression:"state.displayName"}})],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"typeCode"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.type"))+" ")]),_c("el-radio-group",{on:{change:function($event){return _vm.autoSave()}},model:{value:_vm.state.typeCode,callback:function($$v){_vm.$set(_vm.state,"typeCode",$$v)},expression:"state.typeCode"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:1}},[_vm._v(" "+_vm._s(_vm.typeHash["1"])+" ")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:2}},[_vm._v(" "+_vm._s(_vm.typeHash["2"])+" ")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:6}},[_vm._v(" "+_vm._s(_vm.typeHash["6"])+" ")])],1)],1)],1)],1),_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:22}},[_c("div",{staticClass:"d-flex justify-content-space"},[_c("p",{staticClass:"fc-input-label-txt inline"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.locked"))+" ")]),_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.autoSave()}},model:{value:_vm.state.recordLocked,callback:function($$v){_vm.$set(_vm.state,"recordLocked",$$v)},expression:"state.recordLocked"}})],1)])],1),_c("hr",{staticClass:"separator-line mR20"}),_c("el-row",[_c("el-col",{attrs:{span:22}},[_c("div",{staticClass:"d-flex justify-content-space"},[_c("p",{staticClass:"fc-input-label-txt inline"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.timer_enabled"))+" ")]),_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.autoSave()}},model:{value:_vm.state.timerEnabled,callback:function($$v){_vm.$set(_vm.state,"timerEnabled",$$v)},expression:"state.timerEnabled"}})],1)])],1)],1),_vm.isAutoSaveNeeded?_vm._e():_c("div",{staticClass:"dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.cancel}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save shadow-none",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.save}},[_vm._v(" "+_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")])],1)],1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),ErrorBanner=(__webpack_require__(260228),__webpack_require__(821057),__webpack_require__(297157)),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),NewStatevue_type_script_lang_js={props:["isNew","stateObj","module","canShowDelete","isAutoSaveNeeded","showProgressBar"],components:{ErrorBanner:ErrorBanner/* default */.Z},created:function(){this.state=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.state),this.stateObj)},computed:{ticketStatus:function(){return this.$store.state.ticketStatus[this.module]}},data:function(){return{showDeleteDialog:!1,saving:!1,error:!1,errorMessage:"",state:{displayName:null,typeCode:1,recordLocked:!1,requestedState:!1,timerEnabled:!1},typeHash:{1:"Open",2:"Closed",6:"Skipped"},rules:{display:[{required:!0,message:"Please enter a name for this state",trigger:"blur"}],typeCode:[{required:!0,message:"Please select a state type",trigger:"blur"}]}}},methods:{save:function(){var _this=this,data={};data["facilioStatus"]=(0,objectSpread2/* default */.Z)({},this.state),data["parentModuleName"]=this.module;var form=this.$refs["new-stateflow-form"];form&&form.validate().then((function(isValid){if(isValid){_this.saving=!0,_this.$emit("onSaving");var url="/v2/state/".concat(_this.isNew?"add":"update");_this.$http.post(url,data).then((function(_ref){var data=_ref.data;if(0!==data.responseCode)throw new Error(data.message);_this.$store.dispatch("loadTicketStatus",{moduleName:_this.module,forceUpdate:!0}),_this.isNew?_this.$emit("onStateCreate",data.result.status):_this.$emit("onStateUpdate",data.result.status,data.result.message)})).catch((function(error){_this.$emit("onError",error)})).finally((function(){return _this.saving=!1}))}}))},remove:function(state){
// TODO: Implement delete functionality
this.$emit("onDelete",state.id)},cancel:function(){this.$emit("onClose")},autoSave:debounce_default()((function(){this.isAutoSaveNeeded&&this.save()}),2e3)}},stateflow_NewStatevue_type_script_lang_js=NewStatevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(stateflow_NewStatevue_type_script_lang_js,render,staticRenderFns,!1,null,"ac21c150",null)
/* harmony default export */,NewState=component.exports},
/***/702773:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return StateList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/stateflow/StateList.vue?vue&type=template&id=763089e5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 overflow-hidden"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title text-capitalize"},[_vm._v(_vm._s(_vm.title))]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.list_desc"))+" ")])]),_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:_vm.addState}},[_vm._v("Add State")]),_vm.showStateEditDialog?_c("el-dialog",{staticStyle:{"z-index":"1999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"before-close":function(){return _vm.closeDialog(!1)},"custom-class":"fc-dialog-form fc-dialog-right setup-dialog35 setup-dialog state-list-dialog"}},[_c("new-state",{attrs:{isNew:_vm.isNew,stateObj:_vm.activeStateObj,module:_vm.module},on:{onClose:_vm.closeDialog,onStateCreate:_vm.addStateToList,onStateUpdate:function($event){return _vm.closeDialog(!0)},onError:_vm.errorMessage}})],1):_vm._e()],1)]),_c("div",{staticClass:"pL30 pB15"},[_c("portal-target",{attrs:{name:"automation-modules"}})],1),_vm._t("subHeaderMenu"),_c("el-tabs",{staticClass:"alarm-action-tab",attrs:{"before-leave":function(){return!1}},on:{"tab-click":_vm.switchTab},model:{value:_vm.currentTab,callback:function($$v){_vm.currentTab=$$v},expression:"currentTab"}},[_c("el-tab-pane",{attrs:{label:"Stateflows",name:"stateflow.list"}}),_c("el-tab-pane",{attrs:{label:"States",name:"stateflow.states",lazy:""}})],1),_c("div",{staticClass:"container-scroll mT15"},[_c("div",{staticClass:"row setting-Rlayout"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("common.roles.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.locked"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.timer_enabled"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.link_name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])]),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_vm.states.length?_c("tbody",_vm._l(_vm.states,(function(state,index){return _c("tr",{key:index,staticClass:"tablerow",on:{click:function($event){return _vm.editState(state)}}},[_c("td",[_vm._v(_vm._s(state.displayName))]),_c("td",[_vm._v(_vm._s(state.recordLocked?"Yes":"No"))]),_c("td",[_vm._v(_vm._s(state.timerEnabled?"Yes":"No"))]),_c("td",[_vm._v(_vm._s(state.status))]),_c("td",{on:{click:function($event){return _vm.editState(state)}}},[_vm._m(1,!0)])])})),0):_c("tbody",[_vm._m(0)])])])])])],2)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_vm._v("No states found.")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"text-left actions mT0 mR15 text-center"},[_c("i",{staticClass:"el-icon-edit pointer"})])}],NewState=(__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(243170)),validation=__webpack_require__(990260),StateListvue_type_script_lang_js={props:["moduleName","moduleDisplayName"],components:{NewState:NewState/* default */.Z},data:function(){return{module:null,loading:!1,states:[],showStateEditDialog:!1,isNew:!1,activeStateObj:{},currentTab:"stateflow.states"}},created:function(){(0,validation/* isEmpty */.xb)(this.module)&&!(0,validation/* isEmpty */.xb)(this.moduleName)&&(this.module=this.moduleName)},mounted:function(){this.getStateList()},computed:{title:function(){var module=this.module,moduleDisplayName=this.moduleDisplayName;return(0,validation/* isEmpty */.xb)(moduleDisplayName)?"".concat(module," Stateflows"):"".concat(moduleDisplayName," Stateflows")}},methods:{switchTab:function(tab){var params={moduleName:this.module};this.$router.push({name:tab.name,params:params})},getStateList:function(){var _this=this;return this.loading=!0,this.$http.get("v2/state/list?parentModuleName=".concat(this.moduleName)).then((function(_ref){var data=_ref.data;_this.states=data.result.status||[]})).catch((function(_ref2){var _ref2$message=_ref2.message,message=void 0===_ref2$message?"Error loading states":_ref2$message;_this.$message.error(message)})).finally((function(){return _this.loading=!1}))},addState:function(){this.isNew=!0,this.activeStateObj={},this.showStateEditDialog=!0},editState:function(state){this.activeStateObj=this.$helpers.cloneObject(state),this.isNew=!1,this.showStateEditDialog=!0},addStateToList:function(state){this.states.push(state),this.closeDialog()},closeDialog:function(){var needsRefresh=arguments.length>0&&void 0!==arguments[0]&&arguments[0],message=arguments.length>2?arguments[2]:void 0;needsRefresh&&(this.$message({showClose:!0,message:message||this.$t("maintenance._workorder.state_update_success"),type:"success"}),this.getStateList()),this.showStateEditDialog=!1,this.isNew=!1,this.activeStateObj={}},goToStateFlowList:function(){this.$router.push({path:"stateflows"})},errorMessage:function(error){this.$message({showClose:!0,message:error.message||"Could not update state",type:"error"})}}},stateflow_StateListvue_type_script_lang_js=StateListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(stateflow_StateListvue_type_script_lang_js,render,staticRenderFns,!1,null,"763089e5",null)
/* harmony default export */,StateList=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/2773.js.map