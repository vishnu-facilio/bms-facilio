"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[88577],{
/***/647690:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AlarmBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AlarmBar.vue?vue&type=template&id=79c81abb
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"alarm-bar-cell position-relative"},[_vm.chartDataLoadStatus?_c("div",{staticClass:"text-fc-grey pL0 width100"},[_c("div",{staticClass:"mL30 mR30 animated-background booleancard-chart widget-alarmbar",staticStyle:{height:"26px"}})]):_vm.chartData&&_vm.chartData.data?_c("f-multi-chart",{key:"alarmbar"+_vm.parentId,ref:"barRefrs",staticClass:"booleancard-chart widget-alarmbar",attrs:{data:_vm.chartData.data,options:_vm.chartOptions,alarms:_vm.chartData.alarms,booleanAlarmsData:_vm.chartData.alarms,booleanData:_vm.chartData.booleanData,dateRange:_vm.chartData.dateRange,hidecharttypechanger:!0}}):_vm._e(),_vm.isNoDropButtom?_c("div",{staticClass:"empty-div-cell"}):_vm._e()],1)])},staticRenderFns=[],defineProperty=__webpack_require__(482482),NewDataFormatHelper=__webpack_require__(804911),NewDateHelper=__webpack_require__(105534),FMultiChart=__webpack_require__(649206),AlarmBarvue_type_script_lang_js={props:["parentId","sourceKey","dateOperator","dateValue","isResize","isRca","resourceId","parentAlarmId","rca","isOpen","isNoDropButtom"],mixins:[NewDataFormatHelper/* default */.Z,NewDateHelper/* default */.Z],components:{FMultiChart:FMultiChart/* default */.Z},data:function(){return{localDateFormat:[22,25,31,30,28,27,44,45],configData:{height:40,width:100,dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(22)},dateObj:NewDateHelper/* default */.Z.getDatePickerObject(28,null),chartDataLoadStatus:!1,chartData:null,chartOptions:{common:{mode:1,buildingIds:[],type:1},hideAlarmTitle:!0,general:{grid:{y:!1,x:!1},point:{show:!1},labels:!1,normalizeStack:!1,dataOrder:null,hideZeroes:!1},settings:{chartMode:"multi",alarm:!0,chart:!0,table:!1,safelimit:!1,enableAlarm:!0,autoGroup:!1,booleanAlarms:!0},tooltip:{grouped:!1,sortOrder:"none",showNullValues:!1},donut:{labelType:"percentage",centerText:{primaryText:null,secondaryText:null}},area:{above:!1,linearGradient:!0},axis:{rotated:!1,showy2axis:!0,x:{show:!1,label:{text:"Timestamp",position:"outer-center"},tick:{direction:"auto"},range:{min:null,max:null},datatype:"date_time",time:{period:null,format:{period:"minute",interval:"minutes",format:"MM-DD-YYYY HH:mm",d3Format:"%m-%d-%Y %H:%M",tooltip:"LLL"}}},y:{show:!1,label:{text:"PRE FILTER ALARM",position:"outer-middle",type:"auto"},unit:null,scale:"linear",range:{min:null,max:null},ticks:{count:5},format:{decimals:0},padding:{bottom:0},datatype:null},y2:{show:!1,label:{text:null,position:"outer-middle"},unit:null,scale:"linear",range:{min:null,max:null},ticks:{count:5},format:{decimals:0},padding:{bottom:0}}},legend:{show:!0,position:"top",width:180},widgetLegend:{show:!1},colorPalette:"auto",style:{pie:{label:{show:!0}},donut:{width:null,label:{show:!0}},gauge:{width:null,label:{show:!0},min:0,max:100,unit:" %"},line:{point:{show:!0,radius:5},lineMode:"default",stepType:"step",stroke:{width:1,opacity:1,dashed:{length:2,space:2}},connectNull:!1},area:{point:{show:!0,radius:5},lineMode:"default",stepType:"step",fillOpacity:null,stroke:{width:1,opacity:1,dashed:{length:2,space:2}},connectNull:!1},bar:{width:null},scatter:{point:{radius:5}}},type:"area",multichart:{},isSystemGroup:!1,dataPoints:[{label:"Status",children:[],type:"group",chartType:"",groupKey:1,unit:null,dataType:"BOOLEAN"}],safeLimit:[]}}},watch:{parentId:function(newVal){this.initializeCharts()},dateOperator:function(newVal){this.initializeCharts()},dateValue:function(newVal){this.initializeCharts()},isResize:function(newVal){
// if (newVal) {
// this.$refs
this.$refs["barRefrs"]&&this.$refs["barRefrs"].resize();
// }
}},mounted:function(){this.initializeCharts()},methods:{prepareGraph:function(result){this.chartDataLoadStatus=!1;var reportObj={data:{}};return reportObj.alarms=this.prepareBooleanReport(result),reportObj.alarms.barSize="small",this.configData.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(this.dateOperator,this.dateValue),reportObj.dateRange=NewDateHelper/* default */.Z.getDatePickerObject(this.dateOperator,this.dateValue),reportObj.xAggr=0,reportObj.report={xAggr:0},reportObj.dateRange=this.prepareHighResDateRange(reportObj),reportObj.data.x=reportObj.dateRange.range.domain,this.chartOptions.axis.x.range=reportObj.dateRange.range,reportObj},getChartData:function(){var _paramsJson,_this=this;this.chartDataLoadStatus=!0;var params={paramsJson:(_paramsJson={isRca:this.isRca},(0,defineProperty/* default */.Z)(_paramsJson,this.sourceKey,this.parentId),(0,defineProperty/* default */.Z)(_paramsJson,"dateOperator",this.dateOperator),(0,defineProperty/* default */.Z)(_paramsJson,"dateValue",this.dateValue),_paramsJson),staticKey:"resourceAlarmBar"};this.rca&&(params.paramsJson["isRca"]=!0),this.resourceId&&(params.paramsJson["parentId"]=this.resourceId),this.parentAlarmId&&(params.paramsJson["parentAlarmId"]=this.parentAlarmId),this.$http.post("dashboard/getCardData",params).then((function(response){_this.chartData=_this.chartData||{},_this.chartData=_this.prepareGraph(response.data.cardResult),_this.$nextTick((function(){_this.$refs["barRefrs"]&&_this.$refs["barRefrs"].resize()}))}))},initializeCharts:function(){this.getChartData()}}},components_AlarmBarvue_type_script_lang_js=AlarmBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlarmBarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmBar=component.exports},
/***/788577:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FAlarmCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/cards/FAlarmCard.vue?vue&type=template&id=239de83a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"dragabale-card booleancard"},[_vm.loading?_c("div",{staticClass:"shimmer-frame"},[_c("div",{staticClass:"assetcard-shimmer shine"})]):_c("div",[_c("div",{staticClass:"booleancard-header"},[_c("div",[_c("div",{staticClass:"headerText"},[_vm._v(_vm._s(_vm.cardData.name))]),_c("new-date-picker",{ref:"newDatePicker",staticClass:"filter-field date-filter-comp inline",attrs:{zone:_vm.$timezone,dateObj:_vm.configData.dateFilter},on:{date:_vm.setDateFilter}})],1)]),_vm.chartloading?_c("div",{staticClass:"no-data-center2"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):null!==_vm.resources&&_vm.resources.length>0?_c("div",{staticClass:"pT20"},_vm._l(_vm.resources,(function(rca,index){return _c("div",{key:index,staticClass:"clearboth"},[rca?_c("div",{staticClass:"width100"},[_c("el-row",{staticClass:"flex-middle pL20 pR20 width100 pB10"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-black-com bold text-left f14 text-capitalize"},[_vm._v(" "+_vm._s(rca.subject?rca.subject:"---")+" ")])]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"flex-middle justify-content-end"},[_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v(_vm._s(_vm.$t("panel.tyre.alarms")))]),_vm._v(" "+_vm._s(rca.count?rca.count:"---")+" ")]),_c("el-divider",{staticClass:"mL20 mR20",attrs:{direction:"vertical"}}),_c("div",{staticClass:"fc-black3-13 text-capitalize bold"},[_c("span",{staticClass:"fc-grey2 text-uppercase f11"},[_vm._v(_vm._s(_vm.$t("panel.tyre.duration")))]),_vm._v(" "+_vm._s(rca.duration?_vm.$helpers.getFormattedDuration(rca.duration):"---")+" ")])],1)])],1),_c("div",{staticClass:"alarm-bar-cell"},[_c("alarm-bar",{ref:"multiChart",refInFor:!0,staticClass:"fc-widget-alarbar",attrs:{isResize:_vm.resize,parentId:rca.resource.id,sourceKey:"parentId",dateOperator:_vm.operatorId}})],1)],1):_vm._e()])})),0):_c("div",{staticClass:"no-data-center"},[_vm._v(" "+_vm._s(_vm.$t("panel.tyre.no_data"))+" ")])])])},staticRenderFns=[],NewDataFormatHelper=(__webpack_require__(339772),__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(804911)),AnalyticsMixin=__webpack_require__(244936),NewDateHelper=__webpack_require__(105534),AlarmBar=__webpack_require__(647690),NewDatePicker=__webpack_require__(900773),FAlarmCardvue_type_script_lang_js={mixins:[NewDataFormatHelper/* default */.Z,AnalyticsMixin/* default */.Z,NewDateHelper/* default */.Z],props:["widget","config"],components:{AlarmBar:AlarmBar/* default */.Z,NewDatePicker:NewDatePicker/* default */.Z},computed:{operatorId:function(){return this.widget.dataOptions.cardData?this.widget.dataOptions.cardData.carddata.periodId:this.widget.dataOptions.paramsJson.dateOperator}},data:function(){return{data:null,cardData:null,resources:null,loading:!1,resize:!1,nodata:!1,chartloading:!1,localDateFormat:[22,25,31,30,28,27,44,45],configData:{height:100,width:100,dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(22)}}},watch:{"config.height":{handler:function(newData,oldData){var self=this;setTimeout((function(){self.resize=!self.resize;
// self.$refs['multiChart'].render()
}),100)}}},mounted:function(){
//this.loadAlarmInsight()
this.loadCardData()},methods:{loadAlarmInsight:function(){var _this=this;this.loading=!0;var url="/v2/alarms/insights",paramUrl={};paramUrl.resourceList=this.widget.dataOptions.cardData?this.widget.dataOptions.cardData.selectedObj:this.widget.dataOptions.paramsJson.parentIds,this.localDateFormat.findIndex((function(rt){return rt===_this.configData.dateFilter.operatorId}))>-1?paramUrl.dateOperator=this.configData.dateFilter.operatorId:(paramUrl.dateOperator=20,paramUrl.dateOperatorValue=this.configData.dateFilter.value[0]+","+this.configData.dateFilter.value[1]),
// paramUrl.dateOperator = this.configData.dateFilter.operatorId
this.$http.post(url,paramUrl).then((function(response){0===response.data.responseCode&&(_this.resources=response.data.result.alarms,_this.loading=!1,_this.chartloading=!1)}))},loadCardData:function(data){var self=this,params=null;if(this.widget.id>-1)params={widgetId:self.widget.id};else{params={paramsJson:{parentIds:this.widget.dataOptions.cardData.selectedObj,dateOperator:this.widget.dataOptions.cardData.carddata.periodId},staticKey:"alarmbarwidget"};var _data={params:params.paramsJson,cardata:this.widget.dataOptions.cardData};this.widget.dataOptions.metaJson=JSON.stringify(_data)}this.chartloading=!0,this.loading=!0,self.$http.post("dashboard/getCardData",params).then((function(response){self.updateCall(response.data.cardResult),self.updateMetadata(),self.loading=!1,self.chartloading=!1,self.nodata=!1})).catch((function(error){error&&(self.loading=!1,self.chartloading=!1,self.nodata=!1)}))},updateCall:function(params){var data=params.paramsJson;this.configData.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(data.dateOperator,data.dateValue),this.loadAlarmInsight()},updateMetadata:function(){this.cardData=JSON.parse(this.widget.dataOptions.metaJson).cardata.carddata},setDateFilter:function(dateFilter){this.configData.dataOptions=dateFilter,this.configData.dateFilter=dateFilter;var paramsJson={};this.widget.id>-1?(paramsJson.parentId=this.widget.dataOptions.paramsJson.parentId,this.localDateFormat.findIndex((function(rt){return rt===dateFilter.operatorId}))>-1?paramsJson.dateOperator=dateFilter.operatorId:(paramsJson.dateOperator=20,paramsJson.dateValue=dateFilter.value[0]+","+dateFilter.value[1])):(paramsJson.parentId=JSON.parse(this.widget.dataOptions.metaJson).params.parentId,paramsJson.dateOperator=dateFilter.operatorId);var params={paramsJson:paramsJson,staticKey:"alarmbarwidget"};this.loadAlarmInsight(params)}}},cards_FAlarmCardvue_type_script_lang_js=FAlarmCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(cards_FAlarmCardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAlarmCard=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/88577.js.map