"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[59421],{
/***/559421:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return mfa}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/personalsettings/mfa.vue?vue&type=template&id=7745fd65
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"container width100 p27"},[_c("el-row",[_c("el-col",{staticClass:"p20 pT30 pB30 fc-border4",attrs:{span:12}},[_vm.formVisibility?_c("TimeOTP",{attrs:{visibility:_vm.formVisibility},on:{"update:visibility":function($event){_vm.formVisibility=$event}}}):_vm._e()],1),_c("el-col",{attrs:{span:12}})],1)],1)},staticRenderFns=[],mfatimebasedotp=__webpack_require__(879966),mfavue_type_script_lang_js={components:{TimeOTP:mfatimebasedotp/* default */.Z},data:function(){return{formVisibility:!0}}},personalsettings_mfavue_type_script_lang_js=mfavue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(personalsettings_mfavue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,mfa=component.exports},
/***/879966:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return mfatimebasedotp}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/personalsettings/mfatimebasedotp.vue?vue&type=template&id=9a28d576
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"d-flex flex-direction-row flex-wrap"},[_c("div",[_c("div",{staticClass:"fc-black-color f16 bold letter-spacing0_5 text-capitalize"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.time_based_otp"))+" ")]),_c("div",{staticClass:"fc-grey-dark pT10 line-height20 f13 pT5"},[1==_vm.type?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.time_based_otp_button"))+" ")]):2==_vm.type?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.google_authenticator"))+" "),_c("i",{staticClass:"el-icon-delete pointer mL25",on:{click:function($event){return _vm.deleteConfiguration()}}})]):_vm._e()]),_c("el-button",{staticClass:"setup-el-btn2 mT40 bold",staticStyle:{height:"32px !important","line-height":"0px"},on:{click:function($event){return _vm.TimeBasedOTP()}}},[1==_vm.type?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.header.setup_now"))+" ")]):2==_vm.type?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.profile.change_configuration"))+" ")]):_vm._e()])],1),_c("el-dialog",{attrs:{visible:_vm.formVisibilityTotp,"append-to-body":!0,"before-close":_vm.closeForm,title:"TIME BASED OTP","custom-class":"fc-dialog-center-container f-webform-right-dialog f-webform-center-dialog"},on:{"update:visible":function($event){_vm.formVisibilityTotp=$event}}},[_c("div",{staticClass:"height350"},[_c("el-form",{attrs:{"label-position":"top"}},[_c("div",{staticClass:"label-txt-black break-word line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.scan_qr_code_authenticator_app"))+" ")]),_c("div",{staticClass:"text-center fc-mfa-qrcode"},[_c("img",{attrs:{src:_vm.QRCode}})])])],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",attrs:{type:"primary"},on:{click:function($event){return _vm.closeForm()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.isSaving,type:"primary"},on:{click:function($event){return _vm.nextpage()}}},[_vm._v(_vm._s(_vm.$t("common._common.next")))])],1)])],1),_vm.formvisibility?_c("verifyCode",{attrs:{visibility:_vm.formvisibility,type:_vm.formtype,isLoginSetup:_vm.isLoginSetup,mfaConfigToken:_vm.mfaConfigToken,lookUpType:_vm.lookUpType},on:{"update:visibility":function($event){_vm.formvisibility=$event},closeForm:_vm.closeForm,totpconfigured:_vm.totpconfigured}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),http=__webpack_require__(218430),verificationCodevue_type_template_id_3cc5a96b_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{attrs:{visible:_vm.visibility,"append-to-body":!0,"before-close":_vm.closeForm,title:1==_vm.type?"VERIFY YOUR DEVICE":"USE MOBILE NUMBER",width:"35%","custom-class":"fc-dialog-center-container f-webform-right-dialog f-webform-center-dialog"},on:{"update:visible":function($event){_vm.visibility=$event}}},[1==_vm.type?_c("div",{staticClass:"height200"},[_c("div",{staticClass:"mL10 mT10"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"fc-grey7-12 f14 text-left"},[_vm._v(" Enter Verification Code ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"password",autocomplete:"new-password"},model:{value:_vm.value,callback:function($$v){_vm.value=$$v},expression:"value"}})],1)])]):_vm._e(),2==_vm.type?_c("div",{staticClass:"height200"},[_c("div",{staticClass:"mL10 mT10"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" USE MOBILE NUMBER ")]),_c("el-input",{model:{value:_vm.value,callback:function($$v){_vm.value=$$v},expression:"value"}})],1)])]):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",attrs:{type:"primary"},on:{click:function($event){return _vm.closeForm()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.isSaving,type:"primary"},on:{click:function($event){return _vm.verify()}}},[_vm._v("VERIFY")])],1)])],1)},verificationCodevue_type_template_id_3cc5a96b_staticRenderFns=[],rebrandMixin=(__webpack_require__(670560),__webpack_require__(222174)),verificationCodevue_type_script_lang_js={props:["visibility","type","isLoginSetup","mfaConfigToken","totp","lookUpType"],mixins:[rebrandMixin/* default */.Z],data:function(){return{value:""}},methods:{closeForm:function(){this.$emit("closeForm")},verify:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var data,options,resp,_resp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!_this.isLoginSetup){_context.next=10;break}return data={mfaConfigToken:_this.mfaConfigToken,totp:_this.value,lookUpType:_this.lookUpType},options={headers:{"X-Device-Type":"web"}},_this.isWebView&&(options.headers["X-Device-Type"]="webview"),_context.next=6,http/* default */.ZP.post("integ/configureMFAUsingDigest",data,options);case 6:resp=_context.sent,resp.data.jsonresponse.pwdPolicyResetToken?_this.$router.push({name:"confirmpassword",params:{invitetoken:resp.data.jsonresponse.pwdPolicyResetToken},query:{isPasswordExpired:!0,lookUpType:_this.$route.query.lookUpType}}):resp.data.jsonresponse.username?(_this.closeForm(),_this.$message.success("TOTP Successfully enabled."),_this.$emit("totpconfigured")):_this.$message.error("Invalid verification code."),_context.next=14;break;case 10:return _context.next=12,_this.$http.post("v2/settings/totpsetup",{verificationCode:_this.value});case 12:_resp=_context.sent,0===_resp.data.responseCode?(_this.closeForm(),_this.$message.success("MFA Successfully enabled")):_this.$message.error("Error setting up TOTP");case 14:case"end":return _context.stop()}}),_callee)})))()}}},personalsettings_verificationCodevue_type_script_lang_js=verificationCodevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(personalsettings_verificationCodevue_type_script_lang_js,verificationCodevue_type_template_id_3cc5a96b_render,verificationCodevue_type_template_id_3cc5a96b_staticRenderFns,!1,null,null,null)
/* harmony default export */,verificationCode=component.exports,mfatimebasedotpvue_type_script_lang_js={components:{verifyCode:verificationCode},props:["isLoginSetup","mfaConfigToken","lookUpType"],data:function(){return{formvisibility:!1,formtype:"1",QRCode:"",SecretKey:"",formVisibilityTotp:!1,type:"1"}},created:function(){this.loadTotpStatus()},beforeUpdate:function(){this.loadTotpStatus()},methods:{totpconfigured:function(){this.$emit("totpconfigured")},closeForm:function(){this.formVisibilityTotp=!1,this.formvisibility=!1},nextpage:function(){this.formVisibilityTotp=!1,this.formvisibility=!0},loadTotpStatus:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var resp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.isLoginSetup){_context.next=7;break}return _context.next=3,_this.$http.get("v2/settings/totpstatus");case 3:resp=_context.sent,_this.type=0==resp.data.result.totpstatus?1:2,_context.next=8;break;case 7:_this.type=1;case 8:case"end":return _context.stop()}}),_callee)})))()},TimeBasedOTP:function(){this.isLoginSetup?(this.loadQRCodeUsingToken(),this.formVisibilityTotp=!0):(this.loadQRCode(),this.formVisibilityTotp=!0)},loadQRCodeUsingToken:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var url,resp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return url="integ/getMfaSettingsUsingDigest?mfaConfigToken=".concat(_this2.mfaConfigToken),_this2.lookUpType&&(url+="&lookUpType=".concat(_this2.lookUpType)),_context2.next=4,http/* default */.ZP.get(url);case 4:resp=_context2.sent,_this2.QRCode=resp.data.jsonresponse.qrCode,_this2.SecretKey=resp.data.jsonresponse.totpSecret;case 7:case"end":return _context2.stop()}}),_callee2)})))()},loadQRCode:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var resp,_resp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if("1"!=_this3.type){_context3.next=8;break}return _context3.next=3,_this3.$http.get("v2/settings/totpVerification");case 3:resp=_context3.sent,_this3.QRCode=resp.data.result.totpData.qrCode,_this3.SecretKey=resp.data.result.totpData.secret,_context3.next=14;break;case 8:if("2"!=_this3.type){_context3.next=14;break}return _context3.next=11,_this3.$http.get("v2/settings/totpchange");case 11:_resp=_context3.sent,_this3.QRCode=_resp.data.result.totpData.qrCode,_this3.SecretKey=_resp.data.result.totpData.secret;case 14:case"end":return _context3.stop()}}),_callee3)})))()},deleteConfiguration:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_this4.$http.post("v2/settings/totpexit",{});case 2:return _context4.next=4,_this4.loadTotpStatus();case 4:_this4.$message.success(_this4.$t("common.wo_report.totp_settings_removed"));case 5:case"end":return _context4.stop()}}),_callee4)})))()},changeConfiguration:function(){this.formVisibilityTotp=!0}}},personalsettings_mfatimebasedotpvue_type_script_lang_js=mfatimebasedotpvue_type_script_lang_js,mfatimebasedotp_component=(0,componentNormalizer/* default */.Z)(personalsettings_mfatimebasedotpvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,mfatimebasedotp=mfatimebasedotp_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/59421.js.map