"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[250],{
/***/328917:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return DashboardViewer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/DashboardViewer.vue?vue&type=template&id=c765348e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",[_vm.isPermission?_c("div",{directives:[{name:"resize",rawName:"v-resize"}],staticClass:"dashboardmainlayout dashboardviewer height100vh",class:{mobiledashboard:this.isMobileDashboard,"single-dashboard":_vm.dashboardLayout&&1===_vm.dashboardLayout.length,pB110:!_vm.isTv},on:{resize:_vm.onResize}},[_vm.showDashboardFilterWidgetConfigDialog?_c("dashboard-filter-widget-config-dialog",{attrs:{widget:_vm.widgetForFilterConfig,visibility:_vm.showDashboardFilterWidgetConfigDialog},on:{"update:visibility":function($event){_vm.showDashboardFilterWidgetConfigDialog=$event},widgetFilterConfigChange:_vm.saveWidgetFilterSettings}}):_vm._e(),_c("portal",{attrs:{to:"dashboardFilter"}},[!_vm.loading&&!_vm.dashboardTabLoading&&_vm.dashboardFilterObj&&_vm.dashboardFilterObj.isTimelineFilterEnabled&&!_vm.$helpers.isPortalUser()||_vm.$helpers.isPortalUser()&&_vm.dashboardFilterObj&&_vm.dashboardFilterObj.isTimelineFilterEnabled?_c("dashboard-timeline-filter",{staticClass:"mR10 mT2",attrs:{dbTimelineFilterInitialState:_vm.dbTimelineFilter},on:{timelineFilterChanged:_vm.handleTimelineFilterChange}}):_vm._e(),_vm.showDbFilterIcon&&!_vm.$helpers.isPortalUser()||_vm.$helpers.isPortalUser()&&_vm.dashboardFilterObj&&_vm.dashboardFilterObj.dashboardUserFilters?_c("div",{staticClass:"dashboard-filter-toggle mR10 mT2",class:[{"is-open":_vm.showDashboardFilterBar}],on:{click:function($event){_vm.showDashboardFilterBar=!_vm.showDashboardFilterBar}}},[_vm.showDashboardFilterBar?_c("inline-svg",{staticClass:"pointer",attrs:{src:"svgs/dashboard/filter",iconClass:"icon icon-md",iconStyle:"color:#ee518f"}}):_c("inline-svg",{staticClass:"pointer",attrs:{src:"svgs/dashboard/filter-disabled",iconClass:"icon icon-md"}})],1):_vm._e()],1),null!==_vm.fullScrnHeader&&116===_vm.$account.org.id?_c("div",{staticClass:"full-screen-banner dbHeadingTxt",class:_vm.fullScreenClass},[_c("img",{staticClass:" flLeft emirates_logo",attrs:{src:__webpack_require__(641697)}}),_c("span",{staticClass:"baner-header "},[_vm._v("EMIRATES FACILITIES MANAGEMENT")]),_c("img",{staticClass:" flLeft flight",attrs:{src:__webpack_require__(546518)}}),_c("img",{staticClass:" flLeft facilio-logo",attrs:{src:__webpack_require__(851395)}})]):_vm._e(),null!==_vm.fullScrnHeader&&_vm.showDashboardTitle?_c("div",{staticClass:"dbHeadingTxt",class:_vm.fullScreenClass},[_vm._t("dashboardNameList",(function(){return[_vm._v(_vm._s(_vm.fullScrnHeader))]}))],2):_vm._e(),_c("transition",{attrs:{name:"fc-scale-vertical"}},[_vm.dashboardTabId||_vm.loading?_vm._e():_c("dashboard-filter-container",{directives:[{name:"show",rawName:"v-show",value:_vm.showDashboardFilterBar,expression:"showDashboardFilterBar"}],ref:"dbFilterContainer",staticClass:"dashboard-filter-container",attrs:{dashboardFilterObj:_vm.dashboardFilterObj,dashboardId:_vm.dashboard.id,filterEditMode:_vm.filterEditMode,hideFilterInsideWidgets:_vm.hideFilterInsideWidgets},on:{dbUserFilters:_vm.handleDbUserFilterChange,dbFilterConfigSaved:_vm.handleDbFilterConfigSaved,"update:filterEditMode":function($event){_vm.filterEditMode=$event},"update:filter-edit-mode":function($event){_vm.filterEditMode=$event},"update:hideFilterInsideWidgets":function($event){_vm.hideFilterInsideWidgets=$event},"update:hide-filter-inside-widgets":function($event){_vm.hideFilterInsideWidgets=$event}}})],1),_vm.loading||!_vm.dashboardLayout?_c("div",[_vm._m(0)]):_c("div",{staticClass:"dashboard-container",class:{editmode:_vm.editMode},staticStyle:{"padding-bottom":"0px"}},[_vm.isPrinting?[_c("div",{staticClass:"dashboard-header-pdf"},[_c("div",[_c("el-row",{staticClass:"flex-middle"},[_c("el-col",{attrs:{span:4}},[_c("div",{staticClass:"customer-logo"},[_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.$org.logoUrl,expression:"$org.logoUrl"}]},[_c("img",{staticStyle:{width:"100px",height:"50px","object-fit":"contain"},attrs:{src:_vm.$org.logoUrl}})])])]),_c("el-col",{attrs:{span:6,offset:4}},[_c("div",{staticClass:"pm-pdf-heading text-center"},[_vm._v(" "+_vm._s(_vm.dashboard.label)+" ")]),_vm.$helpers.isPortalUser()&&this.$getProperty(this.$route,"query.tab")?_c("div",{staticClass:"pm-pdf-heading text-center"},[_vm._v(" "+_vm._s(_vm.setTabName())+" ")]):_vm._e()]),_c("el-col",{attrs:{span:6,offset:4}},[_c("div",{staticClass:"pm-pdf-heading text-right"},[_vm._v(" "+_vm._s(_vm.dashboardTimelineFilterRange)+" ")])])],1)],1)])]:_vm._e(),_vm.editMode?_c("div",{staticClass:"dashboard-edit-toolbar"},[_c("div",{staticClass:"pull-left",staticStyle:{width:"auto"}},[_c("el-input",{staticClass:"dashboard-name-input",attrs:{placeholder:"Edit Dashboard"},model:{value:_vm.dashboard.label,callback:function($$v){_vm.$set(_vm.dashboard,"label",$$v)},expression:"dashboard.label"}})],1),_c("div",{staticClass:"pull-right",staticStyle:{"margin-right":"70px"}},[_c("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:_vm.loadSharing}},[_vm._v("Sharing")]),_c("el-dropdown",{staticStyle:{"margin-right":"8px"},attrs:{size:"small"},on:{command:_vm.handleAddWidget}},[_c("el-button",{attrs:{type:"primary",size:"small"}},[_vm._v(" Add Widget"),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"static"}},[_vm._v("Pre-built Widget")]),_c("el-dropdown-item",{attrs:{command:"chart"}},[_vm._v("Chart Widget")]),_c("el-dropdown-item",{attrs:{command:"list"}},[_vm._v("List Widget")]),_c("el-dropdown-item",{attrs:{command:"map"}},[_vm._v("Map Widget")]),_c("el-dropdown-item",{attrs:{command:"web"}},[_vm._v("Web Widget")])],1)],1),_c("el-button",{attrs:{size:"small",type:"primary"},on:{click:_vm.saveEdit}},[_vm._v("SAVE")]),_c("el-button",{staticStyle:{color:"#39b2c2","border-color":"#39b2c2","letter-spacing":"0.7px","margin-left":"8px"},attrs:{size:"small"},on:{click:_vm.cancelEdit}},[_vm._v("CANCEL")])],1)]):_vm._e(),"undefined"===typeof _vm.$route.query.showTemplate||!0!==_vm.$route.query.showTemplate&&"true"!==_vm.$route.query.showTemplate?_vm._e():_c("dashboard-template-filter",{attrs:{dashboardTemplateConfig:_vm.dashboardTemplate}}),_vm.showPortfolio&&"energydata"===_vm.showPortfolio&&210!==_vm.$account.org.id?_c("company-listslider",{staticStyle:{cursor:"pointer",padding:"15px 15px 0px 15px"},attrs:{dashboardLink:_vm.dashboardLink,sites:_vm.sites}}):_vm._e(),_vm.showPortfolio&&"alarm"===_vm.showPortfolio?_c("alarm-company-listslider",{staticStyle:{cursor:"pointer",padding:"15px 15px 0px 15px"}}):_vm._e(),"undefined"===typeof _vm.$route.query.showFilter||!0!==_vm.$route.query.showFilter&&"true"!==_vm.$route.query.showFilter?_vm._e():_c("dashboard-filter"),_c("div",{staticClass:"height100",class:_vm.dashboardTabContexts&&_vm.dashboardTabContexts.length>0?"overflow-y":""},[_vm.dashboardTabContexts&&_vm.dashboardTabContexts.length>0?_c("el-row",[2===_vm.dashboardTabPlacement?_c("el-col",{attrs:{span:4}},[_c("div",{staticClass:"dashboard-tab-sidebar"},[_vm.dashboardTabContexts&&_vm.dashboardTabContexts.length>0?_c("div",{staticClass:"dashboard-tab-sidebar-scroll"},_vm._l(_vm.dashboardTabContexts,(function(folder,index){return _c("div",{key:index,staticClass:"dashboard-folder-container"},[_c("div",{staticClass:"dfolder-name",class:{active:_vm.dashboardTabId===folder.id},on:{click:function($event){_vm.changeDashboardTabId(folder.id),_vm.expand(folder)}}},[_c("div",{staticClass:"mL5"},[_c("span",[_vm._v(_vm._s(folder.name))]),folder.childTabs?_c("div",{staticClass:"dfolder-icon fR"},[folder.expand?_c("i",{staticClass:"el-icon-arrow-down"}):_c("i",{staticClass:"el-icon-arrow-right"})]):_vm._e()])]),_c("div",{directives:[{name:"show",rawName:"v-show",value:folder.expand,expression:"folder.expand"}],staticClass:"dfolder-children"},_vm._l(folder.childTabs,(function(childFolder,cId){return _c("div",{key:cId,class:{active:_vm.dashboardTabId===childFolder.id},on:{click:function($event){return _vm.changeDashboardTabId(childFolder.id)}}},[_c("span",{staticClass:"mL5"},[_vm._v(_vm._s(childFolder.name))])])})),0)])})),0):_vm._e()])]):_vm._e(),1===_vm.dashboardTabPlacement?_c("el-col",{attrs:{span:24}},[_c("dashboard-top-tab",{attrs:{dashboardTabContexts:_vm.dashboardTabContexts,dashboardTabId:_vm.dashboardTabId},on:{changeDashboardTabId:_vm.changeDashboardTabId}})],1):_vm._e(),_c("el-col",{staticClass:"scrollable pB180",attrs:{span:1===_vm.dashboardTabPlacement?24:20}},[_vm.dashboardTabId&&!_vm.dashboardTabLoading?_c("dashboard-filter-container",{directives:[{name:"show",rawName:"v-show",value:_vm.showDashboardFilterBar,expression:"showDashboardFilterBar"}],ref:"dbFilterContainer",staticClass:"position-sticky top-0 dashboard-filter-container",attrs:{dashboardFilterObj:_vm.dashboardFilterObj,dashboardTabId:_vm.dashboardTabId,filterEditMode:_vm.filterEditMode},on:{"update:filterEditMode":function($event){_vm.filterEditMode=$event},"update:filter-edit-mode":function($event){_vm.filterEditMode=$event},dbUserFilters:_vm.handleDbUserFilterChange,dbFilterConfigSaved:_vm.handleDbFilterConfigSaved}}):_vm._e(),_vm.dashboardTabLoading||!_vm.dashboardLayout?_c("div",[_c("div",{staticClass:"sk-cube-grid"},[_c("div",{staticClass:"sk-cube sk-cube1"}),_c("div",{staticClass:"sk-cube sk-cube2"}),_c("div",{staticClass:"sk-cube sk-cube3"}),_c("div",{staticClass:"sk-cube sk-cube4"}),_c("div",{staticClass:"sk-cube sk-cube5"}),_c("div",{staticClass:"sk-cube sk-cube6"}),_c("div",{staticClass:"sk-cube sk-cube7"}),_c("div",{staticClass:"sk-cube sk-cube8"}),_c("div",{staticClass:"sk-cube sk-cube9"})])]):_vm._e(),_vm.dashboardTabLoading||_vm.dashboardLayout.length?_vm._e():_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12 flex-middle justify-content-center flex-direction-column height80vh pT30"},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xxxlg"}}),_c("div",{staticClass:"fc-black-24 pT20"},[_vm._v(" You haven’t added any widgets yet ")]),_c("div",{staticClass:"fc-grayish f18 pT10"},[_vm._v(" Add widgets to see any further data in this page ")]),_c("el-button",{staticClass:"fc-create-btn mT20 letter-spacing0_4",staticStyle:{padding:"15px 30px"},on:{click:_vm.geteditdashboardLink}},[_vm._v(" ADD NEW WIDGET ")])],1)]),_vm.rerender?[!_vm.dashboardTabLoading&&_vm.dashboardLayout.length?_c("grid-layout",{attrs:{layout:_vm.dashboardLayout,"col-num":96,rowHeight:_vm.rowHeight,"is-draggable":_vm.editMode,"is-resizable":_vm.editMode,margin:[_vm.margin,_vm.margin]}},_vm._l(_vm.dashboardLayout,(function(item,index){return _c("grid-item",{key:index,staticClass:"dashboard-f-widget",attrs:{x:item.x,y:item.y,w:item.w,h:item.h,i:item.i,"drag-allow-from":".fc-widget-header, .dragabale-card, .map-drag-area","drag-ignore-from":".fc-widget-body","is-resizable":_vm.editMode&&"static"!==item.widget.type}},[_vm.$route.meta&&_vm.$route.meta.dashboardlayout&&"mobile"===_vm.$route.meta.dashboardlayout?_c("f-mobile-widget",{key:index,attrs:{type:item.widget.type,widget:item.widget,grid:item,rowHeight:_vm.rowHeight,currentDashboard:_vm.currentDashboard,dashboardObj:_vm.dashboard,dashboard:_vm.dashboard?_vm.dashboard.id:null,mode:_vm.editMode},on:{deletechart:_vm.deleteChart}}):"card"===item.widget.type?_c("CardWrapper",{ref:"widget["+index+"]",refInFor:!0,attrs:{showFilterConfig:_vm.filterEditMode,isLazyDashboard:_vm.isLazyDashboard,widget:item.widget,dashboardId:_vm.dashboard?_vm.dashboard.id:null,dbTimelineFilter:_vm.timelineFilterMap[item.widget.id],dbFilterJson:_vm.dbUserFilters[item.widget.id],dbCustomScriptFilter:_vm.dbCustomScriptFilter[item.widget.id]},on:{removeCard:_vm.deleteCard,editCard:function($event){return _vm.editCard(item)},editWidgetFilterConfig:_vm.editWidgetFilterConfig}}):_c("f-widget",{key:index,attrs:{isLazyDashboard:_vm.isLazyDashboard,showFilterConfig:_vm.filterEditMode,type:item.widget.type,widget:item.widget,grid:item,rowHeight:_vm.rowHeight,currentDashboard:_vm.currentDashboard,dashboardObj:_vm.dashboard,dbTimelineFilter:_vm.timelineFilterMap[item.widget.id],dbFilterJson:_vm.dbUserFilters[item.widget.id],dashboard:_vm.dashboard?_vm.dashboard.id:null,mode:_vm.editMode},on:{editWidgetFilterConfig:_vm.editWidgetFilterConfig,showComments:_vm.openReportComments,deletechart:_vm.deleteChart}})],1)})),1):_vm._e()]:_vm._e()],2)],1):_c("div",[_vm.dashboardLayout.length||_vm.listWidgets.length?_vm._e():_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12 flex-middle flex-direction-column justify-content-center height80vh pT30"},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xxxlg"}}),_c("div",{staticClass:"fc-black-24 pT20"},[_vm._v(" You haven’t added any widgets yet ")]),_c("div",{staticClass:"fc-grayish f18 pT10"},[_vm._v(" Add widgets to see any further data in this page ")]),_c("el-button",{staticClass:"fc-create-btn mT20 letter-spacing0_4",staticStyle:{padding:"15px 30px"},on:{click:_vm.geteditdashboardLink}},[_vm._v(" ADD NEW WIDGET ")])],1)]),_vm.printTabLayout.length?_vm._l(_vm.printTabLayout,(function(tab,tindex){return _c("div",{key:tindex},[_c("div",{staticClass:"label-txt-black f18 text-left fwBold text-uppercase pT20 pB20 pL30"},[_vm._v(" "+_vm._s(tab.tabName)+" ")]),_vm.rerender?[_c("grid-layout",{key:tab.id,attrs:{layout:tab.layout,"col-num":96,rowHeight:_vm.rowHeight,"is-draggable":_vm.editMode,"is-resizable":_vm.editMode,"use-css-transforms":!0,margin:[_vm.margin,_vm.margin]}},_vm._l(tab.layout,(function(item,index){return _c("grid-item",{key:index,staticClass:"dashboard-f-widget",attrs:{x:item.x,y:item.y,w:item.w,h:item.h,i:item.i,"drag-allow-from":".fc-widget-header, .dragabale-card, .map-drag-area","drag-ignore-from":".fc-widget-body","is-resizable":_vm.editMode&&"static"!==item.widget.type}},["card"===item.widget.type?_c("CardWrapper",{ref:"widget["+index+"]",refInFor:!0,attrs:{showFilterConfig:_vm.filterEditMode,widget:item.widget,dashboardId:_vm.dashboard?_vm.dashboard.id:null},on:{removeCard:_vm.deleteCard,editCard:function($event){return _vm.editCard(item)},editWidgetFilterConfig:_vm.editWidgetFilterConfig}}):"dummy"!==item.widget.type?_c("f-widget",{key:index,attrs:{showFilterConfig:_vm.filterEditMode,type:item.widget.type,widget:item.widget,grid:item,rowHeight:_vm.rowHeight,dashboardObj:_vm.dashboard,currentDashboard:_vm.currentDashboard,dashboard:_vm.dashboard?_vm.dashboard.id:null,mode:_vm.editMode},on:{editWidgetFilterConfig:_vm.editWidgetFilterConfig,showComments:_vm.openReportComments,deletechart:_vm.deleteChart}}):_vm._e()],1)})),1)]:_vm._e()],2)})):_vm.rerender&&_vm.dashboardLayout.length?_c("grid-layout",{attrs:{layout:_vm.dashboardLayout,"col-num":96,rowHeight:_vm.rowHeight,"is-draggable":_vm.editMode,"is-resizable":_vm.editMode,"use-css-transforms":!0,margin:[_vm.margin,_vm.margin]}},_vm._l(_vm.dashboardLayout,(function(item,index){return _c("grid-item",{key:index,staticClass:"dashboard-f-widget",attrs:{x:item.x,y:item.y,w:item.w,h:item.h,i:item.i,"drag-allow-from":".fc-widget-header, .dragabale-card, .map-drag-area","drag-ignore-from":".fc-widget-body","is-resizable":_vm.editMode&&"static"!==item.widget.type}},[_vm.$route.meta&&_vm.$route.meta.dashboardlayout&&"mobile"===_vm.$route.meta.dashboardlayout?_c("f-mobile-widget",{key:index,attrs:{type:item.widget.type,widget:item.widget,grid:item,rowHeight:_vm.rowHeight,currentDashboard:_vm.currentDashboard,dashboardObj:_vm.dashboard,dashboard:_vm.dashboard?_vm.dashboard.id:null,mode:_vm.editMode},on:{deletechart:_vm.deleteChart}}):"card"===item.widget.type?_c("CardWrapper",{ref:"widget["+index+"]",refInFor:!0,attrs:{showFilterConfig:_vm.filterEditMode,widget:item.widget,dashboardId:_vm.dashboard?_vm.dashboard.id:null,dbTimelineFilter:_vm.timelineFilterMap[item.widget.id],dbFilterJson:_vm.dbUserFilters[item.widget.id],dbCustomScriptFilter:_vm.dbCustomScriptFilter[item.widget.id],isLazyDashboard:_vm.isLazyDashboard},on:{removeCard:_vm.deleteCard,editCard:function($event){return _vm.editCard(item)},editWidgetFilterConfig:_vm.editWidgetFilterConfig}}):"dummy"!==item.widget.type?_c("f-widget",{key:index,attrs:{showFilterConfig:_vm.filterEditMode,type:item.widget.type,widget:item.widget,grid:item,rowHeight:_vm.rowHeight,dashboardObj:_vm.dashboard,currentDashboard:_vm.currentDashboard,dashboard:_vm.dashboard?_vm.dashboard.id:null,mode:_vm.editMode,dbFilterJson:_vm.dbUserFilters[item.widget.id],dbTimelineFilter:_vm.timelineFilterMap[item.widget.id],isLazyDashboard:_vm.isLazyDashboard},on:{editWidgetFilterConfig:_vm.editWidgetFilterConfig,showComments:_vm.openReportComments,deletechart:_vm.deleteChart}}):_vm._e()],1)})),1):_vm._e()],2)],1),_vm._l(_vm.listWidgets,(function(item){return[_c("f-list-widget",{key:item.widget.id,staticClass:"p10",attrs:{dbFilterJson:_vm.dbUserFilters[item.widget.id],dbTimelineFilter:_vm.timelineFilterMap[item.widget.id],config:{widget:item.widget,currentDashboard:_vm.currentDashboard,dashboardObj:_vm.dashboard},isPrinting:_vm.isPrinting}})]}))],2),_vm.editMode?_c("div",[_c("new-chart-widget",{ref:"newChartWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null}}),_c("new-list-widget",{ref:"newListWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null}}),_c("new-map-widget",{ref:"newMapWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null}}),_c("new-prebuilt-widget",{ref:"newStaticWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null}}),_c("new-web-widget",{ref:"newWebWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null}})],1):_vm._e()],1):_vm._e()]),_c("PopupView",{ref:"dashboardPopupView"})],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"sk-cube-grid"},[_c("div",{staticClass:"sk-cube sk-cube1"}),_c("div",{staticClass:"sk-cube sk-cube2"}),_c("div",{staticClass:"sk-cube sk-cube3"}),_c("div",{staticClass:"sk-cube sk-cube4"}),_c("div",{staticClass:"sk-cube sk-cube5"}),_c("div",{staticClass:"sk-cube sk-cube6"}),_c("div",{staticClass:"sk-cube sk-cube7"}),_c("div",{staticClass:"sk-cube sk-cube8"}),_c("div",{staticClass:"sk-cube sk-cube9"})])}],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),PopupView=(__webpack_require__(169358),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(865137),__webpack_require__(947522),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(425728),__webpack_require__(162506),__webpack_require__(903650),__webpack_require__(750787)),vue_runtime_esm=__webpack_require__(720144),api=__webpack_require__(32284),FWidget=__webpack_require__(638433),FListWidget=__webpack_require__(293708),NewChartWidget=__webpack_require__(327536),NewListWidget=__webpack_require__(854850),NewMapWidget=__webpack_require__(67361),NewPrebuiltWidget=__webpack_require__(768874),NewWebWidget=__webpack_require__(830269),CompanyListslider=__webpack_require__(633684),CompanySlider=__webpack_require__(111322),vue_grid_layout_common=__webpack_require__(477502),DashboardFilter=__webpack_require__(346939),ReportHelper=__webpack_require__(507815),tooltip=__webpack_require__(460895),MobileWidget=__webpack_require__(143838),DashboardTemplateFiltervue_type_template_id_095cab51_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"row dashboard-filter"},[_c("div",{staticClass:"col-12"},[_c("div",[_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"db-filter fc-tag",attrs:{filterable:"",clearable:"","collapse-tags":"",placeholder:"Sites"},on:{change:function($event){return _vm.loadsiteAssets(_vm.siteId)},clear:function($event){_vm.assets=[]}},model:{value:_vm.siteId,callback:function($$v){_vm.siteId=$$v},expression:"siteId"}},_vm._l(_vm.sites,(function(site,index){return _c("el-option",{key:index,attrs:{label:site.name,value:site.id}})})),1)],1),_c("div",[_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"db-filter fc-tag",attrs:{filterable:"",clearable:"","collapse-tags":"",placeholder:"Asset"},on:{change:_vm.applyFilter,clear:_vm.clearFilters},model:{value:_vm.dashboardTemplate.parentId,callback:function($$v){_vm.$set(_vm.dashboardTemplate,"parentId",$$v)},expression:"dashboardTemplate.parentId"}},_vm._l(_vm.assets,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1),null!==_vm.dashboardTemplate.parentId?_c("div",{staticClass:"clear-all-text pointer",on:{click:_vm.clearFilters}},[_vm._v(" Clear ")]):_vm._e(),_c("div",{staticClass:"filter-icon-up",on:{click:_vm.close}},[_c("i",{staticClass:"el-icon-arrow-up"})])])])},DashboardTemplateFiltervue_type_template_id_095cab51_staticRenderFns=[],vuex_esm=(__webpack_require__(902918),__webpack_require__(879288),__webpack_require__(648324),__webpack_require__(420629)),DashboardTemplateFiltervue_type_script_lang_js={props:["linknName","dashboardTemplateConfig"],data:function(){return{loading:!1,siteId:null,assets:[],spaceList:[],readings:null,dashboardTemplate:{parentId:null},templateObj:{},swapAssetList:{}}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSites"),this.loadReadings()},mounted:function(){var self=this;this.$store.dispatch("loadAssetCategory").then((function(response){})),self.$route.query.templateParams&&(self.dashboardTemplate=JSON.parse(self.$route.query.templateParams))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.sites}})),(0,vuex_esm/* mapGetters */.Se)(["getAssetCategoryByName","getAssetCategory"])),{},{category:function(){var config=this.dashboardTemplateConfig;return config&&config.category?this.getAssetCategoryByName(config.category):this.$route.path.endsWith("precoolerwithtemplate")?this.getAssetCategoryByName("Precooler"):this.$route.path.endsWith("chillerwithtemplate")?this.getAssetCategoryByName("Chiller"):this.$route.path.endsWith("ductedsplitunitwithtemplate")?this.getAssetCategoryByName("Ducted Split Unit"):this.$route.path.endsWith("energymeterwithtemplate")?this.getAssetCategoryByName("Energy Meter"):this.getAssetCategoryByName("FAHU")},assetCategory:function(){var _this=this,data={};return this.readings&&this.readings.categoryWithAssets?(Object.keys(this.readings.categoryWithAssets).forEach((function(rt){data[rt]=_this.getAssetCategory(Number(rt)).displayName})),data):data},showTemplate:function(){return!this.$route.query.hasOwnProperty("showTemplate")||this.$route.query.showTemplate}}),methods:{getCategoryIdFromLinkName:function(linknName){return null},clearFilters:function(){this.dashboardTemplate={parentId:null},this.siteId=null,this.$router.push({query:{showTemplate:!0}})},loadsiteAssets:function(siteId){var _this2=this;this.dashboardTemplate={parentId:null},this.assets=[],this.$util.loadAsset({spaceId:siteId,categoryId:this.category.id}).then((function(response){_this2.assets=response.assets}))},loadReadings:function(){var self=this;self.loading=!0;var url="/asset/getreadings";self.$http.get(url).then((function(response){self.readings=response.data,self.loading=!1}))},applyCustomFilter:function(type){var self=this;if(2===type){var dashboardTemplate=this.$helpers.cloneObject(this.dashboardTemplate),template={fahu:{parentId:dashboardTemplate.parentId},energymeter:{parentId:null}},url="/v2/assets/related/".concat(this.dashboardTemplate.parentId);self.$http.get(url).then((function(response){response.data.result.relatedAssets&&response.data.result.relatedAssets.length&&(template["energymeter"].parentId=response.data.result.relatedAssets[0],dashboardTemplate.parentId=response.data.result.relatedAssets[0]);var dahboardtem={type:2,categoryTemplate:template};self.$router.push({query:{showTemplate:!0,templateParams:JSON.stringify(dahboardtem)}})}))}},applyFilter:function(){var config=this.dashboardTemplateConfig;if(config&&config.type&&2===config.type)this.applyCustomFilter(config.type);else{var dashboardTemplate=this.$helpers.cloneObject(this.dashboardTemplate);this.$router.push({query:{showTemplate:!0,templateParams:JSON.stringify(dashboardTemplate)}})}},close:function(){if(this.dashboardTemplate.parentId){this.$helpers.cloneObject(this.dashboardTemplate);this.$router.replace({query:{showTemplate:!1,templateParams:JSON.stringify(this.dashboardTemplate)}})}else this.$router.replace({query:{showTemplate:!1}})}}},components_DashboardTemplateFiltervue_type_script_lang_js=DashboardTemplateFiltervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_DashboardTemplateFiltervue_type_script_lang_js,DashboardTemplateFiltervue_type_template_id_095cab51_render,DashboardTemplateFiltervue_type_template_id_095cab51_staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardTemplateFilter=component.exports,CardWrapper=__webpack_require__(180531),CardBuilderDashboardMixin=__webpack_require__(756974),DashboardFilterContainer=__webpack_require__(188095),DashboardFilterMixin=__webpack_require__(702275),DashboardTimelineFiltervue_type_template_id_2c324c5d_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.datePickerObj?_c("div",{staticClass:"dashboard-timeline-filter"},[_c("new-date-picker",{ref:"datePickerRef",attrs:{zone:_vm.$timezone,dateObj:_vm.datePickerObj},on:{date:_vm.dateChanged}})],1):_vm._e()},DashboardTimelineFiltervue_type_template_id_2c324c5d_staticRenderFns=[],NewDateHelper=__webpack_require__(105534),NewDatePicker=__webpack_require__(900773),DashboardTimelineFiltervue_type_script_lang_js={components:{NewDatePicker:NewDatePicker/* default */.Z},props:["dbTimelineFilterInitialState"],data:function(){return{datePickerObj:null}},created:function(){this.datePickerObj=NewDateHelper/* default */.Z.getDatePickerObject(this.dbTimelineFilterInitialState.operatorId,this.dbTimelineFilterInitialState.dateValueString)},computed:{},methods:{dateChanged:function(pickerObj){
//set initial state of filters
var timelineFilter={};timelineFilter.startTime=pickerObj.value[0],timelineFilter.endTime=pickerObj.value[1],timelineFilter.operatorId=pickerObj.operatorId,timelineFilter.dateLabel=pickerObj.label+"",timelineFilter.dateValueString=pickerObj.value[0]+","+pickerObj.value[1],this.$emit("timelineFilterChanged",timelineFilter)}}},dashboard_filters_DashboardTimelineFiltervue_type_script_lang_js=DashboardTimelineFiltervue_type_script_lang_js,DashboardTimelineFilter_component=(0,componentNormalizer/* default */.Z)(dashboard_filters_DashboardTimelineFiltervue_type_script_lang_js,DashboardTimelineFiltervue_type_template_id_2c324c5d_render,DashboardTimelineFiltervue_type_template_id_2c324c5d_staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardTimelineFilter=DashboardTimelineFilter_component.exports,DashboardFilterWidgetConfigDialog=__webpack_require__(146040),validation=__webpack_require__(990260),DashboardTopTab=__webpack_require__(585081),eventBus=__webpack_require__(398011),router=__webpack_require__(329435),printPageSize=122,gridColumn=96,DashboardViewervue_type_script_lang_js={mixins:[ReportHelper/* default */.Z,CardBuilderDashboardMixin/* default */.Z,DashboardFilterMixin/* default */.Z],props:{isTv:{type:Boolean,default:!1},sites:{},currentDashboard:{},buildings:{},refresh:{type:Boolean,default:!0}},components:{PopupView:PopupView/* default */.Z,NewChartWidget:NewChartWidget/* default */.Z,NewListWidget:NewListWidget/* default */.Z,NewMapWidget:NewMapWidget/* default */.Z,NewPrebuiltWidget:NewPrebuiltWidget/* default */.Z,NewWebWidget:NewWebWidget/* default */.Z,FWidget:FWidget/* default */.Z,FListWidget:FListWidget/* default */.Z,GridLayout:vue_grid_layout_common.GridLayout,GridItem:vue_grid_layout_common.GridItem,CompanyListslider:CompanyListslider/* default */.Z,DashboardFilter:DashboardFilter/* default */.Z,AlarmCompanyListslider:CompanySlider/* default */.Z,FMobileWidget:MobileWidget/* default */.Z,DashboardTemplateFilter:DashboardTemplateFilter,CardWrapper:CardWrapper/* default */.Z,DashboardFilterContainer:DashboardFilterContainer/* default */.Z,DashboardTimelineFilter:DashboardTimelineFilter,DashboardFilterWidgetConfigDialog:DashboardFilterWidgetConfigDialog/* default */.Z,DashboardTopTab:DashboardTopTab/* default */.Z},data:function(){return{rerender:!0,rowHeight:5,margin:10,showReportComments:!1,reportCommentMeta:{},loading:!0,dashboard:null,isMobileDashboard:!1,dashboardLayout:null,printTabLayout:[],removeChartList:[],chartDeleted:!1,shareTo:2,sharedUsers:[],sharedRoles:[],sharedGroups:[],tabName:null,fullScrnHeader:null,dashboardTabContexts:null,dashboardTabLoading:!1,printed:!1,printPageSize:printPageSize,gridColumn:gridColumn,listWidgets:[],listWidgetToRender:0,canPrint:!1,
//dbfilter state->from dashboard filter mixin
showDashboardFilterBar:!1,showDbFilterIcon:!0,dashboardTabPlacement:2,isPermission:!0}},mounted:function(){this.registerGlobalComponents()},created:function(){var _this=this;eventBus/* eventBus */.Y.$on("editFilterClicked",this.editFromDropDown),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadBuildings").then((function(){_this.loadDashboard()}))},beforeDestroy:function(){eventBus/* eventBus */.Y.$off("editFilterClicked",this.editFromDropDown)},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),(0,vuex_esm/* mapState */.rn)("webtabs",{currentTab:function(state){return state.selectedTab}})),(0,vuex_esm/* mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{
// widgets lazy loading .support set flag true to load reports  only when they come into view
//remove when released
isLazyDashboard:function(){return!this.isPrinting},dashboardMeta:function(){return this.dashboard.clientMetaJsonString?JSON.parse(this.dashboard.clientMetaJsonString):null},dashboardTemplate:function(){return this.dashboardMeta?this.dashboardMeta.dashboardTemplate:null},dashboardLink:function(){return this.currentDashboard?this.currentDashboard.linkName:"residentialbuildingdashboard"===this.$route.params.dashboardlink||"commercialbuildingdashboard"===this.$route.params.dashboardlink?"buildingdashboard":this.$route.params.dashboardlink},showDashboardTitle:function(){return!this.currentDashboard||!(this.currentDashboard.screenSetting&&"undefined"!==typeof this.currentDashboard.screenSetting["titleVisibility"]&&!this.currentDashboard.screenSetting["titleVisibility"])},showPortfolio:function(){if(this.currentDashboard){if("portfolio"===this.currentDashboard.linkName||"maintenanceportfolio"===this.currentDashboard.linkName||"energyportfolio"===this.currentDashboard.linkName||"alarmportfolio"===this.currentDashboard.linkName||"commercial"===this.currentDashboard.linkName||"residential"===this.currentDashboard.linkName)return this.currentDashboard.moduleName}else if(this.dashboard&&this.$helpers.isLicenseEnabled("NEW_LAYOUT")){if("portfolio"===this.dashboard.linkName||"maintenanceportfolio"===this.dashboard.linkName||"energyportfolio"===this.dashboard.linkName||"alarmportfolio"===this.dashboard.linkName||"commercial"===this.dashboard.linkName||"residential"===this.dashboard.linkName)return"energydata";if("alarmportfolio"===this.dashboard.linkName)return"alarm"}else{if("/app/em/newdashboard/portfolio"===this.$route.path||"/app/em/dashboard/portfolio"===this.$route.path||"/app/em/newdashboard/commercial"===this.$route.path||"/app/em/newdashboard/residential"===this.$route.path)return"energydata";if("/app/fa/newdashboard/portfolio"===this.$route.path||"/app/fa/dashboard/portfolio"===this.$route.path)return"alarm";if("/app/em/newdashboard/energyportfolio"===this.$route.path||"/app/em/dashboard/energyportfolio"===this.$route.path||"/app/em/newdashboard/commercial"===this.$route.path||"/app/em/newdashboard/residential"===this.$route.path)return"energydata";if("/app/fa/newdashboard/alarmportfolio"===this.$route.path||"/app/fa/dashboard/alarmportfolio"===this.$route.path)return"alarm"}return null},buildingId:function(){return this.currentDashboard?this.currentDashboard.buildingId:"buildingdashboard"===this.dashboardLink?this.$route.params.buildingid:null},siteId:function(){return this.currentDashboard?this.currentDashboard.siteId:"sitedashboard"===this.dashboardLink?this.$route.params.buildingid:null},chillerPlant:function(){return this.currentDashboard?this.currentDashboard.siteId:"chillerplant"===this.dashboardLink?this.$route.params.buildingid:null},chillerId:function(){return this.currentDashboard?this.currentDashboard.siteId:"chillers"===this.dashboardLink?this.$route.params.buildingid:null},editMode:function(){return"edit"===this.$route.query.mode},sharingDialogVisible:function(){return"share"===this.$route.query.mode},fullScreenClass:function(){return this.currentDashboard?"remoteScreenFlSc":"headingFlSc"},dashboardTabId:function(){return this.$route.query.tab?parseInt(this.$route.query.tab):null},isPrinting:function(){return"true"===this.$route.query.printing||!0===this.$route.query.printing},
//display when printing on top right
dashboardTimelineFilterRange:function(){return(0,validation/* isEmpty */.xb)(this.dbTimelineFilter)?null:this.$helpers.getOrgMoment(this.dbTimelineFilter.startTime).format("DD/MM/YYYY")+" - "+this.$helpers.getOrgMoment(this.dbTimelineFilter.endTime).format("DD/MM/YYYY")}}),destroyed:function(){tooltip/* default */.Z.hideTooltip()},watch:{refresh:function(){this.loadDashboard()},dashboardLink:function(newVal){this.loadDashboard()},buildingId:function(newVal){this.loadDashboard()},siteId:function(newVal){this.loadDashboard()},chillerId:function(newVal){this.loadDashboard()},chillerPlant:function(newVal){this.loadDashboard()},dashboardTabId:function(newVal,oldVal){newVal!==oldVal&&(this.loadDashboardTabWidgets(),this.openGraphicsFolder())}},methods:{registerGlobalComponents:function(){this.$refs["dashboardPopupView"]&&(vue_runtime_esm["default"].prototype.$popupView=this.$refs["dashboardPopupView"])},calRowHeight:function(){this.rowHeight;var height=5;if(document.getElementsByClassName("layout-page")[0]&&document.getElementsByClassName("layout-page")[0].offsetWidth)height=document.getElementsByClassName("layout-page")[0].offsetWidth/1e4;else if(document.getElementsByClassName("dashboardmainlayout")[0]&&document.getElementsByClassName("dashboardmainlayout")[0].offsetWidth){var width=document.getElementsByClassName("dashboardmainlayout")[0].offsetWidth;height=width<1200?width/350:width/276.5,this.$set(this,"rowHeight",height)}},calMargin:function(){this.margin;if(document.getElementsByClassName("layout-page")&&document.getElementsByClassName("layout-page").length)document.getElementsByClassName("layout-page")[0].offsetWidth/100;else if(document.getElementsByClassName("dashboardmainlayout")&&document.getElementsByClassName("dashboardmainlayout").length){var width=document.getElementsByClassName("dashboardmainlayout")[0].offsetWidth;width/138}},onResize:function(e){this.calRowHeight(),this.calMargin(),window.dispatchEvent(new Event("resize"))},closeAllComments:function(){this.showReportComments=!1},geteditdashboardLink:function(mode){if(mode)if((0,router/* isWebTabsEnabled */.tj)())if("new"===mode){var _ref=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.DASHBOARD_CREATION)||{},name=_ref.name;name&&this.$router.push({name:name,query:{create:"new"}})}else{var _ref2=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.DASHBOARD_EDITOR)||{},_name=_ref2.name;if(_name){var params={dashboardlink:this.dashboardLink};"buildingdashboard"===this.dashboardLink&&this.buildingId&&(params["buildingid"]=this.buildingId),this.$router.push({name:_name,params:params,query:{create:"edit"}})}}else{var linkname=this.dashboardLink;"buildingdashboard"===linkname&&this.buildingId&&(linkname+="/"+this.buildingId);var url="/app/home/editdashboard/"+linkname;"new"===mode?this.$router.push(url+"?create=new"):this.$router.push(url+"?create=edit")}},openReportComments:function(commentMeta){commentMeta.open?(this.showReportComments=!0,this.$set(this.reportCommentMeta,"id",commentMeta.id)):this.showReportComments=!1},loadSharing:function(){var self=this;self.dashboard&&self.$http.get("/dashboardsharing/"+self.dashboard.id).then((function(response){if(response.data.dashboardSharing)if(0===response.data.dashboardSharing.length)self.shareTo=2;else{self.sharedUsers=[],self.sharedRoles=[],self.sharedGroups=[];for(var i=0;i<response.data.dashboardSharing.length;i++){var dashboardSharing=response.data.dashboardSharing[i];1===dashboardSharing.sharingType?self.sharedUsers.push(dashboardSharing.orgUserId):2===dashboardSharing.sharingType?self.sharedRoles.push(dashboardSharing.roleId):3===dashboardSharing.sharingType&&self.sharedGroups.push(dashboardSharing.groupId)}1===response.data.dashboardSharing.length&&1===self.sharedUsers.length&&self.sharedUsers[0]===self.getCurrentUser().ouid?self.shareTo=1:self.shareTo=3}self.sharingDialogVisible=!0}))},applySharing:function(){var self=this,dashboardSharing=[];if(1===self.shareTo)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});else if(3===self.shareTo){if(self.sharedUsers.length>0){dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});for(var i=0;i<self.sharedUsers.length;i++)self.sharedUsers[i]!==self.getCurrentUser().ouid&&dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.sharedUsers[i]})}if(self.sharedRoles.length>0)for(var _i=0;_i<self.sharedRoles.length;_i++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:2,roleId:self.sharedRoles[_i]});if(self.sharedGroups.length>0)for(var _i2=0;_i2<self.sharedGroups.length;_i2++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:3,groupId:self.sharedGroups[_i2]})}self.$http.post("/dashboardsharing/apply",{dashboardId:self.dashboard.id,dashboardSharing:dashboardSharing}).then((function(response){self.$message({message:"Sharing applied successfully!",type:"success"}),self.sharingDialogVisible=!1}))},validateDashboardAccess:function(){return this.isPermission=!0,(0,router/* isWebTabsEnabled */.tj)()?this.tabHasPermission("VIEW"):this.$hasPermission("dashboard:READ")},isPortalApp:function(){var PORTALS=this.$constants.appCategory.PORTALS;return!(!(0,router/* getApp */.wx)()||(0,router/* getApp */.wx)().appCategory!==PORTALS)},loadDashboard:function(){if(!(0,validation/* isEmpty */.xb)(this.dashboardLink)){if(!this.isPortalApp()&&!this.validateDashboardAccess())return this.$message("You don't have dashboard access"),this.isPermission=!1,void this.$emit("updatePermission",this.isPermission);var _self=this;_self.loading=!0,this.clearDashboardFilters(),this.showDashboardFilterBar=!1,_self.dashboardLayout=null,this.printTabLayout=[],this.calRowHeight(),this.calMargin();
// self.rowHeight = (document.getElementsByClassName('layout-page')[0].offsetWidth / 24) - ((document.getElementsByClassName('layout-page')[0].offsetWidth / 24) / 3)
var url="/dashboard/"+this.dashboardLink;this.$helpers.isLicenseEnabled("NEW_LAYOUT")?"buildingdashboard"===this.dashboardLink?(url+="?moduleName=energydata",_self.siteId?url+="&siteId="+_self.siteId:_self.buildingId&&(url+="&buildingId="+_self.buildingId)):_self.siteId?url+="?siteId="+_self.siteId:_self.buildingId&&(url+="?buildingId="+_self.buildingId):(url+="?moduleName="+this.getCurrentModule().module,_self.siteId?url+="&siteId="+_self.siteId:_self.buildingId&&(url+="&buildingId="+_self.buildingId)),
// if (url.indexOf('?') > -1) {
//   url += '&optimize=true'
// }
// else {
//   url += '?optimize=true'
// }
url+=_self.$http.get(url).then((function(response){if(_self.dashboard=response.data.dashboardJson[0],_self.currentDashboard?_self.fullScrnHeader=_self.currentDashboard.dashboardName:_self.fullScrnHeader="buildingdashboard"===_self.dashboard.linkName||"commercialbuildingdashboard"===_self.dashboard.linkName||"residentialbuildingdashboard"===_self.dashboard.linkName?_self.$store.getters.getBuildingsPickList()[_self.buildingId]:_self.dashboard.label,_self.dashboard.mobileEnabled?_self.$emit("mobiledashboard",_self.dashboard.mobileEnabled):_self.$emit("mobiledashboard",!1),-1===_self.dashboard.dashboardTabPlacement?_self.dashboardTabPlacement=2:_self.dashboardTabPlacement=_self.dashboard.dashboardTabPlacement,response.data.dashboardJson[0].tabs&&response.data.dashboardJson[0].tabs.length>0){var tabs=response.data.dashboardJson[0].tabs;
// if (!self.isPrinting) { // commenting this bcs dashboard tabs filters not applied while printing
for(var key in _self.dashboardTabContexts=tabs,_self.dashboardTabId?_self.loadDashboardTabWidgets():_self.dashboardTabId||_self.$router.replace(_self.$route.path+"?tab="+_self.dashboardTabContexts[0].id),_self.dashboardTabContexts)_self.$set(_self.dashboardTabContexts[key],"expand",!1);_self.openGraphicsFolder()}else _self.dashboardTabContexts=null,
// self.$router.replace(self.$route.path)
_self.$emit("dashboardobj",_self.dashboard),_self.prepareDashboardLayout(),_self.$nextTick((function(){_self.$emit("dashboardLoaded",_self.dashboard)}));try{_self.initializeDashboardFilters(_self.dashboard.dashboardFilter)}catch(e){_self.showDbFilterIcon=!1;
//dont break dashboard loading if any issue with filter,just hide icon
}_self.loading=!1,_self.setTitle(_self.fullScrnHeader)}))}},filterTheDashboard:function(children){return"myworkload"===this.dashboardLink?children.filter((function(rt){var widget=rt.widget;if("static"!==widget.type||!widget.header||"My Open Workorders"!==widget.header.title)return rt})):children},prepareDashboardLayout:function(dashboardChildren){var self=this,children=dashboardChildren||this.dashboard.children;children=this.filterTheDashboard(children);var layout=[],tx=0;this.$route.meta&&this.$route.meta.dashboardlayout&&"mobile"===this.$route.meta.dashboardlayout&&(this.isMobileDashboard=!0);for(var i=0;i<children.length;i++){var type=children[i].widget.type;if("section"!=type){tx+children[i].widget.layout.width>96&&(tx=0);var x=children[i].widget.layout.x?children[i].widget.layout.x:0,y=children[i].widget.layout.y?children[i].widget.layout.y:0,mx=children[i].widget.mLayout.x?children[i].widget.mLayout.x:0,my=children[i].widget.mLayout.y?children[i].widget.mLayout.y:0;layout.push({i:children[i].widget.id+"",x:self.isMobileDashboard?mx:x,y:self.isMobileDashboard?my:y,w:self.isMobileDashboard?children[i].widget.mLayout.width:children[i].widget.layout.width,h:self.isMobileDashboard?children[i].widget.mLayout.height:children[i].widget.layout.height,widget:children[i].widget,mx:mx,my:my,wx:x,wy:y,mw:children[i].widget.mLayout.width,mh:children[i].widget.mLayout.height,ww:children[i].widget.layout.width,wh:children[i].widget.layout.height}),tx+=children[i].widget.layout.width}}
//self.dashboardLayout = layout
var dashboardLayout=this.getPrintLayout(layout);return dashboardChildren||(this.dashboardLayout=dashboardLayout),dashboardLayout},getPrintLayout:function(dashboardLayout){if(this.isPrinting){dashboardLayout.sort((function(a,b){return a.y-b.y||a.x-b.x}));var lastY=0,factor=0,printLayout=[],listTotalHeight=0,skipNextWidget=!1;this.listWidgets=[];for(var totalMoved=0,_gridColumn=this.gridColumn,_printPageSize=this.printPageSize,clonedLayout=this.$helpers.cloneObject(dashboardLayout),i=0;i<clonedLayout.length;i++){var layout=clonedLayout[i];if(skipNextWidget)skipNextWidget=!1;else{var x=layout.x,y=layout.y,h=layout.h,w=layout.w,initalY=y;y-=listTotalHeight;var isListWidget="view"===layout.widget.type;y+=totalMoved;var ty=y+h;if(factor=Math.ceil(y/_printPageSize)*_printPageSize,h<_printPageSize&&ty>factor&&y!=factor){var dummyHeight=factor-y+factor/_printPageSize+4;isListWidget||(totalMoved+=dummyHeight),printLayout.push({i:"dummy"+initalY,x:x,y:y,w:_gridColumn-x,h:dummyHeight,widget:{type:"dummy"},factor:factor}),y=factor}else if(isListWidget)if(w<90){var nextLayout=clonedLayout[i+1];!nextLayout||"view"!==nextLayout.widget.type||nextLayout.y!==initalY&&nextLayout.y+nextLayout.h!==initalY+h?printLayout.push({i:"dummylist"+y,x:x,y:y,w:_gridColumn-x,h:h,widget:{type:"dummy"},factor:factor}):(listTotalHeight=h>nextLayout.h?h:nextLayout.h,skipNextWidget=!0,this.listWidgets.push(nextLayout))}else listTotalHeight+=h;layout.y=y,layout.factor=factor,isListWidget?this.listWidgets.push(layout):(y+h>lastY&&(lastY=y+h),printLayout.push(layout))}}return printLayout}return dashboardLayout},prepareTabWidgetForPrinting:function(tabs){var _this2=this,promises=[];this.dashboardTabLoading=!0,tabs.forEach((function(tab){var promise=_this2.$http.get("/dashboard/getTabWidgets?dashboardTabId="+tab.id).then((function(response){if(response.data.dashboardTabContext){var dashboard={tabId:tab.id,sequence:tab.sequence,tabName:tab.name,lastY:0,children:response.data.dashboardTabContext.clientWidgetJson,layout:_this2.prepareDashboardLayout(response.data.dashboardTabContext.clientWidgetJson)};
/* dashboard.children.forEach(child => {
              let childY = child.widget.layout.y + child.widget.layout.height
              if (childY > dashboard.lastY) {
                dashboard.lastY = childY
              }
            }) */_this2.printTabLayout.push(dashboard)}}));promises.push(promise)})),Promise.all(promises).finally((function(){_this2.printTabLayout.sort((function(a,b){return a.sequence-b.sequence})),
/* let children = [...dashboards[0].children]
        let lastY = 0
        this.prepareDashboardLayout(children)
        for (let i = 1; i < dashboards.length; i++) {
          lastY += dashboards[i - 1].lastY + 5
          this.prepareDashboardLayout(dashboards[i].children)
          dashboards[i].children.forEach(child => {
            child.widget.layout.y += lastY
          })
          children.push(...dashboards[i].children)
        } */
// this.$set(this.dashboard, 'children', this.printTabLayout[0].children)
//this.prepareDashboardLayout()
_this2.dashboardTabContexts=null,_this2.dashboardTabLoading=!1,_this2.dashboardLayout=_this2.printTabLayout[0].layout}))},saveEdit:function(){for(var self=this,dashboardWidgets=[],i=0;i<self.dashboardLayout.length;i++){var gridItem=self.dashboardLayout[i];dashboardWidgets.push({id:gridItem.widget.id,type:gridItem.widget.type,layoutWidth:gridItem.w,layoutHeight:gridItem.h,order:i+1,xPosition:gridItem.x,yPosition:gridItem.y})}for(var dashboardObj={dashboardMeta:{id:self.dashboard.id,dashboardName:self.dashboard.label,linkName:self.dashboardLink,dashboardWidgets:dashboardWidgets}},_i3=0;_i3<self.removeChartList.length;_i3++)self.chartDeleted=!1,self.$http.post("/dashboard/deleteWidgetFromDashboard",self.removeChartList[_i3]).then((function(response){self.chartDeleted=!0}));self.chartDeleted&&self.$message({message:"Dashboard Deleted successfully!",type:"success"}),self.$http.post("/dashboard/update",dashboardObj).then((function(response){self.$message({message:"Dashboard updated successfully!",type:"success"}),self.$router.push(self.$route.path)}))},cancelEdit:function(){location.reload(),this.$router.push(this.$route.path)},handleAddWidget:function(widgetType){"chart"===widgetType?this.$refs.newChartWidget.open():"list"===widgetType?this.$refs.newListWidget.open():"map"===widgetType?this.$refs.newMapWidget.open():"static"===widgetType?this.$refs.newStaticWidget.open():"web"===widgetType&&this.$refs.newWebWidget.open()},deleteChart:function(data){this.removeChartList.push(data);var obj=this.dashboardLayout.find((function(r){return r.widget.id===data.widgetId}));if(obj){var index=this.dashboardLayout.indexOf(obj);this.dashboardLayout.splice(index,1)}},loadDashboardTabWidgets:function(){var _this3=this;if(this.dashboardTabId){this.dashboardTabLoading=!0,this.clearDashboardFilters(),this.showDashboardFilterBar=!1;var dashboardTabFilter=null;this.$http.get("/dashboard/getTabWidgets?dashboardTabId="+this.dashboardTabId).then((function(response){if(response.data.dashboardTabContext){var dashboard=response.data.dashboardTabContext.clientWidgetJson;dashboardTabFilter=response.data.dashboardTabContext.dashboardFilter,_this3.$set(_this3.dashboard,"children",dashboard),_this3.prepareDashboardLayout(),_this3.$emit("dashboardobj",_this3.dashboard),_this3.$nextTick((function(){_this3.$emit("dashboardLoaded",self.dashboard)}))}else _this3.$route.replace(_this3.$route.path);_this3.initializeDashboardFilters(dashboardTabFilter),_this3.dashboardTabLoading=!1})).catch((function(error){_this3.dashboardTabLoading=!1}))}},expand:function(folder){folder.expand=!folder.expand},changeDashboardTabId:function(id){id&&id>0&&this.$router.replace({query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.$route.query),{},{tab:id})})},openGraphicsFolder:function(){var self=this;for(var key in self.dashboardTabContexts)if(self.dashboardTabId===self.dashboardTabContexts[key].id&&self.dashboardTabContexts[key].childTabs&&(self.dashboardTabContexts[key].expand=!0),self.dashboardTabContexts[key].childTabs){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(self.dashboardTabContexts[key].childTabs);try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;self.dashboardTabId===child.id&&(self.dashboardTabContexts[key].expand=!0)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},
/* Dashboard filter */editFromDropDown:function(){this.showDashboardFilterBar=!0,this.$refs["dbFilterContainer"].enterEditMode()},handleDbFilterConfigSaved:function(payload){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this4.showDashboardFilterWidgetConfigDialog=!1,_this4.filterEditMode=!1,_context.next=4,api/* API */.bl.post("v2/dashboardFilter/update",payload);case 4:_yield$API$post=_context.sent,_yield$API$post.data,error=_yield$API$post.error,error&&_this4.$message.error(error),_this4.loadDashboard();case 9:case"end":return _context.stop()}}),_callee)})))()},handleTimelineFilterChange:function(value){this.persistDbTimelineFilter(value),this.dbTimelineFilter=value},handleDbUserFilterChange:function(value){this.persistDbUserFilters(value.filterModel),this.dbUserFilters=value.filterJson,this.setCustomScriptFilters(value.filterModel)},setTabName:function(){var tabId=this.$getProperty(this.$route,"query.tab");for(var tabs in this.dashboardTabContexts)this.dashboardTabContexts[tabs].id==tabId&&(this.tabName=this.dashboardTabContexts[tabs].name);return this.tabName}/* Dashboard filter */}},dashboard_DashboardViewervue_type_script_lang_js=DashboardViewervue_type_script_lang_js,DashboardViewer_component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardViewervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardViewer=DashboardViewer_component.exports},
/***/146040:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DashboardFilterWidgetConfigDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/dashboard-filters/DashboardFilterWidgetConfigDialog.vue?vue&type=template&id=aaf9149a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"db-widget-filter-manager"},[_c("el-dialog",{staticClass:"db-widget-filter-manager-dialog",attrs:{visible:_vm.visibility,"show-close":!1,"append-to-body":!0,title:"Dashboard Filters",width:"35%"}},[_c("div",{staticClass:"body"},[_c("el-checkbox",{staticClass:"mB20",staticStyle:{border:"none"},attrs:{label:"Exclude widget from dashboard filters"},model:{value:_vm.checkBoxModel,callback:function($$v){_vm.checkBoxModel=$$v},expression:"checkBoxModel"}}),"view"==_vm.widget.type?_c("div",{staticClass:"timeline-filter-mapping"},[_c("div",{staticClass:"mB10 exlude-filter-text"},[_vm._v(" Apply timeline filter to ")]),_c("el-select",{staticClass:"fc-input-full-border-h35",attrs:{disabled:_vm.checkBoxModel,loading:_vm.loadingDateFields,"loading-text":"loading",clearable:""},model:{value:_vm.selectModel,callback:function($$v){_vm.selectModel=$$v},expression:"selectModel"}},_vm._l(_vm.dateFields,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.displayName,value:option.name}})})),1)],1):_vm._e()],1),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveFilterConfig}},[_vm._v("Done")])],1)])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),utility_methods=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(773258)),field=__webpack_require__(815872),api=__webpack_require__(32284),DashboardFilterWidgetConfigDialogvue_type_script_lang_js={components:{},props:["visibility","widget"],created:function(){var widget=(0,utility_methods/* deepCloneObject */.kh)(this.widget),_widget$widgetSetting=widget.widgetSettings,checkBoxModel=_widget$widgetSetting.excludeDbFilters,selectModel=_widget$widgetSetting.dateField;this.checkBoxModel=checkBoxModel,this.selectModel=selectModel,"view"==this.widget.type&&
//for list widget , need to manually map date field
this.loadFields()},data:function(){return{checkBoxModel:null,selectModel:null,dateFields:[],loadingDateFields:!1}},methods:{loadFields:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loadingDateFields=!0,_context.next=3,api/* API */.bl.get("v2/modules/meta/".concat(_this.widget.dataOptions.moduleName));case 3:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(_this.$message.error("Error loading meta fields"),_this.loading):_this.dateFields=data.meta.fields.filter((function(e){return(0,field/* isDateTypeField */.S6)(e)})),_this.loadingDateFields=!1;case 8:case"end":return _context.stop()}}),_callee)})))()},closeDialog:function(){this.$emit("update:visibility",!1)},saveFilterConfig:function(){var widgetSettings={excludeDbFilters:this.checkBoxModel,dateField:this.selectModel};this.$emit("widgetFilterConfigChange",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.widget),{},{widgetSettings:widgetSettings}))}}},dashboard_filters_DashboardFilterWidgetConfigDialogvue_type_script_lang_js=DashboardFilterWidgetConfigDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(dashboard_filters_DashboardFilterWidgetConfigDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardFilterWidgetConfigDialog=component.exports},
/***/750787:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PopupView}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/PopupView.vue?vue&type=template&id=8c77bf8a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.link&&"control"===_vm.link.type?_c("SetReadingPopup",{attrs:{saveAction:_vm.onSetControlValue,closeAction:_vm.resetControlValue,recordId:_vm.link.resourceId,fieldId:_vm.link.fieldId,groupId:_vm.link.groupId,recordName:""}}):_vm.link?_c("el-dialog",{attrs:{"custom-class":"f-popup-view",top:"0%",visible:_vm.showDialog},on:{"update:visible":function($event){_vm.showDialog=$event}}},[[_c("span",{staticStyle:{"font-size":"18px","font-weight":"500"},attrs:{slot:"title"},slot:"title"},[_vm._v(" "+_vm._s(_vm.popupTitle?_vm.popupTitle:"Loading...")+" ")]),"url"===_vm.link.type?_c("iframe",{staticClass:"f-popup-iframe",staticStyle:{border:"0px"},attrs:{src:_vm.link.url,width:"100%",height:"100%"}}):_vm._e(),"report"===_vm.link.type&&_vm.link.newReport&&[1,4].includes(_vm.link.newReport.type)?[_c("div",{staticClass:"content analytics-txt",staticStyle:{cursor:"pointer",color:"rgb(57, 178, 194)","font-size":"13px","text-align":"right","font-weight":"500","margin-right":"20px"},on:{click:_vm.openInAnalytics}},[_vm._v(" Go to Analytics "),_c("img",{staticStyle:{width:"13px",height:"9px"},attrs:{src:__webpack_require__(862620)}})]),_c("f-new-report",{attrs:{id:parseInt(_vm.link.reportId),qs:_vm.link.qs,hideChartSettings:!0,dbFilterJson:_vm.link.dbFilterJson,dbTimelineFilter:_vm.link.dbTimelineFilter},on:{reportLoaded:_vm.reportLoaded}})]:_vm._e(),"pivot"===_vm.link.type?[_c("div",{staticClass:"h100"},[_c("pivot-table-wrapper",{attrs:{reportId:_vm.link.reportId,dbFilterJson:_vm.link.dbFilterJson,dbTimelineFilter:_vm.link.dbTimelineFilter}})],1)]:_vm._e(),"report"===_vm.link.type&&_vm.link.newReport&&2===_vm.link.newReport.type?_c("module-new-report",{attrs:{module:_vm.link.newReport.module.name,id:parseInt(_vm.link.reportId),qs:_vm.link.qs,dbFilterJson:_vm.link.dbFilterJson,dbTimelineFilter:_vm.link.dbTimelineFilter,loadImmediately:!0},on:{reportLoaded:_vm.reportLoaded}}):_vm._e(),"dashboard"===_vm.link.type?_c("dashboard-viewer",{attrs:{currentDashboard:_vm.dashboard}}):_vm._e(),"graphics"===_vm.link.type&&_vm.link.graphicsContext?_c("f-graphics-builder",{attrs:{graphicsContext:_vm.link.graphicsContext,readonly:"true"}}):"graphics"===_vm.link.type?_c("f-graphics-builder",{attrs:{defaultAsset:_vm.link.assetId,graphicsContext:{id:_vm.link.graphicsId},readonly:"true"}}):_vm._e(),"trend"===_vm.link.type?[_c("div",{staticClass:"content analytics-txt",staticStyle:{cursor:"pointer",color:"rgb(57, 178, 194)","font-size":"13px","text-align":"right","font-weight":"500","margin-right":"20px"},on:{click:_vm.openSelectedReadingInAnalytics}},[_vm._v(" Go to Analytics "),_c("img",{staticStyle:{width:"13px",height:"9px"},attrs:{src:__webpack_require__(862620)}})]),_c("f-new-analytic-report",{attrs:{config:_vm.link.analyticsConfig},on:{"update:config":function($event){return _vm.$set(_vm.link,"analyticsConfig",$event)}}})]:_vm._e()]],2):_vm._e()},staticRenderFns=[],FNewReport=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(737960),__webpack_require__(228436),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(862423)),DashboardViewer=__webpack_require__(328917),ModuleNewReport=__webpack_require__(518999),SetReadingValue=__webpack_require__(681121),JumpToHelper=__webpack_require__(921466),PivotTableWrapper=__webpack_require__(302347),router=__webpack_require__(329435),PopupViewvue_type_script_lang_js={name:"PopupView",components:{FNewReport:FNewReport/* default */.Z,DashboardViewer:DashboardViewer["default"],ModuleNewReport:ModuleNewReport/* default */.Z,SetReadingPopup:SetReadingValue/* default */.Z,FNewAnalyticReport:function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,794925))},FGraphicsBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(99751),__webpack_require__.e(11801),__webpack_require__.e(64687),__webpack_require__.e(97315)]).then(__webpack_require__.bind(__webpack_require__,264687))},PivotTableWrapper:PivotTableWrapper/* default */.Z},mixins:[JumpToHelper/* default */.Z],data:function(){return{showDialog:!1,link:null,dashboard:null,report:null}},watch:{showDialog:function(){this.showDialog||this.closePopup()}},computed:{popupTitle:function(){if(this.link){if("url"===this.link.type)return this.link.alt&&this.link.alt.trim()?this.link.alt:this.link.url;if("dashboard"===this.link.type)return this.dashboard?this.dashboard.dashboardName:"";if("report"===this.link.type)return this.report?this.report.report.name:"";if("pivot"===this.link.type)return this.link.newReport.name;if(this.link.title)return this.link.title}return"Popup View"}},methods:{openPopup:function(link){this.showDialog=!0,this.link=link,"dashboard"===this.link.type&&this.loadDashboard(this.link.dashboardId)},loadDashboard:function(linkName){var dashboardLink=linkName.split("/")[0],siteId=null,buildingId=null;linkName.split("/").length>1&&("buildingdashboard"===dashboardLink?buildingId=linkName.split("/")[1]:"sitedashboard"===dashboardLink&&(siteId=linkName.split("/")[1]));var url="/dashboard/"+dashboardLink+"?moduleName=energydata";siteId?url+="&siteId="+siteId:buildingId&&(url+="&buildingId="+buildingId);var self=this;self.$http.get(url).then((function(response){self.dashboard={id:response.data.dashboardJson[0].id,dashboardName:response.data.dashboardJson[0].label,linkName:dashboardLink,moduleName:"energydata",buildingId:buildingId,siteId:siteId,readOnly:!1,screenSetting:null}}))},onSetControlValue:function(readingObj){this.link&&this.link.onSetControlValue&&this.link.onSetControlValue(readingObj),this.closePopup()},resetControlValue:function(readingObj){this.link&&this.link.resetControlValue&&this.link.resetControlValue(readingObj),this.closePopup()},openSelectedReadingInAnalytics:function(){this.link&&this.link.analyticsConfig.dataPoints&&this.link.analyticsConfig.dataPoints.length&&(this.jumpReadingsToAnalytics(this.link.analyticsConfig.dataPoints,null,null,null),this.closePopup())},openInAnalytics:function(){if(this.report){var path,_ref=this.report||{},report=_ref.report,filters=_ref.filters,_ref2=report||{},id=_ref2.id,analyticsType=_ref2.analyticsType,_ref3=filters||{},xCriteriaMode=_ref3.xCriteriaMode;if((0,router/* isWebTabsEnabled */.tj)()){var ANALYTIC_BUILDING=router/* pageTypes */.As.ANALYTIC_BUILDING,ANALYTIC_PORTFOLIO=router/* pageTypes */.As.ANALYTIC_PORTFOLIO,ANALYTIC_SITE=router/* pageTypes */.As.ANALYTIC_SITE,HEAT_MAP=router/* pageTypes */.As.HEAT_MAP,TREE_MAP=router/* pageTypes */.As.TREE_MAP,REGRESSION=router/* pageTypes */.As.REGRESSION,pathMap={1:xCriteriaMode?ANALYTIC_PORTFOLIO:ANALYTIC_BUILDING,3:HEAT_MAP,4:REGRESSION,6:ANALYTIC_SITE,7:TREE_MAP},pageType=pathMap[analyticsType]||ANALYTIC_BUILDING,_ref4=(0,router/* findRouteForTab */.OD)(pageType)||{},name=_ref4.name;name&&this.$router.push({name:name,query:{reportId:id}})}else{switch(analyticsType){case 1:path=xCriteriaMode?"portfolio":"building";break;case 3:path="heatmap";break;case 4:path="regression";break;case 6:path="site";break;case 7:path="treemap";break;default:path="building"}path="/app/em/analytics/"+path+"?reportId="+id,this.$router.push({path:path})}}this.closePopup()},closePopup:function(){this.showDialog=!1,this.link=null,this.dashboard=null,this.report=null},reportLoaded:function(reportObj,resultObj){this.report=resultObj}}},components_PopupViewvue_type_script_lang_js=PopupViewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PopupViewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PopupView=component.exports},
/***/641697:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/emirates_logo.ccd153eb.png";
/***/},
/***/851395:
/***/function(module){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAeCAYAAADnydqVAAAAAXNSR0IArs4c6QAABuxJREFUaAXtmguIVVUUhp2UTC211JLCHtODEgo0S8fAzNDCRs2yhyWGZFhSmmkvMp2swAzKqAzthZqZkoVOhSmpmCliZlBaaGVqpKk4mc/Smr7/du9l3zNrn3vOmRm9Q7Pgn733v9Zee+3nOWffKWrwP5fKDs9UWkNQtG5skcXH4UrKl5u+V/XpVm3fUeM4wTKsrKxsA0aAeWAj2AOWWLb1XGGPQCM3PCZRK+tRMB6c5OrI59gGdP+LIuPTjY5eanR2b1FR0TsGf9yp4KRNIqIxxz2qwg3gFkK73wjvB7iCnODsEc3q7EiQo43g66k6PALZCaYP94Fj9vCvw2NWN0NnB28ClvwJ+TzoVTd7VnNRMwYvWwMEt6nmWqlZT+4zuJ3H9VReIB726OrpAh+B1BHNCmxCnI09sa738PV0HRiBRkzuZ8TZMCTWB7G5Na3vy24+YNli0xr+dlAKLgCtQAX4CSwAM6lbgV0X8s8CSwZhs91SuBw+SijfAK4GZ4LTwC6wGai9leA9fB0h9Qp+nkDZwzDYQN0HDD7WOwr+78LHYMPPPvzfaPBVKHycB9kPKE6Nq8ZZG3M3+BksBQvw9x1pVcFBHGkR9EDlIjAK/J7H0Q70fUBpiF1x0L9bpl4nsCykvqvaSmEk0OlkCrrZbgUnv8qqgD7WMxj7Msenm91j+Xc5jM8Fs8BRt6In/w/8fNDe9aG8VkJiweGJVJ4FXgBVJj/g+AzKH4C+AT5SkbaGYvgF0K6NInqnmAwWUrdZlAqFYkO8/YllHbgDhJ2umZB1smhc11B3SIZUWq0Jpv40MFCOIope6u6JaJs1I+hBFF4HWlBxRbdP5fiwdnJlXGe1bU+cukx5H7RM0FZT6ryFj3szdRNPME70fBFqVWhHx44mtzpyDZUnGg608gtG6GsHgpkJEs9LujOv4Et9Tt0vP06qN+gyYImO1TVpxWGlVNZOejrN+ZJvUOhI1UvZ5UBHa5IBnUC94L04VEoO8XcO0HF2FugDLgGWDCHuJ3kZ+cNSFgj3InFoLnzyKQq9H+jk6Qx6A0t0rE9OL5jUhDWj4JO7gx4wHOgzhj8EhoGcyaTcHWwBYVLstoVhO6AXCEt2QnYK2DeBW20Zp7mRAfuCeckivpKQuPei09dJjsD1BLtD6pXqmZhErguppF0yNaiHW0Yg+oxaAaIeQT2xzVkojt+J+PzSKTegrMXVC+58l3fye518oWV1+vhkLH37KKiEW0x/H4KfHtSly4knuMTjcCu8jhlTCGgVAc1FqYmOIjqGLNER9YaloA1N4leWrsC5qzzx6Xt3ikenRT2DMR2PPuf0S9t3jbqTgv71yWPJ1zT4t6VwuDiDf7pTz83uoJ2aeJZqoRSK+Mb0+whj6rttbBt7glktOjKbe0Zls4d36S1uIU++hUf/m4ePS/uO/7h+asLe91m0LYJzn03L2BPMatKq3+9p9GwP79LnuIU8ed8z07fa87iroi6kHVxRJbr/iChjqi8ISypiT3Day07LG9xl6R3uUafojmHKgM7XTlvaOSVgm6QYdwfHtY8T03aP8cX0taFHl6HbZzKBdHvSCV4dcJQp6u01e4uSITMpgV5JPvPDRYYOS33taKDNGzHaaA46eFAc1lgEXW3u+OWe9vWjzQiPTncSGs8LPfoVSSd4kceh6Ek0qjvUHIHrCjEHxGlzMfa+QX1Mk+g2Qlm+ZwC9yFno7donyNfmDi4PiWcCfesb1MPpl7mXgrxTLk/6HTwXJ88B61l4Mrx+BdHPbbrJOgh0k3U9iDO5+gTYhp8PqXcTCEobiM/RzybVZOq2awDQQrJEz7i3LUUhcPR1LX1ZSCwap6BoTPVr0Sekukc4DK4A2r2+41tjsijRBBOMLhQm4OBV4BOtLqG6Mg4H+u23seFIvxINNXiLmkLcByxFDM53msRwEWo6Gq1+HGnqsdIJFOUU0qfqKPqbOtI8vsJpKk/BYl64lan9y2Q9JO2sRzXMo45KK86yqMbHy46+bqDt20C+u4R8IQ7H13IZxToyDa+D4cKeHcEqOyEeCZL5ygQ7HZvh4Eg+W0M/H24gPo4auoKjiFNXkv3AngTB6egeio9pmbrVmmAcHcRRf1AGDoEwWYeyO/gxzMino63X0HUHvjfrYFXddI0BA6ibZGEE/R2zMvF+TGN6gXwXRN3N+qWpM3XfJM1K5hksJ0uzbG7m19xibgmHqvsUz2Q51o4uBcXgVKAd+y1QoKn/kcKuBXlfW6GLhLZWUrcLPnqQqh09r/SR3wpo9aq9tWARmIP9ftIw0fFvxaKj0pKNkJb9L5Yx3GaP/T6PfZYm9q0U7qSv40hvBteCi0BroHnbBbaAJWA+9nqpqiL/Auu/eLYu2+GiAAAAAElFTkSuQmCC";
/***/},
/***/546518:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/flight.457991c1.png";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/250.js.map