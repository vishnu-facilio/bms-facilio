"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[75494,32686,80865,53021],{
/***/42525:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/approval/ApprovalBar.vue?vue&type=template&id=4fea8923&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:["sidebar-loader",(_vm.loading||_vm.isSaving)&&"on"]}),_vm.loading?_c("div",{staticClass:"d-flex approval-bar"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex approval-bar"},[_c("div",{staticClass:"approval-desc mR30 f14"},[_vm.isRejected?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" "+_vm._s(_vm.$t("panel.was"))+" "),_c("span",{staticClass:"bold",staticStyle:{color:"#dd7171"}},[_vm._v(_vm._s(_vm.$t("panel.rejected")))]),_vm._v(" for this "+_vm._s(_vm.moduleDisplayName||_vm.moduleName)+". "),_vm.resendApproval?[_c("span",[_vm._v("You can")]),_vm.canShowEdit?[_c("span",{staticClass:"mL5"},[_vm._v("either")]),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.$emit("onEdit")}}},[_vm._v(" edit ")])]),_c("span",{staticClass:"mL5"},[_vm._v("or")])]:_vm._e(),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.resendApproval)}}},[_vm._v(" resend ")])]),_c("span",{staticClass:"mL5"},[_vm._v("for approval.")])]:_vm._e()]:_vm.hasApprovalList&&!_vm.hideApprovers?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending from "),_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.approvers[0].name))]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"mL5 approvers-more-icon"},[_vm._v(" +"+_vm._s(_vm.approvers.length-1)+" ")])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApproverTypeAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()]:(_vm.$validation.isEmpty(_vm.transitions),[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending ")])],2),_vm.$validation.isEmpty(_vm.transitions)?_vm._e():_c("div",{staticClass:"approval-links text-uppercase f12 bold"},[_c("div",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_vm.approveTransition?_c("a",{class:["link-approve mR15",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.approveTransition)}}},[_c("inline-svg",{attrs:{src:"tick-sign",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.approveTransition.name)+" ")],1):_vm._e(),_vm.rejectTransition?_c("a",{class:["link-reject",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.rejectTransition)}}},[_c("inline-svg",{attrs:{src:"svgs/close",iconClass:"icon icon-xxs"}}),_vm._v(" "+_vm._s(_vm.rejectTransition.name)+" ")],1):_vm._e()])])]),_vm.canShowForm?[_c("TransitionForm",{attrs:{moduleName:_vm.selectedTransition.moduleName,recordId:_vm.record.recordId,formId:_vm.selectedTransition.formId,record:_vm.record,transition:_vm.selectedTransition,approvalRule:_vm.approvalRule,saveAction:_vm.saveAction,closeAction:_vm.closeStateFlowForm,isV3:_vm.isV3}})]:_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),ApprovalButtons=(__webpack_require__(689730),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(840889)),ApprovalForm=__webpack_require__(548127),ApprovalUserAvatar=__webpack_require__(400438),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),ApprovalBarvue_type_script_lang_js={extends:ApprovalButtons/* default */.Z,props:["hideApprovers","canShowEdit","canHideMsg"],components:{TransitionForm:ApprovalForm/* default */.Z,ApproverTypeAvatar:ApprovalUserAvatar/* default */.Z},data:function(){return{isSaving:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{transitions:function(){return(0,validation/* isEmpty */.xb)(this.stateTransitions)?[]:(0,toConsumableArray/* default */.Z)(this.stateTransitions).slice(0,2)},policyName:function(){return(0,validation/* isEmpty */.xb)(this.approvalRule)?"Approval":this.$getProperty(this.approvalRule,"name")},shouldCurrentUserApprove:function(){return!(0,validation/* isEmpty */.xb)(this.transitions)},hasApprovalList:function(){return!(0,validation/* isEmpty */.xb)(this.approvers)},approvalMeta:function(){return{approvalList:this.pendingApprovalList}},approvers:function(){var approvers=[];return this.pendingApprovalList.forEach((function(approver){var value=approver.value,type=approver.type;(0,validation/* isEmpty */.xb)(value)?"TENANT"===type?approvers.push({name:"Tenant",type:"TENANT"}):"VENDOR"===type&&approvers.push({name:"Vendor",type:"VENDOR"}):(0,validation/* isArray */.kJ)(value)?approvers.push.apply(approvers,(0,toConsumableArray/* default */.Z)(value)):approvers.push(value)})),approvers},isRejected:function(){return"Rejected"===this.$getProperty(this.currentState,"status")},shouldCreateModuleRecord:function(){return!1},shouldCreateNotes:function(){return!1},approveTransition:function(){return this.transitions.find((function(t){return"Approve"===t.name}))},rejectTransition:function(){return this.transitions.find((function(t){return"Reject"===t.name}))},resendApproval:function(){return this.transitions.find((function(t){return!["Approve","Reject"].includes(t.name)}))},moduleDisplayName:function(){var _this$metaInfo;return null===(_this$metaInfo=this.metaInfo)||void 0===_this$metaInfo?void 0:_this$metaInfo.displayName}}),methods:{showMessage:function(transition){
/* override */
var name=transition.name,action="";["Approve","Reject"].includes(name)?"Approve"===name?action="approved":"Reject"===name&&(action="rejected"):action="resent for approval",this.$message.success("".concat(this.moduleDisplayName||this.moduleName," was ").concat(action))},requestToSave:function(transition){var _this=this;this.isSaving=!0,this.startTransition(transition).finally((function(){return _this.isSaving=!1}))},saveAction:function(formData){return this.transitionToState(formData)},getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver},defaultResponseHandler:function(_ref,transition){var error=_ref.error,canShowForm=this.canShowForm;error?(!this.canHideMsg&&this.$message.error(error.message),this.$emit("onFailure",{error:error,transition:transition})):(canShowForm&&this.closeStateFlowForm(),this.fetchAvailableStates(),this.$emit("onSuccess",{error:error,transition:transition}),!this.canHideMsg&&this.showMessage(transition))}}},approval_ApprovalBarvue_type_script_lang_js=ApprovalBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(approval_ApprovalBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"4fea8923",null)
/* harmony default export */,ApprovalBar=component.exports},
/***/760218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilder.vue?vue&type=template&id=0dd0982f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showPage&&_vm.pagebuilderComponent?_c(_vm.pagebuilderComponent,_vm._b({tag:"component",attrs:{module:_vm.module},on:{forceOldPage:function($event){_vm.forceOld=!0}}},"component",_vm.$attrs,!1)):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),PageBuildervue_type_script_lang_js={props:["module"],data:function(){return{forceOld:!1,showPage:!1}},components:{NewPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(88506)]).then(__webpack_require__.bind(__webpack_require__,110570))},OldPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(23803),__webpack_require__.e(55246)]).then(__webpack_require__.bind(__webpack_require__,223803))}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!_this.$helpers.isLicenseEnabled("PAGE_BUILDER")){_context.next=4;break}return _context.next=4,_this.$store.dispatch("pagebuilder/loadNewPageEnabledModules");case 4:_context.next=8;break;case 6:_context.prev=6,_context.t0=_context["catch"](0);case 8:_this.$nextTick((function(){_this.showPage=!0}));case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({newPageEnabledModules:function(state){return state.pagebuilder.newPageEnabledModules}})),{},{pagebuilderComponent:function(){var newPageEnabledModules=this.newPageEnabledModules,module=this.module,forceOld=this.forceOld,isNew=(newPageEnabledModules||[]).includes(module),showNew=!forceOld&&(this.showNewPageBuilder||isNew);return showNew?"NewPageBuilder":"OldPageBuilder"},showNewPageBuilder:function(){var query=this.$route.query,_query$showNewPageBui=query.showNewPageBuilder,showNewPageBuilder=void 0!==_query$showNewPageBui&&_query$showNewPageBui;return!0===showNewPageBuilder||"true"===showNewPageBuilder}})},page_PageBuildervue_type_script_lang_js=PageBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilder=component.exports},
/***/400438:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalUserAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/approvals/components/ApprovalUserAvatar.vue?vue&type=template&id=443099a5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.hasUser?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_vm.fieldType?_c("avatarPopover",{attrs:{user:_vm.fieldTypeUserValue,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.fieldTypeUserValue,color:_vm.color}})],1)]):_c("div",{class:["icon-border",_vm.userTypeIcon[_vm.userType.type].background]},[_c("inline-svg",{class:["mT2",_vm.userTypeIcon[_vm.userType.type].marginLeft],attrs:{src:_vm.userTypeIcon[_vm.userType.type].icon,iconClass:"icon text-center fc-fill-path fill-path-white "+_vm.userTypeIcon[_vm.userType.type].iconSize}})],1)],1),_c("div",{staticClass:"flex-middle"},[_vm.$validation.isObject(_vm.typeLabel)?_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(" "+_vm._s(_vm.typeLabel.value)+"Â  "),_vm.typeLabel.type?_c("span",{staticClass:"text-fc-grey mL5"},[_vm._v(" ("+_vm._s(_vm.typeLabel.type)+") ")]):_vm._e()]):_c("span",{staticClass:"q-item-label d-flex flex-wrap user-type"},[_vm._v(" "+_vm._s(_vm.typeLabel)+" ")]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"approvers-more-icon"},[_vm._v("+"+_vm._s(_vm.approvers.length-1))])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApprovalUserAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()],1)])])},staticRenderFns=[],validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),User=__webpack_require__(426803),ApprovalUserAvatarvue_type_script_lang_js={name:"ApprovalUserAvatar",extends:User/* default */.Z,props:["userType","approvalMeta","approverObj"],computed:{hasUser:function(){var id=this.$getProperty(this.userObj,"id");return!(0,validation/* isEmpty */.xb)(id)},fieldType:function(){var _this$userType=this.userType,type=_this$userType.type,value=_this$userType.value;return"FIELD"===type&&!(0,validation/* isEmpty */.xb)(value)},fieldTypeUserValue:function(){var fieldType=this.fieldType,userType=this.userType,value=userType.value;return fieldType?(0,validation/* isArray */.kJ)(value)&&!(0,validation/* isEmpty */.xb)(value)?value[0]:value:null},fieldName:function(){var approverObj=this.approverObj,approvalMeta=this.approvalMeta,_ref=approvalMeta||{},_ref$approvalList=_ref.approvalList,approvalList=void 0===_ref$approvalList?[]:_ref$approvalList;if(!(0,validation/* isEmpty */.xb)(approvalList)){var displayName=approvalList.find((function(list){return list.approverGroup===approverObj.approverGroup})).field.displayName;return displayName}return null},color:function(){return-1!==this.userObj.id||this.fieldType?"":this.group?"#c3c3c3":"#e3e3e3"},userTypeIcon:function(){var userIcon={TENANT:{icon:"svgs/tenant",background:"green",iconSize:"icon-lg",marginLeft:"mL4"},VENDOR:{icon:"svgs/apps/vendor",background:"orange",iconSize:"icon-lg",marginLeft:"mL4"},ROLE:{icon:"svgs/role",background:"yellow",iconSize:"icon-xl",marginLeft:"mL3"},GROUP:{icon:"svgs/team",background:"blue",iconSize:"icon-xl",marginLeft:"mL3"},FIELD:{icon:"user",background:"brown",iconSize:"icon-lg",marginLeft:"mL4"}};return userIcon},typeLabel:function(){var _this$userType2=this.userType,type=_this$userType2.type,value=_this$userType2.value;if("USER"===type)return{value:this.userObj.name,type:null};if("TENANT"===type)return value?{value:value.name,type:"Tenant"}:"Tenant";if("VENDOR"===type)return value?{value:value.name,type:"Vendor"}:"Vendor";if("FIELD"===type){var _ref2=this.fieldTypeUserValue||{},name=_ref2.name;return{value:name||this.fieldName,type:"Field"}}return value.name},approvers:function(){var _this$userType3=this.userType,type=_this$userType3.type,value=_this$userType3.value;return"USER"===type?[this.userObj]:(0,validation/* isArray */.kJ)(value)?value:[value]}},methods:{getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver}}},components_ApprovalUserAvatarvue_type_script_lang_js=ApprovalUserAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ApprovalUserAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"443099a5",null)
/* harmony default export */,ApprovalUserAvatar=component.exports},
/***/725624:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return JPBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/jobplan/JPBanner.vue?vue&type=template&id=7de009a7&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"jp-banner-container"},[_c("div",{class:["sidebar-loader",_vm.isLoading&&"on"]}),_vm.isLoading?_c("div",{staticClass:"d-flex jp-banner"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex jp-banner"},[_c("i",{staticClass:"fa fa-exclamation-triangle pR5 pL10",attrs:{"aria-hidden":"true"}}),_c("div",{staticClass:"survey-bar-helper mR20 pL5"},[_vm._v(" "+_vm._s(_vm.bannerText)+" ")]),_c("el-button",{staticClass:"jp-bnnr-btn",on:{click:_vm.openWarningDialog}},[_vm._v(" "+_vm._s(_vm.buttonText)+" ")])],1),_vm.showDialog?_c("JPWarningDialog",{attrs:{showDialog:_vm.showDialog,dialogType:_vm.$t("jobplan.publish"),moduleName:_vm.moduleName,stateUpdating:_vm.stateUpdating},on:{closeDialog:_vm.closeDialog,saveAction:_vm.saveAction}}):_vm._e()],1)},staticRenderFns=[],JPWarningDialog=__webpack_require__(835002),pm_utils=__webpack_require__(195123),JPBannervue_type_script_lang_js={name:"JPBanner",props:["record","moduleName","isLoading","stateUpdating"],components:{JPWarningDialog:JPWarningDialog/* default */.Z},data:function(){return{showDialog:!1,isDisableDialog:!1}},computed:{recordStatus:function(){var publishStatus,record=this.record,moduleName=this.moduleName;return publishStatus="jobplan"===moduleName?this.$getProperty(record,"jpStatus",1):this.$getProperty(record,"pmStatus",1),pm_utils/* PUBLISHED_STATUS */.Iq[publishStatus]},isRecordDisabled:function(){var recordStatus=this.recordStatus;return"Disabled"===recordStatus},bannerText:function(){var moduleName=this.moduleName,isRecordDisabled=this.isRecordDisabled,bannerText="";return bannerText="jobplan"===moduleName?isRecordDisabled?this.$t("jobplan.clone_jp"):this.$t("jobplan.jobplan_not_published"):isRecordDisabled?this.$t("maintenance.pm.clone_pm"):this.$t("maintenance.pm.pm_not_published"),bannerText},buttonText:function(){var isRecordDisabled=this.isRecordDisabled;return isRecordDisabled?this.$t("jobplan.clone"):this.$t("jobplan.publish")}},methods:{openWarningDialog:function(){var isRecordDisabled=this.isRecordDisabled;isRecordDisabled?this.$emit("saveAction","Clone"):this.showDialog=!0},closeDialog:function(){this.showDialog=!1},saveAction:function(event){this.$emit("saveAction",event)}}},jobplan_JPBannervue_type_script_lang_js=JPBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(jobplan_JPBannervue_type_script_lang_js,render,staticRenderFns,!1,null,"7de009a7",null)
/* harmony default export */,JPBanner=component.exports},
/***/835002:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return JPWarningDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/jobplan/JPWarningDialog.vue?vue&type=template&id=dca5fbce&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container dialog-header-remove",attrs:{visible:_vm.showDialog,width:"35%","append-to-body":!0,"before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"height180 d-flex"},[_c("i",{staticClass:"fa fa-exclamation-triangle pR5 pL10",attrs:{"aria-hidden":"true"}}),_c("div",{staticClass:"d-flex flex-direction-column mL10 width100"},[_c("div",{staticClass:"dialog-heading"},[_vm._v(" "+_vm._s(_vm.dialogHeader)+" ")]),_c("div",{staticClass:"dialog-content mT15",domProps:{innerHTML:_vm._s(_vm.dialogContent)}})])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("agent.agent.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.stateUpdating},on:{click:_vm.saveDialog}},[_vm._v(_vm._s(_vm.buttonText))])],1)])},staticRenderFns=[],dialogHeaderHash=(__webpack_require__(634338),{jobplan:{Edit:"jobplan.edit_jp",Publish:"jobplan.publish_jp",Unpublish:"jobplan.unpublish_jp",Disable:"jobplan.disable_jp"},plannedmaintenance:{Edit:"maintenance.pm._edit_pm",Publish:"maintenance.pm.publish_pm",Unpublish:"maintenance.pm.unpublish_pm",Disable:"maintenance.pm.disable_pm"}}),dialogContentHash={jobplan:{Edit:"jobplan.edit_jp_content",Publish:"jobplan.publish_jp_content",Unpublish:"jobplan.unpublish_jp_content",Disable:"jobplan.disable_jp_content"},plannedmaintenance:{Edit:"maintenance.pm.edit_pm_content",Publish:"maintenance.pm.publish_pm_content",Unpublish:"maintenance.pm.unpublish_pm_content",Disable:"maintenance.pm.disable_pm_content"}},buttonTextHash={jobplan:{Edit:"jobplan.edit",Publish:"jobplan.publish",Unpublish:"jobplan.unpublish",Disable:"jobplan.disable"},plannedmaintenance:{Edit:"jobplan.edit",Publish:"jobplan.publish",Unpublish:"jobplan.unpublish",Disable:"jobplan.disable"}},JPWarningDialogvue_type_script_lang_js={props:["showDialog","dialogType","moduleName","stateUpdating","recordId"],computed:{dialogHeader:function(){var dialogType=this.dialogType,moduleName=this.moduleName,dialogHeader=this.$getProperty(dialogHeaderHash,"".concat(moduleName,".").concat(dialogType),"jobplan.edit");return this.$t("".concat(dialogHeader))},dialogContent:function(){var dialogType=this.dialogType,moduleName=this.moduleName,dialogContent=this.$getProperty(dialogContentHash,"".concat(moduleName,".").concat(dialogType),"jobplan.edit_content");return this.$t("".concat(dialogContent))},buttonText:function(){var dialogType=this.dialogType,moduleName=this.moduleName,buttonText=this.$getProperty(buttonTextHash,"".concat(moduleName,".").concat(dialogType),"jobplan.edit");return this.$t("".concat(buttonText))}},methods:{closeDialog:function(){this.$emit("closeDialog")},saveDialog:function(){var dialogType=this.dialogType;this.$emit("saveAction",dialogType)}}},jobplan_JPWarningDialogvue_type_script_lang_js=JPWarningDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(jobplan_JPWarningDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,"dca5fbce",null)
/* harmony default export */,JPWarningDialog=component.exports},
/***/915834:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return JobPlanSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/jobplan/JobPlanSummary.vue?vue&type=template&id=011a6d86&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{height:"auto"}},[_vm.loading?_c("div",{staticClass:"text-center width100 pT50 mT50"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_c("div",[_c("div",{staticClass:"fc__layout__align fc__asset__main__header pT10 pB10 pL15 pR20 fc-visibility-gicon-visible fc-wo-translate-icon",staticStyle:{width:"auto","align-items":"center !important","border-bottom":"none"}},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("div",{staticClass:"flex"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"wos-id mT7",attrs:{title:_vm.$t("common.header.back")},on:{click:_vm.back}},[_c("inline-svg",{staticClass:"vertical-middle mR5 mL3 pointer",attrs:{src:"arrow-pointing-to-left","data-position":"top",width:"14",height:"14"}})],1),_c("div",{staticClass:"jp-id"},[_vm._v(_vm._s(_vm.jobPlanTag))])]),_c("div",{staticClass:"jp-name pT10"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.publishedState,placement:"top"}},[_c("fc-icon",{staticClass:"pointer",attrs:{group:"files",name:_vm.iconTitle,color:_vm.iconColor}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"max-width500px textoverflow-ellipsis show mL10",attrs:{title:_vm.JobPlanSubject,"data-arrow":"true"}},[_vm._v(" "+_vm._s(_vm.JobPlanSubject)+" ")]),_vm.isStateFlowEnabled&&_vm.currentModuleState?_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.currentModuleState)+" ")]):_vm._e()],1)]),_c("div",{staticClass:"fR display-flex"},[_c("CustomButton",{staticClass:"p10",attrs:{record:_vm.jobPlan,moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY},on:{refresh:function($event){return _vm.loadJobPlan(!0)},onError:function(){}}}),_vm.isStateFlowEnabled?[_c("TransitionButtons",{key:_vm.jobPlanId,staticClass:"mR10",attrs:{moduleName:_vm.moduleName,record:_vm.jobPlan,disabled:_vm.isApprovalEnabled,buttonClass:"asset-el-btn"},on:{currentState:function(){},transitionSuccess:function($event){return _vm.loadJobPlan(!0)},transitionFailure:function(){}}})]:_vm._e(),_vm.isApprovalEnabled?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_c("ApprovalBar",{key:_vm.jobPlanId+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:_vm.moduleName,record:_vm.jobPlan,hideApprovers:_vm.shouldHideApprovers},on:{onSuccess:function($event){return _vm.loadJobPlan(!0)},onFailure:function(){}}})],1):_vm._e(),_vm.showJPBanner?_c("portal",{attrs:{to:"pagebuilder-fixed-top"}},[_c("JPBanner",{attrs:{record:_vm.jobPlan,moduleName:_vm.moduleName,isLoading:_vm.loading,stateUpdating:_vm.stateUpdating},on:{saveAction:_vm.saveAction}})],1):_vm._e(),_vm.isJobPlanDisabled?_vm._e():_c("el-dropdown",{staticClass:"mL10 fc-btn-ico-lg pointer",staticStyle:{"padding-top":"5px","padding-bottom":"5px"},attrs:{trigger:"click"},on:{command:function(action){return _vm.summaryDropDownAction(action)}}},[_c("span",{staticClass:"el-dropdown-link"},[_c("inline-svg",{attrs:{src:"menu",width:"16",height:"16"}})],1),_c("el-dropdown-menu",{staticClass:"p10",attrs:{slot:"dropdown",trigger:"click"},slot:"dropdown"},_vm._l(_vm.summaryButtonHash,(function(key,label){return _c("el-dropdown-item",{key:key,attrs:{command:key}},[_vm._v(_vm._s(label))])})),1)],1)],2)]),_vm.jobPlan?_c("page",{key:_vm.jobPlan.id,attrs:{module:_vm.moduleName,notesModuleName:_vm.notesModuleName,attachmentsModuleName:_vm.attachmentsModuleName,id:_vm.jobPlanId,isV3Api:!0,details:_vm.jobPlan,primaryFields:[]}}):_vm._e(),_vm.showDialog?_c("JPWarningDialog",{attrs:{showDialog:_vm.showDialog,dialogType:_vm.dialogType,moduleName:_vm.moduleName,stateUpdating:_vm.stateUpdating,recordId:_vm.jobPlanId},on:{closeDialog:_vm.closeDialog,saveAction:_vm.saveAction}}):_vm._e(),_vm.showVersionHistory?_c("JPVersionHistory",{attrs:{jobPlanId:_vm.jobPlanId},on:{closeDialog:_vm.closeDialog}}):_vm._e()],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),defineProperty=__webpack_require__(482482),objectSpread2=__webpack_require__(595082),api=(__webpack_require__(976801),__webpack_require__(689730),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(32284)),validation=__webpack_require__(990260),PageBuilder=__webpack_require__(760218),CustomButtonUtil=__webpack_require__(746095),CustomButton=__webpack_require__(623857),TransitionButtons=__webpack_require__(987612),ApprovalBar=__webpack_require__(42525),vuex_esm=__webpack_require__(420629),JPBanner=__webpack_require__(725624),JPWarningDialog=__webpack_require__(835002),JPVersionHistoryvue_type_template_id_d9508720_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container jp-version-dialog",attrs:{visible:!0,title:_vm.$t("jobplan.version_history"),width:"55%","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"version-history"},[_vm.isLoading?_c("div",{staticClass:"text-center width100 pT50 mT50"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"60"}})],1):_c("el-table",{ref:"version-history-table",staticStyle:{width:"100%"},attrs:{data:_vm.recordVersions,height:"100%","header-cell-style":_vm.headerStyle,"empty-text":_vm.$t("jobplan.no_version_available"),"row-class-name":_vm.activeRowClass}},[_c("el-table-column",{attrs:{label:_vm.$t("jobplan.version"),prop:"jobPlanVersion"}}),_c("el-table-column",{attrs:{label:_vm.$t("jobplan.publish_state"),prop:"jpStatus",width:"200"},scopedSlots:_vm._u([{key:"default",fn:function(template){return[_vm._v(" "+_vm._s(_vm.getPublishStatus(template.row))+" ")]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("jobplan.created_by"),prop:"sysCreatedBy",width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(template){return[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.getCreatedBy(template.row),"open-delay":600,placement:"top",disabled:_vm.canDisableTooltip(template.row)}},[_c("div",{staticClass:"truncate-text"},[_vm._v(" "+_vm._s(_vm.getCreatedBy(template.row))+" ")])])]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("jobplan.created_time"),prop:"sysCreatedTime",width:"200"},scopedSlots:_vm._u([{key:"default",fn:function(template){return[_vm._v(" "+_vm._s(_vm.getCreatedTime(template.row))+" ")]}}])}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{label:"",prop:""},scopedSlots:_vm._u([{key:"default",fn:function(template){return[_vm.canShowView(template.row)?_c("div",{staticClass:"visibility-hide-actions version-view d-flex",on:{click:function($event){return _vm.redirectToJobplan(template.row)}}},[_c("fc-icon",{staticClass:"mR5 mT4",attrs:{group:"navigation",name:"open-window",color:"#0074d1",size:"15"}}),_vm._v(" "+_vm._s(_vm.$t("jobplan.view"))+" ")],1):_vm._e()]}}])})],1)],1)])},JPVersionHistoryvue_type_template_id_d9508720_staticRenderFns=[],pm_utils=__webpack_require__(195123),router=__webpack_require__(329435),filters=__webpack_require__(273861),src_router=__webpack_require__(70630),Spinner=__webpack_require__(604947),JPVersionHistoryvue_type_script_lang_js={name:"JPVersionHistory",props:["jobPlanId"],data:function(){return{recordVersions:[],isLoading:!1}},components:{Spinner:Spinner/* default */.Z},created:function(){this.loadHistory()},computed:{headerStyle:function(){var style={"background-color":"#f7faff"};return style},moduleName:function(){return"jobplan"}},methods:{loadHistory:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var jobPlanId,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.isLoading=!0,jobPlanId=_this.jobPlanId,_context.next=4,api/* API */.bl.get("v3/jobPlan/versionHistory",{jobPlanId:jobPlanId});case 4:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this.$message.error(error.message||"Error Occured"):_this.recordVersions=data.result||[],_this.isLoading=!1;case 9:case"end":return _context.stop()}}),_callee)})))()},getPublishStatus:function(record){var _ref=record||{},jpStatus=_ref.jpStatus;return this.$getProperty(pm_utils/* PUBLISHED_STATUS */.Iq,"".concat(jpStatus),"---")},getCreatedTime:function(record){var _ref2=record||{},sysCreatedTime=_ref2.sysCreatedTime;return(0,validation/* isEmpty */.xb)(sysCreatedTime)?"---":(0,filters.formatDate)(sysCreatedTime)},getCreatedBy:function(record){var _ref3=record||{},sysCreatedBy=_ref3.sysCreatedBy;return this.$getProperty(sysCreatedBy,"name","---")},redirectToJobplan:function(record){var _ref4=record||{},group=_ref4.group,version=_ref4.jobPlanVersion,groupId=this.$getProperty(group,"id",null),moduleName=this.moduleName,route={};if(version="v".concat(version),(0,router/* isWebTabsEnabled */.tj)()){var _ref5=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref5.name;route={name:name,params:{viewname:"all",id:groupId},query:{version:version}}}else route={name:"jobPlanSummary",params:{moduleName:moduleName,viewname:"all",id:groupId},query:{version:version}};var _ref6=src_router/* default */.Z.resolve(route)||{},href=_ref6.href;(0,validation/* isEmpty */.xb)(href)||window.open(href,"_blank","noopener,noreferrer")},closeDialog:function(){this.$emit("closeDialog")},activeRowClass:function(_ref7){var row=_ref7.row,jobPlanId=this.jobPlanId,_ref8=row||{},id=_ref8.id;return jobPlanId===id?"current-record-version":""},canDisableTooltip:function(record){var createdBy=this.getCreatedBy(record);return(0,validation/* isEmpty */.xb)(createdBy)||"---"===createdBy},canShowView:function(record){var jobPlanId=this.jobPlanId,currentRecordId=this.$getProperty(record,"id",null);return jobPlanId!==currentRecordId}}},jobplan_JPVersionHistoryvue_type_script_lang_js=JPVersionHistoryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(jobplan_JPVersionHistoryvue_type_script_lang_js,JPVersionHistoryvue_type_template_id_d9508720_render,JPVersionHistoryvue_type_template_id_d9508720_staticRenderFns,!1,null,null,null)
/* harmony default export */,JPVersionHistory=component.exports,JobPlanSummaryvue_type_script_lang_js={name:"JobPlanSummary",data:function(){return{jobPlan:{},loading:!1,notesModuleName:"jobplannotes",attachmentsModuleName:"jobplanattachments",POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz,primaryFields:["jobPlanCategory","sysCreatedTime","sysCreatedBy","associatedPm"],showDialog:!1,dialogType:null,stateUpdating:!1,showVersionHistory:!1,jobPlanId:null}},components:{Page:PageBuilder/* default */.Z,CustomButton:CustomButton/* default */.Z,TransitionButtons:TransitionButtons/* default */.Z,ApprovalBar:ApprovalBar/* default */.Z,JPBanner:JPBanner/* default */.Z,JPWarningDialog:JPWarningDialog/* default */.Z,JPVersionHistory:JPVersionHistory},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatus"])),{},{moduleName:function(){return"jobplan"},shouldHideApprovers:function(){return!1},showJPBanner:function(){var jobPlan=this.jobPlan,_ref=jobPlan||{},jpStatus=_ref.jpStatus;return["Disabled","Unpublished","Pending Revision"].includes(pm_utils/* PUBLISHED_STATUS */.Iq[jpStatus])},publishText:function(){var _ref2=this||{},isJobPlanPublished=_ref2.isJobPlanPublished;return isJobPlanPublished?this.$t("maintenance.pm.unpublish"):this.$t("maintenance.pm.publish")},publishedState:function(){var jobPlan=this.jobPlan,_ref3=jobPlan||{},jpStatus=_ref3.jpStatus;return this.$getProperty(pm_utils/* PUBLISHED_STATUS */.Iq,"".concat(jpStatus),"published")},iconTitle:function(){var jobPlan=this.jobPlan,_ref4=jobPlan||{},jpStatus=_ref4.jpStatus;return this.$getProperty(pm_utils/* PUBLISHED_STATUS_ICON_HASH */.G9,"".concat(jpStatus),"published")},iconColor:function(){var iconTitle=this.iconTitle;return this.$getProperty(pm_utils/* PUBLISHED_STATUS_ICON_COLOR_HASH */.oL,"".concat(iconTitle),"published")},currentModuleState:function(){var moduleName=this.moduleName,jobPlan=this.jobPlan,currentStateId=this.$getProperty(jobPlan,"moduleState.id"),currentState=this.getTicketStatus(currentStateId,moduleName),_ref5=currentState||{},displayName=_ref5.displayName,status=_ref5.status;return(0,validation/* isEmpty */.xb)(displayName)?status||null:displayName},groupId:function(){var $route=this.$route,_ref6=$route||{},params=_ref6.params,_ref7=params||{},id=_ref7.id;return parseInt(id)},version:function(){var $route=this.$route,_ref8=$route||{},query=_ref8.query,version=this.$getProperty(query,"version","");return version=version.slice(1),parseInt(version)},jobPlanTag:function(){var groupId=this.groupId,version=this.version;return"#".concat(groupId," / v").concat(version)},JobPlanSubject:function(){var jobPlan=this.jobPlan;if(!(0,validation/* isEmpty */.xb)(jobPlan)){var _ref9=jobPlan||{},name=_ref9.name;return name}return"---"},moduleDisplayName:function(){return"Job Plan"},isJobPlanPublished:function(){var jobPlan=this.jobPlan;if(!(0,validation/* isEmpty */.xb)(jobPlan)){var _ref10=jobPlan||{},jpStatus=_ref10.jpStatus;return"Published"===pm_utils/* PUBLISHED_STATUS */.Iq[jpStatus]}return!1},canPublishJP:function(){var jobPlan=this.jobPlan;if(!(0,validation/* isEmpty */.xb)(jobPlan)){var _ref11=jobPlan||{},jpStatus=_ref11.jpStatus;return!["Published","Revised"].includes(pm_utils/* PUBLISHED_STATUS */.Iq[jpStatus])}return!1},isJobPlanDisabled:function(){var jobPlan=this.jobPlan;if(!(0,validation/* isEmpty */.xb)(jobPlan)){var _ref12=jobPlan||{},jpStatus=_ref12.jpStatus;return"Disabled"===pm_utils/* PUBLISHED_STATUS */.Iq[jpStatus]}return!1},isStateFlowEnabled:function(){var jobPlan=this.jobPlan,hasState=this.$getProperty(jobPlan,"moduleState.id"),isEnabled=this.$getProperty(this.moduleMeta,"module.stateFlowEnabled");return hasState&&isEnabled},isApprovalEnabled:function(){var jobPlan=this.jobPlan,_ref13=jobPlan||{},approvalFlowId=_ref13.approvalFlowId,approvalStatus=_ref13.approvalStatus;return!(0,validation/* isEmpty */.xb)(approvalFlowId)&&!(0,validation/* isEmpty */.xb)(approvalStatus)},summaryButtonHash:function(){var _objectSpread4,_objectSpread2,_objectSpread3,canPublishJP=this.canPublishJP,isJobPlanPublished=this.isJobPlanPublished,publishText=this.publishText,editJP=this.$t("common._common.edit"),reviseJP=this.$t("jobplan.revise_jp"),cloneJP=this.$t("jobplan._clone_jp"),disableJP=this.$t("jobplan.disable"),versionHistory=this.$t("jobplan.version_history"),buttons={};canPublishJP&&(buttons=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},buttons),{},(_objectSpread2={},(0,defineProperty/* default */.Z)(_objectSpread2,"".concat(editJP),"edit"),(0,defineProperty/* default */.Z)(_objectSpread2,"".concat(publishText),publishText),_objectSpread2)));isJobPlanPublished&&(buttons=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},buttons),{},(_objectSpread3={},(0,defineProperty/* default */.Z)(_objectSpread3,"".concat(reviseJP),reviseJP),(0,defineProperty/* default */.Z)(_objectSpread3,"".concat(disableJP),disableJP),_objectSpread3)));return buttons=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},buttons),{},(_objectSpread4={},(0,defineProperty/* default */.Z)(_objectSpread4,"".concat(cloneJP),cloneJP),(0,defineProperty/* default */.Z)(_objectSpread4,"".concat(versionHistory),versionHistory),_objectSpread4)),buttons}}),created:function(){this.init()},watch:{jobPlanId:{handler:function(newVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:(0,validation/* isEmpty */.xb)(newVal)||_this.loadJobPlan();case 1:case"end":return _context.stop()}}),_callee)})))()},immediate:!0}},methods:{init:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var groupId,version,params,_yield$API$get,error,data,_ref14,result;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.loading=!0,groupId=_this2.groupId,version=_this2.version,params={groupId:groupId,jobPlanVersion:version},_context2.next=5,api/* API */.bl.get("v3/jobPlan/getJobPlanId",params);case 5:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this2.$message.error(error.message||"Error Occured"):(_ref14=data||{},result=_ref14.result,_this2.jobPlanId=result,_this2.loadJobPlan()),_this2.loading=!1;case 10:case"end":return _context2.stop()}}),_callee2)})))()},loadJobPlan:function(){var _arguments=arguments,_this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var force,groupId,moduleName,jobPlanId,url,params,_yield$API$get2,error,data,_ref15,jobplan;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],groupId=_arguments.length>1?_arguments[1]:void 0,_this3.loading=!0,moduleName=_this3.moduleName,jobPlanId=_this3.jobPlanId,url="v3/modules/data/summary",params={moduleName:moduleName,id:(0,validation/* isEmpty */.xb)(groupId)?jobPlanId:groupId,force:force},_context3.next=8,api/* API */.bl.get(url,params);case 8:_yield$API$get2=_context3.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error?_this3.$message.error(error.message||"Error Occured"):(0,validation/* isEmpty */.xb)(data)||(_ref15=data||{},jobplan=_ref15.jobplan,_this3.jobPlan=jobplan),(0,validation/* isEmpty */.xb)(groupId)||(_this3.jobPlanId=groupId),_this3.loading=!1;case 14:case"end":return _context3.stop()}}),_callee3)})))()},back:function(){var moduleName=this.moduleName,viewname=this.viewname,params={viewname:viewname};if((0,router/* isWebTabsEnabled */.tj)()){var _ref16=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},name=_ref16.name;name&&this.$router.push({name:name,params:params})}else this.$router.push({name:"jobPlanList",params:params})},summaryDropDownAction:function(action){if("edit"===action){var moduleName=this.moduleName,groupId=this.groupId,version=this.version;if(version="v".concat(version),(0,router/* isWebTabsEnabled */.tj)()){var _ref17=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref17.name;name&&this.$router.push({name:name,params:{id:groupId},query:{version:version}})}else this.$router.push({name:"edit-jobplan",params:{id:groupId},query:{version:version}})}else["Publish","Unpublish","Disable"].includes(action)?this.showJPStatusUpdateDialog(action):"Revise"===action?this.reviseJP():"Version History"===action?this.openVersionHistory():"Clone"===action&&this.cloneJP()},showJPStatusUpdateDialog:function(status){this.showDialog=!0,this.dialogType=status},closeDialog:function(){this.showDialog=!1,this.showVersionHistory=!1,this.dialogType=null},saveAction:function(status){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if("Publish"!==status){_context4.next=5;break}return _context4.next=3,_this4.publishJP();case 3:_context4.next=12;break;case 5:if("Clone"!==status){_context4.next=10;break}return _context4.next=8,_this4.cloneJP();case 8:_context4.next=12;break;case 10:return _context4.next=12,_this4.updateStatus(status);case 12:case"end":return _context4.stop()}}),_callee4)})))()},publishJP:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var jobPlanId,_yield$API$post,error,data,_ref18,result,_ref19,groupId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return jobPlanId=_this5.jobPlanId,_context5.next=3,api/* API */.bl.post("v3/jobPlan/publish",{jobPlanId:jobPlanId});case 3:_yield$API$post=_context5.sent,error=_yield$API$post.error,data=_yield$API$post.data,error?(_this5.stateUpdating=!1,_this5.$message.error(error.message||"Error Occurred")):(_ref18=data||{},result=_ref18.result,_ref19=result||{},groupId=_ref19.groupId,_this5.$message.success(_this5.$t("jobplan.jp_published")),_this5.stateUpdating=!1,_this5.loadPublishedJobPlan(groupId));case 7:case"end":return _context5.stop()}}),_callee5)})))()},loadPublishedJobPlan:function(groupId){this.closeDialog(),this.loadJobPlan(!0,groupId)},updateStatus:function(status){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var jobPlan,data,successMessage;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _this6.stateUpdating=!0,jobPlan=_this6.jobPlan,_this6.$set(jobPlan,"jpStatus",pm_utils/* PUBLISH_STATUS */.C7["".concat(status)]),data=(0,objectSpread2/* default */.Z)({},jobPlan),successMessage="".concat(_this6.moduleDisplayName," ").concat(status,"ed successfully"),_context6.next=7,_this6.updateRecord(data,successMessage);case 7:case"end":return _context6.stop()}}),_callee6)})))()},updateRecord:function(data,successMessage){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var moduleName,jobPlanId,_yield$API$updateReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return moduleName=_this7.moduleName,jobPlanId=_this7.jobPlanId,_context7.next=3,api/* API */.bl.updateRecord(moduleName,{id:jobPlanId,data:data});case 3:if(_yield$API$updateReco=_context7.sent,error=_yield$API$updateReco.error,error){_context7.next=13;break}return _this7.$message.success(successMessage),_this7.stateUpdating=!1,_context7.next=10,_this7.loadJobPlan(!0);case 10:_this7.closeDialog(),_context7.next=15;break;case 13:_this7.stateUpdating=!1,_this7.$message.error(error.message);case 15:case"end":return _context7.stop()}}),_callee7)})))()},reviseJP:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var moduleName,jobPlanId,routeName,_yield$API$get3,data,error,_ref20,name,_ref21,result,_ref22,groupId,version,params,query,_ref23,href;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:return moduleName=_this8.moduleName,jobPlanId=_this8.jobPlanId,routeName="edit-jobplan",_context8.next=4,api/* API */.bl.get("v3/jobPlan/revise",{jobPlanId:jobPlanId});case 4:_yield$API$get3=_context8.sent,data=_yield$API$get3.data,error=_yield$API$get3.error,error?_this8.$message.error(error.message||"Error Occurred"):((0,router/* isWebTabsEnabled */.tj)()&&(_ref20=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref20.name,routeName=name),_ref21=data||{},result=_ref21.result,_ref22=result||{},groupId=_ref22.groupId,version=_ref22.jobPlanVersion,version="v".concat(version),params={id:groupId},query={version:version},_ref23=src_router/* default */.Z.resolve({name:routeName,params:params,query:query})||{},href=_ref23.href,(0,validation/* isEmpty */.xb)(href)||window.open(href,"_blank","noopener,noreferrer"));case 8:case"end":return _context8.stop()}}),_callee8)})))()},cloneJP:function(){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee9(){var moduleName,jobPlanId,routeName,_yield$API$get4,data,error,_ref24,name,_ref25,result,_ref26,id,params,query,_ref27,href;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context9){while(1)switch(_context9.prev=_context9.next){case 0:return moduleName=_this9.moduleName,jobPlanId=_this9.jobPlanId,routeName="edit-jobplan",_context9.next=4,api/* API */.bl.get("v3/jobPlan/cloneJobPlan",{jobPlanId:jobPlanId});case 4:_yield$API$get4=_context9.sent,data=_yield$API$get4.data,error=_yield$API$get4.error,error?_this9.$message.error(error.message||"Error Occurred"):((0,router/* isWebTabsEnabled */.tj)()&&(_ref24=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref24.name,routeName=name),_ref25=data||{},result=_ref25.result,_ref26=result||{},id=_ref26.jobPlanId,params={id:id},query={version:"v1"},_ref27=src_router/* default */.Z.resolve({name:routeName,params:params,query:query})||{},href=_ref27.href,(0,validation/* isEmpty */.xb)(href)||window.open(href,"_blank","noopener,noreferrer"));case 8:case"end":return _context9.stop()}}),_callee9)})))()},openVersionHistory:function(){this.showVersionHistory=!0}}},jobplan_JobPlanSummaryvue_type_script_lang_js=JobPlanSummaryvue_type_script_lang_js,JobPlanSummary_component=(0,componentNormalizer/* default */.Z)(jobplan_JobPlanSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,"011a6d86",null)
/* harmony default export */,JobPlanSummary=JobPlanSummary_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/75494.js.map