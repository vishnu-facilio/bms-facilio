(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[23160],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/929593:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/FPagination.vue?vue&type=template&id=7641710c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{staticClass:"flex-center-row-space mT-5",class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("span",{staticClass:"p8 pointer",class:[!_vm.disablePopup&&"button-hover"],attrs:{slot:"reference"},slot:"reference"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" of "+_vm._s(_vm.total)+" ")]),_c("el-pagination",{attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_vm.hideToggle?_vm._e():_c("span",[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})])],1):_vm._e()])},staticRenderFns=[],router=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(329435)),FPaginationvue_type_script_lang_js={props:{total:[Number,String],perPage:Number,hideToggle:{type:Boolean,default:!1},pageNo:Number,hidePopover:{type:Boolean,default:!1}},data:function(){return{from:0,to:0,page:1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},mounted:function(){this.init()},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},computed:{pageQuery:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},page=_ref2.page;return parseInt(page)||1},hasMorePage:function(){return this.total/this.perPage>1},disablePopup:function(){return this.hidePopover||!this.hasMorePage}},watch:{total:function(){this.init()},pageQuery:function(){this.init()}},methods:{init:function(){if(this.page=this.pageQuery,this.from=(this.page-1)*this.perPage+1,this.from>this.total&&this.from&&this.from>0&&this.total&&this.total>0)this.reset();else{var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total}},handleCurrentChange:function(val){this.page=val,this.from=(this.page-1)*this.perPage+1,this.to=this.total>=this.from+this.perPage?this.from+this.perPage-1:this.total,this.setPage()},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.setPage()},reset:function(){this.page=1,this.setPage(!0)},setPage:function(isReset){if(this.pageNo)this.$emit("onPageChanged",this.page);else{var query={};Object.assign(query,this.$route.query),query?query.page=this.page:query={page:this.page},this.$router.push({query:query}),isReset||this.$emit("onPageChanged",this.page)}},keyDownHandler:function(e){e.shiftKey&&("ArrowRight"===e.key&&this.to!==this.total?this.next():"ArrowLeft"===e.key&&this.from>1&&this.prev())}}},list_FPaginationvue_type_script_lang_js=FPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_FPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"7641710c",null)
/* harmony default export */,FPagination=component.exports},
/***/622957:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupEmptyState}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupEmptyState.vue?vue&type=template&id=839bdf38
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-empty"},[_c("div",{staticClass:"fc-setup-empty-image"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}})],1),_c("div",{staticClass:"fc-setup-empty-txt"},[_vm._t("emptyHeading")],2),_c("div",{staticClass:"fc-setup-empty-txt-desc"},[_vm._t("emptyDescription")],2)])},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupEmptyState=component.exports},
/***/291612:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupHeaderTabs}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupHeaderTabs.vue?vue&type=template&id=86381c1c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{},[_c("el-header",{staticClass:"fc-v1-setup-header",attrs:{height:"150"}},[_c("div",{staticClass:"flex-middle justify-content-space fc-header-border-bottom p20"},[_c("div",[_c("div",{staticClass:"fc-v1-setup-heading"},[_vm._t("heading")],2),_c("div",{staticClass:"fc-v1-setup-description"},[_vm._t("description")],2)]),_c("div",{staticClass:"flex-middle"},[_vm._t("actions")],2)]),_c("div",[_c("div",{staticClass:"fc-setup-tab-content"},[_vm._t("tabs",(function(){return[_vm._t("tabFilter",(function(){return[_c("div",{staticClass:"flex-middle justify-content-space p20"},[_c("div",{},[_vm._t("filter")],2),_c("div",{},[_vm._t("searchAndPagination")],2)])]})),_vm._t("tabContent")]}))],2)])])],1)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={}
/* normalize component */,component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupHeaderTabs=component.exports},
/***/233432:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupLoader.vue?vue&type=template&id=367e612c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-loader"},[_vm._t("setupLoading")],2)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupLoader=component.exports},
/***/423160:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SurveySetup}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/survey/SurveySetup.vue?vue&type=template&id=77ecef2a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-page height100vh"},[_c("SetupHeader",{scopedSlots:_vm._u([{key:"heading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("survey.surveys"))+" ")]},proxy:!0},{key:"description",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("survey.configure_surveys_to_receive_feedback"))+" ")]},proxy:!0},{key:"actions",fn:function(){return[_c("div",{staticClass:"flex-middle"},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{filterable:"",disabled:"",width:"250px"},model:{value:_vm.moduleName,callback:function($$v){_vm.moduleName=$$v},expression:"moduleName"}},[_c("el-option",{attrs:{label:"Work Orders",value:"workorder"}})],1),_c("div",{staticClass:"action-btn setting-page-btn mL20"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:_vm.handleAddClick}},["Survey"===_vm.currentTabName?_c("span",[_vm._v(_vm._s(_vm.$t("survey.configure_survey")))]):_c("span",[_vm._v(_vm._s(_vm.$t("survey.create_survey")))])])],1)],1)]},proxy:!0},{key:"tabs",fn:function(){return[_c("el-tabs",{staticClass:"fc-setup-list-tab",model:{value:_vm.currentTab,callback:function($$v){_vm.currentTab=$$v},expression:"currentTab"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("survey.configuration"),name:"survey.list"}},[_c("div",{staticClass:"mT10 mB20"},["Survey"===_vm.currentTabName?_c("SurveyList",{attrs:{moduleName:_vm.moduleName,canShowAddSurvey:_vm.canShowAddSurvey},on:{"update:canShowAddSurvey":function($event){_vm.canShowAddSurvey=$event},"update:can-show-add-survey":function($event){_vm.canShowAddSurvey=$event}}}):_vm._e()],1)]),_c("el-tab-pane",{attrs:{label:_vm.$t("survey.questionnaire"),name:"survey.template"}},[_c("div",{staticClass:"mT10 mB20"},["Builder"===_vm.currentTabName?_c("SurveyTemplateList",{attrs:{moduleName:_vm.moduleName,canShowAddTemplate:_vm.canShowAddTemplate},on:{"update:canShowAddTemplate":function($event){_vm.canShowAddTemplate=$event},"update:can-show-add-template":function($event){_vm.canShowAddTemplate=$event}}}):_vm._e()],1)])],1)]},proxy:!0}])})],1)},staticRenderFns=[],SetupHeaderTabs=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(291612)),SurveyTemplateListvue_type_template_id_51c7e05f_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"fc-setup-actions-con",staticStyle:{height:"60px"}},[_c("div",{staticClass:"fc-black-15 fwBold"},[_vm._v(" "+_vm._s(_vm.$t("survey.all_questionnaire"))+" ")]),_c("div",{staticClass:"flex-middle"},[_c("pagination",{ref:"f-page",staticClass:"nowrap",attrs:{total:_vm.templates.length,perPage:_vm.templatePerPage,pageNo:_vm.templatePage},on:{onPageChanged:_vm.setPage}})],1)]),_vm.isLoading?_c("setup-loader",{scopedSlots:_vm._u([{key:"setupLoading",fn:function(){return[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})]},proxy:!0}],null,!1,3036156284)}):_vm.$validation.isEmpty(_vm.templates)&&!_vm.isLoading?_c("setup-empty",{scopedSlots:_vm._u([{key:"emptyImage",fn:function(){return[_c("inline-svg",{attrs:{src:"svgs/copy2",iconClass:"icon icon-sm-md"}})]},proxy:!0},{key:"emptyHeading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("survey.no_templates_available"))+" ")]},proxy:!0},{key:"emptyDescription",fn:function(){},proxy:!0}])}):_c("el-table",{ref:"surveyTemplatesTable",staticClass:"width100 fc-setup-table fc-setup-table-p0 fc-setup-table-th-borderTop",attrs:{data:_vm.templates,height:"calc(100vh - 280px)"}},[_c("el-table-column",{attrs:{label:"Name",prop:"name"},scopedSlots:_vm._u([{key:"default",fn:function(template){return[_c("el-tooltip",{attrs:{effect:"dark",content:template.row.name||"---",placement:"top-start","open-delay":600}},[_c("div",{staticClass:"truncate-text main-field-column",on:{click:function($event){return _vm.redirectToBuilder(template.row.id)}}},[_vm._v(" "+_vm._s(template.row.name||"---")+" ")])])]}}])}),_c("el-table-column",{attrs:{label:"Description",prop:"description"},scopedSlots:_vm._u([{key:"default",fn:function(template){return[_vm._v(" "+_vm._s(template.row.description||"---")+" ")]}}])}),_c("el-table-column",{attrs:{label:"Created By",prop:"sysCreatedBy",width:"220"},scopedSlots:_vm._u([{key:"default",fn:function(template){return[_c("user-avatar",{attrs:{size:"md",user:template.row.sysCreatedBy,id:template.row.sysCreatedBy.id}})]}}])}),_c("el-table-column",{attrs:{label:"Created Time",prop:"sysCreatedTime",width:"220"},scopedSlots:_vm._u([{key:"default",fn:function(template){return[_vm._v(" "+_vm._s(_vm.getCreatedTime(template.row))+" ")]}}])}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{prop:"",label:"",width:"130",fixed:"right"},scopedSlots:_vm._u([{key:"default",fn:function(template){return[_c("div",{staticClass:"text-center template-actions"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit edit-icon visibility-hide-actions pR15",attrs:{"data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editTemplate(template.row)}}})])]}}])})],1),_c("NewSurveyTemplate",{attrs:{isNew:_vm.isNew,showCreateDialog:_vm.showCreateDialog,selectedTemplate:_vm.selectedTemplate},on:{"update:showCreateDialog":function($event){_vm.showCreateDialog=$event},"update:show-create-dialog":function($event){_vm.showCreateDialog=$event},"update:selectedTemplate":function($event){_vm.selectedTemplate=$event},"update:selected-template":function($event){_vm.selectedTemplate=$event},onClose:_vm.handleCloseDialog,onSave:_vm.saveRecord}})],1)},SurveyTemplateListvue_type_template_id_51c7e05f_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),api=__webpack_require__(32284),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),NewSurveyTemplatevue_type_template_id_62734cbf_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:_vm.surveyTemplateTitle,visible:_vm.showCreateDialog,width:"30%","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"height400"},[_c("el-form",{ref:"groupForm",attrs:{model:_vm.template}},[_c("el-form-item",{attrs:{label:_vm.$t("survey.survey_name"),prop:"name",required:!0}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("survey.enter_the_survey_name")},model:{value:_vm.template.name,callback:function($$v){_vm.$set(_vm.template,"name",$$v)},expression:"template.name"}})],1),_c("el-form-item",{attrs:{label:_vm.$t("common.roles.description"),prop:"description"}},[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("survey.enter_description"),type:"textarea",autofocus:"",autosize:{minRows:3,maxRows:4}},model:{value:_vm.template.description,callback:function($$v){_vm.$set(_vm.template,"description",$$v)},expression:"template.description"}})],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.createTemplate()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)],1)])},NewSurveyTemplatevue_type_template_id_62734cbf_staticRenderFns=[],NewSurveyTemplatevue_type_script_lang_js=(__webpack_require__(659749),__webpack_require__(386544),{name:"SurveyTemplate",props:["showCreateDialog","selectedTemplate","isNew"],data:function(){return{template:{name:null,description:null},saving:!1,rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"}}}},created:function(){var isNew=this.isNew,selectedTemplate=this.selectedTemplate;if(!isNew&&!(0,validation/* isEmpty */.xb)(selectedTemplate)){var _ref=selectedTemplate||{},name=_ref.name,description=_ref.description;this.$set(this,"template",{name:name,description:description})}},computed:{surveyTemplateTitle:function(){var isNew=this.isNew;return isNew?this.$t("survey.create_survey"):this.$t("survey.edit_survey")},targetModuleName:function(){var targetModule=this.$route.params.moduleName;return"workorder"===targetModule&&(targetModule="workOrder"),"".concat(targetModule,"SurveyTemplate")}},watch:{selectedTemplate:{handler:function(newVal,oldVal){newVal===oldVal||(0,validation/* isEmpty */.xb)(newVal)||this.$set(this,"template",newVal)},immediate:!0}},methods:{createTemplate:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var template,moduleName,selectedTemplate,_ref2,name,_ref3,templateId,promise,params,_promise,error,data,_ref4,record;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(template=_this.template,moduleName="surveyTemplate",_this.saving=!0,selectedTemplate=_this.selectedTemplate,_ref2=template||{},name=_ref2.name,_ref3=selectedTemplate||{},templateId=_ref3.id,params={moduleName:moduleName,data:template},(0,validation/* isEmpty */.xb)(name)){_context.next=22;break}if((0,validation/* isEmpty */.xb)(templateId)){_context.next=15;break}return params=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},params),{},{id:templateId}),_context.next=12,api/* API */.bl.post("v3/modules/data/patch",params);case 12:promise=_context.sent,_context.next=18;break;case 15:return _context.next=17,api/* API */.bl.post("v3/modules/data/create",params);case 17:promise=_context.sent;case 18:_promise=promise,error=_promise.error,data=_promise.data,error?_this.$message.error(error.message||"Error Occured"):(_ref4=data||{},record=_ref4[moduleName],_this.$emit("onSave",record),_this.saving=!1,_this.closeDialog()),_context.next=24;break;case 22:_this.$message.error("Please fill template name"),_this.saving=!1;case 24:case"end":return _context.stop()}}),_callee)})))()},closeDialog:function(){this.$emit("onClose")}}}),survey_NewSurveyTemplatevue_type_script_lang_js=NewSurveyTemplatevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(survey_NewSurveyTemplatevue_type_script_lang_js,NewSurveyTemplatevue_type_template_id_62734cbf_render,NewSurveyTemplatevue_type_template_id_62734cbf_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewSurveyTemplate=component.exports,FPagination=__webpack_require__(929593),SetupLoader=__webpack_require__(233432),SetupEmptyState=__webpack_require__(622957),User=__webpack_require__(426803),SurveyTemplateListvue_type_script_lang_js={data:function(){return{currentTab:"survey.template",templates:[],isLoading:!1,showCreateDialog:!1,selectedTemplate:null,isNew:!0,templatePage:1,templatePerPage:50}},props:["canShowAddTemplate","moduleName"],components:{NewSurveyTemplate:NewSurveyTemplate,Pagination:FPagination/* default */.Z,SetupLoader:SetupLoader/* default */.Z,SetupEmpty:SetupEmptyState/* default */.Z,UserAvatar:User/* default */.Z},created:function(){this.loadTemplates()},watch:{canShowAddTemplate:function(newVal){newVal&&(this.showCreateDialog=newVal)}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getUser"])),{},{targetModuleName:function(){return"workOrderSurveyTemplate"}}),methods:{switchTab:function(tab){var params={moduleName:this.moduleName};this.$router.push({name:tab.name,params:params})},loadTemplates:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var targetModuleName,url,params,_yield$API$get,data,error,_ref,workOrderSurveyTemplate;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return targetModuleName=_this.targetModuleName,_this.isLoading=!0,url="v3/modules/data/list",params={page:1,perPage:50,withCount:!0,viewName:"all",force:!1,moduleName:targetModuleName},_context.next=6,api/* API */.bl.get(url,params);case 6:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this.$message.error("Error Occured"):(_ref=data||{},workOrderSurveyTemplate=_ref.workOrderSurveyTemplate,_this.templates=workOrderSurveyTemplate||{}),_this.isLoading=!1;case 11:case"end":return _context.stop()}}),_callee)})))()},getCreatedTime:function(template){var _ref2=template||{},sysCreatedTime=_ref2.sysCreatedTime;if(!(0,validation/* isEmpty */.xb)(sysCreatedTime))return this.$options.filters.formatDate(sysCreatedTime)||"----"},saveRecord:function(record){var isNew=this.isNew,_ref3=record||{},id=_ref3.id;isNew?(this.createPage(id),this.redirectToBuilder(id)):this.loadTemplates(),this.selectedTemplate=null},createPage:function(templateId){return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return data={name:"Page 1",description:"",parent:templateId,position:1},_context2.next=3,api/* API */.bl.createRecord("qandaPage",{data:data});case 3:case"end":return _context2.stop()}}),_callee2)})))()},redirectToBuilder:function(id){this.$router.push({name:"newSurveyQandABuilder",params:{id:id},query:{pageNo:1}})},setPage:function(page){this.templatePage=page},editTemplate:function(template){this.showCreateDialog=!0,this.isNew=!1,this.selectedTemplate=template||{}},
//For later purpose
// async deleteTemplate(idList) {
//   let { targetModuleName } = this
//   let value = await this.$dialog.confirm({
//     title: this.$t('survey.delete_template'),
//     message: this.$t('survey.are_you_sure_delete_template'),
//     rbDanger: true,
//     rbLabel: 'Delete',
//   })
//   if (value) {
//     let { error } = await API.deleteRecord(targetModuleName, idList)
//     if (error) {
//       this.$message.error('Error Occured')
//     } else {
//       this.loadTemplates()
//     }
//   }
// },
handleCloseDialog:function(){this.showCreateDialog=!1,this.selectedTemplate=null,this.$emit("update:canShowAddTemplate",!1)}}},survey_SurveyTemplateListvue_type_script_lang_js=SurveyTemplateListvue_type_script_lang_js,SurveyTemplateList_component=(0,componentNormalizer/* default */.Z)(survey_SurveyTemplateListvue_type_script_lang_js,SurveyTemplateListvue_type_template_id_51c7e05f_render,SurveyTemplateListvue_type_template_id_51c7e05f_staticRenderFns,!1,null,null,null)
/* harmony default export */,SurveyTemplateList=SurveyTemplateList_component.exports,SurveyListvue_type_template_id_93d98a58_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"fc-setup-actions-con",staticStyle:{height:"60px"}},[_c("div",{staticClass:"fc-black-15 fwBold"},[_vm._v(" "+_vm._s(_vm.$t("survey.all_configuration"))+" ")]),_c("div",{staticClass:"flex-middle"},[_c("pagination",{ref:"f-page",staticClass:"nowrap",attrs:{total:_vm.surveys.length||0,perPage:_vm.surveyPerPage,pageNo:_vm.surveyPage},on:{onPageChanged:_vm.setPage}})],1)]),_vm.isLoading?_c("setup-loader",{scopedSlots:_vm._u([{key:"setupLoading",fn:function(){return[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})]},proxy:!0}],null,!1,3036156284)}):_vm.$validation.isEmpty(_vm.surveys)&&!_vm.isLoading?_c("setup-empty",{scopedSlots:_vm._u([{key:"emptyImage",fn:function(){return[_c("inline-svg",{attrs:{src:"svgs/copy2",iconClass:"icon icon-sm-md"}})]},proxy:!0},{key:"emptyHeading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("survey.no_surveys_available"))+" ")]},proxy:!0},{key:"emptyDescription",fn:function(){},proxy:!0}])}):_c("el-table",{ref:"surveyTable",staticClass:"width100 fc-setup-table fc-setup-table-p0 fc-setup-table-th-borderTop",attrs:{data:_vm.surveys,"cell-style":{padding:"12px 20px"},height:"calc(100vh - 280px)"}},[_c("el-table-column",{attrs:{label:_vm.$t("survey.survey_name"),prop:"name"},scopedSlots:_vm._u([{key:"default",fn:function(survey){return[_c("el-tooltip",{attrs:{effect:"dark",content:survey.row.name||"---",placement:"top-start","open-delay":600}},[_c("div",{staticClass:"truncate-text main-field-column",on:{click:function($event){return _vm.editSurvey(survey.row)}}},[_vm._v(" "+_vm._s(survey.row.name||"---")+" ")])])]}}])}),_c("el-table-column",{attrs:{label:"Description",prop:"description"},scopedSlots:_vm._u([{key:"default",fn:function(survey){return[_vm._v(" "+_vm._s(survey.row.description||"---")+" ")]}}])}),_c("el-table-column",{attrs:{label:"Created Time",prop:"sysCreatedTime",width:"220"},scopedSlots:_vm._u([{key:"default",fn:function(survey){return[_vm._v(" "+_vm._s(_vm.getCreatedTime(survey.row))+" ")]}}])}),_c("el-table-column",{attrs:{label:"Status",prop:"status"},scopedSlots:_vm._u([{key:"default",fn:function(survey){return[_c("el-switch",{on:{change:function($event){return _vm.handleStatusChange(survey.row)}},model:{value:survey.row.status,callback:function($$v){_vm.$set(survey.row,"status",$$v)},expression:"survey.row.status"}})]}}])}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{prop:"",label:"",width:"180",fixed:"right"},scopedSlots:_vm._u([{key:"default",fn:function(survey){return[_c("div",{staticClass:"text-center template-actions"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete fc-delete-icon visibility-hide-actions",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteSurvey([survey.row.id])}}})])]}}])})],1)],1)},SurveyListvue_type_template_id_93d98a58_staticRenderFns=[],SurveyListvue_type_script_lang_js={data:function(){return{surveyPage:1,surveyPerPage:50,isLoading:!1,surveys:[]}},components:{Pagination:FPagination/* default */.Z,SetupLoader:SetupLoader/* default */.Z,SetupEmpty:SetupEmptyState/* default */.Z},props:["canShowAddSurvey","moduleName"],computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getUser"])),created:function(){this.loadSurveys()},watch:{canShowAddSurvey:function(newVal){newVal&&this.redirectToSurveyCreation()}},methods:{loadSurveys:function(){var _arguments=arguments,_this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var force,moduleName,params,_yield$API$get,error,data,_ref,_ref$workflowRuleList,workflowRuleList;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],_this.isLoading=!0,moduleName=_this.moduleName,params={ruleType:46,moduleName:moduleName,page:1,perPage:20},_context.next=6,api/* API */.bl.get("v2/modules/rules/list",params,{force:force});case 6:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this.$message.error("Error Occured"):(0,validation/* isEmpty */.xb)(data)||(_ref=data||{},_ref$workflowRuleList=_ref.workflowRuleList,workflowRuleList=void 0===_ref$workflowRuleList?[]:_ref$workflowRuleList,_this.surveys=workflowRuleList),_this.isLoading=!1;case 11:case"end":return _context.stop()}}),_callee)})))()},getCreatedTime:function(survey){var _ref2=survey||{},createdTime=_ref2.createdTime;if(!(0,validation/* isEmpty */.xb)(createdTime))return this.$options.filters.formatDate(createdTime)||"----"},editSurvey:function(survey){var _ref3=survey||{},id=_ref3.id;this.$router.push({name:"editSurvey",params:{id:id},query:this.$route.query})},deleteSurvey:function(idList){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var value,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this2.$dialog.confirm({title:_this2.$t("survey.delete_survey"),message:_this2.$t("survey.are_you_sure_delete_survey"),rbDanger:!0,rbLabel:"Delete"});case 2:if(value=_context2.sent,!value){_context2.next=9;break}return _context2.next=6,api/* API */.bl.post("v2/setup/survey/delete",{ruleIds:idList});case 6:_yield$API$post=_context2.sent,error=_yield$API$post.error,error?_this2.$message.error(_this2.$t("common._common.error_occured")):(_this2.loadSurveys(!0),_this2.$message.success(_this2.$t("survey.survey_deleted_successfully")));case 9:case"end":return _context2.stop()}}),_callee2)})))()},setPage:function(page){this.surveyPage=page},handleStatusChange:function(survey){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref4,status,id,url,params,_yield$API$post2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _ref4=survey||{},status=_ref4.status,id=_ref4.id,url=status?"setup/turnonrule":"setup/turnoffrule",params={workflowId:id},_context3.next=5,api/* API */.bl.post(url,params);case 5:_yield$API$post2=_context3.sent,error=_yield$API$post2.error,error?_this3.$message.error(_this3.$t("common._common.error_occured")):(_this3.$message.success(_this3.$t("survey.survey_status_changed_successfully")),_this3.loadSurveys());case 8:case"end":return _context3.stop()}}),_callee3)})))()},redirectToSurveyCreation:function(){this.$router.push({name:"newSurvey",params:{moduleName:this.moduleName}})}}},survey_SurveyListvue_type_script_lang_js=SurveyListvue_type_script_lang_js,SurveyList_component=(0,componentNormalizer/* default */.Z)(survey_SurveyListvue_type_script_lang_js,SurveyListvue_type_template_id_93d98a58_render,SurveyListvue_type_template_id_93d98a58_staticRenderFns,!1,null,null,null)
/* harmony default export */,SurveyList=SurveyList_component.exports,SurveySetupvue_type_script_lang_js={name:"SurveySetup",components:{SetupHeader:SetupHeaderTabs/* default */.Z,SurveyTemplateList:SurveyTemplateList,SurveyList:SurveyList},data:function(){return{moduleName:"workorder",canShowAddTemplate:!1,canShowAddSurvey:!1}},computed:{currentTab:{get:function(){return this.$route.name},set:function(value){this.handleTabChange(value)}},currentTabName:function(){return"survey.list"===this.$route.name?"Survey":"Builder"}},methods:{switchCurrentTab:function(tab){this.$router.push({name:tab})},resetPaginationProps:function(){"survey.list"===this.currentTab?(this.surveyPage=1,this.surveyPerPage=50):(this.templatePage=1,this.templatePerPage=50)},handleTabChange:function(tab){this.switchCurrentTab(tab),this.resetPaginationProps()},handleAddClick:function(){var currentTabName=this.currentTabName;"Builder"===currentTabName?this.canShowAddTemplate=!0:this.canShowAddSurvey=!0}}},survey_SurveySetupvue_type_script_lang_js=SurveySetupvue_type_script_lang_js,SurveySetup_component=(0,componentNormalizer/* default */.Z)(survey_SurveySetupvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SurveySetup=SurveySetup_component.exports},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/23160.js.map