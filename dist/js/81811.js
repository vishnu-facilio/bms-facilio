(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[81811],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/507008:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FPopover.vue?vue&type=template&id=878762a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{ref:_vm.getRef,attrs:{"popper-class":"f-popover",width:_vm.width||""===_vm.width?_vm.width:280,placement:_vm.placement,trigger:_vm.trigger||"click",hide:"hide"},on:{show:function(){return _vm.$emit("show")}},model:{value:_vm.showpopover,callback:function($$v){_vm.showpopover=$$v},expression:"showpopover"}},[_c("div",{staticClass:"fc-popover-content"},[_vm._t("header",(function(){return[_c("div",{staticClass:"title uppercase f12 bold",staticStyle:{"letter-spacing":"1.1px",color:"#000000"}},[_vm._v(" "+_vm._s(_vm.title)+" ")])]})),_c("div",[_vm._t("content")],2)],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.cancel}},[_c("span",[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.confirmTitle?_vm.confirmTitle:_vm.$t("common._common.ok")))])])]}))],2),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)},staticRenderFns=[],FPopovervue_type_script_lang_js={props:["popperClass","placement","value","popperRef","trigger","title","width","maxHeight","confirmTitle"],data:function(){return{showpopover:!1}},watch:{showpopover:function(val){null!=this.value&&this.$emit("input",val)},value:function(val){this.showpopover=val}},mounted:function(){var element=this.$refs[this.getRef].$el;if(this.popperClass&&element.firstElementChild.classList.add(this.popperClass),this.maxHeight){var content=element.querySelector(".fc-popover-content");content.classList.add("scrollable"),content.style["max-height"]=this.maxHeight+"px"}},computed:{getRef:function(){return this.popperRef?this.popperRef:"fpopup"}},methods:{save:function(){this.showpopover=!1,this.$emit("save")},cancel:function(){this.showpopover=!1,this.$emit("close")},hide:function(){this.$emit("hide")}}},components_FPopovervue_type_script_lang_js=FPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FPopover=component.exports},
/***/673362:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetMultiChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetMultiChooser.vue?vue&type=template&id=0ccc2fed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top",width:"60%","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","before-close":_vm.handleclose,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"multi f-element",attrs:{id:"spaceassetchooser"}},[_vm.hideBanner?_vm._e():_c("banner",{attrs:{message:_vm.message,hideIcon:!_vm.selectedList.count}}),_c("div",{staticStyle:{height:"600px","overflow-y":"hidden"}},[_c("div",{staticStyle:{"background-color":"#ffffff",height:"100%",width:"100%",display:"inline-block"}},[_c("div",{staticClass:"flex-middle justify-content-space pT20 pL20 pR20"},[_vm.isAsset?_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.assetCategory.placeHolder,disabled:!_vm.isAsset||_vm.disable},on:{change:_vm.onCategoryChange},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategoryChange},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1),_vm.hideBanner?_vm._e():_c("div",{staticClass:"pull-right"},[_c("el-radio-group",{on:{change:_vm.onIncludeTypeChange},model:{value:_vm.includeType,callback:function($$v){_vm.includeType=$$v},expression:"includeType"}},[_c("el-radio",{staticClass:"fc-radio",attrs:{label:"all"}},[_vm._v("All")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"include"}},[_vm._v("Include")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"exclude"}},[_vm._v("Exclude")])],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10 pB10",staticStyle:{"padding-left":"20px","padding-right":"20px","border-bottom":"1px solid #e6ecf3 !important"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v("search")]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.setResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"asset-chooser-select-block"},[_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"inline"},[!_vm.resourceType||_vm.resourceType.includes(field.spaceType+1)?_c("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationChange(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1):_vm._e()],1)})),_c("span",{staticClass:"searchicon pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])],2)])])],1),_c("div",{staticClass:"scroll-multichooser"},[_c("el-row",[_c("el-col",{staticClass:"table-scroll-chooser",attrs:{span:_vm.hideBanner?16:24}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px","overflow-y":"scroll","padding-bottom":"50px"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table border-right-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow "},[_c("el-checkbox",{attrs:{disabled:"exclude"===_vm.includeType&&!_vm.hideBanner},on:{change:_vm.onSelectAllChange},model:{value:_vm.selectall,callback:function($$v){_vm.selectall=$$v},expression:"selectall"}})],1),_c("td",{staticClass:"headerrow width30"},[_vm._v("#ID")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("NAME")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("CATEGORY")])])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:space.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(space,!0)}},model:{value:space.selected,callback:function($$v){_vm.$set(space,"selected",$$v)},expression:"space.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" "+_vm._s(space.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(space.spaceTypeVal)+" ")])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:asset.id,staticClass:"tablerow",class:{selectedrow:asset.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(asset,!0)}},model:{value:asset.selected,callback:function($$v){_vm.$set(asset,"selected",$$v)},expression:"asset.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" #"+_vm._s(asset.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" "+_vm._s(asset.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")])]):_vm._e()})),_vm.spaceList&&_vm.spaceList.length<1&&_vm.assetList&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_vm.hideBanner?_c("el-col",{staticClass:"chooser-selected-container",attrs:{span:8}},[_c("div",{staticClass:"chooser-scroll-block"},[_vm.selectedList&&_vm.selectedList.length?_c("div",{staticClass:"count-message"},[_vm._v(" "+_vm._s(_vm.message)+" ")]):_vm._e(),_vm._l(_vm.selectedList,(function(resource,value){return _c("div",{key:value,staticClass:"selected-field"},[_vm._v(" "+_vm._s(resource.name)+" "),_c("i",{staticClass:"el-icon-close remove",on:{click:function($event){return _vm.deSelect(resource)}}})])}))],2)]):_vm._e()],1)],1),_c("div",{staticClass:"f-footer row"},[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.handleclose}},[_c("span",[_vm._v("Cancel")])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.associate}},[_c("span",[_vm._v("Ok")])])])],1)]),_c("div",{staticStyle:{position:"absolute",top:"45%",left:"45%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),v_infinite_scroll=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),ResourceMixin=__webpack_require__(22637),FBannervue_type_template_id_85b57242_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.message?_c("div",{staticClass:"banner-block",style:{"background-color":_vm.bannerColor}},[_c("div",{staticClass:"banner-content"},[_c("i",{directives:[{name:"show",rawName:"v-show",value:!_vm.hideIcon,expression:"!hideIcon"}],class:["banner-icon flLeft",_vm.bannerIcon],style:{color:_vm.bannerTextColor},attrs:{"aria-hidden":"true"}}),_c("p",{staticClass:"banner-txt flLeft",style:{color:_vm.bannerTextColor}},[_vm._v(" "+_vm._s(_vm.message)+" ")])])]):_vm._e()])},FBannervue_type_template_id_85b57242_staticRenderFns=[],FBannervue_type_script_lang_js={props:["message","icon","color","textColor","hideIcon"],computed:{bannerColor:function(){var color;return this.color?color=this.color:this.isError||(color="#ecf3da"),color},bannerTextColor:function(){var color;return this.textColor?color=this.textColor:this.isError||(color="#67933a"),color},bannerIcon:function(){var icon;return this.icon?icon=this.icon:this.isError||(icon="el-icon-circle-check-outline"),icon}}},components_FBannervue_type_script_lang_js=FBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FBannervue_type_script_lang_js,FBannervue_type_template_id_85b57242_render,FBannervue_type_template_id_85b57242_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBanner=component.exports,vuex_esm=__webpack_require__(420629),SpaceAssetMultiChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","disable","hideBanner"],components:{Banner:FBanner,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{selectall:!1,showQuickSearch:!1,includeType:"all",selectedList:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{message:function(){var message,selectedCount=this.selectedList.length;if("all"===this.includeType&&this.categoryName)message="All "+this.categoryName+"s have been selected";else if("all"!==this.includeType&&selectedCount){var includeMsg;includeMsg=this.hideBanner?" Selected":"include"===this.includeType?" Included":" Excluded";var resource=(this.categoryName?this.categoryName:"")+(this.showAsset?" Asset":" Space");message=selectedCount+" "+resource+(selectedCount>1?"s":"")+includeMsg}else message=this.resourceType?"No Space Selected":"No Asset Selected";return message},categoryName:function(){return!this.assetCategory||this.assetCategory.value<=0?"":this.assetCategory.options[this.assetCategory.value]}}),created:function(){var _this=this;this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadAssetCategory").then((function(){_this.initResourceData()}))},watch:{visibility:function(val){val?this.reInit():val||!this.query||this.selectedList&&this.selectedList.length||this.$emit("associate",{})},query:function(val){this.quickSearchQuery=val,val&&(this.showQuickSearch=!0,this.setResourceData())},initialResourcesFecthed:function(val){val&&this.setInitialData()}},methods:{reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.checkAndInitResourceData()},deSelect:function(object){var resource=this.resourceList.find((function(resource){return resource.id===object.id}));resource?resource.selected=!1:resource=object,this.setSelectedResource(resource),this.setIncludeTypeOnChange()},handleclose:function(){this.$emit("update:visibility",!1),this.$emit("update:siteId",null)},openSpace:function(){this.isAsset=!1,this.loadSpace()},openAsset:function(){this.isAsset=!0,this.loadAsset()},associate:function(){var obj={};"all"!==this.includeType&&(obj.resourceList=this.selectedList,obj.isInclude="include"===this.includeType),this.$emit("associate",obj)},toggleQuickSearch:function(){var _this2=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.setResourceData())},onCategoryChange:function(){this.assetCategory.value?this.includeType="all":this.setIncludeTypeOnChange(),this.onCategorySelected(),this.selectedList=[]},onSpaceCategoryChange:function(){this.spaceCategory;this.onSpaceCategorySelected(),this.selectedList=[]},onSelectAllChange:function(){var _this3=this;this.selectedList=[],this.resourceList.forEach((function(resource){_this3.$set(resource,"selected",_this3.selectall),_this3.setSelectedResource(resource)})),this.setIncludeTypeOnChange()},toggleSelect:function(resource,alreadyChanged){alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource),this.selectall=this.selectedList.length===this.resourceList.length,this.setIncludeTypeOnChange()},setInitialData:function(){var _this4=this;if(this.initialData){var selectedResources=this.initialData.selectedResources;this.includeType=selectedResources&&selectedResources.length?this.initialData.isIncludeResource?"include":"exclude":"all";var idArray=[];selectedResources&&(this.selectedList=[],this.resourceList.forEach((function(resource){var resourceSelectedObj=_this4.initialData.selectedResources.some((function(selctedResource){return selctedResource.id===resource.id}));_this4.$set(resource,"selected",resourceSelectedObj),_this4.setSelectedResource(resource)}))),this.selectedList&&selectedResources&&this.selectedList.length<selectedResources.length&&(this.selectedList=[],this.initialData.selectedResources.forEach((function(d){idArray.push(d.id)})),this.$util.loadResource(idArray).then((function(fields){_this4.selectedList=fields})))}},setIncludeTypeOnChange:function(){"all"===this.includeType?this.includeType="include":this.selectedList.length||(this.includeType="all")},onIncludeTypeChange:function(){var _this5=this;"all"===this.includeType&&(this.resourceList.forEach((function(resource){_this5.$set(resource,"selected",!1)})),this.selectedList=[],this.selectall=!1)},isSelected:function(resourceId){return this.selectedList.find((function(resource){return resource.id===resourceId}))},onLocationChange:function(field){var _this6=this;this.onLocationSelected(field).then((function(){_this6.setListSelected()})),this.setIncludeTypeOnChange()},setResourceData:function(){var _this7=this;this.loadResourceData().then((function(){_this7.setListSelected()}))},setListSelected:function(){var _this8=this,selectedIds=this.selectedList.map((function(resource){return resource.id}));this.isAsset?this.assetList.map((function(asset){return selectedIds.includes(asset.id)&&_this8.$set(asset,"selected",!0),asset})):this.spaceList.map((function(space){return selectedIds.includes(space.id)&&_this8.$set(space,"selected",!0),space}))},setSelectedResource:function(resource){if(resource.selected)this.selectedList.push(this.$helpers.cloneObject(resource));else{var idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==idx&&this.selectedList.splice(idx,1)}}}},components_SpaceAssetMultiChooservue_type_script_lang_js=SpaceAssetMultiChooservue_type_script_lang_js,SpaceAssetMultiChooser_component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetMultiChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetMultiChooser=SpaceAssetMultiChooser_component.exports},
/***/785869:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Subheader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Subheader.vue?vue&type=template&id=fa337eb6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"subheader-section",class:{filterclass:!0===_vm.querry}},[_c("div",{staticClass:"subheader-div"},[_c("ul",{staticClass:"subheader-tabs pull-left"},[_vm._t("prefix"),_vm._l(_vm.activeMenuList,(function(item,index){return[item.multilevel?_c("li",{key:index,staticClass:"sh-multilevel-header",class:{"router-link-exact-active active":_vm.getTabTitlenew(item)!==item.label||_vm.$route.params&&"chilleroverview"===_vm.$route.params.dashboardlink}},[_c("el-popover",{attrs:{placement:"bottom",width:"200","popper-class":"sh-popup-tree",trigger:"hover"},model:{value:_vm.closepop,callback:function($$v){_vm.closepop=$$v},expression:"closepop"}},[_vm._l(item.children,(function(d,index){return item.children?_c("div",{key:index,staticClass:"p5 parent-sh"},[_c("div",{staticClass:"sh-pop-parent p5 pointer",class:{active:d.path.path===_vm.$route.path},on:{click:function($event){return _vm.getparent(d)}}},[_vm._v(" "+_vm._s(d.label)+" ")]),d.children?_c("div",{staticClass:"p5 sh-con-header"},_vm._l(d.children,(function(c,idx){return d.children?_c("div",{key:idx,staticClass:"child-sh"},[_c("div",{staticClass:"sh-pop-child p5 pointer",class:{active:c.path.path===_vm.$route.path},on:{click:function($event){return _vm.getchild(c)}}},[_c("i",{staticClass:"fa fa-circle sh-indicater",class:{active:c.path.path===_vm.$route.path}}),_vm._v(_vm._s(c.label)+" ")])]):_vm._e()})),0):_vm._e()]):_vm._e()})),_c("a",{attrs:{slot:"reference"},slot:"reference"},[_vm._v(" "+_vm._s(_vm.getTabTitlenew(item))+" "),_c("i",{staticClass:"switch-icon-dropdown el-icon-arrow-down",staticStyle:{float:"right",margin:"5px"}})])],2),_c("div",{staticClass:"sh-selection-bar"})],1):item.disable?_c("li",{key:index,class:{"router-link-exact-active active":_vm.getTabTitle(item)!==item.label}},[_c("el-dropdown",{on:{command:_vm.openChild}},[_c("a",[_vm._v(" "+_vm._s(_vm.getTabTitle(item))+" "),_c("i",{staticClass:"switch-icon-dropdown el-icon-arrow-down",staticStyle:{float:"right",margin:"5px"}})]),_c("div",{staticClass:"sh-selection-bar"}),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(item.childrens,(function(child,childindex){return _c("el-dropdown-item",{key:childindex,attrs:{command:{curentItem:child,parentItem:item},disabled:child.disable}},[_vm._v(_vm._s(child.label))])})),1)],1)],1):item.childrens||!_vm.showCurrentViewOnly||_vm.currentView===item.name?_c("router-link",{key:index,attrs:{tag:"li",to:item.childrens&&item.childrens.find((function(cl){return cl.path.path===_vm.$route.path}))?item.childrens.find((function(cl){return cl.path.path===_vm.$route.path})).path:item.path}},[_c("a",[_vm._v(_vm._s(_vm.getTabTitle(item)))]),item.childrens?_c("div",{staticStyle:{float:"right",margin:"3px"}},[_c("el-dropdown",{on:{command:_vm.openChild}},[_c("i",{staticClass:"switch-icon-dropdown el-icon-arrow-down"}),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(item.childrens,(function(child,childindex){return _c("el-dropdown-item",{key:childindex,attrs:{command:{curentItem:child,parentItem:item},disabled:child.disable}},[_vm._v(_vm._s(child.label))])})),1)],1)],1):_vm._e(),item.disable?_vm._e():_c("div",{staticClass:"sh-selection-bar"})]):_vm._e()]})),_vm.moreMenuList.length&&!_vm.showCurrentViewOnly?_c("li",{staticClass:"pointer",class:{active:_vm.isMoreMenuActive}},[_c("div",[_c("svg",{staticStyle:{"enable-background":"new 0 0 408 408"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"18px",height:"18px",viewBox:"0 0 408 408","xml:space":"preserve"}},[_c("g",[_c("g",{attrs:{id:"more-horiz"}},[_c("path",{attrs:{d:"M51,153c-28.05,0-51,22.95-51,51s22.95,51,51,51s51-22.95,51-51S79.05,153,51,153z M357,153c-28.05,0-51,22.95-51,51    s22.95,51,51,51s51-22.95,51-51S385.05,153,357,153z M204,153c-28.05,0-51,22.95-51,51s22.95,51,51,51s51-22.95,51-51    S232.05,153,204,153z",fill:"#b1bdc9"}})])])])]),_c("q-popover",{ref:"shpopover",on:{open:_vm.moreMenuOpened,close:_vm.moreMenuClosed}},[_c("q-list",{staticClass:"scroll q-list-item",staticStyle:{"min-width":"150px"},attrs:{link:""}},[_vm._l(_vm.moreMenuList,(function(item,index){return _c("q-item",{key:index,on:{click:function($event){return _vm.openSubTab(item,index)}}},[_c("q-item-main",{staticStyle:{"font-size":"13px"},attrs:{label:item.label}})],1)})),_vm.showRearrange?_c("q-item",{staticClass:"rearrange-button",attrs:{menu:_vm.menu},on:{click:_vm.rearrange}},[_c("q-item-main",{staticStyle:{"font-size":"13px"},attrs:{label:_vm.$t("setup.users_management.rearrange")}})],1):_vm._e()],2)],1)],1):_vm._e()],2),_vm._t("suffix"),_c("div",{class:_vm.positionsheaders},[_vm._t("default")],2)],2)])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),quasar_esm=(__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(162506),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(634338),__webpack_require__(902918),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(641358)),Subheadervue_type_script_lang_js={computed:{currentView:function(){return this.$route.params.viewname},querry:function(){return""===this.$route.query.filters||!!this.$route.query.filters}},props:["menu","filtersRetain","newbtn","type","parent","positionsheader","showRearrange","listCount","showCurrentViewOnly","maxVisibleMenu"],components:{QPopover:quasar_esm/* QPopover */.oe,QList:quasar_esm/* QList */.tu,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui},data:function(){return{positionsheaders:"pull-right",closepop:!1,activeMenuList:[],moreMenuList:[],seletedvalue:null,isMoreMenuActive:!1}},watch:{$route:function(to,from){if(this.filtersRetain&&from.path!==to.path)for(var i=0;i<this.filtersRetain.length;i++){var key1=from.query.hasOwnProperty(this.filtersRetain[i]);key1&&this.$router.push({query:from.query})}this.setFirstMenu(),this.$emit("tabChange")},menu:function(newVal){this.multilevelheader()}},mounted:function(){this.multilevelheader()},methods:{getTabTitle:function(item){var _this=this;if(item.path.path!==this.$route.path&&item.childrens&&item.childrens.length){var child=item.childrens.find((function(it){return it.path.path===_this.$route.path}));if(child)return child.label}return item.label},getTabTitlenew:function(item){var _this2=this;if(item.path.path!==this.$route.path&&item.children&&item.children.length){var child=item.children.find((function(it){return it.path.path===_this2.$route.path})),ch=item.children.filter((function(it){return it.children}));if(child)return child.label;for(var i=0;i<ch.length;i++){var c=ch[i].children&&ch[i].children.find((function(rt){return rt.path.path===_this2.$route.path}));if(c)return c.label}}return item.label},getparent:function(data){data.path&&data.path.path&&(this.$router.push({path:data.path.path}),this.closepop=!1)},getchild:function(data){data.path&&data.path.path&&(this.$router.push({path:data.path.path}),this.closepop=!1)},selectheader:function(value,event){this.seletedvalue=value,this.$router.push(value[value.length-1])},multilevelheader:function(){this.seletedvalue=["/app/em/newdashboard/chilleroverview/391"],this.loadMenuList()},multiheaderClickEvent:function(){},callbackMethod:function(newVal){},handleFcAfterDateBack:function(data,event){},onClickChild:function(value){},openChild:function(obj){this.$router.push(obj.curentItem.path)},companyListSelected:function(label,id){},loadMenuList:function(){var self=this;self.positionsheaders=self.positionsheader||"pull-right",self.activeMenuList=[],self.moreMenuList=[];var accessibleMenu=this.menu.filter((function(m){return"undefined"===typeof m.permission||self.$hasPermission(m.permission)?m:void 0}));for(var idx in accessibleMenu)parseInt(idx)<(this.maxVisibleMenu||4)?this.activeMenuList.push(accessibleMenu[idx]):this.moreMenuList.push(accessibleMenu[idx]);this.setFirstMenu()},openSubTab:function(item,index,keepQuery){if(item&&item.disable&&item.childrens.length){var data=[];if(data=item.childrens.filter((function(rt){return rt.label!==item.label})),data.length){this.moreMenuList.splice(index,1);var lastMenu=this.activeMenuList.pop();this.moreMenuList.splice(0,0,lastMenu),this.activeMenuList.push(item),this.$router.push({path:data[0].path.path}),this.isMoreMenuActive&&this.$refs.shpopover.close()}}else{this.moreMenuList.splice(index,1);var _lastMenu=this.activeMenuList.pop();this.moreMenuList.splice(0,0,_lastMenu),this.activeMenuList.push(item),keepQuery?this.$router.replace({path:item.path.path,query:this.$route.query}):this.$router.push(item.path),this.isMoreMenuActive&&this.$refs.shpopover.close()}},setFirstMenu:function(){var _this3=this;if(this.parent&&(this.$route.path===this.parent||this.$route.path+"/"===this.parent)&&this.activeMenuList.length){var primaryView=this.activeMenuList.find((function(menu){return menu.primary}));primaryView||(primaryView=this.activeMenuList[0]),this.$router.replace({path:primaryView.path.path,query:this.$route.query,params:primaryView.path.params})}else this.checkAndSetMoreList(this.currentView);if(![].concat((0,toConsumableArray/* default */.Z)(this.activeMenuList),(0,toConsumableArray/* default */.Z)(this.moreMenuList)).find((function(menu){return menu.path.path===_this3.$route.path}))){var portfolio=[].concat((0,toConsumableArray/* default */.Z)(this.activeMenuList),(0,toConsumableArray/* default */.Z)(this.moreMenuList)).find((function(menu){return menu.path.path.endsWith("portfolio")}));if(portfolio&&null!==portfolio&&void 0!==portfolio&&portfolio.childrens){var currentBuilding=portfolio.childrens.find((function(menu){return menu.path.path===_this3.$route.path}));currentBuilding&&(currentBuilding.childrens=portfolio.childrens,this.activeMenuList.find((function(menu){return menu.path.path.endsWith("portfolio")}))?this.activeMenuList=this.activeMenuList.map((function(ele){return ele.path.path===portfolio.path.path?currentBuilding:ele})):this.moreMenuList=this.moreMenuList.map((function(ele){return ele.path.path===portfolio.path.path?currentBuilding:ele})))}else this.menu.length&&"/app/em/newdashboard"===this.$route.path&&(this.menu[0].disable&&this.menu[0].childrens&&this.menu[0].childrens.length>1&&this.menu[0].childrens[0].disable?this.$router.push(this.menu[0].childrens[1].path.path):this.$router.push(this.menu[0].path.path))}},moreMenuOpened:function(){this.isMoreMenuActive=!0},moreMenuClosed:function(){this.isMoreMenuActive=!1},checkAndSetMoreList:function(newView){if(newView){var index,menu=this.moreMenuList.find((function(menu,idx){if(menu.name===newView)return index=idx,!0}));menu&&this.openSubTab(menu,index,!0)}},rearrange:function(){this.$refs.shpopover.close(),this.$emit("rearrange")}}},components_Subheadervue_type_script_lang_js=Subheadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Subheadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Subheader=component.exports},
/***/964401:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return EditSiteReading}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/EditSiteReading.vue?vue&type=template&id=463776f6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog45 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("el-form",{ref:"newAssetReadingForm",attrs:{model:_vm.module,"label-position":"top"}},[_c("div",{staticClass:"new-header-container border-none"},[_c("div",{staticClass:"setup-modal-title"},[_vm._v("Edit "+_vm._s(_vm.resourceType)+" Reading")])]),_c("div",{staticStyle:{height:"calc(100vh - 220px)","overflow-y":"scroll"}},[_c("div",{staticClass:"setup-formula-block2",staticStyle:{"border-top":"none",background:"#f5f8fb","border-bottom":"1px solid #e2e8ee","padding-top":"20px","padding-bottom":"27px"}},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"label-txt2"},[_vm._v("Field Name")]),_c("el-input",{staticClass:"input-background-remove fc-input-full-border2",staticStyle:{width:"240px",background:"none"},model:{value:_vm.module.fields[0].displayName,callback:function($$v){_vm.$set(_vm.module.fields[0],"displayName",$$v)},expression:"module.fields[0].displayName"}})],1),_vm.categoryName?_c("el-col",{attrs:{span:8}},[_c("p",{staticClass:"label-txt-blue"},[_vm._v("Category")]),_c("p",{staticClass:"label-txt-black"},[_vm._v(_vm._s(_vm.categoryName))])]):_vm._e(),_c("el-col",{attrs:{span:4}},[_c("p",{staticClass:"label-txt-blue"},[_vm._v("Type")]),_c("p",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.module.fields[0].counterField?"Counter":_vm.$constants.dataType[_vm.module.fields[0].dataType])+" ")])])],1),2===_vm.module.fields[0].dataType||3===_vm.module.fields[0].dataType?_c("el-row",{staticClass:"pT10 pB10"},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"label-txt-blue"},[_vm._v("Metric")]),_c("el-select",{staticClass:"fc-radio-btn fc-radio-btn2 fc-input-full-border2",staticStyle:{width:"240px"},on:{change:function($event){return _vm.loadUnit(_vm.module.fields[0])}},model:{value:_vm.module.fields[0].metric,callback:function($$v){_vm.$set(_vm.module.fields[0],"metric",$$v)},expression:"module.fields[0].metric"}},_vm._l(_vm.metricsUnits.metrics,(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.name,value:dtype.metricId}})})),1)],1),_c("el-col",{attrs:{span:4}},[_c("p",{staticClass:"label-txt-blue"},[_vm._v("Unit")]),_c("el-select",{staticClass:"fc-radio-btn fc-radio-btn2 fc-input-full-border2",staticStyle:{width:"240px"},model:{value:_vm.module.fields[0].unitId,callback:function($$v){_vm.$set(_vm.module.fields[0],"unitId",$$v)},expression:"module.fields[0].unitId"}},_vm._l(_vm.unitsForMetric,(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.displayName+" ("+dtype.symbol+")",value:dtype.unitId}})})),1)],1)],1):_vm._e(),4===_vm.module.fields[0].dataType?_c("el-row",{staticClass:"pT10 pB10"},[_c("p",{staticClass:"label-txt-blue"},[_vm._v("Boolean Values")]),_c("div",{staticClass:"row"},[_c("div",{staticStyle:{display:"flex","align-items":"center"}},[_c("el-input",{staticClass:"input-background-remove fc-input-full-border2",staticStyle:{width:"240px",background:"none"},model:{value:_vm.module.fields[0].trueVal,callback:function($$v){_vm.$set(_vm.module.fields[0],"trueVal",$$v)},expression:"module.fields[0].trueVal"}}),_c("div",{staticClass:"pL5"},[_vm._v("(+ve)")])],1)]),_c("div",{staticClass:"row pT10"},[_c("div",{staticStyle:{display:"flex","align-items":"center"}},[_c("el-input",{staticClass:"input-background-remove fc-input-full-border2",staticStyle:{width:"240px",background:"none"},model:{value:_vm.module.fields[0].falseVal,callback:function($$v){_vm.$set(_vm.module.fields[0],"falseVal",$$v)},expression:"module.fields[0].falseVal"}}),_c("div",{staticClass:"pL5"},[_vm._v("(-ve)")])],1)])]):8===_vm.module.fields[0].dataType?_c("el-row",{staticClass:"pT10 pB10"},[_c("p",{staticClass:"label-txt-blue"},[_vm._v("Pick List Options")]),_vm._l(_vm.module.fields[0].options,(function(option,index){return _c("div",{key:option,staticStyle:{"padding-bottom":"10px"}},[_c("div",{staticClass:"row"},[_c("div",{staticStyle:{"padding-left":"3px"}},[_c("el-input",{staticClass:"input-background-remove fc-input-full-border2",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:""},model:{value:option.name,callback:function($$v){_vm.$set(option,"name",$$v)},expression:"option.name"}})],1),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.module.fields[0].options.length>2,expression:"module.fields[0].options.length > 2"}],staticClass:" pL10 optionremoveicon",staticStyle:{"align-self":"center"},on:{click:function($event){return _vm.removeOption(_vm.module.fields[0].options,index)}}},[_c("img",{staticStyle:{height:"14px"},attrs:{src:__webpack_require__(385769)}})]),_c("div",{directives:[{name:"show",rawName:"v-show",value:index+1===_vm.module.fields[0].options.length,expression:"index + 1 === module.fields[0].options.length"}],staticClass:"pL10",staticStyle:{"align-self":"center"},on:{click:function($event){return _vm.addOptionsFields(_vm.module.fields[0].options,index)}}},[_c("img",{staticStyle:{height:"14px"},attrs:{src:__webpack_require__(353654)}})]),_c("div",{staticClass:"clearboth"})])])}))],2):_vm._e()],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("Save")])],1)])],1)},staticRenderFns=[],esm_typeof=__webpack_require__(103336),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(76265),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(162506),__webpack_require__(420629)),EditSiteReadingvue_type_script_lang_js={props:["visibility","model","resourceType","unitDetails"],data:function(){return{metricsUnits:this.unitDetails,numberFields:null,unitsForMetric:null,module:{categoryId:null,includeValidations:!1,fields:[{safeLimitId:-1,raiseSafeLimitAlarm:!1,displayName:"",dataType:1,lesserThan:null,greaterThan:null,betweenTo:null,betweenFrom:null,safeLimitPattern:"none",safeLimitSeverity:"Minor"}]}}},created:function(){this.$store.dispatch("loadAssetCategory")},mounted:function(){var _this=this;if(this.model){if(this.model.fields[0].unitId=this.model.fields[0].unitId>0?parseInt(this.model.fields[0].unitId):null,this.model.fields[0].metric=this.model.fields[0].metric>0?parseInt(this.model.fields[0].metric):null,this.model.fields[0].metricEnum=this.model.fields[0].metricEnum?this.model.fields[0].metricEnum:null,this.model.fields[0].metric>0&&this.metricsUnits.metrics){var metric=this.metricsUnits.metrics.filter((function(d){if(d.metricId===_this.model.fields[0].metric)return d}));this.unitsForMetric=this.metricsUnits.metricWithUnits[metric[0]._name]}8===this.model.fields[0].dataType&&(this.model.fields[0].options=[],this.model.fields[0].values.forEach((function(d){_this.model.fields[0].options.push({name:d})}))),4===this.model.fields[0].dataType&&(this.model.fields[0].trueVal||(this.model.fields[0].trueVal="True"),this.model.fields[0].falseVal||(this.model.fields[0].falseVal="False")),Object.assign(this.module,this.$helpers.cloneObject(this.model))}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{categoryName:function(){var _this2=this;if(this.module.categoryId){var category=this.assetCategory.find((function(category){return category.id===_this2.module.categoryId}));if(category)return category.name}return""}}),methods:{removeOption:function(list,index){list.splice(index,1),this.$forceUpdate()},addOptionsFields:function(field){field.push({name:""}),this.$forceUpdate()},loadUnit:function(field){if(field.metric>0){var metric=this.metricsUnits.metrics.filter((function(d){if(d.metricId===field.metric)return d}));"PERCENTAGE"===metric[0]._name&&this.metricsUnits.metricWithUnits[metric[0]._name].splice(1,1),this.unitsForMetric=this.metricsUnits.metricWithUnits[metric[0]._name]}this.module.fields[0].unitId=null},cancel:function(){this.$emit("canceled")},save:function(){var url,params,_this3=this;this.module.fields&&(8===this.module.fields[0].dataType&&8===this.module.fields[0].dataType&&(this.module.fields[0].values=[],this.module.fields[0].options&&this.module.fields[0].options.forEach((function(d){d.name&&_this3.module.fields[0].values.push(d.name?d.name:null)}))),this.module.fields[0].readingRules=[],url="/reading/updatesetupreading",params={fieldJson:this.module.fields[0],moduleId:this.module.fields[0]?this.module.fields[0].moduleId:this.module.numberFields[0].moduleId},this.$http.post(url,params).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)?(_this3.$message.success("Reading Updated successfully."),_this3.$emit("saved"),_this3.closeDialog()):_this3.$message.error("Reading updation failed.")})))},closeDialog:function(){this.$emit("update:visibility",!1)},forceUpdate:function(){this.$forceUpdate()}}},setup_EditSiteReadingvue_type_script_lang_js=EditSiteReadingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_EditSiteReadingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,EditSiteReading=component.exports},
/***/371791:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SpaceReadings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/SpaceReadings.vue?vue&type=template&id=20681528
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 user-layout"},[_c("div",{staticClass:"setting-header2"},[_vm._m(0),_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:function($event){_vm.showDialog=!0}}},[_vm._v("New Space Readings")]),_c("new-asset-reading",{attrs:{isNew:!0,resourceType:"Space",visibility:_vm.showDialog},on:{saved:_vm.aftersave,"update:visibility":function($event){_vm.showDialog=$event}}})],1)]),_c("subheader",{attrs:{menu:_vm.subheaderMenu,parent:"app/setup/assetsettings/"}}),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table mT70"},[_vm._m(1),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):0===_vm.spaceReadingFields.length?_c("tbody",[_vm._m(2)]):_c("tbody",_vm._l(_vm.spaceReadingFields,(function(field,index){return _c("tr",{key:index,staticClass:"tablerow"},[_c("td",[_vm._v(" "+_vm._s(-1==field.categoryId?"All Spaces":_vm.$store.getters.getSpaceCategoryPickList()[field.categoryId])+" ")]),_c("td",[_vm._v(" "+_vm._s(field.displayName)+" ")]),_c("td",[_vm._v(" "+_vm._s(field.dataTypeEnum)+" ")]),_c("td",{staticStyle:{width:"30%"}},[_c("div",{staticClass:"text-left actions",staticStyle:{"margin-top":"-3px","margin-right":"15px","text-align":"center"}},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Reading"},on:{click:function($event){return _vm.editReadingField(field)}}})])])])})),0)])])])]),_vm.editshowDialog?_c("edit-site-reading",{attrs:{model:_vm.model,visibility:_vm.editshowDialog,unitDetails:_vm.metricsUnits,resourceType:"space"},on:{"update:visibility":function($event){_vm.editshowDialog=$event},saved:_vm.aftersave}}):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title"},[_vm._v("Space Readings")]),_c("div",{staticClass:"heading-description"},[_vm._v("List of all Space Readings")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("SPACE CATEGORY")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("FIELD NAME")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("FIELD TYPE")]),_c("th")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("tr",[_c("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"100%"}},[_vm._v(" NO DATA ")])])}],NewAssetReadingvue_type_template_id_5462780d_render=(__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(162506),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog45 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("el-form",{ref:"newAssetReadingForm",attrs:{model:_vm.module,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-modal"},[_c("div",{staticClass:"new-header-text"},[_vm.isNew?_c("div",{staticClass:"setup-modal-title"},[_vm._v(" New "+_vm._s(_vm.resourceType)+" Reading ")]):_c("div",{staticClass:"setup-modal-title"},[_vm._v(" Edit "+_vm._s(_vm.resourceType)+" Reading ")])])])]),_c("div",{staticClass:"new-body-modal mT20 pB20"},["Asset"===_vm.resourceType?_c("div",[_c("div",{staticClass:"label-txt-black pB10"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.select_category"))+" ")]),_c("div",[_c("el-select",{staticClass:"width250px fc-input-full-border-select2",attrs:{disabled:_vm.module.disableUneditable,filterable:"",clearable:"",placeholder:_vm.$t("setup.setup.select_category")},model:{value:_vm.module.categoryId,callback:function($$v){_vm.$set(_vm.module,"categoryId",$$v)},expression:"module.categoryId"}},_vm._l(_vm.assetCategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.name,value:category.id}})})),1)],1)]):_vm._e(),"Space"===_vm.resourceType?_c("div",[_c("div",{staticClass:"label-txt-black pB10"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.select_category"))+" ")]),_c("div",[_c("el-select",{staticClass:"width250px fc-input-full-border-select2",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("setup.setup.select_category")},model:{value:_vm.module.categoryId,callback:function($$v){_vm.$set(_vm.module,"categoryId",$$v)},expression:"module.categoryId"}},_vm._l(_vm.$store.getters.getSpaceCategoryPickList(),(function(category,index){return _c("el-option",{key:index,attrs:{label:category,value:index}})})),1)],1)]):_vm._e(),"site"===_vm.resourceType?_c("div",[_c("div",{staticClass:"label-txt-black pB10"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.select_site"))+" ")]),_c("div",{},[_c("el-select",{staticClass:"width250px fc-input-full-border-select2",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("setup.setup.select_site")},model:{value:_vm.module.categoryId,callback:function($$v){_vm.$set(_vm.module,"categoryId",$$v)},expression:"module.categoryId"}},_vm._l(_vm.picklistOptions,(function(option,index){return _c("el-option",{key:index,attrs:{label:option,value:index}})})),1)],1)]):_vm._e(),"Asset"===_vm.resourceType?_c("div",{staticClass:"mT20"},[_c("el-checkbox",{attrs:{disabled:_vm.module.disableUneditable},model:{value:_vm.isFormulaField,callback:function($$v){_vm.isFormulaField=$$v},expression:"isFormulaField"}},[_vm._v("Is Formula Field")])],1):_vm._e(),_vm.isFormulaField?_c("div",{staticClass:"mT20"},[_c("el-form-item",{staticStyle:{width:"38%"},attrs:{label:"Field Name"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",model:{value:_vm.formula.name,callback:function($$v){_vm.$set(_vm.formula,"name",$$v)},expression:"formula.name"}})],1),_c("div",{staticClass:"label-txt-black pB10"},[_vm._v("Asset(s)")]),_c("div",{staticClass:"add f-element resource-list"},[_c("div",[_c("el-select",{staticClass:"multi fc-input-full-border-select2",staticStyle:{width:"80%"},attrs:{multiple:"",disabled:""},model:{value:_vm.dummyAssertValue,callback:function($$v){_vm.dummyAssertValue=$$v},expression:"dummyAssertValue"}},[_c("el-option",{attrs:{label:_vm.resourceLabel,value:1}})],1),_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix",disabled:_vm.isAssertDisabled},on:{click:function($event){!_vm.isAssertDisabled&&(_vm.chooserVisibility=!0)}},slot:"suffix"})],1)])],1):_vm._e(),"Asset"===_vm.resourceType?_c("div",{},[_vm.isFormulaField?_c("f-formula-builder",{attrs:{module:"formulaField",assetCategory:{id:_vm.module.categoryId}},model:{value:_vm.formula.workflow,callback:function($$v){_vm.$set(_vm.formula,"workflow",$$v)},expression:"formula.workflow"}}):_c("f-module-builder",{model:{value:_vm.module,callback:function($$v){_vm.module=$$v},expression:"module"}})],1):_c("div",{},[_c("f-module-builder",{model:{value:_vm.module,callback:function($$v){_vm.module=$$v},expression:"module"}})],1)]),_vm.chooserVisibility?_c("space-asset-multi-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:_vm.resourceData,showAsset:!0},on:{associate:_vm.associateResource,"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("Save")])],1)],1)],1)}),NewAssetReadingvue_type_template_id_5462780d_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),esm_typeof=__webpack_require__(103336),objectSpread2=__webpack_require__(595082),FModuleBuildervue_type_template_id_148ac8ad_render=(__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(947522),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-form",{attrs:{inline:!0,model:_vm.value,"label-position":"top"}},[_vm.value&&_vm.value.fields?_c("div",_vm._l(_vm.value.fields,(function(field,index){return _c("div",{key:index},[_c("el-row",{staticClass:"module-builder mT20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"new-label-text pB10"},[_vm._v("Fields")]),_c("el-form-item",[_c("el-input",{staticClass:"width250px fc-input-full-border-select2",attrs:{placeholder:"Field name"},model:{value:field.displayName,callback:function($$v){_vm.$set(field,"displayName",$$v)},expression:"field.displayName"}})],1)],1),_c("el-col",{staticClass:"pL0",attrs:{span:12}},[_c("div",{staticClass:"new-label-text pB10"},[_vm._v("Fields Types")]),_c("el-form-item",[_c("el-select",{staticClass:"width250px fc-input-full-border-select2",attrs:{disabled:_vm.value&&_vm.value.disableUneditable},model:{value:field.dataType,callback:function($$v){_vm.$set(field,"dataType",$$v)},expression:"field.dataType"}},_vm._l(_vm.dataTypes,(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.label,value:dtype.value}})})),1)],1),!_vm.value.includeValidations||2!==field.dataType&&3!==field.dataType?_vm._e():_c("div",[_c("div",{staticClass:"new-label-text pB10"},[_vm._v("Input Pattern")]),_c("el-form-item",[_c("el-select",{staticClass:"width250px fc-input-full-border-select2",on:{change:_vm.forceUpdate},model:{value:field.inputPattern,callback:function($$v){_vm.$set(field,"inputPattern",$$v)},expression:"field.inputPattern"}},[_c("el-option",{key:"none",attrs:{label:"None",value:"none"}}),_c("el-option",{key:"incremental",attrs:{label:"Incremental",value:"incremental"}}),_c("el-option",{key:"decremental",attrs:{label:"Decremental",value:"decremental"}})],1)],1),_c("el-form-item",[_c("el-checkbox",{on:{change:_vm.forceUpdate},model:{value:field.raiseInputPatternAlarm,callback:function($$v){_vm.$set(field,"raiseInputPatternAlarm",$$v)},expression:"field.raiseInputPatternAlarm"}},[_vm._v("Raise Alarm")])],1),_c("div",{directives:[{name:"show",rawName:"v-show",value:field.raiseInputPatternAlarm,expression:"field.raiseInputPatternAlarm"}]},[_c("div",{staticClass:"new-label-text pB10"},[_vm._v("Alarm Severity")]),_c("el-form-item",[_c("el-select",{staticClass:"width250px fc-input-full-border-select2",on:{change:_vm.forceUpdate},model:{value:field.inputPatternSeverity,callback:function($$v){_vm.$set(field,"inputPatternSeverity",$$v)},expression:"field.inputPatternSeverity"}},_vm._l(_vm.alarmSeverity,(function(type,idx){return _c("el-option",{key:idx,attrs:{label:type,value:type}})})),1)],1)],1),_c("div",{staticClass:"new-label-text"},[_vm._v("Safe Limit")]),_c("el-form-item",{attrs:{label:"Minimum Value"}},[_c("el-input",{staticClass:"width250px fc-input-full-border-select2",on:{change:_vm.forceUpdate},model:{value:field.minSafeLimit,callback:function($$v){_vm.$set(field,"minSafeLimit",$$v)},expression:"field.minSafeLimit"}})],1),_c("el-form-item",{attrs:{label:"Maximum Value"}},[_c("el-input",{staticClass:"width250px fc-input-full-border-select2",model:{value:field.maxSafeLimit,callback:function($$v){_vm.$set(field,"maxSafeLimit",$$v)},expression:"field.maxSafeLimit"}})],1),_c("el-form-item",[_c("el-checkbox",{on:{change:_vm.forceUpdate},model:{value:field.raiseSafeLimitAlarm,callback:function($$v){_vm.$set(field,"raiseSafeLimitAlarm",$$v)},expression:"field.raiseSafeLimitAlarm"}},[_vm._v("Raise Alarm")])],1),_c("div",{directives:[{name:"show",rawName:"v-show",value:field.raiseSafeLimitAlarm,expression:"field.raiseSafeLimitAlarm"}]},[_c("div",{staticClass:"new-label-text pB10"},[_vm._v("Alarm Severity")]),_c("el-form-item",[_c("el-select",{staticClass:"width250px fc-input-full-border-select2",on:{change:_vm.forceUpdate},model:{value:field.safeLimitSeverity,callback:function($$v){_vm.$set(field,"safeLimitSeverity",$$v)},expression:"field.safeLimitSeverity"}},_vm._l(_vm.alarmSeverity,(function(type,idx){return _c("el-option",{key:idx,attrs:{label:type,value:type}})})),1)],1)],1)],1),_c("el-form-item",{staticClass:"module-builder-close"},[_vm.value&&!_vm.value.disableUneditable?_c("el-button",{staticClass:"f18",attrs:{type:"text",icon:"el-icon-close"},on:{click:function($event){return _vm.deleteRow(index)}}}):_vm._e()],1)],1)],1)],1)})),0):_vm._e(),_vm.value&&!_vm.value.disableUneditable?_c("el-button",{staticClass:"btn-modal-fill mT20",attrs:{type:"info",plain:"",icon:"el-icon-plus"},on:{click:_vm.addRow}},[_vm._v("Add Field")]):_vm._e()],1)}),FModuleBuildervue_type_template_id_148ac8ad_staticRenderFns=[],FModuleBuildervue_type_script_lang_js={props:["value"],data:function(){return{alarmSeverity:["Critical","Major","Minor"],dataTypes:[{label:"Text",value:1},{label:"Number",value:2},{label:"Decimal",value:3},{label:"Boolean",value:4}]}},created:function(){this.$store.dispatch("loadAlarmSeverity")},methods:{addRow:function(){this.value.fields.push({raiseSafeLimitAlarm:!1,raiseInputPatternAlarm:!1,displayName:"",dataType:1,minSafeLimit:null,maxSafeLimit:null,safeLimitSeverity:"Minor",inputPatternSeverity:"Minor",inputPattern:"none",inputPatternId:-1,safeLimitId:-1})},deleteRow:function(index){index&&this.value&&this.value.fields&&this.value.fields.splice(index,1)},forceUpdate:function(){this.$forceUpdate()}}},components_FModuleBuildervue_type_script_lang_js=FModuleBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FModuleBuildervue_type_script_lang_js,FModuleBuildervue_type_template_id_148ac8ad_render,FModuleBuildervue_type_template_id_148ac8ad_staticRenderFns,!1,null,null,null)
/* harmony default export */,FModuleBuilder=component.exports,FFormulaBuilder=__webpack_require__(902294),SpaceAssetMultiChooser=__webpack_require__(673362),vuex_esm=__webpack_require__(420629),picklist=__webpack_require__(961358),NewAssetReadingvue_type_script_lang_js={props:["data","resourceType","visibility","isNew","model"],components:{FModuleBuilder:FModuleBuilder,FFormulaBuilder:FFormulaBuilder/* default */.Z,SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},data:function(){return{formTitle:"New Asset Reading",categoryList:[],dataTypeEnum:["Text","Number","Decimal","Boolean"],module:{disableUneditable:!1,categoryId:null,includeValidations:!1,fields:[{safeLimitId:-1,inputPatternId:-1,raiseSafeLimitAlarm:!1,raiseInputPatternAlarm:!1,displayName:"",dataType:1,minSafeLimit:null,maxSafeLimit:null,safeLimitSeverity:"Minor",inputPatternSeverity:"Minor"}]},picklistOptions:{},isFormulaField:!1,formula:{name:"",workflow:null,includedResources:[]},dummyAssertValue:[1],chooserVisibility:!1}},mounted:function(){this.init(),!this.isNew&&this.model&&Object.assign(this.module,this.model)},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{resourceData:function(){return{assetCategory:this.module.categoryId,isIncludeResource:!0,selectedResources:this.formula.includedResources.map((function(resource){return{id:resource&&"object"===(0,esm_typeof/* default */.Z)(resource)?resource.id:resource}}))}},categoryName:function(){var _this=this;if(this.module.categoryId){var category=this.assetCategory.find((function(category){return category.id===_this.module.categoryId}));if(category)return category.name}return""},isAssertDisabled:function(){return"Asset"===this.resourceType&&this.module.categoryId<0},resourceLabel:function(){if(this.dummyAssertValue=[1],this.model.categoryId){var message,selectedCount=this.formula.includedResources.length;if(selectedCount){if(1===selectedCount)return this.includedResources[0].name;message=selectedCount+" "+this.categoryName+(selectedCount>1?"s":"")+" included"}else message="All "+this.categoryName+"s selected";return message}this.dummyAssertValue=[]}}),methods:{associateResource:function(selectedObj){selectedObj.resourceList&&selectedObj.resourceList.length&&(this.formula.includedResources=selectedObj.resourceList),this.chooserVisibility=!1},init:function(){"Asset"===this.resourceType&&(this.module.includeValidations=!0),"site"===this.resourceType&&this.loadPickList("site")},loadPickList:function(moduleName){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this2.picklistOptions={},_context.next=3,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 3:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this2.$message.error(error.message||"Error Occured"):_this2.picklistOptions=options;case 7:case"end":return _context.stop()}}),_callee)})))()},cancel:function(){this.$emit("canceled")},save:function(){var _this3=this;if(this.isNew)this.saveNew();else{var url="/reading/updatesetupreading";if(this.module.fields){this.setReadingRules(this.module.fields[0],this.module.categoryId);var delReadingRulesIds=[];"none"===this.module.fields[0].inputPattern&&this.module.fields[0].inputPatternId&&-1!==this.module.fields[0].inputPatternId&&delReadingRulesIds.push(this.module.fields[0].inputPatternId),this.$http.post(url,{field:this.module.fields[0],moduleId:this.module.fields[0].moduleId,delReadingRulesIds:delReadingRulesIds}).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)?(_this3.$message.success("Reading Updated successfully."),_this3.reset(),_this3.$emit("saved"),_this3.closeDialog()):_this3.$message.error("Reading updation failed.")}))}}},setReadingRules:function(f,categoryId){f.readingRules=[],"incremental"!==f.inputPattern&&"decremental"!==f.inputPattern||f.readingRules.push({id:f.inputPatternId,name:"incremental"===f.inputPattern?"Incremental":"Decremental",ruleType:9,event:{activityType:1},assetCategoryId:categoryId,thresholdType:5,workflow:{expressions:[{name:"a",constant:"${inputValue}"},{name:"b",constant:"${previousValue}"}],parameters:[{name:"inputValue",typeString:2===f.dataType?"Number":"Decimal"},{name:"previousValue",typeString:2===f.dataType?"Number":"Decimal"}],resultEvaluator:"incremental"===f.inputPattern?"(b!=-1)&&(a<b)":"(b!=-1)&&(a>b)"},actions:f.raiseInputPatternAlarm?[{actionType:6,templateJson:{fieldMatcher:[{field:"message",value:"".concat(f.displayName," should be incremental")},{field:"severity",value:f.inputPatternSeverity}]}}]:null}),null===f.minSafeLimit&&null===f.maxSafeLimit||f.readingRules.push({id:f.safeLimitId,name:"Safe Limit",ruleType:9,event:{activityType:1},assetCategoryId:categoryId,thresholdType:5,workflow:{expressions:[{name:"a",constant:"${inputValue}"},{name:"b",constant:null===f.minSafeLimit?-1:f.minSafeLimit},{name:"c",constant:null===f.maxSafeLimit?-1:f.maxSafeLimit}],parameters:[{name:"inputValue",typeString:2===f.dataType?"Number":"Decimal"}],resultEvaluator:"(b!=-1&&a<b)||(c!=-1&&a>c)"},actions:f.raiseSafeLimitAlarm?[{actionType:6,templateJson:{fieldMatcher:[{field:"message",value:"".concat(f.displayName," should be within safe limit")},{field:"severity",value:f.safeLimitSeverity}]}}]:null})},saveNew:function(){var url,param,_this4=this,formModel=this.module;if(this.isFormulaField){var formula=this.$helpers.cloneObject(this.formula);formula.assetCategoryId=this.module.categoryId,formula.includedResources=formula.includedResources.map((function(resource){return resource.id}));var formulaField=this.$common.getFormulaFieldFromWorkflow(this.formula.workflow,formula);url="/reading/addformula",param={formula:formulaField}}else url="/reading/addsetupreading",this.module.includeValidations&&this.module.fields&&this.module.fields.forEach((function(f){return _this4.setReadingRules(f,formModel.categoryId)})),param={resourceType:this.resourceType,fields:this.module.fields,parentCategoryId:formModel.categoryId,readingName:this.module.fields[0].displayName};this.$http.post(url,param).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)?(_this4.$message.success(" New Reading added successfully."),_this4.reset(),_this4.$emit("saved"),_this4.closeDialog()):_this4.$message.error(" New Reading addition failed.")}))},closeDialog:function(){this.$emit("update:visibility",!1)},reset:function(){this.$refs.newAssetReadingForm.categoryId="",this.$refs.newAssetReadingForm.fields=[]}}},setup_NewAssetReadingvue_type_script_lang_js=NewAssetReadingvue_type_script_lang_js,NewAssetReading_component=(0,componentNormalizer/* default */.Z)(setup_NewAssetReadingvue_type_script_lang_js,NewAssetReadingvue_type_template_id_5462780d_render,NewAssetReadingvue_type_template_id_5462780d_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewAssetReading=NewAssetReading_component.exports,Subheader=__webpack_require__(785869),EditSiteReading=__webpack_require__(964401),SpaceReadingsvue_type_script_lang_js={title:function(){return"Space Reading"},components:{NewAssetReading:NewAssetReading,Subheader:Subheader/* default */.Z,EditSiteReading:EditSiteReading/* default */.Z},data:function(){return{metricsUnits:null,loading:!0,spaceCategories:[],spaceReadingFields:[],loadForm:!1,model:{},editshowDialog:!1,showDialog:!1,subheaderMenu:[{label:"Asset Readings",path:{path:"/app/setup/assetsettings/readings"}},{label:"Site",path:{path:"/app/setup/assetsettings/sitereadings"}},{label:"Building",path:{path:"/app/setup/assetsettings/buildingreadings"}},{label:"Floor",path:{path:"/app/setup/assetsettings/floorreadings"}},{label:"Space",path:{path:"/app/setup/assetsettings/spacereadings"}}]}},mounted:function(){this.loadDefaultMetricUnits(),this.getAllSpaceReadings()},created:function(){this.$store.dispatch("loadSpaceCategory")},methods:{aftersave:function(){
// this.$refs.newAssetReadingDialog.close()
this.spaceReadingFields=[],this.getAllSpaceReadings()},showNewReading:function(){this.$refs.newAssetReadingDialog.open(),this.loadForm=!0},getAllSpaceReadings:function(){var self=this;this.$http.get("/reading/getallspacereadings").then((function(response){for(var categoryId in self.spaceCategories=response.data,response.data){var moduleJson=response.data[categoryId];for(var moduleIndex in moduleJson){var readingFields=moduleJson[moduleIndex].fields;for(var fieldIndex in readingFields){var field=readingFields[fieldIndex];field["categoryId"]=categoryId,self.spaceReadingFields.push(field)}}}self.loading=!1}))},newSpaceReadingDialog:function(){this.$refs.newSpaceReading.open()},editSpaceCategoryDialog:function(data){this.$refs.editSpaceCategory.open(data)},deleteCategories:function(data,index,id){var that=this;that.$http.post("/spacecategory/delete",{spaceCategoryIds:[id]}).then((function(response){response.data.resultAction?(that.spaceCategories.splice(index,1),that.$message.success(response.data.resultMessage)):that.$message.error(response.data.resultMessage)}))},editReadingField:function(field){this.model.fields=[field],this.editshowDialog=!0},loadDefaultMetricUnits:function(){var self=this;self.$http.get("/units/getDefaultMetricUnits").then((function(response){self.metricsUnits=response.data}))}}},setup_SpaceReadingsvue_type_script_lang_js=SpaceReadingsvue_type_script_lang_js,SpaceReadings_component=(0,componentNormalizer/* default */.Z)(setup_SpaceReadingsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceReadings=SpaceReadings_component.exports},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/385769:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4a9843791f38c4a28fdf9f0a4584780d.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/81811.js.map