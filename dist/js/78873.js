"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[78873],{
/***/678873:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewChartOptimize}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FNewChartOptimize.vue?vue&type=template&id=2deff402
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return"single"===_vm.reportObj.options.settings.chartMode||this.resultObj&&this.resultObj.scatterConfig?_c("div",{staticClass:"height100 f-singlechart mL20 mR20",class:this.resultObj&&this.resultObj.scatterConfig?"fc-scatter-chart":""},[_vm.hidecharttypechanger?_vm._e():_c("f-chart-type",{staticClass:"charttypechanger fc-new--chart-type-single",attrs:{options:_vm.options}}),_vm.chartContext&&!1!==_vm.options.settings.chart?_c("div",{staticStyle:{"text-align":"center"}},[_vm.options.legend.show&&"top"===_vm.options.legend.position?_c("f-chart-legends",{ref:"chartLegendtop",attrs:{chart:_vm.c3.chart,config:_vm.config,resultObj:_vm.resultObj}}):_vm._e(),_c("div",{style:_vm.isWidget?"position: relative; top: 15px;":""},[_vm.showAlarms?_c("div",{staticClass:"fc-alarms-chart-title"},[_vm._v("Alarms")]):_vm._e(),_c("div",{ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart"})]),_c("div",{staticClass:"fc-newchart-container",class:{"scatter-full-opacity":_vm.c3.params&&_vm.c3.params.data&&_vm.c3.params.data.types&&!Object.values(_vm.c3.params.data.types).includes("bubble")}},[_c("div",{ref:"newChartEle",staticClass:"fc-new-chart pdf-chart",class:{"hide-y2-axis":_vm.options&&_vm.options.axis&&!1===_vm.options.axis.showy2axis}}),_vm.options.legend.show&&"right"===_vm.options.legend.position?_c("f-chart-legends",{ref:"chartLegendright",style:{width:_vm.options.legend.width+"px"},attrs:{config:_vm.config,resultObj:_vm.resultObj}}):_vm._e()],1),_vm.options.legend.show&&"bottom"===_vm.options.legend.position?_c("f-chart-legends",{ref:"chartLegendbottom",attrs:{config:_vm.config,resultObj:_vm.resultObj}}):_vm._e(),_c("f-widget-legends",{ref:"newWidget",staticClass:"widget-legends"})],1):_vm._e()],1):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),billboard=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(670560),__webpack_require__(76265),__webpack_require__(169358),__webpack_require__(872695)),basechart=__webpack_require__(503162),c3_helper=__webpack_require__(167021),FChartLegendsOptimizevue_type_template_id_5bc97295_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.legends&&_vm.legends.length?_c("div",{staticClass:"fLegendContainer fLegendContainer-new fLegendContainer-right"},[_vm._l(_vm.legends,(function(legend){return["datapoint"===legend.type||"rangeGroup"===legend.type?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.getVisibledDataPoints(legend),expression:"getVisibledDataPoints(legend)"}],key:legend.key,staticClass:"legendBoxNew legendBoxNew-fchart f-legendnew",class:{active:-1===_vm.hideLegend.indexOf(legend.key)},attrs:{title:legend.duplicateDataPoint&&_vm.aggrMap[legend.aggr]&&0!==_vm.config.period?_vm.aggrMap[legend.aggr]+" of "+legend.label:legend.label},on:{mouseover:function($event){return _vm.focusLegend(legend.key)},mouseout:function($event){return _vm.unfocusLegend(legend.key)}}},[_vm.isScatterPlot&&3!=legend.pointType?_c("div",{staticClass:"mL10 mR5",on:{click:function($event){return _vm.openScatterOptions(legend.key)}}},[_vm.options&&"palette"===_vm.options.scatter.color.mode?_c("img",{staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)}}):_c("chart-shapes",{attrs:{activeColor:legend.color,activeShape:legend.pointCustomization.shape}})],1):_vm.groupedByTime||"ENUM"===legend.dataType?_c("img",{staticClass:"mL10 mR5",staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)},on:{click:function($event){return _vm.openGroupByColorPalette(legend.key)}}}):_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:legend.color,callback:function($$v){_vm.$set(legend,"color",$$v)},expression:"legend.color"}}),_c("span",{staticClass:"datapoint-leabel",on:{click:function($event){return _vm.toggleLegend(legend.key)}}},[_vm._v(_vm._s(_vm.isDuplicatePoint(legend)?_vm.aggrMap[legend.aggr]+" of "+legend.label:legend.label))]),_vm.$route.meta&&_vm.$route.meta.component&&"analytics"===_vm.$route.meta.component&&3!=legend.pointType?_c("el-tooltip",{staticClass:"dp-remove-icon",attrs:{effect:"dark",content:"remove data point"}},[_c("span",{staticClass:"datapoint-remove",on:{click:function($event){return _vm.removeDataPoint(_vm.options,_vm.config,legend,legend.key)}}},[_c("i",{staticClass:"el-icon-close"})])]):_vm._e()],1):legend.children&&legend.children.length?_vm._l(legend.children,(function(child){return _c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==child.visible&&"x"!==child.axes,expression:"child.visible !== false && child.axes !== 'x'"}],key:child.key,staticClass:"f-legendnew legendBoxNew legendBoxNew-fchart",class:{active:-1===_vm.hideLegend.indexOf(child.key)},attrs:{title:_vm.isDuplicatePoint(child)?_vm.aggrMap[child.aggr]+" of "+child.label:child.label},on:{mouseover:function($event){return _vm.focusLegend(child.key)},mouseout:function($event){return _vm.unfocusLegend(child.key)}}},[_vm.isScatterPlot&&3!==child.pointType?_c("div",{staticClass:"mL10 mR5",on:{click:function($event){return _vm.openScatterOptions(child.key)}}},[_vm.options&&"palette"===_vm.options.scatter.color.mode?_c("img",{staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)}}):_c("chart-shapes",{attrs:{activeColor:child.color,activeShape:child.pointCustomization.shape}})],1):_vm.groupedByTime?_c("img",{staticClass:"mL10 mR5",staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)},on:{click:function($event){return _vm.openGroupByColorPalette(child.key)}}}):"ENUM"===child.dataType?_c("img",{staticClass:"mL10 mR5",staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)},on:{click:function($event){return _vm.openEnumDialog(child)}}}):_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:child.color,callback:function($$v){_vm.$set(child,"color",$$v)},expression:"child.color"}}),_c("span",{staticClass:"datapoint-leabel",on:{click:function($event){return _vm.toggleLegend(child.key)}}},[_vm._v(_vm._s(_vm.isDuplicatePoint(child)?_vm.aggrMap[child.aggr]+" of "+child.label:child.label))]),_vm.$route.meta&&_vm.$route.meta.component&&"analytics"===_vm.$route.meta.component&&3!=legend.pointType?_c("el-tooltip",{staticClass:"dp-remove-icon",attrs:{effect:"dark",content:"remove data point"}},[_c("span",{staticClass:"datapoint-remove",on:{click:function($event){return _vm.removeDataPoint(_vm.options,_vm.config,legend,!1,child,child.key)}}},[_c("i",{staticClass:"el-icon-close"})])]):_vm._e()],1)})):_vm._e()]})),_c("el-dialog",{staticClass:"enum-color-dialog fc-dialog-center-container fc-dialog-center-container-pt0",attrs:{title:"Color picker","append-to-body":!0,width:"25%",visible:_vm.showEnumColorDialog,"lock-scroll":!0},on:{"update:visible":function($event){_vm.showEnumColorDialog=$event}}},[_vm.selectedEnumDataPoint&&"ENUM"===_vm.selectedEnumDataPoint.dataType?_c("div",{staticClass:"overflow-y-scroll height250 pB50"},_vm._l(_vm.selectedEnumDataPoint.enumMap,(function(enumLabel,idx){return _c("el-row",{key:idx,staticClass:"pB5 border-bottom4 pT5"},[_c("el-col",{attrs:{span:2}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:_vm.selectedEnumDataPoint.enumColorMap[idx],callback:function($$v){_vm.$set(_vm.selectedEnumDataPoint.enumColorMap,idx,$$v)},expression:"selectedEnumDataPoint.enumColorMap[idx]"}})],1),_c("el-col",{staticClass:"mT5",attrs:{span:21}},[_vm._v(_vm._s(enumLabel))])],1)})),1):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel width100",on:{click:function($event){return $event.stopPropagation(),_vm.closeEnumDialog()}}},[_vm._v("CLOSE")])],1)]),_c("el-dialog",{staticClass:"groupby-color-dialog fc-dialog-center-container fc-dialog-center-container-pt0",attrs:{title:"Color picker","append-to-body":!0,width:"25%",visible:_vm.showgroupByColorDialog,"lock-scroll":!0},on:{"update:visible":function($event){_vm.showgroupByColorDialog=$event}}},[_vm.groupedByTime?_c("div",{staticClass:"overflow-y-scroll height250 pB70"},_vm._l(_vm.groupedlegends,(function(legend,key){return _c("el-row",{key:key,staticClass:"pB5 border-bottom4 pT5",class:{"datapoint-hidden":!legend.visible}},[_c("el-col",{staticClass:"mT4",attrs:{span:2}},[_c("i",{staticClass:"pointer el-icon-view",on:{click:function($event){legend.visible=!legend.visible}}})]),_c("el-col",{staticClass:"mT5",attrs:{span:18}},[_vm._v(_vm._s(legend.name))]),_c("el-col",{attrs:{span:3}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:legend.color,callback:function($$v){_vm.$set(legend,"color",$$v)},expression:"legend.color"}})],1)],1)})),1):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel width100",on:{click:function($event){return $event.stopPropagation(),_vm.closeGroupByColorPalette()}}},[_vm._v("CLOSE")])],1)]),_c("el-dialog",{staticClass:"groupby-color-dialog fc-dialog-center-container fc-dialog-center-container-pt0",attrs:{title:"Customize","append-to-body":!0,width:"40%",visible:_vm.showScatterDialog,"lock-scroll":!0},on:{"update:visible":function($event){_vm.showScatterDialog=$event}}},[_vm.isScatterPlot&&_vm.scatterLegend?_c("div",{staticClass:"overflow-y-scroll height350 pB30"},["datapoint"===_vm.scatterLegend.type?_c("div",{staticClass:"data-points-drag-block mT10"},[_c("div",{staticClass:"data-points-checkbox",class:{"datapoint-hidden":!_vm.scatterLegend.visible}},[_c("el-input",{ref:"dataPointEditName",staticClass:"width100",on:{blur:function($event){return _vm.checkForEmpty(_vm.scatterLegend)}},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.checkForEmpty(_vm.scatterLegend)}},model:{value:_vm.scatterLegend.label,callback:function($$v){_vm.$set(_vm.scatterLegend,"label",$$v)},expression:"scatterLegend.label"}})],1),_c("div",{staticClass:"data-points-settings-icon-set scatter-data-points-settings-icon-set pR10"},[4!==_vm.scatterLegend.dataTypeId&&8!==_vm.scatterLegend.dataTypeId?_c("el-radio-group",{staticClass:"dp-yaxis",attrs:{size:"mini"},on:{change:_vm.changeYAxis},model:{value:_vm.scatterLegend.axes,callback:function($$v){_vm.$set(_vm.scatterLegend,"axes",$$v)},expression:"scatterLegend.axes"}},[_c("el-radio-button",{attrs:{label:"y"}},[_vm._v("Y1")]),_c("el-radio-button",{attrs:{label:"y2"}},[_vm._v("Y2")])],1):_vm._e(),_vm.options&&"palette"!==_vm.options.scatter.color.mode?_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:_vm.scatterLegend.color,callback:function($$v){_vm.$set(_vm.scatterLegend,"color",$$v)},expression:"scatterLegend.color"}}):_vm._e()],1)]):_vm._e(),_vm.options&&"predefined"===_vm.options.scatter.shape?_c("div",{staticClass:"customize-input-block"},[_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"label-txt-black"},[_vm._v("Shape")]),_c("el-select",{staticClass:"fc-input-full-border2 width100 pT10",attrs:{placeholder:"Select"},model:{value:_vm.scatterLegend.pointCustomization.shape,callback:function($$v){_vm.$set(_vm.scatterLegend.pointCustomization,"shape",$$v)},expression:"scatterLegend.pointCustomization.shape"}},[_c("el-option",{attrs:{label:"Circle",value:"circle"}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:"mR10 pointer",attrs:{src:"svgs/chart/circle",iconClass:"icon icon-md vertical-sub"}}),_c("div",[_vm._v(" Circle ")])],1)]),_c("el-option",{attrs:{label:"Rectangle",value:"rectangle"}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:" mR10 pointer",attrs:{src:"svgs/chart/rectangle",iconClass:"icon icon-md vertical-sub "}}),_c("div",[_vm._v(" Rectangle ")])],1)]),_c("el-option",{attrs:{label:"Triangle",value:"triangle"}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:" mR10 pointer",attrs:{src:"svgs/chart/triangle",iconClass:"icon icon-md vertical-sub "}}),_c("div",[_vm._v(" Triangle ")])],1)]),_c("el-option",{attrs:{label:"Diamond",value:"diamond"}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:" mR10 pointer",attrs:{src:"svgs/chart/diamond",iconClass:"icon icon-md vertical-sub "}}),_c("div",[_vm._v(" Diamond ")])],1)])],1)],1)],1)],1):_vm._e()]):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel width100",on:{click:function($event){return $event.stopPropagation(),_vm.closeScatterOptions()}}},[_vm._v("CLOSE")])],1)])],2):_vm.xValueMode?_c("div",{staticClass:"fLegendContainer fLegendContainer-new fLegendContainer-right"},_vm._l(_vm.options.xColorMap,(function(color,key){return _c("div",{key:key,staticClass:"legendBoxNew legendBoxNew-fchart f-legendnew",class:{active:-1===_vm.hideLegend.indexOf(key)},attrs:{title:_vm.xLabelMap&&_vm.xLabelMap[key]?_vm.xLabelMap[key]:key},on:{mouseover:function($event){return _vm.focusLegend(key)},mouseout:function($event){return _vm.unfocusLegend(key)}}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:_vm.options.xColorMap[key],callback:function($$v){_vm.$set(_vm.options.xColorMap,key,$$v)},expression:"options.xColorMap[key]"}}),_c("span",{staticClass:"textoverflow-ellipsis",on:{click:function($event){return _vm.toggleLegend(key)}}},[_vm._v(_vm._s(_vm.xLabelMap&&_vm.xLabelMap[key]?_vm.xLabelMap[key]:key))])],1)})),0):_vm._e()},FChartLegendsOptimizevue_type_template_id_5bc97295_staticRenderFns=[],toConsumableArray=__webpack_require__(488478),AnalyticsMixin=(__webpack_require__(538077),__webpack_require__(634338),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(244936)),NewDataFormatHelper=__webpack_require__(804911),ChartShapes=__webpack_require__(674164),FChartLegendsOptimizevue_type_script_lang_js={mixins:[AnalyticsMixin/* default */.Z,NewDataFormatHelper/* default */.Z],props:["config","chart","resultObj"],data:function(){return{options:null,multichart:null,xValueMode:null,xLabelMap:null,showLegendColorPicker:!1,hideLegend:[],aggrMap:{2:"Avg",3:"Sum",4:"Min",5:"Max"},showgroupByColorDialog:!1,showEnumColorDialog:!1,selectedEnumDataPoint:null,selectedgroupByDataPoint:null,showScatterDialog:!1,selectedScatterDataPoint:null}},components:{ChartShapes:ChartShapes/* default */.Z},computed:{groupedByTime:function(){return!(!this.options||!this.options.isGroupedByTime)},isScatterPlot:function(){return!(!this.config||"undefined"===typeof this.config.scatterConfig)},groupedlegends:function(){var _this=this;if(this.selectedgroupByDataPoint){var mkey=this.selectedgroupByDataPoint;return Object.keys(this.options.timeGroupOptions).filter((function(key){return key.split("_")[0]===mkey})).reduce((function(obj,key){return obj[key]=_this.options.timeGroupOptions[key],obj}),{})}return{}},legends:function(){var baselineDataPoints=[];if(this.xValueMode)return null;if(this.options){if(this.multichart){var mtype=this.multichart.split("_")[0],mkey=this.multichart.substring(this.multichart.indexOf("_")+1);return"group"===mtype?0!==this.options.dataPoints.filter((function(dp){return dp.label===mkey&&"x"!==dp.axes})).length?this.options.dataPoints.filter((function(dp){return dp.label===mkey&&"x"!==dp.axes})):this.options.dataPoints.filter((function(dp){return dp.key===mkey&&"x"!==dp.axes})):0!==this.options.dataPoints.filter((function(dp){return dp.key===mkey&&"x"!==dp.axes})).length?this.options.dataPoints.filter((function(dp){return dp.key===mkey&&"x"!==dp.axes})):this.allPoints.filter((function(dp){return dp.key===mkey&&"x"!==dp.axes}))}return this.isScatterPlot&&(baselineDataPoints=this.getScatterbaseline()),[].concat((0,toConsumableArray/* default */.Z)(this.options.dataPoints.filter((function(dp){return"x"!==dp.axes}))),(0,toConsumableArray/* default */.Z)(baselineDataPoints))}return null},scatterLegend:function(){var _this2=this;return this.legends.find((function(dp){return dp.key===_this2.selectedScatterDataPoint}))},allPoints:function(){var points=[];return this.options.dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)})),points.filter((function(dp){return"x"!==dp.axes}))}},methods:{values:function(options,xValueMode,xLabelMap){this.options=options,this.xValueMode=xValueMode,this.xLabelMap=xLabelMap},focusLegend:function(key){this.chart&&!this.groupedByTime&&this.chart.focus(key)},unfocusLegend:function(key){this.chart&&!this.groupedByTime&&this.chart.revert()},getVisibledDataPoints:function(legend){return!(this.config&&this.config.hideDataPoints&&this.config.hideDataPoints.length&&this.config.hideDataPoints.find((function(rt){return rt===legend.key})))&&!!legend.visible},toggleLegend:function(key){if(this.chart&&!this.groupedByTime){var idx=this.hideLegend.indexOf(key);-1===idx?this.hideLegend.push(key):this.hideLegend.splice(idx,1),this.chart.toggle(key),this.options&&"donut"===this.options.type&&this.toggleDonutLabel(this.xValueMode)}},getScatterbaseline:function(){var _this3=this,baselineData=this.resultObj.baselineData,legends=[];if(baselineData){var i=0,count=0,alphabet="abcdefghijklmnopqrstuvwxyz".split("");baselineData.forEach((function(data){var legend={label:data.label,key:alphabet[count],color:_this3.resultObj.baselineDataColors[i],pointType:1,safelimit:!1,type:"datapoint",visible:!0,pointCustomization:{shape:_this3.options.dataPoints.filter((function(dp){return"x"!==dp.axes}))[0].pointCustomization.shape,color:{enable:!1,basedOn:alphabet[count]},size:{enable:!1,basedOn:alphabet[count]}}};legends.push(legend),i+=1,count+=2}))}return legends},isDuplicatePoint:function(legend){if(legend.duplicateDataPoint&&this.aggrMap[legend.aggr])if(this.config.widget&&this.config.widget.dataOptions&&this.config.widget.dataOptions.newReport){var reportObj=this.config.widget.dataOptions.newReport,chartStateObj=null;if(reportObj.chartState&&(chartStateObj=JSON.parse(reportObj.chartState)),0!==reportObj.xAggr||chartStateObj&&![1,4,"reading"].includes(chartStateObj.common.mode))return!0}else if(0!==this.config.period||![1,4,"reading"].includes(this.config.mode))return!0;return!1},openGroupByColorPalette:function(key){this.selectedgroupByDataPoint=key,this.showgroupByColorDialog=!0},closeGroupByColorPalette:function(){this.selectedgroupByDataPoint=null,this.showgroupByColorDialog=!1},openEnumDialog:function(legend){this.selectedEnumDataPoint=legend,this.showEnumColorDialog=!0},closeEnumDialog:function(){this.selectedEnumDataPoint=null,this.showEnumColorDialog=!1},openScatterOptions:function(key){key!=key.toLowerCase()&&(this.selectedScatterDataPoint=key,this.showScatterDialog=!0)},closeScatterOptions:function(){this.selectedScatterDataPoint=null,this.showScatterDialog=!1},checkForEmpty:function(dataPoint){""===dataPoint.label?alert("Datapoint name cannot be empty"):this.$forceUpdate()},changeYAxis:function(){this.options&&2!==this.options.common.mode&&this.resultObj&&this.prepareYAxes(this.options.axis,this.$helpers.getDataPoints(this.options.dataPoints,[1,2,4],!0),this.resultObj.report.dataPoints)}}},components_FChartLegendsOptimizevue_type_script_lang_js=FChartLegendsOptimizevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FChartLegendsOptimizevue_type_script_lang_js,FChartLegendsOptimizevue_type_template_id_5bc97295_render,FChartLegendsOptimizevue_type_template_id_5bc97295_staticRenderFns,!1,null,null,null)
/* harmony default export */,FChartLegendsOptimize=component.exports,FWidgetLegendsOptimize=__webpack_require__(862579),FNewChartType=__webpack_require__(270352),JumpToHelper=__webpack_require__(921466),tooltip=__webpack_require__(460895),color_helper=__webpack_require__(794211),deepmerge=__webpack_require__(708634),FNewChartOptimizevue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z],props:["resultObj","isWidget","showWidgetLegends","config","reportObj","options"],components:{FChartLegends:FChartLegendsOptimize,FWidgetLegends:FWidgetLegendsOptimize/* default */.Z,FChartType:FNewChartType/* default */.Z},computed:{showWidget:function(){return"undefined"===typeof this.showWidgetLegends||!!this.config.hasOwnProperty("showWidgetLegends")&&this.config.showWidgetLegends},isRegression:function(){return!!(this.$route.path.includes("regression")||this.resultObj&&this.resultObj.regressionConfig&&0!==this.resultObj.regressionConfig.length&&!0===this.resultObj.regression)}},data:function(){return{chartContext:null,chartId:Math.random().toString(36).substr(2,9),c3:{params:null,chart:null},showAlarms:!1,updateTimeout:null}},mounted:function(){this.config.hidecharttypechanger&&(this.hidecharttypechanger=!0),this.isRegression&&(this.hidecharttypechanger=!0)},beforeDestroy:function(){tooltip/* default */.Z.hideTooltip(),this.c3&&this.c3.chart&&this.c3.chart.destroy(),this.chartContext=null,this.c3.params=null,this.c3.chart=null},methods:{render:function(reportObj){var _this=this,data=reportObj.data,dateRange=reportObj.dateRange,alarms=reportObj.alarms,options=reportObj.options;if(data&&("single"===options.settings.chartMode||this.resultObj&&this.resultObj.scatterConfig)&&3!==reportObj.params.analyticsType){this.chartContext=null;var ChartContext=null;this.$nextTick((function(){ChartContext={},ChartContext.options=_this.getOptions(),ChartContext.dateRange=dateRange,ChartContext.data=data,ChartContext.xValueMode=_this.isXValueMode(ChartContext.options,data),ChartContext.unitMap=_this.getUnitMap(options.dataPoints),ChartContext.enumMap=_this.getEnumMap(options.dataPoints),_this.resultObj&&_this.resultObj.baselineData&&(ChartContext.baselineColors=_this.resultObj.baselineDataColors,ChartContext.baselineData=_this.resultObj.baselineData),_this.resultObj&&_this.resultObj.Readingdp&&(ChartContext["Readingdp"]=_this.resultObj.Readingdp),_this.resultObj&&_this.resultObj.scatterConfig&&(ChartContext["scatterConfig"]=_this.resultObj.scatterConfig,ChartContext["xMap"]=_this.resultObj.xMap),ChartContext.openAlarm=function(alarmList){if(alarmList){var _step,alarmId=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(alarmList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var a=_step.value;alarmId.push(a.id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.jumpToAlarms(alarmId)}},"pie"!==ChartContext.options.type&&"donut"!==ChartContext.options.type||(ChartContext.options.padding.top=20);var c3Params=c3_helper/* default */.Z.prepare(ChartContext);c3Params&&(c3Params.data.onclick=function(d){_this.$emit("drilldown",d)}),_this.mergeOption&&(ChartContext.options.padding.left=_this.mergeOption.padding.left,ChartContext.options.padding.right=_this.mergeOption.padding.right,ChartContext.options.axis.x.label.text="Month",c3Params.axis.y.label.text="No of Work Request"),_this.isWidget&&(ChartContext.options.legend.show?c3Params.size.height=c3Params.size.height-50:c3Params.size.height=c3Params.size.height-20,options.widgetLegend.show&&(c3Params.size.height=c3Params.size.height-75),_this.resultObj&&_this.resultObj.report.userFilters&&(c3Params.size.height=c3Params.size.height-65));var self=_this;self.showAlarms=1===_this.getOptions().common.mode&&_this.getOptions().settings.alarm,_this.config&&_this.config.hasOwnProperty("showAlarms")&&(self.showAlarms=_this.config.showAlarms),self.showAlarms&&(ChartContext.alarms=alarms,c3Params.size.height=c3Params.size.height-100);var alarmsParams=null;if(self.showAlarms&&(alarmsParams=c3_helper/* default */.Z.prepareBooleanChart(ChartContext,c3Params.data.json.x,alarms),self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams))),ChartContext.options.customizeC3){var defaultOptions={},mergedOptions=deepmerge/* default */.Z.objectAssignDeep(defaultOptions,c3Params,ChartContext.options.customizeC3);c3Params=mergedOptions}self.chartContext=ChartContext,self.$refs["newChartEle"]?(c3Params.bindto=self.$refs["newChartEle"],self.$refs["chartLegendtop"]?self.$refs["chartLegendtop"].values(options,ChartContext.xValueMode,ChartContext.xLabelMap):self.$refs["chartLegendbottom"]?self.$refs["chartLegendbottom"].values(options,ChartContext.xValueMode,ChartContext.xLabelMap):self.$refs["chartLegendright"]&&self.$refs["chartLegendright"].values(options,ChartContext.xValueMode,ChartContext.xLabelMap),_this.$nextTick((function(){self.isWidget&&self.$refs["chartLegendtop"]?c3Params.size.height=c3Params.size.height-(self.$refs["chartLegendtop"].$el.clientHeight-20):self.isWidget&&self.$refs["chartLegendbottom"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegendbottom"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight),self.c3.chart&&self.c3.chart.destroy(),self.c3.chart=billboard.bb.generate(c3Params),self.c3.params=c3Params,this.showWidget&&self.$refs["newWidget"]&&self.$refs["newWidget"].value(self.c3.chart,data,options,self.resultObj?self.resultObj.reportData.aggr:null),this.chartgenerate()}))):_this.$nextTick((function(){self.showAlarms&&self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams)),c3Params.bindto=self.$refs["newChartEle"],self.$refs["chartLegendtop"]?self.$refs["chartLegendtop"].values(options,ChartContext.xValueMode,ChartContext.xLabelMap):self.$refs["chartLegendbottom"]?self.$refs["chartLegendbottom"].values(options,ChartContext.xValueMode,ChartContext.xLabelMap):self.$refs["chartLegendright"]&&self.$refs["chartLegendright"].values(options,ChartContext.xValueMode,ChartContext.xLabelMap),this.$nextTick((function(){self.isWidget&&self.$refs["chartLegendtop"]?c3Params.size.height=c3Params.size.height-(self.$refs["chartLegendtop"].$el.clientHeight-20):self.isWidget&&self.$refs["chartLegendbottom"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegendbottom"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight),self.c3.chart&&self.c3.chart.destroy(),self.c3.chart=billboard.bb.generate(c3Params),self.c3.params=c3Params,this.showWidget&&self.$refs["newWidget"]&&self.$refs["newWidget"].value(self.c3.chart,data,options,self.resultObj?self.resultObj.reportData.aggr:null),this.chartgenerate()}))}))}))}else this.c3.chart&&this.c3.chart.destroy()},chartgenerate:function(){this.$emit("chartgenerate",!0)},isXValueMode:function(options,data){if(("pie"===options.type||"donut"===options.type)&&data&&data.x&&2===Object.keys(data).length&&data.x.length<=15){if(options.xColorMap)return!0;for(var colors=color_helper/* default */.Z.newColorPicker(data.x.length),xColorMap={},i=0;i<data.x.length;i++){var xVal=data.x[i];xColorMap[xVal]=options.xColorMap&&options.xColorMap[xVal]?options.xColorMap[xVal]:colors[i]}return options.xColorMap=xColorMap,!0}return options.xColorMap=null,!1},reRender:function(){var _this2=this,reportObj=Object.assign({},this.reportObj);this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render(reportObj)}),500)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs&&this.$refs["newWidget"].resize()},update:function(){this.reRender()}}},components_FNewChartOptimizevue_type_script_lang_js=FNewChartOptimizevue_type_script_lang_js,FNewChartOptimize_component=(0,componentNormalizer/* default */.Z)(components_FNewChartOptimizevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewChartOptimize=FNewChartOptimize_component.exports},
/***/270352:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewChartType}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FNewChartType.vue?vue&type=template&id=22e8ddb0
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-chart-type",staticStyle:{"margin-right":"150px",position:"absolute"}},[_vm.options?_c("span",[_c("el-popover",{attrs:{"popper-class":"chart-type-popover",width:_vm.isCombo?452:200},model:{value:_vm.typePopover,callback:function($$v){_vm.typePopover=$$v},expression:"typePopover"}},[_c("div",[_vm.isCombo?_c("div",{staticClass:"chart-type-selector pT20 pB20"},[_c("div",{staticClass:"point-type pB20 pL20 pR20 border-bottom1px"},[_c("div",{staticClass:"type-label label-txt-black bold pT10"},[_vm._v(" Default Chart ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{disabled:_vm.isRangeMode},on:{change:_vm.resetCombo},model:{value:_vm.defaultOnCombo,callback:function($$v){_vm.defaultOnCombo=$$v},expression:"defaultOnCombo"}},[_c("template",{slot:"prefix"},[_c("chart-icon",{attrs:{icon:_vm.currentChartType}})],1),_vm._l(_vm.getChartTypes(_vm.options,_vm.allPoints,"default"),(function(ctype,index){return _c("el-option",{key:index,attrs:{label:ctype.label,value:ctype.value}},[_c("span",{staticClass:"chart-icon flLeft pR5",staticStyle:{"margin-right":"5px"}},[_c("chart-icon",{attrs:{icon:ctype.value}})],1),_c("div",{staticClass:"chart-label"},[_vm._v(_vm._s(ctype.label))])])}))],2)],1),_c("ul",_vm._l(_vm.allPoints,(function(dataPoint,index){return!1!==dataPoint.visible?_c("li",{key:index,staticClass:"point-type pB20"},[_c("svg",{staticClass:"dp-circle flLeft mR5"},[_c("circle",{attrs:{cx:5,cy:5,r:5,fill:dataPoint.color}})]),_c("div",{staticClass:"flLeft type-label label-chart"},[_vm._v(" "+_vm._s(dataPoint.label)+" ")]),_c("el-select",{staticClass:"flLeft type-select",attrs:{placeholder:"Default"},model:{value:dataPoint.chartType,callback:function($$v){_vm.$set(dataPoint,"chartType",$$v)},expression:"dataPoint.chartType"}},[dataPoint.chartType?_c("template",{slot:"prefix"},[_c("chart-icon",{attrs:{icon:dataPoint.chartType}})],1):_vm._e(),_vm._l(_vm.getChartTypes(_vm.options,_vm.allPoints,"rangeGroup"===dataPoint.type?"range":"point"),(function(ctype,index){return _c("el-option",{key:index,attrs:{label:ctype.label,value:ctype.value}},[_c("span",{staticClass:"chart-icon flLeft pR5",staticStyle:{"margin-right":"5px"}},[_c("chart-icon",{attrs:{icon:ctype.value}})],1),_c("div",{staticClass:"chart-label"},[_vm._v(_vm._s(ctype.label))])])}))],2)],1):_vm._e()})),0)]):_c("div",{staticClass:"chart-type-selector",staticStyle:{width:"100%"}},[_c("ul",_vm._l(_vm.getChartTypes(_vm.options,_vm.allPoints,"all",_vm.skipTableType),(function(ctype,index){return _c("li",{key:index,class:{active:_vm.currentChartType===ctype.value},on:{click:function($event){return _vm.onTypeChange(ctype)}}},[_c("span",{staticClass:"chart-icon",staticStyle:{"margin-right":"5px"}},[_c("chart-icon",{attrs:{icon:ctype.value}})],1),_c("span",{staticClass:"chart-label"},[_vm._v(_vm._s(ctype.label))])])})),0)])]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"chart-icon pointer",staticStyle:{display:"inline-block"},attrs:{slot:"reference",title:_vm.$t("home.dashboard.change_chart"),"data-arrow":"true"},slot:"reference"},[_c("chart-icon",{attrs:{icon:_vm.currentChartType}})],1)])],1):_vm._e()])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),NewChartTypes=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(862230)),chartIcon=__webpack_require__(588),FNewChartTypevue_type_script_lang_js={props:["options","multichartkey","skipTableType"],mixins:[NewChartTypes/* default */.Z],components:{ChartIcon:chartIcon/* default */.Z},data:function(){return{typePopover:!1,defaultOnCombo:"combo"}},computed:{isRangeMode:function(){return 0!==this.options.dataPoints.filter((function(dP){return"rangeGroup"===dP.type})).length},isMultiMode:function(){return this.options&&"multi"===this.options.settings.chartMode},isCombo:function(){var _this=this,isCombo=this.isMultiMode?this.options.multichart[this.multichartkey]&&this.options.multichart[this.multichartkey].combo:this.options&&this.options.combo;return isCombo||this.allPoints.length&&this.allPoints.some((function(dp){return dp.chartType!==_this.allPoints[0].chartType}))},currentChartType:function(){return this.isMultiMode?this.isCombo?"combo":this.allPoints&&this.allPoints.length?this.allPoints[0].chartType:"area":this.options.type},allPoints:function(){var points=[];if(this.options){var dataPoints=this.$helpers.getDataPoints(this.options.dataPoints,[1,2,4],!0);if(this.isMultiMode&&this.multichartkey){var keys=this.multichartkey.split("_"),type=keys[0],multiPointName=keys[1];dataPoints=dataPoints.filter((function(dp){return"datapoint"===type||"rangeGroup"===type?dp.key===multiPointName:dp.label===multiPointName}))}dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)}))}return points}},methods:{resetCombo:function(){var _this2=this;this.typePopover=!1,this.isMultiMode?this.$set(this.options.multichart[this.multichartkey],"combo",!1):this.$set(this.options,"combo",!1),this.allPoints.forEach((function(dp){
// dp.chartType = this.isMultiMode ? this.defaultOnCombo : ''
_this2.$set(dp,"chartType",_this2.isMultiMode?_this2.defaultOnCombo:"")})),this.isMultiMode||(this.options.type=this.defaultOnCombo),this.defaultOnCombo="combo"},onTypeChange:function(ctype){var _this3=this;if(this.typePopover=!1,"table"===ctype.value)this.options.settings.chart&&(this.options.settings.chart=!1),this.options.type=ctype.value;else if(this.options.settings.chart=!0,"combo"===ctype.value){var currentType;this.isMultiMode?(this.$set(this.options.multichart[this.multichartkey],"combo",!0),currentType=this.allPoints[0].chartType):(this.$set(this.options,"combo",!0),currentType=this.options.type);var defaultType=currentType&&"pie"!==currentType&&"donut"!==currentType?currentType:"area";this.allPoints.forEach((function(dp){dp.chartType||(dp.chartType=defaultType)})),this.$nextTick((function(_){_this3.typePopover=!0}))}else this.isMultiMode?this.allPoints.forEach((function(dp){dp.chartType=ctype.value})):this.options.type=ctype.value}}},components_FNewChartTypevue_type_script_lang_js=FNewChartTypevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FNewChartTypevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewChartType=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/78873.js.map