(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[89533],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/507008:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FPopover.vue?vue&type=template&id=878762a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{ref:_vm.getRef,attrs:{"popper-class":"f-popover",width:_vm.width||""===_vm.width?_vm.width:280,placement:_vm.placement,trigger:_vm.trigger||"click",hide:"hide"},on:{show:function(){return _vm.$emit("show")}},model:{value:_vm.showpopover,callback:function($$v){_vm.showpopover=$$v},expression:"showpopover"}},[_c("div",{staticClass:"fc-popover-content"},[_vm._t("header",(function(){return[_c("div",{staticClass:"title uppercase f12 bold",staticStyle:{"letter-spacing":"1.1px",color:"#000000"}},[_vm._v(" "+_vm._s(_vm.title)+" ")])]})),_c("div",[_vm._t("content")],2)],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.cancel}},[_c("span",[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.confirmTitle?_vm.confirmTitle:_vm.$t("common._common.ok")))])])]}))],2),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)},staticRenderFns=[],FPopovervue_type_script_lang_js={props:["popperClass","placement","value","popperRef","trigger","title","width","maxHeight","confirmTitle"],data:function(){return{showpopover:!1}},watch:{showpopover:function(val){null!=this.value&&this.$emit("input",val)},value:function(val){this.showpopover=val}},mounted:function(){var element=this.$refs[this.getRef].$el;if(this.popperClass&&element.firstElementChild.classList.add(this.popperClass),this.maxHeight){var content=element.querySelector(".fc-popover-content");content.classList.add("scrollable"),content.style["max-height"]=this.maxHeight+"px"}},computed:{getRef:function(){return this.popperRef?this.popperRef:"fpopup"}},methods:{save:function(){this.showpopover=!1,this.$emit("save")},cancel:function(){this.showpopover=!1,this.$emit("close")},hide:function(){this.$emit("hide")}}},components_FPopovervue_type_script_lang_js=FPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FPopover=component.exports},
/***/23324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldMatcher2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FieldMatcher2.vue?vue&type=template&id=5224790a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-form",{attrs:{inline:!0,"label-position":"left"}},_vm._l(_vm.fieldMatchers,(function(fieldMatcher,index){return _c("div",{key:index,staticClass:"field-matcher-bg"},[_c("el-row",{staticStyle:{margin:"0px","padding-top":"10px","padding-bottom":"15px"},attrs:{align:"middle",gutter:50}},[_c("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0","margin-right":"20px"},attrs:{span:10}},[_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"fc-border-select fc-input-full-border-select2 width100",attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter field name"},model:{value:fieldMatcher.field,callback:function($$v){_vm.$set(fieldMatcher,"field",$$v)},expression:"fieldMatcher.field"}},_vm._l(_vm.fieldList,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.label,value:item.value}})})),1)],1)]),"alarmType"===fieldMatcher.field?_c("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0"},attrs:{span:10}},[_c("el-select",{staticClass:"fc-border-select fc-input-full-border-select2",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}},_vm._l(_vm.picklistOptions[fieldMatcher.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1)],1):_c("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0"},attrs:{span:10}},[_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"fc-border-select fc-input-full-border-select2",attrs:{type:"text",placeholder:"Enter value"},model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}})],1)]),_c("el-col",{staticStyle:{"padding-top":"9px","padding-left":"10px","padding-right":"0"},attrs:{span:3}},[_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px","margin-right":"4px"},attrs:{src:__webpack_require__(353654)},on:{click:_vm.addRow}}),1!==Object.keys(_vm.fieldMatchers).length?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px","margin-right":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRow(index)}}}):_vm._e()])],1)],1)})),0)},staticRenderFns=[],FieldMatcher2vue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(162506),{props:["size","value","fields"],data:function(){return{picklistOptions:{},fieldMatchers:[{field:"",regex:""}],regex:null,fieldSeries:[{label:"Type",value:"type"},{label:"Subject",value:"subject"},{label:"Status",value:"status"},{label:"Space",value:"space"},{label:"Source Type",value:"sourcetype"},{label:"Serial Number",value:"serialnumber"},{label:"Scheduled Start",value:"scheduledstart"},{label:"Priority",value:"priority"},{label:"Tasks",value:"tasks"},{label:"Comments",value:"comments"},{label:"Closed Tasks",value:"closedtasks"},{label:"Attachments",value:"attachments"},{label:"Is Acknowledged",value:"isacknowledged"},{label:"Estimated End",value:"estimatedend"},{label:"Due Date",value:"duedate"},{label:"Device",value:"device"},{label:"Description",value:"description"},{label:"Created Time",value:"createdtime"},{label:"Cleared Time",value:"clearedtime"},{label:"Category",value:"category"},{label:"Assignment Group",value:"assignmentgroup"},{label:"Assigned To",value:"assignedto"},{label:"Asset",value:"asset"},{label:"Alarm Status",value:"alarmstatus"},{label:"Actual Work Start",value:"actualworkstart"},{label:"Actual Work End",value:"actualworkend"},{label:"Acknowledged Time",value:"acknowledgedtime"},{label:"Acknowledged By",value:"acknowledgedby"},{label:"Severity",value:"severity"},{value:"source",label:"Source"},{value:"condition",label:"Condition"},{value:"eventMessage",label:"Event Message"},{value:"alarmClass",label:"Alarm Class"},{label:"Category",value:"alarmType"}]}},computed:{fieldList:function(){var fieldsToReturn=this.fields||["alarmClass","priority"];return this.fieldSeries.filter((function(field){return fieldsToReturn.includes(field.value)}))}},mounted:function(){this.picklistOptions.alarmType=this.$constants.AlarmCategory,this.init()},watch:{fieldMatchers:function(newVal){this.$emit("input",this.fieldMatchers)}},methods:{init:function(){this.value&&(this.fieldMatchers=this.value,this.value.length||this.addRow())},addRow:function(){this.fieldMatchers.push({field:"",value:""})},deleteRow:function(index){this.fieldMatchers.splice(index,1)}}}),components_FieldMatcher2vue_type_script_lang_js=FieldMatcher2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FieldMatcher2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldMatcher2=component.exports},
/***/635272:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ThresholdRules}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/ThresholdRules.vue?vue&type=template&id=06f08626
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:" height100"},[_c("div",{staticClass:"setting-header2"},[_vm._m(0),_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:_vm.newThresholdRule}},[_vm._v("New Alarm Rule")]),_vm.thresholddialog?_c("new-threshold-rule",{attrs:{visibility:_vm.thresholddialog,parentRuleName:_vm.parentRuleName,isDependant:_vm.isDependant,isnew:_vm.isNew,rule:_vm.rule},on:{"update:visibility":function($event){_vm.thresholddialog=$event},saved:_vm.aftersave}}):_vm._e()],1)]),_c("div",{staticClass:"select-all-rule"},[_c("el-popover",{staticClass:"rule-popover",attrs:{placement:"bottom",width:"200",trigger:"click","after-enter":"true","popper-class":"alarmrule-list-popover"},model:{value:_vm.closepopover,callback:function($$v){_vm.closepopover=$$v},expression:"closepopover"}},[_vm._l(_vm.categoryTypes,(function(category,index){return _c("div",{key:index,staticClass:"rule-list-txt",attrs:{label:category.label,value:category.value},on:{click:function($event){return _vm.selectedRuleTypes(category.value)}}},[_vm._v(" "+_vm._s(category.label)+" ")])})),_c("el-button",{staticClass:"all-rule-btn",attrs:{slot:"reference"},slot:"reference"},[_vm._v(_vm._s(_vm.categoryTypes.find((function(type){return _vm.categoryType===type.value})).label)),_c("i",{staticClass:"el-icon-arrow-down"})])],2)],1),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table mT20"},[_vm._m(1),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):Object.keys(_vm.readingRules).length?_c("tbody",[_vm._l(_vm.readingRules,(function(list,index){return["all"===_vm.categoryType?_c("tr",{key:index,staticClass:"list-rule-head nohover"},[_c("td",{attrs:{colspan:"100%"}},[_vm._v(" "+_vm._s(list.category)+" "),_c("span",{staticClass:"rules-count"},[_vm._v(_vm._s(list.rules.length)+" Rules")])])]):_vm._e(),_vm._l(list.rules,(function(readingRule,ruleIndex){return"all"===_vm.categoryType||_vm.categoryType===list.category?_c("tr",{key:index+"_"+ruleIndex,staticClass:"tablerow"},[_c("td",{staticStyle:{"padding-right":"0"}},[_c("div",{staticStyle:{width:"100%","line-height":"22px"}},[_vm._v(" "+_vm._s(readingRule.name)+" ")])]),_c("td",{staticStyle:{width:"150px",",max-width":"150px"}},[_vm._v(" "+_vm._s(_vm.getResourceName(readingRule))+" ")]),_c("td",{staticStyle:{width:"100px",",max-width":"100px"}},[_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeRuleStatus(readingRule)}},model:{value:readingRule.status,callback:function($$v){_vm.$set(readingRule,"status",$$v)},expression:"readingRule.status"}})],1),_c("td",{staticStyle:{width:"15%"}},[_c("div",{staticClass:"text-left actions",staticStyle:{"margin-top":"0px","margin-right":"15px","text-align":"center"}},[_c("i",{staticClass:"el-icon-edit pointer",on:{click:function($event){return _vm.editThresholdRule(readingRule)}}}),_vm._v("    "),_c("i",{staticClass:"el-icon-delete pointer",on:{click:function($event){return _vm.deleteRule(readingRule,list.category,index,ruleIndex)}}})])])]):_vm._e()}))]}))],2):_c("tbody",[_vm._m(2)])])])])]),_c("el-dialog",{attrs:{title:"Confirm Delete",visible:_vm.showDialog,width:"40%"},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",[_vm._v("Are you sure you want to delete this?")]),_c("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{on:{click:function($event){_vm.showDialog=!1}}},[_vm._v("CANCEL")]),_c("el-button",{attrs:{type:"primary"},on:{click:function($event){_vm.showDialog=!1,_vm.deleteRule()}}},[_vm._v("CONFIRM")])],1)])],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title"},[_vm._v("Alarm Rules")]),_c("div",{staticClass:"heading-description"},[_vm._v("List of all Alarm Rules")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("RULE NAME")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("SPACE / ASSET")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("STATUS")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_vm._v(" No rules created yet. ")])])}],NewThresholdRulevue_type_template_id_5f067d78_render=(__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(169358),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form setup-dialog-right setup-dialog50 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("el-form",{ref:"ruleForm",attrs:{model:_vm.model,"label-position":"top"}},[_c("div",{attrs:{id:"newthresholdrule"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isnew?_vm.isDependant?"New Threshold Dependant Rule":"New Alarm Rule":"Edit Alarm Rule")+" ")])])]),_c("div",{staticClass:"new-body-modal"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Enter Rule Name")]),_c("el-form-item",{attrs:{prop:"name"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{required:"",autofocus:"true",type:"text",placeholder:"Enter the name"},model:{value:_vm.model.readingRule.name,callback:function($$v){_vm.$set(_vm.model.readingRule,"name",$$v)},expression:"model.readingRule.name"}})],1)],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt "},[_vm._v("Description")]),_c("el-form-item",{staticClass:"textarea-height-set"},[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{required:"",type:"textarea",placeholder:_vm.$t("common._common.enter_desc"),autosize:{minRows:3,maxRows:4},resize:"none"},model:{value:_vm.model.readingRule.description,callback:function($$v){_vm.$set(_vm.model.readingRule,"description",$$v)},expression:"model.readingRule.description"}})],1)],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt "},[_vm._v("Type")]),_c("el-form-item",[_c("el-select",{staticClass:"width100 fc-input-full-border-select2",attrs:{disabled:!this.isnew},on:{change:_vm.resetIfSelected},model:{value:_vm.resourceType,callback:function($$v){_vm.resourceType=$$v},expression:"resourceType"}},[_c("el-option",{attrs:{label:"Asset",value:"asset"}}),_c("el-option",{attrs:{label:"Space",value:"space"}})],1)],1)],1)],1),_c("el-row",{staticClass:"resource-row",attrs:{gutter:20}},[_vm.isAsset?_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Asset Category")]),_c("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{prop:"assetcategory"}},[_c("el-select",{staticClass:"width100 fc-input-full-border-select2",attrs:{disabled:!_vm.isnew||_vm.isDependant,filterable:"","default-first-option":"",placeholder:"Choose Category"},on:{change:function($event){return _vm.loadThresholdFields()}},model:{value:_vm.model.readingRule.assetCategoryId,callback:function($$v){_vm.$set(_vm.model.readingRule,"assetCategoryId",$$v)},expression:"model.readingRule.assetCategoryId"}},_vm._l(_vm.assetCategoryList,(function(category,index){return _c("el-option",{key:index,attrs:{label:category.name,value:category.id}})})),1)],1)],1):_vm._e(),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.isAsset?"Asset(s)":"Space")+" ")]),_c("div",{staticClass:"add f-element resource-list"},[_vm.isMultiResource?_c("div",[_c("el-form-item",{attrs:{prop:"assets"}},[_c("el-select",{staticClass:"multi mT10 width100 fc-input-full-border-select2",attrs:{multiple:"",disabled:""},model:{value:_vm.dummyValue,callback:function($$v){_vm.dummyValue=$$v},expression:"dummyValue"}},[_c("el-option",{attrs:{label:_vm.resourceLabel,value:1}})],1)],1),_c("i",{staticClass:"el-input__icon el-icon-search threshold-icon-search",attrs:{slot:"suffix",disabled:_vm.isResourceDisabled},on:{click:function($event){!_vm.isResourceDisabled&&(_vm.chooserVisibility=!0)}},slot:"suffix"})],1):_c("el-input",{staticClass:"mT10 width100",attrs:{disabled:_vm.isResourceDisabled,type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){_vm.resourceQuery=_vm.selectedResource.name,_vm.chooserVisibility=!0}},model:{value:_vm.selectedResource.name,callback:function($$v){_vm.$set(_vm.selectedResource,"name",$$v)},expression:"selectedResource.name"}},[_c("i",{staticClass:"el-input__icon el-icon-search threshold-icon-search",attrs:{slot:"suffix",disabled:_vm.isResourceDisabled},on:{click:function($event){!_vm.isResourceDisabled&&(_vm.chooserVisibility=!0)}},slot:"suffix"})])],1)])],1),_c("el-row",{staticClass:"mT20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Threshold Metric")]),_c("div",{staticClass:"add"},[_c("el-form-item",{attrs:{prop:"threshold"}},[_c("el-select",{staticClass:"form-item width100 fc-input-full-border-select2",attrs:{disabled:!_vm.isnew||_vm.isDependant,filterable:"","default-first-option":"",placeholder:"Choose Field"},model:{value:_vm.selectedThresholdFieldName,callback:function($$v){_vm.selectedThresholdFieldName=$$v},expression:"selectedThresholdFieldName"}},_vm._l(_vm.thresholdFields,(function(field){return _c("el-option",{key:field.name,attrs:{label:field.displayName,value:field.name}})})),1)],1)],1)])],1),_vm.isDependant||!_vm.isnew&&-1!==_vm.rule.parentRuleId?_c("el-row",{attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Parent Rule Name")]),_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"fc-input-txt fc-input-full-border2 width100",attrs:{disabled:!0,type:"text"},model:{value:_vm.parentRuleName,callback:function($$v){_vm.parentRuleName=$$v},expression:"parentRuleName"}})],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Execute On")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item width100 fc-input-full-border-select2",model:{value:_vm.model.readingRule.onSuccess,callback:function($$v){_vm.$set(_vm.model.readingRule,"onSuccess",$$v)},expression:"model.readingRule.onSuccess"}},[_c("el-option",{key:!0,attrs:{label:"Condition Match",value:!0}}),_c("el-option",{key:!1,attrs:{label:"Condition Not Match",value:!1}})],1)],1)])],1):_vm._e(),_c("el-row",{staticClass:"mT20",attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Condition Type")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item width100 fc-input-full-border-select2",attrs:{placeholder:"Choose Asset"},model:{value:_vm.model.readingRule.thresholdType,callback:function($$v){_vm.$set(_vm.model.readingRule,"thresholdType",$$v)},expression:"model.readingRule.thresholdType"}},[_c("el-option",{key:1,attrs:{label:"Simple Condition",value:1}}),_c("el-option",{key:2,attrs:{label:"Aggregation",value:2}}),_c("el-option",{key:3,attrs:{label:"Baseline",value:3}}),_c("el-option",{key:4,attrs:{label:"Flapping",value:4}}),_c("el-option",{key:6,attrs:{label:"Function",value:6}}),_c("el-option",{key:5,attrs:{label:"Complex Condition",value:5}})],1)],1)])],1),_c("el-container",[_c("el-main",{staticClass:"p0"},[2===_vm.model.readingRule.thresholdType||3===_vm.model.readingRule.thresholdType?_c("div",[_c("div",{staticClass:"fc-sub-title-container"},[_c("div",{staticClass:"fc-modal-sub-title"},[_vm._v("CONDITIONS")])]),3===_vm.model.readingRule.thresholdType?_c("el-row",{attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Baseline")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item width100 fc-input-full-border-select2",attrs:{placeholder:"Choose Baseline"},model:{value:_vm.model.readingRule.baselineId,callback:function($$v){_vm.$set(_vm.model.readingRule,"baselineId",$$v)},expression:"model.readingRule.baselineId"}},_vm._l(_vm.baselines,(function(baseline){return _c("el-option",{key:baseline.id,attrs:{label:baseline.name,value:baseline.id}})})),1)],1)])],1):_vm._e(),_c("el-row",{attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Aggregation")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item width100 fc-input-full-border-select2",attrs:{placeholder:"Choose Aggregation"},model:{value:_vm.model.readingRule.aggregation,callback:function($$v){_vm.$set(_vm.model.readingRule,"aggregation",$$v)},expression:"model.readingRule.aggregation"}},[_c("el-option",{key:"sum",attrs:{label:"Sum",value:"sum"}}),_c("el-option",{key:"avg",attrs:{label:"Average",value:"avg"}}),_c("el-option",{key:"min",attrs:{label:"Minimum",value:"min"}}),_c("el-option",{key:"max",attrs:{label:"Maximum",value:"max"}})],1)],1)]),_c("el-col",{attrs:{span:12}},[_c("duration",{attrs:{label:"Date Range",labelClass:"fc-input-label-txt",format:"h",size:"l",minHour:!0},model:{value:_vm.model.readingRule.dateRange,callback:function($$v){_vm.$set(_vm.model.readingRule,"dateRange",$$v)},expression:"model.readingRule.dateRange"}},[_c("el-col",{staticClass:"pT5",attrs:{slot:"prefix",span:3},slot:"prefix"},[_c("span",{staticClass:"textcolor"},[_vm._v("Last")])])],1)],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Operator")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item width100 fc-input-full-border-select2",attrs:{placeholder:"Choose Operator"},model:{value:_vm.model.readingRule.operatorId,callback:function($$v){_vm.$set(_vm.model.readingRule,"operatorId",$$v)},expression:"model.readingRule.operatorId"}},[_c("el-option",{key:9,attrs:{label:"Equals",value:9}}),_c("el-option",{key:10,attrs:{label:"Not Equals",value:10}}),_c("el-option",{key:13,attrs:{label:"Greater Than",value:13}}),_c("el-option",{key:14,attrs:{label:"Greater Than Equals",value:14}}),_c("el-option",{key:11,attrs:{label:"Less Than",value:11}}),_c("el-option",{key:12,attrs:{label:"Less Than Equals",value:12}})],1)],1)]),3===_vm.model.readingRule.thresholdType?_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Percentage")]),_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{type:"number",placeholder:"0%"},model:{value:_vm.model.readingRule.percentage,callback:function($$v){_vm.$set(_vm.model.readingRule,"percentage",$$v)},expression:"model.readingRule.percentage"}})],1)]):_vm._e(),2===_vm.model.readingRule.thresholdType?_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Value")]),_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Enter Value"},model:{value:_vm.model.readingRule.percentage,callback:function($$v){_vm.$set(_vm.model.readingRule,"percentage",$$v)},expression:"model.readingRule.percentage"}})],1)]):_vm._e()],1)],1):4===_vm.model.readingRule.thresholdType?_c("div",[_c("div",{staticClass:"fc-sub-title-container"},[_c("div",{staticClass:"fc-modal-sub-title"},[_vm._v("CONDITIONS")])]),_vm.isBooleanMetric?_vm._e():_c("el-row",{attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Lower Trigger")]),_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Lower Trigger Value"},model:{value:_vm.model.readingRule.minFlapValue,callback:function($$v){_vm.$set(_vm.model.readingRule,"minFlapValue",$$v)},expression:"model.readingRule.minFlapValue"}})],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Upper Trigger")]),_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Upper Trigger Value"},model:{value:_vm.model.readingRule.maxFlapValue,callback:function($$v){_vm.$set(_vm.model.readingRule,"maxFlapValue",$$v)},expression:"model.readingRule.maxFlapValue"}})],1)])],1),_c("el-row",{staticClass:"mT20",attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" Flapping Frequency (n times) ")]),_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Enter Flapping Frequency"},model:{value:_vm.model.readingRule.flapFrequency,callback:function($$v){_vm.$set(_vm.model.readingRule,"flapFrequency",$$v)},expression:"model.readingRule.flapFrequency"}})],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" Flapping Interval (period in minutes) ")]),_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Enter Flapping Interval"},model:{value:_vm.model.readingRule.flapInterval,callback:function($$v){_vm.$set(_vm.model.readingRule,"flapInterval",$$v)},expression:"model.readingRule.flapInterval"}})],1)])],1)],1):1===_vm.model.readingRule.thresholdType?_c("div",[_c("div",{staticClass:"fc-sub-title-container"},[_c("div",{staticClass:"fc-modal-sub-title"},[_vm._v("CONDITIONS")])]),_c("el-row",{attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Operator")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item fc-input-full-border-select2 width100",attrs:{placeholder:"Choose Operator"},model:{value:_vm.model.readingRule.operatorId,callback:function($$v){_vm.$set(_vm.model.readingRule,"operatorId",$$v)},expression:"model.readingRule.operatorId"}},[_c("el-option",{key:9,attrs:{label:"Equals",value:9}}),_c("el-option",{key:10,attrs:{label:"Not Equals",value:10}}),_c("el-option",{key:13,attrs:{label:"Greater Than",value:13}}),_c("el-option",{key:14,attrs:{label:"Greater Than Equals",value:14}}),_c("el-option",{key:11,attrs:{label:"Less Than",value:11}}),_c("el-option",{key:12,attrs:{label:"Less Than Equals",value:12}})],1)],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Value")]),_c("div",{staticClass:"add"},[_vm.isNumberMetric?_c("el-popover",{attrs:{width:_vm.$refs.previnput&&_vm.$refs.previnput.$el?_vm.$refs.previnput.$el.clientWidth:"",trigger:"click","popper-class":"prev-popper"},model:{value:_vm.showPrevPopover,callback:function($$v){_vm.showPrevPopover=$$v},expression:"showPrevPopover"}},[_c("div",{staticClass:"prev-value pointer",on:{click:_vm.setPrevValue}},[_vm._v(" "+_vm._s((this.selectedMetric?this.selectedMetric.displayName+"'s ":"")+"Previous Value")+" ")]),_c("div",{attrs:{slot:"reference"},slot:"reference"},[_c("el-input",{ref:"previnput",staticClass:"width100 fc-input-full-border-select2",attrs:{placeholder:"Enter Value"},nativeOn:{keydown:function($event){_vm.showPrevPopover=!1}},model:{value:_vm.model.readingRule.percentage,callback:function($$v){_vm.$set(_vm.model.readingRule,"percentage",$$v)},expression:"model.readingRule.percentage"}},[_c("i",{class:["prev-icon el-select__caret el-input__icon el-icon-arrow-down",{active:_vm.showPrevPopover}],staticStyle:{"line-height":"16px"},attrs:{slot:"suffix"},slot:"suffix"})])],1)]):_c("el-input",{staticClass:"width100",attrs:{placeholder:"Enter Value"},model:{value:_vm.model.readingRule.percentage,callback:function($$v){_vm.$set(_vm.model.readingRule,"percentage",$$v)},expression:"model.readingRule.percentage"}})],1)])],1),_c("el-row",{staticClass:"mT20",attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Occurrences")]),_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"width100 fc-input-full-border2 width100",attrs:{placeholder:"Enter Occurrences"},model:{value:_vm.occurrences,callback:function($$v){_vm.occurrences=$$v},expression:"occurrences"}})],1)])],1),_vm.occurrences>0?_c("el-row",{attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"textcolor"},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:1},model:{value:_vm.consecutiveoroverperiod,callback:function($$v){_vm.consecutiveoroverperiod=$$v},expression:"consecutiveoroverperiod"}},[_vm._v("Over Period")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:2},model:{value:_vm.consecutiveoroverperiod,callback:function($$v){_vm.consecutiveoroverperiod=$$v},expression:"consecutiveoroverperiod"}},[_vm._v("Consecutive")])],1)])],1):_vm._e(),_vm.occurrences>0&&1===_vm.consecutiveoroverperiod?_c("el-row",{staticClass:"mT20",attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Period")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item fc-input-full-border-select2 width100",attrs:{placeholder:"Choose Period"},model:{value:_vm.overperiod,callback:function($$v){_vm.overperiod=$$v},expression:"overperiod"}},[_c("el-option",{key:1,attrs:{label:"Last 1 Hour",value:1}}),_c("el-option",{key:3,attrs:{label:"Last 3 Hour",value:3}}),_c("el-option",{key:6,attrs:{label:"Last 6 Hour",value:6}}),_c("el-option",{key:12,attrs:{label:"Last 12 Hour",value:12}})],1)],1)])],1):_vm._e()],1):5===_vm.model.readingRule.thresholdType?_c("div",[_c("div",{staticClass:"fc-sub-title-container"},[_c("div",{staticClass:"fc-modal-sub-title"},[_vm._v("CONDITIONS")])]),_c("f-formula-builder",{staticClass:"mT20",attrs:{title:"",module:"thresholdrule",metric:_vm.selectedMetric,assetCategory:{id:_vm.model.readingRule.assetCategoryId}},model:{value:_vm.model.readingRule.workflow,callback:function($$v){_vm.$set(_vm.model.readingRule,"workflow",$$v)},expression:"model.readingRule.workflow"}})],1):6===_vm.model.readingRule.thresholdType?_c("div",[_c("div",{staticClass:"fc-sub-title-container"},[_c("div",{staticClass:"fc-modal-sub-title"},[_vm._v("CONDITIONS")])]),_c("el-row",{staticClass:"mT20",attrs:{align:"middle"}},[_c("function",{attrs:{metric:_vm.selectedMetric,resource:_vm.selectedResource},model:{value:_vm.model.readingRule.workflow,callback:function($$v){_vm.$set(_vm.model.readingRule,"workflow",$$v)},expression:"model.readingRule.workflow"}})],1)],1):_vm._e(),_c("div",{staticClass:"fc-sub-title-container"},[_c("div",{staticClass:"fc-modal-sub-title"},[_vm._v("ALARM DETAILS")])]),_c("el-row",{staticClass:"mT20",attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Message")]),_c("div",{staticClass:"add"},[_c("el-form-item",{attrs:{prop:"message"}},[_c("el-input",{staticClass:"width100 fc-input-full-border-select2",attrs:{type:"text",placeholder:"Enter Alarm Message"},model:{value:_vm.newalarm.message,callback:function($$v){_vm.$set(_vm.newalarm,"message",$$v)},expression:"newalarm.message"}})],1)],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Severity")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item width100 fc-input-full-border-select2",attrs:{placeholder:"Enter Severity"},model:{value:_vm.newalarm.severity,callback:function($$v){_vm.$set(_vm.newalarm,"severity",$$v)},expression:"newalarm.severity"}},[_c("el-option",{key:"Critical",attrs:{label:"Critical",value:"Critical"}}),_c("el-option",{key:"Major",attrs:{label:"Major",value:"Major"}}),_c("el-option",{key:"Minor",attrs:{label:"Minor",value:"Minor"}}),_c("el-option",{key:"Clear",attrs:{label:"Clear",value:"Clear"}})],1)],1)])],1),_c("el-row",{attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Problem")]),_c("div",{staticClass:"add"},[_c("el-input",{staticClass:"width100 mT10 fc-input-full-border-select2",model:{value:_vm.newalarm.problem,callback:function($$v){_vm.$set(_vm.newalarm,"problem",$$v)},expression:"newalarm.problem"}})],1)])],1),_c("el-row",{staticClass:"mT20",attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Possible Causes")]),_c("div",{staticClass:"add textarea-height-set mT10"},[_c("el-input",{staticClass:"width100 fc-input-full-border-select2 width100",attrs:{placeholder:"",type:"textarea",autosize:{minRows:2,maxRows:4},resize:"none"},model:{value:_vm.newalarm.possibleCauses,callback:function($$v){_vm.$set(_vm.newalarm,"possibleCauses",$$v)},expression:"newalarm.possibleCauses"}})],1)])],1),_c("el-row",{staticClass:"mT20",attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Recommendations")]),_c("div",{staticClass:"add textarea-height-set mT10"},[_c("el-input",{staticClass:"width100 fc-input-full-border-select2",attrs:{placeholder:"",type:"textarea",autosize:{minRows:2,maxRows:4},resize:"none"},model:{value:_vm.newalarm.recommendation,callback:function($$v){_vm.$set(_vm.newalarm,"recommendation",$$v)},expression:"newalarm.recommendation"}})],1)])],1),_c("div",{staticClass:"fc-sub-title-container"},[_c("div",{staticClass:"fc-modal-sub-title"},[_vm._v("ADDITIONAL INFORMATION")])]),_c("div",{staticClass:"fc-rule-actions"},_vm._l(_vm.model.actions,(function(action,index){return _c("el-card",{key:index,staticClass:"fc-rule-action box-card"},[_c("el-row",{attrs:{gutter:10,align:"middle"}},[_c("el-col",{attrs:{md:24,lg:24}},[_c("field-matcher",{ref:"field-matcher",refInFor:!0,model:{value:action.templateJson.fieldMatcher,callback:function($$v){_vm.$set(action.templateJson,"fieldMatcher",$$v)},expression:"action.templateJson.fieldMatcher"}})],1)],1)],1)})),1)],1)],1)],1),_vm.isMultiResource?_c("space-asset-multi-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:_vm.resourceData,query:_vm.resourceQuery,showAsset:!0,disable:!0},on:{associate:_vm.associateResource,"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_c("space-asset-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:{},query:_vm.resourceQuery,showAsset:!1,picktype:"space"},on:{associate:_vm.associateResource,"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.save("ruleForm")}}},[_vm._v(_vm._s(_vm.saving?"Saving...":"SAVE")+" ")])],1)])],1)}),NewThresholdRulevue_type_template_id_5f067d78_staticRenderFns=[],esm_typeof=__webpack_require__(103336),FieldMatcher2=(__webpack_require__(976801),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(538077),__webpack_require__(843843),__webpack_require__(23324)),FFormulaBuilder=__webpack_require__(902294),SpaceAssetChooser=__webpack_require__(372587),SpaceAssetMultiChooser=__webpack_require__(673362),ErrorBanner=__webpack_require__(297157),FDuration=__webpack_require__(611097),FFormulaFunction=__webpack_require__(72875),NewThresholdRulevue_type_script_lang_js={props:["visible","isnew","visibility","rule","isDependant","parentRuleName"],data:function(){return{consecutiveoroverperiod:1,occurrences:null,overperiod:null,show:!1,moduleMeta:null,callmail:!1,callsms:!1,module:"alarm",saving:!1,showPrevPopover:!1,error:!1,model:{readingRule:{module:"",name:"",description:"",executionOrder:0,resourceId:-1,readingFieldId:-1,assetCategoryId:null,event:{moduleId:null,activityType:1},criteria:null,
// ruleType: 2,
baselineId:null,aggregation:null,dateRange:1,operatorId:null,percentage:null,thresholdType:1,onSuccess:!1,parentRuleId:null},actions:[{actionType:6,templateJson:{fieldMatcher:[]}}]},selectedResource:{name:""},resourceType:"asset",selectedResourceList:[],isIncludeResource:!1,dummyValue:[1],assetCategory:"",assetList:[],readings:[],newalarm:{message:"",severity:"Minor",problem:null,possibleCauses:null,recommendation:null},duration:-1,baselines:[],expressionString:"",selectedThresholdFieldName:"",thresholdFields:[],actionChanged:!1,chooserVisibility:!1,resourceQuery:null,errorText:""}},created:function(){this.$store.dispatch("loadAssetCategory")},components:{FieldMatcher:FieldMatcher2/* default */.Z,FFormulaBuilder:FFormulaBuilder/* default */.Z,SpaceAssetChooser:SpaceAssetChooser/* default */.Z,SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,ErrorBanner:ErrorBanner/* default */.Z,Duration:FDuration/* default */.Z,Function:FFormulaFunction/* default */.Z},computed:{isAsset:function(){return"asset"===this.resourceType},isMultiResource:function(){return this.isAsset&&(!this.rule||!Object.keys(this.rule).length||this.rule.assetCategoryId>0)},showDialog:function(){return this.visible},selectedMetric:function(){var _this=this;return this.selectedThresholdFieldName&&this.thresholdFields.length?this.thresholdFields.find((function(field){return field.name===_this.selectedThresholdFieldName})):""},isBooleanMetric:function(){return this.selectedMetric&&("BOOLEAN"===this.selectedMetric.dataTypeEnum||"BOOLEAN"===this.selectedMetric.dataTypeEnum._name)},isNumberMetric:function(){return this.selectedMetric&&(["NUMBER","DECIMAL"].includes(this.selectedMetric.dataTypeEnum)||["NUMBER","DECIMAL"].includes(this.selectedMetric.dataTypeEnum._name))},assetCategoryList:function(){return this.$store.state.assetCategory},resourceData:function(){return{assetCategory:this.model.readingRule.assetCategoryId,isIncludeResource:this.isIncludeResource,selectedResources:this.selectedResourceList.map((function(resource){return{id:resource&&"object"===(0,esm_typeof/* default */.Z)(resource)?resource.id:resource}}))}},isResourceDisabled:function(){return!this.isnew||this.isDependant||this.isAsset&&(!this.model.readingRule.assetCategoryId||this.model.readingRule.assetCategoryId<0)},categoryName:function(){var _this2=this;if(this.model.readingRule.assetCategoryId>0&&this.assetCategoryList){var category=this.assetCategoryList.find((function(category){return category.id===_this2.model.readingRule.assetCategoryId}));if(category)return category.name}return""},resourceLabel:function(){if(this.dummyValue=[1],this.model.readingRule.assetCategoryId>0){var message,selectedCount=this.selectedResourceList.length;if(selectedCount){var includeMsg=this.isIncludeResource?"included":"excluded";if(1===selectedCount)return this.selectedResourceList[0].name;message=selectedCount+" "+this.categoryName+(selectedCount>1?"s":"")+" "+includeMsg}else message="All "+this.categoryName+"s selected";return message}if(this.selectedResource.id>0)return this.selectedResource.name;this.dummyValue=[]}},watch:{selectedResource:function(newVal,oldVal){newVal.id!==oldVal.id?(oldVal.id&&(this.selectedThresholdFieldName="",this.model.readingRule.readingFieldId=null),this.loadThresholdFields()):newVal&&newVal.id||(this.thresholdFields=[],this.selectedThresholdFieldName="",this.model.readingRule.readingFieldId=null)},selectedThresholdFieldName:function(){var _this3=this,field=this.thresholdFields.find((function(field){return field.name===_this3.selectedThresholdFieldName}));field&&(this.model.readingRule.event.moduleId=field.moduleId,this.model.readingRule.readingFieldId=field.id,this.model.readingRule.percentage="${previousValue}"!==this.model.readingRule.percentage||this.isNumberMetric?this.model.readingRule.percentage:"")}},mounted:function(){this.loadBaselines(),this.loadRuleData()},methods:{resetIfSelected:function(){this.resourceLabel=null},setExpressionString:function(expression){this.model.readingRule.workflow=expression},closeDialog:function(){this.$emit("update:visibility",!1)},loadRuleData:function(){var _this4=this;if(!this.isnew||this.isDependant)if(this.rule.assetCategoryId>0?(this.resourceType="asset",this.model.readingRule.assetCategoryId=this.rule.assetCategoryId,this.rule.includedResources&&this.rule.includedResources.length?(this.isIncludeResource=!0,this.selectedResourceList=this.rule.includedResources.map((function(id){return{id:id}}))):this.rule.excludedResources&&(this.selectedResourceList=this.rule.excludedResources.map((function(id){return{id:id}}))),this.loadAssets()):(this.selectedResource=this.rule.matchedResources[Object.keys(this.rule.matchedResources)[0]],2===this.selectedResource.resourceType?(this.resourceType="asset",this.loadAssets()):this.resourceType="space"),this.isDependant||(this.model.readingRule.thresholdType=this.rule.thresholdType,this.model.readingRule.name=this.rule.name,this.model.readingRule.description=this.rule.description),this.model.readingRule.resourceId=this.rule.resourceId,this.model.readingRule.readingFieldId=this.rule.readingFieldId,this.selectedThresholdFieldName=this.rule.readingField.name,this.model.readingRule.event.moduleId=this.rule.readingField.moduleId,this.isDependant)this.model.readingRule.onSuccess=!1,this.model.readingRule.parentRuleId=this.rule.id;else{if(3===this.model.readingRule.thresholdType||2===this.model.readingRule.thresholdType?(3===this.model.readingRule.thresholdType&&(this.model.readingRule.baselineId=this.rule.baselineId),this.model.readingRule.aggregation=this.rule.aggregation,this.model.readingRule.dateRange=this.rule.dateRange,this.model.readingRule.operatorId=this.rule.operatorId,this.model.readingRule.percentage=this.rule.percentage):4===this.model.readingRule.thresholdType?(this.model.readingRule.minFlapValue=this.rule.minFlapValue>-1?this.rule.minFlapValue:null,this.model.readingRule.maxFlapValue=this.rule.maxFlapValue>-1?this.rule.maxFlapValue:null,this.model.readingRule.flapInterval=this.rule.flapInterval/6e4,this.model.readingRule.flapFrequency=this.rule.flapFrequency>-1?this.rule.flapFrequency:null):1===this.model.readingRule.thresholdType?(this.model.readingRule.operatorId=this.rule.operatorId,this.rule.workflow?(this.occurrences=this.rule.percentage,this.model.readingRule.percentage=this.rule.workflow.expressions[0].aggregateCondition[0].value,this.rule.workflow.expressions[0].criteria.conditions["2"]?(this.consecutiveoroverperiod=1,this.overperiod=parseInt(this.rule.workflow.expressions[0].criteria.conditions["2"].value)):this.consecutiveoroverperiod=2):this.model.readingRule.percentage=this.rule.percentage):5!==this.model.readingRule.thresholdType&&6!==this.model.readingRule.thresholdType||(this.model.readingRule.dateRange=this.rule.dateRange&&-1!==this.rule.dateRange?this.rule.dateRange:"",this.rule.workflow.occurences={occurences:this.rule.occurences,overPeriod:this.rule.overPeriod,consecutive:this.rule.consecutive},this.model.readingRule.workflow=this.rule.workflow),this.rule.actions){var content=this.rule.actions[0].template.originalTemplate;this.$helpers.copy(this.newalarm,content);var keys=Object.keys(this.newalarm);Object.keys(content).filter((function(key){return!keys.includes(key)&&"alarmType"!==key})).forEach((function(key){_this4.model.actions[0].templateJson.fieldMatcher.push({field:key,value:content[key]})}))}var unwatch=this.$watch("newalarm",(function(){this.actionChanged=!0,unwatch()}),{deep:!0})}else this.model.readingRule.thresholdType=1},loadThresholdFields:function(){var _this5=this;this.isMultiResource?this.model.readingRule.assetCategoryId>0&&(this.thresholdFields=[],this.$util.loadAssetReadingFields(1===this.selectedResourceList.length?this.selectedResourceList[0].id:-1,this.model.readingRule.assetCategoryId).then((function(fields){_this5.thresholdFields=fields}))):this.selectedResource&&this.selectedResource.id>0&&(this.thresholdFields=[],this.$util.loadReadingFields(this.selectedResource).then((function(fields){_this5.thresholdFields=fields})))},loadBaselines:function(){var self=this;self.$http.get("/baseline/all").then((function(response){200===response.status&&(self.baselines=response.data)}))},thresholdfield:function(field){this.model.readingRule.readingFieldId=field.id,this.model.readingRule.event.moduleId=field.moduleId},getAsset:function(id){return this.assetList.find((function(at){return at.id===id}))},validation:function(rule){this.error=!1,this.errorText="",rule.name?(!rule.assetCategoryId||rule.assetCategoryId<0)&&(!rule.readingFieldId||rule.readingFieldId<0)&&"asset"===this.resourceType?(this.errorText="Please select Asset Category",this.error=!0):!rule.readingFieldId||rule.readingFieldId<0?(this.errorText="Please select Threshold Metric",this.error=!0):this.newalarm.message?(this.errorText="",this.error=!1):(this.errorText="Please enter alarm message",this.error=!0):(this.errorText="Please enter Name",this.error=!0)},save:function(ruleForm){var _this6=this,self=this;if(
// self.saving = true
this.validation(this.model.readingRule),!this.error){var data=this.$helpers.cloneObject(this.model);
/* this.$refs[ruleForm].validate((valid) => {
        if (valid) {
          console.log('submited')
        }
        else {
          this.error = true
          console.log('error submit!!')
          return false
        }
      }) */
if(self.isDependant||(delete data.readingRule.parentRuleId,delete data.readingRule.onSuccess),this.selectedResourceList){var fieldName=this.isIncludeResource?"includedResources":"excludedResources";data.readingRule[fieldName]=this.selectedResourceList.map((function(resource){return resource.id}))}if(data.readingRule.assetCategoryId||delete data.readingRule.assetCategoryId,""===data.readingRule.module&&(data.readingRule.module=this.module,data.readingRule.resourceId=self.selectedResource.id),1===data.readingRule.thresholdType){delete data.readingRule.baselineId,delete data.readingRule.dateRange,delete data.readingRule.flapInterval,delete data.readingRule.flapFrequency,delete data.readingRule.minFlapValue,delete data.readingRule.maxFlapValue;var isExpressionValue="${previousValue}"===data.readingRule.percentage;self.occurrences?(delete data.readingRule.criteria,data.readingRule.workflow={expressions:[],resultEvaluator:"",parameters:[{name:"resourceId",typeString:"Number"}]},data.readingRule.workflow.expressions.push({name:"a",aggregateString:"count",fieldName:self.selectedThresholdFieldName,moduleName:this.thresholdFields.find((function(field){return field.name===self.selectedThresholdFieldName})).module.name,aggregateCondition:[],criteria:{pattern:"(1)",conditions:{1:{fieldName:"parentId",operatorId:9,sequence:"1",value:this.isMultiResource?"${resourceId}":this.selectedResource.id}}}}),data.readingRule.workflow.expressions[0].aggregateCondition.push({fieldName:self.selectedThresholdFieldName,operatorId:data.readingRule.operatorId,sequence:"1",value:data.readingRule.percentage}),2===self.consecutiveoroverperiod?(data.readingRule.workflow.expressions[0].aggregateString="count",data.readingRule.workflow.expressions[0].orderByFieldName="ttime",data.readingRule.workflow.expressions[0].sortBy="desc",data.readingRule.workflow.expressions[0].limit=self.occurrences):(data.readingRule.workflow.expressions[0].criteria.pattern="(1 and 2)",data.readingRule.workflow.expressions[0].criteria.conditions["2"]={fieldName:"ttime",operatorId:42,sequence:"2",value:self.overperiod+",${ttime}"},this.addParam("ttime","Number",data)),data.readingRule.percentage=self.occurrences,data.readingRule.workflow.resultEvaluator="a=="+self.occurrences):(delete data.readingRule.workflow,delete data.readingRule.aggregation,data.readingRule.criteria={pattern:"(1)",conditions:{1:{fieldName:self.selectedThresholdFieldName,columnName:self.thresholdFields.find((function(field){return field.name===self.selectedThresholdFieldName})).columnName,operatorId:data.readingRule.operatorId,sequence:"1",value:isExpressionValue?"previousValue":data.readingRule.percentage,isExpressionValue:isExpressionValue}}})}else if(2===data.readingRule.thresholdType)delete data.readingRule.criteria,delete data.readingRule.baselineId,delete data.readingRule.flapInterval,delete data.readingRule.flapFrequency,delete data.readingRule.minFlapValue,delete data.readingRule.maxFlapValue,(this.isnew||this.checkWorkFlowChange())&&(data.readingRule.workflow={expressions:[],resultEvaluator:"",parameters:[{name:"resourceId",typeString:"Number"}]},data.readingRule.workflow.expressions.push({name:"a",aggregateString:data.readingRule.aggregation,fieldName:this.thresholdFields.find((function(field){return field.name===self.selectedThresholdFieldName})).name,moduleName:this.thresholdFields.find((function(field){return field.name===self.selectedThresholdFieldName})).module.name,criteria:{pattern:"(1 and 2)",conditions:{1:{fieldName:"parentId",operatorId:9,sequence:"1",value:this.isMultiResource?"${resourceId}":this.selectedResource.id},2:{fieldName:"ttime",operatorId:42,sequence:"2",value:data.readingRule.dateRange+",${ttime}"}}},aggregateCondition:[]}),self.addParam("ttime","Number",data),"ccount"===data.readingRule.aggregation&&(data.readingRule.workflow.expressions[0].aggregateString="count",data.readingRule.workflow.expressions[0].orderByFieldName="ttime",data.readingRule.workflow.expressions[0].sortBy="desc",data.readingRule.workflow.expressions[0].limit=data.readingRule.percentage),data.readingRule.workflow.resultEvaluator="a"+this.getOperatorSymbol(data.readingRule.operatorId)+data.readingRule.percentage);else if(3===data.readingRule.thresholdType){if(delete data.readingRule.criteria,delete data.readingRule.flapInterval,delete data.readingRule.flapFrequency,delete data.readingRule.minFlapValue,delete data.readingRule.maxFlapValue,this.isnew||data.readingRule.baselineId!==this.rule.baselineId||this.checkWorkFlowChange()){data.readingRule.workflow={expressions:[],resultEvaluator:"",parameters:[{name:"resourceId",typeString:"Number"}]};var baselineExp={name:"a",aggregateString:data.readingRule.aggregation,fieldName:this.thresholdFields.find((function(field){return field.name===self.selectedThresholdFieldName})).name,moduleName:this.thresholdFields.find((function(field){return field.name===self.selectedThresholdFieldName})).module.name,criteria:{pattern:"(1 and 2)",conditions:{1:{fieldName:"parentId",operatorId:9,sequence:"1",value:this.isMultiResource?"${resourceId}":this.selectedResource.id},2:{fieldName:"ttime",operatorId:42,sequence:"2",value:data.readingRule.dateRange+",${ttime}"}}},conditionSeqVsBaselineId:{2:data.readingRule.baselineId}};self.addParam("ttime","Number",data),data.readingRule.workflow.expressions.push(baselineExp);var baselineExpB=self.$helpers.cloneObject(baselineExp);baselineExpB.name="b",baselineExpB.conditionSeqVsBaselineId=null,data.readingRule.workflow.expressions.push(baselineExpB),data.readingRule.workflow.resultEvaluator="((b-a)/a)*100"+this.getOperatorSymbol(data.readingRule.operatorId)+data.readingRule.percentage}}else 4===data.readingRule.thresholdType?(delete data.readingRule.criteria,delete data.readingRule.workflow,delete data.readingRule.baselineId,delete data.readingRule.aggregation,delete data.readingRule.dateRange,delete data.readingRule.operatorId,delete data.readingRule.percentage,data.readingRule.flapInterval=6e4*data.readingRule.flapInterval):5!==data.readingRule.thresholdType&&6!==data.readingRule.thresholdType||(delete data.readingRule.criteria,delete data.readingRule.flapInterval,delete data.readingRule.flapFrequency,delete data.readingRule.minFlapValue,delete data.readingRule.maxFlapValue,delete data.readingRule.baselineId,delete data.readingRule.aggregation,delete data.readingRule.dateRange,delete data.readingRule.operatorId,delete data.readingRule.percentage,data.readingRule.workflow.occurences&&Object.assign(data.readingRule,data.readingRule.workflow.occurences));this.isnew?this.setActions(data):(data.readingRule=this.$helpers.compareObject(data.readingRule,this.rule),data.readingRule.id=this.rule.id,this.actionChanged||data.actions[0].templateJson.fieldMatcher.length?this.setActions(data):delete data.actions),this.$util.addOrUpdateRule("alarm",data,!this.isnew).then((function(rule){_this6.$emit("saved",!0),_this6.closeDialog()}))}},addParam:function(name,type,data){data.readingRule.workflow.parameters||(data.readingRule.workflow.parameters=[]);var params=data.readingRule.workflow.parameters;params.find((function(param){return param.name===name}))||params.push({name:name,typeString:type||"String"})},setActions:function(data){for(var key in data.actions[0].templateJson.fieldMatcher=data.actions[0].templateJson.fieldMatcher.filter((function(field){return""!==field.field})),this.newalarm)null!==this.newalarm[key]&&data.actions[0].templateJson.fieldMatcher.push({field:key,value:this.newalarm[key]})},checkWorkFlowChange:function(){return this.model.readingRule.aggregation!==this.rule.aggregation||this.selectedResource.id!==this.rule.resourceId||this.model.readingRule.dateRange!==this.rule.dateRange||this.model.readingRule.operatorId!==this.rule.operatorId||this.model.readingRule.percentage!==this.rule.percentage||this.model.readingRule.readingFieldId!==this.rule.readingFieldId},getOperatorSymbol:function(operatorId){return 9===operatorId?"=":10===operatorId?"!=":13===operatorId?">":14===operatorId?">=":11===operatorId?"<":12===operatorId?"<=":""},cancel:function(){this.$emit("canceled",!0)},loadAssets:function(){var self=this,url="/asset/all";this.$http.get(url).then((function(response){response.data&&(
// self.assetList = response.data.assets
self.isnew&&!self.isDependant||(self.isMultiResource?self.selectedResourceList=response.data.assets.filter((function(asset){return self.selectedResourceList.some((function(resource){return resource.id===asset.id}))})):self.selectedResource=response.data.assets.find((function(asset){return asset.id===self.selectedResource.id})),self.loadThresholdFields()))}))},associateResource:function(selectedObj){this.isMultiResource?selectedObj.resourceList&&selectedObj.resourceList.length&&(this.selectedResourceList=selectedObj.resourceList,this.isIncludeResource=selectedObj.isInclude,this.loadThresholdFields()):this.selectedResource=selectedObj,this.chooserVisibility=!1,this.resourceQuery=null},showCreateNewDialog:function(){return!!this.$route.query.create},backto:function(){this.$router.push({path:"thresholdrules"})},setPrevValue:function(){this.model.readingRule.percentage="${previousValue}",this.showPrevPopover=!1}}},new_NewThresholdRulevue_type_script_lang_js=NewThresholdRulevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(new_NewThresholdRulevue_type_script_lang_js,NewThresholdRulevue_type_template_id_5f067d78_render,NewThresholdRulevue_type_template_id_5f067d78_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewThresholdRule=component.exports,ThresholdRulesvue_type_script_lang_js={components:{NewThresholdRule:NewThresholdRule},title:function(){return"Alarm Rules"},created:function(){this.$store.dispatch("loadAssetCategory")},data:function(){return{loading:!0,readingRules:[],isNew:!0,isDependant:!1,rule:{},loadThresholdRuleForm:!1,selectedRule:null,showDialog:!1,thresholddialog:!1,parentRuleName:null,closepopover:!1,subheaderMenu:[{label:"Asset",path:{path:"/app/setup/alarmsettings/alarmrules/asset"}},{label:"Space",path:{path:"/app/setup/alarmsettings/alarmrules/space"}}],categoryTypes:[{label:"All Alarm Rules",value:"all"}],categoryType:"all"}},mounted:function(){this.loadReadingRules()},computed:{assetCategoryList:function(){return this.$store.state.assetCategory}},methods:{getRuleName:function(ruleId){var rules=this.readingRules.map((function(list){return list.rules}));return rules.find((function(rule){return rule.id===ruleId})).name},getResourceName:function(rule){if(rule.assetCategoryId>0){var message,selectedCount,isIncluded=rule.includedResources&&rule.includedResources.length;isIncluded?selectedCount=rule.includedResources.length:rule.excludedResources&&rule.excludedResources.length&&(selectedCount=rule.excludedResources.length);var categoryName=this.getCategoryName(rule.assetCategoryId);return message=selectedCount?(isIncluded?selectedCount:"Some")+" "+categoryName+(!isIncluded||selectedCount>1?"s":""):"All "+categoryName+"s",message}return rule.resourceId>0?rule.matchedResources[Object.keys(rule.matchedResources)[0]].name:"---"},getCategoryName:function(categoryId){if(categoryId>0&&this.assetCategoryList){var category=this.assetCategoryList.find((function(category){return category.id===categoryId}));if(category)return category.name}},aftersave:function(){this.closeCreateDialog()},newThresholdRule:function(){this.loadThresholdRuleForm=!0,this.isNew=!0,this.rule={},this.isDependant=!1,this.thresholddialog=!0},newThresholdDependantRule:function(rule){this.loadThresholdRuleForm=!0,this.isNew=!0,this.isDependant=!0,this.rule=this.$helpers.cloneObject(rule),this.parentRuleName=this.rule.name,this.thresholddialog=!0},editThresholdRule:function(rule){var self=this;self.$util.fetchRule("alarm",rule.id).then((function(rule){self.loadThresholdRuleForm=!0,self.isNew=!1,self.isDependant=!1,self.rule=rule,-1!==self.rule.parentRuleId&&(self.parentRuleName=self.getRuleName(self.rule.parentRuleId)),self.thresholddialog=!0}))},changeRuleStatus:function(rule){this.$util.changeRuleStatus("alarm",rule.id,rule.status).then((function(response){})).catch((function(error){}))},loadReadingRules:function(){var _this=this;this.loading=!0,this.$util.loadRules("alarm").then((function(rules){if(_this.readingRules=[],rules){var spaceRules=[],energyRules=[],chillerRules=[],fcuRules=[],otherRules={};for(var category in rules.forEach((function(rule){var category;if(rule.assetCategoryId>0)category=_this.getCategoryName(rule.assetCategoryId);else if(rule.resourceId>0){var resource=rule.matchedResources[Object.keys(rule.matchedResources)[0]];2===resource.resourceType?category=_this.getCategoryName(resource.category.id):spaceRules.push(rule)}category&&("Energy Meter"===category?energyRules.push(rule):"Chiller"===category?chillerRules.push(rule):"FCU"===category?fcuRules.push(rule):(otherRules[category]||(otherRules[category]=[]),otherRules[category].push(rule)))})),energyRules.length&&(_this.readingRules.push({category:"Energy Meter",rules:energyRules}),_this.categoryTypes.push({label:"Energy Meter Rules",value:"Energy Meter"})),chillerRules.length&&(_this.readingRules.push({category:"Chiller",rules:chillerRules}),_this.categoryTypes.push({label:"Chiller Rules",value:"Chiller"})),fcuRules.length&&(_this.readingRules.push({category:"FCU",rules:fcuRules}),_this.categoryTypes.push({label:"FCU Rules",value:"FCU"})),otherRules){var _rules=otherRules[category];_this.readingRules.push({category:category,rules:_rules}),_this.categoryTypes.push({label:category+" Rules",value:category})}spaceRules.length&&(_this.readingRules.push({category:"All Spaces",rules:spaceRules}),_this.categoryTypes.push({label:"All Space Rules",value:"All Spaces"}))}_this.loading=!1}))},deleteRule:function(rule,category,idx,ruleIndex){var _this2=this;this.$dialog.confirm({title:"Delete Rule",message:"Are you sure you want to delete this rule?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&_this2.$util.deleteRule("alarm",rule.id).then((function(response){_this2.readingRules[idx].rules.splice(ruleIndex,1),_this2.readingRules[idx].rules.length||_this2.readingRules.splice(idx,1)}))}))},closeCreateDialog:function(){this.loadReadingRules()},selectedRuleTypes:function(category){this.categoryType=category,this.closepopover=!1}}},setup_ThresholdRulesvue_type_script_lang_js=ThresholdRulesvue_type_script_lang_js,ThresholdRules_component=(0,componentNormalizer/* default */.Z)(setup_ThresholdRulesvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ThresholdRules=ThresholdRules_component.exports},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/385769:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4a9843791f38c4a28fdf9f0a4584780d.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/89533.js.map