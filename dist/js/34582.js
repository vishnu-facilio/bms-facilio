"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[34582,32686,80865,53021],{
/***/197724:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return LineItemList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/common/line-items/LineItemList.vue?vue&type=template&id=26d46d48&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"line-item-list"},[_vm.canHideHeader?_vm._e():[_vm.canShowSelection?_c("div",{staticClass:"line-item-selected-action-container"},[_c("div",{staticClass:"line-item-selected-items"},[_c("span",{staticClass:"line-item-selection-count"},[_vm._v(_vm._s(_vm.selectedRecordCount))]),_c("span",{staticClass:"line-item-selection-text"},[_vm._v(" "+_vm._s(_vm.$t("common.line_item.items_selected")))])]),_c("div",[_vm._t("bulk-actions")],2),_c("div",{staticClass:"line-item-selection-close-btn"},[_c("fc-icon",{staticClass:"pointer",attrs:{group:"default",name:"close",size:"18"},on:{click:function($event){return _vm.clearSelection()}}})],1)]):[_c("div",{staticClass:"line-item-list-header-container"},[_vm.isEmpty(_vm.appliedFilter)?_c("div",{staticClass:"line-item-list-header-title"},[_vm._v(" "+_vm._s(_vm.title)+" ")]):_c("div",{staticClass:"line-item-wizard-filter-ftags"},[_c("div",{staticClass:"line-item-wizard-filter-text"},[_vm._v(" "+_vm._s(_vm.$t("commissioning.sheet.filter"))+" ")]),_c("FTags",{key:"ftag-"+_vm.moduleName,attrs:{moduleName:_vm.moduleName,filters:_vm.appliedFilter,hideQuery:!0,hideSaveAs:!0},on:{updateFilters:_vm.setAppliedfilter,clearFilters:function($event){return _vm.setAppliedfilter({})}}})],1),_vm._t("header-additional-actions"),_c("div",{staticClass:"line-item-list-header-action"},[_vm.canShowSearchAndFilter?[_c("AdvancedSearch",{directives:[{name:"show",rawName:"v-show",value:_vm.canShowFilter,expression:"canShowFilter"}],key:"filter-"+_vm.moduleName,attrs:{moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,hideQuery:!0,filterList:_vm.appliedFilter},on:{applyFilters:_vm.setAppliedfilter}}),_vm.canShowPagination?_c("span",{staticClass:"separator mL10 mR10"},[_vm._v("|")]):_vm._e()]:_vm._e(),_vm.canShowPagination?_c("Pagination",{key:"pagination-"+_vm.moduleName,attrs:{total:_vm.recordCount,currentPage:_vm.page,currentPageCount:(_vm.recordList||[]).length,perPage:_vm.perPage},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}}):_vm._e(),_vm._t("header-additional-action-right")],2)],2)]],_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):[_vm.isEmpty(_vm.recordList)?[_vm.isFilterEnabled?_c("div",{staticClass:"line-item-list-empty-state"},[_c("InlineSvg",{attrs:{src:"svgs/list-empty",iconClass:"icon icon-130"}}),_c("div",{staticClass:"line-item-list-empty-state-text"},[_vm._v(" "+_vm._s(_vm.$t("common.line_item.no_records_found"))+" ")])],1):_vm._t("empty-state",(function(){return[_c("div",{staticClass:"line-item-list-empty-state"},[_vm._t("empty-state-icon-text",(function(){return[_c("InlineSvg",{attrs:{src:"svgs/list-empty",iconClass:"icon icon-130"}}),_c("div",{staticClass:"line-item-list-empty-state-text"},[_vm._v(" "+_vm._s(_vm.emptyStateText)+" ")])]})),_vm._t("empty-state-btn",(function(){return[_vm.config.canShowAddBtn&&_vm.isEmpty(_vm.actionButtonList)?_c("el-button",{staticClass:"line-item-list-empty-state-action-btn",attrs:{type:"primary",disabled:_vm.disableActionableUIElements},on:{click:_vm.openForm}},[_vm._v(" "+_vm._s(_vm.addBtnName)+" ")]):_vm._e(),_vm.isEmpty(_vm.actionButtonList)?_vm._e():[1===_vm.actionButtonList.length?_c("el-button",{staticClass:"line-item-list-empty-state-action-btn",attrs:{type:"primary",disabled:_vm.disableActionableUIElements},on:{click:function($event){return _vm.handleClickActionBtn(_vm.actionButtonList[0].value)}}},[_vm._v(" "+_vm._s(_vm.actionButtonList[0].label)+" ")]):_c("el-dropdown",{staticClass:"line-item-list-empty-state-action-btn-list",attrs:{"split-button":"",type:"primary",disabled:_vm.disableActionableUIElements},on:{command:_vm.handleClickActionBtn,click:function($event){return _vm.handleClickActionBtn(_vm.actionButtonList[0].value)}}},[_vm._v(" "+_vm._s(_vm.actionButtonList[0].label)+" "),_c("el-dropdown-menu",{staticClass:"line-item-list-empty-state-action-btn-list-menu",attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.actionButtonList.slice(1),(function(btnObj,index){return _c("el-dropdown-item",{key:btnObj.value+"-"+index+"}",staticClass:"line-item-list-empty-state-action-btn-list-menu-item",attrs:{command:btnObj.value}},[_vm._v(" "+_vm._s(btnObj.label)+" ")])})),1)],1)]]}))],2)]}))]:[_c("div",{staticClass:"line-item-list-table"},[_vm.config.canHideColumnConfig?_vm._e():_c("div",{staticClass:"line-item-list-column-custom-icon",on:{click:function($event){_vm.showColumnSettings=!0}}},[_c("fc-icon",{staticClass:"margin-auto",attrs:{group:"default",name:"column-customisation",color:"#969696",size:"16"}})],1),_c("CommonList",{key:"line-item-table-"+_vm.moduleName,ref:"lineItemTable",staticStyle:{height:"fit-content"},attrs:{viewDetail:_vm.viewDetail,records:_vm.recordList,moduleName:_vm.moduleName,slotList:_vm.slotList,canShowCustomButton:_vm.canShowCustomButton,hideListSelect:_vm.hideListSelect,modelDataClass:_vm.modelDataClass,refreshList:_vm.onCustomButtonSuccess,checkSelection:_vm.checkSelection},on:{"selection-change":_vm.handleSelection,mainField:_vm.mainfieldAction},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"line-item-list-action-btns"},[_c("div",{staticClass:"line-item-list-edit-delete-btn"},[_vm.canShowSummaryWidget?_c("fc-icon",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"visibility-hide-actions pointer",attrs:{group:"dsm",name:"info",size:"16",color:"#1d384e","data-arrow":"true",title:_vm.$t("maintenance.calender.more_details")},on:{click:function($event){return _vm.toggleSummaryDetailsDialog(record)}}}):_vm._e(),_c("span",{class:{"cursor-not-allowed disabled":_vm.disableActionableUIElements}},[record.canShowEdit?_c("fc-icon",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"visibility-hide-actions pointer",class:{"pointer-events-none":_vm.disableActionableUIElements},attrs:{group:"default",name:"edit-text",size:"16",color:"#1d384e","data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.openForm(record)}}}):_vm._e()],1),_c("span",{class:{"cursor-not-allowed disabled":_vm.disableActionableUIElements}},[record.canShowDelete?_c("fc-icon",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"visibility-hide-actions pointer",class:{"pointer-events-none":_vm.disableActionableUIElements},attrs:{group:"dsm",name:"delete",size:"16",color:"#1d384e","data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecord([record.id])}}}):_vm._e()],1)],1),_vm._t("additional-action-btns",null,{record:record})],2)]}},_vm._l(_vm.tableListScopedSlots,(function(x,slotName){return{key:slotName,fn:function(context){return[_vm._t(slotName,null,null,context)]}}}))],null,!0)})],1),_c("ColumnCustomization",{key:"column-customization-"+_vm.moduleName,attrs:{visible:_vm.showColumnSettings,moduleName:_vm.moduleName,viewName:_vm.viewname,relatedViewDetail:_vm.viewDetail,relatedMetaInfo:_vm.metaInfo},on:{"update:visible":function($event){_vm.showColumnSettings=$event},refreshRelatedList:_vm.refreshView}}),_vm.config.canHideFooter?_vm._e():_vm._t("footer",(function(){return[_c("div",{staticClass:"line-item-list-footer"},[_vm.config.canShowAddBtn&&_vm.isEmpty(_vm.actionButtonList)?_c("el-button",{staticClass:"line-item-list-footer-add-btn",attrs:{type:"primary",disabled:_vm.disableActionableUIElements},on:{click:_vm.openForm}},[_c("div",{staticClass:"d-flex"},[_c("fc-icon",{staticClass:"mR8",attrs:{group:"sign-symbols",name:"addition",size:"14",color:"currentColor"}}),_vm._v(" "+_vm._s(_vm.addBtnName)+" ")],1)]):_vm._l(_vm.actionButtonList,(function(btnObj,index){return _c("el-button",{key:"footer-btn-"+index,staticClass:"line-item-list-footer-add-btn",attrs:{type:"primary",disabled:_vm.disableActionableUIElements},on:{click:function($event){return _vm.handleClickActionBtn(btnObj.value)}}},[_c("div",{staticClass:"d-flex",staticStyle:{height:"14px"}},[_vm.isObject(btnObj.value)?_c("InlineSvg",{staticClass:"mR8",attrs:{src:"svgs/plans/list-alt-black-24-dp",iconClass:"icon icon-sm"}}):_c("fc-icon",{staticClass:"mR8",attrs:{group:"sign-symbols",name:"addition",size:"14",color:"currentColor"}}),_vm._v(" "+_vm._s(btnObj.label)+" ")],1)])})),_vm._t("footer-btns")],2)]}))]],_vm.canShowSummaryDetailsDialog?_c("el-dialog",{staticClass:"line-item-summary-details-dialog",attrs:{visible:_vm.canShowSummaryDetailsDialog,title:_vm.$t("maintenance.calender.more_details"),"before-close":_vm.toggleSummaryDetailsDialog,fullscreen:!0,"append-to-body":!0},on:{"update:visible":function($event){_vm.canShowSummaryDetailsDialog=$event}}},[_c("SummaryFieldsWidget",_vm._b({key:"summary-field-widget-"+_vm.moduleName,ref:"summaryFieldsWidget",staticClass:"pB20",attrs:{details:_vm.currentRecord,moduleName:_vm.moduleName,disableAutoResize:!0,detailsLayoutProp:_vm.detailsLayoutProp,siteList:_vm.siteList}},"SummaryFieldsWidget",_vm.$attrs,!1))],1):_vm._e(),_vm.showPopUpFormDialog?_vm._t("popup-form",(function(){return[_c("PopupLineItemForm",{key:"popup-form-"+_vm.moduleName,attrs:{config:_vm.formConfig,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,dataId:_vm.currentRecordId,dataObj:_vm.currentRecord,recordConversionDetails:_vm.lineItemLookupDetails,additionalParams:_vm.additionalParams,selectedFormDetails:_vm.selectedFormDetails,hideNotification:_vm.hideNotification,hasPreviousDialog:!_vm.isEmpty(_vm.currentBtnDetails)},on:{openPrevious:_vm.openPreviousDialog,onSave:_vm.refreshList,onClose:_vm.closeForm}})]}),{record:_vm.currentRecord,recordId:_vm.currentRecordId}):_vm._e(),_vm.showWizard?_vm._t("lineitem-wizard",(function(){return[_c("LineItemWizard",{attrs:{config:_vm.currentBtnDetails,selectedLookupModuleId:_vm.selectedLookupModuleId},on:{onSave:_vm.handleSelectedLookup,onCancel:_vm.closeWizard}})]})):_vm._e(),_vm._t("default")],2)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),CommonList=(__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(634338),__webpack_require__(336585),__webpack_require__(976801),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(820920)),PopupLineItemForm=__webpack_require__(67985),LineItemWizard=__webpack_require__(514739),SummaryFieldsWidget=__webpack_require__(150159),ColumnCustomization=__webpack_require__(490966),AdvancedSearchUI=__webpack_require__(615632),ListPagination=__webpack_require__(890608),CustomModuleData=__webpack_require__(689565),picklist=__webpack_require__(961358),dist=__webpack_require__(191853),api=__webpack_require__(32284),router=__webpack_require__(329435),validation=__webpack_require__(990260),LineItemListvue_type_script_lang_js={props:["config","moduleName","moduleDisplayName","viewname","widgetDetails","additionalParams","hideNotification"],components:{CommonList:CommonList/* default */.Z,PopupLineItemForm:PopupLineItemForm/* default */.Z,LineItemWizard:LineItemWizard/* default */.Z,SummaryFieldsWidget:SummaryFieldsWidget["default"],ColumnCustomization:ColumnCustomization/* default */.Z,AdvancedSearch:AdvancedSearchUI/* default */.Z,Pagination:ListPagination/* default */.Z,FTags:dist/* FTags */.KW},data:function(){return{recordList:[],recordCount:null,page:1,isLoading:!1,appliedFilter:{},viewDetail:{},viewLoading:!1,searchText:null,selectedRecordCount:null,siteList:{},showPopUpFormDialog:!1,currentRecordId:null,currentRecord:null,summaryDetailsLoading:!1,detailsLayoutProp:null,showColumnSettings:!1,metaInfo:{},canShowSummaryDetailsDialog:!1,showWizard:!1,currentBtnDetails:{},selectedLookupModuleId:null,isEmpty:validation/* isEmpty */.xb,isObject:validation/* isObject */.Kn}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.init();case 2:case"end":return _context.stop()}}),_callee)})))()},computed:{modelDataClass:function(){var _ref=this.config||{},modelDataClass=_ref.modelDataClass;return modelDataClass||CustomModuleData/* CustomModuleData */.u},canHideHeader:function(){var _this$config;return!(null===(_this$config=this.config)||void 0===_this$config||!_this$config.canHideHeader)},title:function(){var moduleDisplayName=this.moduleDisplayName,moduleName=this.moduleName,widgetDetails=this.widgetDetails,_ref2=widgetDetails||{},title=_ref2.title;return title||this.$t("common.header.list_of_module_display_name",{moduleDisplayName:moduleDisplayName||moduleName})},perPage:function(){var _this$widgetDetails;return(null===(_this$widgetDetails=this.widgetDetails)||void 0===_this$widgetDetails?void 0:_this$widgetDetails.perPage)||10},canShowPagination:function(){var recordCount=this.recordCount,recordList=this.recordList,appliedFilter=this.appliedFilter;return!(0,validation/* isEmpty */.xb)(recordCount)||!(0,validation/* isEmpty */.xb)(recordList)||!(0,validation/* isEmpty */.xb)(appliedFilter)},emptyStateText:function(){var moduleDisplayName=this.moduleDisplayName,moduleName=this.moduleName,widgetDetails=this.widgetDetails;return(null===widgetDetails||void 0===widgetDetails?void 0:widgetDetails.emptyStateText)||this.$t("common.products.no_module_available",{moduleName:moduleDisplayName||moduleName})},actionButtonList:function(){var _this2=this,_ref3=this.widgetDetails||{},actionButtonList=_ref3.actionButtonList;return(actionButtonList||[]).map((function(btn){var _ref4=btn||{},value=_ref4.value,label=_ref4.label,btnObj=!(0,validation/* isObject */.Kn)(value)&&"default_add"===value&&(0,validation/* isEmpty */.xb)(label)?{value:value,label:_this2.addBtnName}:btn;return btnObj}))},currentFilter:function(){var appliedFilter=this.appliedFilter,config=this.config,_ref5=config||{},filters=_ref5.filters;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters||{}),appliedFilter||{})},canShowSelection:function(){return this.selectedRecordCount&&!(0,validation/* isEmpty */.xb)(this.selectedRecordCount)},loading:function(){return this.isLoading||this.viewLoading},formConfig:function(){var currentRecordId=this.currentRecordId,currentRecord=this.currentRecord,config=this.config,_ref6=config||{},formTitle=_ref6.formTitle,_ref6$modifyFieldProp=_ref6.modifyFieldPropsHook,modifyFieldPropsHook=void 0===_ref6$modifyFieldProp?function(){}:_ref6$modifyFieldProp,_ref6$onBlurHook=_ref6.onBlurHook,onBlurHook=void 0===_ref6$onBlurHook?function(){}:_ref6$onBlurHook,_ref6$onWidgetChange=_ref6.onWidgetChange,onWidgetChange=void 0===_ref6$onWidgetChange?function(){}:_ref6$onWidgetChange,modifyFieldProps=function(field){return modifyFieldPropsHook(field,{currentRecordId:currentRecordId,currentRecord:currentRecord})};return{formTitle:formTitle,modifyFieldPropsHook:modifyFieldProps,onBlurHook:onBlurHook,onWidgetChange:onWidgetChange}},selectedFormDetails:function(){var currentRecordId=this.currentRecordId,_ref7=this.config||{},formDetails=_ref7.formDetails,_ref8=formDetails||{},defaultForm=_ref8.defaultForm,addForm=_ref8.addForm,editForm=_ref8.editForm;return(0,validation/* isEmpty */.xb)(currentRecordId)||(0,validation/* isEmpty */.xb)(editForm)?(0,validation/* isEmpty */.xb)(currentRecordId)&&!(0,validation/* isEmpty */.xb)(addForm)?addForm||{}:(0,validation/* isEmpty */.xb)(defaultForm)?null:defaultForm||{}:editForm||{}},addBtnName:function(){var moduleDisplayName=this.moduleDisplayName,moduleName=this.moduleName,config=this.config,_ref9=config||{},addBtnText=_ref9.addBtnText;return addBtnText||"Add ".concat(moduleDisplayName||moduleName)},mainFieldObj:function(){var _ref10=this.viewDetail||{},fields=_ref10.fields,_ref11=(fields||[]).find((function(viewFld){var _viewFld$field;return null===viewFld||void 0===viewFld||null===(_viewFld$field=viewFld.field)||void 0===_viewFld$field?void 0:_viewFld$field.mainField}))||{},mainField=_ref11.field;return mainField||{}},canShowSearchAndFilter:function(){var recordList=this.recordList,searchText=this.searchText,appliedFilter=this.appliedFilter;return!(0,validation/* isEmpty */.xb)(recordList)||!(0,validation/* isEmpty */.xb)(searchText)||!(0,validation/* isEmpty */.xb)(appliedFilter)},canShowFilter:function(){var _this$config2;return!(null!==(_this$config2=this.config)&&void 0!==_this$config2&&_this$config2.canHideFilter)},canShowCustomButton:function(){var _this$config3;return!(null===(_this$config3=this.config)||void 0===_this$config3||!_this$config3.canShowCustomButton)},hideListSelect:function(){var _this$config4;return this.disableActionableUIElements||!(null===(_this$config4=this.config)||void 0===_this$config4||!_this$config4.hideListSelect)},checkSelection:function(){var _this$config5;return null===(_this$config5=this.config)||void 0===_this$config5?void 0:_this$config5.checkSelection},skipEditPermission:function(){var _ref12=this.config||{},skipModulePermission=_ref12.skipModulePermission,_ref13=skipModulePermission||{},editPermission=_ref13.editPermission;return!!editPermission},skipDeletePermission:function(){var _ref14=this.config||{},skipModulePermission=_ref14.skipModulePermission,_ref15=skipModulePermission||{},deletePermission=_ref15.deletePermission;return!!deletePermission},canShowSummaryWidget:function(){var _ref16=this.widgetDetails||{},summaryWidgetName=_ref16.summaryWidgetName,_ref17=this.config||{},canHideSummaryWidget=_ref17.canHideSummaryWidget;return!canHideSummaryWidget&&summaryWidgetName},mainfieldAction:function(){var _ref18=this.config||{},mainfieldAction=_ref18.mainfieldAction;return(0,validation/* isFunction */.mf)(mainfieldAction)?mainfieldAction:function(){}},isFilterEnabled:function(){var page=this.page,searchText=this.searchText,appliedFilter=this.appliedFilter;return 1!==page||!(0,validation/* isEmpty */.xb)(searchText)||!(0,validation/* isEmpty */.xb)(appliedFilter)},slotList:function(){var _ref19=this.config||{},tableSlotList=_ref19.tableSlotList,defaultSlotList=[{name:"additionalActions",isActionColumn:!0,columnAttrs:{width:130,class:"visibility-visible-actions",fixed:"right"}}].concat((0,toConsumableArray/* default */.Z)(tableSlotList||[]));return defaultSlotList},tableListScopedSlots:function(){var $scopedSlots=this.$scopedSlots,otherSlots=["bulk-actions","header-additional-actions","header-additional-action-right","empty-state","empty-state-btn","additional-action-btns","footer","footer-btns","popup-form","lineitem-wizard","default"];return Object.entries($scopedSlots).reduce((function(tableListScopedSlots,_ref20){var _ref21=(0,slicedToArray/* default */.Z)(_ref20,1),slotName=_ref21[0];return otherSlots.includes(slotName)||(tableListScopedSlots[slotName]=$scopedSlots[slotName]),tableListScopedSlots}),{})},lineItemLookupDetails:function(){var selectedLookupModuleId=this.selectedLookupModuleId,currentBtnDetails=this.currentBtnDetails;return{selectedLookupModuleId:selectedLookupModuleId,currentBtnDetails:currentBtnDetails}},disableActionableUIElements:function(){var _this$config$disableA=this.config.disableActionableUIElements,disableActionableUIElements=void 0!==_this$config$disableA&&_this$config$disableA;return!((0,validation/* isEmpty */.xb)(disableActionableUIElements)||!disableActionableUIElements)}},watch:{moduleName:{handler:"init",immediate:!0},page:function(){this.loadRecords(!0)},searchText:function(){this.refreshRecordList(!0)}},methods:{init:function(){this.loadViewDetails(),this.refreshRecordList(),this.loadMetaInfo(),this.loadSummaryDetailLayout()},refreshRecordList:function(){var _arguments=arguments,_this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var force;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],_context2.next=3,_this3.loadRecords(force);case 3:return _context2.next=5,_this3.loadRecordCount(force);case 5:case"end":return _context2.stop()}}),_callee2)})))()},loadRecords:function(){var _arguments2=arguments,_this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var force,moduleName,viewname,page,currentFilter,searchText,perPage,_ref22,getRecordList,canShowEdit,canShowDelete,recordList,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(force=_arguments2.length>0&&void 0!==_arguments2[0]&&_arguments2[0],moduleName=_this4.moduleName,viewname=_this4.viewname,page=_this4.page,currentFilter=_this4.currentFilter,searchText=_this4.searchText,perPage=_this4.perPage,_ref22=_this4.config||{},getRecordList=_ref22.getRecordList,canShowEdit=_this4.canShowEdit,canShowDelete=_this4.canShowDelete,recordList=[],_this4.isLoading=!0,_context3.prev=6,!(0,validation/* isFunction */.mf)(getRecordList)){_context3.next=13;break}return _context3.next=10,getRecordList({page:page,filters:currentFilter,search:searchText,force:force});case 10:recordList=_context3.sent,_context3.next=17;break;case 13:return params={moduleName:moduleName,viewname:viewname,filters:currentFilter,page:page,perPage:perPage,force:force,search:searchText},_context3.next=16,_this4.modelDataClass.fetchAll(params);case 16:recordList=_context3.sent;case 17:if(!(0,validation/* isArray */.kJ)(recordList)){_context3.next=21;break}return _this4.recordList=(recordList||[]).map((function(record){return new _this4.modelDataClass((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},record),{},{canShowEdit:canShowEdit(record),canShowDelete:canShowDelete(record)}))})),_context3.next=21,_this4.loadSiteList();case 21:_context3.next=26;break;case 23:_context3.prev=23,_context3.t0=_context3["catch"](6),_this4.$message.error(_context3.t0||"Unable to fetch moduleList");case 26:_this4.isLoading=!1;case 27:case"end":return _context3.stop()}}),_callee3,null,[[6,23]])})))()},loadRecordCount:function(){var _arguments3=arguments,_this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var force,moduleName,viewname,currentFilter,searchText,_ref23,getRecordCount,recordCount,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(force=_arguments3.length>0&&void 0!==_arguments3[0]&&_arguments3[0],moduleName=_this5.moduleName,viewname=_this5.viewname,currentFilter=_this5.currentFilter,searchText=_this5.searchText,_ref23=_this5.config||{},getRecordCount=_ref23.getRecordCount,recordCount=null,_context4.prev=4,!(0,validation/* isFunction */.mf)(getRecordCount)){_context4.next=11;break}return _context4.next=8,getRecordCount({filters:currentFilter,search:searchText,force:force});case 8:recordCount=_context4.sent,_context4.next=15;break;case 11:return params={moduleName:moduleName,viewname:viewname,filters:currentFilter,force:force,search:searchText},_context4.next=14,_this5.modelDataClass.fetchRecordsCount(params);case 14:recordCount=_context4.sent;case 15:_this5.recordCount=recordCount,_context4.next=21;break;case 18:_context4.prev=18,_context4.t0=_context4["catch"](4),_this5.$message.error(_context4.t0||"Unable to fetch count");case 21:case"end":return _context4.stop()}}),_callee4,null,[[4,18]])})))()},loadViewDetails:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var moduleName,viewname,_ref24,getViewDetails,response,_ref25,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(moduleName=_this6.moduleName,viewname=_this6.viewname,_ref24=_this6.config||{},getViewDetails=_ref24.getViewDetails,response={},_this6.viewLoading=!0,_context5.prev=4,!(0,validation/* isFunction */.mf)(getViewDetails)){_context5.next=11;break}return _context5.next=8,getViewDetails();case 8:response=_context5.sent,_context5.next=14;break;case 11:return _context5.next=13,api/* API */.bl.get("v2/views/".concat(viewname),{moduleName:moduleName});case 13:response=_context5.sent;case 14:if(_ref25=response||{},error=_ref25.error,data=_ref25.data,!error){_context5.next=19;break}throw error;case 19:_this6.viewDetail=(null===data||void 0===data?void 0:data.viewDetail)||{};case 20:_context5.next=25;break;case 22:_context5.prev=22,_context5.t0=_context5["catch"](4),_this6.$message.error(_context5.t0||"Cannot fetch view details");case 25:_this6.viewLoading=!1;case 26:case"end":return _context5.stop()}}),_callee5,null,[[4,22]])})))()},loadSiteList:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var recordList,siteIds,defaultIds,perPage,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(recordList=_this7.recordList,siteIds=(recordList||[]).map((function(record){return record.siteId})),defaultIds=(0,toConsumableArray/* default */.Z)(new Set(siteIds)),perPage=defaultIds.length,0!==perPage){_context6.next=6;break}return _context6.abrupt("return");case 6:return _context6.next=8,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"site",skipDeserialize:!0},defaultIds:defaultIds,perPage:perPage});case 8:_yield$getFieldOption=_context6.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error||(_this7.siteList=options||{});case 12:case"end":return _context6.stop()}}),_callee6)})))()},loadMetaInfo:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var _this8$config,moduleName,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if(null===(_this8$config=_this8.config)||void 0===_this8$config||!_this8$config.canHideColumnConfig){_context7.next=2;break}return _context7.abrupt("return");case 2:return moduleName=_this8.moduleName,_context7.next=5,api/* API */.bl.get("/module/meta",{moduleName:moduleName});case 5:_yield$API$get=_context7.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_this8.metaInfo=(null===data||void 0===data?void 0:data.meta)||{});case 9:case"end":return _context7.stop()}}),_callee7)})))()},toggleSummaryDetailsDialog:function(){var record=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.currentRecord=record,this.canShowSummaryDetailsDialog=!this.canShowSummaryDetailsDialog},loadSummaryDetailLayout:function(){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var moduleName,widgetDetails,_ref26,summaryWidgetName,appId,params,_yield$API$get2,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:if(moduleName=_this9.moduleName,widgetDetails=_this9.widgetDetails,_ref26=widgetDetails||{},summaryWidgetName=_ref26.summaryWidgetName,!(0,validation/* isEmpty */.xb)(summaryWidgetName)){_context8.next=4;break}return _context8.abrupt("return");case 4:return _this9.summaryDetailsLoading=!0,appId=((0,router/* getApp */.wx)()||{}).id,params={moduleName:moduleName,appId:appId,widgetName:summaryWidgetName},_context8.next=9,api/* API */.bl.get("v2/customPage/summaryFieldWidget",params);case 9:_yield$API$get2=_context8.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error||(_this9.detailsLayoutProp=data),_this9.summaryDetailsLoading=!1;case 14:case"end":return _context8.stop()}}),_callee8)})))()},onCustomButtonSuccess:function(){this.loadRecords(),this.clearSelection()},refreshView:function(){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee9(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context9){while(1)switch(_context9.prev=_context9.next){case 0:return _this10.showColumnSettings=!1,_context9.next=3,_this10.loadViewDetails();case 3:case"end":return _context9.stop()}}),_callee9)})))()},setAppliedfilter:function(filters){this.appliedFilter=filters||{},this.refreshRecordList(!0)},handleSelection:function(selectedList){this.$emit("handleSelection",selectedList),this.selectedRecordCount=(selectedList||[]).length},handleSelectedLookup:function(record){var _ref27=record||{},id=_ref27.id;this.selectedLookupModuleId=id,this.$emit("selectedLookupModuleRecord",record),this.openForm()},openForm:function(record){var _this11=this,_ref28=record||{},id=_ref28.id;this.currentRecordId=id||null,(0,validation/* isEmpty */.xb)(id)&&!(0,validation/* isEmpty */.xb)(record)&&(this.currentRecord=record),this.showPopUpFormDialog=!0,this.$nextTick((function(){_this11.showWizard=!1}))},closeForm:function(){this.currentRecordId=null,this.currentRecord=null,this.showPopUpFormDialog=!1,this.selectedLookupModuleId=null,this.currentBtnDetails={},this.clearSelection(),this.$emit("selectedLookupModuleRecord",null)},closeWizard:function(){this.showWizard=!1,this.closeForm()},openPreviousDialog:function(){var _this12=this;this.showWizard=!0,this.$nextTick((function(){_this12.showPopUpFormDialog=!1}))},handleClickActionBtn:function(btnValue){this.$emit("clickedActionBtn",btnValue);var _ref29=btnValue||{},lookupModuleName=_ref29.lookupModuleName;(0,validation/* isEmpty */.xb)(lookupModuleName)?this.showPopUpFormDialog=!0:(this.currentBtnDetails=btnValue,this.showWizard=!0)},canShowEdit:function(record){var moduleName=this.moduleName,config=this.config,skipEditPermission=this.skipEditPermission,_ref30=config||{},isRecordEditable=_ref30.isRecordEditable,canHideEdit=_ref30.canHideEdit,hasPermission=!!skipEditPermission||this.$hasPermission("".concat(moduleName,":EDIT,UPDATE")),canEdit=record.canEdit()||!1,customcanShowEditCallBack=!(0,validation/* isFunction */.mf)(isRecordEditable)||isRecordEditable(record),canShowRecordEdit=hasPermission&&canEdit&&customcanShowEditCallBack&&!canHideEdit;return canShowRecordEdit},canShowDelete:function(record){var moduleName=this.moduleName,config=this.config,skipDeletePermission=this.skipDeletePermission,_ref31=config||{},isRecordDeletable=_ref31.isRecordDeletable,canHideDelete=_ref31.canHideDelete,hasPermission=!!skipDeletePermission||this.$hasPermission("".concat(moduleName,":DELETE")),customcanShowDeleteCallBack=!(0,validation/* isFunction */.mf)(isRecordDeletable)||isRecordDeletable(record),canShowRecordDelete=hasPermission&&customcanShowDeleteCallBack&&!canHideDelete;return canShowRecordDelete},deleteRecord:function(idList){var _this13=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee10(){var moduleDisplayName,moduleName,config,_ref32,deletePopupDetails,_ref33,title,message,rbDanger,rbLabel,customTitle,customMessage,customBtnLabel,value;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context10){while(1)switch(_context10.prev=_context10.next){case 0:return moduleDisplayName=_this13.moduleDisplayName,moduleName=_this13.moduleName,config=_this13.config,_ref32=config||{},deletePopupDetails=_ref32.deletePopupDetails,_ref33=deletePopupDetails||{},title=_ref33.title,message=_ref33.message,rbDanger=_ref33.rbDanger,rbLabel=_ref33.rbLabel,customTitle=(0,validation/* isNullOrUndefined */.le)(title)?"".concat(_this13.$t("custommodules.list.delete")," ").concat(moduleDisplayName):title,customMessage=(0,validation/* isNullOrUndefined */.le)(message)?"".concat(_this13.$t("custommodules.list.delete_confirmation")," ").concat(moduleDisplayName,"?"):message,customBtnLabel=(0,validation/* isNullOrUndefined */.le)(rbLabel)?_this13.$t("custommodules.list.delete"):rbLabel,_context10.next=8,_this13.$dialog.confirm({title:customTitle,message:customMessage,rbDanger:!!(0,validation/* isNullOrUndefined */.le)(rbDanger)||rbDanger,rbLabel:customBtnLabel});case 8:if(value=_context10.sent,!value){_context10.next=25;break}return _this13.isLoading=!0,_context10.prev=11,_context10.next=14,_this13.modelDataClass.delete(moduleName,idList);case 14:return _this13.$message.success("".concat(moduleDisplayName," ").concat(_this13.$t("custommodules.list.delete_success"))),_this13.clearSelection(),_this13.$emit("onDelete"),_context10.next=19,_this13.refreshRecordList(!0);case 19:_context10.next=25;break;case 21:_context10.prev=21,_context10.t0=_context10["catch"](11),_this13.$message.error(_context10.t0),_this13.isLoading=!1;case 25:case"end":return _context10.stop()}}),_callee10,null,[[11,21]])})))()},refreshList:function(response){this.$emit("onCreateOrUpdate",response);var _ref34=response||{},error=_ref34.error;!error&&this.refreshRecordList(!0)},clearSelection:function(){var _this$$refs;this.selectedRecordCount=null,this.$emit("handleSelection",[]);var lineItemListRef=null===(_this$$refs=this.$refs)||void 0===_this$$refs?void 0:_this$$refs.lineItemTable,tableRef=null===lineItemListRef||void 0===lineItemListRef?void 0:lineItemListRef.$refs["common-list-".concat(this.moduleName)];null===tableRef||void 0===tableRef||tableRef.clearSelection()}}},line_items_LineItemListvue_type_script_lang_js=LineItemListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(line_items_LineItemListvue_type_script_lang_js,render,staticRenderFns,!1,null,"26d46d48",null)
/* harmony default export */,LineItemList=component.exports},
/***/514739:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return LineItemWizard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/common/line-items/LineItemWizard.vue?vue&type=template&id=e679714a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"line-item-wizard",attrs:{visible:!0,"append-to-body":!0,"close-on-click-modal":!1,"before-close":_vm.cancel,"show-close":!1,"custom-class":"line-item-wizard-dialog"},scopedSlots:_vm._u([{key:"title",fn:function(){return[_c("div",{staticClass:"line-item-wizard-title-header"},[_c("div",{staticClass:"line-item-wizard-title-text"},[_vm._v(_vm._s(_vm.title))]),_c("div",{staticClass:"line-item-wizard-title-header-filter"},[_vm._t("quick-filter"),_c("div",{staticClass:"line-item-wizard-title-header-filter-inbuilt"},[_c("AdvancedSearch",{key:"filter-"+_vm.wizardModuleName,attrs:{moduleName:_vm.wizardModuleName,moduleDisplayName:_vm.wizardModuleDisplayName,hideQuery:!0,filterList:_vm.appliedFilter},on:{applyFilters:_vm.setAppliedfilter}}),_vm.canShowPagination?_c("span",{staticClass:"line-item-wizard-separator"},[_vm._v("|")]):_vm._e(),_vm.canShowPagination?_c("Pagination",{key:"pagination-"+_vm.wizardModuleName,attrs:{total:_vm.recordCount,currentPage:_vm.page,currentPageCount:(_vm.recordList||[]).length,perPage:_vm.perPage},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}}):_vm._e()],1)],2)])]},proxy:!0},{key:"footer",fn:function(){return[_c("el-button",{on:{click:_vm.cancel}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{attrs:{type:"primary",disabled:_vm.isEmpty(_vm.selectedRecordId)},on:{click:_vm.updateSelectedRecord}},[_vm._v(_vm._s(_vm.$t("common._common.next")))])]},proxy:!0}],null,!0)},[_c("div",{staticClass:"line-item-wizard-container"},[_vm.isEmpty(_vm.appliedFilter)?_vm._e():_c("div",{staticClass:"line-item-wizard-filter-ftags"},[_c("div",{staticClass:"line-item-wizard-filter-text"},[_vm._v(" "+_vm._s(_vm.$t("commissioning.sheet.filter"))+" ")]),_c("FTags",{key:"ftag-"+_vm.wizardModuleName,staticClass:"flex-shrink-0",attrs:{moduleName:_vm.wizardModuleName,filters:_vm.appliedFilter,hideQuery:!0,hideSaveAs:!0},on:{updateFilters:_vm.setAppliedfilter,clearFilters:function($event){return _vm.setAppliedfilter({})}}})],1),_vm.showLoading?_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}}):_vm.isEmpty(_vm.recordList)?_c("div",{staticClass:"line-item-wizard-empty-state"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon icon-130"}}),_c("div",{staticClass:"line-item-wizard-empty-state-text"},[_vm._v(" "+_vm._s(_vm.$t("common.products.no_module_available",{moduleName:_vm.wizardModuleDisplayName||_vm.wizardModuleName}))+" ")])],1):_c("div",{staticClass:"line-item-list-wizard"},[_vm.canShowColumnConfig?_c("div",{staticClass:"line-item-wizard-column-custom-icon",on:{click:function($event){_vm.showColumnSettings=!0}}},[_c("fc-icon",{staticClass:"margin-auto",attrs:{group:"default",name:"column-customisation",color:"#969696",size:"16"}})],1):_vm._e(),_c("CommonList",{key:"line-item-table-"+_vm.wizardModuleName,ref:"lineItemTable",attrs:{viewDetail:_vm.viewDetail,records:_vm.recordList,moduleName:_vm.wizardModuleName,slotList:_vm.slotList,hideListSelect:!0,tableRowClick:_vm.tableRowClick,hideGlimpse:!0},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("el-radio",{staticClass:"fc-radio-btn line-item-wizard-radio-btn",attrs:{label:record.id},model:{value:_vm.selectedRecordId,callback:function($$v){_vm.selectedRecordId=$$v},expression:"selectedRecordId"}})]}}],null,!0)})],1),_c("ColumnCustomization",{key:"column-customization-"+_vm.wizardModuleName,attrs:{visible:_vm.showColumnSettings,moduleName:_vm.wizardModuleName,viewName:_vm.viewname,relatedViewDetail:_vm.viewDetail,relatedMetaInfo:_vm.metaInfo},on:{"update:visible":function($event){_vm.showColumnSettings=$event},refreshRelatedList:_vm.refreshView}})],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),ListPagination=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(890608)),CommonList=__webpack_require__(820920),ColumnCustomization=__webpack_require__(490966),AdvancedSearchUI=__webpack_require__(615632),CustomModuleData=__webpack_require__(689565),dist=__webpack_require__(191853),api=__webpack_require__(32284),validation=__webpack_require__(990260),LineItemWizardvue_type_script_lang_js={props:["config","selectedLookupModuleId"],components:{AdvancedSearch:AdvancedSearchUI/* default */.Z,Pagination:ListPagination/* default */.Z,CommonList:CommonList/* default */.Z,FTags:dist/* FTags */.KW,ColumnCustomization:ColumnCustomization/* default */.Z},data:function(){return{appliedFilter:{},recordList:[],recordCount:null,page:1,isListLoading:!1,viewDetail:{},viewLoading:!1,selectedRecordId:null,showColumnSettings:!1,metaInfo:{},isEmpty:validation/* isEmpty */.xb}},created:function(){this.loadViewDetails(),this.refreshRecordList(),this.loadMetaInfo(),(0,validation/* isEmpty */.xb)(this.selectedLookupModuleId)||(this.selectedRecordId=this.selectedLookupModuleId)},computed:{title:function(){var wizardModuleDisplayName=this.wizardModuleDisplayName,wizardModuleName=this.wizardModuleName;return"Select ".concat(wizardModuleDisplayName||wizardModuleName)},wizardModuleName:function(){var _this$config;return null===(_this$config=this.config)||void 0===_this$config?void 0:_this$config.lookupModuleName},wizardModuleDisplayName:function(){var _this$config2;return null===(_this$config2=this.config)||void 0===_this$config2?void 0:_this$config2.lookupModuleDisplayName},perPage:function(){var _this$config3;return(null===(_this$config3=this.config)||void 0===_this$config3?void 0:_this$config3.perPage)||10},slotList:function(){return[{name:"selection",isHardcodedColumn:!0,columnAttrs:{width:60,fixed:"left"}}]},modelDataClass:function(){return CustomModuleData/* CustomModuleData */.u},showLoading:function(){return this.viewLoading||this.isListLoading},canShowPagination:function(){var recordCount=this.recordCount,recordList=this.recordList,appliedFilter=this.appliedFilter;return!(0,validation/* isEmpty */.xb)(recordCount)||!(0,validation/* isEmpty */.xb)(recordList)||!(0,validation/* isEmpty */.xb)(appliedFilter)},canShowColumnConfig:function(){var _this$config4;return!(null===(_this$config4=this.config)||void 0===_this$config4||!_this$config4.canShowColumnConfig)},viewname:function(){var _this$config5;return(null===(_this$config5=this.config)||void 0===_this$config5?void 0:_this$config5.viewname)||"hidden-all"}},watch:{page:function(){this.loadRecords(!0)}},methods:{refreshRecordList:function(){var _arguments=arguments,_this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var force;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],_context.next=3,_this.loadRecords(force);case 3:return _context.next=5,_this.loadRecordCount(force);case 5:case"end":return _context.stop()}}),_callee)})))()},loadRecords:function(){var _arguments2=arguments,_this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var force,moduleName,viewname,page,appliedFilter,searchText,perPage,_ref,getRecordList,additionalParams,additionalFilters,recordList,filters,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(force=_arguments2.length>0&&void 0!==_arguments2[0]&&_arguments2[0],moduleName=_this2.wizardModuleName,viewname=_this2.viewname,page=_this2.page,appliedFilter=_this2.appliedFilter,searchText=_this2.searchText,perPage=_this2.perPage,_ref=_this2.config||{},getRecordList=_ref.getRecordList,additionalParams=_ref.additionalParams,additionalFilters=_ref.additionalFilters,recordList=[],filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},appliedFilter||{}),additionalFilters||{}),_this2.isListLoading=!0,_context2.prev=6,!(0,validation/* isFunction */.mf)(getRecordList)){_context2.next=13;break}return _context2.next=10,getRecordList({page:page,filters:filters,search:searchText||null,force:force});case 10:recordList=_context2.sent,_context2.next=17;break;case 13:return params=(0,objectSpread2/* default */.Z)({moduleName:moduleName,viewname:viewname,filters:filters,page:page,perPage:perPage,force:force,search:searchText||null},additionalParams||{}),_context2.next=16,_this2.modelDataClass.fetchAll(params);case 16:recordList=_context2.sent;case 17:_this2.recordList=(0,validation/* isArray */.kJ)(recordList)?recordList:[],_context2.next=23;break;case 20:_context2.prev=20,_context2.t0=_context2["catch"](6),_this2.$message.error(_context2.t0||"Unable to fetch moduleList");case 23:_this2.isListLoading=!1;case 24:case"end":return _context2.stop()}}),_callee2,null,[[6,20]])})))()},loadRecordCount:function(){var _arguments3=arguments,_this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var force,moduleName,viewname,appliedFilter,searchText,_ref2,getRecordCount,additionalParams,additionalFilters,recordCount,filters,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(force=_arguments3.length>0&&void 0!==_arguments3[0]&&_arguments3[0],moduleName=_this3.wizardModuleName,viewname=_this3.viewname,appliedFilter=_this3.appliedFilter,searchText=_this3.searchText,_ref2=_this3.config||{},getRecordCount=_ref2.getRecordCount,additionalParams=_ref2.additionalParams,additionalFilters=_ref2.additionalFilters,recordCount=null,filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},appliedFilter||{}),additionalFilters||{}),_this3.recordCount=null,_context3.prev=6,!(0,validation/* isFunction */.mf)(getRecordCount)){_context3.next=13;break}return _context3.next=10,getRecordCount({filters:filters,search:searchText,force:force});case 10:recordCount=_context3.sent,_context3.next=17;break;case 13:return params={moduleName:moduleName,viewname:viewname,filters:filters,force:force,search:searchText,additionalParams:additionalParams},_context3.next=16,_this3.modelDataClass.fetchRecordsCount(params);case 16:recordCount=_context3.sent;case 17:_this3.recordCount=recordCount,_context3.next=23;break;case 20:_context3.prev=20,_context3.t0=_context3["catch"](6),_this3.$message.error(_context3.t0||"Unable to fetch count");case 23:case"end":return _context3.stop()}}),_callee3,null,[[6,20]])})))()},loadViewDetails:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var moduleName,viewname,_ref3,getViewDetails,response,_ref4,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(moduleName=_this4.wizardModuleName,viewname=_this4.viewname,_ref3=_this4.config||{},getViewDetails=_ref3.getViewDetails,response={},_this4.viewLoading=!0,_context4.prev=4,!(0,validation/* isFunction */.mf)(getViewDetails)){_context4.next=11;break}return _context4.next=8,getViewDetails();case 8:response=_context4.sent,_context4.next=14;break;case 11:return _context4.next=13,api/* API */.bl.get("v2/views/".concat(viewname),{moduleName:moduleName});case 13:response=_context4.sent;case 14:if(_ref4=response||{},error=_ref4.error,data=_ref4.data,!error){_context4.next=19;break}throw error;case 19:_this4.viewDetail=(null===data||void 0===data?void 0:data.viewDetail)||{};case 20:_context4.next=25;break;case 22:_context4.prev=22,_context4.t0=_context4["catch"](4),_this4.$message.error(_context4.t0||"Cannot fetch view details");case 25:_this4.viewLoading=!1;case 26:case"end":return _context4.stop()}}),_callee4,null,[[4,22]])})))()},loadMetaInfo:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var params,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(_this5.canShowColumnConfig){_context5.next=2;break}return _context5.abrupt("return");case 2:return params={moduleName:_this5.wizardModuleName},_context5.next=5,api/* API */.bl.get("/module/meta",params);case 5:_yield$API$get=_context5.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_this5.metaInfo=(null===data||void 0===data?void 0:data.meta)||{});case 9:case"end":return _context5.stop()}}),_callee5)})))()},setAppliedfilter:function(filters){this.appliedFilter=filters||{},this.page=1,this.refreshRecordList(!0)},refreshView:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _this6.showColumnSettings=!1,_context6.next=3,_this6.loadViewDetails();case 3:case"end":return _context6.stop()}}),_callee6)})))()},tableRowClick:function(record){var _ref5=record||{},id=_ref5.id;this.selectedRecordId=id},updateSelectedRecord:function(){var recordList=this.recordList,selectedRecordId=this.selectedRecordId,record=recordList.find((function(record){return record.id===selectedRecordId}));this.$emit("onSave",record),this.$emit("onClose")},cancel:function(){this.$emit("onCancel")}}},line_items_LineItemWizardvue_type_script_lang_js=LineItemWizardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(line_items_LineItemWizardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,LineItemWizard=component.exports},
/***/615632:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AdvancedSearchUI}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/search/AdvancedSearchUI.vue?vue&type=template&id=55bf6bc8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"advance-search-ui"},[_c("fc-icon",{staticClass:"d-flex cursor-pointer",attrs:{group:"default",name:"filter-outline",size:"14"},on:{click:function($event){_vm.showAdvWizard=!0}}}),_vm.isEmpty(_vm.filterList)?_vm._e():_c("div",{staticClass:"dot-active-pink"}),_c("el-dialog",{staticClass:"advance-search-ui-dialog",attrs:{visible:_vm.showAdvWizard,"append-to-body":!0,"show-close":!0,title:"Filter "+_vm.moduleDisplayName+" by","custom-class":"advance-search-dialog"},on:{"update:visible":function($event){_vm.showAdvWizard=$event}}},[_vm.showAdvWizard?[_c("AdvancedSearch",{key:"filter-"+_vm.moduleName,ref:"advancedSearch",attrs:{moduleName:_vm.moduleName,hideQuery:_vm.hideQuery,filterList:_vm.filterList,showAdvWizard:_vm.showAdvWizard},on:{applyFilters:_vm.applyFilters,closeDialog:function($event){_vm.showAdvWizard=!1}}})]:_vm._e()],2)],1)},staticRenderFns=[],dist=__webpack_require__(191853),validation=__webpack_require__(990260),AdvancedSearchUIvue_type_script_lang_js={props:["filterList","moduleName","moduleDisplayName","hideQuery"],components:{AdvancedSearch:dist/* AdvancedSearch */.ZJ},data:function(){return{showAdvWizard:!1,isEmpty:validation/* isEmpty */.xb}},methods:{applyFilters:function(filters){this.showAdvWizard=!1,this.$emit("applyFilters",filters)}}},search_AdvancedSearchUIvue_type_script_lang_js=AdvancedSearchUIvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(search_AdvancedSearchUIvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AdvancedSearchUI=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/34582.js.map