(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[77286],{
/***/628539:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FEditor}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FEditor.vue?vue&type=template&id=0c30c6a9
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"editor",attrs:{id:_vm.tid?_vm.tid:Math.random().toString(36).substr(2,9)}})},staticRenderFns=[],createClass=__webpack_require__(862833),classCallCheck=__webpack_require__(513087),inherits=__webpack_require__(793806),createSuper=__webpack_require__(624343),quill=(__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(676095)),quill_default=__webpack_require__.n(quill),FEditorvue_type_script_lang_js={props:["value","placeholder","editorModules","disabled","tid","registerCustomModules"],data:function(){return{quill:null}},mounted:function(){this.registerPrototypes(),this.setupQuillEditor(),this.handleInitialContent(),this.registerEditorEventListeners(),this.$emit("ready",this.quill)},watch:{value:function(val){val===this.quill.root.innerHTML||this.quill.hasFocus()||(this.quill.root.innerHTML=val)},disabled:function(status){this.quill.enable(!status)}},beforeDestroy:function(){this.quill=null,delete this.quill},methods:{setupQuillEditor:function(){var modules={};this.editorModules&&(modules=this.editorModules);var editorConfig={debug:!1,modules:modules,theme:"snow",placeholder:this.placeholder?this.placeholder:"",readOnly:!!this.disabled&&this.disabled};this.quill=new(quill_default())(this.$el,editorConfig)},registerPrototypes:function(){quill_default().prototype.getHTML=function(){return this.container.querySelector(".ql-editor").innerHTML},quill_default().prototype.getWordCount=function(){return this.container.querySelector(".ql-editor").innerText.length};var Block=quill_default()["import"]("blots/block"),Div=function(_Block){(0,inherits/* default */.Z)(Div,_Block);var _super=(0,createSuper/* default */.Z)(Div);function Div(){return(0,classCallCheck/* default */.Z)(this,Div),_super.apply(this,arguments)}return(0,createClass/* default */.Z)(Div)}(Block);Div.tagName="div",Div.blotName="div",Div.allowedChildren=Block.allowedChildren,Div.allowedChildren.push(Block),quill_default().register(Div,!1),this.registerCustomModules&&this.registerCustomModules(quill_default())},registerEditorEventListeners:function(){this.quill.on("text-change",this.handleTextChange),this.quill.on("selection-change",this.handleSelectionChange),this.listenForEditorEvent("text-change"),this.listenForEditorEvent("selection-change"),this.listenForEditorEvent("editor-change")},listenForEditorEvent:function(type){var _this=this;this.quill.on(type,(function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_this.$emit.apply(_this,[type].concat(args))}))},handleInitialContent:function(){this.value&&(this.quill.root.innerHTML=this.value)},handleSelectionChange:function(range,oldRange){!range&&oldRange?this.$emit("blur",this.quill):range&&!oldRange&&this.$emit("focus",this.quill)},handleTextChange:function(){var editorContent="<div><br></div>"===this.quill.getHTML()?"":this.quill.getHTML();this.$emit("input",editorContent)},removeFormat:function(){this.quill.removeFormat(0,this.quill.getLength())}}},components_FEditorvue_type_script_lang_js=FEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FEditorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FEditor=component.exports},
/***/94505:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TextCardPopup}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/TextCardPopup.vue?vue&type=template&id=031f2052
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("el-dialog",{attrs:{title:(_vm.isNew?"Add":"Edit")+" Text",visible:_vm.visibility,"append-to-body":!0,"before-close":_vm.closeDialog,"custom-class":"floorplan-property-dialog graphic-object-dialog fc-dialog-center-container setup-dialog60 text-card-dialog"},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"text-editor-body"},[_c("div",{staticClass:"f-quill ql-snow"},[_c("f-editor",{attrs:{editorModules:_vm.quillEditorConfig},model:{value:_vm.data,callback:function($$v){_vm.data=$$v},expression:"data"}})],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("CANCEL")]),_vm.data&&this.widget&&this.widget.widget?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.updateObjectProps}},[_vm._v(_vm._s("UPDATE"))]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v(_vm._s("SAVE"))])],1)]):_vm._e()},staticRenderFns=[],colors=__webpack_require__(519898),FEditor=__webpack_require__(628539),TextCardPopupvue_type_script_lang_js={props:["visibility","widget"],components:{FEditor:FEditor/* default */.Z},data:function(){return{data:null,quillEditorConfig:{toolbar:[["bold","italic","underline","link",{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"},{size:["small",!1,"large","huge"]},{header:[1,2,3,4,5,6,!1]},{color:colors/* default */.Z.textCardColors},{background:colors/* default */.Z.textCardColors},{align:["","right","center","justify"]}]]}}},mounted:function(){this.getData()},computed:{isNew:function(){return!(this.data&&this.widget&&this.widget.widget)}},methods:{getData:function(){this.widget&&this.widget.widget&&this.widget.widget.dataOptions.metaJson&&(this.data=this.widget.widget.dataOptions.metaJson)},closeDialog:function(){this.$emit("update:visibility",!1),this.$emit("close")},save:function(){this.$emit("add",this.data)},updateObjectProps:function(){this.widget.widget.dataOptions.metaJson=this.data,this.$emit("update",this.data)}}},components_TextCardPopupvue_type_script_lang_js=TextCardPopupvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_TextCardPopupvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,TextCardPopup=component.exports},
/***/144580:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CubeLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/CubeLoader.vue?vue&type=template&id=c128c1b4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement;_vm._self._c;return _vm._m(0)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"sk-cube-grid"},[_c("div",{staticClass:"sk-cube sk-cube1"}),_c("div",{staticClass:"sk-cube sk-cube2"}),_c("div",{staticClass:"sk-cube sk-cube3"}),_c("div",{staticClass:"sk-cube sk-cube4"}),_c("div",{staticClass:"sk-cube sk-cube5"}),_c("div",{staticClass:"sk-cube sk-cube6"}),_c("div",{staticClass:"sk-cube sk-cube7"}),_c("div",{staticClass:"sk-cube sk-cube8"}),_c("div",{staticClass:"sk-cube sk-cube9"})])])}],CubeLoadervue_type_script_lang_js={},components_CubeLoadervue_type_script_lang_js=CubeLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CubeLoadervue_type_script_lang_js,render,staticRenderFns,!1,null,"c128c1b4",null)
/* harmony default export */,CubeLoader=component.exports},
/***/606750:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CardBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/card-builder/CardBuilder.vue?vue&type=template&id=6868691c
var CardLayoutMixin_render,CardLayoutMixin_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-header-hide overflow-y cardBuilder-dialog",attrs:{visible:!0,"custom-class":"card-builder-popup scale-up-center",width:_vm.popupWidth}},[_vm.loading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_vm.showCardTypes?_c("CardTypes",{ref:"cardTypePicker",attrs:{cardTypes:_vm.cardTypes,onSelect:_vm.onCardSelect,onClose:_vm.onClose}}):_vm.componentName?_c(_vm.componentName,{tag:"component",attrs:{isNew:!_vm.isEdit,cardMeta:_vm.selectedCard,savedCardData:_vm.cardData&&_vm.cardData.dataOptions,cardType:_vm.selectedCard.cardType,onCardSave:_vm.onSave,onCardUpdate:_vm.onUpdate,onGoBack:function(data){return _vm.onGoBack(_vm.selectedCard.cardType,data)},onClose:_vm.onClose,isDuplicate:_vm.isDuplicate,onCardDuplicate:_vm.onDuplicate}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(762795),__webpack_require__(413383),__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(990260)),CardTypesvue_type_template_id_2a1df0e7_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pT20 fc-card-builder-page-animation"},[_c("div",{staticClass:"header pL30 pR30"},[_c("span",{staticClass:"pointer",on:{click:_vm.switchToCardView}},[_vm.showLayoutView?_c("inline-svg",{staticClass:"vertical-top rotate-90 mR20",attrs:{src:"svgs/arrow",iconClass:"icon"}}):_vm._e()],1),_vm._v(" "+_vm._s(_vm.title)+" "),_c("span",{staticClass:"pointer",on:{click:_vm.onClose}},[_c("inline-svg",{staticClass:"vertical-middle fR",attrs:{src:"svgs/close",iconClass:"icon icon-sm"}})],1)]),_c("div",{staticClass:"pT20 pL30 pB40",class:["container",_vm.showLayoutView&&"card-type-container-bg"]},[_vm.showLayoutView?[_c("div",{staticClass:"flex-middle flex-wrap"},_vm._l(_vm.selectedCard.layouts,(function(layout){return _c("div",{key:layout.type,staticClass:"item layout-item pointer",on:{click:function($event){return _vm.onSelect(_vm.selectedCard.type,layout)}}},[_c("img",{style:layout.style?layout.style:"",attrs:{src:__webpack_require__(650566)("./"+layout.icon+".jpg"),iconClass:"icon layout-card-icon"}}),_c("div",{staticClass:"name fc-black-13 text-left"},[_vm._v(_vm._s(layout.name))])])})),0)]:_vm._l(_vm.cardTypes,(function(card){return _c("div",{key:card.type,staticClass:"item pointer",on:{click:function($event){return _vm.switchToLayoutView(card)}}},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:card.icon,iconClass:"icon icon-xxlg"}}),_c("div",{staticClass:"name fc-black-15"},[_vm._v(_vm._s(card.name))])],1)}))],2)])},CardTypesvue_type_template_id_2a1df0e7_scoped_true_staticRenderFns=[],CardTypesvue_type_script_lang_js={props:["onSelect","onClose","cardTypes"],data:function(){return{showLayoutView:!1,selectedCard:null}},computed:{title:function(){return this.showLayoutView?"Choose Layout":"Add Card"}},methods:{openLayoutView:function(defaultSelection){if(defaultSelection){var card=this.cardTypes.find((function(c){return c.type===defaultSelection}));(0,validation/* isEmpty */.xb)(card)||(this.showLayoutView=!0,this.selectedCard=card)}},switchToLayoutView:function(card){card.layouts&&1===card.layouts.length?this.onSelect(card.type,card.layouts[0]):(this.selectedCard=card,this.showLayoutView=!0)},switchToCardView:function(){this.showLayoutView=!1,this.selectedCard=null}}},card_builder_CardTypesvue_type_script_lang_js=CardTypesvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(card_builder_CardTypesvue_type_script_lang_js,CardTypesvue_type_template_id_2a1df0e7_scoped_true_render,CardTypesvue_type_template_id_2a1df0e7_scoped_true_staticRenderFns,!1,null,"2a1df0e7",null)
/* harmony default export */,CardTypes=component.exports,CardLayoutMixinvue_type_script_lang_js=(__webpack_require__(821694),__webpack_require__(76265),{components:{gauge_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(91376)]).then(__webpack_require__.bind(__webpack_require__,829953))},gauge_layout_2:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(6960)]).then(__webpack_require__.bind(__webpack_require__,442243))},gauge_layout_3:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(83701)]).then(__webpack_require__.bind(__webpack_require__,232210))},gauge_layout_4:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(48828),__webpack_require__.e(72519)]).then(__webpack_require__.bind(__webpack_require__,348828))},gauge_layout_5:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(72586),__webpack_require__.e(62083)]).then(__webpack_require__.bind(__webpack_require__,772586))},gauge_layout_6:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(33570),__webpack_require__.e(29458)]).then(__webpack_require__.bind(__webpack_require__,533570))},gauge_layout_7:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(5020),__webpack_require__.e(22378),__webpack_require__.e(82612),__webpack_require__.e(50825)]).then(__webpack_require__.bind(__webpack_require__,182612))},readingcard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(97889)]).then(__webpack_require__.bind(__webpack_require__,39428))},readingcard_layout_2:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(53569),__webpack_require__.e(77533)]).then(__webpack_require__.bind(__webpack_require__,653569))},readingcard_layout_3:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(16817),__webpack_require__.e(17047)]).then(__webpack_require__.bind(__webpack_require__,216817))},readingcard_layout_4:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(30250),__webpack_require__.e(21)]).then(__webpack_require__.bind(__webpack_require__,530250))},readingcard_layout_5:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(30250),__webpack_require__.e(96091)]).then(__webpack_require__.bind(__webpack_require__,892397))},readingCard6:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(17418),__webpack_require__.e(37769)]).then(__webpack_require__.bind(__webpack_require__,917418))},mapcard_layout_1:function(){return __webpack_require__.e(/* import() */16843).then(__webpack_require__.bind(__webpack_require__,216843))},datatable:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(33719)]).then(__webpack_require__.bind(__webpack_require__,133719))},weathercard_layout_1:function(){return __webpack_require__.e(/* import() */52748).then(__webpack_require__.bind(__webpack_require__,52748))},carboncard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(56642)]).then(__webpack_require__.bind(__webpack_require__,256642))},energycost_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(96879),__webpack_require__.e(1781)]).then(__webpack_require__.bind(__webpack_require__,266385))},graphicalcard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(78459)]).then(__webpack_require__.bind(__webpack_require__,178459))},energycard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(96879),__webpack_require__.e(53441)]).then(__webpack_require__.bind(__webpack_require__,469895))},controlcard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(89300)]).then(__webpack_require__.bind(__webpack_require__,599885))},kpicard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(5020),__webpack_require__.e(22378),__webpack_require__.e(84051)]).then(__webpack_require__.bind(__webpack_require__,479374))},kpicard_layout_2:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(5020),__webpack_require__.e(22378),__webpack_require__.e(6318)]).then(__webpack_require__.bind(__webpack_require__,938084))},pmreadings_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(93361),__webpack_require__.e(83837)]).then(__webpack_require__.bind(__webpack_require__,293361))},web_layout_1:function(){return __webpack_require__.e(/* import() */30556).then(__webpack_require__.bind(__webpack_require__,430556))},photos_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(59850),__webpack_require__.e(19592)]).then(__webpack_require__.bind(__webpack_require__,18424))},table_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(59850),__webpack_require__.e(96879),__webpack_require__.e(9634),__webpack_require__.e(89579)]).then(__webpack_require__.bind(__webpack_require__,609634))},floorplan_layout_1:function(){return __webpack_require__.e(/* import() */91859).then(__webpack_require__.bind(__webpack_require__,391859))}},data:function(){return{cardTypes:[{type:"target",icon:"svgs/cardbuilder/targetcard",name:"Gauge",layouts:[{type:"TARGET1",component:"gauge_layout_1",icon:"target-meter1",name:"Gauge Layout 1",style:"width: 200px; height: 233px;"},{type:"TARGET2",component:"gauge_layout_2",icon:"target-meter2",name:"Gauge Layout 2",style:"width: 200px; height: 233px;"},{type:"TARGET3",component:"gauge_layout_3",icon:"target-meter3",name:"Gauge Layout 3",style:"width: 200px; height: 233px;"},{type:"TARGET4",component:"gauge_layout_4",icon:"target-meter4",name:"Gauge Layout 4",style:"width: 200px; height: 233px;"},{type:"TARGET5",component:"gauge_layout_5",icon:"target-meter6",name:"Gauge Layout 5",style:"width: 200px; height: 233px;"},{type:"TARGET6",component:"gauge_layout_6",icon:"target-meter-6",name:"Gauge Layout 6",style:"width: 200px; height: 233px;"},{type:"TARGET7",component:"gauge_layout_7",icon:"target-meter7",name:"Gauge Layout 7",style:"width: 200px; height: 233px;"}]},{type:"reading",icon:"svgs/cardbuilder/readingcard",name:"Reading",layouts:[{type:"READING1",component:"readingcard_layout_1",icon:"reading-card1",name:"Reading Card 1",style:"width: 250px; height: 205px;",styles:{popupWidth:"73%"}},{type:"READING2",component:"readingcard_layout_2",icon:"reading-card2",name:"Reading Card (With Baseline)",style:"width: 306px; height: 205px; border: 1px solid rgb(237, 243, 243);"},{type:"READING3",component:"readingcard_layout_3",icon:"reading-card-graph",name:"Reading Card 3",style:"width: 215px; height: 200px;"},{type:"READING4",component:"readingcard_layout_4",icon:"reading-card5",name:"Reading Card (With Multi-Aggregation)",style:"width: 100%;height: auto; border: 1px solid rgb(237, 243, 243);"},{type:"READING5",component:"readingcard_layout_5",icon:"reading-card4",name:"Reading Card (Multi-Asset)",style:"width: 100%; height: auto;border: 1px solid rgb(237, 243, 243);",styles:{popupWidth:"70%"}}]},{type:"map",icon:"svgs/cardbuilder/map",name:"Map",layouts:[{styles:{popupWidth:"70%"},type:"MAP1",component:"mapcard_layout_1",icon:"svgs/cardbuilder/map",name:"Map"}]},
// {
//   type: 'datatable',
//   icon: 'svgs/cardbuilder/default-icon',
//   name: 'Data Table',
//   layouts: [
//     {
//       type: 'TABLE1',
//       component: 'datatable',
//       icon: 'svgs/cardbuilder/default-icon',
//       name: 'Layout 1',
//     },
//   ],
// },
{type:"weather",icon:"svgs/cardbuilder/weather",name:"Weather",layouts:[{type:"WEATHER1",component:"weathercard_layout_1",icon:"svgs/cardbuilder/weather",name:"Weather Layout 1"}]},{type:"carbon",icon:"svgs/cardbuilder/carbon",name:"Carbon",layouts:[{type:"CARBON1",component:"carboncard_layout_1",icon:"svgs/cardbuilder/carbon",name:"Carbon Layout 1"}]},{type:"energy",icon:"svgs/cardbuilder/energy",name:"ENERGY",layouts:[{type:"ENERGYCARD1",component:"energycard_layout_1",icon:"svgs/cardbuilder/energy",name:"Energy Layout 1"}]},{type:"energyCost",icon:"svgs/cardbuilder/energyCost",name:"Energy Cost",layouts:[{type:"ENERGYCOST1",component:"energycost_layout_1",icon:"svgs/cardbuilder/energyCost",name:"Energy Cost Layout 1"}]},{type:"graphics",icon:"svgs/cardbuilder/livedata",name:"Live Data",layouts:[{type:"GRAPHICS1",component:"graphicalcard_layout_1",icon:"svgs/cardbuilder/livedata",name:"Live Data Layout 1"}]},{type:"control",icon:"svgs/cardbuilder/controls",name:"Control Command",layouts:[{type:"CONTROL1",component:"controlcard_layout_1",icon:"svgs/cardbuilder/controls",name:"Control Command Layout 1"}]},{type:"kpi",icon:"svgs/cardbuilder/kpi",name:"KPI",layouts:[{type:"KPICARD1",component:"kpicard_layout_1",style:"width: 300px; height: 220px;",icon:"reading-card1",name:"KPI Layout 1"},{type:"KPICARD2",component:"kpicard_layout_2",style:"width: 300px; height: 220px;",icon:"reading-card2",name:"KPI Layout 2"}]},{type:"pmreadings",icon:"svgs/cardbuilder/pm",name:"PM Readings",layouts:[{type:"PMREADINGS1",component:"pmreadings_layout_1",icon:"svgs/cardbuilder/pm",name:"PM Readings Layout 1"}]},{type:"web",icon:"svgs/cardbuilder/web",name:"Connected App",layouts:[{type:"WEB1",component:"web_layout_1",icon:"svgs/cardbuilder/web",name:"Connected App"}]},{type:"photos",icon:"svgs/cardbuilder/Photos",name:"Photos",layouts:[{type:"PHOTOS",component:"photos_layout_1",icon:"svgs/cardbuilder/Photos",name:"Photots Layout 1"}]},{type:"readingtable",icon:"svgs/cardbuilder/default-icon",name:"Reading Table",layouts:[{type:"READINGTABLE1",component:"table_layout_1",icon:"svgs/cardbuilder/default-icon",name:"Reading Table 1"}]},{type:"floorplan",icon:"svgs/cardbuilder/default-icon",name:"Floor Plan",layouts:[{type:"FLOORPLAN1",component:"floorplan_layout_1",icon:"svgs/cardbuilder/default-icon",name:"Floor Plan"}]}]}}}),card_builder_CardLayoutMixinvue_type_script_lang_js=CardLayoutMixinvue_type_script_lang_js,CardLayoutMixin_component=(0,componentNormalizer/* default */.Z)(card_builder_CardLayoutMixinvue_type_script_lang_js,CardLayoutMixin_render,CardLayoutMixin_staticRenderFns,!1,null,null,null)
/* harmony default export */,CardLayoutMixin=CardLayoutMixin_component.exports,CardBuildervue_type_script_lang_js={props:["cardData","isDuplicate"],mixins:[CardLayoutMixin],components:{CardTypes:CardTypes},data:function(){return{loading:!1,showCardTypes:!0,showCardConfig:!0,selectedCard:null,isEdit:!1}},created:function(){(0,validation/* isEmpty */.xb)(this.cardData)||this.init()},computed:{componentName:function(){if(!this.showCardTypes&&!(0,validation/* isEmpty */.xb)(this.selectedCard))return this.selectedCard.component},popupWidth:function(){return this.showCardTypes||(0,validation/* isEmpty */.xb)(this.selectedCard)?"64%":this.selectedCard.styles&&this.selectedCard.styles.popupWidth?this.selectedCard.styles.popupWidth:"70%"}},methods:{init:function(){var cardData=this.cardData;if(!(0,validation/* isEmpty */.xb)(cardData.dataOptions)){var cardLayout=cardData.dataOptions.cardLayout,layouts=this.cardTypes.map((function(type){return type.layouts.map((function(layout){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},layout),{},{parentType:type.type})}))})).flat(),selectedCard=layouts.find((function(layout){return layout.component===cardLayout}));(0,validation/* isEmpty */.xb)(selectedCard)||(this.isEdit=!0,this.onCardSelect(selectedCard.parentType,selectedCard))}},onCardSelect:function(cardType,layoutObj){this.showCardTypes=!1,this.selectedCard=(0,objectSpread2/* default */.Z)({cardType:cardType},layoutObj)},onGoBack:function(){var _this=this,selectedCardType=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.selectedCard=null,this.showCardTypes=!0,this.isEdit&&this.onClose();var hasMultiLayout=((this.cardTypes.find((function(c){return c.type===selectedCardType}))||{}).layouts||[]).length>1;selectedCardType&&hasMultiLayout&&this.$nextTick((function(){var cardTypePicker=_this.$refs["cardTypePicker"];cardTypePicker&&cardTypePicker.openLayoutView(selectedCardType)}))},onSave:function(data,layout){this.$emit("save",data,layout)},onClose:function(){this.isEdit=!1,this.$emit("close")},onDuplicate:function(_ref){var duplicateCardContext=_ref.cardContext;this.$emit("duplicate",duplicateCardContext)},onUpdate:function(_ref2){var updatedCardContext=_ref2.cardContext;this.isEdit=!1,this.$emit("update",updatedCardContext)}}},card_builder_CardBuildervue_type_script_lang_js=CardBuildervue_type_script_lang_js,CardBuilder_component=(0,componentNormalizer/* default */.Z)(card_builder_CardBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CardBuilder=CardBuilder_component.exports},
/***/534724:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DashboardTopTab}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/dashboard/DashboardTopTab.vue?vue&type=template&id=5262f557
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_vm._e():_c("div",{staticClass:"dashboard-top-bar pointer inline-flex self-center "},[_c("div",{staticClass:"inline-flex"},_vm._l(_vm.mainTabs,(function(tab,index){return _c("div",{key:index},[tab.childTabs&&tab.childTabs.length?_c("div",{directives:[{name:"popover",rawName:"v-popover",value:"popover-"+tab.id,expression:"`popover-${tab.id}`"}],staticClass:"db-tab-cell",class:{active:_vm.getTabActiveClass(tab)},on:{click:function($event){return _vm.mainTabChange(tab)}}},[_vm._v(" "+_vm._s(_vm.getTabName(tab))+" "),_c("i",{staticClass:"el-icon-arrow-down pL15"})]):_c("div",{staticClass:"db-tab-cell",class:{active:tab.id===_vm.dashboardTabId},on:{click:function($event){return _vm.mainTabChange(tab)}}},[_vm._v(" "+_vm._s(tab.name)+" ")]),_c("el-popover",{ref:"popover-"+tab.id,refInFor:!0,attrs:{placement:"bottom",trigger:"hover","visible-arrow":!1,"after-enter":_vm.childTabChange,"popper-class":"inventory-list-popover-1 fc-dashboard-tab-popup"}},[_c("div",{staticClass:"db-childtab-cell ellipsis",class:{active:tab.id===_vm.dashboardTabId},on:{click:function($event){_vm.closepopver(tab.id),_vm.mainTabChange(tab)}}},[_vm._v(" "+_vm._s(tab.name)+" "),tab.id===_vm.dashboardTabId?_c("div",{staticClass:"pull-right"},[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"green"}})]):_vm._e()]),_vm._l(tab.childTabs,(function(childTab,cId){return[_c("div",{key:cId,staticClass:"db-childtab-cell ellipsis",class:{active:childTab.id===_vm.dashboardTabId},on:{click:function($event){_vm.closepopver(tab.id),_vm.mainTabChange(childTab)}}},[_vm._v(" "+_vm._s(childTab.name)+" "),childTab.id===_vm.dashboardTabId?_c("div",{staticClass:"pull-right"},[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"green"}})]):_vm._e()])]}))],2)],1)})),0),_c("el-popover",{ref:"more-popover",attrs:{placement:"bottom",trigger:"hover","visible-arrow":!1,"popper-class":"inventory-list-popover-1 fc-dashboard-more-tab-popup"}},[_c("el-cascader-panel",{attrs:{options:_vm.moreTabsCascadeData},on:{change:_vm.moreTabChange,"expand-change":_vm.expandChange},model:{value:_vm.moreTabSelectedDashboard,callback:function($$v){_vm.moreTabSelectedDashboard=$$v},expression:"moreTabSelectedDashboard"}})],1),_c("div",{directives:[{name:"popover",rawName:"v-popover",value:"more-popover",expression:"`more-popover`"}],staticClass:"self-center "},[_vm.moreTabs.length?_c("i",{staticClass:"el-icon-more p15 border-right"}):_vm._e()]),_vm.edit?_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n        placement: 'top',\n        animation: 'shift-away',\n        arrow: true,\n      }"}],staticClass:"self-center p15",attrs:{title:_vm.$t("home.dashboard.tab_manager")},on:{click:function($event){return _vm.toggleDashboardTabEditor()}}},[_c("i",{staticClass:"el-icon-setting"})]):_vm._e()],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),DashboardTopTabvue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(425728),{props:["dashboardTabContexts","dashboardTabId","edit"],data:function(){return{mainTabs:[],moreTabs:[],tabLimit:5,loading:!1,moreTabSelectedDashboard:[]}},computed:{moreTabsCascadeData:function(){var _this=this,moreTabs=this.moreTabs;if(moreTabs&&moreTabs.length){var data=[];return moreTabs.forEach((function(folder){var d=(0,objectSpread2/* default */.Z)({value:folder.id,label:folder.name},folder);if(folder.childTabs&&folder.childTabs.length){var c=[];folder.childTabs.forEach((function(tab){var t=(0,objectSpread2/* default */.Z)({value:tab.id,label:tab.name},tab);c.push(t)})),_this.$set(d,"children",c)}data.push(d)})),data}return[]}},watch:{dashboardTabContexts:function(){this.splitTabList()}},mounted:function(){this.splitTabList(),this.selectDefaultMoreTab()},methods:{selectDefaultMoreTab:function(){var _this2=this;this.moreTabsCascadeData.length&&this.moreTabsCascadeData.forEach((function(tab){tab.id===_this2.dashboardTabId?_this2.moreTabSelectedDashboard.push(tab.id):null!==tab&&void 0!==tab&&tab.children&&tab.children.length&&tab.children.forEach((function(children){children.id===_this2.dashboardTabId&&(_this2.moreTabSelectedDashboard=[tab.id,children.id])}))}))},mainTabChange:function(tab){this.changeDashboardTabId(tab.id),this.moreTabSelectedDashboard=[]},expandChange:function(value){this.changeDashboardTabId(value[0])},moreTabChange:function(value){value&&1===value.length?this.changeDashboardTabId(value[0]):value&&2===value.length&&this.changeDashboardTabId(value[1])},getTabActiveClass:function(tab){var _this3=this;return tab.id===this.dashboardTabId||!!(tab.childTabs&&tab.childTabs.length&&tab.childTabs.findIndex((function(t){return t.id===_this3.dashboardTabId}))>-1)},switchTabs:function(tab){var lastTab=[];lastTab=this.$helpers.cloneObject(this.mainTabs[this.mainTabs.length-1]);var firstTab=[],selectedTabIndex=this.moreTabs.findIndex((function(rt){return rt.id===tab.id}));firstTab=this.$helpers.cloneObject(tab),this.mainTabs.splice(this.mainTabs.length-1,1,firstTab),this.moreTabs.splice(selectedTabIndex,1,lastTab)},closemoreTab:function(){this.$refs["more-popover"].showPopper=!1},splitTabList:function(){var _this4=this;this.loading=!0;var dashboardTabContexts=this.dashboardTabContexts,tabLimit=this.tabLimit;dashboardTabContexts&&dashboardTabContexts.length>tabLimit?(this.mainTabs=[],this.moreTabs=[],dashboardTabContexts.forEach((function(tab,index){index<tabLimit?_this4.mainTabs.push(tab):_this4.moreTabs.push(tab)}))):this.mainTabs=dashboardTabContexts,this.loading=!1},getTabName:function(tab){var _this5=this;if(tab&&tab.childTabs&&tab.childTabs.length&&this.isTabSwitched(tab)){var childTab=tab.childTabs.find((function(rt){return rt.id===_this5.dashboardTabId}));if(childTab)return childTab.name}return tab.name},isTabSwitched:function(tab){var _this6=this;if(tab.id===this.dashboardTabId)return!1;if(tab.childTabs&&tab.childTabs.length){var childTab=tab.childTabs.find((function(rt){return rt.id===_this6.dashboardTabId}));if(childTab)return!0}return!1},closepopver:function(id){id&&(this.$refs["popover-".concat(id)][0].showPopper=!1)},changeDashboardTabId:function(tabId){this.$emit("changeDashboardTabId",tabId)},toggleDashboardTabEditor:function(){this.$emit("toggleDashboardTabEditor")},childTabChange:function(){}}}),dashboard_DashboardTopTabvue_type_script_lang_js=DashboardTopTabvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardTopTabvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardTopTab=component.exports},
/***/970469:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return VerticalTabSelector}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/dashboard/VerticalTabSelector.vue?vue&type=template&id=da1b7214&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"dashboard-tab-sidebar view-panel"},[_c("div",{staticClass:"dashboard-tab-sidebar-scroll"},[_vm._l(_vm.tabsList,(function(folder,index){return _c("div",{key:index,staticClass:"dashboard-folder-container"},[_c("div",{staticClass:"dfolder-name",class:{active:_vm.currentTabId===folder.id},on:{click:function($event){_vm.changeDashboardTabId(folder.id),_vm.expand(folder)}}},[_c("div",{staticClass:"mL5"},[_c("span",[_vm._v(_vm._s(folder.name))]),folder.childTabs?_c("div",{staticClass:"dfolder-icon fR"},[folder.expand?_c("i",{staticClass:"el-icon-arrow-down"}):_c("i",{staticClass:"el-icon-arrow-right"})]):_vm._e()])]),_c("div",{directives:[{name:"show",rawName:"v-show",value:folder.expand,expression:"folder.expand"}],staticClass:"dfolder-children"},_vm._l(folder.childTabs,(function(childFolder,cId){return _c("div",{key:cId,class:{active:_vm.currentTabId===childFolder.id},on:{click:function($event){return _vm.changeDashboardTabId(childFolder.id)}}},[_c("span",{staticClass:"mL5"},[_vm._v(_vm._s(childFolder.name))])])})),0)])})),_vm.isEditor?_c("div",{staticClass:"addTab-btn view-manager-btn",on:{click:function($event){return _vm.$emit("toggleDashboardTabEditor")}}},[_c("i",{staticClass:"el-icon-setting"}),_c("span",{staticClass:"label mL10 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("home.dashboard.tab_manager"))+" ")])]):_vm._e()],2)])},staticRenderFns=[],VerticalTabSelectorvue_type_script_lang_js=(__webpack_require__(879288),{props:{tabsList:{type:Array,required:!0},currentTabId:{type:[Number,Object],required:!0},isEditor:{}},methods:{changeDashboardTabId:function(id){this.$emit("changeDashboardTabId",id)},expand:function(folder){this.$emit("expand",folder)}}}),dashboard_VerticalTabSelectorvue_type_script_lang_js=VerticalTabSelectorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(dashboard_VerticalTabSelectorvue_type_script_lang_js,render,staticRenderFns,!1,null,"da1b7214",null)
/* harmony default export */,VerticalTabSelector=component.exports},
/***/372256:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/date-picker/NewDatePicker.vue?vue&type=template&id=47398bd2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.$mobile?_c("div",{staticClass:"mobile-new-date-filter"},[_vm._v(_vm._s(_vm.result.label))]):_c("div",[_c("el-popover",{ref:"popover4",attrs:{placement:"right","popper-class":"new-calender-popup",width:825,trigger:"click"},model:{value:_vm.datePicker,callback:function($$v){_vm.datePicker=$$v},expression:"datePicker"}},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"row datepicker-header"},[_c("div",{staticClass:"pointer"}),_vm.enableTabs("C")?_c("div",{staticClass:"p10 range-selecter marginL",class:{active:"C"===_vm.currentTab},on:{click:function($event){return _vm.changeTab("C")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.quick_ranges"))+" ")]):_vm._e(),_vm.enableTabs("D")?_c("div",{staticClass:"p10 range-selecter",class:{active:"D"===_vm.currentTab},on:{click:function($event){return _vm.changeTab("D")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.day"))+" ")]):_vm._e(),_vm.enableTabs("W")?_c("div",{staticClass:"p10 range-selecter",class:{active:"W"===_vm.currentTab},on:{click:function($event){return _vm.changeTab("W")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.week"))+" ")]):_vm._e(),_vm.enableTabs("M")?_c("div",{staticClass:"p10 range-selecter",class:{active:"M"===_vm.currentTab},on:{click:function($event){return _vm.changeTab("M")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.month"))+" ")]):_vm._e(),_vm.enableTabs("Y")?_c("div",{staticClass:"p10 range-selecter",class:{active:"Y"===_vm.currentTab},on:{click:function($event){return _vm.changeTab("Y")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.year"))+" ")]):_vm._e(),_vm.enableTabs("Q")?_c("div",{staticClass:"p10 range-selecter",class:{active:"Q"===_vm.currentTab},on:{click:function($event){return _vm.changeTab("Q")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.quarter"))+" ")]):_vm._e(),_vm.enableTabs("R")?_c("div",{staticClass:"p10 range-selecter",class:{active:"R"===_vm.currentTab},on:{click:function($event){return _vm.changeTab("R")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.custom"))+" ")]):_vm._e(),_c("div")]),_c("div",{staticClass:"days-section"},["C"===_vm.currentTab?_c("div",{staticClass:"row"},_vm._l(Object.keys(_vm.dateOperators),(function(dateOperator,index){return"Custom"!==dateOperator?_c("div",{key:index,staticClass:"custom-section"},[_c("span",{staticClass:"custom-section-title"},[_vm._v(_vm._s(dateOperator))]),_c("div",{staticClass:"quick-range-container"},_vm._l(_vm.dateOperators[dateOperator],(function(section,index1){return _c("div",{key:index1,staticClass:"cal-custom-day",class:{active:null!==_vm.customCaseSection&&(_vm.customCaseSection.operatorId===section.operatorId&&_vm.customCaseSection.offset===section.offset)},on:{click:function($event){return _vm.custom(section)}}},[_vm._v(" "+_vm._s(section.label)+" ")])})),0)]):_vm._e()})),0):_vm._e(),"Q"===_vm.currentTab?_c("div",{staticClass:"row month-row"},[_c("div",{staticClass:"year-section"},_vm._l(_vm.years,(function(y){return _c("div",{key:y,staticClass:"p5 year",class:{active:_vm.selectedQuarter.year===y},on:{click:function($event){return _vm.setYear(y)}}},[_vm._v(" "+_vm._s(y)+" ")])})),0),_c("div",{staticClass:"col-3 month-container"},_vm._l(_vm.quarters,(function(quarter){return _c("div",{key:quarter.id,staticClass:"quarter-row pointer",class:{active:_vm.selectedQuarter.quarter===quarter.id},on:{click:function($event){return _vm.setQuarter(quarter.id,null)}}},[_vm._v(" "+_vm._s(quarter.label)+" ")])})),0),"Q"===_vm.currentTab?_c("div",{staticClass:"calender-custom col-4"},[_vm.enableTabs("C")?_c("div",{staticClass:"cal-custom-day",class:{active:_vm.time[0]===_vm.thisQuarter[0]&&_vm.time[1]===_vm.thisQuarter[1]},on:{click:function($event){return _vm.quickChoose("thisquarter")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.this_quarter"))+" ")]):_vm._e(),_vm.enableTabs("C")?_c("div",{staticClass:"cal-custom-day",class:{active:_vm.time[0]===_vm.lastQuarter[0]&&_vm.time[1]===_vm.lastQuarter[1]},on:{click:function($event){return _vm.quickChoose("lastquarter")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.last_quarter"))+" ")]):_vm._e()]):_vm._e()]):_vm._e(),"D"===_vm.currentTab||"W"===_vm.currentTab?_c("div",{staticClass:"row calenderheader-row"},[_c("div",{staticClass:"p5",on:{click:function($event){return _vm.previous()}}},[_c("i",{staticClass:"el-icon-arrow-left"})]),_c("div",{staticClass:"p5"},[_vm._v(_vm._s(_vm.months[_vm.selectedDate["month"]].label))]),_c("div",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedDate["year"]))]),_c("div",{staticClass:"p5",on:{click:function($event){return _vm.next()}}},[_c("i",{staticClass:"el-icon-arrow-right"})])]):_vm._e(),"D"===_vm.currentTab||"W"===_vm.currentTab?_c("div",{staticClass:"row week-row"},_vm._l(_vm.daysHeader,(function(w,index){return _c("div",{key:index,staticClass:"p5 day-block"},[_vm._v(" "+_vm._s(w)+" ")])})),0):_vm._e(),_c("div",{staticClass:"day-container"},["D"===_vm.currentTab?_c("div",{staticClass:"row day-row pull-left"},_vm._l(_vm.days,(function(d,index){return _c("div",{key:index,staticClass:"p5 day-block day",class:{active:_vm.selectedDate["day"]===d.day,custom_disable:d.day<0},on:{click:function($event){return _vm.setDate(d.day,_vm.selectedDate["month"])}}},[_vm._v(" "+_vm._s(d.day<0?-d.day:d.day)+" ")])})),0):_vm._e(),"D"===_vm.currentTab?_c("div",{staticClass:"calender-custom pull-right"},[_c("div",{staticClass:"pull-left calender-div"}),_c("div",{staticClass:"pull-right"},[_vm.enableTabs("C")?_c("div",{staticClass:"cal-custom-day",class:{active:_vm.time[0]===_vm.today[0]&&_vm.time[1]===_vm.today[1]},on:{click:function($event){return _vm.quickChoose("today")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.today"))+" ")]):_vm._e(),_vm.enableTabs("C")?_c("div",{staticClass:"cal-custom-day",class:{active:_vm.time[0]===_vm.yesterday[0]&&_vm.time[1]===_vm.yesterday[1]},on:{click:function($event){return _vm.quickChoose("yesterday")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.yesterday"))+" ")]):_vm._e()])]):_vm._e()]),_c("div",{staticClass:"day-container"},["W"===_vm.currentTab?_c("div",{staticClass:"row day-row pull-left"},_vm._l(_vm.days,(function(d,index){return _c("div",{key:index,staticClass:"p5 day-block day",class:{active:_vm.computeWeek(d.year,d.month,Math.abs(d.day))===_vm.selectedWeek,custom_disable:d.day<0},on:{click:function($event){return _vm.setWeek(d.day,_vm.selectedDate["month"],_vm.selectedDate["year"])}}},[_vm._v(" "+_vm._s(d.day<0?-d.day:d.day)+" ")])})),0):_vm._e(),"W"===_vm.currentTab?_c("div",{staticClass:"calender-custom pull-right"},[_c("div",{staticClass:"pull-left calender-div"}),_c("div",{staticClass:"pull-right"},[_vm.enableTabs("C")?_c("div",{staticClass:"cal-custom-day",class:{active:_vm.time[0]===_vm.thisWeek[0]&&_vm.time[1]===_vm.thisWeek[1]},on:{click:function($event){return _vm.quickChoose("thisweek")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.this_week"))+" ")]):_vm._e(),_vm.enableTabs("C")?_c("div",{staticClass:"cal-custom-day",class:{active:_vm.time[0]===_vm.lastWeek[0]&&_vm.time[1]===_vm.lastWeek[1]},on:{click:function($event){return _vm.quickChoose("lastweek")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.last_week"))+" ")]):_vm._e()])]):_vm._e()]),"M"===_vm.currentTab||"Y"===_vm.currentTab?_c("div",{staticClass:"row month-row"},[_c("div",{staticClass:"year-section"},_vm._l(_vm.years,(function(y){return _c("div",{key:y,staticClass:"p5 year",class:{active:_vm.selectedYear===y},on:{click:function($event){return _vm.setYear(y)}}},[_vm._v(" "+_vm._s(y)+" ")])})),0),"M"===_vm.currentTab?_c("div",{staticClass:"col-5 month-container"},[_c("div",{staticClass:"row"},[_vm._l(_vm.months.slice(0,6),(function(m){return _c("div",{key:m.id,staticClass:"col-6 p5 month",class:{active:_vm.selectedMonth===m.id},on:{click:function($event){return _vm.setMonth(m.id,m.label,_vm.selectedYear)}}},[_vm._v(" "+_vm._s(m.label)+" ")])})),_vm._l(_vm.months.slice(6,12),(function(m){return _c("div",{key:m.id,staticClass:"col-6 p5 month",class:{active:_vm.selectedMonth===m.id},on:{click:function($event){return _vm.setMonth(m.id,m.label,_vm.selectedYear)}}},[_vm._v(" "+_vm._s(m.label)+" ")])}))],2)]):_vm._e(),"M"===_vm.currentTab?_c("div",{staticClass:"calender-custom col-4"},[_vm.enableTabs("C")?_c("div",{staticClass:"cal-custom-day",class:{active:_vm.time[0]===_vm.thisMonth[0]&&_vm.time[1]===_vm.thisMonth[1]},on:{click:function($event){return _vm.quickChoose("thismonth")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.this_month"))+" ")]):_vm._e(),_vm.enableTabs("C")?_c("div",{staticClass:"cal-custom-day",class:{active:_vm.time[0]===_vm.lastMonth[0]&&_vm.time[1]===_vm.lastMonth[1]},on:{click:function($event){return _vm.quickChoose("lastmonth")}}},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.last_month"))+" ")]):_vm._e()]):_vm._e()]):_vm._e()]),"R"===_vm.currentTab?_c("div",{staticClass:"calender-range-section"},[_c("div",{staticClass:"from-table"},["R"===_vm.currentTab?_c("div",{staticClass:"row calenderheader-row"},[_c("div",{staticClass:"p5",on:{click:function($event){return _vm.rangeNavPre("from")}}},[_c("i",{staticClass:"el-icon-arrow-left"})]),_c("div",{staticClass:"p5"},[_vm._v(_vm._s(_vm.months[_vm.rangeObj["fromMonth"]].label))]),_c("div",{staticClass:"p5"},[_vm._v(_vm._s(_vm.rangeObj["fromYear"]))]),_c("div",{staticClass:"p5",on:{click:function($event){return _vm.rangeNavNext("from")}}},[_c("i",{staticClass:"el-icon-arrow-right"})])]):_vm._e(),"R"===_vm.currentTab?_c("div",{staticClass:"row week-row"},_vm._l(_vm.daysHeader,(function(w){return _c("div",{key:w,staticClass:"p5 day-block"},[_vm._v(" "+_vm._s(w)+" ")])})),0):_vm._e(),"R"===_vm.currentTab?_c("div",{staticClass:"row day-row"},_vm._l(_vm.rangeObj.fromDays,(function(d,index){return _c("div",{key:index,staticClass:"p5 day-block day",class:{active:_vm.rangeObj.fromDay===d.day,custom_disable:d.day<0},on:{click:function($event){return _vm.setRange("from",d.day)}}},[_vm._v(" "+_vm._s(d.day<0?-d.day:d.day)+" ")])})),0):_vm._e()]),_c("div",{staticClass:"to-table"},["R"===_vm.currentTab?_c("div",{staticClass:"row calenderheader-row"},[_c("div",{staticClass:"p5",on:{click:function($event){return _vm.rangeNavPre("to")}}},[_c("i",{staticClass:"el-icon-arrow-left"})]),_c("div",{staticClass:"p5"},[_vm._v(_vm._s(_vm.months[_vm.rangeObj["toMonth"]].label))]),_c("div",{staticClass:"p5"},[_vm._v(_vm._s(_vm.rangeObj["toYear"]))]),_c("div",{staticClass:"p5",on:{click:function($event){return _vm.rangeNavNext("to")}}},[_c("i",{staticClass:"el-icon-arrow-right"})])]):_vm._e(),"R"===_vm.currentTab?_c("div",{staticClass:"row week-row"},_vm._l(_vm.daysHeader,(function(w){return _c("div",{key:w,staticClass:"p5 day-block"},[_vm._v(" "+_vm._s(w)+" ")])})),0):_vm._e(),"R"===_vm.currentTab?_c("div",{staticClass:"row day-row"},_vm._l(_vm.rangeObj.toDays,(function(d,index){return _c("div",{key:index,staticClass:"p5 day-block day",class:{active:_vm.rangeObj.toDay===d.day,disabled:_vm.computeMilliSeconds(_vm.rangeObj.toYear,_vm.rangeObj.toMonth,d.day,"start")<_vm.computeMilliSeconds(_vm.rangeObj.fromYear,_vm.rangeObj.fromMonth,_vm.rangeObj.fromDay,"start")||d.day<0},on:{click:function($event){return _vm.setRange("to",d.day)}}},[_vm._v(" "+_vm._s(d.day<0?-d.day:d.day)+" ")])})),0):_vm._e()])]):_vm._e()]),_c("div",{staticClass:"row datepic-btn-row"},[_c("el-button",{staticClass:"pull-right cal-ok-btn",on:{click:function($event){return _vm.returnDate()}}},[_vm._v(_vm._s(_vm.$t("common._common.ok")))])],1)]),_c("div",{staticClass:"button-row",class:[{"picker-disabled":_vm.disabled}]},[_vm.isDateFixed?_vm._e():_c("div",{staticClass:"cal-left-btn",on:{click:function($event){return _vm.navPrevious()}}},[_c("i",{staticClass:"el-icon-arrow-left date-arrow"})]),_vm.isDateFixed?_c("el-button",[_vm._v(_vm._s(_vm.result.label))]):_c("el-button",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],attrs:{disabled:_vm.hidePopover||_vm.isDateFixed||_vm.disabled}},[_vm._v(_vm._s(_vm.result.label))]),_vm.isDateFixed||_vm.isCurrentDateRange?_vm._e():_c("div",{staticClass:"cal-right-btn",on:{click:function($event){return _vm.navNext()}}},[_c("i",{staticClass:"el-icon-arrow-right date-arrow"})])],1)],1)])},staticRenderFns=[],NewDateHelper=(__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(689730),__webpack_require__(169358),__webpack_require__(708056)),validation=__webpack_require__(990260),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),mixins_NewDateHelper=__webpack_require__(105534),vue_runtime_esm=__webpack_require__(720144),NewDatePickervue_type_script_lang_js={data:function(){return{currentTab:"C",days:[],months:[{id:0,label:this.$t("common.date_picker.jan")},{id:1,label:this.$t("common.date_picker.feb")},{id:2,label:this.$t("common.date_picker.mar")},{id:3,label:this.$t("common.date_picker.apr")},{id:4,label:this.$t("common.date_picker.may")},{id:5,label:this.$t("common.date_picker.jun")},{id:6,label:this.$t("common.date_picker.jul")},{id:7,label:this.$t("common.date_picker.aug")},{id:8,label:this.$t("common.date_picker.sep")},{id:9,label:this.$t("common.date_picker.oct")},{id:10,label:this.$t("common.date_picker.nov")},{id:11,label:this.$t("common.date_picker.dec")}],datePicker:!1,isRange:!1,daysHeader:["Su","M","Tu","W","Th","F","Sa"],years:[],timeZone:null,firstTime:!0,selectedDate:{},selectedWeek:null,selectedMonth:null,selectedMonthLabel:null,selectedYear:null,numberOfDays:0,timeinMills:[],customCaseSection:{},dateOperators:mixins_NewDateHelper/* default */.Z.dateOperators(),time:[],
// comprises start and end time
quarters:[{label:"Q1",id:1,startMonth:0,endMonth:2},{label:"Q2",id:2,startMonth:3,endMonth:5},{label:"Q3",id:3,startMonth:6,endMonth:8},{label:"Q4",id:4,startMonth:9,endMonth:11}],selectedQuarter:{},rangeObj:{},result:null}},props:{dateObj:{},zone:{},hidePopover:{},isDateFixed:{},tabs:{},disableFutureDate:{},disabled:{}},created:function(){this.activeTab&&(this.currentTab=this.activeTab),this.setTimeZone(),null!==this.dateObj&&"undefined"!==typeof this.dateObj&&this.wellFormed()?this.loadFromObject():(this.loadDefaults(),this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.selectedDate["day"]],this.timeZone).startOf("day").valueOf()),this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.selectedDate["day"]],this.timeZone).endOf("day").valueOf()),this.loadRangeObject());var startYear=null;if("undefined"!==typeof this.tabs)if(this.tabs.loadAdditional){var additionalInfo=this.tabs.loadAdditional.year;startYear=mixins_NewDateHelper/* default */.Z.computeMoment(additionalInfo,this.timeZone)}else startYear=moment_timezone_default().tz(this.timeZone).year();else startYear=moment_timezone_default().tz(this.timeZone).year();for(var i=startYear;i>1969;i--)this.years.push(i)},computed:{activeTab:function(){if("undefined"!==typeof this.tabs){if(this.tabs.enableByOperationOnId){var currentTab=null;switch(this.dateObj.operationOn){case"day":currentTab="D";break;case"week":currentTab="W";break;case"month":currentTab="M";break;case"year":currentTab="Y";break;case"quarter":currentTab="Q";break;default:currentTab="C";break}return currentTab}return null}return null},isCurrentDateRange:function(){var currentmillis=moment_timezone_default().tz(this.timeZone).valueOf(),_this$result=this.result,value=_this$result.value,operatorId=_this$result.operatorId;return(0,validation/* isEmpty */.xb)(value)&&(value=NewDateHelper/* default */.Z.getDatePickerObject(operatorId).value),currentmillis<value[1]&&!0===this.disableFutureDate},today:function(){return[moment_timezone_default().tz(this.timeZone).startOf("day").valueOf(),moment_timezone_default().tz(this.timeZone).endOf("day").valueOf()]},todayUptoNow:function(){var startOfYear=moment_timezone_default().tz(this.timeZone).startOf("day").valueOf(),endOfYear=moment_timezone_default().tz(this.timeZone).valueOf();return[startOfYear,endOfYear]},yesterday:function(){return[moment_timezone_default().tz(this.timeZone).subtract(1,"day").startOf("day").valueOf(),moment_timezone_default().tz(this.timeZone).subtract(1,"day").endOf("day").valueOf()]},lastWeek:function(){var startOfWeek=moment_timezone_default().tz(this.timeZone).subtract(1,"week").startOf("week").valueOf(),endOfWeek=moment_timezone_default().tz(this.timeZone).subtract(1,"week").endOf("week").valueOf();return[startOfWeek,endOfWeek]},thisWeek:function(){var startOfWeek=moment_timezone_default().tz(this.timeZone).startOf("week").valueOf(),endOfWeek=moment_timezone_default().tz(this.timeZone).endOf("week").valueOf();return[startOfWeek,endOfWeek]},thisMonth:function(){var startOfMonth=moment_timezone_default().tz(this.timeZone).startOf("month").valueOf(),endOfMonth=moment_timezone_default().tz(this.timeZone).endOf("month").valueOf();return[startOfMonth,endOfMonth]},thisMonthTillYesterday:function(){var startOfMonth=moment_timezone_default().tz(this.timeZone).startOf("month").valueOf();moment_timezone_default().tz(this.timeZone).startOf("day").valueOf()===moment_timezone_default().tz(this.timeZone).startOf("month").valueOf()&&(startOfMonth=moment_timezone_default().tz(this.timeZone).subtract(1,"month").startOf("month").valueOf());var endOfMonth=moment_timezone_default().tz(this.timeZone).subtract(1,"day").endOf("day").valueOf();return[startOfMonth,endOfMonth]},lastMonth:function(){var startOfMonth=moment_timezone_default().tz(this.timeZone).subtract(1,"month").startOf("month").valueOf(),endOfMonth=moment_timezone_default().tz(this.timeZone).subtract(1,"month").endOf("month").valueOf();return[startOfMonth,endOfMonth]},thisYear:function(){var startOfYear=moment_timezone_default().tz(this.timeZone).startOf("year").valueOf(),endOfYear=moment_timezone_default().tz(this.timeZone).endOf("year").valueOf();return[startOfYear,endOfYear]},lastYear:function(){var startOfYear=moment_timezone_default().tz(this.timeZone).subtract(1,"year").startOf("year").valueOf(),endOfYear=moment_timezone_default().tz(this.timeZone).subtract(1,"year").endOf("year").valueOf();return[startOfYear,endOfYear]},thisYearuptoNow:function(){var startOfYear=moment_timezone_default().tz(this.timeZone).startOf("year").valueOf(),endOfYear=moment_timezone_default().tz(this.timeZone).valueOf();return[startOfYear,endOfYear]},thisWeekuptoNow:function(){var startOfYear=moment_timezone_default().tz(this.timeZone).startOf("week").valueOf(),endOfYear=moment_timezone_default().tz(this.timeZone).valueOf();return[startOfYear,endOfYear]},thisMonthuptoNow:function(){var startOfYear=moment_timezone_default().tz(this.timeZone).startOf("month").valueOf(),endOfYear=moment_timezone_default().tz(this.timeZone).valueOf();return[startOfYear,endOfYear]},thisQuarter:function(){var startOfQuarter=moment_timezone_default().tz(this.timeZone).startOf("quarter").valueOf(),endOfQuarter=moment_timezone_default().tz(this.timeZone).endOf("quarter").valueOf();return[startOfQuarter,endOfQuarter]},lastQuarter:function(){var startOfQuarter=moment_timezone_default().tz(this.timeZone).subtract(1,"quarter").startOf("quarter").valueOf(),endOfQuarter=moment_timezone_default().tz(this.timeZone).subtract(1,"quarter").endOf("quarter").valueOf();return[startOfQuarter,endOfQuarter]}},methods:{enableTabs:function(tabName){if("undefined"!==typeof this.tabs){var enabledTabs=this.tabs.enabledTabs;return!!enabledTabs.includes(tabName)}return!0},openDatePicker:function(){this.datePicker=!this.datePicker},navNext:function(){mixins_NewDateHelper/* default */.Z.updateStartOfWeekInMoment(vue_runtime_esm["default"].prototype.$org);var startTime=null,endTime=null;if(-1===this.result.offset)startTime=moment_timezone_default().tz(this.result.value[0],this.timeZone).add(Math.abs(this.result.offset+2),this.result.operationOn).startOf(this.result.operationOn).valueOf(),endTime=moment_timezone_default().tz(startTime,this.timeZone).endOf(this.result.operationOn).valueOf();else if(0===this.result.offset){var timeStamp=this.result.value[0];72!==this.result.operatorId&&25!==this.result.id||(timeStamp=this.result.value[1]),startTime=moment_timezone_default().tz(timeStamp,this.timeZone).add(Math.abs(this.result.offset+1),this.result.operationOn).startOf(this.result.operationOn).valueOf(),endTime=moment_timezone_default().tz(startTime,this.timeZone).add(Math.abs(this.result.offset),this.result.operationOn).endOf(this.result.operationOn).valueOf()}else startTime=moment_timezone_default().tz(this.result.value[0],this.timeZone).add(Math.abs(this.result.offset+1),this.result.operationOn).startOf(this.result.operationOn).valueOf(),endTime=moment_timezone_default().tz(startTime,this.timeZone).add(Math.abs(this.result.offset+1),this.result.operationOn).endOf(this.result.operationOn).valueOf();this.result.value=[],this.result.value=[startTime,endTime],this.dateObj=this.$helpers.cloneObject(this.result),"day"===this.result.operationOn&&49!==this.result.operatorId||"week"===this.result.operationOn&&50!==this.result.operatorId||"month"===this.result.operationOn&&51!==this.result.operatorId||"year"===this.result.operationOn||"quarter"===this.result.operationOn?this.loadFromObject():(this.currentTab="R",this.result.operatorId=20,this.loadRangeObject(),this.returnDate())},navPrevious:function(){mixins_NewDateHelper/* default */.Z.updateStartOfWeekInMoment(vue_runtime_esm["default"].prototype.$org);var startTime=null,endTime=null;if(-1===this.result.offset)startTime=moment_timezone_default().tz(this.result.value[0],this.timeZone).subtract(Math.abs(this.result.offset+2),this.result.operationOn).startOf(this.result.operationOn).valueOf(),endTime=moment_timezone_default().tz(startTime,this.timeZone).endOf(this.result.operationOn).valueOf();else if(0===this.result.offset){var timeStamp=this.result.value[0];72!==this.result.operatorId&&25!==this.result.id||(timeStamp=this.result.value[1]),startTime=moment_timezone_default().tz(timeStamp,this.timeZone).subtract(Math.abs(this.result.offset+1),this.result.operationOn).startOf(this.result.operationOn).valueOf(),endTime=moment_timezone_default().tz(startTime,this.timeZone).add(Math.abs(this.result.offset),this.result.operationOn).endOf(this.result.operationOn).valueOf()}else startTime=moment_timezone_default().tz(this.result.value[0],this.timeZone).subtract(Math.abs(this.result.offset+1),this.result.operationOn).startOf(this.result.operationOn).valueOf(),endTime=moment_timezone_default().tz(startTime,this.timeZone).add(Math.abs(this.result.offset+1),this.result.operationOn).endOf(this.result.operationOn).valueOf();this.result.value=[],this.result.value=[startTime,endTime],this.dateObj=this.$helpers.cloneObject(this.result),"day"===this.result.operationOn&&49!==this.result.operatorId||"week"===this.result.operationOn&&50!==this.result.operatorId||"month"===this.result.operationOn&&51!==this.result.operatorId||"year"===this.result.operationOn||"quarter"===this.result.operationOn?this.loadFromObject():(this.result.operatorId=20,this.currentTab="R",this.loadRangeObject(),this.returnDate())},setTimeZone:function(){null!==this.zone&&"undefined"!==typeof this.zone?this.timeZone=this.zone:this.timeZone=moment_timezone_default().tz.guess()},computeMilliSeconds:function(year,month,day,decider){return"start"===decider?moment_timezone_default().tz([year,month,day],this.timeZone).startOf("day").valueOf():moment_timezone_default().tz([year,month,day],this.timeZone).endOf("day").valueOf()},computeWeek:function(year,month,date){return moment_timezone_default().tz([year,month,date],this.timeZone).week()},quickChoose:function(period){"today"===period?(this.$set(this.selectedDate,"day",moment_timezone_default().tz(this.timeZone).date()),this.$set(this.selectedDate,"month",moment_timezone_default().tz(this.timeZone).month()),this.$set(this.selectedDate,"year",moment_timezone_default().tz(this.timeZone).year()),this.time=[],this.time=this.today,this.loadDays()):"yesterday"===period?(this.$set(this.selectedDate,"day",moment_timezone_default().tz(this.timeZone).subtract(1,"day").date()),this.$set(this.selectedDate,"month",moment_timezone_default().tz(this.timeZone).subtract(1,"day").month()),this.$set(this.selectedDate,"year",moment_timezone_default().tz(this.timeZone).subtract(1,"day").year()),this.time=[],this.time=this.yesterday,this.loadDays()):"thisweek"===period?this.setWeek(moment_timezone_default().tz(this.thisWeek[0],this.timeZone).date(),moment_timezone_default().tz(this.thisWeek[0],this.timeZone).month(),moment_timezone_default().tz(this.thisWeek[0],this.timeZone).year()):"lastweek"===period?this.setWeek(moment_timezone_default().tz(this.lastWeek[0],this.timeZone).date(),moment_timezone_default().tz(this.lastWeek[0],this.timeZone).month(),moment_timezone_default().tz(this.lastWeek[0],this.timeZone).year()):"thismonth"===period?this.setMonth(moment_timezone_default().tz(this.thisMonth[0],this.timeZone).month(),this.months[moment_timezone_default().tz(this.thisMonth[0],this.timeZone).month()].label,moment_timezone_default().tz(this.thisMonth[0],this.timeZone).year()):"lastmonth"===period?this.setMonth(moment_timezone_default().tz(this.lastMonth[0],this.timeZone).month(),this.months[moment_timezone_default().tz(this.lastMonth[0],this.timeZone).month()].label,moment_timezone_default().tz(this.lastMonth[0],this.timeZone).year()):"thisquarter"===period?this.setQuarter(moment_timezone_default().tz(this.timeZone).quarter(),moment_timezone_default().tz(moment_timezone_default().tz(this.timeZone).startOf("quarter").valueOf(),this.timeZone).year()):"lastquarter"===period&&this.setQuarter(moment_timezone_default().tz(this.timeZone).subtract(1,"quarter").quarter(),moment_timezone_default().tz(moment_timezone_default().tz(this.timeZone).subtract(1,"quarter").startOf("quarter").valueOf(),this.timeZone).year());var _dateoperators$getOpe=mixins_NewDateHelper/* default */.Z.getOperationFromLabel(period),operatorId=_dateoperators$getOpe.operatorId;this.customCaseSection=mixins_NewDateHelper/* default */.Z.getDatePickerObject(operatorId)},loadRangeObject:function(){null!==this.dateObj&&"undefined"!==typeof this.dateObj&&this.dateObj.value&&this.dateObj.value.length?(this.$set(this.rangeObj,"fromDay",moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).date()),this.$set(this.rangeObj,"fromMonth",moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).month()),this.$set(this.rangeObj,"fromYear",moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).year()),this.$set(this.rangeObj,"toDay",moment_timezone_default().tz(this.dateObj.value[1],this.timeZone).date()),this.$set(this.rangeObj,"toMonth",moment_timezone_default().tz(this.dateObj.value[1],this.timeZone).month()),this.$set(this.rangeObj,"toYear",moment_timezone_default().tz(this.dateObj.value[1],this.timeZone).year()),this.$set(this.rangeObj,"from",this.dateObj.value[0]),this.$set(this.rangeObj,"to",this.dateObj.value[1]),this.$set(this.rangeObj,"fromDays",[]),this.$set(this.rangeObj,"toDays",[]),this.loadRangeDays("from"),this.loadRangeDays("to")):(this.$set(this.rangeObj,"fromDay",this.selectedDate["day"]),this.$set(this.rangeObj,"fromMonth",this.selectedDate["month"]),this.$set(this.rangeObj,"fromYear",this.selectedDate["year"]),this.$set(this.rangeObj,"toDay",this.selectedDate["day"]),this.$set(this.rangeObj,"toMonth",this.selectedDate["month"]),this.$set(this.rangeObj,"toYear",this.selectedDate["year"]),this.$set(this.rangeObj,"from",this.time[0]),this.$set(this.rangeObj,"to",this.time[1]),this.$set(this.rangeObj,"fromDays",[]),this.$set(this.rangeObj,"toDays",[]),
// this.$set(this.rangeObj, 'fromTime', new Date(this.rangeObj.fromYear, this.rangeObj.fromMonth, this.rangeObj.fromDay, 0, 0))
// this.$set(this.rangeObj, 'toTime', new Date(this.rangeObj.toYear, this.rangeObj.toMonth, this.rangeObj.toDay, 23, 59))
this.loadRangeDays("from"),this.loadRangeDays("to"))},loadRangeDays:function(decider){this.rangeObj[decider+"Days"]=[];var numberOfDaysInAMonth=moment_timezone_default()([this.rangeObj[decider+"Year"],this.rangeObj[decider+"Month"]]).daysInMonth(),dayOfTheWeek=moment_timezone_default().tz([this.rangeObj[decider+"Year"],this.rangeObj[decider+"Month"],this.rangeObj[decider+"Day"]],this.timeZone).startOf("month").format("dd"),offset=this.daysHeader.indexOf(dayOfTheWeek);-1===offset&&(offset=this.daysHeader.indexOf(dayOfTheWeek.slice(0,1)));for(var numberOfDaysInLastMonth=moment_timezone_default().tz([this.rangeObj[decider+"Month"]-1===-1?this.rangeObj[decider+"Year"]-1:this.rangeObj[decider+"Year"],this.rangeObj[decider+"Month"]-1===-1?11:this.rangeObj[decider+"Month"]-1],this.timeZone).daysInMonth(),daysInLastMonth=[],j=1;j<=numberOfDaysInLastMonth;j++)daysInLastMonth.push(-1*j);for(var daysFromPreviousMonth=daysInLastMonth.slice(-1*offset),_j=0;_j<offset;_j++){var temp={};temp["day"]=daysFromPreviousMonth[_j],temp["month"]=this.rangeObj[decider+"Month"]-1===-1?11:this.rangeObj[decider+"Month"]-1,temp["year"]=this.rangeObj[decider+"Month"]-1===-1?this.rangeObj[decider+"Year"]-1:this.rangeObj[decider+"Year"],this.rangeObj[decider+"Days"].push(temp)}for(var i=1;i<numberOfDaysInAMonth+1;i++){var _temp={};_temp["day"]=i,_temp["month"]=this.rangeObj[decider+"Month"],_temp["year"]=this.rangeObj[decider+"Year"],this.rangeObj[decider+"Days"].push(_temp)}var existing=this.rangeObj[decider+"Days"];dayOfTheWeek=moment_timezone_default().tz([this.rangeObj[decider+"Year"],this.rangeObj[decider+"Month"],existing[existing.length-1].day],this.timeZone).format("dd"),offset=this.daysHeader.indexOf(dayOfTheWeek),-1===offset&&(offset=this.daysHeader.indexOf(dayOfTheWeek.slice(0,1)));for(var remaining=this.daysHeader.length-offset,_i=1;_i<remaining;_i++){var _temp2={};_temp2["day"]=-1*_i,_temp2["month"]=this.rangeObj[decider+"Month"]+1,_temp2["year"]=this.rangeObj[decider+"Year"],this.rangeObj[decider+"Days"].push(_temp2)}},rangeNavPre:function(decider){var timeUpdate=moment_timezone_default().tz(this.rangeObj[decider],this.timeZone).subtract(1,"month").startOf("month").valueOf();this.rangeObj[decider]=timeUpdate,this.$set(this.rangeObj,decider+"Day",moment_timezone_default().tz(this.rangeObj[decider],this.timeZone).date()),this.$set(this.rangeObj,decider+"Month",moment_timezone_default().tz(this.rangeObj[decider],this.timeZone).month()),this.$set(this.rangeObj,decider+"Year",moment_timezone_default().tz(this.rangeObj[decider],this.timeZone).year()),this.loadRangeDays(decider)},rangeNavNext:function(decider){var timeUpdate=moment_timezone_default().tz(this.rangeObj[decider],this.timeZone).add(1,"month").startOf("month").valueOf();this.rangeObj[decider]=timeUpdate,this.$set(this.rangeObj,decider+"Day",moment_timezone_default().tz(this.rangeObj[decider],this.timeZone).date()),this.$set(this.rangeObj,decider+"Month",moment_timezone_default().tz(this.rangeObj[decider],this.timeZone).month()),this.$set(this.rangeObj,decider+"Year",moment_timezone_default().tz(this.rangeObj[decider],this.timeZone).year()),this.loadRangeDays(decider)},wellFormed:function(){return"undefined"!==typeof this.dateObj.operatorId&&null!==this.dateObj.operatorId&&"undefined"!==typeof this.dateObj.operationOnId&&null!==this.dateObj.operationOnId},loadDefaults:function(){this.$set(this.selectedDate,"day",moment_timezone_default().tz(this.timeZone).date()),this.$set(this.selectedDate,"month",moment_timezone_default().tz(this.timeZone).month()),this.$set(this.selectedDate,"year",moment_timezone_default().tz(this.timeZone).year()),this.selectedMonth=moment_timezone_default().tz(this.timeZone).month(),this.selectedYear=moment_timezone_default().tz(this.timeZone).year(),this.selectedWeek=moment_timezone_default().tz(this.timeZone).week(),this.$set(this.selectedQuarter,"year",this.selectedYear),this.$set(this.selectedQuarter,"quarter",moment_timezone_default().tz(this.timeZone).quarter()),this.result=mixins_NewDateHelper/* default */.Z.returnOperator(22,null),this.result.value&&this.today&&this.$set(this.result,"value",this.today),this.loadDays()},loadCustomCaseFromDate:function(){if("value"in this.dateObj)for(var _key in Object.keys(this.dateObj)){var property=Object.keys(this.dateObj)[_key];this.$set(this.customCaseSection,property,this.dateObj[property])}else{var operationDefaults=mixins_NewDateHelper/* default */.Z.returnOperator(this.dateObj.operatorId);for(var key in Object.keys(operationDefaults))this.$set(this.customCaseSection,Object.keys(operationDefaults)[key],operationDefaults[Object.keys(operationDefaults)[key]]);
// this.customCaseSection.value = dateoperators.returnOperator(this.dateObj.operatorId, this.timeZone)
}},loadFromObject:function(){null!==mixins_NewDateHelper/* default */.Z.returnOperator(this.dateObj.operatorId)?(this.customCaseSection={},this.loadCustomCaseFromDate(),this.activeTab?this.currentTab=this.activeTab:this.currentTab=mixins_NewDateHelper/* default */.Z.getTabFromOperation(this.dateObj.operationOnId,this.dateObj.offset),null===this.customCaseSection.value?(this.customCaseSection=mixins_NewDateHelper/* default */.Z.calculateCustomCaseValue(this.customCaseSection,this.timeZone,this.$org),this.loadFromMilliseconds(this.customCaseSection.value[0]),this.dateObj=this.customCaseSection,this.loadRangeObject()):(this.loadFromMilliseconds(this.dateObj.value[0]),this.loadRangeObject()),this.time=this.customCaseSection.value):1===this.dateObj.operationOnId?(this.currentTab=this.activeTab&&this.tabs.enableOperationOnId?this.activeTab:"D",this.loadFromMilliseconds(this.dateObj.value[0]),this.setDate(moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).date(),moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).month())):2===this.dateObj.operationOnId?(this.currentTab=this.activeTab&&this.tabs.enableOperationOnId?this.activeTab:"W",this.loadFromMilliseconds(this.dateObj.value[0]),this.setWeek(moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).date(),moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).month(),moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).year())):3===this.dateObj.operationOnId?(this.currentTab=this.activeTab&&this.tabs.enableOperationOnId?this.activeTab:"M",this.loadFromMilliseconds(this.dateObj.value[0]),this.setMonth(moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).month(),this.months[moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).month()].label,moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).year())):4===this.dateObj.operationOnId?(this.currentTab=this.activeTab&&this.tabs.enableOperationOnId?this.activeTab:"Y",this.loadFromMilliseconds(this.dateObj.value[0]),this.setYear(moment_timezone_default()(this.dateObj.value[0]).year())):5===this.dateObj.operationOnId?(this.loadFromMilliseconds(this.dateObj.value[0]),this.currentTab=this.activeTab&&this.tabs.enableOperationOnId?this.activeTab:"Q",this.setQuarter(moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).quarter(),moment_timezone_default().tz(this.dateObj.value[0],this.timeZone).year())):6===this.dateObj.operationOnId&&(this.loadFromMilliseconds(this.dateObj.value[0]),this.currentTab="R",this.loadRangeObject()),this.result=this.dateObj,this.loadDays(),this.returnDate()},loadFromMilliseconds:function(startTime){this.$set(this.selectedDate,"day",moment_timezone_default().tz(startTime,this.timeZone).date()),this.$set(this.selectedDate,"month",moment_timezone_default().tz(startTime,this.timeZone).month()),this.$set(this.selectedDate,"year",moment_timezone_default().tz(startTime,this.timeZone).year()),this.selectedWeek=moment_timezone_default().tz(startTime,this.timeZone).week(),this.selectedMonth=this.selectedDate["month"],this.selectedYear=this.selectedDate["year"],this.$set(this.selectedQuarter,"year",moment_timezone_default().tz(startTime,this.timeZone).year()),this.$set(this.selectedQuarter,"quarter",moment_timezone_default().tz(startTime,this.timeZone).quarter())},loadDays:function(){this.days=[];var dayOfTheWeek=moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"]],this.timeZone).startOf("month").format("dd"),offset=this.daysHeader.indexOf(dayOfTheWeek);-1===offset&&(offset=this.daysHeader.indexOf(dayOfTheWeek.slice(0,1))),this.numberOfDays=moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"]],this.timeZone).daysInMonth();for(var numberOfDaysInLastMonth=moment_timezone_default().tz([this.selectedDate["month"]-1===-1?this.selectedDate["year"]-1:this.selectedDate["year"],this.selectedDate["month"]-1===-1?11:this.selectedDate["month"]-1],this.timeZone).daysInMonth(),daysInLastMonth=[],j=1;j<=numberOfDaysInLastMonth;j++)daysInLastMonth.push(-1*j);for(var daysFromPreviousMonth=daysInLastMonth.slice(-1*offset),_j2=0;_j2<offset;_j2++){var temp={};temp["day"]=daysFromPreviousMonth[_j2],temp["month"]=this.selectedDate["month"]-1===-1?11:this.selectedDate["month"]-1,temp["year"]=this.selectedDate["month"]-1===-1?this.selectedDate["year"]-1:this.selectedDate["year"],this.days.push(temp)}for(var i=1;i<this.numberOfDays+1;i++){var _temp3={};_temp3["day"]=i,_temp3["month"]=this.selectedDate["month"],_temp3["year"]=this.selectedDate["year"],this.days.push(_temp3)}dayOfTheWeek=moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.days[this.days.length-1].day],this.timeZone).format("dd"),offset=this.daysHeader.indexOf(dayOfTheWeek),-1===offset&&(offset=this.daysHeader.indexOf(dayOfTheWeek.slice(0,1)));for(var remaining=this.daysHeader.length-offset,_i2=1;_i2<remaining;_i2++){var _temp4={};_temp4["day"]=-1*_i2,_temp4["month"]=this.selectedDate["month"]+1,_temp4["year"]=this.selectedDate["year"],this.days.push(_temp4)}},changeTab:function(choosenTab){this.currentTab=choosenTab,this.setDefaultTimeInMills()},setYear:function(y){"Q"===this.currentTab?(this.$set(this.selectedQuarter,"year",y),this.time=[],this.time.push(moment_timezone_default().tz([this.selectedQuarter.year],this.timeZone).quarter(this.selectedQuarter.quarter).startOf("quarter").valueOf()),this.time.push(moment_timezone_default().tz([this.selectedQuarter.year],this.timeZone).quarter(this.selectedQuarter.quarter).endOf("quarter").valueOf())):"M"===this.currentTab?(this.selectedYear=y,this.$set(this.selectedDate,"month",0),this.$set(this.selectedDate,"day",null),this.$set(this.selectedDate,"year",y),this.selectedWeek=null,this.selectedMonth=0,this.time=[],this.time.push(moment_timezone_default().tz([y,0],this.timeZone).startOf("month").valueOf()),this.time.push(moment_timezone_default().tz([y,0],this.timeZone).endOf("month").valueOf()),this.loadDays()):(this.selectedYear=y,this.$set(this.selectedDate,"day",null),this.$set(this.selectedDate,"month",0),this.$set(this.selectedDate,"year",y),this.selectedWeek=null,this.selectedMonth=0,this.time=[],this.time.push(moment_timezone_default().tz([y],this.timeZone).startOf("year").valueOf()),this.time.push(moment_timezone_default().tz([y],this.timeZone).endOf("year").valueOf()),this.loadDays())},setMonth:function(monthId,label,year){this.selectedMonthLabel=label,this.selectedMonth=monthId,this.selectedYear=year,this.$set(this.selectedDate,"day",null),this.$set(this.selectedDate,"month",monthId),this.selectedWeek=null,this.time=[],this.time.push(moment_timezone_default().tz([year,monthId],this.timeZone).startOf("month").valueOf()),// Months are indexed from 0 in moment
this.time.push(moment_timezone_default().tz([year,monthId],this.timeZone).endOf("month").valueOf()),this.loadDays()},setWeek:function(d,month,year){this.selectedWeek=moment_timezone_default().tz([year,month,d],this.timeZone).week(),this.time=[],this.selectedDate["month"]=month,this.selectedDate["year"]=year,this.selectedMonth=month,this.selectedYear=year,this.time.push(moment_timezone_default().tz([year,month,d],this.timeZone).startOf("week").valueOf()),this.time.push(moment_timezone_default().tz([year,month,d],this.timeZone).endOf("week").valueOf()),this.loadDays()},custom:function(section){this.customCaseSection=section,this.customCaseSection=mixins_NewDateHelper/* default */.Z.calculateCustomCaseValue(this.customCaseSection,this.timeZone,this.$org),this.time=this.customCaseSection.value,this.loadFromMilliseconds(this.customCaseSection.value[0]),"today"!==this.customCaseSection.label.toLowerCase()&&"yesterday"!==this.customCaseSection.label.toLowerCase()&&"thisweek"!==this.customCaseSection.label.toLowerCase()&&"lastweek"!==this.customCaseSection.label.toLowerCase()&&"thismonth"!==this.customCaseSection.label.toLowerCase()&&"lastmonth"!==this.customCaseSection.label.toLowerCase()||this.quickChoose(this.customCaseSection.label.toLowerCase())},setQuarter:function(quarterId,year){null!==year&&"undefined"!==typeof year&&this.$set(this.selectedQuarter,"year",year),this.$set(this.selectedQuarter,"quarter",quarterId),this.time=[],this.time.push(moment_timezone_default().tz([this.selectedQuarter.year],this.timeZone).quarter(this.selectedQuarter.quarter).startOf("quarter").valueOf()),this.time.push(moment_timezone_default().tz([this.selectedQuarter.year],this.timeZone).quarter(this.selectedQuarter.quarter).endOf("quarter").valueOf())},setDate:function(d,month){this.$set(this.selectedDate,"day",d),this.$set(this.selectedDate,"month",month),this.time=[],this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],d],this.timeZone).startOf("day").valueOf()),this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],d],this.timeZone).endOf("day").valueOf())},previous:function(){var startOfMonth=moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"]],this.timeZone).subtract(1,"month").startOf("month").valueOf();this.$set(this.selectedDate,"day",moment_timezone_default().tz(startOfMonth,this.timeZone).date()),this.$set(this.selectedDate,"month",moment_timezone_default().tz(startOfMonth,this.timeZone).month()),this.$set(this.selectedDate,"year",moment_timezone_default().tz(startOfMonth,this.timeZone).year()),this.selectedMonth=this.selectedDate["month"],this.selectedYear=this.selectedDate["year"],this.time=[],this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"]],this.timeZone).startOf("month").valueOf()),"D"===this.currentTab?this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.selectedDate["day"]],this.timeZone).endOf("day").valueOf()):this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"]],this.timeZone).endOf("month").valueOf()),this.loadDays()},next:function(){var startOfMonth=moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"]],this.timeZone).add(1,"month").startOf("month").valueOf();this.$set(this.selectedDate,"day",moment_timezone_default().tz(startOfMonth,this.timeZone).date()),this.$set(this.selectedDate,"month",moment_timezone_default().tz(startOfMonth,this.timeZone).month()),this.$set(this.selectedDate,"year",moment_timezone_default().tz(startOfMonth,this.timeZone).year()),this.selectedMonth=this.selectedDate["month"],this.selectedYear=this.selectedDate["year"],this.time=[],this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"]],this.timeZone).startOf("month").valueOf()),"D"===this.currentTab?this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.selectedDate["day"]],this.timeZone).endOf("day").valueOf()):this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"]],this.timeZone).endOf("month").valueOf()),this.loadDays()},setRange:function(decider,day){"from"===decider?(this.$set(this.rangeObj,"from",moment_timezone_default().tz([this.rangeObj["fromYear"],this.rangeObj["fromMonth"],day],this.timeZone).startOf("day").valueOf()),this.$set(this.rangeObj,"fromDay",moment_timezone_default().tz(this.rangeObj["from"],this.timeZone).date()),this.$set(this.rangeObj,"fromMonth",moment_timezone_default().tz(this.rangeObj["from"],this.timeZone).month()),this.$set(this.rangeObj,"fromYear",moment_timezone_default().tz(this.rangeObj["from"],this.timeZone).year()),this.isRange=!0):(this.$set(this.rangeObj,"to",moment_timezone_default().tz([this.rangeObj["toYear"],this.rangeObj["toMonth"],day],this.timeZone).endOf("day").valueOf()),this.$set(this.rangeObj,"toDay",moment_timezone_default().tz(this.rangeObj["to"],this.timeZone).date()),this.$set(this.rangeObj,"toMonth",moment_timezone_default().tz(this.rangeObj["to"],this.timeZone).month()),this.$set(this.rangeObj,"toYear",moment_timezone_default().tz(this.rangeObj["to"],this.timeZone).year()),this.isRange=!0)},setDefaultTimeInMills:function(){"D"===this.currentTab?(this.time=[],this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.selectedDate["day"]],this.timeZone).startOf("day").valueOf()),this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.selectedDate["day"]],this.timeZone).endOf("day").valueOf())):"W"===this.currentTab?(this.time=[],this.selectedWeek=moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.selectedDate["day"]],this.timeZone).week(),this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.selectedDate["day"]],this.timeZone).startOf("week").valueOf()),this.time.push(moment_timezone_default().tz([this.selectedDate["year"],this.selectedDate["month"],this.selectedDate["day"]],this.timeZone).endOf("week").valueOf())):"M"===this.currentTab?(this.time=[],this.time.push(moment_timezone_default().tz([this.selectedYear,this.selectedMonth],this.timeZone).startOf("month").valueOf()),this.time.push(moment_timezone_default().tz([this.selectedYear,this.selectedMonth],this.timeZone).endOf("month").valueOf())):"Y"===this.currentTab?(this.time=[],this.time.push(moment_timezone_default().tz([this.selectedYear],this.timeZone).startOf("year").valueOf()),this.time.push(moment_timezone_default().tz([this.selectedYear],this.timeZone).endOf("year").valueOf())):"Q"===this.currentTab&&(this.time=[],this.time.push(moment_timezone_default().tz([this.selectedQuarter.year],this.timeZone).quarter(this.selectedQuarter.quarter).startOf("quarter").valueOf()),this.time.push(moment_timezone_default().tz([this.selectedQuarter.year],this.timeZone).quarter(this.selectedQuarter.quarter).endOf("quarter").valueOf()))},returnDate:function(){var orgCreatedTime=this.$getProperty(this,"$org.createdTime",1483209e6);if("C"===this.currentTab)this.result=this.customCaseSection,this.firstTime?this.firstTime=!1:this.$emit("date",this.customCaseSection);else if("D"===this.currentTab){var temp={};temp["value"]=this.time,temp["offset"]=0,temp["operationOnId"]=1,temp["operationOn"]="day",this.time[0]===this.today[0]&&this.time[1]===this.today[1]?(temp["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?this.$options.filters.formatDate(this.time[0],!0):"Today",temp["operatorId"]=22,"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):this.time[0]===this.yesterday[0]&&this.time[1]===this.yesterday[1]?(temp["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?this.$options.filters.formatDate(this.time[0],!0):"Yesterday",temp["operatorId"]=25,"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C",temp["offset"]=-1):this.time[0]===this.todayUptoNow[0]&&this.time[1]===this.todayUptoNow[0]||this.time[0]===this.todayUptoNow[0]&&moment_timezone_default().tz(this.time[1],this.timeZone).day()===moment_timezone_default().tz(this.todayUptoNow[1],this.timeZone).day()?(temp["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?this.$options.filters.formatDate(this.time[0],!0):"Today upto Now",temp["operatorId"]=43,temp["offset"]=0,"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):(temp["label"]=this.$options.filters.formatDate(this.time[0],!0),temp["operatorId"]=62),this.result=temp,"C"===this.currentTab&&Object.assign(this.customCaseSection,this.result),this.firstTime?this.firstTime=!1:this.$emit("date",temp)}else if("W"===this.currentTab){var _temp5={};_temp5["value"]=this.time,_temp5["operationOnId"]=2,_temp5["operationOn"]="week",_temp5["offset"]=0,this.time[0]===this.thisWeek[0]&&this.time[1]===this.thisWeek[1]?(_temp5["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?this.$options.filters.formatDate(this.time[0],!0)+" - "+this.$options.filters.formatDate(this.time[1],!0):"This Week",_temp5["operatorId"]=31,"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):this.time[0]===this.lastWeek[0]&&this.time[1]===this.lastWeek[1]?(_temp5["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?this.$options.filters.formatDate(this.time[0],!0)+" - "+this.$options.filters.formatDate(this.time[1],!0):"Last Week",_temp5["operatorId"]=30,_temp5["offset"]=-1,"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):this.time[0]===this.thisWeekuptoNow[0]&&this.time[1]===this.thisWeekuptoNow[0]||this.time[0]===this.thisWeekuptoNow[0]&&moment_timezone_default().tz(this.time[1],this.timeZone).day()===moment_timezone_default().tz(this.thisWeekuptoNow[1],this.timeZone).day()?(_temp5["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?this.$options.filters.formatDate(this.time[0],!0)+" - "+this.$options.filters.formatDate(this.time[1],!0):"This Week Until Now",_temp5["operatorId"]=47,"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):(_temp5["label"]=this.$options.filters.formatDate(this.time[0],!0)+" - "+this.$options.filters.formatDate(this.time[1],!0),_temp5["operatorId"]=63),this.result=_temp5,"C"===this.currentTab&&(this.customCaseSection=this.result),this.firstTime?this.firstTime=!1:this.$emit("date",_temp5)}else if("M"===this.currentTab){var _temp6={};_temp6["value"]=this.time,_temp6["operationOnId"]=3,_temp6["offset"]=0,_temp6["operationOn"]="month",this.time[0]===this.thisMonth[0]&&this.time[1]===this.thisMonth[1]?(_temp6["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?moment_timezone_default()(this.time[0]).tz(this.timeZone).format("MMM")+" "+moment_timezone_default()(this.time[0]).tz(this.timeZone).format("YYYY"):"This Month",_temp6["operatorId"]=28,
// this.currentTab = 'C'
"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):this.time[0]===this.lastMonth[0]&&this.time[1]===this.lastMonth[1]?(_temp6["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?moment_timezone_default()(this.time[0]).tz(this.timeZone).format("MMM")+" "+moment_timezone_default()(this.time[0]).tz(this.timeZone).format("YYYY"):"Last Month",_temp6["operatorId"]=27,_temp6["offset"]=-1,
// this.currentTab = 'C'
"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):this.time[0]===this.thisMonthTillYesterday[0]&&this.time[1]===this.thisMonthTillYesterday[1]?(_temp6["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?moment_timezone_default()(this.time[0]).tz(this.timeZone).format("MMM")+" "+moment_timezone_default()(this.time[0]).tz(this.timeZone).format("YYYY"):"This Month Till Yesterday",_temp6["operatorId"]=66,
// this.currentTab = 'C'
"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):this.time[0]===this.thisMonthuptoNow[0]&&this.time[1]===this.thisMonthuptoNow[1]||this.time[0]===this.thisMonthuptoNow[0]&&moment_timezone_default().tz(this.time[1],this.timeZone).day()===moment_timezone_default().tz(this.thisMonthuptoNow[1],this.timeZone).day()?(_temp6["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?moment_timezone_default()(this.time[0]).tz(this.timeZone).format("MMM")+" "+moment_timezone_default()(this.time[0]).tz(this.timeZone).format("YYYY"):"This Month Until Now",_temp6["operatorId"]=48,"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):(_temp6["label"]=moment_timezone_default()(this.time[0]).tz(this.timeZone).format("MMM")+" "+moment_timezone_default()(this.time[0]).tz(this.timeZone).format("YYYY"),_temp6["operatorId"]=64),this.result=_temp6,"C"===this.currentTab&&(this.customCaseSection=this.result),this.firstTime?this.firstTime=!1:this.$emit("date",_temp6)}else if("Y"===this.currentTab){var _temp7={offset:0};this.time[0]===this.thisYear[0]&&this.time[1]===this.thisYear[1]?(_temp7["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?moment_timezone_default().tz(this.time[0],this.timeZone).year():"This year",_temp7["operatorId"]=44,
// this.currentTab = 'C'
"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):this.time[0]===this.lastYear[0]&&this.time[1]===this.lastYear[1]?(_temp7["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?moment_timezone_default().tz(this.time[0],this.timeZone).year():"Last Year",_temp7["operatorId"]=45,_temp7["offset"]=-1,
// this.currentTab = 'C'
"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):this.time[0]===this.thisYearuptoNow[0]&&this.time[1]===this.thisYearuptoNow[1]||this.time[0]===this.thisYearuptoNow[0]&&moment_timezone_default().tz(this.time[1],this.timeZone).day()===moment_timezone_default().tz(this.thisYearuptoNow[1],this.timeZone).day()?(_temp7["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?moment_timezone_default().tz(this.time[0],this.timeZone).year():"This Year upto Now",_temp7["operatorId"]=46,_temp7["offset"]=0,"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"):this.time[0]!==orgCreatedTime||this.time[1]!==this.thisYearuptoNow[1]&&moment_timezone_default().tz(this.time[1],this.timeZone).day()!==moment_timezone_default().tz(this.thisYearuptoNow[1],this.timeZone).day()?(_temp7["label"]=moment_timezone_default().tz(this.time[0],this.timeZone).year(),_temp7["operatorId"]=65):(_temp7["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?moment_timezone_default().tz(this.time[0],this.timeZone).year():"Till Now",_temp7["operatorId"]=72,"undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C"),_temp7["value"]=this.time,_temp7["operationOnId"]=4,_temp7["operationOn"]="year",this.result=_temp7,"C"===this.currentTab&&(this.customCaseSection=this.result),this.firstTime?this.firstTime=!1:this.$emit("date",_temp7)}else if("R"===this.currentTab){var _temp8={};
// let fromMoment = moment.tz([this.rangeObj.fromYear, this.rangeObj.fromMonth, this.rangeObj.fromDay, this.rangeObj.fromTime.getHours(), this.rangeObj.fromTime.getMinutes()], this.timeZone)
// let toMoment = moment.tz([this.rangeObj.toYear, this.rangeObj.toMonth, this.rangeObj.toDay, this.rangeObj.toTime.getHours(), this.rangeObj.toTime.getMinutes()], this.timeZone)
// temp['offset'] = -(toMoment.diff(fromMoment, temp.operationOn)) - 1
if(_temp8["value"]=[this.rangeObj.from,this.rangeObj.to],this.isRange){_temp8["operatorId"]=20,_temp8["operationOn"]="day",_temp8["operationOnId"]=1;var _fromMoment3=moment_timezone_default().tz([this.rangeObj.fromYear,this.rangeObj.fromMonth,this.rangeObj.fromDay],this.timeZone),_toMoment3=moment_timezone_default().tz([this.rangeObj.toYear,this.rangeObj.toMonth,this.rangeObj.toDay],this.timeZone);this.firstTime,_temp8["offset"]=-_toMoment3.diff(_fromMoment3,_temp8.operationOn)-1,_temp8["label"]=this.$options.filters.formatDate(_temp8.value[0],!0)+" to "+this.$options.filters.formatDate(_temp8.value[1],!0)}else if(this.firstTime&&20!==this.result.operatorId){_temp8["operationOn"]=this.result.operationOn,_temp8["operationOnId"]=this.result.operationOnId;
// let fromMoment = moment.tz([this.rangeObj.fromYear, this.rangeObj.fromMonth, this.rangeObj.fromDay, this.rangeObj.fromTime.getHours(), this.rangeObj.fromTime.getMinutes()], this.timeZone)
// let toMoment = moment.tz([this.rangeObj.toYear, this.rangeObj.toMonth, this.rangeObj.toDay, this.rangeObj.toTime.getHours(), this.rangeObj.toTime.getMinutes()], this.timeZone)
var fromMoment=moment_timezone_default().tz([this.rangeObj.fromYear,this.rangeObj.fromMonth,this.rangeObj.fromDay],this.timeZone),toMoment=moment_timezone_default().tz([this.rangeObj.toYear,this.rangeObj.toMonth,this.rangeObj.toDay],this.timeZone);_temp8["offset"]=-(toMoment.diff(fromMoment,_temp8.operationOn)+1),_temp8["label"]="Last "+Math.abs(_temp8["offset"])+" "+_temp8["operationOn"]+(Math.abs(_temp8["offset"])>1?"s":""),_temp8["operatorId"]=this.result.operatorId}else if(20===this.result.operatorId){_temp8["operationOn"]="day",_temp8["operationOnId"]=1;var _fromMoment=moment_timezone_default().tz([this.rangeObj.fromYear,this.rangeObj.fromMonth,this.rangeObj.fromDay],this.timeZone),_toMoment=moment_timezone_default().tz([this.rangeObj.toYear,this.rangeObj.toMonth,this.rangeObj.toDay],this.timeZone);this.firstTime,_temp8["offset"]=-_toMoment.diff(_fromMoment,_temp8.operationOn)-1,
// let fromMoment = moment.tz([this.rangeObj.fromYear, this.rangeObj.fromMonth, this.rangeObj.fromDay, this.rangeObj.fromTime.getHours(), this.rangeObj.fromTime.getMinutes()], this.timeZone)
// let toMoment = moment.tz([this.rangeObj.toYear, this.rangeObj.toMonth, this.rangeObj.toDay, this.rangeObj.toTime.getHours(), this.rangeObj.toTime.getMinutes()], this.timeZone)
// temp['offset'] = -(toMoment.diff(fromMoment, temp.operationOn)) - 1
// let fromHour = this.rangeObj.fromTime.getHours() < 10 ? '0' + this.rangeObj.fromTime.getHours() : this.rangeObj.fromTime.getHours()
// let fromMinute = this.rangeObj.fromTime.getMinutes() < 10 ? '0' + this.rangeObj.fromTime.getMinutes() : this.rangeObj.fromTime.getMinutes()
// let toHour = this.rangeObj.toTime.getHours() < 10 ? '0' + this.rangeObj.toTime.getHours() : this.rangeObj.toTime.getHours()
// let toMinute = this.rangeObj.toTime.getMinutes() < 10 ? '0' + this.rangeObj.toTime.getMinutes() : this.rangeObj.toTime.getMinutes()
// temp['label'] = this.rangeObj.fromDay + ' ' + this.months[this.rangeObj.fromMonth].label + ' ' + this.rangeObj.fromYear + ' ' + fromHour + ':' + fromMinute + ' ' +
//               ' to ' + this.rangeObj.toDay + ' ' + this.months[this.rangeObj.toMonth].label + ' ' + this.rangeObj.toYear + ' ' + toHour + ':' + toMinute
_temp8["label"]=this.$options.filters.formatDate(_temp8.value[0],!0)+" to "+this.$options.filters.formatDate(_temp8.value[1],!0),
//   this.rangeObj.fromDay +
//   ' ' +
//   this.months[this.rangeObj.fromMonth].label +
//   ' ' +
//   this.rangeObj.fromYear +
//   ' ' +
//   ' to ' +
//   this.rangeObj.toDay +
//   ' ' +
//   this.months[this.rangeObj.toMonth].label +
//   ' ' +
//   this.rangeObj.toYear +
//   ' '
_temp8["operatorId"]=20}else{_temp8["operationOn"]=this.result.operationOn,_temp8["operationOnId"]=this.result.operationOnId;var _fromMoment2=moment_timezone_default().tz([this.rangeObj.fromYear,this.rangeObj.fromMonth,this.rangeObj.fromDay],this.timeZone),_toMoment2=moment_timezone_default().tz([this.rangeObj.toYear,this.rangeObj.toMonth,this.rangeObj.toDay],this.timeZone);_temp8["offset"]=-_toMoment2.diff(_fromMoment2,_temp8.operationOn)-1,_temp8["label"]=this.$options.filters.formatDate(_temp8.value[0],!0)+" to "+this.$options.filters.formatDate(_temp8.value[1],!0),_temp8["operatorId"]=this.result.operatorId}this.result=_temp8,this.firstTime?this.firstTime=!1:this.$emit("date",_temp8)}else if("Q"===this.currentTab){var _temp9={};_temp9["value"]=this.time,this.time[0]===this.thisQuarter[0]&&this.time[1]===this.thisQuarter[1]?(_temp9["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?this.quarters[this.selectedQuarter.quarter-1].label+" of "+this.selectedQuarter.year:"This quarter",_temp9["operatorId"]=68):this.time[0]===this.lastQuarter[0]&&this.time[1]===this.lastQuarter[1]?(_temp9["label"]="undefined"!==typeof this.tabs&&this.tabs.disableDefaultLabels?this.quarters[this.selectedQuarter.quarter-1].label+" of "+this.selectedQuarter.year:"Last quarter",_temp9["operatorId"]=69):(_temp9["label"]=this.quarters[this.selectedQuarter.quarter-1].label+" of "+this.selectedQuarter.year,_temp9["operatorId"]=67),_temp9["offset"]=0,_temp9["operationOnId"]=5,_temp9["operationOn"]="quarter","undefined"!==typeof this.tabs&&this.activeTab&&!0===this.tabs.enableByOperationOnId?this.currentTab=this.activeTab:this.currentTab="C",this.result=_temp9,"C"===this.currentTab&&(this.customCaseSection=this.result),this.firstTime?this.firstTime=!1:this.$emit("date",_temp9)}this.datePicker=!1}}},date_picker_NewDatePickervue_type_script_lang_js=NewDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(date_picker_NewDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewDatePicker=component.exports},
/***/447413:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SectionContainer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/groups/SectionContainer.vue?vue&type=template&id=7859c402&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-row",{staticClass:"accordion-head",class:{"cursor-move":"edit"==_vm.viewOrEdit},style:_vm.accordionHeadStyle},[_c("el-col",{staticClass:"mT32",attrs:{span:1}},[_c("div",{class:{mL30:"banner"==_vm.headerType,mL25:"color"==_vm.headerType},on:{click:_vm.resizeSection}},[_c("inline-svg",{staticClass:"pointer",attrs:{iconClass:"arrow-icon-border "+(_vm.collapsed?"accordion-expanded":"accordion-collapsed"),iconStyle:"width: 30px; height: 30px; style",src:"svgs/dashboard/icons/arrow"}})],1)]),_c("el-col",{staticClass:"mT27",attrs:{span:19}},[_c("div",{staticClass:"mL15"},[_c("div",{staticClass:"title"},[_vm._v(_vm._s(_vm.section.name))]),_c("div",{staticClass:"widget-count"},[_vm._v(_vm._s(_vm.widgetCountText))])])]),"edit"==_vm.viewOrEdit?_c("el-col",{staticClass:"mT25",attrs:{span:3}},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col",on:{click:_vm.expandSection}},[_c("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:_vm.addWidget}},[_c("el-button",{staticClass:"section-icon",attrs:{circle:""}},[_c("inline-svg",{attrs:{iconStyle:_vm.controlsIconStyle,src:"svgs/dashboard/icons/add"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"addText"}},[_vm._v("Add Text")]),_c("el-dropdown-item",{attrs:{command:"addImage"}},[_vm._v("Add Image")]),_c("el-dropdown-item",{attrs:{command:"addComponent"}},[_vm._v("Add Component")]),_c("el-dropdown-item",{attrs:{command:"addCard"}},[_vm._v("Add Card")])],1)],1)],1),_c("div",{staticClass:"col"},[_c("el-button",{staticClass:"section-icon",attrs:{circle:""},on:{click:_vm.editSection}},[_c("inline-svg",{attrs:{iconStyle:_vm.controlsIconStyle,src:"svgs/dashboard/icons/config"}})],1)],1),_c("div",{staticClass:"col",on:{click:_vm.expandSection}},[_c("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:_vm.executeOptions}},[_c("el-button",{staticClass:"section-icon",attrs:{circle:""}},[_c("inline-svg",{attrs:{iconStyle:_vm.controlsIconStyle,src:"svgs/dashboard/icons/more"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"clone"}},[_c("i",{staticClass:"el-icon-document-copy"}),_vm._v("Clone")]),_c("el-dropdown-item",{attrs:{command:"delete"}},[_c("i",{staticClass:"el-icon-delete"}),_vm._v("Delete")])],1)],1)],1)])]):_vm._e()],1),_c("div",{staticClass:"section-body",style:_vm.sectionBodyStyle},[0!=_vm.widgetCount||"edit"!=_vm.viewOrEdit||_vm.collapsed?_vm._e():_c("div",{staticClass:"add-widget-message",class:{"add-widget-message-color":"color"==_vm.headerType}},[_vm._v(" There are no widgets in this group. click + to begin adding widgets. ")]),_vm._t("default")],2),_vm.showDeleteModal?_c("section-delete-confirmation",{attrs:{groupName:_vm.groupName},on:{yes:_vm.deleteSection,no:function($event){_vm.showDeleteModal=!1}}}):_vm._e()],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),InlineSvg=(__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(586166)),SectionDeleteConfirmationvue_type_template_id_5f44ba68_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container ",attrs:{visible:!0,title:"Delete this group?",height:"100px","custom-class":"action-configure-dialog delete-popup","close-on-press-escape":!0,"append-to-body":!0,"show-close":!1}},[_c("div",[_vm._v(" Do you want to delete "),_c("b",[_vm._v(_vm._s(_vm.groupName))]),_vm._v(" and all its contents? ")]),_c("span",{staticClass:"modal-dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6 modal-btn-cancel",on:{click:function($event){return _vm.$emit("no")}}},[_vm._v("No")]),_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.$emit("yes")}}},[_vm._v("Yes")])],1)])},SectionDeleteConfirmationvue_type_template_id_5f44ba68_scoped_true_staticRenderFns=[],SectionDeleteConfirmationvue_type_script_lang_js={props:{groupName:{type:String,required:!0}}},groups_SectionDeleteConfirmationvue_type_script_lang_js=SectionDeleteConfirmationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(groups_SectionDeleteConfirmationvue_type_script_lang_js,SectionDeleteConfirmationvue_type_template_id_5f44ba68_scoped_true_render,SectionDeleteConfirmationvue_type_template_id_5f44ba68_scoped_true_staticRenderFns,!1,null,"5f44ba68",null)
/* harmony default export */,SectionDeleteConfirmation=component.exports,SectionContainervue_type_script_lang_js={props:{section:{required:!0,default:function(){return{}},type:Object},viewOrEdit:{type:String,required:!0,default:"view"}},methods:{gotoDashboard:function(){
// Write the logic to handle link dashboard... etc.
},executeOptions:function(option){"clone"==option?this.$emit("clone"):"delete"==option&&(this.showDeleteModal=!0)},deleteSection:function(){this.showDeleteModal=!1,this.$emit("removeSection")},editSection:function(){var self=this;this.collapsed?(setTimeout((function(){
// Show the section-editer dialog box after some delay,
// expand the section first.
self.$emit("editSection")}),500),self.expandSection()):self.$emit("editSection")},resizeSection:function(){var collapsed=this.collapsed;collapsed?this.expandSection():this.collapseSection()},expandSection:function(){var collapsed=this.collapsed;if(collapsed){var widgets=this.widgets,id=this.id,SECTION_HEAD_HEIGHT=7,SECTION_BODY_HEIGHT=this.findSectionMaxHeight(widgets),SECTION_BOTTOM_PADDING=1;this.$emit("resizeSection",{id:id,height:SECTION_HEAD_HEIGHT+SECTION_BODY_HEIGHT+SECTION_BOTTOM_PADDING,collapsed:!1})}},collapseSection:function(){var collapsed=this.collapsed;if(!collapsed){var id=this.id,SECTION_HEAD_HEIGHT=7;// 7 x 15px (rowHeight) = 105px - 5px X 2 (Top and Bottom margin of Gridstack items) = 95px;
this.$emit("resizeSection",{id:id,height:SECTION_HEAD_HEIGHT,collapsed:!0})}},addWidget:function(widgetType){this.$emit("addWidgetToSection",widgetType)},findSectionMaxHeight:function(children){var length=children.length;return length?Math.max.apply(Math,(0,toConsumableArray/* default */.Z)(children.map((function(o){return o.y+o.h})))):13}},data:function(){return{showDeleteModal:!1}},computed:{groupName:function(){var _this$section$name=this.section.name,name=void 0===_this$section$name?"":_this$section$name;return name},controlsIconStyle:function(){var bannerType=this.section.banner_meta.type;return"color"==bannerType?"fill: #324056":"banner"==bannerType?"fill: #ffffff":""},id:function(){var id=this.section.id;return id},widgets:function(){var children=this.section.children;return children},collapsed:function(){var collapsed=this.section.collapsed;return null!==collapsed&&void 0!==collapsed&&collapsed},widgetCount:function(){var widgets=this.section.children,count=widgets.length;return count},widgetCountText:function(){var widgetCount=this.widgetCount;return"".concat(widgetCount,widgetCount>1?" widgets":" widget")},sectionBodyStyle:function(){return{border:"red"}},headerType:function(){var headerType=this.section.banner_meta.type;return headerType},accordionHeadStyle:function(){var headerType=this.headerType,header=this.section.banner_meta,style={};if("banner"==headerType){var label=header.banner.label;style["background-image"]="url(".concat(__webpack_require__(4307)("./".concat(label,".svg")),")"),style["background-size"]="cover"}else if("color"==headerType)header.color;return style}},components:{InlineSvg:InlineSvg/* default */.Z,SectionDeleteConfirmation:SectionDeleteConfirmation}},groups_SectionContainervue_type_script_lang_js=SectionContainervue_type_script_lang_js,SectionContainer_component=(0,componentNormalizer/* default */.Z)(groups_SectionContainervue_type_script_lang_js,render,staticRenderFns,!1,null,"7859c402",null)
/* harmony default export */,SectionContainer=SectionContainer_component.exports},
/***/363256:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPhotoUploader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/reusable-components/FPhotoUploader.vue?vue&type=template&id=2d802d6d
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("f-image-editor",{attrs:{visibility:!0,module:_vm.module,conf:_vm.widget,editwidget:_vm.editwidget,uploadLoading:_vm.loading},on:{onupload:_vm.onUpload,close:_vm.closedialog,onupdate:_vm.onUpdate}})},staticRenderFns=[],FImageEditorvue_type_template_id_6d4cceba_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{"custom-class":"f-image-editor fc-dialog-center-container","modal-append-to-body":!1,visible:_vm.visibilityCopy,width:_vm.showAssetMapping?"95%":"80%",title:_vm.showAssetMapping?"Floor Plan - Asset Mapper":"Image Card"},on:{open:_vm.initDialog,"before-close":_vm.resetDialog,close:_vm.resetDialog,"update:visible":function($event){_vm.visibilityCopy=$event}}},[_c("div",{staticClass:"imgeditor-container",on:{mousemove:_vm.handleMouseMove,mouseup:_vm.handleMouseUp,dragover:_vm.handlePreventDefault,dragend:_vm.handlePreventDefault,drop:_vm.handleFileDrop}},[_c("div",{staticClass:"imgeditor-main-area row"},[_c("div",{staticClass:"imgeditor-image-area col-9"},[_vm.imageLoaded?_vm._e():_c("div",{staticClass:"imgeditor-upload-area"},[_c("input",{attrs:{id:"img",type:"file"},on:{change:function($event){return _vm.handleFileChange($event.target.files[0])}}}),_c("img",{attrs:{src:__webpack_require__(250620),width:"150",height:"150"}}),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_files")+" "+_vm.$t("common.attachment_form.click_to_browse"))+" ")])]),_c("canvas",{ref:"imageEditorCanvas"})]),_vm.mapContext?_c("div",{staticClass:"imgeditor-sidebar col-3"},[_vm.imageLoaded?_c("el-row",{staticClass:"p10"},[_c("el-col",{attrs:{span:24}},[_vm.showAssetMapping?_c("div",{staticClass:"f11 pT10 pB10"},[_c("i",{staticClass:"el-icon-info mR5 fw-bold"}),_vm._v("Double click the image anywhere to add asset mapping. ")]):_c("div",{staticClass:"f11 mT10"},[_c("i",{staticClass:"el-icon-info mR5 fw-bold"}),_vm._v("Double click the image anywhere to add link blocks. ")])])],1):_vm._e(),_vm.selectedArea&&!_vm.showAssetMapping?_c("el-form",{staticStyle:{"margin-top":"20px","border-top":"1px solid #e0e0e0"}},[_c("div",{staticClass:"linkmap-form-header"},[_vm._v("Link Mapping")]),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{attrs:{prop:"linkType"}},[_c("div",[_vm._v("Link Type")]),_c("el-select",{model:{value:_vm.selectedArea.linkType,callback:function($$v){_vm.$set(_vm.selectedArea,"linkType",$$v)},expression:"selectedArea.linkType"}},[_c("el-option",{attrs:{value:"dashboard",label:"Dashboard"}}),_c("el-option",{attrs:{value:"report",label:"Report"}}),_vm.showAssetMapping?_c("el-option",{attrs:{value:"asset",label:"Asset"}}):_vm._e(),_c("el-option",{attrs:{value:"url",label:"Custom URL"}})],1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},["url"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"url"}},[_c("div",[_vm._v("Link")]),_c("el-input",{model:{value:_vm.selectedArea.url,callback:function($$v){_vm.$set(_vm.selectedArea,"url",$$v)},expression:"selectedArea.url"}})],1):_vm._e(),"dashboard"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"dashboardId"}},[_c("p",[_vm._v("Select Dashboard")]),_c("el-select",{attrs:{filterable:"",placeholder:"Select Dashboard"},model:{value:_vm.selectedArea.dashboardId,callback:function($$v){_vm.$set(_vm.selectedArea,"dashboardId",$$v)},expression:"selectedArea.dashboardId"}},_vm._l(_vm.dashboardList,(function(dfolder,index){return _vm.dashboardList?_c("el-option-group",{key:index,attrs:{label:dfolder.name}},_vm._l(dfolder.dashboards,(function(dashboard,didx){return _c("el-option",{key:didx,attrs:{label:dashboard.dashboardName,value:dashboard.linkName}})})),1):_vm._e()})),1)],1):_vm._e(),"asset"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"assetId"}},[_c("p",[_vm._v("Select Asset")]),_c("el-select",{attrs:{filterable:"",placeholder:"Select Asset width100"},on:{change:function($event){return _vm.setAsset(_vm.selectedArea)}},model:{value:_vm.selectedArea.assetId,callback:function($$v){_vm.$set(_vm.selectedArea,"assetId",$$v)},expression:"selectedArea.assetId"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1):_vm._e(),"report"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"reportId"}},[_c("p",[_vm._v("Select Report")]),_c("el-select",{attrs:{filterable:"",placeholder:"Select Report"},model:{value:_vm.selectedArea.reportId,callback:function($$v){_vm.$set(_vm.selectedArea,"reportId",$$v)},expression:"selectedArea.reportId"}},_vm._l(_vm.reportList,(function(repotFolder,index){return _vm.reportList?_c("el-option-group",{key:index,attrs:{label:repotFolder.name}},_vm._l(repotFolder.reports,(function(report,ridx){return _c("el-option",{key:ridx,attrs:{label:report.name,value:report.id}})})),1):_vm._e()})),1)],1):_vm._e()],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},["url"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"alt"}},[_c("p",[_vm._v("Alt")]),_c("el-input",{model:{value:_vm.selectedArea.alt,callback:function($$v){_vm.$set(_vm.selectedArea,"alt",$$v)},expression:"selectedArea.alt"}})],1):_vm._e()],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{attrs:{prop:"target"}},[_c("p",[_vm._v("Target")]),_c("el-select",{model:{value:_vm.selectedArea.target,callback:function($$v){_vm.$set(_vm.selectedArea,"target",$$v)},expression:"selectedArea.target"}},[_c("el-option",{attrs:{value:"popup",label:"Popup"}}),_c("el-option",{attrs:{value:"_self",label:"Same tab"}}),_c("el-option",{attrs:{value:"_blank",label:"New tab"}})],1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",[_c("el-button",{staticClass:"pointer",attrs:{type:"danger",size:"mini"},on:{click:_vm.removeSelectedRect}},[_vm._v("Remove Link")])],1)],1)],1)],1):_vm._e(),_vm.selectedArea&&_vm.showAssetMapping?_c("el-form",{staticClass:"pT10 pL20 pR20",staticStyle:{"margin-top":"20px","border-top":"1px solid #e0e0e0"}},[_c("div",{staticClass:"linkmap-form-header"},[_vm._v("Asset Mapping")]),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{attrs:{prop:"assetId"}},[_c("p",[_vm._v("Select Asset")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{filterable:"",placeholder:"Select Asset"},on:{change:function($event){return _vm.setAsset(_vm.selectedArea)}},model:{value:_vm.selectedArea.assetId,callback:function($$v){_vm.$set(_vm.selectedArea,"assetId",$$v)},expression:"selectedArea.assetId"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",[_c("el-button",{staticClass:"pointer",attrs:{type:"danger",size:"mini"},on:{click:_vm.removeSelectedRect}},[_vm._v("Remove")])],1)],1)],1)],1):_vm._e(),_vm.imageLoaded&&_vm.showAssetMapping?_c("el-form",{staticClass:"pT10 pL20 pR20",staticStyle:{"border-top":"1px solid #e0e0e0"}},[_c("div",{staticClass:"linkmap-form-header"},[_vm._v("Customize Asset Map")]),_vm.imageLoaded&&_vm.mapContext?_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"showAssetName"}},[_c("p",[_vm._v("Show Asset Name")]),_c("el-checkbox",{on:{change:function($event){_vm.mapContext.redraw=!0}},model:{value:_vm.mapContext.assetMappingConfig.showAssetName,callback:function($$v){_vm.$set(_vm.mapContext.assetMappingConfig,"showAssetName",$$v)},expression:"mapContext.assetMappingConfig.showAssetName"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("el-form-item",{staticClass:"fc-color-picker",attrs:{prop:"defaultTextColor"}},[_c("p",[_vm._v("Text Color")]),_c("el-color-picker",{attrs:{"popper-class":"chart-custom-color-picker"},on:{change:function($event){_vm.mapContext.redraw=!0}},model:{value:_vm.mapContext.assetMappingConfig.defaultTextColor,callback:function($$v){_vm.$set(_vm.mapContext.assetMappingConfig,"defaultTextColor",$$v)},expression:"mapContext.assetMappingConfig.defaultTextColor"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("el-form-item",{staticClass:"fc-color-picker",attrs:{prop:"defaultDotColor"}},[_c("p",[_vm._v("Dot Color")]),_c("el-color-picker",{attrs:{"popper-class":"chart-custom-color-picker"},on:{change:function($event){_vm.mapContext.redraw=!0}},model:{value:_vm.mapContext.assetMappingConfig.defaultDotColor,callback:function($$v){_vm.$set(_vm.mapContext.assetMappingConfig,"defaultDotColor",$$v)},expression:"mapContext.assetMappingConfig.defaultDotColor"}})],1)],1)],1):_vm._e()],1):_vm._e()],1):_vm._e()])]),_c("span",{staticClass:"modal-dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6 modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_vm.update?_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary"},on:{click:_vm.updateImage}},[_vm._v("UPDATE")]):_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary",disabled:_vm.uploadLoading||!_vm.selectedFile},on:{click:_vm.uploadImage}},[_vm._v(_vm._s(_vm.uploadLoading?"Uploading...":"Upload"))])],1)])},FImageEditorvue_type_template_id_6d4cceba_staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),imagemap=(__webpack_require__(169358),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(737960),__webpack_require__(648324),__webpack_require__(51101)),api=__webpack_require__(32284),Status={IDLE:0,RESIZING:1,DRAGGING:2},FImageEditorvue_type_script_lang_js={props:["visibility","module","conf","editwidget","showAssetMapping","editAssetMapping","spaceId","uploadLoading"],data:function(){return{visibilityCopy:!1,imageLoaded:!1,selectedArea:null,update:!1,status:Status.IDLE,selectedFile:null,fileReader:null,mapContext:null,currentAnchor:-1,cursors:["nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize"],mouseX:null,mouseY:null,mouseOffsetX:null,mouseOffsetY:null,dashboardList:null,reportList:null,assetList:null,currentScale:1,scaleMultiplier:.8}},mounted:function(){if(this.visibilityCopy=this.visibility,this.editAssetMapping)this.initDialog(this.editAssetMapping.url),this.update=!0;else if(this.showAssetMapping)this.initDialog();else{if(this.conf&&this.conf.widget&&this.conf.widget.id>-1&&this.conf.widget.dataOptions&&this.conf.widget.dataOptions.metaJson){var data=JSON.parse(this.conf.widget.dataOptions.metaJson);this.initDialog(data.url),this.update=!0}if(this.conf&&this.conf.widget&&-1===this.conf.widget.id&&this.conf.widget.dataOptions&&this.conf.widget.dataOptions.imagecardData){var _data=this.conf.widget.dataOptions.imagecardData;this.initDialog(_data.url),this.update=!0}}this.loadDashboards(),this.loadReports(),this.loadAssets()},methods:{initDialog:function(url){var _this=this;this.$nextTick((function(){_this.initUpload(url)}))},resetDialog:function(){this.mapContext=null,this.update=!1,this.$emit("close")},closeDialog:function(){this.$emit("update:visibility",!1),this.$emit("close")},zoomIn:function(){this.currentScale+=this.scaleMultiplier,this.mapContext.context.scale(this.currentScale,this.currentScale),this.mapContext.redraw=!0},zoomOut:function(){this.currentScale-=this.scaleMultiplier,this.mapContext.context.scale(this.currentScale,this.currentScale),this.mapContext.redraw=!0},uploadImage:function(){var imageObj={file:this.selectedFile,areas:this.getAreas(),imageMeta:this.mapContext.imageMeta,assetMappingConfig:{showAssetName:this.mapContext.assetMappingConfig.showAssetName,defaultDotColor:this.mapContext.assetMappingConfig.defaultDotColor,defaultTextColor:this.mapContext.assetMappingConfig.defaultTextColor}};this.$emit("onupload",imageObj)},updateImage:function(){if(this.showAssetMapping){var data={imageMeta:this.mapContext.imageMeta,areas:this.getAreas(),assetMappingConfig:{showAssetName:this.mapContext.assetMappingConfig.showAssetName,defaultDotColor:this.mapContext.assetMappingConfig.defaultDotColor,defaultTextColor:this.mapContext.assetMappingConfig.defaultTextColor}};this.$emit("onupdate",data)}else{var imageObj={file:this.selectedFile,areas:this.getAreas(),imageMeta:this.mapContext.imageMeta},_data2=this.conf&&this.conf.widget&&this.conf.widget.id>-1?JSON.parse(this.conf.widget.dataOptions.metaJson):this.conf.widget.dataOptions.imagecardData;_data2.options={imageMeta:imageObj.imageMeta,areas:imageObj.areas},this.$emit("onupdate",_data2)}},handleMouseUp:function(e){this.status!==Status.IDLE&&(this.status=Status.IDLE,this.currentAnchor=-1)},handlePreventDefault:function(e){e.preventDefault()},handleMouseMove:function(e){var offsets={top:0,left:0};if(this.mapContext&&(offsets.top=this.mapContext.canvas.getBoundingClientRect().top+window.scrollY,offsets.left=this.mapContext.canvas.getBoundingClientRect().left+window.scrollX),this.mouseX=Math.floor(Math.max(0,e.pageX-offsets.left)),this.mouseY=Math.floor(Math.max(0,e.pageY-offsets.top)),this.status===Status.DRAGGING){var s={x:this.mouseX-this.mouseOffsetX,y:this.mouseY-this.mouseOffsetY};this.mapContext.selected.set(s),this.mapContext.redraw=!0}else if(this.status===Status.RESIZING)this.mapContext.selected.transform(this.currentAnchor,this.mouseX,this.mouseY),this.mapContext.redraw=!0;else if(this.mapContext&&this.mapContext.selected){for(
// see if we're hovering over an anchor
var anchors=this.mapContext.selected.anchors(),i=8;i--;){var anchor=anchors[i];
// we dont need to use the ghost context because
// selection handles will always be rectangles
if(this.mouseX>=anchor.x&&this.mouseX<=anchor.x+6&&this.mouseY>=anchor.y&&this.mouseY<=anchor.y+6)
// we found one!
return this.currentAnchor=i,this.mapContext.redraw=!0,void(e.target.style.cursor=this.cursors[i])}this.currentAnchor=-1,e.target.style.cursor=this.mapContext.selected.isWithin(this.mouseX,this.mouseY)?"move":"auto"}},initUpload:function(editImageURL){var _this2=this,self=this;function draw(){self.mapContext&&(self.mapContext.draw(),window.requestAnimationFrame(draw))}this.mapContext={canvas:this.$refs["imageEditorCanvas"],imageScale:"original",assetMappingConfig:{assetMap:{},showAssetName:!1,defaultDotColor:"#FF0000",defaultTextColor:"#000000"}},this.editAssetMapping&&(this.mapContext.assetMappingConfig.showAssetName=this.editAssetMapping.assetMappingConfig.showAssetName,this.mapContext.assetMappingConfig.defaultDotColor=this.editAssetMapping.assetMappingConfig.defaultDotColor,this.mapContext.assetMappingConfig.defaultTextColor=this.editAssetMapping.assetMappingConfig.defaultTextColor),this.mapContext.toggleControls=function(enable){_this2.selectedArea=enable?_this2.mapContext.selected:null},imagemap/* default */.Z.initMap(this.mapContext),this.fileReader=new FileReader,this.fileReader.onload=function(e){_this2.mapContext.load(e.target.result),_this2.imageLoaded=!0},self.mapContext.canvas.onselectstart=function(){return!1},self.mapContext.canvas.ondblclick=function(){var rectContext={canvas:self.mapContext.canvas};imagemap/* default */.Z.initRect(rectContext,self.mouseX,self.mouseY),self.mapContext.add(rectContext)},self.mapContext.canvas.onmousedown=function(e){if(-1!==self.currentAnchor)self.status=Status.RESIZING;else if(self.status!==Status.DRAGGING){for(var i=self.mapContext.rects.length;i--;){var rect=self.mapContext.rects[i];if(rect.isWithin(self.mouseX,self.mouseY))return self.status=Status.DRAGGING,self.mouseOffsetX=self.mouseX-rect.x,self.mouseOffsetY=self.mouseY-rect.y,void(self.mapContext.selected!==rect&&self.mapContext.select(rect))}self.status=Status.IDLE,self.mapContext.deselect()}},editImageURL&&(this.mapContext.onImageLoad=function(){_this2.loadAreas()},this.mapContext.load(editImageURL),this.imageLoaded=!0),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,window.requestAnimationFrame(draw),document.querySelector(".imgeditor-image-area").addEventListener("paste",(function(e){_this2.handleFileChange(e.clipboardData.items[0].getAsFile())}))},setAsset:function(selectedArea){selectedArea.linkType="asset";var asset=this.assetList.find((function(at){return at.id===selectedArea.assetId}));this.mapContext.assetMappingConfig.assetMap[asset.id+""]={asset:asset},this.mapContext.redraw=!0},changeImageScale:function(){this.mapContext.changeImageScale(this.mapContext.imageScale)},handleFileDrop:function(e){e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length&&this.handleFileChange(e.dataTransfer.files[0])},handleFileChange:function(file){this.selectedFile=file,this.fileReader.readAsDataURL(file)},addRect:function(){var rectContext={canvas:this.mapContext.canvas};imagemap/* default */.Z.initRect(rectContext,this.mouseX,this.mouseY),this.mapContext.add(rectContext)},getAreas:function(){var areas=[];if(this.mapContext&&this.mapContext.rects&&this.mapContext.rects.length){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.mapContext.rects);try{for(_iterator.s();!(_step=_iterator.n()).done;){var rect=_step.value;areas.push({x:rect.x,y:rect.y,width:rect.width,height:rect.height,type:"rect",link:{type:rect.linkType,url:rect.url,alt:rect.alt,dashboardId:rect.dashboardId,reportId:rect.reportId,assetId:rect.assetId,target:rect.target}})}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return areas},loadAreas:function(){if(this.editAssetMapping){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.editAssetMapping.areas);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var area=_step2.value,rectContext={canvas:this.mapContext.canvas,x:area.x,y:area.y,width:area.width,height:area.height,linkType:area.link.type,url:area.link.url,dashboardId:area.link.dashboardId,reportId:area.link.reportId,assetId:area.link.assetId,alt:area.link.alt,target:area.link.target};imagemap/* default */.Z.initRect(rectContext,this.mouseX,this.mouseY),this.mapContext.add(rectContext)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}else if(this.conf.widget&&this.conf.widget.id>-1&&this.conf.widget.dataOptions&&this.conf.widget.dataOptions.metaJson){var data=JSON.parse(this.conf.widget.dataOptions.metaJson);if(data.options&&data.options.areas&&data.options.areas.length){var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(data.options.areas);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _area=_step3.value,_rectContext={canvas:this.mapContext.canvas,x:_area.x,y:_area.y,width:_area.width,height:_area.height,linkType:_area.link.type,url:_area.link.url,dashboardId:_area.link.dashboardId,reportId:_area.link.reportId,alt:_area.link.alt,target:_area.link.target};imagemap/* default */.Z.initRect(_rectContext,this.mouseX,this.mouseY),this.mapContext.add(_rectContext)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}else if(this.conf.widget&&-1===this.conf.widget.id&&this.conf.widget.dataOptions&&this.conf.widget.dataOptions.imagecardData){var _data3=this.conf.widget.dataOptions.imagecardData;if(_data3.options&&_data3.options.areas&&_data3.options.areas.length){var _step4,_iterator4=(0,createForOfIteratorHelper/* default */.Z)(_data3.options.areas);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _area2=_step4.value,_rectContext2={canvas:this.mapContext.canvas,x:_area2.x,y:_area2.y,width:_area2.width,height:_area2.height,linkType:_area2.link.type,url:_area2.link.url,dashboardId:_area2.link.dashboardId,reportId:_area2.link.reportId,alt:_area2.link.alt,target:_area2.link.target};imagemap/* default */.Z.initRect(_rectContext2,this.mouseX,this.mouseY),this.mapContext.add(_rectContext2)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}},removeSelectedRect:function(){this.mapContext.remove()},reset:function(){this.mapContext.reset()},loadDashboards:function(){if(this.module){var self=this;this.$http.get("/dashboardTree?moduleName="+this.module).then((function(response){self.dashboardList=response.data.dashboardFolders}))}},loadReports:function(){if(this.module){var self=this;api/* API */.bl.get("/v3/report/folders?moduleName="+this.module).then((function(response){response.error||(self.reportList=response.data?response.data.reportFolders:null)}))}},loadAssets:function(){if(this.module){var self=this,url="/asset/all";if(self.spaceId){var params="";params=params+"&filters="+encodeURIComponent(JSON.stringify({space:[{operatorId:38,value:[this.spaceId+""]}]})),params+="&moduleName=asset",params=params+"&includeParentFilter="+!0,url=url+"?"+params}this.$http.get(url).then((function(response){if(self.assetList=response.data.assets,self.editAssetMapping){var _step5,_iterator5=(0,createForOfIteratorHelper/* default */.Z)(self.editAssetMapping.areas);try{var _loop=function(){var area=_step5.value,asset=self.assetList.find((function(at){return at.id===area.link.assetId}));self.mapContext.assetMappingConfig.assetMap[area.link.assetId+""]={asset:asset}};for(_iterator5.s();!(_step5=_iterator5.n()).done;)_loop()}catch(err){_iterator5.e(err)}finally{_iterator5.f()}self.mapContext.redraw=!0}}))}}}},reusable_components_FImageEditorvue_type_script_lang_js=FImageEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(reusable_components_FImageEditorvue_type_script_lang_js,FImageEditorvue_type_template_id_6d4cceba_render,FImageEditorvue_type_template_id_6d4cceba_staticRenderFns,!1,null,null,null)
/* harmony default export */,FImageEditor=component.exports,FPhotoUploadervue_type_script_lang_js={props:["dialogVisible","module","widget","editwidget"],components:{FImageEditor:FImageEditor},data:function(){return{loading:!1}},methods:{closedialog:function(){this.$emit("update:dialogVisible",!1),this.$emit("input",!1)},onUpload:function(imageObj){var self=this;self.loading=!0;var formdata=new FormData;formdata.append("avatar",imageObj.file),self.$http.post("/widget/addPhoto",formdata).then((function(response){self.loading=!1,self.$emit("update:dialogVisible",!1);var respData={photoId:response.data.photoId,url:response.data.url,options:{imageMeta:imageObj.imageMeta,areas:imageObj.areas}};self.$emit("upload-done",respData),self.closeDialog=!0})).catch((function(error){self.$emit("upload-failed",error)}))},onUpdate:function(data){var self=this;self.loading=!0,self.$emit("update",data),self.closeDialog=!0}}},reusable_components_FPhotoUploadervue_type_script_lang_js=FPhotoUploadervue_type_script_lang_js,FPhotoUploader_component=(0,componentNormalizer/* default */.Z)(reusable_components_FPhotoUploadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FPhotoUploader=FPhotoUploader_component.exports},
/***/560274:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WidgetWrapper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/widgets/WidgetWrapper.vue?vue&type=template&id=64058f38&scoped=true
var BaseView_render,BaseView_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:_vm.visibilityChanged,once:!0},expression:"{\n    callback: visibilityChanged,\n    once: true,\n  }"}],staticClass:"widget-wrapper",class:[_vm.alwaysShowWidgetControls||_vm.isDropDownExpanded?"always-visible-widget-controls":"hover-visible-widget-controls",{"widget-wrapper-border":_vm.borderAroundWidget}]},[_vm.showHeader?_c("el-row",{staticClass:"widget-header",class:{"cursor-move":"edit"==_vm.viewOrEdit}},[_c("el-col",{staticClass:"title-input-container",attrs:{span:20}},[0==_vm.titleInEditMode?_c("div",{staticClass:"fc-widget-label ellipsis",on:{dblclick:_vm.editTitle}},[_vm._v(" "+_vm._s(_vm.title)+" ")]):_vm._e(),"edit"==_vm.viewOrEdit&&1==_vm.titleInEditMode?_c("el-input",{staticClass:"widget-wrapper-input ellipsis",attrs:{autofocus:!0,placeholder:"Widget title"},on:{blur:_vm.updateTitle},model:{value:_vm.title,callback:function($$v){_vm.title=$$v},expression:"title"}}):_vm._e()],1),_c("el-col",{staticClass:"widget-controls-container",attrs:{span:4}},[_c("div",{staticClass:"widget-controls mT1 row"},[_vm.showDatePickerInHeader?_c("div",{staticClass:"date-picker-portal"},[_c("portal-target",{attrs:{name:"widget-datepicker"+_vm.id}})],1):_vm._e(),_vm.showHelpText?_c("div",[_c("el-popover",{staticClass:"widget-info-container mR12",class:{"show-info-icon":_vm.isDropDownExpanded},attrs:{"popper-class":"widget-info-popper",placement:"bottom",trigger:"click"},model:{value:_vm.isDropDownExpanded,callback:function($$v){_vm.isDropDownExpanded=$$v},expression:"isDropDownExpanded"}},[_c("div",{staticClass:"widget-help-text  space-preline break-normal pT5 pB5 pL10 pR10"},[_vm._v(" "+_vm._s(_vm.widget.helpText)+" ")]),_c("i",{staticClass:"pointer el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1):_vm._e(),_vm.showExpand?_c("div",{staticClass:"mT1"},["view"==_vm.viewOrEdit?_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,animation:"perspective"},expression:"{ arrow: true, animation: 'perspective' }"}],staticClass:"fa fa-expand expander",attrs:{title:_vm.$t("common._common.expand"),"data-position":"top"},on:{click:_vm.expandReport}}):_vm._e()]):_vm._e(),_vm.showDropDown?_c("div",{attrs:{span:8}},[_c("drop-down",{attrs:{isDropDownExpanded:_vm.isDropDownExpanded,options:_vm.options,placement:"bottom",item:_vm.item},on:{"update:isDropDownExpanded":function($event){_vm.isDropDownExpanded=$event},"update:is-drop-down-expanded":function($event){_vm.isDropDownExpanded=$event}},scopedSlots:_vm._u([{key:"icon",fn:function(){return[_c("i",{staticClass:"pointer fc-widget-moreicon-vertical fa fa-ellipsis-v"})]},proxy:!0}],null,!1,1831663708)})],1):_vm._e()])])],1):_c("div",{staticClass:"floating-controls"},[_c("div",{staticClass:"row"},[_c("div",[_vm.showHelpText?_c("el-popover",{staticClass:"widget-info-container mT6",class:{"show-info-icon":_vm.isInfoIconPopOverOpen},attrs:{"popper-class":"widget-info-popper",placement:"bottom",trigger:"click"},model:{value:_vm.isDropDownExpanded,callback:function($$v){_vm.isDropDownExpanded=$$v},expression:"isDropDownExpanded"}},[_c("div",{staticClass:"widget-help-text  space-preline break-normal pT5 pB5 pL10 pR10"},[_vm._v(" "+_vm._s(_vm.widget.helpText)+" ")]),_c("i",{staticClass:"pointer mR5 el-icon-info",attrs:{slot:"reference"},slot:"reference"})]):_vm._e()],1),_c("div",[_vm.showDropDown&&!_vm.showHeader?_c("drop-down",{attrs:{isDropDownExpanded:_vm.isDropDownExpanded,options:_vm.options,item:_vm.item},on:{"update:isDropDownExpanded":function($event){_vm.isDropDownExpanded=$event},"update:is-drop-down-expanded":function($event){_vm.isDropDownExpanded=$event}},scopedSlots:_vm._u([{key:"icon",fn:function(){return[_c("i",{staticClass:"pointer el-icon-more more-icon",attrs:{slot:"reference"},slot:"reference"})]},proxy:!0}],null,!1,1496330319)}):_vm._e()],1)])]),_vm.showHeader?_c("div",{staticClass:"horizontal-rule"}):_vm._e(),_c("div",{staticClass:"widget-body"},[_c(_vm.widgetType,{ref:"component",tag:"component",attrs:{loadImmediately:_vm.loadImmediately,dbFilterJson:_vm.dbFilterJson,viewOrEdit:_vm.viewOrEdit,id:_vm.id,item:_vm.item,hideTimelineFilterInsideWidget:_vm.hideTimelineFilterInsideWidget,componentVisibleInViewPort:_vm.componentVisibleInViewPort,widgetBodyDimension:_vm.widgetBodyDimension,updateWidget:_vm.updateWidget,printMode:_vm.printMode}})],1),_vm.helpTextDialog?_c("widget-help-text-config",{attrs:{visibility:_vm.helpTextDialog,widget:_vm.widget},on:{"update:visibility":function($event){_vm.helpTextDialog=$event},helpTextChanged:_vm.updateHelpText}}):_vm._e()],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),slicedToArray=__webpack_require__(554621),KpiMutiLayoutvue_type_template_id_8f62f0a0_render=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(634338),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.layout?_c(_vm.layout,{ref:"kpicards",tag:"component",attrs:{test:"test",widget:_vm.config?_vm.config.widget:null,config:_vm.config?Object.assign({},_vm.config,_vm.widgetMeta):null,currentDashboard:_vm.config?_vm.config.currentDashboard:null}}):_vm._e()}),KpiMutiLayoutvue_type_template_id_8f62f0a0_staticRenderFns=[],KpiMutiLayoutvue_type_script_lang_js=(__webpack_require__(821694),__webpack_require__(76265),{props:{item:{type:Object,required:!0}},components:{kpiCard:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(86020)]).then(__webpack_require__.bind(__webpack_require__,486020))},altayerFcuCard:function(){return __webpack_require__.e(/* import() */11591).then(__webpack_require__.bind(__webpack_require__,311591))},profilemini:function(){return __webpack_require__.e(/* import() */52721).then(__webpack_require__.bind(__webpack_require__,252721))},energycostmini:function(){return __webpack_require__.e(/* import() */67986).then(__webpack_require__.bind(__webpack_require__,467986))},carbonmini:function(){return __webpack_require__.e(/* import() */78632).then(__webpack_require__.bind(__webpack_require__,278632))},targetmeter:function(){return __webpack_require__.e(/* import() */24002).then(__webpack_require__.bind(__webpack_require__,824002))},controlCommandmini:function(){return __webpack_require__.e(/* import() */37898).then(__webpack_require__.bind(__webpack_require__,447010))},kpitargetCard:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(34377)]).then(__webpack_require__.bind(__webpack_require__,734377))},smartmap:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(2372)]).then(__webpack_require__.bind(__webpack_require__,502372))},multiTrend:function(){return __webpack_require__.e(/* import() */25803).then(__webpack_require__.bind(__webpack_require__,425803))},smartenergymap:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(50788)]).then(__webpack_require__.bind(__webpack_require__,850788))},radialCard:function(){return __webpack_require__.e(/* import() */85025).then(__webpack_require__.bind(__webpack_require__,485025))},linearCard:function(){return __webpack_require__.e(/* import() */38703).then(__webpack_require__.bind(__webpack_require__,138703))},pmreadingswidget:function(){return __webpack_require__.e(/* import() */24622).then(__webpack_require__.bind(__webpack_require__,124622))},smartnewmap:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(39947)]).then(__webpack_require__.bind(__webpack_require__,939947))},smarttable:function(){return __webpack_require__.e(/* import() */30646).then(__webpack_require__.bind(__webpack_require__,430646))},smartcard:function(){return __webpack_require__.e(/* import() */87602).then(__webpack_require__.bind(__webpack_require__,987602))},smarttablewrapper:function(){return __webpack_require__.e(/* import() */56800).then(__webpack_require__.bind(__webpack_require__,856800))}},computed:{config:function(){var widget=this.item.widget;return{widget:widget}},layout:function(){return this.config&&this.config.widget.dataOptions&&this.config.widget.dataOptions.paramsJson&&this.config.widget.dataOptions.paramsJson.key?this.config.widget.dataOptions.paramsJson.key:"kpiCard"},widgetMeta:function(){return this.$el?{widgetHeight:this.$el.clientHeight,widgetWidth:this.$el.clientWidth}:{widgetHeight:null,widgetWidth:null}}},methods:{refresh:function(){this.$refs["kpicards"]&&this.$refs["kpicards"].refresh&&this.$refs["kpicards"].refresh()}}}),widgets_KpiMutiLayoutvue_type_script_lang_js=KpiMutiLayoutvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(widgets_KpiMutiLayoutvue_type_script_lang_js,KpiMutiLayoutvue_type_template_id_8f62f0a0_render,KpiMutiLayoutvue_type_template_id_8f62f0a0_staticRenderFns,!1,null,null,null)
/* harmony default export */,KpiMutiLayout=component.exports,NewDatePicker=__webpack_require__(372256),FListWidgetvue_type_template_id_47a7ea87_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("spinner",{staticStyle:{},attrs:{show:_vm.loading,size:"80"}}):_c("div",{staticClass:"row f-list-view-widget"},[_c("div",{staticClass:"fc-report-pdf-heading list-print-header hide"},[_vm._v(" "+_vm._s(_vm.config.widget.header.title)+" ")]),_c("div",{staticClass:"col table-scroll fList-widget-page"},[_c("table",{ref:"f-list-table",class:["fc-list-view-table",_vm.zoomClass]},[!_vm.printMode||_vm.records&&_vm.records.length?_c("thead",[_c("tr",_vm._l(_vm.viewColumns,(function(header,index){return _c("th",{key:index,staticClass:"text-left uppercase fc-chart-table-header"},[_vm._v(" "+_vm._s(header.displayName)+" ")])})),0)]):_vm._e(),_vm.recordsLoading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.recordsLoading,size:"80"}})],1)])]):_c("tbody",[_vm.records&&_vm.records.length?_vm._e():_c("tr",{staticClass:"nowotd"},[_c("td",{attrs:{colspan:"100%"}},[_c("div",{staticClass:"row container"},[_c("div",{staticClass:"justify-center nowo no-table-data"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/workorder",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.no_data_available"))+" ")])],1)])])]),_vm._l(_vm.records,(function(row,index){return _vm.$mobile?_vm._e():_c("tr",{key:index,staticClass:"tablerow list-widget-row",attrs:{tag:"tr"}},[_vm._l(_vm.viewColumns,(function(col,key){return row&&null!==row?_c("td",{key:key,staticClass:"fc-chart-table-body"},[["totalEnergyConsumptionDelta","totalEnergyConsumption"].includes(col.name)&&row.readings?_c("div",{on:{click:function($event){_vm.$router.push({path:_vm.getSummaryUrl(row)})}}},[_vm._v(" "+_vm._s(Math.round(row.readings[col.name]))+" ")]):col.field&&_vm.isDecimalField(col.field)&&row[col.name]?_c("div",[_vm._v(" "+_vm._s(_vm.decimalValue(row[col.name]))+" ")]):col.field&&_vm.isDecimalField(col.field)&&row.data&&row.data[col.name]?_c("div",[_vm._v(" "+_vm._s(_vm.decimalValue(row.data[col.name]))+" ")]):["subject"].includes(col.name)?_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticStyle:{width:"210px"},attrs:{title:_vm.getColumnDisplayValue(col,row)||"---"},on:{click:function($event){_vm.$router.push({path:_vm.getSummaryUrl(row)})}}},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(col,row)||"---")+" ")]):row.readings&&row.readings[col.name]?_c("div",{on:{click:function($event){_vm.$router.push({path:_vm.getSummaryUrl(row)})}}},[_vm._v(" "+_vm._s(row.readings[col.name])+" ")]):"parentId"===col.name?_c("div",{on:{click:function($event){_vm.$router.push({path:_vm.getSummaryUrl(row)})}}},[_vm._v(" "+_vm._s(_vm.getIDDisplayValue(row))+" ")]):col.field&&"SEVERITY_ID"===col.field.columnName&&row.severity?_c("div",{staticStyle:{"max-width":"72px",overflow:"hidden"}},[_c("div",{staticClass:"q-item-label uppercase severityTag",style:{"background-color":_vm.getAlarmSeverity(row.severity.id).color,"max-width":"90px"}},[_vm._v(" "+_vm._s(row.severity.id?_vm.getAlarmSeverity(row.severity.id).displayName:"---")+" ")])]):"attachmentPreview"===col.name?_c("div",{staticClass:"text-align-center"},[_c("f-list-attachment-preview",{attrs:{module:_vm.attachmentsModuleMap[_vm.moduleName],record:row}})],1):col.field&&"IMAGE"===col.field.displayType?_c("div",[_c("f-image-preview",{attrs:{file:_vm.$helpers.getFileObjectFromRecord(row,col)}})],1):col.field&&"FILE"===col.field.dataTypeEnum?_c("div",[row[col.field.name+"FileName"]?_c("a",{attrs:{href:row[col.field.name+"DownloadUrl"]}},[_vm._v(" "+_vm._s(row[col.field.name+"FileName"])+" ")]):_c("span",[_vm._v("--")])]):col.field&&"ACKNOWLEDGED_BY"===col.field.columnName?_c("div",{},[!row.acknowledged&&_vm.isActiveAlarm(row)?_c("q-btn",{staticClass:"uppercase fia-alert-btn",attrs:{color:"secondary",small:"",outline:""},on:{click:function($event){return _vm.acknowledgeAlarm({row:row,occurrence:{id:row&&row.lastOccurrenceId?row.lastOccurrenceId:null},acknowledged:!0,acknowledgedBy:_vm.$account.user},index)}}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.acknowledge")))]):_vm.isActiveAlarm(row)?_c("div",{staticClass:"ackhover-row"},[_c("div",{staticClass:"hover-row"},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(col,row)||"")+" ")])]):_c("span",{staticClass:"q-item-label"})],1):_c("div",{on:{click:function($event){_vm.$router.push({path:_vm.getSummaryUrl(row)})}}},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(col,row)||"---")+" ")])]):_vm._e()})),_vm._l(_vm.viewColumns,(function(col,key){return col.field&&"ACKNOWLEDGED_BY"===col.field.columnName&&row&&null!==row&&_vm.$helpers.isLicenseEnabled("NEW_ALARMS")?_c("td",{key:key+"i",staticClass:"fc-chart-table-body"},[_c("div",{staticClass:"text-align-center"},[_c("div",{staticStyle:{float:"left"},on:{click:function($event){return $event.stopPropagation(),_vm.openComment(row)}}},[_c("span",[_c("img",{staticStyle:{width:"14px",height:"12.8px"},attrs:{src:__webpack_require__(293656)}})]),row.hasOwnProperty("noOfNotes")?_c("span",{staticClass:"width5px q-item-sublabel comment-counnt-txt"},[_vm._v(_vm._s(row.noOfNotes&&-1===row.noOfNotes||0===row.noOfNotes?"0":row.noOfNotes))]):_vm._e()])])]):_vm._e()}))],2)})),_vm._l(_vm.records,(function(row,index){return _vm.$mobile?_c("tr",{key:index,staticClass:"tablerow list-widget-row"},_vm._l(_vm.viewColumns,(function(col,key){return row&&null!==row?_c("td",{key:key,staticClass:"fc-chart-table-body"},[["totalEnergyConsumptionDelta","totalEnergyConsumption"].includes(col.name)&&row.readings?_c("div",[_vm._v(" "+_vm._s(Math.round(row.readings[col.name]))+" ")]):["subject"].includes(col.name)?_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.getColumnDisplayValue(col,row)||"---"}},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(col,row)||"---")+" ")]):row.readings&&row.readings[col.name]?_c("div",[_vm._v(" "+_vm._s(row.readings[col.name])+" ")]):"parentId"===col.name?_c("div",[_vm._v(" "+_vm._s(row.parent?row.parent.name:"---")+" ")]):_c("div",[_vm._v(" "+_vm._s(_vm.getIDDisplayValue(row))+" ")])]):_vm._e()})),0):_vm._e()}))],2)])]),_vm.selectedRecord&&_vm.$helpers.isLicenseEnabled("NEW_ALARMS")?_c("outside-click",{staticClass:"comment-dialog",staticStyle:{top:"0px",position:"fixed",height:"100%"},attrs:{visibility:_vm.showcomment},on:{"update:visibility":function($event){_vm.showcomment=$event}}},[_c("div",[_c("div",{staticClass:"comment-dialog-header"},[_c("h3",{staticClass:"comment-dialog-heading",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.comments"))+" "),_c("span",[_vm._v(_vm._s(_vm.selectedRecord.noOfNotes&&_vm.selectedRecord.noOfNotes>0?"("+_vm.selectedRecord.noOfNotes+")":""))])]),_c("div",{staticClass:"comment-close"},[_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Close",placement:"bottom"}},[_c("i",{staticClass:"el-icon-close",attrs:{"aria-hidden":"true"},on:{click:function($event){_vm.showcomment=!1}}})])],1)]),_c("div",{staticClass:"comment-dialog-body widget-comment-dialog-body"},[_c("comments",{attrs:{module:_vm.selectedRecord.moduleName?_vm.selectedRecord.moduleName:"basealarmnotes",parentModule:"basealarm",record:_vm.selectedRecord,notify:!1}})],1)])]):_vm._e()],1)},FListWidgetvue_type_template_id_47a7ea87_staticRenderFns=[],defineProperty=__webpack_require__(482482),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(897389),__webpack_require__(947522),__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(990260)),lodash=__webpack_require__(496486),ViewMixin=__webpack_require__(453877),ListAttachmentPreview=__webpack_require__(434579),Comments2=__webpack_require__(487565),quasar_esm=__webpack_require__(641358),OutsideClick=__webpack_require__(21864),ListImagePreview=__webpack_require__(526283),vuex_esm=__webpack_require__(420629),router=__webpack_require__(329435),api=__webpack_require__(32284),BaseWidgetMixin=__webpack_require__(107545),utils_field=__webpack_require__(815872),FListWidgetvue_type_script_lang_js={mixins:[ViewMixin/* default */.Z,BaseWidgetMixin/* default */.Z],components:{FListAttachmentPreview:ListAttachmentPreview/* default */.Z,FImagePreview:ListImagePreview/* default */.Z,QBtn:quasar_esm/* QBtn */.OV,Comments:Comments2/* default */.Z,OutsideClick:OutsideClick/* default */.Z},props:{item:{type:Object,required:!0},printMode:{type:Boolean,default:!1},componentVisibleInViewPort:{type:Boolean,default:!0},updateWidget:{type:Function}},data:function(){return{dbFilterJson:{},dbTimelineFilter:{},loading:!0,showcomment:!1,selectedRecord:null,viewDetail:null,v2apiUrl:"",isDecimalField:utils_field/* isDecimalField */.No,recordsLoading:!0,records:null,modulesList:[],modules:[{label:"Maintenance",moduleName:"workorder",license:"MAINTENANCE"},{label:"Fault detection and diagnostics",moduleName:"alarm",license:"ALARMS"},{label:"Building performance",moduleName:"energydata",license:"ENERGY"},{label:"Asset",moduleName:"asset",license:"SPACE_ASSET"},{label:"Inventory Request",moduleName:"inventoryrequest",api:"v2",list:[],expand:!1,license:"INVENTORY"},{label:"Item",moduleName:"item",api:"v2",list:[],expand:!1,license:"INVENTORY"},{label:"Contracts",moduleName:"contracts",api:"v2",list:[],expand:!1,license:"INVENTORY"},{label:"Purchaseorder",moduleName:"purchaseorder",api:"v2",list:[],expand:!1,license:"PURCHASE"},{label:"Purchaserequest",moduleName:"purchaserequest",api:"v2",list:[],expand:!1,license:"PURCHASE"},{label:"Visitor",moduleName:"visitor",api:"v2",list:[],expand:!1,license:"VISITOR"},{label:"Visits",moduleName:"visitorlog",api:"v2",list:[],expand:!1,license:"VISITOR"},{label:"Visitor Invites",moduleName:"invitevisitor",api:"v2",list:[],expand:!1,license:"VISITOR"},{label:"Watchlist",moduleName:"watchlist",api:"v2",list:[],expand:!1,license:"VISITOR"},{label:"Contacts",moduleName:"contact",api:"v2",list:[],expand:!1,license:"VISITOR"},{label:"Tenants",moduleName:"tenant",api:"v2",list:[],expand:!1,license:"TENANTS"},{label:"Vendors",moduleName:"vendors",api:"v2",list:[],expand:!1,license:"VENDOR"}],attachmentsModuleMap:{workorder:"ticketattachments"},zoomClass:null}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({id:function(){var id=this.item.id;return id},config:function(){var widget=this.widget;return{widget:widget}}},(0,vuex_esm/* mapGetters */.Se)(["getAlarmSeverity"])),{},{buildingId:function(){return this.config&&this.config.currentDashboard?this.config.currentDashboard.buildingId:this.$route.params.buildingid?this.$route.params.buildingid:null},isCustomeModule:function(){var _this=this;if(this.modulesList.length){var filteredModule=this.modulesList.find((function(rt){return rt.name===_this.moduleName}));if(filteredModule&&filteredModule.custom)return!0}return!1},widget:function(){return this.item.widget},widgetConfig:function(){var _ref=null!==this&&void 0!==this?this:{},id=_ref.id;return{id:id,minW:25,maxW:96,minH:10,maxH:50,showHeader:!0,showExpand:!1,noResize:!1,showDropDown:!0,editMenu:[],borderAroundWidget:!0,viewMenu:[]}},reportFilters:function(){return this.$route.query.filters?this.$route.query.filters:null},moduleName:function(){var moduleName=this.$getProperty(this.config,"widget.dataOptions.moduleName",null);return moduleName||"workorder"},viewName:function(){var _this$viewDetail;return null!==(_this$viewDetail=this.viewDetail)&&void 0!==_this$viewDetail&&_this$viewDetail.name?this.viewDetail.name:"all"}}),created:function(){this.initWidget(this.widgetConfig)},mounted:function(){this.$store.dispatch("loadTicketStatus",this.moduleName),this.initData(),this.getAllModules()},watch:{componentVisibleInViewPort:function(_componentVisibleInViewPort){_componentVisibleInViewPort&&this.initData()},"config.widget.dataOptions.viewName":function(newVal,oldVal){this.initData()},buildingId:{handler:function(newData,oldData){this.initData()}},reportFilters:{handler:function(newData,oldData){this.initData()}},dbFilterJson:function(newValue,oldValue){(0,lodash.isEqual)(newValue,oldValue)||this.initData()},dbTimelineFilter:function(newValue,oldValue){(0,lodash.isEqual)(newValue,oldValue)||this.initData()}},methods:{decimalValue:function(value){return(0,validation/* isNumber */.hj)(value)?parseFloat(value.toFixed(2)):"---"},getAllModules:function(){var _this2=this;api/* API */.bl.get("v2/automation/module").then((function(_ref2){var data=_ref2.data;_this2.modulesList=data.modules,_this2.modulesList.forEach((function(rt){_this2.$set(rt,"id",rt.moduleId)})),_this2.modulesList.push({displayName:"Building performance",name:"energydata",id:-1}),_this2.modulesList.push({displayName:"Fault detection and diagnostics",name:"alarm",id:-2})}))},openComment:function(row){row&&(this.selectedRecord=row,this.showcomment=!0)},getAckDetails:function(col,row){return col&&row?row:"xv"},refresh:function(){this.initData()},isActiveAlarm:function(alarm){return"Clear"!==this.getAlarmSeverity(alarm.severity.id).severity},acknowledgeAlarm:function(updateObj,index){var self=this,data={ids:[updateObj.occurrence.id],alarmOccurrence:{acknowledged:!0}};this.$http.post("/v2/alarm/updateOccurrence",data).then((function(response){response&&self.updateAck(index)}))},updateAck:function(index){this.records[index].acknowledged=!0,this.records[index].acknowledgedTime=new Date,this.records[index].acknowledgedBy=this.$account.user},getIDDisplayValue:function(row){return row.parent&&row.parent.name?row.parent.name:row.id?"#"+row.id:"---"},initData:function(){
//when dashboard in lazy mode and widget ain't visible dont load
if(0!=this.componentVisibleInViewPort){var self=this;self.loading=!0;var v2api=!1;"alarm"===self.config.widget.dataOptions.moduleName&&this.$helpers.isLicenseEnabled("NEW_ALARMS")&&(self.config.widget.dataOptions.moduleName="newreadingalarm");var url="";this.modules.find((function(rt){return rt.moduleName===self.config.widget.dataOptions.moduleName}))&&this.modules.find((function(rt){return rt.moduleName===self.config.widget.dataOptions.moduleName})).api&&(v2api=!0,self.v2apiUrl="/v2/"+self.config.widget.dataOptions.moduleName+"/view/"+self.config.widget.dataOptions.viewName),url="/view/"+self.config.widget.dataOptions.viewName+"?moduleName="+self.config.widget.dataOptions.moduleName,self.$http.get(url).then((function(response){if(self.viewDetail=response.data,self.printMode){var columns=self.viewDetail.fields.length;self.zoomClass=columns>10?"zoom40":columns>7?"zoom50":"zoom90"}self.loading=!1,self.initRecords(v2api,self.v2apiUrl)})).catch((function(){self.loading=!1}))}},initRecords:function(v2api,urlx){var self=this;self.recordsLoading=!0;var url="";"alarm"!==self.config.widget.dataOptions.moduleName&&"newreadingalarm"!==self.config.widget.dataOptions.moduleName||!this.$helpers.isLicenseEnabled("NEW_ALARMS")||(url+="v2/"),"newreadingalarm"===self.config.widget.dataOptions.moduleName&&this.$helpers.isLicenseEnabled("NEW_ALARMS")?url+="readingalarms/":url+=self.config.widget.dataOptions.moduleName+"/","alarm"!==self.config.widget.dataOptions.moduleName&&"newreadingalarm"!==self.config.widget.dataOptions.moduleName||!this.$helpers.isLicenseEnabled("NEW_ALARMS")||(url+="view/"),this.modules.find((function(rt){return rt.moduleName===self.config.widget.dataOptions.moduleName}))?(url+=self.config.widget.dataOptions.viewName,//v1 api
url+="?page=1&perPage=50&includeParentFilter=true"):url="v2/module/data/list?page=1&perPage=50&moduleName=".concat(self.config.widget.dataOptions.moduleName,"&viewName=").concat(self.config.widget.dataOptions.viewName),self.reportFilters&&(
//no longer used
url+="&filters="+encodeURIComponent(self.reportFilters));var dbFilterJson=self.dbFilterJson,dbTimelineFilter=self.dbTimelineFilter;if(!(0,validation/* isEmpty */.xb)(dbFilterJson)||!(0,validation/* isEmpty */.xb)(dbTimelineFilter)){
//for list widget ,combine dbuser and dbtimeline filters
var timelineFilterObj=null;if(!(0,validation/* isEmpty */.xb)(dbTimelineFilter)){var startTime=dbTimelineFilter.startTime,endTime=dbTimelineFilter.endTime,dateField=dbTimelineFilter.dateField;timelineFilterObj=(0,defineProperty/* default */.Z)({},dateField,{operatorId:20,value:[String(startTime),String(endTime)]})}var filterObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},dbFilterJson),timelineFilterObj);
// '?' already appended by now
url+="&filters="+encodeURIComponent(JSON.stringify(filterObj))}if(self.buildingId){var filters={resource:{operatorId:38,value:[self.buildingId+""]}};url+="&filters="+encodeURIComponent(JSON.stringify(filters))}urlx&&(url=urlx),self.$http.get(url).then((function(response){self.modules.find((function(rt){return rt.moduleName===self.config.widget.dataOptions.moduleName}))?"alarm"!==self.config.widget.dataOptions.moduleName&&"newreadingalarm"!==self.config.widget.dataOptions.moduleName||!self.$helpers.isLicenseEnabled("NEW_ALARMS")?(self.records=v2api?response.data.result[Object.keys(response.data.result)[0]]:response.data[Object.keys(response.data)[0]],self.recordsLoading=!1):(self.records=response.data.result[Object.keys(response.data.result)[0]],self.recordsLoading=!1):(self.records=response.data.result.moduleDatas,self.recordsLoading=!1),self.$nextTick((function(){var height=self.$refs["f-list-table"].scrollHeight+90;self.$emit("resizeWidget",height)})),self.printMode&&self.$nextTick((function(){
// Spread the entire wiget height and width wise when puppeteer tries to print the dashboard.
var height=(self.$refs["f-list-table"].scrollHeight+100)/15,clonedWidget=(0,lodash.cloneDeep)(self.item);clonedWidget.h=parseInt(Math.ceil(height)),self.updateWidget(clonedWidget)}))})).catch((function(){self.recordsLoading=!1}))},contractTypeEnumVsRoute:function(contractEnum){if(!(contractEnum>0))return null;switch(contractEnum){case 1:return"purchasecontracts";case 2:return"labourcontracts";case 3:return"warrantycontracts";case 4:return"rentalleasecontracts"}},getSummaryUrl:function(row){var id=row.id;if((0,router/* isWebTabsEnabled */.tj)()){var _ref3=this.config.widget.dataOptions||{},moduleName=_ref3.moduleName,viewName=_ref3.viewName,viewname="newreadingalarm"===moduleName?viewName:"all",_ref4=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref4.name;if(name)return this.$router.resolve({name:name,params:{viewname:viewname,id:id}}).href}else{if(this.isCustomeModule)return"/app/ca/modules/".concat(this.moduleName,"/").concat(this.viewName,"/").concat(id,"/summary");if("workorder"===this.config.widget.dataOptions.moduleName)return"/app/wo/orders/summary/"+id;if("alarm"===this.config.widget.dataOptions.moduleName)return"/app/fa/faults/summary/"+id;if("newreadingalarm"===this.config.widget.dataOptions.moduleName)return"/app/fa/faults/"+this.config.widget.dataOptions.viewName+"/newsummary/"+id;if("asset"===this.config.widget.dataOptions.moduleName)return"/app/at/assets/all/"+id+"/overview";if("item"===this.config.widget.dataOptions.moduleName)return"/app/inventory/item/all/".concat(id,"/summary");if("inventoryrequest"===this.config.widget.dataOptions.moduleName)return"/app/wo/approvals/ir/all/summary/"+id;if("contracts"===this.config.widget.dataOptions.moduleName)return"/app/ct/"+this.contractTypeEnumVsRoute(row.contractType)+"/all/summary/"+id;if("purchaseorder"===this.config.widget.dataOptions.moduleName)return"/app/purchase/po/all/summary/"+id;if("purchaserequest"===this.config.widget.dataOptions.moduleName)return"/app/purchase/pr/all/summary/"+id;if("visitor"===this.config.widget.dataOptions.moduleName)return"/app/purchase/pr/all/summary/"+id;if("visitorlog"===this.config.widget.dataOptions.moduleName)return"/app/vi/visits/all/"+(row.visitor||{}).id+"/overview";if("tenant"===this.config.widget.dataOptions.moduleName)return"/app/tm/tenants/all/"+id+"/overview";if("vendors"===this.config.widget.dataOptions.moduleName)return"/app/vendor/vendors/all/summary/"+id;if("invitevisitor"===this.config.widget.dataOptions.moduleName)return"/app/vi/invites/all/summary/"+id;if("watchlist"===this.config.widget.dataOptions.moduleName)return"/app/vi/watchlist/all/summary/"+id;if("contact"===this.config.widget.dataOptions.moduleName)return"/app/home/contact/all/summary/"+id;if("insurance"===this.config.widget.dataOptions.moduleName)return"/app/vendor/insurance/all/summary/"+id}}}},widgets_FListWidgetvue_type_script_lang_js=FListWidgetvue_type_script_lang_js,FListWidget_component=(0,componentNormalizer/* default */.Z)(widgets_FListWidgetvue_type_script_lang_js,FListWidgetvue_type_template_id_47a7ea87_render,FListWidgetvue_type_template_id_47a7ea87_staticRenderFns,!1,null,null,null)
/* harmony default export */,FListWidget=FListWidget_component.exports,AnalyticalReportWidgetvue_type_template_id_0214c112_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("FNewReport",{ref:"FNewReport",attrs:{item:_vm.item,config:_vm.config,ruleInfo:_vm.ruleInfo,dbTimelineFilter:_vm.dbTimelineFilter,dbFilterJson:_vm.dbFilterJson,loadImmediately:_vm.loadImmediately,hideTimelineFilterInsideWidget:_vm.hideTimelineFilterInsideWidget,componentVisibleInViewPort:_vm.componentVisibleInViewPort,widgetBodyDimension:_vm.widgetBodyDimension,updateWidget:_vm.updateWidget,viewOrEdit:_vm.viewOrEdit},on:{reportLoaded:_vm.reportLoaded}}),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_vm.showDashboardFilterWidgetConfigDialog?_c("dashboard-filter-widget-config-dialog",{attrs:{visibility:_vm.showDashboardFilterWidgetConfigDialog,widget:_vm.widget},on:{"update:visibility":function($event){_vm.showDashboardFilterWidgetConfigDialog=$event},widgetFilterConfigChange:_vm.saveWidgetFilterSettings}}):_vm._e(),_c("el-dialog",{attrs:{title:"Configure widget",width:"50%",visible:_vm.showTemplateConfigDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.showTemplateConfigDialog=$event}}},[_c("div",{staticClass:"height200"},[_c("div",[_c("el-radio-group",{model:{value:_vm.templateConfig.showOrHide,callback:function($$v){_vm.$set(_vm.templateConfig,"showOrHide",$$v)},expression:"templateConfig.showOrHide"}},[_c("el-radio",{attrs:{label:1}},[_vm._v(_vm._s(_vm.$t("panel.card.show_filter")))]),_c("el-radio",{attrs:{label:2}},[_vm._v(_vm._s(_vm.$t("panel.card.hide_filter")))])],1)],1),2===_vm.templateConfig.showOrHide?_c("div",{staticClass:"mT30"},[_c("div",[_vm._v(" "+_vm._s(_vm.$t("panel.card.pick_def_asset"))+" ")]),_c("div",{staticClass:"mT10"},[_c("el-select",{staticClass:"fc-input-full-border2",attrs:{filterable:""},model:{value:_vm.templateConfig.choosenResource,callback:function($$v){_vm.$set(_vm.templateConfig,"choosenResource",$$v)},expression:"templateConfig.choosenResource"}},_vm._l(_vm.templateConfig.assets,(function(resource,resourceIdx){return _c("el-option",{key:resourceIdx,attrs:{label:resource.name,value:resource.id}})})),1)],1)]):_vm._e()]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("panel.card.cancel__")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.configureWidget}},[_vm._v(_vm._s(_vm.$t("panel.card.configure")))])],1)])],1)},AnalyticalReportWidgetvue_type_template_id_0214c112_scoped_true_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),createForOfIteratorHelper=__webpack_require__(566347),asyncToGenerator=__webpack_require__(548534),DashboardFilterWidgetConfigDialog=(__webpack_require__(879288),__webpack_require__(976801),__webpack_require__(146040)),element_ui_common=__webpack_require__(364720),FNewReportvue_type_template_id_4b8aed8b_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 mobile-report fnew-report-page",class:{scrollable:_vm.config&&_vm.config.widget&&_vm.reportObj&&_vm.reportObj.options&&!1===_vm.reportObj.options.settings.chart,"scatter-main-con":_vm.isScatter}},[_vm.showHeadingOnlyForPdf&&_vm.pdfloading?_c("div",{staticClass:"text-center label-txt-black4 bold pB20"},[_vm.excludeParamsObj.title&&_vm.excludeParamsObj.logo?_vm._e():_c("div",{staticClass:"report-pdf-header",staticStyle:{overflow:"hidden"}},[_vm.$org.logoUrl?_c("div",{staticClass:"fc-report-cus-logo",class:{"logo-visible":_vm.excludeParamsObj.logo}},[_c("img",{staticStyle:{width:"100px",height:"50px"},attrs:{src:_vm.$org.logoUrl}})]):_c("div",{staticClass:"fc-logo-report",class:{"logo-visible":_vm.excludeParamsObj.logo}},[_vm.showLogo?_c("img",{attrs:{src:_vm.getFacilioLogoURL}}):_vm._e()]),_vm.excludeParamsObj.title?_vm._e():_c("div",{staticClass:"f18 fc-widget-label ellipsis max-width350px"},[_vm._v(" "+_vm._s(_vm.resultObj.report.name||"AnalyticalReport")+" ")])]),_vm.showPrintDetails||_vm.printView?_c("div",{staticClass:"fc-report-author-sec pdf-text-left pdf-margin-top"},[_vm.excludeParamsObj.description?_vm._e():_c("div",[_c("div",{staticClass:"fc-report-author-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.generated_on"))+" "),_c("span",{staticClass:"fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(_vm.formatDate())+" ")])]),_c("div",{staticClass:"fc-report-author-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.generated_by"))+" "),_c("span",{staticClass:"fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(_vm.$account.user.name)+" ")])])]),_vm.excludeParamsObj.filter?_vm._e():_c("div",[_c("div",{staticClass:"fc-report-author-txt flex-middle"},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.date_range")+":")+" "),_c("div",{staticClass:"f9 fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(_vm.getDateRangeString)+" ")])]),_vm.isFilterApplied?_c("div",{staticClass:"fc-report-author-txt"},[_vm._v(" "+_vm._s(_vm.pdfFilter+" :")+" "),_c("span",{staticClass:"fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(" "+_vm.displayName)+" ")])]):_vm._e()])]):_vm._e()]):_vm._e(),_c("div",{staticClass:"datefilter-hide-overlay"}),_c("div",{staticStyle:{"text-align":"center"}},["undefined"!==typeof _vm.config&&_vm.widgetDatePicker?_c("portal",{staticClass:"tabulardata-datepicker",attrs:{to:"widget-datepicker"+_vm.config.widget.id,slim:""}},[_vm.dateFilter?_c("new-date-picker",{key:_vm.datePickerCompKey,staticClass:"filter-field date-filter-new-report inline",class:{"date-picker-edit-mode":"edit"==_vm.viewOrEdit},attrs:{zone:_vm.$timezone,dateObj:_vm.dateFilter},on:{date:_vm.setDateFilter}}):_vm._e()],1):_vm.datePickerTarget?_c("portal",{staticClass:"tabulardata-datepicker",attrs:{to:"widget-datepicker"+_vm.datePickerTarget,slim:""}},[!_vm.hideTimelineFilterInsideWidget&&_vm.dateFilter?_c("new-date-picker",{key:_vm.datePickerCompKey,staticClass:"filter-field date-filter-comp-asset-summary inline",attrs:{zone:_vm.$timezone,dateObj:_vm.dateFilter},on:{date:_vm.setDateFilter}}):_vm._e()],1):[!_vm.hideTimelineFilterInsideWidget&&_vm.dateFilter?_c("new-date-picker",{key:_vm.datePickerCompKey,staticClass:"filter-field date-filter-new-report inline",class:{"date-picker-edit-mode":"edit"==_vm.viewOrEdit},attrs:{zone:_vm.$timezone,dateObj:_vm.dateFilter},on:{date:_vm.setDateFilter}}):_vm._e()],_vm.reportObj&&!0===_vm.reportObj.options.settings.timeperiod&&_vm.showTimePeriod&&!_vm.isScatter?_c("div",{staticClass:"chart-icon pointer pB8 el-popover__reference",staticStyle:{"padding-left":"210px",top:"10px",height:"50px",position:"absolute"}},[_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"period-select width100 fwidget-report-period-select",attrs:{size:"mini",placeholder:"Period",title:"Time period","data-arrow":"true"},on:{change:_vm.onPeriodChange},model:{value:_vm.period,callback:function($$v){_vm.period=$$v},expression:"period"}},_vm._l(_vm.getAvailablePeriods,(function(period,index){return _c("el-option",{key:index,attrs:{label:period.name,value:period.value,disabled:!period.enable}})})),1)],1):_vm._e(),_vm.hideChartSettings||!_vm.reportObj||!_vm.reportObj.options||!_vm.reportObj.options.settings||_vm.config&&_vm.config.widget||_vm.isRegression||_vm.isHeatMap||_vm.isTreeMap||_vm.isScatter?_vm._e():_c("f-chart-settings",{staticClass:"freport-page-settings",attrs:{showTimePeriod:_vm.showTimePeriod,showSafelimit:_vm.showSafeLimit,settings:_vm.reportObj&&_vm.reportObj.options?_vm.reportObj.options.settings:null},on:{onSettingsChange:_vm.onSettingsChange}})],2),_vm.reportObj&&_vm.reportObj.options.common.filters&&_vm.reportObj.options.common.filters.filterState&&_vm.reportObj.options.common.filters.filterState.liveFilterField&&"none"!==_vm.reportObj.options.common.filters.filterState.liveFilterField&&!_vm.isRegression&&!1===_vm.loading&&_vm.resultObj&&4!==_vm.reportObj.reportType?_vm._e():_c("FDateTimeFilter",{attrs:{filters:_vm.dbFilterJson,report:_vm.reportObj},on:{applyTTimeFilter:_vm.applyTTimeFilter}}),_vm.showFUserFilter?_c("f-user-filters",{ref:"userFilter-"+(_vm.config&&_vm.config.widget&&_vm.config.widget.id?_vm.config.widget.id:_vm.reportId),attrs:{report:_vm.reportObj,filters:_vm.filter},on:{filterData:function(value){return _vm.liveFilterValue(value)},applyFilter:_vm.applyFilter,userFilterLoaded:_vm.userFilterLoaded}}):_vm._e(),_vm.reportTemplateAssetChooser?_c("div",{staticClass:"chart-icon pointer pB8 el-popover__reference mL10 mT10"},[_c("el-row",[_c("el-col",{staticClass:"text-left position-relative",attrs:{span:5}},[_c("el-select",{staticClass:"period-select fwidget-report-period-select width100 mB30",class:{"position-absolute":_vm.isWidget},attrs:{size:"mini",filterable:"",disabled:_vm.disbaleRPassetChooser},on:{change:_vm.applyTemplate},model:{value:_vm.reportTemplate.parentId,callback:function($$v){_vm.$set(_vm.reportTemplate,"parentId",$$v)},expression:"reportTemplate.parentId"}},_vm._l(_vm.reportTemplate.chooseValues,(function(val,valIdx){return _c("el-option",{key:valIdx,attrs:{label:val.name,value:val.id}})})),1)],1)],1)],1):_vm._e(),_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):_vm.failed?_c("div",{staticStyle:{"margin-top":"30px",opacity:"0.7","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("div",[_vm._v(_vm._s(_vm.$t("home.dashboard.data_loading_failed")))])]):_vm.reportObj.data?_c("div",{staticClass:"height100"},[_vm.isRegression?_vm._e():[_vm.isHeatMap?[_c("FNewHeatMap",{ref:"heatmap",attrs:{config:_vm.config,resultObject:_vm.resultObj,widgetBodyDimension:_vm.widgetBodyDimension,reportObject:_vm.reportObj}}),_vm.hideTable?_vm._e():_c("f-tabular-report",{ref:"newTable",staticClass:"newTable",attrs:{hideColumn:_vm.hideColumn,reportObject:_vm.resultObj,reportConfig:_vm.reportObj,widget:_vm.config?_vm.config.widget:null}})]:_vm.isTreeMap?[_c("FTreeMap",{ref:"treemap",attrs:{config:_vm.config,resultObject:_vm.resultObj,widgetBodyDimension:_vm.widgetBodyDimension,reportObject:_vm.reportObj}}),_vm.hideTable?_vm._e():_c("f-tabular-report",{ref:"newTable",staticClass:"newTable",attrs:{hideColumn:_vm.hideColumn,reportObject:_vm.resultObj,reportConfig:_vm.reportObj,widget:_vm.config?_vm.config.widget:null}})]:[_vm.reportObj&&_vm.reportObj.options&&_vm.reportObj.options.settings&&"multi"===_vm.reportObj.options.settings.chartMode&&!_vm.isScatter&&!1!==_vm.reportObj.options.settings.chart&&!_vm.showChart?_c("div",{class:{height100:_vm.config}},[_vm.$mobile?_c("f-mobile-multi-chart",{ref:"multiChart",attrs:{isWidget:!!_vm.config,config:_vm.config,width:_vm.config&&_vm.config.width?_vm.config.width:null,resultObj:_vm.resultObj,height:_vm.config&&_vm.config.height?_vm.config.height:null,data:_vm.reportObj.data,options:_vm.reportObj?_vm.reportObj.options:null,alarms:_vm.reportObj.alarms,dateRange:_vm.reportObj.dateRange,hidecharttypechanger:_vm.isRegression,booleanData:_vm.reportObj.booleanData}}):_c("f-multi-chart",{ref:"multiChart",attrs:{isWidget:!!_vm.config,width:_vm.config&&_vm.config.width?_vm.config.width:null,resultObj:_vm.resultObj,height:_vm.config&&_vm.config.height?_vm.config.height:null,data:_vm.reportObj.data,options:_vm.reportObj?_vm.reportObj.options:null,alarms:_vm.reportObj.alarms,dateRange:_vm.reportObj.dateRange,hidecharttypechanger:_vm.isRegression,booleanData:_vm.reportObj.booleanData,widgetBodyDimension:_vm.widgetBodyDimension}})],1):_vm.showChart?_vm._e():_c("div",{class:{height100:_vm.config&&_vm.reportObj&&!1!==_vm.reportObj.options.settings.chart}},[_vm.$route.meta&&_vm.$route.meta.dashboardlayout&&"mobile"===_vm.$route.meta.dashboardlayout?_c("f-mobile-chart",{ref:"newChart",attrs:{width:_vm.config&&_vm.config.width?_vm.config.width:null,resultObj:_vm.resultObj,height:_vm.config&&_vm.config.height?_vm.config.height:null,data:_vm.reportObj.data,options:_vm.reportObj?_vm.reportObj.options:null,dateRange:_vm.reportObj.dateRange,reportType:_vm.reportObj.reportType}}):_c("f-new-chart",{ref:"newChart",staticClass:"fc-single-chart-pdf",class:{"fc-scatter-chart":_vm.isScatter},attrs:{config:_vm.config,isWidget:!!_vm.config,width:_vm.config&&_vm.config.width?_vm.config.width:null,resultObj:_vm.resultObj,height:_vm.config&&_vm.config.height?_vm.config.height:null,data:_vm.reportObj.data,options:_vm.reportObj?_vm.reportObj.options:null,alarms:_vm.reportObj.alarms,dateRange:_vm.reportObj.dateRange,hidecharttypechanger:_vm.isRegression||_vm.isScatter,reportType:_vm.reportObj.reportType,widgetBodyDimension:_vm.widgetBodyDimension,item:_vm.item,updateWidget:_vm.updateWidget}})],1),_vm.hideTable||_vm.isScatter?_vm._e():_c("f-tabular-report",{ref:"newTable",staticClass:"newTable tabular-table-widget",attrs:{hideColumn:_vm.hideColumn,reportObject:_vm.resultObj,reportConfig:_vm.reportObj,widget:_vm.config?_vm.config.widget:null}})],!_vm.isScatter||_vm.hideTable||_vm.$mobile?_vm._e():[_vm.isPrinting?_c("f-tabular-report",{ref:"newTable",staticClass:"fc-tabular new-analytics-table",attrs:{hideColumn:_vm.hideColumn,reportObject:_vm.trendresultObj,reportConfig:_vm.trendreportObj}}):[_c("div",{staticClass:"white-bg-block mB10 width100"},[_c("div",{staticClass:"analytics-section mT20"},[_c("el-collapse",{staticClass:"fc-pushing-data-collapse fc-collapse-arrow-bg fc-analytics-collapse fc-scatter-collapse",model:{value:_vm.activeTable,callback:function($$v){_vm.activeTable=$$v},expression:"activeTable"}},[_c("el-collapse-item",{attrs:{title:"Undelying Data",name:"1"}},[_vm.activeTable.includes("1")?_c("div",[_vm.loading?_c("spinner",{staticClass:"analytics-spinner",attrs:{show:_vm.loading,size:"80"}}):_vm.failed?_c("div",{staticStyle:{"margin-top":"30px",opacity:"0.7","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("div",[_vm._v(" "+_vm._s(_vm.$t("home.dashboard.data_loading_failed"))+" ")])]):_vm.reportObj.data?_vm._e():_c("div",{staticStyle:{"margin-top":"30px","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.empty_data"))+" "),_vm.resultObj&&_vm.resultObj.dateRange&&_vm.resultObj.dateRange.value?_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm._f("formatPeriod")(_vm.resultObj.dateRange.value,"MMM DD, YYYY")))]):_vm._e()])],1),_c("f-tabular-report",{ref:"newTable",staticClass:"new-analytics-table",attrs:{hideColumn:_vm.hideColumn,reportObject:_vm.trendresultObj,reportConfig:_vm.trendreportObj,widget:!0,showWidgetTable:!0}})],1):_vm._e()])],1)],1)])]]],_vm.isRegression?_c("div",{staticClass:"mT10"},[_c("MultipleRegressionAnalysis",{attrs:{resultObj:_vm.resultObj}})],1):_vm._e()],2):_c("div",{staticStyle:{"font-size":"13px",padding:"80px 50px 50px 50px","line-height":"25px","text-align":"center"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.empty_data"))+" "),_vm.resultObj&&_vm.resultObj.dateRange&&_vm.resultObj.dateRange.value?_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm._f("formatPeriod")(_vm.resultObj.dateRange.value,"MMM DD, YYYY")))]):_vm._e()])],1),_vm.emailReportVisibility?_c("email-report",{attrs:{visibility:_vm.emailReportVisibility,report:_vm.report},on:{"update:visibility":function($event){_vm.emailReportVisibility=$event}}}):_vm._e()],1)},FNewReportvue_type_template_id_4b8aed8b_scoped_true_staticRenderFns=[],cloneDeep=(__webpack_require__(689730),__webpack_require__(843843),__webpack_require__(506203),__webpack_require__(300268),__webpack_require__(903650),__webpack_require__(186466),__webpack_require__(150361)),cloneDeep_default=__webpack_require__.n(cloneDeep),DashboardEmailReport=__webpack_require__(81938),FNewChartvue_type_template_id_07e8e6f8_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 f-singlechart"},[_vm.hidecharttypechanger?_vm._e():_c("f-chart-type",{staticClass:"charttypechanger fc-new-chart-type-single",attrs:{options:_vm.options},on:{getOptions:_vm.getOptionsFromTypeChart}}),_vm.chartContext&&!1!==_vm.options.settings.chart?_c("div",{staticStyle:{"text-align":"center"}},[_c("div",{style:_vm.isWidget?"position: relative; top: 15px;":""},[_vm.showAlarms&&_vm.showAlarmTitle?_c("div",{staticClass:"fc-alarms-chart-title",style:"sensorrollupalarm"===_vm.moduleName?"color: #324056 !important;font-weight: bold;":""},[_vm._v(" Alarms ")]):_vm._e(),_c("div",{ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart"})]),_vm.relatedAlarms?_c("div",[_vm._l(_vm.relatedAlarms,(function(relAlarm,idx){return[_c("div",{key:idx,style:_vm.isWidget?"position: relative; top: 15px;":""},[_c("div",{staticClass:"fc-alarms-chart-title",staticStyle:{"text-transform":"capitalize",color:"#324056 !important"}},[_vm._v(" "+_vm._s(relAlarm?relAlarm.alarmTitle:"")+" ")]),_c("div",{ref:"relatedAlarmsChartEle",refInFor:!0,staticClass:"fc-alarms-chart pdf-chart"})])]}))],2):_vm._e(),_vm.chartContext.options.legend.show&&"top"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{ref:"chartLegend",staticClass:"f-chart-ledgend",attrs:{chart:_vm.c3.chart,options:_vm.options,resultObj:_vm.resultObj,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config,isScatterPlot:_vm.chartContext&&_vm.chartContext.scatterConfig},on:{ontoggle:_vm.ontoggle}}):_vm._e(),_vm.chartContext.options.regionConfig?_c("f-chart-title",{ref:"chartTitle",attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config,chartContext:_vm.chartContext},on:{ontoggle:_vm.ontoggle}}):_vm._e(),_vm.drilldownParams?_c("drilldown-breadcrumb",{attrs:{drilldownParams:_vm.drilldownParams},on:{crumbClick:function($event){return _vm.$emit("crumbClick",$event)}}}):_vm._e(),_c("div",{staticClass:"fc-newchart-container",class:{"scatter-full-opacity":_vm.c3.params&&_vm.c3.params.data&&_vm.c3.params.data.types&&!Object.values(_vm.c3.params.data.types).includes("bubble")}},[_c("div",{ref:"newChartEle",staticClass:"fc-new-chart pdf-chart",class:{"hide-y2-axis":_vm.options&&_vm.options.axis&&!1===_vm.options.axis.showy2axis}}),_vm.chartContext.options.legend.show&&"right"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{style:{width:_vm.chartContext.options.legend.width+"px"},attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config},on:{ontoggle:_vm.ontoggle}}):_vm._e()],1),_vm.chartContext.options.legend.show&&"bottom"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{ref:"chartLegend",attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap},on:{ontoggle:_vm.ontoggle}}):_vm._e(),_vm.showWidget?_c("f-widget-legends",{ref:"newWidget",staticClass:"widget-legends",attrs:{chart:_vm.c3.chart,reportVarianceData:_vm.resultObj?_vm.resultObj.reportData.aggr:null,data:_vm.data,options:_vm.options},on:{ontoggle:_vm.ontoggle}}):_vm._e()],1):_vm._e()],1)},FNewChartvue_type_template_id_07e8e6f8_scoped_true_staticRenderFns=[],billboard=(__webpack_require__(212826),__webpack_require__(795765),__webpack_require__(872695)),basechart=__webpack_require__(532795),ReportDataUtil=__webpack_require__(760396),c3_helper=__webpack_require__(459430),FChartLegendsvue_type_template_id_2fc9db66_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.legends&&_vm.legends.length?_c("div",{staticClass:"fLegendContainer fLegendContainer-new fLegendContainer-right"},[_vm._l(_vm.filterLegends(_vm.legends),(function(legend){return[_vm.legendShow(legend)?_c("div",{key:legend.key,staticClass:"legendBoxNew legendBoxNew-fchart f-legendnew",class:{active:-1===_vm.hideLegend.indexOf(legend.key),hideLegend:!_vm.getVisibledDataPoints(legend)},attrs:{title:_vm.isDuplicatePoint(legend)?_vm.aggrMap[legend.aggr]+" of "+legend.label:legend.label},on:{mouseover:function($event){return _vm.focusLegend(legend.key)},mouseout:function($event){return _vm.unfocusLegend(legend.key)}}},[_vm.isScatterPlot&&legend.pointCustomization&&3!=legend.pointType?_c("div",{staticClass:"mL10 mR5",on:{click:function($event){return _vm.openScatterOptions(legend.key)}}},[_vm.options&&"palette"===_vm.options.scatter.color.mode?_c("img",{staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)}}):_c("chart-shapes",{attrs:{activeColor:legend.color,activeShape:legend.pointCustomization.shape}})],1):_vm.groupedByTime?_c("img",{staticClass:"mL10 mR5",staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)},on:{click:function($event){return _vm.openGroupByColorPalette(legend.key)}}}):"ENUM"===legend.dataType?_c("img",{staticClass:"mL10 mR5",staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)},on:{click:function($event){return _vm.openEnumDialog(legend)}}}):_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:legend.color,callback:function($$v){_vm.$set(legend,"color",$$v)},expression:"legend.color"}}),_c("span",{staticClass:"datapoint-leabel",on:{click:function($event){return _vm.toggleLegend(legend.key)}}},[_vm._v(_vm._s(_vm.isDuplicatePoint(legend)?_vm.aggrMap[legend.aggr]+" of "+legend.label:legend.label))]),_vm.$route.meta&&_vm.$route.meta.component&&"analytics"===_vm.$route.meta.component?_c("el-tooltip",{staticClass:"dp-remove-icon",attrs:{effect:"dark",content:"remove data point"}},[_c("span",{staticClass:"datapoint-remove",on:{click:function($event){return _vm.removeDataPoint(_vm.options,_vm.config,legend,legend.key)}}},[_c("i",{staticClass:"el-icon-close"})])]):_vm._e()],1):legend.children&&legend.children.length?_vm._l(legend.children,(function(child){return _c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==child.visible&&"x"!==child.axes,expression:"child.visible !== false && child.axes !== 'x'"}],key:child.key,staticClass:"f-legendnew legendBoxNew legendBoxNew-fchart",class:{active:-1===_vm.hideLegend.indexOf(child.key)},attrs:{title:_vm.isDuplicatePoint(child)?_vm.aggrMap[child.aggr]+" of "+child.label:child.label},on:{mouseover:function($event){return _vm.focusLegend(child.key)},mouseout:function($event){return _vm.unfocusLegend(child.key)}}},[_vm.isScatterPlot&&3!=child.pointType&&child.pointCustomization?_c("div",{staticClass:"mL10 mR5",on:{click:function($event){return _vm.openScatterOptions(child.key)}}},[_vm.options&&"palette"===_vm.options.scatter.color.mode?_c("img",{staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)}}):_c("chart-shapes",{attrs:{activeColor:child.color,activeShape:child.pointCustomization.shape}})],1):_vm.groupedByTime?_c("img",{staticClass:"mL10 mR5",staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)},on:{click:function($event){return _vm.openGroupByColorPalette(child.key)}}}):"ENUM"===child.dataType?_c("img",{staticClass:"mL10 mR5",staticStyle:{width:"12px",height:"12px"},attrs:{src:__webpack_require__(867159)},on:{click:function($event){return _vm.openEnumDialog(child)}}}):_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:child.color,callback:function($$v){_vm.$set(child,"color",$$v)},expression:"child.color"}}),_c("span",{staticClass:"datapoint-leabel",on:{click:function($event){return _vm.toggleLegend(child.key)}}},[_vm._v(_vm._s(_vm.isDuplicatePoint(child)?_vm.aggrMap[child.aggr]+" of "+child.label:child.label))]),_vm.$route.meta&&_vm.$route.meta.component&&"analytics"===_vm.$route.meta.component?_c("el-tooltip",{staticClass:"dp-remove-icon",attrs:{effect:"dark",content:"remove data point"}},[_c("span",{staticClass:"datapoint-remove",on:{click:function($event){return _vm.removeDataPoint(_vm.options,_vm.config,legend,!1,child,child.key)}}},[_c("i",{staticClass:"el-icon-close"})])]):_vm._e()],1)})):_vm._e()]})),_c("el-dialog",{staticClass:"enum-color-dialog fc-dialog-center-container fc-dialog-center-container-pt0",attrs:{title:"Color picker","append-to-body":!0,width:"25%",visible:_vm.showEnumColorDialog,"lock-scroll":!0},on:{"update:visible":function($event){_vm.showEnumColorDialog=$event}}},[_vm.selectedEnumDataPoint&&"ENUM"===_vm.selectedEnumDataPoint.dataType?_c("div",{staticClass:"overflow-y-scroll height250 pB50"},_vm._l(_vm.selectedEnumDataPoint.enumMap,(function(enumLabel,idx){return _c("el-row",{key:idx,staticClass:"pB5 border-bottom4 pT5"},[_c("el-col",{attrs:{span:2}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:_vm.selectedEnumDataPoint.enumColorMap[idx],callback:function($$v){_vm.$set(_vm.selectedEnumDataPoint.enumColorMap,idx,$$v)},expression:"selectedEnumDataPoint.enumColorMap[idx]"}})],1),_c("el-col",{staticClass:"mT5",attrs:{span:21}},[_vm._v(_vm._s(enumLabel))])],1)})),1):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel width100",on:{click:function($event){return $event.stopPropagation(),_vm.closeEnumDialog()}}},[_vm._v("CLOSE")])],1)]),_c("el-dialog",{staticClass:"groupby-color-dialog fc-dialog-center-container fc-dialog-center-container-pt0",attrs:{title:"Color picker","append-to-body":!0,width:"25%",visible:_vm.showgroupByColorDialog,"lock-scroll":!0},on:{"update:visible":function($event){_vm.showgroupByColorDialog=$event}}},[_vm.groupedByTime?_c("div",{staticClass:"overflow-y-scroll height250 pB50 "},_vm._l(_vm.groupedlegends,(function(legend,key){return _c("el-row",{key:key,staticClass:"pB5 border-bottom4 pT5",class:{"datapoint-hidden":!legend.visible}},[_c("el-col",{staticClass:"mT4",attrs:{span:2}},[_c("i",{staticClass:"pointer el-icon-view",on:{click:function($event){legend.visible=!legend.visible}}})]),_c("el-col",{staticClass:"mT5",attrs:{span:18}},[_vm._v(_vm._s(legend.name))]),_c("el-col",{attrs:{span:3}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:legend.color,callback:function($$v){_vm.$set(legend,"color",$$v)},expression:"legend.color"}})],1)],1)})),1):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel width100",on:{click:function($event){return $event.stopPropagation(),_vm.closeGroupByColorPalette()}}},[_vm._v("CLOSE")])],1)]),_c("el-dialog",{staticClass:"groupby-color-dialog fc-dialog-center-container fc-dialog-center-container-pt0",attrs:{title:"Customize","append-to-body":!0,width:"40%",visible:_vm.showScatterDialog,"lock-scroll":!0},on:{"update:visible":function($event){_vm.showScatterDialog=$event}}},[_vm.isScatterPlot&&_vm.scatterLegend?_c("div",{staticClass:"overflow-y-scroll height350 pB30"},["datapoint"===_vm.scatterLegend.type?_c("div",{staticClass:"data-points-drag-block mT10"},[_c("div",{staticClass:"data-points-checkbox",class:{"datapoint-hidden":!_vm.scatterLegend.visible}},[_c("el-input",{ref:"dataPointEditName",staticClass:"width100",on:{blur:function($event){return _vm.checkForEmpty(_vm.scatterLegend)}},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.checkForEmpty(_vm.scatterLegend)}},model:{value:_vm.scatterLegend.label,callback:function($$v){_vm.$set(_vm.scatterLegend,"label",$$v)},expression:"scatterLegend.label"}})],1),_c("div",{staticClass:"data-points-settings-icon-set scatter-data-points-settings-icon-set pR10"},[4!==_vm.scatterLegend.dataTypeId&&8!==_vm.scatterLegend.dataTypeId?_c("el-radio-group",{staticClass:"dp-yaxis",attrs:{size:"mini"},on:{change:_vm.changeYAxis},model:{value:_vm.scatterLegend.axes,callback:function($$v){_vm.$set(_vm.scatterLegend,"axes",$$v)},expression:"scatterLegend.axes"}},[_c("el-radio-button",{attrs:{label:"y"}},[_vm._v("Y1")]),_c("el-radio-button",{attrs:{label:"y2"}},[_vm._v("Y2")])],1):_vm._e(),_vm.options&&"palette"!==_vm.options.scatter.color.mode?_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:_vm.scatterLegend.color,callback:function($$v){_vm.$set(_vm.scatterLegend,"color",$$v)},expression:"scatterLegend.color"}}):_vm._e()],1)]):_vm._e(),_vm.options&&"predefined"===_vm.options.scatter.shape?_c("div",{staticClass:"customize-input-block"},[_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"label-txt-black"},[_vm._v("Shape")]),_c("el-select",{staticClass:"fc-input-full-border2 width100 pT10",attrs:{placeholder:"Select"},model:{value:_vm.scatterLegend.pointCustomization.shape,callback:function($$v){_vm.$set(_vm.scatterLegend.pointCustomization,"shape",$$v)},expression:"scatterLegend.pointCustomization.shape"}},[_c("el-option",{attrs:{label:"Circle",value:"circle"}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:"mR10 pointer",attrs:{src:"svgs/chart/circle",iconClass:"icon icon-md vertical-sub "}}),_c("div",[_vm._v(" Circle ")])],1)]),_c("el-option",{attrs:{label:"Rectangle",value:"rectangle"}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:" mR10 pointer",attrs:{src:"svgs/chart/rectangle",iconClass:"icon icon-md vertical-sub "}}),_c("div",[_vm._v(" Rectangle ")])],1)]),_c("el-option",{attrs:{label:"Triangle",value:"triangle"}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:" mR10 pointer",attrs:{src:"svgs/chart/triangle",iconClass:"icon icon-md vertical-sub "}}),_c("div",[_vm._v(" Triangle ")])],1)]),_c("el-option",{attrs:{label:"Diamond",value:"diamond"}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:" mR10 pointer",attrs:{src:"svgs/chart/diamond",iconClass:"icon icon-md vertical-sub "}}),_c("div",[_vm._v(" Diamond ")])],1)])],1)],1)],1)],1):_vm._e()]):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel width100",on:{click:function($event){return $event.stopPropagation(),_vm.closeScatterOptions()}}},[_vm._v("CLOSE")])],1)])],2):_vm.xValueMode?_c("div",{staticClass:"fLegendContainer fLegendContainer-new fLegendContainer-right"},_vm._l(_vm.options.xColorMap,(function(color,key){return _c("div",{key:key,staticClass:"legendBoxNew legendBoxNew-fchart f-legendnew",class:{active:-1===_vm.hideLegend.indexOf(key)},attrs:{title:_vm.xLabelMap&&_vm.xLabelMap[key]?_vm.xLabelMap[key]:key},on:{mouseover:function($event){return _vm.focusLegend(key)},mouseout:function($event){return _vm.unfocusLegend(key)}}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:_vm.options.xColorMap[key],callback:function($$v){_vm.$set(_vm.options.xColorMap,key,$$v)},expression:"options.xColorMap[key]"}}),_c("span",{staticClass:"textoverflow-ellipsis",on:{click:function($event){return _vm.toggleLegend(key)}}},[_vm._v(_vm._s(_vm.xLabelMap&&_vm.xLabelMap[key]?_vm.xLabelMap[key]:key))])],1)})),0):_vm._e()},FChartLegendsvue_type_template_id_2fc9db66_staticRenderFns=[],AnalyticsMixin=(__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(244936)),NewDataFormatHelper=__webpack_require__(804911),ChartShapes=__webpack_require__(674164),FChartLegendsvue_type_script_lang_js={props:["options","chart","multichart","xValueMode","xLabelMap","config","resultObj","isScatterPlot"],components:{ChartShapes:ChartShapes/* default */.Z},mixins:[AnalyticsMixin/* default */.Z,NewDataFormatHelper/* default */.Z],data:function(){return{showLegendColorPicker:!1,hideLegend:[],aggrMap:{2:"Avg",3:"Sum",4:"Min",5:"Max"},showgroupByColorDialog:!1,showEnumColorDialog:!1,selectedEnumDataPoint:null,selectedgroupByDataPoint:null,showScatterDialog:!1,selectedScatterDataPoint:null}},computed:{groupedByTime:function(){return!!this.options.isGroupedByTime},groupedlegends:function(){var _this=this;if(this.selectedgroupByDataPoint){var mkey=this.selectedgroupByDataPoint;return Object.keys(this.options.timeGroupOptions).filter((function(key){return key.split("_")[0]===mkey})).reduce((function(obj,key){return obj[key]=_this.options.timeGroupOptions[key],obj}),{})}return{}},legends:function(){var baselineDataPoints=[];if(this.xValueMode)return null;if(this.options){if(this.multichart){var mtype=this.multichart.split("_")[0],mkey=this.multichart.substring(this.multichart.indexOf("_")+1);return"group"===mtype?0!==this.options.dataPoints.filter((function(dp){return String(dp.label)===mkey})).length?this.options.dataPoints.filter((function(dp){return String(dp.label)===mkey})):this.options.dataPoints.filter((function(dp){return dp.key===mkey&&"x"!==dp.axes})):0!==this.options.dataPoints.filter((function(dp){return dp.key===mkey&&"x"!==dp.axes})).length?this.options.dataPoints.filter((function(dp){return dp.key===mkey&&"x"!==dp.axes})):this.allPoints.filter((function(dp){return dp.key===mkey&&"x"!==dp.axes}))}return this.isScatterPlot&&(baselineDataPoints=this.getScatterbaseline()),[].concat((0,toConsumableArray/* default */.Z)(this.options.dataPoints.filter((function(dp){return"x"!==dp.axes}))),(0,toConsumableArray/* default */.Z)(baselineDataPoints))}return null},allPoints:function(){var points=[];return this.options.dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)})),points},scatterLegend:function(){var _this2=this;return this.allPoints.find((function(dp){return dp.key===_this2.selectedScatterDataPoint}))}},methods:{focusLegend:function(key){this.chart&&!this.groupedByTime&&this.chart.focus(key)},legendShow:function(legend){return!!legend&&!("datapoint"!==legend.type&&"rangeGroup"!==legend.type||!this.getVisibledDataPoints(legend))},unfocusLegend:function(key){this.chart&&!this.groupedByTime&&this.chart.revert()},filterLegends:function(legends){if(legends&&legends.length){var self=this,datapoints=[];return datapoints=legends.filter((function(rt){return rt&&self.config&&self.config.hideDataPoints&&self.config.hideDataPoints.length?-1===self.config.hideDataPoints.findIndex((function(rl){return rl===rt.key}))?rt:void 0:rt})),datapoints}return legends},getVisibledDataPoints:function(legend){return!(this.config&&this.config.hideDataPoints&&this.config.hideDataPoints.length&&this.config.hideDataPoints.find((function(rt){return rt===legend.key})))&&!!legend.visible},toggleLegend:function(key){if(this.chart&&!this.groupedByTime){var idx=this.hideLegend.indexOf(key);-1===idx?this.hideLegend.push(key):this.hideLegend.splice(idx,1),this.chart.toggle(key),this.options&&"donut"===this.options.type&&this.toggleDonutLabel(this.xValueMode),this.$emit("ontoggle",key,this.hideLegend)}},isDuplicatePoint:function(legend){if(legend.duplicateDataPoint&&this.aggrMap[legend.aggr])if(this.config.widget&&this.config.widget.dataOptions&&this.config.widget.dataOptions.newReport){var reportObj=this.config.widget.dataOptions.newReport,chartStateObj=null;if(reportObj.chartState&&(chartStateObj=JSON.parse(reportObj.chartState)),0!==reportObj.xAggr||chartStateObj&&![1,4,"reading"].includes(chartStateObj.common.mode))return!0}else if(0!==this.config.period||![1,4,"reading"].includes(this.config.mode))return!0;return!1},openGroupByColorPalette:function(key){this.selectedgroupByDataPoint=key,this.showgroupByColorDialog=!0},closeGroupByColorPalette:function(){this.selectedgroupByDataPoint=null,this.showgroupByColorDialog=!1},openEnumDialog:function(legend){this.selectedEnumDataPoint=legend,this.showEnumColorDialog=!0},closeEnumDialog:function(){this.selectedEnumDataPoint=null,this.showEnumColorDialog=!1},openScatterOptions:function(key){key!=key.toLowerCase()&&(this.selectedScatterDataPoint=key,this.showScatterDialog=!0)},closeScatterOptions:function(){this.selectedScatterDataPoint=null,this.showScatterDialog=!1},checkForEmpty:function(dataPoint){""===dataPoint.label?alert("Datapoint name cannot be empty"):this.$forceUpdate()},changeYAxis:function(){this.options&&2!==this.options.common.mode&&this.resultObj&&(this.options.multichart=this.getMultichartOptions(this.options.axis,this.$helpers.getDataPoints(this.options.dataPoints,[1,2,4],!0),this.resultObj.report.dataPoints),this.prepareYAxes(this.options.axis,this.$helpers.getDataPoints(this.options.dataPoints,[1,2,4],!0),this.resultObj.report.dataPoints))},getScatterbaseline:function(){var _this3=this,baselineData=this.resultObj.baselineData,legends=[];if(baselineData){var i=0,count=0,alphabet="abcdefghijklmnopqrstuvwxyz".split("");baselineData.forEach((function(data){var legend={label:data.label,key:alphabet[count],color:_this3.resultObj.baselineDataColors[i],pointType:1,safelimit:!1,type:"datapoint",visible:!0,pointCustomization:{shape:_this3.options.dataPoints.filter((function(dp){return"x"!==dp.axes}))[0].pointCustomization.shape,color:{enable:!1,basedOn:alphabet[count]},size:{enable:!1,basedOn:alphabet[count]}}};legends.push(legend),i+=1,count+=2}))}return legends}}},charts_FChartLegendsvue_type_script_lang_js=FChartLegendsvue_type_script_lang_js,FChartLegends_component=(0,componentNormalizer/* default */.Z)(charts_FChartLegendsvue_type_script_lang_js,FChartLegendsvue_type_template_id_2fc9db66_render,FChartLegendsvue_type_template_id_2fc9db66_staticRenderFns,!1,null,null,null)
/* harmony default export */,FChartLegends=FChartLegends_component.exports,DrilldownBreadcrumb=__webpack_require__(374520),FChartTitlevue_type_template_id_5ccc134b_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-new-chart-title"},[_vm.titeList&&_vm.titeList&&_vm.titeList.length&&!_vm.loading?_c("div",{staticClass:"flex-middle justify-center"},_vm._l(_vm.titeList,(function(data,index){return _c("div",{key:index,staticClass:"f-chart-mandv-title",style:_vm.getStyle(data)},[_vm._v(" "+_vm._s(data.title)+" ")])})),0):_vm._e()])},FChartTitlevue_type_template_id_5ccc134b_staticRenderFns=[],FChartTitlevue_type_script_lang_js={props:["chartContext"],data:function(){return{titeList:[],loading:!1}},mounted:function(){var self=this;this.loading=!0,setTimeout((function(){self.titeList=self.chartContext.regionsTitles,self.loading=!1}),1e3)},methods:{getStyle:function(data){return"width:"+data.diff+"px"}}},charts_FChartTitlevue_type_script_lang_js=FChartTitlevue_type_script_lang_js,FChartTitle_component=(0,componentNormalizer/* default */.Z)(charts_FChartTitlevue_type_script_lang_js,FChartTitlevue_type_template_id_5ccc134b_render,FChartTitlevue_type_template_id_5ccc134b_staticRenderFns,!1,null,null,null)
/* harmony default export */,FChartTitle=FChartTitle_component.exports,FWidgetLegendsvue_type_template_id_83b444d8_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.options.widgetLegend.show?_c("div",{ref:"legend-container",staticClass:"row legend-container",class:{singlecard:1===_vm.legends.length||0===_vm.legends.length},staticStyle:{position:"relative"}},[_vm.isPrinting?_vm._l(_vm.legends,(function(legend,idx){return _c("div",{key:idx,staticClass:"variance-item"},_vm._l(legend,(function(legand,idx){return _c("div",{key:idx},[_vm.anyPointHidden&&legand.dataPoint.visible?_c("div",{staticClass:"ellipsis variance-point"},[_vm._v(" "+_vm._s("")+" ")]):_vm._e(),_c("div",{staticClass:"ellipsis variance-x-label"},[_vm._v(" "+_vm._s(legand.xLabel||"")+" ")]),!1===legand.dataPoint.visible?_c("div",{staticClass:"ellipsis variance-point"},[_vm._v(" "+_vm._s(legand.dataPoint.label)+" ")]):_vm._e(),_vm.isBaseLineSelected&&legand.dataPoint.visible?_c("div",{staticClass:"variance-baseline",style:_vm.getBaseLineStyle(legand)}):legand.showColor&&legand.dataPoint&&[8].includes(legand.dataPoint.dataTypeId)?_c("svg",{staticClass:"variance-circle flLeft",style:{"margin-top":_vm.isSmall?"3px":"5px"},on:{mouseover:function($event){return _vm.focusLegend(legand.dataPoint.key)},mouseout:function($event){return _vm.unfocusLegend(legand.dataPoint.key)}}},[_c("circle",{attrs:{cx:_vm.isSmall?5:7,cy:_vm.isSmall?5:7,r:_vm.isSmall?5:7,fill:legand.color}})]):legand.showColor?_c("svg",{staticClass:"variance-circle flLeft",style:{"margin-top":_vm.isSmall?"3px":"5px"},on:{mouseover:function($event){return _vm.focusLegend(legand.dataPoint.key)},mouseout:function($event){return _vm.unfocusLegend(legand.dataPoint.key)}}},[_c("circle",{attrs:{cx:_vm.isSmall?5:7,cy:_vm.isSmall?5:7,r:_vm.isSmall?5:7,fill:legand.dataPoint.color}})]):_vm._e(),_c("div",{class:{"variance-data":legand.showColor&&!_vm.isBaseLineSelected}},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"variance-value ellipsis",style:_vm.getvalueStyle(legand.value+"",_vm.legends.length),attrs:{title:("$"===legand.unit?legand.unit:"")+legand.value+" "+(legand.unit&&"$"!==legand.unit?legand.unit:""),"data-placement":"right","data-arrow":"true"}},["$"===legand.unit?_c("span",{staticClass:"variance-unit variance-unit-left",style:_vm.getunitStyle(legand.value+"",_vm.legends.length),domProps:{innerHTML:_vm._s(legand.unit)}}):_vm._e(),_vm._v(" "+_vm._s(legand.value)+" "),legand.unit&&"$"!==legand.unit?_c("span",{staticClass:"variance-unit",style:_vm.getunitStyle(legand.value+"",_vm.legends.length),domProps:{innerHTML:_vm._s(legend.unit)}}):_vm._e()]),_c("div",{staticClass:"variance-label uppercase"},[_vm._v(" "+_vm._s(legand.varianceLabel||_vm.$constants.VarianceLabels[legand.name]||legand.name)+" ")])])])})),0)})):_c("el-carousel",{attrs:{height:"100px",autoplay:!1}},_vm._l(_vm.legends,(function(item,index){return _c("el-carousel-item",{key:index,staticClass:"widgetleagend-slider"},_vm._l(item,(function(legend,idx){return"x"!==legend.dataPoint.axes?_c("div",{key:idx,staticClass:"variance-item"},[_vm.anyPointHidden&&legend.dataPoint.visible?_c("div",{staticClass:"ellipsis variance-point"},[_vm._v(" "+_vm._s("")+" ")]):_vm._e(),_c("div",{staticClass:"ellipsis variance-x-label"},[_vm._v(" "+_vm._s(legend.xLabel||"")+" ")]),!1===legend.dataPoint.visible?_c("div",{staticClass:"ellipsis variance-point"},[_vm._v(" "+_vm._s(legend.dataPoint.label)+" ")]):_vm._e(),_vm.isBaseLineSelected&&legend.dataPoint.visible?_c("div",{staticClass:"variance-baseline",style:_vm.getBaseLineStyle(legend)}):legend.showColor&&legend.dataPoint&&[8].includes(legend.dataPoint.dataTypeId)?_c("svg",{staticClass:"variance-circle flLeft",style:{"margin-top":_vm.isSmall?"3px":"5px"},on:{mouseover:function($event){return _vm.focusLegend(legend.dataPoint.key)},mouseout:function($event){return _vm.unfocusLegend(legend.dataPoint.key)}}},[_c("circle",{attrs:{cx:_vm.isSmall?5:7,cy:_vm.isSmall?5:7,r:_vm.isSmall?5:7,fill:legend.color}})]):legend.showColor?_c("svg",{staticClass:"variance-circle flLeft",style:{"margin-top":_vm.isSmall?"3px":"5px"},on:{mouseover:function($event){return _vm.focusLegend(legend.dataPoint.key)},mouseout:function($event){return _vm.unfocusLegend(legend.dataPoint.key)}}},[_c("circle",{attrs:{cx:_vm.isSmall?5:7,cy:_vm.isSmall?5:7,r:_vm.isSmall?5:7,fill:legend.dataPoint.color}})]):_vm._e(),_c("div",{class:{"variance-data":legend.showColor&&!_vm.isBaseLineSelected}},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"variance-value ellipsis",style:_vm.getvalueStyle(legend.value+"",_vm.legends.length),attrs:{title:("$"===legend.unit?legend.unit:"")+legend.value+" "+(legend.unit&&"$"!==legend.unit?legend.unit:""),"data-placement":"right","data-arrow":"true"}},["$"===legend.unit?_c("span",{staticClass:"variance-unit variance-unit-left",style:_vm.getunitStyle(legend.value+"",_vm.legends.length),domProps:{innerHTML:_vm._s(legend.unit)}}):_vm._e(),_vm._v(" "+_vm._s(legend.value)+" "),legend.unit&&"$"!==legend.unit?_c("span",{staticClass:"variance-unit",style:_vm.getunitStyle(legend.value+"",_vm.legends.length),domProps:{innerHTML:_vm._s(legend.unit)}}):_vm._e()]),_c("div",{staticClass:"variance-label uppercase"},[_vm._v(" "+_vm._s(legend.varianceLabel||_vm.$constants.VarianceLabels[legend.name]||legend.name)+" ")])])]):_vm._e()})),0)})),1)],2):_vm._e()},FWidgetLegendsvue_type_template_id_83b444d8_staticRenderFns=[],moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),d3=__webpack_require__(348727),FWidgetLegendsvue_type_script_lang_js={props:["chart","options","reportVarianceData","data"],data:function(){return{legends:[],item:[],xLabelVariance:["min","max"]}},mounted:function(){this.initData()},computed:{chunkSize:function(){return this.$el&&this.$el.offsetWidth?parseInt(this.$el.offsetWidth/160)>8?8:parseInt(this.$el.offsetWidth/160)<1?2:parseInt(this.$el.offsetWidth/160):4},isSmall:function(){return!1},isPrinting:function(){return this.$route.query.print},allPoints:function(){var points=[];return this.options&&this.options.dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)})),points},anyPointHidden:function(){return this.allPoints.some((function(dp){return!1===dp.visible}))},isBaseLineSelected:function(){return this.allPoints.some((function(dp){return dp.isBaseLine}))},allPointsMap:function(){var pointsMap=[];return this.options&&this.options.dataPoints.forEach((function(dp){"group"===dp.type?dp.children.reduce((function(ch,value){return ch[value.alias]=value,ch}),pointsMap):pointsMap[dp.alias||dp.key]=dp})),pointsMap}},watch:{options:{handler:function(){this.initData()},deep:!0},reportVarianceData:function(){this.initData()}},methods:{initData:function(){var _this=this;if(this.legends=[],this.item=[],this.options.widgetLegend&&this.reportVarianceData){this.allPoints.forEach((function(dp){_this.options.widgetLegend.variances[dp.alias||dp.key].forEach((function(variance){_this.setVariance(dp,variance)}))}));var array=this.prepareitem(this.legends,this.chunkSize);this.legends=this.$helpers.cloneObject(array)}},getvalueStyle:function(data,length){var size=1.2;return data.length<7?size=1.3:data.length<8?size=1.2:data.length<10?size=1.1:data.length<12?size=1:data.length>=12&&(size=.8),"font-size:"+size+"vw;"},getunitStyle:function(data,length){var size=14;return data.length<7||data.length<8?size=13:data.length<10?size=11:(data.length<13||data.length>12)&&(size=10),"font-size:"+size+"px;"},setVariance:function(dp,variance){var enumKey,_this2=this;4!==dp.dataTypeId&&8!==dp.dataTypeId||(enumKey=variance,variance="duration");var varianceVal=this.reportVarianceData[(dp.alias||dp.key)+"."+variance];if(void 0!==varianceVal&&null!==varianceVal){var formattedVal=this.formatValue(dp,varianceVal,enumKey),legend={name:enumKey?dp.enumMap[enumKey]:variance,value:formattedVal.value,unit:formattedVal.unit,isBaseLine:dp.isBaseLine,showColor:(this.isBaseLineSelected||this.allPoints.length>1)&&dp.visible,dataPoint:dp};if(8===dp.dataTypeId&&dp.enumColorMap&&(legend.color=dp.enumColorMap[enumKey]),this.xLabelVariance.includes(variance)&&this.data[dp.alias||dp.key]){var xAxisDataType=this.options.axis.x.datatype;this.data[dp.alias||dp.key].forEach((function(val,idx){var value=isNaN(val)?val:Number(val);if(value===varianceVal){var dateObj=null;dateObj=_this2.options.axis.x.time&&_this2.options.axis.x.time.format.format?moment_timezone_default()(_this2.data.x[idx],_this2.options.axis.x.time.format.format).toDate():new Date(_this2.data.x[idx]);var time=_this2.$helpers.getTimeInOrg(dateObj);legend.xLabel="date_time"===xAxisDataType?_this2.$options.filters.formatDate(time):""}}))}this.legends.push(legend)}},prepareitem:function(item,chunkSize){var i,groups=[];for(i=0;i<item.length;i+=chunkSize)groups.push(item.slice(i,i+chunkSize));return groups},getBaseLineStyle:function(legend){return{border:(legend.isBaseLine?"dashed":"solid")+" 1.5px "+legend.dataPoint.color}},resize:function(){},focusLegend:function(key){this.chart&&this.chart.focus(key)},unfocusLegend:function(){this.chart&&this.chart.revert()},formatValue:function(dp,value,enumKey){var json={value:value,unit:dp.unitStr};if(!value)return json;if(enumKey){json.value="";var currentValue=value[enumKey];if(currentValue||(json.value="0 Hours"),currentValue>=864e5){var days=Math.floor(currentValue/864e5);json.value=Math.round(100*days)/100+" Day"+(days>1?"s":""),currentValue-=864e5*days}if(currentValue>=36e5){var hours=currentValue/36e5;json.value?json.value+=" ":hours=Math.floor(hours),json.value+=Math.round(100*hours)/100+" Hour"+(hours>1?"s":""),currentValue-=36e5*hours}if(currentValue>=6e4){var minutes=currentValue/6e4;json.value&&(json.value+=" "),json.value+=Math.round(100*minutes)/100+" Minute"+(minutes>1?"s":"")}else if(currentValue>0){var sec=currentValue/60;json.value&&(json.value+=" "),json.value+=Math.round(100*sec)/100+" Seconds"+(sec>1?"s":"")}return json}
// Temporary handled...should get from chart state
return"CURRENCY"===dp.metric?value>1e4?(json.value=value/1e3,json.value=d3.format(",.2f")(json.value)+"k"):json.value=d3.format(",.2f")(json.value):dp.unitStr&&"kwh"===dp.unitStr.toLowerCase()?(value>1e4&&(json.value=value/1e3,json.unit="MWh"),json.value=d3.format(",.2f")(json.value)):"DECIMAL"!==dp.dataType&&"NUMBER"!==dp.dataType||(json.value=Math.round(100*json.value)/100,json.value=d3.format(",")(json.value)),json}}},charts_FWidgetLegendsvue_type_script_lang_js=FWidgetLegendsvue_type_script_lang_js,FWidgetLegends_component=(0,componentNormalizer/* default */.Z)(charts_FWidgetLegendsvue_type_script_lang_js,FWidgetLegendsvue_type_template_id_83b444d8_render,FWidgetLegendsvue_type_template_id_83b444d8_staticRenderFns,!1,null,null,null)
/* harmony default export */,FWidgetLegends=FWidgetLegends_component.exports,FChartTypevue_type_template_id_4c453cc9_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-chart-type"},[_vm.options?_c("span",[_c("el-popover",{attrs:{"popper-class":"chart-type-popover",width:_vm.isCombo?452:200},model:{value:_vm.typePopover,callback:function($$v){_vm.typePopover=$$v},expression:"typePopover"}},[_c("div",[_vm.isCombo?_c("div",{staticClass:"chart-type-selector pT20 pB20"},[_c("div",{staticClass:"point-type pB20 pL20 pR20 border-bottom1px"},[_c("div",{staticClass:"type-label label-txt-black bold pT10"},[_vm._v(" Default Chart ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{disabled:_vm.isRangeMode},on:{change:_vm.resetCombo},model:{value:_vm.defaultOnCombo,callback:function($$v){_vm.defaultOnCombo=$$v},expression:"defaultOnCombo"}},[_c("template",{slot:"prefix"},[_c("chart-icon",{attrs:{icon:_vm.currentChartType}})],1),_vm._l(_vm.getChartTypes(_vm.options,_vm.allPoints,"default"),(function(ctype,index){return _c("el-option",{key:index,attrs:{label:ctype.label,value:ctype.value}},[_c("span",{staticClass:"chart-icon flLeft pR5",staticStyle:{"margin-right":"5px"}},[_c("chart-icon",{attrs:{icon:ctype.value}})],1),_c("div",{staticClass:"chart-label"},[_vm._v(_vm._s(ctype.label))])])}))],2)],1),_c("ul",_vm._l(_vm.allPoints,(function(dataPoint,index){return!1!==dataPoint.visible?_c("li",{key:index,staticClass:"point-type pB20"},[_c("svg",{staticClass:"dp-circle flLeft mR5"},[_c("circle",{attrs:{cx:5,cy:5,r:5,fill:dataPoint.color}})]),_c("div",{staticClass:"flLeft type-label label-chart"},[_vm._v(" "+_vm._s(dataPoint.label)+" ")]),_c("el-select",{staticClass:"flLeft type-select",attrs:{placeholder:"Default"},model:{value:dataPoint.chartType,callback:function($$v){_vm.$set(dataPoint,"chartType",$$v)},expression:"dataPoint.chartType"}},[dataPoint.chartType?_c("template",{slot:"prefix"},[_c("chart-icon",{attrs:{icon:dataPoint.chartType}})],1):_vm._e(),_vm._l(_vm.getChartTypes(_vm.options,_vm.allPoints,"rangeGroup"===dataPoint.type?"range":"point"),(function(ctype,index){return _c("el-option",{key:index,attrs:{label:ctype.label,value:ctype.value}},[_c("span",{staticClass:"chart-icon flLeft pR5",staticStyle:{"margin-right":"5px"}},[_c("chart-icon",{attrs:{icon:ctype.value}})],1),_c("div",{staticClass:"chart-label"},[_vm._v(_vm._s(ctype.label))])])}))],2)],1):_vm._e()})),0)]):_c("div",{staticClass:"chart-type-selector",staticStyle:{width:"100%"}},[_c("ul",_vm._l(_vm.getChartTypes(_vm.options,_vm.allPoints,"all",_vm.skipTableType),(function(ctype,index){return _c("li",{key:index,class:{active:_vm.currentChartType===ctype.value},on:{click:function($event){return _vm.onTypeChange(ctype)}}},[_c("span",{staticClass:"chart-icon",staticStyle:{"margin-right":"5px"}},[_c("chart-icon",{attrs:{icon:ctype.value}})],1),_c("span",{staticClass:"chart-label"},[_vm._v(_vm._s(ctype.label))])])})),0)])]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"chart-icon pointer",staticStyle:{display:"inline-block"},attrs:{slot:"reference",title:_vm.$t("home.dashboard.change_chart"),"data-arrow":"true"},slot:"reference"},[_c("chart-icon",{attrs:{icon:_vm.currentChartType}})],1)])],1):_vm._e()])},FChartTypevue_type_template_id_4c453cc9_staticRenderFns=[],NewChartTypes=__webpack_require__(862230),chartIconvue_type_template_id_72b29ff0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["pie"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(928824)}}):"doughnut"===_vm.icon||"donut"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(629443)}}):"bar"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(341029)}}):"stackedbar"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(709333)}}):"histogram"===_vm.icon?_c("fc-icon",{staticClass:"chart-icon-new filter-theme-color",staticStyle:{border:"1.5px solid #ef508f","border-radius":"2px",display:"flex","justify-content":"center","align-items":"center"},attrs:{group:"chart-data",name:"histogram",color:"#ef508f",size:"17"}}):"groupedbar"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(717328)}}):"line"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(570678)}}):"area"===_vm.icon||"area-spline"===_vm.icon||"area-step"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(887025)}}):"progress"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(71761)}}):"heatMap"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(413273)}}):"cubsim"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(129816)}}):"tabular"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(407826)}}):"gauge"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(91677)}}):_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(570678)}})],1)},chartIconvue_type_template_id_72b29ff0_staticRenderFns=[],chartIconvue_type_script_lang_js={props:["icon"]},charts_chartIconvue_type_script_lang_js=chartIconvue_type_script_lang_js,chartIcon_component=(0,componentNormalizer/* default */.Z)(charts_chartIconvue_type_script_lang_js,chartIconvue_type_template_id_72b29ff0_render,chartIconvue_type_template_id_72b29ff0_staticRenderFns,!1,null,null,null)
/* harmony default export */,chartIcon=chartIcon_component.exports,FChartTypevue_type_script_lang_js={props:["options","multichartkey","skipTableType"],mixins:[NewChartTypes/* default */.Z],components:{ChartIcon:chartIcon},data:function(){return{typePopover:!1,defaultOnCombo:"combo"}},computed:{isRangeMode:function(){return 0!==this.options.dataPoints.filter((function(dP){return"rangeGroup"===dP.type})).length},isMultiMode:function(){return this.options&&"multi"===this.options.settings.chartMode},isCombo:function(){var _this=this,isCombo=this.isMultiMode?this.options.multichart[this.multichartkey]&&this.options.multichart[this.multichartkey].combo:this.options&&this.options.combo;return isCombo||this.allPoints.length&&this.allPoints.some((function(dp){return dp.chartType!==_this.allPoints[0].chartType}))},currentChartType:function(){return this.isMultiMode?this.isCombo?"combo":this.allPoints&&this.allPoints.length?this.allPoints[0].chartType:"area":this.options.type},allPoints:function(){var points=[];if(this.options){var dataPoints=this.options.dataPoints;if(this.isMultiMode){var keys=this.multichartkey.split("_"),type=keys[0],multiPointName=keys[1];dataPoints=dataPoints.filter((function(dp){return"datapoint"===type||"rangeGroup"===type?dp.key===multiPointName:dp.label===multiPointName}))}dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)}))}return points}},
// A lot of props is getting mutated, these states will be flushed on component
// remount, the parent component won't record it and send to the backend,
// as long as I don't run into some other problem, this is fine.
methods:{resetCombo:function(){var _this2=this;this.typePopover=!1,this.isMultiMode?this.$set(this.options.multichart[this.multichartkey],"combo",!1):this.$set(this.options,"combo",!1),this.allPoints.forEach((function(dp){
// dp.chartType = this.isMultiMode ? this.defaultOnCombo : ''
_this2.$set(dp,"chartType",_this2.isMultiMode?_this2.defaultOnCombo:"")})),this.isMultiMode||(this.options.type=this.defaultOnCombo),this.defaultOnCombo="combo"},onTypeChange:function(ctype){var _this3=this;if(this.typePopover=!1,"table"===ctype.value)this.options.settings.chart?this.options.settings.chart=!1:this.options.settings.chart=!0;else if(this.options.settings.chart=!0,"combo"===ctype.value){var currentType;this.isMultiMode?(this.$set(this.options.multichart[this.multichartkey],"combo",!0),currentType=this.allPoints[0].chartType):(this.$set(this.options,"combo",!0),currentType=this.options.type);var defaultType=currentType&&"pie"!==currentType&&"donut"!==currentType?currentType:"area";this.allPoints.forEach((function(dp){dp.chartType||(dp.chartType=defaultType)})),this.$nextTick((function(_){_this3.typePopover=!0}))}else this.isMultiMode?this.allPoints.forEach((function(dp){dp.chartType=ctype.value})):this.options.type=ctype.value;this.$emit("getOptions",ctype)}}},charts_FChartTypevue_type_script_lang_js=FChartTypevue_type_script_lang_js,FChartType_component=(0,componentNormalizer/* default */.Z)(charts_FChartTypevue_type_script_lang_js,FChartTypevue_type_template_id_4c453cc9_render,FChartTypevue_type_template_id_4c453cc9_staticRenderFns,!1,null,null,null)
/* harmony default export */,FChartType=FChartType_component.exports,JumpToHelper=__webpack_require__(921466),tooltip=__webpack_require__(460895),color_helper=__webpack_require__(794211),deepmerge=__webpack_require__(708634),formatter=__webpack_require__(676240),FNewChartvue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z,ReportDataUtil/* default */.Z],props:{updateWidget:{type:Function},resultObj:{},isWidget:{},showWidgetLegends:{},config:{},specialScatter:{},relatedAlarms:{},moduleName:{},drilldownParams:{},item:{Type:Object,default:function(){return{}}}},components:{FChartLegends:FChartLegends,FWidgetLegends:FWidgetLegends,FChartType:FChartType,FChartTitle:FChartTitle,DrilldownBreadcrumb:DrilldownBreadcrumb/* default */.Z},computed:{showWidget:function(){return!("undefined"!==typeof this.showWidgetLegends&&!this.showWidgetLegends)},isRegression:function(){return!!(this.$route.path.includes("regression")||this.resultObj&&this.resultObj.regressionConfig&&0!==this.resultObj.regressionConfig.length&&!0===this.resultObj.regression)},showAlarmTitle:function(){return!this.chartContext||!this.chartContext.options||!this.chartContext.options.hideAlarmTitle}},data:function(){return{chartContext:null,chartId:Math.random().toString(36).substr(2,9),c3:{params:null,chart:null},showAlarms:!1,updateTimeout:null}},mounted:function(){this.isRegression&&(this.hidecharttypechanger=!0),this.render()},beforeDestroy:function(){tooltip/* default */.Z.hideTooltip(),this.c3&&this.c3.chart&&this.c3.chart.destroy(),this.chartContext=null,this.c3.params=null,this.c3.chart=null},methods:{render:function(){var _this=this;this.data&&(this.chartContext=null,this.$nextTick((function(){_this.chartContext={},_this.chartContext.options=_this.getOptions(),_this.chartContext.dateRange=_this.dateRange,_this.chartContext.options.general&&_this.chartContext.options.general.hideZeroes?_this.chartContext.data=_this.formatZeroesInData(_this.data):_this.chartContext.data=_this.data,_this.chartContext.options.benchmark&&_this.chartContext.options.benchmark.show&&(_this.chartContext.reportVarianceData=_this.resultObj?_this.resultObj.reportData.aggr:null),_this.chartContext.xValueMode=_this.isXValueMode(_this.chartContext.options,_this.data),_this.options.defaultDurationUnit&&(_this.chartContext.defaultDurationUnit=_this.options.defaultDurationUnit),_this.chartContext.specialScatter=!!_this.specialScatter,_this.chartContext.unitMap=_this.getUnitMap(_this.options.dataPoints),_this.chartContext.enumMap=_this.getEnumMap(_this.options.dataPoints),_this.resultObj&&_this.resultObj.baselineData&&(_this.chartContext.baselineColors=_this.resultObj.baselineDataColors,_this.chartContext.baselineData=_this.resultObj.baselineData),_this.chartContext.openAlarm=function(alarmList){if(alarmList){var _step,alarmId=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(alarmList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var a=_step.value;alarmId.push(a.id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.jumpToAlarms(alarmId)}},"pie"!==_this.chartContext.options.type&&"donut"!==_this.chartContext.options.type||(_this.chartContext.options.padding.top=20),_this.resultObj&&_this.resultObj.Readingdp&&(_this.chartContext["Readingdp"]=_this.resultObj.Readingdp),_this.resultObj&&_this.resultObj.scatterConfig&&(_this.chartContext["scatterConfig"]=_this.resultObj.scatterConfig,_this.chartContext["xMap"]=_this.resultObj.xMap);var c3Params=c3_helper/* default */.Z.prepare(_this.chartContext);if(c3Params){var _c3Params$data$json$x,_c3Params,x=(0,lodash.cloneDeep)(null!==(_c3Params$data$json$x=null===(_c3Params=c3Params)||void 0===_c3Params||null===(_c3Params=_c3Params.data)||void 0===_c3Params||null===(_c3Params=_c3Params.json)||void 0===_c3Params?void 0:_c3Params.x)&&void 0!==_c3Params$data$json$x?_c3Params$data$json$x:{});c3Params.data.onclick=function(d){d["dataArray"]=x,_this.$emit("drilldown",d)}}_this.mergeOption&&(_this.chartContext.options.padding.left=_this.mergeOption.padding.left,_this.chartContext.options.padding.right=_this.mergeOption.padding.right,_this.chartContext.options.axis.x.label.text="Month",c3Params.axis.y.label.text="No of Work Request"),_this.isWidget&&(_this.chartContext.options.legend.show?c3Params.size.height=c3Params.size.height-50:c3Params.size.height=c3Params.size.height-20,_this.options.widgetLegend.show&&(c3Params.size.height=c3Params.size.height-100),_this.resultObj&&_this.resultObj.report.userFilters&&(c3Params.size.height=c3Params.size.height-65)),_this.drilldownParams&&(c3Params.size.height=c3Params.size.height-25,_this.isWidget&&(c3Params.size.height=c3Params.size.height-25)),"gauge"===_this.chartContext.options.type&&c3Params.size.height>350&&(c3Params.size.height=350);var self=_this,_this$chartContext$op=_this.chartContext.options,mode=_this$chartContext$op.common.mode,alarm=_this$chartContext$op.settings.alarm;self.showAlarms=1===mode&&alarm,_this.config&&_this.config.hasOwnProperty("showAlarms")&&(self.showAlarms=_this.config.showAlarms),self.showAlarms&&(_this.chartContext.alarms=_this.alarms,c3Params.size.height=c3Params.size.height-100);var alarmsParams=null;if(self.showAlarms&&(alarmsParams=c3_helper/* default */.Z.prepareBooleanChart(_this.chartContext,c3Params.data.json.x,_this.alarms),self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams))),self.relatedAlarms&&self.relatedAlarms.length)for(var idx in self.relatedAlarms)if(self.$refs["relatedAlarmsChartEle"]&&self.$refs["relatedAlarmsChartEle"][idx]){var relalarmsParams=c3_helper/* default */.Z.prepareBooleanChart(_this.chartContext,c3Params.data.json.x,self.relatedAlarms[idx]);relalarmsParams.bindto=self.$refs["relatedAlarmsChartEle"][idx],billboard.bb.generate(relalarmsParams)}if(_this.chartContext.options.customizeC3){var defaultOptions={},mergedOptions=deepmerge/* default */.Z.objectAssignDeep(defaultOptions,c3Params,_this.chartContext.options.customizeC3);c3Params=mergedOptions}var print=JSON.parse(_this.$getProperty(_this,"$route.query.printing")||null);if(self.$refs["newChartEle"]){c3Params.bindto=self.$refs["newChartEle"],self.isWidget&&self.$refs["chartLegend"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegend"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight);var width=self.$refs["newChartEle"].clientWidth;print&&!(0,validation/* isEmpty */.xb)(width)&&(c3Params.size.width=self.$refs["newChartEle"].clientWidth),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(_this.byPassSetting(c3Params))}else _this.$nextTick((function(){if(self.showAlarms&&self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams)),self.relatedAlarms&&self.relatedAlarms.length)for(var _idx in self.relatedAlarms)if(self.$refs["relatedAlarmsChartEle"]&&self.$refs["relatedAlarmsChartEle"][_idx]){var _relalarmsParams=c3_helper/* default */.Z.prepareBooleanChart(this.chartContext,c3Params.data.json.x,self.relatedAlarms[_idx]);_relalarmsParams.bindto=self.$refs["relatedAlarmsChartEle"][_idx],billboard.bb.generate(_relalarmsParams)}c3Params.bindto=self.$refs["newChartEle"];var width=self.$refs["newChartEle"].clientWidth;print&&!(0,validation/* isEmpty */.xb)(width)&&(c3Params.size.width=self.$refs["newChartEle"].clientWidth),self.isWidget&&self.$refs["chartLegend"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegend"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(this.byPassSetting(c3Params))}))})))},ontoggle:function(key,hiddenLegends){if(this.c3.params.ontoggle&&"function"===typeof this.c3.params.ontoggle){var callback=this.c3.params.ontoggle.bind(this.c3.chart.internal,key);callback()}if("bar"===this.chartContext.options.type&&this.chartContext.options.bar.showGroupTotal){var groupTotalData=c3_helper/* default */.Z.getGroupTotalDataPoint(this.c3.params,hiddenLegends);groupTotalData&&this.c3.chart.load({json:{group_total:groupTotalData}})}},byPassSetting:function(params){if(params&&params.data&&params.data.hasOwnProperty("labels")&&!0===params.data.labels){var formattedLabel={centered:!1,format:function(v){return Number.isInteger(v)?d3.format(",")(v):v?(0,formatter/* formatCurrency */.xG)(v):null}};this.$set(params.data,"labels",formattedLabel)}return params},getOptionsFromTypeChart:function(_ref){var chartTypeInt=_ref.chartTypeInt,item=this.item,updateWidget=this.updateWidget,itemClone=(0,lodash.cloneDeep)(item),dataOptions=itemClone.widget.dataOptions;dataOptions["charType"]=chartTypeInt,dataOptions["chartTypeInt"]=chartTypeInt,updateWidget(itemClone)},isXValueMode:function(options,data){if(("pie"===options.type||"donut"===options.type)&&data&&data.x&&2===Object.keys(data).length){if(options.xColorMap)return!0;for(var colors=color_helper/* default */.Z.newColorPicker(data.x.length),xColorMap={},i=0;i<data.x.length;i++){var xVal=data.x[i];xColorMap[xVal]=options.xColorMap&&options.xColorMap[xVal]?options.xColorMap[xVal]:colors[i]}return options.xColorMap=xColorMap,!0}return options.xColorMap=null,!1},reRender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),500)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.reRender()}}},charts_FNewChartvue_type_script_lang_js=FNewChartvue_type_script_lang_js,FNewChart_component=(0,componentNormalizer/* default */.Z)(charts_FNewChartvue_type_script_lang_js,FNewChartvue_type_template_id_07e8e6f8_scoped_true_render,FNewChartvue_type_template_id_07e8e6f8_scoped_true_staticRenderFns,!1,null,"07e8e6f8",null)
/* harmony default export */,FNewChart=FNewChart_component.exports,FMobileChart=__webpack_require__(242208),FMobileMultiChart=__webpack_require__(696593),FMultiChartvue_type_template_id_5689e070_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return"multi"===_vm.options.settings.chartMode||_vm.ismulti?_c("div",{staticClass:"height100"},[_vm.c3ParamsList&&!1!==_vm.options.settings.chart?_c("div",{staticClass:"f-multichart"},[_vm.showAlarms&&_vm.showAlarmTitle?_c("div",{staticClass:"fc-alarms-chart-title",style:"sensorrollupalarm"===_vm.moduleName?"color: #324056 !important;font-weight: bold;":""},[_vm._v(" "+_vm._s(_vm.$validation.isEmpty(_vm.alarms.barTitle)?"Alarms":_vm.alarms.barTitle)+" ")]):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showAlarms,expression:"showAlarms"}],ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart",on:{click:_vm.alarmDrilldown}}),_vm.relatedAlarms?_c("div",[_vm._l(_vm.relatedAlarms,(function(relAlarm,idx){return[_c("div",{key:idx,style:_vm.isWidget?"position: relative; top: 15px;":""},[_c("div",{staticClass:"fc-alarms-chart-title",staticStyle:{"text-transform":"capitalize",color:"#324056 !important"}},[_vm._v(" "+_vm._s(relAlarm?relAlarm.alarmTitle:"")+" ")]),_c("div",{ref:"relatedAlarmsChartEle",refInFor:!0,staticClass:"fc-alarms-chart pdf-chart"})])]}))],2):_vm._e(),_vm._l(_vm.c3ParamsList,(function(c3Param,index){return _c("div",{key:index,class:["f-multichart-print"]},[_vm.hidecharttypechanger||c3Param.data.booleanChart||c3Param.data.enumChart?_vm._e():_c("f-chart-type",{staticClass:"pT10",attrs:{options:_vm.options,multichartkey:c3Param.key}}),_vm.chartContext?_c("div",{staticStyle:{"text-align":"center"}},[_vm.chartList&&_vm.chartList[index]&&_vm.chartList[index].chart&&!_vm.options.legend.show?_c("div",{staticClass:"boolean-chart-title",style:{color:"#000"}},[_vm._v(" "+_vm._s(c3Param.label)+" ")]):_vm._e(),_vm.options.legend.show?_c("f-chart-legends",{ref:"chartLegend",refInFor:!0,class:{"boolean-chart":c3Param.data.booleanChart||c3Param.data.enumChart},attrs:{chart:_vm.chartList&&_vm.chartList[index]&&_vm.chartList[index].chart?_vm.chartList[index].chart:null,options:_vm.options,multichart:c3Param.key,config:_vm.config}}):_vm._e(),_c("div",{staticClass:"fc-newchart-container"},[_c("div",{ref:"newChartEle",refInFor:!0,staticClass:"fc-new-chart",class:{"fc-boolean-chart":c3Param.data.booleanChart||c3Param.data.enumChart,"hide-y2-axis":_vm.options&&_vm.options.multichart&&_vm.options.multichart[c3Param.key]&&_vm.options.multichart[c3Param.key].axis&&!1===_vm.options.multichart[c3Param.key].axis.showy2axis}})])],1):_vm._e()],1)})),_c("f-widget-legends",{ref:"newWidget",staticClass:"widget-legends",attrs:{reportVarianceData:_vm.resultObj?_vm.resultObj.reportData.aggr:null,data:_vm.data,options:_vm.options}})],2):_vm._e()]):_vm._e()},FMultiChartvue_type_template_id_5689e070_staticRenderFns=[],components_FWidgetLegends=(__webpack_require__(241830),__webpack_require__(547301)),components_FChartType=__webpack_require__(294309),FMultiChartvue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z],props:["resultObj","isWidget","booleanData","booleanAlarmsData","config","ismulti","relatedAlarms","alarms","moduleName"],components:{FChartLegends:FChartLegends,FWidgetLegends:components_FWidgetLegends/* default */.Z,FChartType:components_FChartType/* default */.Z},data:function(){return{chartContext:null,c3:{params:null,chart:null},c3ParamsList:null,chartList:[],showAlarms:!1,showBooleanAlarms:!1,updateTimeout:null}},mounted:function(){this.render()},computed:{showAlarmTitle:function(){return!this.chartContext||!this.chartContext.options||!this.chartContext.options.hideAlarmTitle}},beforeDestroy:function(){if(tooltip/* default */.Z.hideTooltip(),this.updateTimeout&&clearTimeout(this.updateTimeout),this.chartList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.chartList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var chart=_step.value;chart.chart&&chart.chart.destroy()}}catch(err){_iterator.e(err)}finally{_iterator.f()}}this.chartContext=null,this.c3ParamsList=null,this.chartList=null},methods:{render:function(){var _this=this;if(this.data){var chartContext={};chartContext.multichartUniqueKey=Math.random().toString(36).substr(2,9),chartContext.options=this.getOptions(),chartContext.dateRange=this.dateRange,chartContext.data=Object.freeze(this.data),this.resultObj&&this.resultObj.Readingdp&&(chartContext.Readingdp=this.resultObj.Readingdp),this.resultObj&&(this.resultObj.scatterConfig&&(chartContext.scatterConfig=this.resultObj.scatterConfig,chartContext.xMap=this.resultObj.xMap),this.resultObj.groupByMetrics&&(chartContext.groupByMetrics=!0)),chartContext.openAlarm=function(alarmList){if(alarmList){var _step2,alarmId=[],_iterator2=(0,createForOfIteratorHelper/* default */.Z)(alarmList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var a=_step2.value;alarmId.push(a.id)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}_this.$mobile||_this.jumpToAlarmsNew(alarmId)}},chartContext.booleanData=Object.freeze(this.booleanData),chartContext.unitMap=this.getUnitMap(this.options.dataPoints),chartContext.enumMap=this.getEnumMap(this.options.dataPoints),this.showAlarms=1===chartContext.options.common.mode&&chartContext.options.settings.alarm,this.showAlarms&&(chartContext.alarms=this.alarms,chartContext.options.size.height=chartContext.options.size.height-100),this.showBooleanAlarms=this.booleanAlarmsData&&this.booleanAlarmsData.regions&&this.booleanAlarmsData.regions.length&&1===chartContext.options.common.mode&&chartContext.options.settings.booleanAlarms,this.showBooleanAlarms&&(chartContext.booleanAlarmsData=this.booleanAlarmsData,chartContext.options.size.height=chartContext.options.size.height-100),this.isWidget&&(chartContext.options.legend.show?chartContext.options.size.height=chartContext.options.size.height-50:chartContext.options.size.height=chartContext.options.size.height-20,this.options.widgetLegend.show&&(chartContext.options.size.height=chartContext.options.size.height-100)),this.c3ParamsList=c3_helper/* default */.Z.prepareMultichart(chartContext),this.resultObj&&(this.resultObj.Readingdp||this.resultObj.scatterConfig)&&(this.c3ParamsList=this.c3ParamsList.filter((function(params){return!(0,validation/* isEmpty */.xb)(params.data.axes)}))),this.chartList=[],this.chartContext=chartContext;var self=this;this.$nextTick((function(){if(self.showAlarms){var alarmsParams=this.showBooleanAlarms?c3_helper/* default */.Z.prepareBooleanAlarmChart(chartContext,self.c3ParamsList[0].data.json.x,this.alarms):c3_helper/* default */.Z.prepareBooleanChart(chartContext,self.c3ParamsList[0].data.json.x,this.alarms);if(self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(Object.freeze(alarmsParams))),self.relatedAlarms&&self.relatedAlarms.length)for(var idx in self.relatedAlarms)if(self.$refs["relatedAlarmsChartEle"]&&self.$refs["relatedAlarmsChartEle"][idx]){var relalarmsParams=c3_helper/* default */.Z.prepareBooleanChart(this.chartContext,self.c3ParamsList[0].data.json.x,self.relatedAlarms[idx]);relalarmsParams.bindto=self.$refs["relatedAlarmsChartEle"][idx],billboard.bb.generate(relalarmsParams)}}self.$nextTick((function(){for(var j=0,i=0;i<self.c3ParamsList.length;i++){var c3Param=self.c3ParamsList[i];self.$refs["newChartEle"]&&self.$refs["newChartEle"][i]&&(c3Param.bindto=self.$refs["newChartEle"][i],!c3Param.data.booleanChart&&!c3Param.data.enumChart&&self.$refs["chartLegend"]&&self.$refs["chartLegend"][j]&&(c3Param.size.height=c3Param.size.height-self.$refs["chartLegend"][j++].$el.clientHeight,self.isWidget&&self.options&&self.options.widgetLegend.show&&(c3Param.size.height=c3Param.size.height+20)),self.chartList.push({params:c3Param,chart:billboard.bb.generate(Object.freeze(c3Param))}))}}))}))}},getIndividualChartHeight:function(){var height=100;if(this.size.height){var calcHeight=this.size.height/this.chartList.length;calcHeight>=100&&(height=calcHeight)}return height},reRender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),1e3)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.reRender()},alarmDrilldown:function(){this.$emit("alarmDrilldown")}}},charts_FMultiChartvue_type_script_lang_js=FMultiChartvue_type_script_lang_js,FMultiChart_component=(0,componentNormalizer/* default */.Z)(charts_FMultiChartvue_type_script_lang_js,FMultiChartvue_type_template_id_5689e070_render,FMultiChartvue_type_template_id_5689e070_staticRenderFns,!1,null,null,null)
/* harmony default export */,FMultiChart=FMultiChart_component.exports,FTabularReportNew=__webpack_require__(979),NewDateHelper=__webpack_require__(105534),FNewChartSettings=__webpack_require__(83322),FUserFiltersvue_type_template_id_99d273c6_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"row report-user-filters"},[_c("div",{staticClass:"col-12"},[_c("div",["site"===_vm.liveFilterField&&"multi"===_vm.liveFilterType?_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-userfilter-select",attrs:{clearable:"",multiple:"","collapse-tags":"",placeholder:"All Sites",size:"mini"},on:{change:_vm.applyFilter},model:{value:_vm.reportFilter.siteFilter,callback:function($$v){_vm.$set(_vm.reportFilter,"siteFilter",$$v)},expression:"reportFilter.siteFilter"}},_vm._l(_vm.filterData,(function(d,index){return _c("el-option",{key:index,attrs:{label:d.label,value:d.value}})})),1):_vm._e(),"site"===_vm.liveFilterField&&"single"===_vm.liveFilterType?_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-userfilter-select",attrs:{clearable:"","collapse-tags":"",placeholder:"All Sites",size:"mini"},on:{change:_vm.applyFilter},model:{value:_vm.reportFilter.siteId,callback:function($$v){_vm.$set(_vm.reportFilter,"siteId",$$v)},expression:"reportFilter.siteId"}},_vm._l(_vm.filterData,(function(d,index){return _c("el-option",{key:index,attrs:{label:d.label,value:d.value}})})),1):_vm._e(),"building"===_vm.liveFilterField&&"multi"===_vm.liveFilterType?_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-userfilter-select",attrs:{clearable:"",multiple:"","collapse-tags":"",placeholder:"All Buildings",size:"mini"},on:{change:_vm.applyFilter},model:{value:_vm.reportFilter.buildingFilter,callback:function($$v){_vm.$set(_vm.reportFilter,"buildingFilter",$$v)},expression:"reportFilter.buildingFilter"}},_vm._l(_vm.filterData,(function(d,index){return _c("el-option",{key:index,attrs:{label:d.name,value:d.id}})})),1):_vm._e(),"building"===_vm.liveFilterField&&"single"===_vm.liveFilterType?_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-userfilter-select",attrs:{clearable:"","collapse-tags":"",placeholder:"All Buildings",size:"mini"},on:{change:_vm.applyFilter},model:{value:_vm.reportFilter.buildingId,callback:function($$v){_vm.$set(_vm.reportFilter,"buildingId",$$v)},expression:"reportFilter.buildingId"}},_vm._l(_vm.filterData,(function(d,index){return _c("el-option",{key:index,attrs:{label:d.name,value:d.id}})})),1):_vm._e(),"asset"===_vm.liveFilterField&&"multi"===_vm.liveFilterType?_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-userfilter-select",attrs:{clearable:"",multiple:"","collapse-tags":"",placeholder:"All Assets",size:"mini"},on:{change:_vm.applyFilter},model:{value:_vm.reportFilter.assetFilter,callback:function($$v){_vm.$set(_vm.reportFilter,"assetFilter",$$v)},expression:"reportFilter.assetFilter"}},_vm._l(_vm.filterData,(function(d,index){return _c("el-option",{key:index,attrs:{label:d.name,value:d.id}})})),1):_vm._e(),"asset"===_vm.liveFilterField&&"single"===_vm.liveFilterType?_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-userfilter-select",attrs:{clearable:"","collapse-tags":"",placeholder:"All Assets",size:"mini"},on:{change:_vm.applyFilter},model:{value:_vm.reportFilter.assetId,callback:function($$v){_vm.$set(_vm.reportFilter,"assetId",$$v)},expression:"reportFilter.assetId"}},_vm._l(_vm.filterData,(function(d,index){return _c("el-option",{key:index,attrs:{label:d.name,value:d.id}})})),1):_vm._e()],1)])])},FUserFiltersvue_type_template_id_99d273c6_staticRenderFns=[],clone=__webpack_require__(766678),clone_default=__webpack_require__.n(clone),FUserFiltersvue_type_script_lang_js={props:["report","filters"],mixins:[NewDataFormatHelper/* default */.Z],data:function(){return{reportFilter:{siteFilter:[],siteId:null,buildingFilter:[],buildingId:null,categoryFilter:[],assetFilter:[],assetId:null},filterData:[],readings:null,sites:[],buildings:[],urlParams:{perPage:50,page:1,viewName:"hidden-all"}}},computed:{liveFilterField:function(){var _this$report;return this.report&&null!==this&&void 0!==this&&null!==(_this$report=this.report)&&void 0!==_this$report&&null!==(_this$report=_this$report.options)&&void 0!==_this$report&&null!==(_this$report=_this$report.common)&&void 0!==_this$report&&null!==(_this$report=_this$report.filters)&&void 0!==_this$report&&null!==(_this$report=_this$report.filterState)&&void 0!==_this$report&&_this$report.liveFilterField?this.report.options.common.filters.filterState.liveFilterField:null},liveFilterType:function(){var _this$report2;return this.report&&null!==this&&void 0!==this&&null!==(_this$report2=this.report)&&void 0!==_this$report2&&null!==(_this$report2=_this$report2.options)&&void 0!==_this$report2&&null!==(_this$report2=_this$report2.common)&&void 0!==_this$report2&&null!==(_this$report2=_this$report2.filters)&&void 0!==_this$report2&&null!==(_this$report2=_this$report2.filterState)&&void 0!==_this$report2&&_this$report2.liveFilterType?this.report.options.common.filters.filterState.liveFilterType:null}},created:function(){var _this=this;Promise.all([this.loadDefaultSites(),this.loadDefaultBuilding()]).then((function(){return _this.loadFilterData()})).then((function(){_this.initProps()}))},mounted:function(){},methods:{loadDefaultBuilding:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _data$pickList,_yield$API$get,data,error,_this2$buildings,params,_yield$API$get2,_data,_error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,api/* API */.bl.get("/v3/picklist/building",_this2.urlParams,{cacheTimeout:0});case 2:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||!((null===data||void 0===data||null===(_data$pickList=data.pickList)||void 0===_data$pickList?void 0:_data$pickList.length)>0)){_context.next=16;break}if(_this2.buildings=data.pickList,50!=(null===(_this2$buildings=_this2.buildings)||void 0===_this2$buildings?void 0:_this2$buildings.length)){_context.next=16;break}return params=cloneDeep_default()(_this2.urlParams),params.page=2,_context.next=12,api/* API */.bl.get("/v3/picklist/building",params,{cacheTimeout:0});case 12:_yield$API$get2=_context.sent,_data=_yield$API$get2.data,_error=_yield$API$get2.error,!_error&&(null===_data||void 0===_data?void 0:_data.pickList.length)>0&&Array.prototype.push.apply(_this2.buildings,_data.pickList);case 16:case"end":return _context.stop()}}),_callee)})))()},loadDefaultSites:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _data$pickList2,_yield$API$get3,data,error,_this3$sites,params,_yield$API$get4,_data2,_error2;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/v3/picklist/site",_this3.urlParams,{cacheTimeout:0});case 2:if(_yield$API$get3=_context2.sent,data=_yield$API$get3.data,error=_yield$API$get3.error,error||!((null===data||void 0===data||null===(_data$pickList2=data.pickList)||void 0===_data$pickList2?void 0:_data$pickList2.length)>0)){_context2.next=16;break}if(_this3.sites=data.pickList,50!=(null===(_this3$sites=_this3.sites)||void 0===_this3$sites?void 0:_this3$sites.length)){_context2.next=16;break}return params=cloneDeep_default()(_this3.urlParams),params.page=2,_context2.next=12,api/* API */.bl.get("/v3/picklist/site",params,{cacheTimeout:0});case 12:_yield$API$get4=_context2.sent,_data2=_yield$API$get4.data,_error2=_yield$API$get4.error,!_error2&&(null===_data2||void 0===_data2?void 0:_data2.pickList.length)>0&&Array.prototype.push.apply(_this3.sites,_data2.pickList);case 16:case"end":return _context2.stop()}}),_callee2)})))()},loadFilterData:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var sites,buildingList,buildings,self,assets,_data$pickList3,selected_assets,_iterator,_step,aId,filters,params,_yield$API$get5,data,error,_yield$API$get6,_data3,_error3,assetList,assets_with_category,_iterator2,_step2,category_id,asset_id,_aId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if("site"!==_this4.liveFilterField){_context3.next=5;break}sites=clone_default()(_this4.sites)||[],_this4.report.options.common.filters.filterState&&_this4.report.options.common.filters.filterState.siteFilter&&_this4.report.options.common.filters.filterState.siteFilter.length?_this4.filterData=sites.filter((function(st){return _this4.report.options.common.filters.filterState.siteFilter.indexOf(st.value)>=0})):_this4.filterData=sites,_context3.next=36;break;case 5:if("building"!==_this4.liveFilterField){_context3.next=12;break}buildingList=clone_default()(_this4.buildings)||[],buildings=[],_this4.report.options.common.filters.filterState&&_this4.report.options.common.filters.filterState.buildingFilter&&_this4.report.options.common.filters.filterState.buildingFilter.length?_this4.filterData=buildingList.filter((function(building){_this4.report.options.common.filters.filterState.buildingFilter.indexOf(building.value)&&buildings.push({id:building.value,name:building.label})})):buildingList.filter((function(building){buildings.push({id:building.value,name:building.label})})),_this4.filterData=buildings,_context3.next=36;break;case 12:if("asset"!==_this4.liveFilterField){_context3.next=36;break}if(_this4.readings){_context3.next=36;break}if(self=_this4,assets=[],!(self.report.options.common.filters.filterState&&self.report.options.common.filters.filterState.assetFilter&&self.report.options.common.filters.filterState.assetFilter.length)){_context3.next=30;break}selected_assets=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(self.report.options.common.filters.filterState.assetFilter);try{for(_iterator.s();!(_step=_iterator.n()).done;)aId=_step.value,aId>0&&selected_assets.push(aId+"")}catch(err){_iterator.e(err)}finally{_iterator.f()}return filters=JSON.stringify({id:{operatorId:36,value:selected_assets}}),params={filters:filters},_context3.next=24,api/* API */.bl.get("/v3/picklist/asset",params,{cacheTimeout:0});case 24:_yield$API$get5=_context3.sent,data=_yield$API$get5.data,error=_yield$API$get5.error,!error&&(null===data||void 0===data||null===(_data$pickList3=data.pickList)||void 0===_data$pickList3?void 0:_data$pickList3.length)>0&&(data.pickList.forEach((function(element){assets.push({id:element.value,name:element.label})})),self.filterData=assets),_context3.next=36;break;case 30:return _context3.next=32,api/* API */.bl.get("/asset/getreadings");case 32:if(_yield$API$get6=_context3.sent,_data3=_yield$API$get6.data,_error3=_yield$API$get6.error,!_error3&&_data3){if(assetList=_data3.assets,self.report.options.common.filters.filterState&&self.report.options.common.filters.filterState.categoryFilter&&self.report.options.common.filters.filterState.categoryFilter.length){assets_with_category=_data3.categoryWithAssets,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(self.report.options.common.filters.filterState.categoryFilter);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;)if(category_id=_step2.value,assets_with_category&&assets_with_category[category_id])for(asset_id in assets_with_category[category_id])assetList&&assetList[asset_id+""]&&assets.push({id:Number(asset_id),name:assetList[asset_id+""]})}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}else for(_aId in assetList)assets.push({id:Number(_aId),name:assetList[_aId+""]});self.filterData=assets}case 36:_this4.$emit("filterData",_this4.filterData);case 37:case"end":return _context3.stop()}}),_callee3)})))()},initProps:function(){var _this$filters;this.filters&&Object.keys(this.filters).length&&("single"==this.liveFilterType?(this.reportFilter.assetId=this.filters.assetFilter.length?this.filters.assetFilter[0]:null,this.reportFilter.buildingId=this.filters.buildingFilter.length?this.filters.buildingFilter[0]:null,this.reportFilter.siteId=this.filters.siteFilter.length?this.filters.siteFilter[0]:null):(this.reportFilter.assetFilter=this.filters.assetFilter.length?this.filters.assetFilter:[],this.reportFilter.buildingFilter=this.filters.buildingFilter.length?this.filters.buildingFilter:[],this.reportFilter.siteFilter=this.filters.siteFilter.length?this.filters.siteFilter:[]),null!==(_this$filters=this.filters)&&void 0!==_this$filters&&_this$filters.ttimeFilter&&Object.keys(this.filters.ttimeFilter).length>0&&(this.reportFilter.ttimeFilter=this.filters.ttimeFilter));this.$emit("userFilterLoaded")},applyFilter:function(){"site"===this.liveFilterField?"single"===this.liveFilterType&&(this.reportFilter.siteId?this.reportFilter.siteFilter=[this.reportFilter.siteId]:this.reportFilter.siteFilter=[]):"building"===this.liveFilterField?"single"===this.liveFilterType&&(this.reportFilter.buildingId?this.reportFilter.buildingFilter=[this.reportFilter.buildingId]:this.reportFilter.buildingFilter=[]):"asset"===this.liveFilterField&&"single"===this.liveFilterType&&(this.reportFilter.assetId?this.reportFilter.assetFilter=[this.reportFilter.assetId]:this.reportFilter.assetFilter=[]);var filters=this.prepareUserFilterProps(this.reportFilter,this.report,!0);this.$emit("applyFilter",filters)}}},reports_FUserFiltersvue_type_script_lang_js=FUserFiltersvue_type_script_lang_js,FUserFilters_component=(0,componentNormalizer/* default */.Z)(reports_FUserFiltersvue_type_script_lang_js,FUserFiltersvue_type_template_id_99d273c6_render,FUserFiltersvue_type_template_id_99d273c6_staticRenderFns,!1,null,null,null)
/* harmony default export */,FUserFilters=FUserFilters_component.exports,NewReportSummaryHelper=__webpack_require__(601458),MultipleRegressionAnalysis=__webpack_require__(974102),InlineSvg=__webpack_require__(586166),FNewHeatMapvue_type_template_id_0ced6ecf_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return 0!==_vm.heatMapStore.length?_c("div",{staticClass:"height100 heatmap"},[_vm.hidecharttypechanger?_vm._e():_c("f-chart-type",{staticClass:"charttypechanger fc-new-chart-type-single",attrs:{options:this.reportObject?this.reportObject.options:null},on:{getOptions:_vm.getOptionsFromTypeChart}}),_c("div",{ref:"heatmapDiv",staticClass:"height100"})],1):_vm._e()},FNewHeatMapvue_type_template_id_0ced6ecf_staticRenderFns=[],debounce=(__webpack_require__(450886),__webpack_require__(865137),__webpack_require__(23279)),debounce_default=__webpack_require__.n(debounce),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),ckmeans_min=__webpack_require__(196009),vue_runtime_esm=(__webpack_require__(114769),__webpack_require__(720144)),FNewHeatMapvue_type_script_lang_js={data:function(){return{constantMargins:{top:30,right:55,bottom:100,left:55},clientWidth:980,clientHeight:620,cellWidth:50,cellHeight:30,xformat:"hours",hidecharttypechanger:!0,gridSize:0,xAlias:null,yAliasList:[],updateTimeout:null,heatMapStore:[],selectedLabel:null,groupLabels:[],defaultColors:["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"]}},mixins:[ReportDataUtil/* default */.Z],components:{FChartType:components_FChartType/* default */.Z},mounted:function(){this.render()},props:{resultObject:{},reportObject:{},config:{},widgetBodyDimension:{type:Object,required:!0}},watch:{widgetBodyDimension:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var deboundedFunc=debounce_default()(this.render,300);deboundedFunc()}}},computed:{width:function(){var width=this.widgetBodyDimension.widgetBodyWidth;return width},height:function(){var height=this.widgetBodyDimension.widgetBodyHeight;return height},chosenColors:function(){if(this.reportObject.options.heatMapOptions){var key=this.reportObject.options.heatMapOptions.chosenColors;return this.reportObject.options.heatMapOptions.Colors[key]}return this.defaultColors},heatMapMinValue:function(){return this.reportObject.options.heatMapOptions&&null!==this.reportObject.options.heatMapOptions.minValue&&""!==this.reportObject.options.heatMapOptions.minValue?this.reportObject.options.heatMapOptions.minValue:null},heatMapMaxValue:function(){return this.reportObject.options.heatMapOptions&&null!==this.reportObject.options.heatMapOptions.maxValue&&""!==this.reportObject.options.heatMapOptions.maxValue?this.reportObject.options.heatMapOptions.maxValue:null}},methods:{render:function(){var _this=this;this.reportObject&&(this.loadHeatMapStore(),this.$nextTick((function(){if(_this.resultObject){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(_this.resultObject.report.dataPoints);try{for(_iterator.s();!(_step=_iterator.n()).done;){var dataPoint=_step.value;_this.yAliasList.push(dataPoint.aliases.actual)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.xAlias="x"}_this.drawHeatMap()})))},loadHeatMapStore:function(){this.heatMapStore=this.reportObject.options.dataPoints},resize:function(){this.rerender()},rerender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),500)},groupValues:function(minValue,maxValue,n){for(var deviation=(maxValue-minValue)/n,group=[],i=0;i<n;i++){var temp=minValue+i*deviation;group.push(temp)}return group},drawHeatMap:function(){var _this3=this;Date.now();this.$mobile&&(this.constantMargins.left=30,this.constantMargins.right=20,this.constantMargins.top=10);var _step2,width=(null!==this.width&&this.width>0?this.width:this.clientWidth)-(this.constantMargins.left+this.constantMargins.right),height=(null!==this.height&&this.height>0?this.height:this.clientHeight)-(this.constantMargins.top+this.constantMargins.bottom),dataPoints=this.resultObject.report.dataPoints,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(dataPoints);try{var _loop=function(){var dp=_step2.value,unit=(dataPoints.indexOf(dp),null!==dp.yAxis.unitStr?dp.yAxis.unitStr:" "),isContinous=5===_this3.resultObject.report.dataPoints[0].xAxis.dataType||6===_this3.resultObject.report.dataPoints[0].xAxis.dataType,dataAlias=dp.aliases.actual,yMax=_this3.resultObject.reportData.aggr[dataAlias+".max"],yMin=_this3.resultObject.reportData.aggr[dataAlias+".min"];yMin=_this3.reportObject.options.heatMapOptions&&null!==_this3.reportObject.options.heatMapOptions.minValue&&""!==_this3.reportObject.options.heatMapOptions.minValue?_this3.reportObject.options.heatMapOptions.minValue:yMin,yMax=_this3.reportObject.options.heatMapOptions&&null!=_this3.reportObject.options.heatMapOptions.maxValue&&""!==_this3.reportObject.options.heatMapOptions.maxValue?_this3.reportObject.options.heatMapOptions.maxValue:yMax,2===_this3.resultObject.report.type?"hourly"===_this3.reportObject.dateRange.period?_this3.xformat="hours":"daily"===_this3.reportObject.dateRange.period?_this3.xformat="days":_this3.xformat="hours":_this3.xformat=_this3.resultObject&&_this3.resultObject.report&&_this3.resultObject.report.hmAggr&&null!==_this3.resultObject.report.hmAggr?_this3.resultObject.report.hmAggr:"hours";var dataWithAxis=_this3.transformDataForHeatMap(_this3.reportObject,_this3.resultObject.reportData.heatMapData,"X",dp.aliases.actual,isContinous,_this3.xformat),transformedData=dataWithAxis[0],xD=dataWithAxis[1],cellWidth=width/xD.length,x=d3.scaleBand().range([0,width]).domain(xD).padding(.005),clusterData=null;2===_this3.resultObject.report.type?(_this3.hidecharttypechanger=!1,clusterData=transformedData.filter((function(data){return null!==data.value})).map((function(data){return parseFloat(data.value)})),yMin=d3.min(clusterData),yMax=d3.max(clusterData),clusterData.sort()):clusterData=transformedData.filter((function(data){return null!==data.value&&data.value>=yMin&&data.value<=yMax})).map((function(data){return data.value}));var clusters=null;if(!(clusterData.length>5)||null!==_this3.heatMapMinValue&&""!==_this3.heatMapMinValue||null!==_this3.heatMapMaxValue&&""!==_this3.heatMapMaxValue)if(null!==_this3.heatMapMinValue&&""!==_this3.heatMapMinValue||null!==_this3.heatMapMaxValue&&""!==_this3.heatMapMaxValue){var minValue=null===_this3.heatMapMinValue||""===_this3.heatMapMinValue?d3.min(clusterData):_this3.heatMapMinValue,maxValue=null===_this3.heatMapMaxValue||""===_this3.heatMapMaxValue?d3.max(clusterData):_this3.heatMapMaxValue;clusters=_this3.groupValues(minValue,maxValue,5)}
// if (clusters && clusters[4] < yMax) {
//   clusters.push(yMax)
// }
else clusters=clusterData;else clusters=(0,ckmeans_min/* default */.Z)(clusterData,5);var yData=[];"hourly"===_this3.reportObject.dateRange.period&&(["month","year","quarter"].includes(_this3.reportObject.dateRange.operationOn)||"day"===_this3.reportObject.dateRange.operationOn&&_this3.reportObject.dateRange.offset>=32)?yData=dataWithAxis[2][0]:"weeks"===_this3.xformat&&["month","year","quarter"].includes(_this3.reportObject.dateRange.operationOn)?(yData=dataWithAxis[2][0],yData.sort()):yData=dataWithAxis[2];var cellHeight=height/yData.length;cellHeight>_this3.cellHeight&&(height=_this3.cellHeight*yData.length,cellHeight=_this3.cellHeight);var y=d3.scaleBand().range([0,height]).domain(yData).padding(.005),myColor=d3.scaleLinear().range(_this3.chosenColors).domain(clusters),border=1,bordercolor="#CCCCCC";_this3.$refs["heatmapDiv"].innerHTML="";var svg=d3.select(_this3.$refs["heatmapDiv"]).append("svg").attr("width",width+_this3.constantMargins.right+_this3.constantMargins.left).attr("height",height+_this3.constantMargins.top+_this3.constantMargins.bottom-10).attr("border",border).attr("class",_this3.$mobile?"":"widget-heatmap").append("g").attr("transform","translate("+_this3.constantMargins.left+","+_this3.constantMargins.top+")");svg.append("rect").attr("x",0).attr("y",0).attr("height",height).attr("width",width).style("stroke",bordercolor).style("fill","none").style("stroke-width",border);if("hours"===_this3.xformat){var xAxis=_this3.$mobile?["12a","4a","8a","12p","4p","8p","11p"]:["12a","1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12p","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p"],x1=d3.scaleBand().range([0,width]).domain(xAxis).padding(.005);svg.append("g").attr("class",_this3.$mobile?"xaxis":"x axis").call(d3.axisTop(x1).tickSize([0])).append("text").attr("class","label").attr("text-anchor","start")}else if("days"===_this3.xformat&&_this3.$mobile){var _xAxis=["01","06","11","16","21","26","31"],_x=d3.scaleBand().range([0,width]).domain(_xAxis).padding(.005);svg.append("g").attr("class",_this3.$mobile?"xaxis":"x axis").call(d3.axisTop(_x).tickSize([0])).append("text").attr("class","label").attr("text-anchor","start")}else svg.append("g").attr("class",_this3.$mobile?"xaxis":"x axis").call(d3.axisTop(x).tickSize([0])).append("text").attr("class","label").attr("text-anchor","start");if("hourly"===_this3.reportObject.dateRange.period&&(["month","year","quarter"].includes(_this3.reportObject.dateRange.operationOn)||"day"===_this3.reportObject.dateRange.operationOn&&_this3.reportObject.dateRange.offset>=32)){var y1=cellHeight<20?d3.scaleBand().range([0,height]).domain(dataWithAxis[2][1]).padding(.01):d3.scaleBand().range([0,height]).domain(dataWithAxis[2][0]).padding(.01);svg.append("g").attr("class","y axis").call(d3.axisLeft(y1).tickSize([0])).append("text").attr("class","label").attr("text-anchor","end").attr("transform","translate(0,90)")}else if("weeks"===_this3.xformat&&["month","year","quarter"].includes(_this3.reportObject.dateRange.operationOn)){var _y=cellHeight<20?d3.scaleBand().range([0,height]).domain(dataWithAxis[2][1]).padding(.01):d3.scaleBand().range([0,height]).domain(dataWithAxis[2][0]).padding(.01);svg.append("g").attr("class","y axis").call(d3.axisLeft(_y).tickSize([0])).append("text").attr("class","label").attr("text-anchor","end").attr("transform","translate(0,90)")}else svg.append("g").attr("class","y axis").call(d3.axisLeft(y).tickSize([0])).append("text").attr("class","label").attr("text-anchor","end");var self=_this3;svg.selectAll().data(transformedData,(function(d){d["X"],d["Y"]})).enter().append("rect").attr("x",(function(d){return x(d["X"])})).attr("y",(function(d){return y(d["Y"])})).attr("width",x.bandwidth()>cellWidth?cellWidth:x.bandwidth()).attr("height",y.bandwidth()>cellHeight?cellHeight:y.bandwidth()).style("stroke","#CCCCCC").style("fill","none").style("stroke-width",.05).style("fill",(function(d){var c=null!==d.value?myColor(d.value):window.localStorage&&"black"===window.localStorage.theme?"#090f2e":"#FFFFFF";return null!==d.value&&d.value<yMin?c=myColor(clusters[0]):null!==d.value&&d.value>yMax&&(c=myColor(clusters[4])),c})).on("mouseover",(function(d){var tooltipData=[{label:d["xTitle"],value:moment_timezone_default()(d["originalValue"]).tz(vue_runtime_esm["default"].prototype.$timezone).format(self.getTooltipFormat())},{label:d["yTitle"],value:null!==d.value?d["value"]+" "+unit:null!==d.violated_value?d["violated_value"]+" "+unit+" (violated value)":"No data"}],tooltipConfig={position:{left:d3.event.pageX,top:d3.event.pageY},data:tooltipData,color:self.getTooltipColor(d.value,myColor,yMin,yMax,clusters)};tooltip/* default */.Z.showTooltip(tooltipConfig)})).on("mouseout",(function(d){tooltip/* default */.Z.hideTooltip()}));var svgDefs=svg.append("defs"),legendref="legendGradient"+Date.now(),mainGradient=svgDefs.append("linearGradient").attr("id",legendref);mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[0])})).attr("offset","0%"),mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[1])})).attr("offset","25%"),mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[2])})).attr("offset","50%"),mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[3])})).attr("offset","75%"),mainGradient.append("stop").style("stop-color",(function(d){return myColor(clusters[4])})).attr("offset","100%");var legendContainer=svg.append("g"),legend=legendContainer.selectAll(".heatLegend").data(clusters),legendSection=legend.enter().append("g").attr("class","heatLegend"),min=_this3.getRoundedNumber(yMin,"floor"),max=_this3.getRoundedNumber(yMax,"ceil");legendSection.append("rect").attr("x",(function(d,i){return self.$mobile?0:width/4})).attr("y",(function(d){return height+40})).attr("width",self.$mobile?width:width/2).attr("height",10).style("fill","url(#"+legendref+")"),legendSection.append("text").attr("class","legendLabel").attr("x",(function(d){return self.$mobile?0:width/4})).attr("y",(function(d){return height+70})).text((function(d){return min+" "+unit})),
// let textWidth = max.node().getComputedTextLength()
// console.log("textWidth",textWidth)
legendSection.append("text").text((function(d){return max+" "+unit})).attr("class","legendLabel").attr("x",(function(d){return self.$mobile?width-this.getComputedTextLength():width/4+width/2-this.getComputedTextLength()})).attr("y",(function(d){return height+70}))};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}},getTooltipColor:function(value,myColor,yMin,yMax,clusters){var c=null!==value?myColor(value):"#FFFFFF";return null!==value&&value<yMin?c=myColor(clusters[0]):null!==value&&value>yMax&&(c=myColor(clusters[4])),c},getTooltipFormat:function(){switch(this.xformat){case"hours":return"dddd, MMM D, YYYY h a";case"days":return"dddd, MMM D, YYYY";case"weeks":return"dddd, MMM D, [W]ww gggg";default:return"LLLL"}},getOptionsFromTypeChart:function(options,ctype){
//to set the chart type based on the widget
this.config&&this.config.widget&&this.config.widget.dataOptions&&(this.config.widget.dataOptions.chartType=ctype.chartTypeInt,this.config.widget.dataOptions.chartTypeInt=ctype.chartTypeInt)}}},reports_FNewHeatMapvue_type_script_lang_js=FNewHeatMapvue_type_script_lang_js,FNewHeatMap_component=(0,componentNormalizer/* default */.Z)(reports_FNewHeatMapvue_type_script_lang_js,FNewHeatMapvue_type_template_id_0ced6ecf_render,FNewHeatMapvue_type_template_id_0ced6ecf_staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewHeatMap=FNewHeatMap_component.exports,FTreeMapvue_type_template_id_65dba227_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"ftree-map-page"},[0!==_vm.treeMapStore.length?_c("div",{staticClass:"height100 treemap"},[_c("div",{ref:"treemapDiv",staticClass:"height100"})]):_vm._e(),!_vm.$mobile&&_vm.reportObject&&_vm.reportObject.options&&_vm.reportObject.options.heatMapOptions&&_vm.reportObject.options.heatMapOptions.showWidgetLegends?_c("f-widget-legends",{ref:"newWidget",staticClass:"widget-legends"}):_vm._e()],1)},FTreeMapvue_type_template_id_65dba227_staticRenderFns=[],FWidgetLegendsOptimize=(__webpack_require__(919649),__webpack_require__(862579)),FTreeMapvue_type_script_lang_js=(__webpack_require__(503162),__webpack_require__(216339),{components:{FWidgetLegends:FWidgetLegendsOptimize/* default */.Z},mixins:[ReportDataUtil/* default */.Z],data:function(){return{constantMargins:{top:10,right:35,bottom:70,left:35},clientWidth:980,clientHeight:500,cellWidth:50,cellHeight:30,treeMapStore:[],xAlias:null,yAliasList:[],defaultColors:["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"],strokeWidth:1,strokeColor:"white",activeParentStrokeWidth:3,activeParentStrokeColor:"white",svg:null,xScale:null,yScale:null,offset:0,svgwidth:0,svgheigth:0,yOffset:0,xOffset:0,tTime:1e3,colorScale:null,myColor:null,ancestorClicked:!1,parentXScale:null,parentYScale:null,grandparent:null,legendSection:null,yMax:null,yMin:null}},mounted:function(){this.render()},computed:{width:function(){var width=this.widgetBodyDimension.widgetBodyWidth;return width},height:function(){var topMargin=25,height=this.widgetBodyDimension.widgetBodyHeight;return height-topMargin},chosenColors:function(){if(this.reportObject.options.heatMapOptions){var key=this.reportObject.options.heatMapOptions.chosenColors;if(this.reportObject.options.heatMapOptions.reversePallete){var reversePallete=this.reportObject.options.heatMapOptions.Colors[key].slice();return reversePallete.reverse()}return this.reportObject.options.heatMapOptions.Colors[key]}return this.defaultColors},textColor:function(){switch(this.reportObject.options.heatMapOptions.chosenColors){case"Default":case"Palette 7":case"Palette 12":case"Palette 14":case"Palette 15":return"#000";default:return"#fff"}},textMode:function(){return this.reportObject.options.heatMapOptions&&this.reportObject.options.heatMapOptions.treemapTextMode?this.reportObject.options.heatMapOptions.treemapTextMode:1},isModuleReport:function(){return!(!this.resultObject||!this.resultObject.report||2!==this.resultObject.report.type)}},props:{resultObject:{},reportObject:{},widgetBodyDimension:{type:Object,required:!0}},watch:{widgetBodyDimension:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var deboundedFunc=debounce_default()(this.render,300);deboundedFunc()}}},methods:{render:function(){var _this=this;this.reportObject&&(this.reportObject.options.type="treemap",this.yAliasList=[],this.loadTreeMapStore(),this.$nextTick((function(){if(_this.resultObject){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(_this.resultObject.report.dataPoints);try{for(_iterator.s();!(_step=_iterator.n()).done;){var dataPoint=_step.value;_this.yAliasList.push(dataPoint.aliases.actual)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.xAlias="x"}_this.drawTreeMap(),_this.reportObject.options&&_this.reportObject.options.heatMapOptions&&_this.reportObject.options.heatMapOptions.showWidgetLegends&&_this.$refs["newWidget"]&&_this.$refs["newWidget"].value(null,_this.reportObject.data,_this.reportObject.options,_this.resultObject?_this.resultObject.reportData.aggr:null)})))},loadTreeMapStore:function(){this.treeMapStore=this.reportObject.options.dataPoints},resize:function(){this.rerender()},rerender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),500)},drawTreeMap:function(){var _this3=this;this.$mobile?(this.constantMargins.left=10,this.constantMargins.right=10,this.reportObject.options.heatMapOptions.showColorScale?this.constantMargins.bottom=50:this.constantMargins.bottom=10,this.reportObject.options.heatMapOptions.showGrandParent?this.constantMargins.top=30:this.constantMargins.top=10):this.reportObject.options.heatMapOptions&&null!==this.height&&this.height>0&&(this.reportObject.options.heatMapOptions.showWidgetLegends?this.reportObject.options.heatMapOptions.showColorScale?this.constantMargins.bottom=30:this.constantMargins.bottom=0:this.reportObject.options.heatMapOptions.showColorScale?this.constantMargins.bottom=50:this.constantMargins.bottom=20),this.svgwidth=(null!==this.width&&this.width>0?this.width:this.clientWidth)-(this.constantMargins.left+this.constantMargins.right),this.svgheight=(null!==this.height&&this.height>0?this.height:this.clientHeight)-(this.constantMargins.top+this.constantMargins.bottom),this.reportObject.options.heatMapOptions&&this.reportObject.options.heatMapOptions.showWidgetLegends&&!this.$mobile&&(this.svgheight=this.svgheight-100);this.resultObject.report.dataPoints;var sdp=this.resultObject.report.dataPoints[0],cdp=this.resultObject.report.dataPoints.length>1?this.resultObject.report.dataPoints[1]:this.resultObject.report.dataPoints[0],mode=this.getMode(this.resultObject.mode),dataAlias=(null!==sdp.yAxis.unitStr&&sdp.yAxis.unitStr,5===this.resultObject.report.dataPoints[0].xAxis.dataType||this.resultObject.report.dataPoints[0].xAxis.dataType,sdp.aliases.actual),colorAlias=cdp.aliases.actual;this.yMin=this.reportObject.options.heatMapOptions&&null!==this.reportObject.options.heatMapOptions.minValue?""!==this.reportObject.options.heatMapOptions.minValue?this.reportObject.options.heatMapOptions.minValue:null:this.yMin,this.yMax=this.reportObject.options.heatMapOptions&&null!==this.reportObject.options.heatMapOptions.maxValue?""!==this.reportObject.options.heatMapOptions.maxValue?this.reportObject.options.heatMapOptions.maxValue:null:this.yMax;var data=2===this.resultObject.report.type?this.transformWorkorderDataforTreeMap(this.reportObject,this.resultObject,this.resultObject.reportData.data,"X",dataAlias,colorAlias,sdp,cdp,mode):this.transformDataforTreeMap(this.reportObject,this.resultObject,this.resultObject.reportData.data,"X",dataAlias,colorAlias,sdp,cdp,mode);this.myColor=d3.scaleLinear().range(this.chosenColors),this.svg=null,this.grandparent=null,this.legendSection=null,d3.select(this.$refs["treemapDiv"]).select("svg").remove(),this.svg=d3.select(this.$refs["treemapDiv"]).append("svg").attr("width",this.svgwidth+this.constantMargins.right+this.constantMargins.left).attr("height",this.svgheight+this.constantMargins.top+this.constantMargins.bottom).attr("class",this.$mobile?"":"widget-treemap").style("font","10px sans-serif").append("g").attr("transform","translate("+this.constantMargins.left+","+this.constantMargins.top+")");var self=this;this.svg.append("filter").append("feDropShadow").attr("flood-opacity",.3).attr("dx",0).attr("stdDeviation",3),this.reportObject.options.heatMapOptions&&this.reportObject.options.heatMapOptions.showGrandParent?(this.grandparent=this.svg.append("g").attr("class","grandparent"),this.grandparent.append("rect").attr("x",this.constantMargins.left).attr("y",-10).attr("width",this.svgwidth-(this.constantMargins.right+this.constantMargins.left)).attr("height",this.constantMargins.top),this.grandparent.append("text").attr("x",this.constantMargins.left+6).attr("y",-10).attr("dy",".75em")):this.grandparent&&this.grandparent.remove(),this.ancestorClicked=!1,this.xScale=d3.scaleLinear().domain([0,this.svgwidth]).range([this.constantMargins.left,this.svgwidth-this.constantMargins.right]).clamp(!1),this.yScale=d3.scaleLinear().domain([0,this.svgheight]).range([this.constantMargins.top,this.svgheight-this.constantMargins.bottom]).clamp(!1),this.parentXScale=d3.scaleLinear().domain([0,this.svgwidth/2]).range([this.constantMargins.left,this.svgwidth/2-this.constantMargins.right]).clamp(!1),this.parentYScale=d3.scaleLinear().domain([0,this.svgheight/2]).range([this.constantMargins.top,this.svgheight-this.constantMargins.bottom]).clamp(!1),this.yOffset=this.yScale.invert(this.yScale.range()[0]+this.yScale.range()[1]-this.yScale(this.yScale.domain()[1]-this.offset)),this.xOffset=this.xScale.invert(this.xScale.range()[0]+this.xScale.range()[1]-this.xScale(this.xScale.domain()[1]-this.offset));var root=this.treemap(data),ext=d3.extent(root.descendants(),(function(d){return d.value})),med=d3.mean(root.descendants(),(function(d){return d.value}));if(this.colorScale=d3.scaleLinear([ext[0],med,ext[1]],["#ee2656","#f5c512","#4c97d2"]),this.tTime=1e3,this.reportObject.options.heatMapOptions&&this.reportObject.options.heatMapOptions.showColorScale)if(this.reportObject.options.heatMapOptions&&this.reportObject.options.heatMapOptions.colorCriteria){var colorCriteria=this.reportObject.options.heatMapOptions.colorCriteria,svgDefs=this.svg.append("defs"),legendref="legendGradient"+Date.now(),legendContainer=(svgDefs.append("linearGradient").attr("id",legendref),this.svg.append("g")),legend=legendContainer.selectAll(".heatLegend").data(self.chosenColors);this.legendSection=legend.enter().append("g").attr("class","heatLegend"),this.legendSection.append("text").attr("class","legendHeading").attr("x",(function(d){return self.$mobile?0:self.svgwidth/4})).attr("y",(function(d){return self.svgheight-(self.$mobile?20:12)})).text((function(d){return cdp.name}));var _loop=function(critIdx){_this3.legendSection.append("rect").attr("x",(function(d,i){return self.$mobile?0+self.svgwidth*critIdx/colorCriteria.length:self.svgwidth/4+self.svgwidth*critIdx/2/colorCriteria.length})).attr("y",(function(d){return self.$mobile?self.svgheight-5:self.svgheight})).attr("width",self.$mobile?self.svgwidth/colorCriteria.length:self.svgwidth/2/colorCriteria.length).attr("height",10).style("fill",colorCriteria[critIdx].color),_this3.legendSection.append("text").text((function(d){return colorCriteria[critIdx].min})).attr("class","legendLabel").attr("x",(function(d){return self.$mobile?0+self.svgwidth*critIdx/colorCriteria.length-(parseInt(critIdx)>0?this.getComputedTextLength()/2:0):self.svgwidth/4+self.svgwidth*critIdx/2/colorCriteria.length-(parseInt(critIdx)>0?this.getComputedTextLength()/2:0)})).attr("y",(function(d){return self.svgheight+20})),parseInt(critIdx)===colorCriteria.length-1&&_this3.legendSection.append("text").text((function(d){return colorCriteria[critIdx].max})).attr("class","legendLabel").attr("x",(function(d){return self.$mobile?self.svgwidth-this.getComputedTextLength():self.svgwidth/4+self.svgwidth/2-this.getComputedTextLength()})).attr("y",(function(d){return self.svgheight+20}))};for(var critIdx in colorCriteria)_loop(critIdx)}else{var _svgDefs=this.svg.append("defs"),_legendref="legendGradient"+Date.now(),_mainGradient=_svgDefs.append("linearGradient").attr("id",_legendref);_mainGradient.append("stop").style("stop-color",(function(d){return self.chosenColors[0]})).attr("offset","0%"),_mainGradient.append("stop").style("stop-color",(function(d){return self.chosenColors[1]})).attr("offset","25%"),_mainGradient.append("stop").style("stop-color",(function(d){return self.chosenColors[2]})).attr("offset","50%"),_mainGradient.append("stop").style("stop-color",(function(d){return self.chosenColors[3]})).attr("offset","75%"),_mainGradient.append("stop").style("stop-color",(function(d){return self.chosenColors[4]})).attr("offset","100%");var _legendContainer=this.svg.append("g"),_legend=_legendContainer.selectAll(".heatLegend").data(self.chosenColors);this.legendSection=_legend.enter().append("g").attr("class","heatLegend"),this.legendSection.append("text").attr("class","legendHeading").attr("x",(function(d){return self.$mobile?0:self.svgwidth/4})).attr("y",(function(d){return self.svgheight-(self.$mobile?20:12)})).text((function(d){return cdp.name})),this.legendSection.append("rect").attr("x",(function(d,i){return self.$mobile?0:self.svgwidth/4})).attr("y",(function(d){return self.$mobile?self.svgheight-5:self.svgheight})).attr("width",self.$mobile?self.svgwidth:self.svgwidth/2).attr("height",10).style("fill","url(#"+_legendref+")")}else this.svg&&this.svg.selectAll("defs").remove();this.update(root)},getTooltipColor:function(value,myColor,yMin,yMax,clusters){var c=null!==value?myColor(value):"#FFFFFF";return null!==value&&value<yMin?c=myColor(clusters[0]):null!==value&&value>yMax&&(c=myColor(clusters[4])),c},getTooltipFormat:function(){switch(this.xformat){case"hours":return"dddd, MMM D, YYYY h a";case"days":return"dddd, MMM D, YYYY";case"weeks":return"dddd, MMM D, [W]ww gggg";default:return"LLLL"}},getNestedCloseRelatives:function(node){node.ancestors().forEach((function(d){return d.isAncestor=!0}));var relativesSet=new Set(node.ancestors().reverse());node.children&&node.children.forEach((function(d){d.isAncestor=!1,relativesSet.add(d)}));var depthNest=d3.nest().key((function(d){return d.depth})).entries((0,toConsumableArray/* default */.Z)(relativesSet));return depthNest},rectifyDimensions:function(d){var x0Temp=d.isAncestor?d.ancestorX0:d.x0,y0Temp=d.isAncestor?d.ancestorY0:d.y0,x1Temp=d.isAncestor?d.ancestorX1:d.x1,y1Temp=d.isAncestor?d.ancestorY1:d.y1;return{x0:x0Temp,y0:y0Temp,x1:x1Temp,y1:y1Temp}},cascade:function(root,offset){var _this4=this;return root.eachAfter((function(d){var ancWidth=_this4.svgwidth,ancHeight=_this4.svgheight;d.ancestorX0=d.depth*offset,d.ancestorY0=d.depth*offset,d.ancestorX1=d.ancestorX0+ancWidth,d.ancestorY1=d.ancestorY0+ancHeight,d.childMinX=d.ancestorX0+offset,d.childMinY=d.ancestorY0+offset}))},treemap:function(data){return this.cascade(d3.treemap().size([this.svgwidth,this.svgheight]).paddingTop(20).paddingInner(0).round(!0).tile(d3.treemapResquarify)(d3.hierarchy(data).sum((function(d){return parseFloat(d.value)})).sort((function(a,b){return b.height-a.height}))),0)},update:function(current_node){var _this5=this,self=this;this.grandparent&&(this.grandparent.datum(current_node).on("click",(function(d){d.parent&&self.update(d.parent)})).select("text").text(self.getGrandParentText(current_node)),this.grandparent.select("text").text((function(d){var grandParentWidth=self.svgwidth-(self.constantMargins.right+self.constantMargins.left),textWidth=this.getComputedTextLength(),grandParenttext=self.getGrandParentText(d);return grandParentWidth-12>textWidth?grandParenttext+"":"";
// else if (textWidth > 0) {
//   return (grandParenttext + '').substring(0, maxchar - 4) + '..'
// }
}))),self.parentXScale.domain([d3.min(current_node.children,(function(d){return d.x0})),d3.max(current_node.children,(function(d){return d.x1}))]).range([current_node.ancestorX0+this.xOffset,current_node.ancestorX0+this.svgwidth+this.xOffset]),self.parentYScale.domain([d3.min(current_node.children,(function(d){return d.y0})),d3.max(current_node.children,(function(d){return d.y1}))]).range([current_node.ancestorY0+this.yOffset,current_node.ancestorY0+this.svgheight+this.yOffset]),this.xScale.domain([0,self.parentXScale.range()[1]]),this.yScale.domain([0,self.parentYScale.range()[1]]);var valArr=current_node.children.map((function(d){return d.data.colorValue?parseFloat(d.data.colorValue):null})),clust=this.getClusters(valArr);this.myColor.domain(clust);var layers=this.svg.selectAll(".layer").data(this.getNestedCloseRelatives(current_node)).join("g").classed("layer",!0);layers.exit().remove();var children=layers.selectAll(".child").data((function(d){return d.values}),(function(d){return d.ancestors().reverse().map((function(x){return x.data.name})).join("/")}));children.exit().transition().duration(this.tTime).remove(),children.exit().selectAll("*").remove(),children.transition().duration(this.tTime).attr("transform",(function(d){var coords=self.rectifyDimensions(d);return d.isAncestor?"translate(".concat(self.xScale(coords.x0),",").concat(self.yScale(coords.y0),")"):"translate(".concat(self.xScale(self.parentXScale(coords.x0)),",").concat(self.yScale(self.parentYScale(coords.y0)),")")})),children.on("click",(function(d){var newParent=d3.select(this);d.children&&(self.handleNewParentClick(newParent),self.update(d))})).on("mouseover",(function(d){var tooltipData=[{label:d.data.mode,value:d.data.name},{label:d.data.sizePoint,value:null!==d.value?d3.format(",")(d["value"])+" "+(d.data.unit?d.data.unit:""):"No data"}];d.data.colorPoint&&tooltipData.push({label:d.data.colorPoint,value:null!==d.data.colorValue?d.data.colorValue+" "+(d.data.colorUnit?d.data.colorUnit:""):"No data"});var tooltipConfig={position:{left:d3.event.pageX,top:d3.event.pageY},data:tooltipData,color:self.getColor(d.data.colorValue?parseFloat(d.data.colorValue):null,valArr,clust,self.myColor)};tooltip/* default */.Z.showTooltip(tooltipConfig);var tempParent=d3.select(this);d.children&&self.handleNewParentMouseOver(tempParent)})).on("mouseout",(function(d){tooltip/* default */.Z.hideTooltip();var notNewParent=d3.select(this);self.handleNewParentMouseOut(notNewParent)})),children.selectAll("rect").transition().delay((function(d){
// if (self.ancestorClicked) return 0
// return d === current_node || d.depth < current_node.depth
//   ? 0
//   : self.tTime
return 0})).on("end",(function(){return self.svg.selectAll(".layer").selectAll("*").attr("pointer-events","auto")})).attr("width",(function(d){var coords=self.rectifyDimensions(d);return d.isAncestor?self.xScale(coords.x1)-self.xScale(coords.x0):self.xScale(self.parentXScale(coords.x1))-self.xScale(self.parentXScale(coords.x0))})).attr("height",(function(d){var coords=self.rectifyDimensions(d);return d.isAncestor?self.yScale(coords.y1)-self.yScale(coords.y0):self.yScale(self.parentYScale(coords.y1))-self.yScale(self.parentYScale(coords.y0))})).attr("fill",(function(d){return self.getColor(d.data.colorValue?parseFloat(d.data.colorValue):null,valArr,clust,_this5.myColor)}));var childrenToAddText=children.filter((function(d){return d3.select(this).select("text").empty()}));childrenToAddText.append("text").attr("clip-path",(function(d){return d.clipUid})).selectAll("tspan").data((function(d){var coords=self.rectifyDimensions(d),textToDisplay=[];switch(self.textMode){case 1:textToDisplay=[d3.format(",")(parseFloat(d.value))+""].concat(d.data.name+"");
// .concat(d.data.unit)
break;case 2:textToDisplay=[(d.data.colorValue?d3.format(",")(parseFloat(d.data.colorValue)):" ")+""].concat(d.data.name+"");break;case 3:textToDisplay=[d.data.name+""]}var height=d.y1-d.y0,width=d.x1-d.x0;return d.width=width,d.height=height,d.isAncestor?(height=self.yScale(coords.y1)-self.xScale(coords.y0),width=self.xScale(coords.x1)-self.xScale(coords.x0)):(height=self.yScale(self.parentYScale(coords.y1))-self.yScale(self.parentYScale(coords.y0)),width=self.xScale(self.parentXScale(coords.x1))-self.xScale(self.parentXScale(coords.x0))),12.5*textToDisplay.length+15<height&&width>0?textToDisplay:[""]})).join("tspan").attr("fill-opacity",(function(d,i,nodes){return i===nodes.length-1?.7:null})).attr("fill",self.textColor).attr("opacity",0).transition().delay(this.tTime).attr("opacity",1).text((function(d){return d})),childrenToAddText.filter((function(d){return d.children})).selectAll("tspan").attr("y",10).attr("dx",10),childrenToAddText.filter((function(d){return!d.children})).selectAll("tspan").attr("y",(function(d,i,node){return"".concat(1.1+2.5*i,"em")})).attr("x",3).text((function(d){return d}));var childrenEnter=children.enter().append("g").classed("child",!0).on("click",(function(d){var newParent=d3.select(this);d.children&&(self.handleNewParentClick(newParent),self.update(d))})).on("mouseover",(function(d){var tooltipData=[{label:d.data.mode,value:d.data.name},{label:d.data.sizePoint,value:null!==d.value?d3.format(",")(d["value"])+" "+(d.data.unit?d.data.unit:""):"No data"}];d.data.colorPoint&&tooltipData.push({label:d.data.colorPoint,value:null!==d.data.colorValue?d.data.colorValue+" "+(d.data.colorUnit?d.data.colorUnit:""):"No data"});var tooltipConfig={position:{left:d3.event.pageX,top:d3.event.pageY},data:tooltipData,color:self.getColor(d.data.colorValue?parseFloat(d.data.colorValue):null,valArr,clust,self.myColor)};tooltip/* default */.Z.showTooltip(tooltipConfig);var tempParent=d3.select(this);d.children&&self.handleNewParentMouseOver(tempParent)})).on("mouseout",(function(d){tooltip/* default */.Z.hideTooltip();var notNewParent=d3.select(this);notNewParent.transition(),self.handleNewParentMouseOut(notNewParent)}));childrenEnter.attr("transform",(function(d){var coords=self.rectifyDimensions(d);return d.isAncestor?"translate(".concat(self.xScale(coords.x0),",").concat(self.yScale(coords.y0),")"):"translate(".concat(self.xScale(self.parentXScale(coords.x0)),",").concat(self.yScale(self.parentYScale(coords.y0)),")")})),
// childrenEnter.append('title').text(
//   d =>
//     `${d
//       .ancestors()
//       .reverse()
//       .map(d => d.data.name)
//       .join('/')}\n${parseFloat(d.value)}\n${d.data.unit}`
// )
childrenEnter.append("rect").attr("stroke-width",1).attr("stroke","white").attr("opacity",0).attr("fill",(function(d){return self.getColor(d.data.colorValue?parseFloat(d.data.colorValue):null,valArr,clust,_this5.myColor)})).attr("width",(function(d){var coords=self.rectifyDimensions(d);return d.isAncestor?self.xScale(coords.x1)-self.xScale(coords.x0):self.xScale(self.parentXScale(coords.x1))-self.xScale(self.parentXScale(coords.x0))})).attr("height",(function(d){var coords=self.rectifyDimensions(d);return d.isAncestor?self.yScale(coords.y1)-self.xScale(coords.y0):self.yScale(self.parentYScale(coords.y1))-self.yScale(self.parentYScale(coords.y0))})).transition().duration(this.tTime).on("interrupt",(function(d){var _this6=this,selection=d3.select(this);selection.attr("fill",(function(d){
// self.getColor(parseFloat(d.value), valArr, clust, this.myColor)
return self.getColor(d.data.colorValue?parseFloat(d.data.colorValue):null,valArr,clust,_this6.myColor)}))})).attr("opacity",1),childrenEnter.append("text").attr("clip-path",(function(d){return d.clipUid})).selectAll("tspan").data((function(d){var coords=self.rectifyDimensions(d),textToDisplay=[];switch(self.textMode){case 1:textToDisplay=[d3.format(",")(parseFloat(d.value))+""].concat(d.data.name+"");break;case 2:textToDisplay=[(d.data.colorValue?d3.format(",")(parseFloat(d.data.colorValue)):" ")+""].concat(d.data.name+"");break;case 3:textToDisplay=[d.data.name+""]}var height=d.y1-d.y0,width=d.x1-d.x0;if(d.isAncestor?(height=self.yScale(coords.y1)-self.xScale(coords.y0),width=self.xScale(coords.x1)-self.xScale(coords.x0)):(height=self.yScale(self.parentYScale(coords.y1))-self.yScale(self.parentYScale(coords.y0)),width=self.xScale(self.parentXScale(coords.x1))-self.xScale(self.parentXScale(coords.x0))),d.width=width,d.height=height,12.5*textToDisplay.length+15<height){var text=textToDisplay.map((function(text){return[text].concat(width)}));return width>0?text:[""]}return[""]})).join("tspan").attr("fill-opacity",(function(d,i,nodes){return i===nodes.length-1?.7:null})).attr("fill",self.textColor).attr("y",10).attr("dx",10).text((function(d){return d[0]})).attr("opacity",0).transition().duration(this.tTime).attr("opacity",1).text((function(d,i,nodes){if(1===i){if(""===nodes[0].textContent)return"";var firstStringWidth=nodes[0].getComputedTextLength();if(d[1]-15<=firstStringWidth)return""}else if(0===i&&nodes[1]){if(""===nodes[1].textContent)return"";var _firstStringWidth=nodes[1].getComputedTextLength();if(d[1]-15<=_firstStringWidth)return""}var textWidth=this.getComputedTextLength();
// let maxchar =
//   textWidth > 0 ? (d[1] - 12) / (textWidth / (d[0] + '').length) : 0
return d[1]-15>textWidth?d[0]+"":"";
// else if (textWidth > 0) {
//   return (d[0] + '').substring(0, maxchar - 4) + '..'
// }
})),childrenEnter.filter((function(d){return d.children})).selectAll("text").attr("opacity",(function(d){return d.width-15<this.getComputedTextLength()?0:1})),childrenEnter.filter((function(d){return d.children})).selectAll("tspan").attr("y",10).attr("dx",10),childrenEnter.filter((function(d){return!d.children})).selectAll("tspan").attr("y",(function(d,i,node){return"".concat(1.1+2.5*i,"em")})).attr("x",3).attr("opacity",(function(d,i,node){return 1})).data((function(d){return d})).text((function(d,i,node){return d}));this.svg.append("g").attr("id","tempLayer");if(this.svg.append("g").attr("pointer-events","none"),this.legendSection&&(!this.reportObject.options.heatMapOptions||!this.reportObject.options.heatMapOptions.colorCriteria)){this.legendSection.selectAll("text.legendLabel").remove();var min=this.yMin?this.yMin:d3.min(valArr)?this.getRoundedNumber(d3.min(valArr),"floor"):"",max=this.yMax?this.yMax:d3.max(valArr)?this.getRoundedNumber(d3.max(valArr),"ceil"):"",unit=this.resultObject&&this.resultObject.report&&this.resultObject.report.dataPoints?this.resultObject.report.dataPoints[1].yAxis.unitStr:"";this.legendSection.append("text").attr("class","legendLabel").attr("x",(function(d){return self.$mobile?0:self.svgwidth/4})).attr("y",(function(d){return self.svgheight+20})).text((function(d){var m=min<0?min:0;return m+(unit?" "+unit:"")})),this.legendSection.append("text").text((function(d){return max+(unit?" "+unit:"")})).attr("class","legendLabel").attr("x",(function(d){return self.$mobile?self.svgwidth-this.getComputedTextLength():self.svgwidth/4+self.svgwidth/2-this.getComputedTextLength()})).attr("y",(function(d){return self.svgheight+20}))}},handleNewParentClick:function(selection){this.ancestorClicked=selection.datum().isAncestor,selection.selectAll("rect").attr("stroke",this.strokeColor).attr("stroke-width",this.strokeWidth);var tempLayer=this.svg.select("#tempLayer");tempLayer.attr("id",null),tempLayer.classed("layer",!0)},handleNewParentMouseOver:function(selection){var _this7=this,self=this;if(selection.select("rect").attr("stroke",this.activeParentStrokeColor).attr("stroke-width",this.activeParentStrokeWidth),!selection.datum().isAncestor){var datum=selection.datum(),tempLayer=this.svg.select("#tempLayer").attr("width",datum.x1-datum.x0).attr("height",datum.y1-datum.y0),innerNodes=tempLayer.selectAll(".child").data(datum.children,(function(d){return d.ancestors().reverse().map((function(x){return x.data.name})).join("/")})).join("g").classed("child",!0).attr("transform",(function(d){return"translate(".concat(self.xScale(self.parentXScale(d.x0)),",").concat(self.yScale(self.parentYScale(d.y0)),")")})).attr("pointer-events","none"),data=datum.children.map((function(d){return parseFloat(d.data.colorValue)})),clusts=this.getClusters(data);this.myColor.domain(clusts),innerNodes.append("rect").attr("fill",(function(d){
// self.getColor(parseFloat(d.value), data, clusts, this.myColor)
return self.getColor(d.data.colorValue?parseFloat(d.data.colorValue):null,data,clusts,_this7.myColor)})).attr("width",(function(d){return self.xScale(self.parentXScale(d.x1))-self.xScale(self.parentXScale(d.x0))})).attr("height",(function(d){return self.yScale(self.parentYScale(d.y1))-self.yScale(self.parentYScale(d.y0))})).transition().duration(this.tTime).on("interrupt",(function(d){var selection=d3.select(this);selection.attr("fill-opacity",1)})).attr("fill-opacity",1).attr("stroke-width",1).attr("stroke","white")}},handleNewParentMouseOut:function(selection){if(selection.select("rect").attr("stroke",this.strokeColor).attr("stroke-width",this.strokeWidth),!selection.datum().isAncestor){var tempChildren=this.svg.select("#tempLayer").selectAll("*");tempChildren.interrupt(),tempChildren.remove()}},getClusters:function(clusterData){var clusters=null;clusterData.sort();var yMax=parseFloat(d3.max(clusterData));if(!yMax)return[];var min=null!=this.yMin?this.yMin:d3.min(clusterData)?this.getRoundedNumber(d3.min(clusterData),"floor"):"",max=null!=this.yMax?this.yMax:d3.max(clusterData)?this.getRoundedNumber(d3.max(clusterData),"ceil"):"";if(clusterData.length>5)clusters=(0,ckmeans_min/* default */.Z)(clusterData,5);else if(null!=min&&null!=max){var diff=max-min,step=diff/5,prevVal=min;clusters=[];for(var itr=0;itr<5;itr++){var val=prevVal+step*itr;clusters.push(val),prevVal=val}}else clusters=clusterData;if(clusters&&clusters[clusters.length-1]<yMax&&(clusters.length>=5?clusters[clusters.length-1]=yMax:clusters.push(yMax)),clusters.length<5)while(clusters.length<5)clusters.push(clusters[clusters.length-1]+1);return clusters},getColor:function(value,data,clusters,colorScale){if(this.reportObject.options.heatMapOptions&&this.reportObject.options.heatMapOptions.colorCriteria){var _min,_max,mincolor,maxcolor,resultcolor,_step2,colorCriteria=this.reportObject.options.heatMapOptions.colorCriteria,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(colorCriteria);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var crit=_step2.value;("undefined"===typeof _min||_min>crit.min)&&(_min=crit.min,mincolor=crit.color),("undefined"===typeof _max||_max<crit.max)&&(_max=crit.max,maxcolor=crit.color),value>=crit.min&&value<crit.max?resultcolor=crit.color:value<_min?resultcolor=mincolor:value>_max&&(resultcolor=maxcolor)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return resultcolor}var min=this.yMin?this.yMin:Number(d3.min(data))<0?Number(d3.min(data)):0,max=this.yMax?this.yMax:parseFloat(d3.max(data));return value<min?colorScale(clusters[0]):value>max?colorScale(clusters[clusters.length-1]):value?colorScale(value):this.chosenColors[0]},getGrandParentText:function(d){var value=parseFloat(d.value),unit=d.data.unit?d.data.unit:"";return d.parent?this.getGrandParentText(d.parent)+" / "+d.data.name+" ("+d3.format(",")(this.DecimalRoundOff(parseFloat(value)))+" "+unit+")":d.data.name+" ("+d3.format(",")(this.DecimalRoundOff(parseFloat(value)))+" "+unit+")"},getMode:function(mode){switch(parseInt(mode)){case 4:return"Time";case 6:return"Site";case 7:return"Building";case 8:return"Asset";default:return""}}}}),reports_FTreeMapvue_type_script_lang_js=FTreeMapvue_type_script_lang_js,FTreeMap_component=(0,componentNormalizer/* default */.Z)(reports_FTreeMapvue_type_script_lang_js,FTreeMapvue_type_template_id_65dba227_render,FTreeMapvue_type_template_id_65dba227_staticRenderFns,!1,null,null,null)
/* harmony default export */,FTreeMap=FTreeMap_component.exports,FDateTimeFilter=__webpack_require__(376662),FNewReportvue_type_script_lang_js={props:{viewOrEdit:{type:String,default:"view"},updateWidget:{type:Function},widgetBodyDimension:{type:Object,default:function(){return{widgetBodyWidth:0,widgetBodyHeight:0}}},componentVisibleInViewPort:{type:Boolean,default:!0},hideTimelineFilterInsideWidget:{type:Boolean,default:!1},ruleInfo:{},loadImmediately:{type:Boolean,default:!0},id:{},item:{},config:{},tabular:{},showTimePeriod:{},templateJson:{},hideChartSettings:{},hideTabularReport:{},datePickerTarget:{},dbTimelineFilter:{},dbFilterJson:{},qs:{},showHeadingOnlyForPdf:{type:Boolean,default:!1},hideColumn:{type:Boolean,default:!1},showChart:{type:Boolean,default:!1},printView:{type:Boolean,default:!1}},mixins:[NewDataFormatHelper/* default */.Z,NewReportSummaryHelper/* default */.Z],components:{EmailReport:DashboardEmailReport/* default */.Z,NewDatePicker:NewDatePicker/* default */.Z,FNewChart:FNewChart,FMultiChart:FMultiChart,FTabularReport:FTabularReportNew/* default */.Z,FMobileChart:FMobileChart/* default */.Z,FChartSettings:FNewChartSettings/* default */.Z,FUserFilters:FUserFilters,FMobileMultiChart:FMobileMultiChart/* default */.Z,MultipleRegressionAnalysis:MultipleRegressionAnalysis/* default */.Z,InlineSvg:InlineSvg/* default */.Z,FNewHeatMap:FNewHeatMap,FTreeMap:FTreeMap,FDateTimeFilter:FDateTimeFilter/* default */.Z},data:function(){return{isReportLoadedOnes:!1,emailReportVisibility:!1,disbaleRPassetChooser:!1,loading:!0,failed:!1,reportObj:null,resultObj:null,showReportOptions:!1,dateFilter:null,userFilterApplied:null,period:null,reportTemplate:null,widgetWidth:null,widgetHeight:null,datePickerCompKey:1,activeTable:[],activeTrend:[],trendresultObj:null,trendreportObj:null,filter:{},pdfloading:!1,displayName:[],isFilterApplied:!1,excludeParamsObj:{}}},mounted:function(){var _JSON$parse,_this$$route$query$ex=this.$route.query.excludeParams,excludeParams=void 0===_this$$route$query$ex?{}:_this$$route$query$ex;this.excludeParamsObj=(0,validation/* isEmpty */.xb)(excludeParams)?{}:null!==(_JSON$parse=JSON.parse(excludeParams))&&void 0!==_JSON$parse?_JSON$parse:{},this.$mobile?(this.widgetWidth=this.$el.clientWidth,this.widgetHeight=this.$mobile?this.config.height:this.$el.clientHeight-30):this.isPrinting&&(this.widgetWidth=this.$el.clientWidth);var _ref=null!==this&&void 0!==this?this:{},loadImmediately=_ref.loadImmediately;loadImmediately&&this.init()},computed:{getFacilioLogoURL:function(){var brandConfig=this.brandConfig,logo=this.$getProperty(brandConfig,"logo",null);return logo},showLogo:function(){var brandConfig=this.brandConfig,showLogoInPDF=this.$getProperty(brandConfig,"showLogoInPDF",!0);return showLogoInPDF},brandConfig:function(){return window.brandConfig},showFUserFilter:function(){var _this$reportObj$optio,_this$reportObj,_ref2=null!==(_this$reportObj$optio=null===(_this$reportObj=this.reportObj)||void 0===_this$reportObj||null===(_this$reportObj=_this$reportObj.options)||void 0===_this$reportObj||null===(_this$reportObj=_this$reportObj.common)||void 0===_this$reportObj||null===(_this$reportObj=_this$reportObj.filters)||void 0===_this$reportObj?void 0:_this$reportObj.filterState)&&void 0!==_this$reportObj$optio?_this$reportObj$optio:{},liveFilterField=_ref2.liveFilterField;return!(0,validation/* isEmpty */.xb)(liveFilterField)&&"none"!==liveFilterField&&!this.isRegression&&!1===this.loading},getDateRangeString:function(){var dateRange=this.$getProperty(this.resultObj,"dateRange.value",{}),startTime=moment_timezone_default()(dateRange[0]).tz(vue_runtime_esm["default"].prototype.$timezone).format("DD/MM/YYYY"),endTime=moment_timezone_default()(dateRange[1]).tz(vue_runtime_esm["default"].prototype.$timezone).format("DD/MM/YYYY");return"".concat(startTime," to ").concat(endTime)},pdfFilter:function(){var filterName=this.$getProperty(this.reportObj,"options.common.filters.filterState.liveFilterField","Filter");return"".concat(filterName.charAt(0).toUpperCase()).concat(filterName.slice(1))},report:function(){var report=this.resultObj.report;return null!==report&&void 0!==report?report:{}},allFilters:function(){return{dbFilterJson:this.dbFilterJson,dbTimelineFilter:this.dbTimelineFilter,ruleInfo:this.ruleInfo}},reportTemplateAssetChooser:function(){var resultObj=this.resultObj,reportTemplate=this.reportTemplate;return!!(resultObj&&resultObj.report&&4===resultObj.report.type&&reportTemplate&&0!==reportTemplate.chooseValues.length&&1==(null===reportTemplate||void 0===reportTemplate?void 0:reportTemplate.isVisibleInDashBoard))},widgetDatePicker:function(){return!!(this.reportObj&&this.reportObj.options&&this.reportObj.options.settings&&!this.reportObj.options.settings.chart&&this.reportObj.options.settings.table)},isWidget:function(){return!!this.config},isPrinting:function(){return this.$route.query.print||this.$route.query.printing||this.$route.query.daterange||this.showHeadingOnlyForPdf;// daterange check temp
},computeSpaceAssetInitValue:function(){if(this.resultObj&&this.resultObj.report&&this.resultObj.report.reportTemplate){var temp={};return temp["assetCategory"]=this.resultObj.report.reportTemplate.categoryId+"",temp["isIncludeResource"]=!1,this.reportTemplate?(temp["selectedResource"]=[],temp.selectedResource.push(this.reportTemplate.parentId)):temp["selectedResource"]=[],temp["reportTemplate"]=!0,temp}return{}},getAvailablePeriods:function(){if(this.reportObj&&this.reportObj.dateRange){var operationOnId=this.reportObj.dateRange.operatorId,avail=[];
// avail.push({
//   name:'Week of year', // W1, W2
//   value: 16,
//   enable: true
// })
// avail.push({
//   name:'Month of year', // Jan, Feb , march
//   value: 15,
//   enable: true
// })
return avail.push({name:"High-res",value:0,enable:6===operationOnId||4!==operationOnId}),avail.push({name:"Hourly",value:20,enable:6===operationOnId||4!==operationOnId}),avail.push({name:"Daily",value:12,enable:!0}),avail.push({name:"Weekly",value:11,enable:!0}),avail.push({name:"Monthly",value:10,enable:!0}),avail.push({name:"Quarterly",value:25,enable:4===operationOnId||5===operationOnId}),avail.push({name:"Yearly",value:8,enable:4===operationOnId}),avail.push({name:"Hour of day",
// 12, 1, 2, 3
value:19,enable:!0}),avail.push({name:"Day of week",
// sun, mon
value:17,enable:!0}),avail.push({name:"Day of month",
// 1,2,3
value:18,enable:!0}),avail}return[]},isRegression:function(){return!!(this.resultObj&&this.resultObj.report&&this.resultObj.report.reportState&&this.resultObj.report.reportState.regressionConfig&&0!=this.resultObj.report.reportState.regressionConfig.length)},isScatter:function(){return!(!this.resultObj||!this.resultObj.report||8!==this.resultObj.report.analyticsType)},isHeatMap:function(){return!(!this.resultObj||!this.resultObj.report||3!==this.resultObj.report.analyticsType)},isTreeMap:function(){return!(!this.resultObj||!this.resultObj.report||7!==this.resultObj.report.analyticsType)},showSafeLimit:function(){return!this.resultObj||!this.resultObj.report||3!==this.resultObj.report.type},reportId:function(){return(0,validation/* isEmpty */.xb)(this.id)?this.config?this.config.widget.dataOptions.newReportId:null:this.id},appliedDateRange:function(){if(this.$route.query.daterange)return JSON.parse(this.$route.query.daterange)},isSiteFilterApplied_toExport:function(){return this.$route.query.spaceId_forExport?this.$route.query.spaceId_forExport:null},isSiteFilterMode_toExport:function(){return this.$route.query.filterModeValue_toExport?this.$route.query.filterModeValue_toExport:null},appliedChartType:function(){
// Temp...will be changed for pdf once temp report support is implemented
return this.$route.query.charttype},hideTable:function(){return!!this.excludeParamsObj.table||(this.showOnlyImage||this.hideTabularReport)},appliedReportTemplate:function(){return this.$route.query.template},reportTemplteParams:function(){return this.$route.query.templateParams}},created:function(){if(!(0,validation/* isEmpty */.xb)(this.dbTimelineFilter)){var pickerObj=NewDateHelper/* default */.Z.getDatePickerObject(this.dbTimelineFilter.operatorId,this.dbTimelineFilter.dateValueString);this.dateFilter=pickerObj}if(this.qs){var qsParams=this.getQueryStringParams(this.qs);if(qsParams.startTime&&qsParams.endTime){var _pickerObj=NewDateHelper/* default */.Z.getDatePickerObject(20,qsParams.startTime+","+qsParams.endTime);this.dateFilter=_pickerObj}}this.$store.dispatch("loadAssetCategory")},watch:{
//when widget at bottom of dashboard is scrolled up , this prop changes from false to true,
componentVisibleInViewPort:function(_componentVisibleInViewPort){!_componentVisibleInViewPort||this.isReportLoadedOnes&&!this.loadImmediately||this.init()},isReportLoadedOnes:function(newval,oldval){if(0==oldval&&1==newval){var reportTemplate=this.reportTemplate;if(reportTemplate&&0==reportTemplate.isVisibleInDashBoard)return;this.applyLocalUserFilter()}},reportId:{handler:function(newData,oldData){this.period=null,this.dateFilter=!1,this.reportTemplate=null,this.init(!1)}},reportTemplteParams:{handler:function(newData,olddata){newData!==olddata&&this.reportTemplate&&this.setParamsToTemplate()},deep:!0},allFilters:function(newVal,oldVal){var loading=this.loading;if(!(0,lodash.isEqual)(newVal,oldVal)||loading){var _ref3=null!==newVal&&void 0!==newVal?newVal:{},_ref3$dbTimelineFilte=_ref3.dbTimelineFilter,dateOperator=_ref3$dbTimelineFilte.dateOperator,startTime=_ref3$dbTimelineFilte.startTime,endTime=_ref3$dbTimelineFilte.endTime,dbTimelineFilter=_ref3.dbTimelineFilter;_ref3.dbFilterJson;if(!(0,validation/* isEmpty */.xb)(dbTimelineFilter)){var timeArray=[startTime,endTime],pickerObj=NewDateHelper/* default */.Z.getDatePickerObject(dateOperator,timeArray);this.dateFilter=pickerObj}var timelineFilterChanged=!(0,lodash.isEqual)(dbTimelineFilter,null===oldVal||void 0===oldVal?void 0:oldVal.dbTimelineFilter);!this.reportTemplateAssetChooser&&!this.showFUserFilter||timelineFilterChanged?(timelineFilterChanged||this.isPrinting)&&(this.init(),this.datePickerCompKey++):this.isReportLoadedOnes?this.applyLocalUserFilter():this.init()}}// 'getAvailablePeriods': {
//   handler (newData, oldData) {
//     if (this.reportObj) {
//       let avail = this.getAvailablePeriods
//       let selected = avail.find(a => a.value === this.reportObj.dateRange.period && a.enable)
//       if (!selected) {
//         let filterName = this.reportObj ? this.reportObj.dateRange.rangeType : ''
//         let filtered = avail.filter(a => a.enable)
//         let defaultPeriod =  (filtered && filtered.length) ? filtered[0].value : this.reportObj.dateRange.period
//         if (filterName === 'week' || filterName === 'W') {
//           defaultPeriod = 12
//         }
//         else if (filterName === 'month' || filterName === 'M') {
//           defaultPeriod = 12
//         }
//         else if (filterName === 'year' || filterName === 'Y') {
//           defaultPeriod = 10
//         }
//         this.reportObj.dateRange.period = defaultPeriod
//       }
//     }
//   },
//   immediate: true
// }
},methods:{liveFilterValue:function(value){var filterIds=[],_this$reportObj$param=this.reportObj.params,params=void 0===_this$reportObj$param?{}:_this$reportObj$param,key1="id",key2="name";(0,validation/* isEmpty */.xb)(params.parentId)?(0,validation/* isEmpty */.xb)(params.spaceId)||(filterIds=params.spaceId,"Site"===this.pdfFilter&&(key1="value",key2="label")):filterIds=params.parentId,this.displayName=(value||[]).reduce((function(acc,cur){return filterIds.includes(cur[key1])?[].concat((0,toConsumableArray/* default */.Z)(acc),[cur[key2]]):acc}),[]),this.displayName=this.displayName.join(", ")},applyLocalUserFilter:function(){var _this$resultObj,_this=this,isOnlyTTimeFilter=function(){if(!(0,validation/* isEmpty */.xb)(_this.dbFilterJson)){for(var key in Object.keys(_this.dbFilterJson))if(key&&!key.startsWith("ttime_"))return!0;return!1}};if(!(0,validation/* isEmpty */.xb)(this.dbFilterJson)&&isOnlyTTimeFilter())if(4===(null===(_this$resultObj=this.resultObj)||void 0===_this$resultObj||null===(_this$resultObj=_this$resultObj.report)||void 0===_this$resultObj?void 0:_this$resultObj.type)){var _this$reportTemplate,filter=this.getReportTemplateJson(this.dbFilterJson);
// this method helps to load template report while mount
null!==(_this$reportTemplate=this.reportTemplate)&&void 0!==_this$reportTemplate&&_this$reportTemplate.parentId&&null!==filter&&void 0!==filter&&filter.assetId&&(this.reportTemplate.parentId=filter.assetId,this.prefillAsset(filter),this.applyTemplate())}else{var _filter=this.prepareUserFilterProps(this.configdbUserFilterJson(),this.reportObj,!0);this.applyFilter(_filter)}else this.applyFilterJson({})},loadAsset:function(assetId){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _data$pickList,selected_assets,filters,params,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this2,selected_assets=[assetId+""],filters=JSON.stringify({id:{operatorId:36,value:selected_assets}}),params={filters:filters},_context.next=6,api/* API */.bl.get("/v3/picklist/asset",params,{cacheTimeout:0});case 6:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error&&null!==data&&void 0!==data&&null!==(_data$pickList=data.pickList)&&void 0!==_data$pickList&&_data$pickList.length&&_this2.reportTemplate.chooseValues.push({id:data.pickList[0].value,name:data.pickList[0].label});case 10:case"end":return _context.stop()}}),_callee)})))()},prefillAsset:function(filter){var _this$reportTemplate2;
// this method will add missing assets
if(null!==(_this$reportTemplate2=this.reportTemplate)&&void 0!==_this$reportTemplate2&&_this$reportTemplate2.buildingId&&(
// removing the building filter becouse we load assets across the portfolio.
this.reportTemplate.buildingId=null),null!==this.reportTemplate.chooseValues){var _this$reportTemplate3,asset=this.reportTemplate.chooseValues.find((function(rt){return rt.id===filter.assetId}));if(asset||"view"==this.viewOrEdit||"edit"==this.viewOrEdit)if(this.disbaleRPassetChooser=!1,null!==this&&void 0!==this&&null!==(_this$reportTemplate3=this.reportTemplate)&&void 0!==_this$reportTemplate3&&_this$reportTemplate3.chooseValues){var _this$reportTemplate4,result_arr=null===this||void 0===this||null===(_this$reportTemplate4=this.reportTemplate)||void 0===_this$reportTemplate4?void 0:_this$reportTemplate4.chooseValues.filter((function(asset_obj){return asset_obj.id==filter.assetId}));(0,validation/* isEmpty */.xb)(result_arr)&&this.loadAsset(filter.assetId)}else this.loadAsset(filter.assetId);else this.disbaleRPassetChooser=!0,this.loadAsset(filter.assetId)}else this.disbaleRPassetChooser=!0,this.reportTemplate.chooseValues=[],this.loadAsset(filter.assetId)},userFilterLoaded:function(){
// user filter after load hook
},formatedValue:function(value){var values=[];return value.forEach((function(val){values.push(Number(val))})),values},getReportTemplateJson:function(data){var assetId=null;return(0,validation/* isEmpty */.xb)(data)||(0,validation/* isUndefined */.o8)(data)||Object.keys(data).forEach((function(key){if("asset"===key){var values=data[key].value;values.length&&(assetId=Number(values[0]))}})),{assetId:assetId}},configdbUserFilterJson:function(){var _this3=this,dbFilterJson=this.dbFilterJson,reportTemplateAssetChooser=this.reportTemplateAssetChooser;if(reportTemplateAssetChooser)return this.getReportTemplateJson(dbFilterJson);var filter={siteFilter:[],siteId:null,buildingFilter:[],buildingId:null,categoryFilter:[],assetFilter:[],assetId:null,ttimeFilter:{}};return(0,validation/* isEmpty */.xb)(dbFilterJson)||(0,validation/* isUndefined */.o8)(dbFilterJson)||Object.keys(dbFilterJson).forEach((function(key){if("site"===key){var values=dbFilterJson[key].value;values.length?filter.siteId=Number(values[0]):filter.siteId=null,filter.siteFilter=_this3.formatedValue(values)}else if("asset"===key){var _values=dbFilterJson[key].value;_values.length&&1===_values.length?filter.assetId=Number(_values[0]):_values.length&&_values.length>1&&(filter.assetFilter=_this3.formatedValue(_values))}else if("building"===key){var _values2=dbFilterJson[key].value;_values2.length&&1===_values2.length?filter.buildingId=Number(_values2[0]):_values2.length&&_values2.length>1&&(filter.buildingFilter=_this3.formatedValue(_values2))}else key&&key.startsWith("ttime_")&&(filter.ttimeFilter[key]=dbFilterJson[key])})),filter},applyFilterJson:function(filter){var _this$config$widget$i,_this$config,userFilter=this.$refs["userFilter-".concat(null!==(_this$config$widget$i=null===(_this$config=this.config)||void 0===_this$config||null===(_this$config=_this$config.widget)||void 0===_this$config?void 0:_this$config.id)&&void 0!==_this$config$widget$i?_this$config$widget$i:this.reportId)];this.reportTemplateAssetChooser?
// this method helps to load template report while dashboard filter change
filter.assetId&&(this.reportTemplate.parentId=filter.assetId,this.applyTemplate(),this.prefillAsset(filter)):userFilter&&(userFilter.reportFilter=filter,
// userFilter.initProps()
this.$nextTick((function(){self.filter=filter,userFilter.applyFilter()})))},getQueryStringParams:function(qs){var params={};if(qs){var _step,qsList=qs.split("&"),_iterator=(0,createForOfIteratorHelper/* default */.Z)(qsList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var qsEntry=_step.value,key=qsEntry.split("=")[0],value=qsEntry.split("=")[1];params[key]=value}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return params},setParamsToTemplate:function(){var self=this,reportTemplteParam=JSON.parse(self.reportTemplteParams);if(reportTemplteParam.type&&2===reportTemplteParam.type){var querryCategoryTemplate=reportTemplteParam.categoryTemplate;querryCategoryTemplate&&querryCategoryTemplate.fahu&&querryCategoryTemplate["fahu"]["parentId"]&&(Object.values(self.reportTemplate.categoryTemplate)[0].parentId=querryCategoryTemplate["fahu"]["parentId"]),querryCategoryTemplate&&querryCategoryTemplate.energymeter&&querryCategoryTemplate["energymeter"]["parentId"]&&(Object.values(self.reportTemplate.categoryTemplate)[1].parentId=querryCategoryTemplate["energymeter"]["parentId"])}else self.reportTemplate={},Object.keys(JSON.parse(this.reportTemplteParams)).forEach((function(rt){self.$set(self.reportTemplate,rt,Number(JSON.parse(self.reportTemplteParams)[rt]))}));this.initChart(self.reportTemplate)},applyTemplate:function(){var _this$config2,_this$config$widget$d,_this$config3;null!==(_this$config2=this.config)&&void 0!==_this$config2&&null!==(_this$config2=_this$config2.widget)&&void 0!==_this$config2&&null!==(_this$config2=_this$config2.dataOptions)&&void 0!==_this$config2&&_this$config2.reportTemplate&&(this.config.widget.dataOptions.reportTemplate=null);var _ref4=null!==(_this$config$widget$d=null===(_this$config3=this.config)||void 0===_this$config3||null===(_this$config3=_this$config3.widget)||void 0===_this$config3||null===(_this$config3=_this$config3.dataOptions)||void 0===_this$config3?void 0:_this$config3.newReport)&&void 0!==_this$config$widget$d?_this$config$widget$d:{},type=_ref4.type,reportTemplate=_ref4.reportTemplate;4===type&&reportTemplate&&(this.config.widget.dataOptions.newReport.reportTemplate=null),this.init(!1)},onPeriodChange:function(){this.initChart()},setDateFilter:function(dateFilter){this.dateFilter=dateFilter,this.userFilterApplied?this.applyFilter(this.userFilterApplied):this.initChart()},init:function(){this.$store.dispatch("loadAlarmSeverity"),this.componentVisibleInViewPort&&this.initChart()},resize:function(){this.$refs["newChart"]&&this.$refs["newChart"].resize(),this.$refs["heatmap"]&&this.$refs["heatmap"].resize(),this.$refs["treemap"]&&this.$refs["treemap"].resize(),this.$refs["multiChart"]&&this.$refs["multiChart"].resize(),this.$refs["newTable"]&&this.$refs["newTable"].resize()},renderTrendChart:function(){this.$refs["trendChart"]&&this.$refs["trendChart"].resize()},setAppliedFilterInParams:function(filters,params,categoryId){var _filters$siteFilter,_filters$buildingFilt,_filters$categoryFilt,_filters$assetFilter,_filters$assetFilter2;if(filters&&(null!==filters&&void 0!==filters&&filters.siteFilter||null!==filters&&void 0!==filters&&filters.buildingFilter||null!==filters&&void 0!==filters&&filters.categoryFilter||null!==filters&&void 0!==filters&&filters.assetFilter))if(null!==filters&&void 0!==filters&&null!==(_filters$siteFilter=filters.siteFilter)&&void 0!==_filters$siteFilter&&_filters$siteFilter.length||null!==filters&&void 0!==filters&&null!==(_filters$buildingFilt=filters.buildingFilter)&&void 0!==_filters$buildingFilt&&_filters$buildingFilt.length||null!==filters&&void 0!==filters&&null!==(_filters$categoryFilt=filters.categoryFilter)&&void 0!==_filters$categoryFilt&&_filters$categoryFilt.length||null!==filters&&void 0!==filters&&null!==(_filters$assetFilter=filters.assetFilter)&&void 0!==_filters$assetFilter&&_filters$assetFilter.length||(params.xCriteriaMode=2),null!==filters&&void 0!==filters&&null!==(_filters$assetFilter2=filters.assetFilter)&&void 0!==_filters$assetFilter2&&_filters$assetFilter2.length)params.xCriteriaMode=3,params.parentId=filters.assetFilter;else{var _filters$buildingFilt2,spaceFilter=null!==filters&&void 0!==filters&&null!==(_filters$buildingFilt2=filters.buildingFilter)&&void 0!==_filters$buildingFilt2&&_filters$buildingFilt2.length?filters.buildingFilter:filters.siteFilter;params.xCriteriaMode=4,params.spaceId=spaceFilter,params.assetCategory=filters.categoryFilter.length?filters.categoryFilter:categoryId,params.spaceId&&params.spaceId.length||(params.xCriteriaMode=2)}null!==filters&&void 0!==filters&&filters.ttimeFilter&&(params.ttimeFilter=JSON.stringify(filters.ttimeFilter))},formTTimeFilter:function(dbFilterJson){var formTTimeFilerObj={};if(dbFilterJson){var keys=Object.keys(dbFilterJson);if(keys.forEach((function(key,index){key&&key.startsWith("ttime_")&&(formTTimeFilerObj[key]=dbFilterJson[key])})),!(0,validation/* isEmpty */.xb)(formTTimeFilerObj))return formTTimeFilerObj}return null},initChart:function(reportTempl){var _this4=this,self=this,templateJson=this.templateJson;self.loading=!0,self.failed=!1,this.$nextTick((function(){var params={newFormat:!0};if(_this4.config&&_this4.config.widget&&_this4.config.widget.dataOptions&&_this4.config.widget.dataOptions.reportTemplate){var reportTemplate=null;if("string"===typeof _this4.config.widget.dataOptions.reportTemplate)try{reportTemplate=JSON.parse(_this4.config.widget.dataOptions.reportTemplate)}catch(e){}else reportTemplate=JSON.parse(JSON.stringify(_this4.config.widget.dataOptions.reportTemplate));reportTemplate&&reportTemplate.parentId&&reportTemplate.chooseValues&&0===reportTemplate.chooseValues.length&&(self.reportTemplate=JSON.parse(JSON.stringify(reportTemplate)))}else if(_this4.config&&_this4.config.widget&&_this4.config.widget.dataOptions&&_this4.config.widget.dataOptions.newReport&&4===_this4.config.widget.dataOptions.newReport.type&&_this4.config.widget.dataOptions.newReport.reportTemplate){var _reportTemplate=JSON.parse(JSON.stringify(_this4.config.widget.dataOptions.newReport.reportTemplate));_reportTemplate.parentId&&_reportTemplate.chooseValues&&0===_reportTemplate.chooseValues.length&&(self.reportTemplate=_reportTemplate)}_this4.isWidget&&_this4.reportObj&&(params.showAlarms=_this4.reportObj.options.settings.alarm,params.showSafeLimit=_this4.reportObj.options.settings.safelimit),_this4.reportObj=null,_this4.appliedDateRange?(params.startTime=_this4.appliedDateRange.startTime,params.endTime=_this4.appliedDateRange.endTime):self.dateFilter&&self.dateFilter.value&&(params.startTime=self.dateFilter.value[0],params.endTime=self.dateFilter.value[1]),_this4.isSiteFilterApplied_toExport&&(params.spaceId_forExport=_this4.isSiteFilterApplied_toExport,params.filterModeValue_toExport=_this4.isSiteFilterMode_toExport),null!==self.period&&(params.xAggr=self.period);var appliedAssetFilter={};if(_this4.filter&&_this4.filter.siteFilter){var categoryId=[];self.setAppliedFilterInParams(_this4.filter,params,categoryId),null!==params&&void 0!==params&&params.parentId&&(appliedAssetFilter.parentId=params.parentId)}if(null!==_this4&&void 0!==_this4&&_this4.dbFilterJson&&Object.keys(_this4.dbFilterJson).length>0){var tTimeFilterVal=_this4.formTTimeFilter(_this4.dbFilterJson);tTimeFilterVal&&(params.ttimeFilter=JSON.stringify(tTimeFilterVal))}var _ref5=null!==_this4&&void 0!==_this4?_this4:{},ruleInfo=_ref5.ruleInfo;(0,validation/* isEmpty */.xb)(ruleInfo)||(params["ruleInfo"]=ruleInfo);var url="/v3/report/reading/view?reportId="+_this4.reportId;if(templateJson)url=url+"&templateString="+encodeURIComponent(JSON.stringify(templateJson)),null!==templateJson&&void 0!==templateJson&&templateJson.parentId&&(appliedAssetFilter.parentId=templateJson.parentId);else if(reportTempl)reportTempl.chooseValues=[],url=url+"&templateString="+encodeURIComponent(JSON.stringify(reportTempl)),null!==reportTempl&&void 0!==reportTempl&&reportTempl.parentId&&(appliedAssetFilter.parentId=reportTempl.parentId);else if(self.reportTemplate){if(2!==self.reportTemplate.templateType){var template=JSON.parse(JSON.stringify(self.reportTemplate));template.chooseValues=[],url=url+"&templateString="+encodeURIComponent(JSON.stringify(template)),null!==template&&void 0!==template&&template.parentId&&(appliedAssetFilter.parentId=template.parentId)}}else if(_this4.appliedReportTemplate){var _template=JSON.parse(_this4.appliedReportTemplate);_template.chooseValues=[],url=url+"&templateString="+encodeURIComponent(JSON.stringify(_template)),null!==_template&&void 0!==_template&&_template.parentId&&(appliedAssetFilter.parentId=_template.parentId)}var filters=_this4.$route.query.filters;if(!(0,validation/* isEmpty */.xb)(filters)){_this4.isFilterApplied=!0;var filterObj=JSON.parse(filters);params.mode=filterObj.mode,params.xCriteriaMode=filterObj.xCriteriaMode,(0,validation/* isEmpty */.xb)(filterObj.spaceId)||(params.spaceId=filterObj.spaceId),(0,validation/* isEmpty */.xb)(filterObj.parentId)||(params.parentId=filterObj.parentId)}api/* API */.bl.put(url,params).then((function(response){if(response.error)self.$message.error("Error while fetching report data"),self.loading=!1,self.failed=!0;else{var _Object$keys,_self$reportObj,result=response.data;if(self.dateFilter||(self.appliedDateRange?self.appliedDateRange.startTime&&self.appliedDateRange.endTime?self.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(self.appliedDateRange.operatorId,self.appliedDateRange.startTime+","+self.appliedDateRange.endTime):self.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(self.appliedDateRange.operatorId,self.appliedDateRange.value):self.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(result.report.dateOperator,result.report.dateValue)),result.xAggr=response.data.report.xAggr,result&&result.report&&result.report.reportState&&result.report.reportState.hmAggr&&(result.report.hmAggr=result.report.reportState.hmAggr),result.dateRange=self.dateFilter,self.period=response.data.report.xAggr,result&&result.report&&8===result.report.analyticsType&&result.report.reportState&&result.report.reportState.scatterConfig){self.trendresultObj=deepmerge/* default */.Z.objectAssignDeep({},result),self.trendresultObj.report.chartState=null,self.prepareTrendReportObj(self.trendresultObj,params);var savedconfig=JSON.parse(result.report.reportState.scatterConfig);result.scatterConfig=savedconfig.datapoints}result.report.reportState&&null!==result.report.reportState.regressionConfig&&result.report.reportState.regressionType&&result.report.reportState.regressionConfig&&"multiple"!==result.report.reportState.regressionType&&(result.regression=!0,result.regressionType=result.report.reportState.regressionType,result.regressionConfig=result.report.reportState.regressionConfig);var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(result.report.dataPoints);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var dp=_step2.value;if(!0===dp.xDataPoint){result["Readingdp"]=dp;break}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}if(result.report.trendLineDataPoints&&(self.getTrendLineEquation(result),result.report.dataPoints=result.report.dataPoints.concat(result.report.trendLineDataPoints)),result.report.chartState){var chartStateObject=JSON.parse(result.report.chartState);if(11===chartStateObject.common.mode){var x=result.report.dataPoints[0].yAxis,y=result.report.dataPoints[0].xAxis;result.report.dataPoints[0].yAxis=y,result.report.dataPoints[0].xAxis=x}}if((null===(_Object$keys=Object.keys(appliedAssetFilter))||void 0===_Object$keys?void 0:_Object$keys.length)>0){var _this4$reportTemplate,assets=null===(_this4$reportTemplate=_this4.reportTemplate)||void 0===_this4$reportTemplate?void 0:_this4$reportTemplate.chooseValues;for(var aId in assets)assets[aId].id===appliedAssetFilter.parentId&&(appliedAssetFilter.name=assets[aId].name);result.appliedAssetFilter=appliedAssetFilter}if(self.reportObj=self.prepareReport(result,params),self.reportObj.alarms=self.prepareBooleanReport(result.reportData.aggr),"table"===(null===(_self$reportObj=self.reportObj)||void 0===_self$reportObj||null===(_self$reportObj=_self$reportObj.options)||void 0===_self$reportObj?void 0:_self$reportObj.type)&&_this4.$emit("hideChart"),4===result.report.type&&(null===self.reportTemplate&&(self.reportTemplate=JSON.parse(JSON.stringify(result.report.reportTemplate))),null===self.reportTemplate.parentId&&self.reportTemplate.defaultValue&&(self.reportTemplate.parentId=self.reportTemplate.defaultValue),0===self.reportTemplate.chooseValues.length&&(!0===self.reportTemplate.isVisibleInDashBoard||null===self.reportTemplate.isVisibleInDashBoard))){var _filters=self.getFiltersFromCriteria(self.reportTemplate);self.loadReportTemplateValues(self.reportTemplate,_filters)}if(self.reportTemplate&&result&&result.report&&4===result.report.type){var _template2=JSON.parse(JSON.stringify(self.reportTemplate));_template2.chooseValues=[],result.report.currentTemplate=_template2}result.report.reportState&&null!==result.report.reportState.regressionConfig&&result.report.reportState.regressionType&&result.report.reportState.regressionConfig&&"multiple"===result.report.reportState.regressionType&&(result.regression=!0,result.regressionType=result.report.reportState.regressionType,result.regressionConfig=result.report.reportState.regressionConfig),self.reportObj&&self.reportObj.options.mode&&(result.mode=self.reportObj.options.mode),self.resultObj=result,_this4.pdfloading=!0,self.appliedChartType&&self.reportObj&&(
// TODO remove
self.reportObj.options.type=self.appliedChartType),self.reportObj.params=params,self.$emit("reportLoaded",self.reportObj,self.resultObj);var clonedItem=cloneDeep_default()(self.item);clonedItem.widget.dataOptions.newReport=cloneDeep_default()(self.resultObj.report),self.updateWidget(clonedItem),params&&params.spaceId_forExport&&(self.filter=self.prepareUserFilterProps(self.configdbUserFilterJson(),self.reportObj),self.filter.siteFilter=[Number(params.spaceId_forExport)]),self.loading=!1}0==_this4.isReportLoadedOnes&&(_this4.isReportLoadedOnes=!0)})).catch((function(error){error&&(self.loading=!1,self.failed=!0)}))}))},applyTTimeFilter:function(filterObj){null!==filterObj&&void 0!==filterObj&&filterObj.isTTimeFilter&&!(0,validation/* isEmpty */.xb)(this.reportObj)&&this.applyFilter(filterObj.filters,filterObj.isTTimeFilter)},applyFilter:function(filters,isTTimeFilter){var _self$resultObj,_filters$siteFilter2,_filters$assetFilter3,_filters$categoryFilt2,_filters$buildingFilt3,params={newFormat:!0};if(isTTimeFilter){var tTimeFilterVal=this.formTTimeFilter(filters);tTimeFilterVal&&(params.ttimeFilter=JSON.stringify(tTimeFilterVal),filters.ttimeFilter=tTimeFilterVal)}this.filter=filters;var self=this;self.loading=!0,self.failed=!1;var _self$resultObj2,reportContext=null;(self.resultObj&&self.resultObj.report&&self.resultObj.report.id&&-1!=self.resultObj.report.id&&(reportContext=self.resultObj.report),params.mode=this.resultObj.mode,null!==(_self$resultObj=self.resultObj)&&void 0!==_self$resultObj&&null!==(_self$resultObj=_self$resultObj.report)&&void 0!==_self$resultObj&&_self$resultObj.analyticsType)&&(params.analyticsType=null===(_self$resultObj2=self.resultObj)||void 0===_self$resultObj2||null===(_self$resultObj2=_self$resultObj2.report)||void 0===_self$resultObj2?void 0:_self$resultObj2.analyticsType);var chartStateObject,sortField,limit,orderByFunc,chartState=self.resultObj.report.chartState,tabularState=self.resultObj.report.tabularState;self.reportObj&&self.reportObj.options&&self.reportObj.options.common&&self.reportObj.options.common.sorting?(self.reportObj.options.common.sorting.sortByField&&(sortField=self.reportObj.options.common.sorting.sortByField),self.reportObj.options.common.sorting.limit&&(limit=self.reportObj.options.common.sorting.limit,orderByFunc=self.reportObj.options.common.sorting.orderByFunc)):chartState&&(chartStateObject=JSON.parse(chartState),chartStateObject&&chartStateObject.options&&chartStateObject.options.common&&chartStateObject.options.common.sorting&&(chartStateObject.options.common.sorting.sortByField&&(sortField=chartStateObject.options.common.sorting.sortByField),chartStateObject.options.common.sorting.limit&&(limit=chartStateObject.options.common.sorting.limit,orderByFunc=chartStateObject.options.common.sorting.orderByFunc))),[1,2,3,4].includes(params.mode)&&(params.xAggr=this.resultObj.report.xAggr),this.appliedDateRange?(params.startTime=this.appliedDateRange.startTime,params.endTime=this.appliedDateRange.endTime):self.dateFilter&&self.dateFilter.value&&(params.startTime=self.dateFilter.value[0],params.endTime=self.dateFilter.value[1]);var _step3,fields=[],categoryId=[],_iterator3=(0,createForOfIteratorHelper/* default */.Z)(this.resultObj.report.dataPoints);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var dp=_step3.value;dp.metaData&&dp.metaData.categoryId&&-1===categoryId.indexOf(dp.metaData.categoryId)&&categoryId.push(dp.metaData.categoryId);var dataField={parentId:null,name:dp.name,metaData:dp.metaData,yAxis:{fieldId:dp.yAxis.fieldId,aggr:dp.yAxis.aggr,label:dp.name,dataType:dp.yAxis.dataType,unitStr:dp.yAxis.unitStr},aliases:dp.aliases,type:dp.type>0?dp.type:1,transformWorkflow:dp.transformWorkflow};sortField&&sortField===dp.yAxis.fieldId&&(dataField.orderByFunc=orderByFunc,dataField.limit=limit),fields.push(dataField)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}if(params.fields=JSON.stringify(fields),this.resultObj.report.baseLines&&this.resultObj.report.baseLines.length){var _step4,baseLines=[],_iterator4=(0,createForOfIteratorHelper/* default */.Z)(this.resultObj.report.baseLines);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var bl=_step4.value;baseLines.push({baseLineId:bl.baseLineId,adjustType:bl.adjustType})}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}params.baseLines=JSON.stringify(baseLines)}filters&&!isTTimeFilter&&self.setAppliedFilterInParams(filters,params,categoryId),!isTTimeFilter&&filters&&(null!==filters&&void 0!==filters&&null!==(_filters$siteFilter2=filters.siteFilter)&&void 0!==_filters$siteFilter2&&_filters$siteFilter2.length||null!==filters&&void 0!==filters&&null!==(_filters$assetFilter3=filters.assetFilter)&&void 0!==_filters$assetFilter3&&_filters$assetFilter3.length||null!==filters&&void 0!==filters&&null!==(_filters$categoryFilt2=filters.categoryFilter)&&void 0!==_filters$categoryFilt2&&_filters$categoryFilt2.length||null!==filters&&void 0!==filters&&null!==(_filters$buildingFilt3=filters.buildingFilter)&&void 0!==_filters$buildingFilt3&&_filters$buildingFilt3.length)||(params.xCriteriaMode=6),self.$http.post("/v2/report/readingReport",params).then((function(response){var _result$report,result=response.data.result;result.xAggr=params.xAggr,result.mode=params.mode,result.report.analyticsType=(null===(_result$report=result.report)||void 0===_result$report?void 0:_result$report.analyticsType)>0?result.report.analyticsType:1,result.dateRange=self.dateFilter,result.report.chartState=chartState,result.report.tabularState=tabularState,self.reportObj=self.prepareReport(result),reportContext&&(result.report.id=reportContext.id,result.report.name=reportContext.name),self.resultObj=result,self.reportObj.params=params,self.$emit("reportLoaded",self.reportObj,self.resultObj),self.loading=!1,self.userFilterApplied=filters})).catch((function(error){self.userFilterApplied=filters,error&&(self.loading=!1,self.failed=!0)}))},onSettingsChange:function(changedOption){"alarm"===changedOption?this.reportObj.alarms&&this.reportObj.alarms.regions.length||!this.reportObj||!this.reportObj.options.settings.alarm||this.initChart():"safelimit"===changedOption&&this.reportObj&&!this.reportObj.options.safeLimit.length&&this.reportObj.options.settings.safelimit&&this.initChart()},getTrendLineEquation:function(result){var self=this,trendLineProp=result.reportData.trendLineProp,chartStateObject=JSON.parse(result.report.chartState),trendlineObj=chartStateObject.trendLine,decimalCount=trendlineObj.decimal,_loop=function(alias){var coef=trendLineProp[alias].coef;coef.forEach((function(data,index){coef[index]=self.showDecimal(data,decimalCount)+(0!==index?"x^"+index:"")})),coef.reverse(),coef=coef.join(" + ");var dataPoint=result.report.trendLineDataPoints.filter((function(dataPoint){return dataPoint.aliases.actual===alias}));dataPoint[0].name=coef,trendlineObj&&trendlineObj.showr2&&(dataPoint[0].name="R^2 = "+self.showDecimal(trendLineProp[dataPoint[0].aliases.actual].rSquare,decimalCount)+"; "+dataPoint[0].name)};for(var alias in trendLineProp)_loop(alias)},showDecimal:function(data,decimalCount){var splitData=data.split(".");return splitData[1]?splitData[0]+"."+splitData[1].slice(0,decimalCount):data},prepareTrendReportObj:function(result,params){var reportObj=this.prepareReport(result,params);reportObj.alarms=this.prepareBooleanReport(result.reportData.aggr),result.report.reportState&&null!==result.report.reportState.regressionConfig&&result.report.reportState.regressionType&&result.report.reportState.regressionConfig&&"multiple"===result.report.reportState.regressionType&&(result.regression=!0,result.regressionType=result.report.reportState.regressionType,result.regressionConfig=result.report.reportState.regressionConfig),this.reportObj&&this.reportObj.options.mode&&(result.mode=this.reportObj.options.mode),this.trendresultObj=result,this.trendreportObj=reportObj}}},reports_FNewReportvue_type_script_lang_js=FNewReportvue_type_script_lang_js,FNewReport_component=(0,componentNormalizer/* default */.Z)(reports_FNewReportvue_type_script_lang_js,FNewReportvue_type_template_id_4b8aed8b_scoped_true_render,FNewReportvue_type_template_id_4b8aed8b_scoped_true_staticRenderFns,!1,null,"4b8aed8b",null)
/* harmony default export */,FNewReport=FNewReport_component.exports,AnalyticalReportWidgetvue_type_script_lang_js={components:{FNewReport:FNewReport,DashboardFilterWidgetConfigDialog:DashboardFilterWidgetConfigDialog/* default */.Z},mixins:[BaseWidgetMixin/* default */.Z],data:function(){return{reportLoadedOnes:!1,templateConfig:{showOrHide:1,choosenResource:null,assets:[],hideHeader:!1},showTemplateConfigDialog:!1,showDashboardFilterWidgetConfigDialog:!1,exportDownloadUrl:null,ruleInfo:{},dbTimelineFilter:{},dbFilterJson:{}}},created:function(){this.initWidget(this.widgetConfig)},computed:{report:function(){var _this$$refs$FNewRepor,_ref=null!==(_this$$refs$FNewRepor=this.$refs["FNewReport"])&&void 0!==_this$$refs$FNewRepor?_this$$refs$FNewRepor:{},resultObj=_ref.resultObj,_ref2=null!==resultObj&&void 0!==resultObj?resultObj:{},report=_ref2.report;return report},reportId:function(){var _ref3=null!==this&&void 0!==this?this:{},reportId=_ref3.widget.dataOptions.newReportId;return reportId},id:function(){var id=this.item.id;return id},widgetConfig:function(){var _this=this,id=this.id,report=this.report,_ref4=null!==report&&void 0!==report?report:{},getGoToReport=(_ref4.type,function(){return _this.isPortalApp?[]:[{label:"Go to Report",action:_this.goToReport,icon:"el-icon-top-right"}]}),getExploreInAnalytics=function(){return _this.isPortalApp?[]:[{label:"Explore in Analytics",action:_this.exploreInAnalytics,icon:"el-icon-data-analysis"},{isLineBreak:!0}]};return{id:id,minW:25,maxW:96,minH:10,maxH:50,showHeader:!0,showExpand:!0,noResize:!1,showDropDown:!0,editMenu:[],borderAroundWidget:!0,viewMenu:[].concat((0,toConsumableArray/* default */.Z)(getGoToReport()),(0,toConsumableArray/* default */.Z)(getExploreInAnalytics()),[{label:"Export as CSV",action:function(){return _this.exportReport("CSV")},icon:"el-icon-download"},{label:"Export as Excel",action:function(){return _this.exportReport("Excel")},icon:"el-icon-download"},{label:"Export as PDF",action:function(){return _this.exportReport("PDF")},icon:"el-icon-download"},{label:"Export as Image",action:function(){return _this.exportReport("Image")},icon:"el-icon-download"},{isLineBreak:!0},{label:"Email this Report",action:function(){_this.$refs["FNewReport"].emailReportVisibility=!0},icon:"el-icon-message"}]),configFilter:[{label:"Configure filter",action:function(){return _this.configureFilter()},icon:"el-icon-setting"}]}},widget:function(){var _ref5=null!==this&&void 0!==this?this:{},_ref5$item=_ref5.item,item=void 0===_ref5$item?{}:_ref5$item,_item$widget=item.widget,widget=void 0===_item$widget?{}:_item$widget;return widget},config:function(){return{widget:this.item.widget}}},methods:{reportLoaded:function(){var _this2=this;
// Update the drop down menu here...
this.$nextTick((function(){var _this2$widget;4!==(null===(_this2$widget=_this2.widget)||void 0===_this2$widget||null===(_this2$widget=_this2$widget.dataOptions)||void 0===_this2$widget||null===(_this2$widget=_this2$widget.newReport)||void 0===_this2$widget?void 0:_this2$widget.type)||"edit"!=_this2.viewOrEdit||_this2.reportLoadedOnes||(_this2.updateEditDropDown([{label:"Report Options",icon:"el-icon-s-data",action:_this2.showTemplateReportOptions}]),_this2.reportLoadedOnes=!0)}))},configureWidget:function(){var _this3=this,template=(0,lodash.cloneDeep)(this.currentTemplate),_this$templateConfig=this.templateConfig,showOrHide=_this$templateConfig.showOrHide,choosenResource=_this$templateConfig.choosenResource;1===showOrHide?template.isVisibleInDashBoard=!0:(template.isVisibleInDashBoard=!1,template.parentId=choosenResource,template.defaultValue=choosenResource),template.chooseValues=[],this.currentTemplate=template;var clonedItem=(0,lodash.cloneDeep)(this.item);clonedItem.widget.dataOptions.reportTemplate=template,this.updateWidget(clonedItem),this.showTemplateConfigDialog=!1,this.$nextTick((function(){_this3.$refs.FNewReport.init()}))},closeDialog:function(){this.showTemplateConfigDialog=!1},loadReportTemplateValues:function(reportTemplate,fieldVsValueList){return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var categoryId,request,_iterator,_step,key,values,_iterator2,_step2,val,url,_yield$API$get,assets,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!reportTemplate){_context.next=13;break}if(categoryId=reportTemplate.categoryId,request={},reportTemplate.buildingId&&-1!==reportTemplate.buildingId?request["space"]={operatorId:38,value:[reportTemplate.buildingId+""]}:reportTemplate.siteId&&-1!==reportTemplate.siteId&&(request["space"]={operatorId:36,value:[reportTemplate.siteId+""]}),reportTemplate.defaultValue&&(request["id"]={operatorId:9,value:[reportTemplate.defaultValue+""],orFilters:[{field:"category",operatorId:36,value:[categoryId+""]}]}),fieldVsValueList&&0!==fieldVsValueList.length){_iterator=(0,createForOfIteratorHelper/* default */.Z)(fieldVsValueList);try{for(_iterator.s();!(_step=_iterator.n()).done;){if(key=_step.value,values=[],key.values)if("string"===typeof key.values)values=5===key.operatorId?key.values.split(","):[key.values];else{_iterator2=(0,createForOfIteratorHelper/* default */.Z)(key.values);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;)val=_step2.value,values.push(val+"")}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}else values=null;request[key.fieldName]={operatorId:key.operatorId,value:values}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return url="/asset/all?filters="+encodeURIComponent(JSON.stringify(request))+"&orderBy=FIELD(Assets.ID,"+reportTemplate.defaultValue+")&orderType=desc&overrideViewOrderBy=true",_context.next=9,api/* API */.bl.get(url);case 9:_yield$API$get=_context.sent,assets=_yield$API$get.data.assets,error=_yield$API$get.error,(0,validation/* isEmpty */.xb)(error)&&(reportTemplate.chooseValues=assets);case 13:case"end":return _context.stop()}}),_callee)})))()},showTemplateReportOptions:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _self$widget$dataOpti,_self$widget,self,_ref6,reportTemplate,_ref6$newReport,type,newReportTemplate,template;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(self=_this4,_ref6=null!==(_self$widget$dataOpti=null===(_self$widget=self.widget)||void 0===_self$widget?void 0:_self$widget.dataOptions)&&void 0!==_self$widget$dataOpti?_self$widget$dataOpti:{},reportTemplate=_ref6.reportTemplate,_ref6$newReport=_ref6.newReport,type=_ref6$newReport.type,newReportTemplate=_ref6$newReport.reportTemplate,4!==type){_context2.next=10;break}if(self.currentTemplate=null!==newReportTemplate&&void 0!==newReportTemplate?newReportTemplate:reportTemplate,0!==self.templateConfig.assets.length){_context2.next=9;break}return template=(0,lodash.cloneDeep)(self.currentTemplate),_context2.next=8,self.loadReportTemplateValues(template);case 8:self.templateConfig.assets=template.chooseValues;case 9:self.showTemplateConfigDialog=!0;case 10:case"end":return _context2.stop()}}),_callee2)})))()},configureFilter:function(){this.showDashboardFilterWidgetConfigDialog=!0},saveWidgetFilterSettings:function(widget){var _this5=this;this.showDashboardFilterWidgetConfigDialog=!1;var data={widgets:[{id:widget.id,widgetSettingsJsonString:JSON.stringify(widget.widgetSettings)}]};api/* API */.bl.post("v2/dashboardFilter/updateWidgetSettings",data).then((function(resp){var error=resp.error;if(error)_this5.$message("error updating widget-filter settings");else{var _widget$widgetSetting,_widget$widgetSetting2,clonedItem=(0,lodash.cloneDeep)(_this5.item);clonedItem.widget.widgetSettings.excludeDbFilters=null!==(_widget$widgetSetting=null===widget||void 0===widget||null===(_widget$widgetSetting2=widget.widgetSettings)||void 0===_widget$widgetSetting2?void 0:_widget$widgetSetting2.excludeDbFilters)&&void 0!==_widget$widgetSetting&&_widget$widgetSetting,_this5.updateWidget(clonedItem)}}))},reportOptions:function(){var _this$getReportObj=this.getReportObj(),report=_this$getReportObj.report,_ref7=null!==report&&void 0!==report?report:{};_ref7.type},exploreInAnalytics:function(){var routePath,reportId=this.reportId,_this$getReportObj2=this.getReportObj(),reportObj=_this$getReportObj2.reportObj,report=_this$getReportObj2.report,deafultPath="/app/em/analytics/",ANALYTIC_PORTFOLIO=router/* pageTypes */.As.ANALYTIC_PORTFOLIO,ANALYTIC_BUILDING=router/* pageTypes */.As.ANALYTIC_BUILDING,HEAT_MAP=router/* pageTypes */.As.HEAT_MAP,ANALYTIC_SITE=router/* pageTypes */.As.ANALYTIC_SITE,TREE_MAP=router/* pageTypes */.As.TREE_MAP,SCATTER=router/* pageTypes */.As.SCATTER;switch(report.analyticsType){case 1:routePath=reportObj&&reportObj.options.common.filters&&reportObj.options.common.filters.xCriteriaMode?{path:"portfolio",pageType:ANALYTIC_PORTFOLIO}:{path:"building",pageType:ANALYTIC_BUILDING};break;case 3:routePath={path:"heatmap",pageType:HEAT_MAP};break;case 6:routePath={path:"site",pageType:ANALYTIC_SITE};break;case 7:routePath={path:"treemap",pageType:TREE_MAP};break;case 8:routePath={path:"scatter",pageType:SCATTER};break;default:routePath={path:"building",pageType:ANALYTIC_BUILDING}}if((0,router/* isWebTabsEnabled */.tj)()){var _ref8=(0,router/* findRouteForTab */.OD)(routePath.pageType)||{},name=_ref8.name,query={reportId:reportId,fromDashboard:!0};name&&this.$router.push({name:name,query:query})}else this.$router.push({path:deafultPath+routePath.path,query:{reportId:reportId,fromDashboard:!0}})},expandReport:function(){var params={},_this$getReportObj3=this.getReportObj(),timelineFilter=_this$getReportObj3.timelineFilter,report=_this$getReportObj3.report,userFilter=_this$getReportObj3.userFilter,reportId=_this$getReportObj3.reportId;if(params["type"]="report",(0,validation/* isEmpty */.xb)(userFilter)||(params["dbFilterJson"]=userFilter),!(0,validation/* isEmpty */.xb)(timelineFilter)){var _timelineFilter$value=(0,slicedToArray/* default */.Z)(timelineFilter.value,2),startTime=_timelineFilter$value[0],endTime=_timelineFilter$value[1],operatorId=timelineFilter.operatorId,label=timelineFilter.label;params["dbTimelineFilter"]=(0,lodash.cloneDeep)({startTime:startTime,endTime:endTime,operatorId:operatorId,dateLabel:label,dateValueString:"".concat(startTime,",").concat(endTime)})}params["url"]="",params["alt"]="",params["dashboardId"]="",params["reportId"]=reportId,params["newReport"]=reportId?report:null,params["target"]="",this.$popupView.openPopup(params)},exportReport:function(fileType){var _this6=this,fileTypeCode=Number(Object.keys(this.$constants.FILE_FORMAT).find((function(key){return fileType==_this6.$constants.FILE_FORMAT[key]}))),_this$getReportObj4=this.getReportObj(),params=_this$getReportObj4.params,_this$getReportObj4$t=(0,slicedToArray/* default */.Z)(_this$getReportObj4.timelineFilter.value,2),startTime=_this$getReportObj4$t[0],endTime=_this$getReportObj4$t[1],dateRange=_this$getReportObj4.dateRange,options=_this$getReportObj4.options,reportId=_this$getReportObj4.reportId,reportTemplate=this.widget.dataOptions.reportTemplate;this.$message({message:"Exporting as "+fileType,showClose:!0,duration:0}),"Image"==fileType&&(params.exportParams={showHeader:!0,showPrintDetails:!0}),(0,validation/* isEmpty */.xb)(reportTemplate)||"null"==reportTemplate||(params["templateString"]=reportTemplate),params["startTime"]=startTime,params["endTime"]=endTime,params["dateOperator"]=dateRange.operatorId,params["dateOperatorValue"]=dateRange.value,params["chartType"]=options.type,params["mode"]=1,params["reportId"]=reportId,params["fileFormat"]=fileTypeCode,params["url"]=this.getLink(),api/* API */.bl.put("/v3/report/reading/export",params).then((function(response){element_ui_common.Message.closeAll(),response.error?_this6.$message.error("Error while downloading widget PDF"):(0,validation/* isEmpty */.xb)(response.data.fileUrl)||(_this6.exportDownloadUrl=response.data.fileUrl)}))},getReportObj:function(){var _this$$refs$FNewRepor2,_ref9=null!==(_this$$refs$FNewRepor2=this.$refs["FNewReport"])&&void 0!==_this$$refs$FNewRepor2?_this$$refs$FNewRepor2:{},reportObj=_ref9.reportObj,_ref9$reportObj=_ref9.reportObj,dateRange=_ref9$reportObj.dateRange,options=_ref9$reportObj.options,report=_ref9.resultObj.report,timelineFilter=_ref9.dateFilter,_ref10=null!==reportObj&&void 0!==reportObj?reportObj:{},params=_ref10.params,_ref11=null!==this&&void 0!==this?this:{},userFilter=_ref11.dbFilterJson,reportId=_ref11.reportId;return(0,lodash.cloneDeep)({params:null!==params&&void 0!==params?params:{},timelineFilter:timelineFilter,userFilter:userFilter,reportId:reportId,report:report,dateRange:dateRange,options:options,reportObj:reportObj})},getCurrentModule:function(){
// TODO:  Don't know the use of this, this needs to be rewritten,
var routeObj=this.$route,module=null,rootPath=null;if(routeObj.meta.module)module=routeObj.meta.module,rootPath=routeObj.path;else if(routeObj.matched){var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(routeObj.matched);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var matchedRoute=_step3.value;if(matchedRoute.meta.module){module=matchedRoute.meta.module,rootPath=matchedRoute.path;break}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}return{module:module,rootPath:rootPath}},getModuleName:function(){var _report$module,_this$getReportObj5=this.getReportObj(),report=_this$getReportObj5.report,currentModule=this.getCurrentModule();return(0,validation/* isEmpty */.xb)(null===report||void 0===report?void 0:report.module)?null===currentModule||void 0===currentModule?void 0:currentModule.module:null===report||void 0===report||null===(_report$module=report.module)||void 0===_report$module?void 0:_report$module.name},getModulePath:function(moduleName){if(["workorder","workorderLabour","workorderCost","workorderItem","workorderTools","workorderService","workorderTimeLog","workorderHazard","plannedmaintenance"].includes(moduleName))return"/app/wo";if(["alarm","newreadingalarm","readingalarmoccurrence","bmsalarm","mlAnomalyAlarm","anomalyalarmoccurrence","violationalarm","violationalarmoccurrence","operationalarm","operationalarmoccurrence","sensoralarm","sensoralarmoccurrence","sensorrollupalarm","sensorrollupalarmoccurrence","basealarm","alarmoccurrence","readingevent","bmsevent","mlAnomalyEvent","violationevent","operationevent","sensorevent","baseevent"].includes(moduleName))return"/app/fa";if("energydata"===moduleName)return"/app/em";if(["inspectionTemplate","inspectionResponse"].includes(moduleName))return"/app/inspection";if(["asset","assetbreakdown","vendors"].includes(moduleName))modulePath="/app/at";else{if(["tenant","tenantcontact","tenantunit","quote","contact","tenantspaces","quotelineitems","quoteterms","people","newsandinformationsharing","neighbourhoodsharing","dealsandofferssharing","contactdirectorysharing","admindocumentsharing","audienceSharing"].includes(moduleName))return"/app/tm";if(["contracts","purchasecontracts","labourcontracts","warrantycontracts","rentalleasecontracts","purchasecontractlineitems","labourcontractlineitems","warrantycontractlineitems","rentalleasecontractlineitems"].includes(moduleName))return"/app/ct";if(!["visitorlog","visitor","invitevisitor","watchlist"].includes(moduleName)){if(["serviceRequest"].includes(moduleName))return"/app/sr";if(["purchaseorder","purchaseorderlineitems","purchaserequest","poterms","purchaserequestlineitems"].includes(moduleName))return"/app/purchase";if(["budget","budgetamount"].includes(moduleName))return"/app/ac";if(["item","tool","itemTransactions","tootTransactions","itemTypes","toolTypes","storeRoom","shipment","transferrequest","transferrequestshipmentreceivables","transferrequestpurchaseditems"].includes(moduleName))return"/app/inventory";var _report$module2,_this$getReportObj6=this.getReportObj(),report=_this$getReportObj6.report,currentModule=this.getCurrentModule();return null!==report&&void 0!==report&&null!==(_report$module2=report.module)&&void 0!==_report$module2&&_report$module2.custom||currentModule.custom?"/app/ca":"/app/at"}modulePath="/app/vi"}},getRoute:function(moduleName){var _findRouteForReport2,_findRouteForReport3,_findRouteForReport;return moduleName?"energydata"===moduleName?null===(_findRouteForReport2=(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_VIEW,{moduleName:moduleName}))||void 0===_findRouteForReport2?void 0:_findRouteForReport2.name:null===(_findRouteForReport3=(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_VIEW,{moduleName:moduleName}))||void 0===_findRouteForReport3?void 0:_findRouteForReport3.name:null===(_findRouteForReport=(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_VIEW))||void 0===_findRouteForReport?void 0:_findRouteForReport.name},getLink:function(){var moduleName=this.getModuleName(),name=this.getRoute(moduleName);return this.$router.resolve({name:name}).href+"/"+this.reportId},goToReport:function(){var moduleName=this.getModuleName();if((0,router/* isWebTabsEnabled */.tj)()&&!(0,validation/* isEmpty */.xb)(this.reportId)){var name=this.getRoute(moduleName);if((0,validation/* isEmpty */.xb)(name))this.$dialog.confirm({title:this.$t("common._common.tab_not_configured"),message:this.$t("common._common.tab_not_configured_message"),rbLabel:this.$t("common._common.ok"),lbHide:!0});else{var params={reportid:this.reportId};this.$router.push({name:name,params:params})}}else{var _this$widget$dataOpti,_this$widget,_ref12=null!==(_this$widget$dataOpti=null===(_this$widget=this.widget)||void 0===_this$widget?void 0:_this$widget.dataOptions)&&void 0!==_this$widget$dataOpti?_this$widget$dataOpti:{},id=_ref12.reportId;if(this.$helpers.isEtisalat()){var url="/app/em/modulereports/newview/"+reportId;this.$router.push(url)}if((0,validation/* isEmpty */.xb)(this.reportId)){if(!(0,validation/* isEmpty */.xb)(id)){var _url2=modulePath+"/reports/view/"+id;this.$router.push(_url2)}}else{var _modulePath=this.getModulePath(moduleName),_url=_modulePath+"/reports/newview/"+this.reportId;this.$router.push(_url)}}}},props:{viewOrEdit:{type:String,default:"view"},updateWidget:{type:Function},widgetBodyDimension:{type:Object,required:!0},hideTimelineFilterInsideWidget:{type:Boolean,required:!0,default:!1},item:{type:Object,required:!0,default:function(){return{}}},loadImmediately:{type:Boolean,default:!1,required:!0},componentVisibleInViewPort:{type:Boolean,required:!0,default:!1}}},widgets_AnalyticalReportWidgetvue_type_script_lang_js=AnalyticalReportWidgetvue_type_script_lang_js,AnalyticalReportWidget_component=(0,componentNormalizer/* default */.Z)(widgets_AnalyticalReportWidgetvue_type_script_lang_js,AnalyticalReportWidgetvue_type_template_id_0214c112_scoped_true_render,AnalyticalReportWidgetvue_type_template_id_0214c112_scoped_true_staticRenderFns,!1,null,"0214c112",null)
/* harmony default export */,AnalyticalReportWidget=AnalyticalReportWidget_component.exports,ModuleReportWidgetvue_type_template_id_d3bd7b8a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("ModuleNewReport",{ref:"ModuleNewReport",attrs:{id:_vm.id,item:_vm.item,dbCustomScriptFilter:_vm.dbCustomScriptFilter,dbFilterJson:_vm.dbFilterJson||{},dbTimelineFilter:_vm.dbTimelineFilter||{},ruleInfo:_vm.ruleInfo||{},hideTimelineFilterInsideWidget:_vm.hideTimelineFilterInsideWidget,loadImmediately:_vm.loadImmediately,updateWidget:_vm.updateWidget,componentVisibleInViewPort:_vm.componentVisibleInViewPort,widgetBodyDimension:_vm.widgetBodyDimension,config:_vm.config},on:{action:_vm.onAction}}),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_vm.showDashboardFilterWidgetConfigDialog?_c("dashboard-filter-widget-config-dialog",{attrs:{visibility:_vm.showDashboardFilterWidgetConfigDialog,widget:_vm.widget},on:{"update:visibility":function($event){_vm.showDashboardFilterWidgetConfigDialog=$event},widgetFilterConfigChange:_vm.saveWidgetFilterSettings}}):_vm._e()],1)},ModuleReportWidgetvue_type_template_id_d3bd7b8a_scoped_true_staticRenderFns=[],ModuleNewReportvue_type_template_id_2c98d5e1_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"mobile-report"},[_c("div",{staticClass:"datefilter-hide-overlay"}),_vm.showHeadingOnlyForPdf&&_vm.pdfloading?_c("div",{staticClass:"text-center label-txt-black4 bold pB20"},[_vm.excludeParamsObj.title&&_vm.excludeParamsObj.logo?_vm._e():_c("div",{staticClass:"report-pdf-header",staticStyle:{overflow:"hidden"}},[_vm.$org.logoUrl?_c("div",{staticClass:"fc-report-cus-logo",class:{"logo-visible":_vm.excludeParamsObj.logo}},[_c("img",{staticStyle:{width:"100px",height:"50px"},attrs:{src:_vm.$org.logoUrl}})]):_c("div",{staticClass:"fc-logo-report",class:{"logo-visible":_vm.excludeParamsObj.logo}},[_vm.showLogo?_c("img",{attrs:{src:_vm.getFacilioLogoURL}}):_vm._e()]),_vm.excludeParamsObj.title?_vm._e():_c("div",{staticClass:"f18 fc-widget-label ellipsis max-width350px"},[_vm._v(" "+_vm._s(_vm.reportPdfData.report.name||"Report")+" ")])]),_vm.showPrintDetails||_vm.printView?_c("div",{staticClass:"fc-report-author-sec pdf-margin-top pdf-text-left"},[_vm.excludeParamsObj.description?_vm._e():_c("div",[_c("div",{staticClass:"fc-report-author-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.generated_on"))+" "),_c("span",{staticClass:"fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(_vm.formatDate())+" ")])]),_c("div",{staticClass:"fc-report-author-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.generated_by"))+" "),_c("span",{staticClass:"fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(_vm.$account.user.name)+" ")])])]),_vm.excludeParamsObj.filter?_vm._e():_c("div",[_vm.getDateRangeString.dateFieldLabel||_vm.getDateRangeString.label?_c("div",{staticClass:"fc-report-author-txt flex-middle"},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.date_range")+":")+" "),_c("div",{staticClass:"f9 fw6 pdf-left-margin"},[_c("span",{staticClass:"fc-report-author-txt"},[_vm._v(_vm._s(""!==_vm.getDateRangeString.dateFieldLabel?_vm.getDateRangeString.dateFieldLabel.concat(":"):""))]),_vm._v(" "+_vm._s(_vm.getDateRangeString.label)+" ")])]):_vm._e(),_vm._l(_vm.dataObj,(function(value,key,index){return _c("div",{key:index,staticClass:"fc-report-author-txt"},[_vm._v(" "+_vm._s(key+":")+" "),_c("span",{staticClass:"fw6 pdf-left-margin"},[_vm._v(" "+_vm._s(" "+value)+" ")])])}))],2)]):_vm._e()]):_vm._e(),_vm.config&&_vm.widgetDatePicker?_c("portal",{staticClass:"tabulardata-datepicker",attrs:{to:"widget-datepicker"+_vm.config.widget.id,slim:""}},[!_vm.hideTimelineFilterInsideWidget&&_vm.dateFilter?_c("new-date-picker",{key:_vm.datePickerCompKey,staticClass:"filter-field date-filter-comp-new-report inline",attrs:{zone:_vm.$timezone,dateObj:_vm.dateFilter},on:{date:_vm.setDateFilter}}):_vm._e()],1):[!_vm.hideTimelineFilterInsideWidget&&_vm.showDatePicker?_c("div",[_c("new-date-picker",{key:_vm.datePickerCompKey,staticClass:"filter-field date-filter-comp-new-report",attrs:{disabled:!!_vm.drilldownDatePickerObj,zone:_vm.$timezone,dateObj:_vm.dateFilter},on:{date:_vm.setDateFilter}})],1):_vm._e()],_vm.resultObj&&_vm.resultObj.report.userFilters&&null!==_vm.userFilters?_c("div",{staticClass:"mT5 modular-user-filter"},[_c("ModularUserFilterRender",{attrs:{widgetConfig:_vm.config,filterConfiguration:_vm.userFilters},on:{emitChangedValue:_vm.setUserFilter}})],1):_vm._e(),_vm.loading?_c("Spinner",{attrs:{show:_vm.loading,size:"80"}}):_vm.failed?_c("div",{staticStyle:{"margin-top":"30px",opacity:"0.7","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("div",[_vm._v(_vm._s(_vm.$t("home.dashboard.data_loading_failed")))])]):_vm.noData?_c("div",{staticClass:"report-no-data-cotainer-wrapper"},[_vm.drilldownParams?_c("drilldown-breadcrumb",{attrs:{drilldownParams:_vm.drilldownParams},on:{crumbClick:_vm.handleCrumbClick}}):_vm._e(),_c("div",{staticClass:"report-no-data-container"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.empty_data"))+" "),_vm.resultObj&&_vm.resultObj.dateRange?_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm._f("formatPeriod")(_vm.resultObj.dateRange.value,"MMM DD, YYYY")))]):_vm._e()])],1)],1):_c("div",{class:{scrollable:_vm.reportObj&&_vm.reportObj.options&&!1===_vm.reportObj.options.settings.chart}},[_vm._e(),!0===_vm.reportObj.options.settings.chart?_c("div",{staticClass:"fc-single-chart-pdf"},[_vm.isHeatMap||_vm.isTreeMap?_vm._e():_c("f-new-chart",{ref:"newChart",attrs:{showWidgetLegends:_vm.reportObj&&_vm.reportObj.options&&_vm.reportObj.options.widgetLegend.show,isWidget:_vm.config||_vm.isWidget,width:_vm.config&&_vm.config.width?_vm.config.width:null,resultObj:_vm.resultObj,config:_vm.config,height:_vm.config&&_vm.config.height?_vm.config.height:_vm.height,data:_vm.reportObj.data,options:_vm.reportObj.options,alarms:_vm.reportObj.alarms,dateRange:_vm.reportObj.dateRange,hidecharttypechanger:_vm.$mobile||_vm.isWidget,drilldownParams:_vm.drilldownParams,widgetBodyDimension:_vm.widgetBodyDimension,updateWidget:_vm.updateWidget,item:_vm.item},on:{drilldown:_vm.handleClickAction,crumbClick:_vm.handleCrumbClick}}),_vm.isHeatMap&&!_vm.isTreeMap?_c("FNewHeatMap",{ref:"heatmap",attrs:{config:_vm.config,width:_vm.widgetWidth,height:_vm.widgetHeight,resultObject:_vm.resultObj,reportObject:_vm.reportObj},on:{"update:width":function($event){_vm.widgetWidth=$event},"update:height":function($event){_vm.widgetHeight=$event}}}):_vm._e(),!_vm.isHeatMap&&_vm.isTreeMap?_c("FTreeMap",{ref:"treemap",attrs:{config:_vm.config,resultObject:_vm.resultObj,width:_vm.widgetWidth,height:_vm.widgetHeight,reportObject:_vm.reportObj},on:{"update:width":function($event){_vm.widgetWidth=$event},"update:height":function($event){_vm.widgetHeight=$event}}}):_vm._e()],1):_vm._e(),!_vm.reportObj||"undefined"!==typeof _vm.config&&!1!==_vm.reportObj.options.settings.chart||"undefined"!==typeof _vm.hideTabs&&_vm.hideTabs||_vm.showOnlyImage||_vm.excludeParamsObj.table||_vm.isWidget?_vm._e():_c("div",[_vm.config?_c("portal",{staticClass:"tabulardata-datepicker",attrs:{to:"widget-period"+_vm.config.widget.id,slim:""}},[_c("div",{staticClass:"widget-tabular-date"},[_c("div",{staticClass:"f14 fw6"},[_c("span",[_vm._v(_vm._s(""!==_vm.getDateRangeString.dateFieldLabel?_vm.getDateRangeString.dateFieldLabel.concat(":"):""))]),_vm._v(" "+_vm._s(_vm.getDateRangeString.label)+" ")])])]):_vm._e(),!1!==_vm.failed||!1!==_vm.loading||!1!==_vm.reportObj.options.settings.chart||_vm.isPrinting?_vm._e():_c("modular-new-tabular-report",{ref:"newTable",staticClass:"new-analytics-table",attrs:{reportObject:_vm.resultObj,reportConfig:_vm.reportObj}}),_vm.isPrinting?[_vm.criteriaObj?_c("criteria-table",{attrs:{criteriaObj:_vm.criteriaObj}}):_vm._e(),_c("div",{staticClass:"tabular-print-heading"},[_vm._v(" "+_vm._s(_vm.$t("home.dashboard.report_summary"))+" ")]),_c("modular-new-tabular-report",{ref:"newTable",staticClass:"new-analytics-table fc-report-pdf-tabular",attrs:{printReverse:!0,reportObject:_vm.resultObj,reportConfig:_vm.reportObj}}),_c("div",{staticClass:"underlying-data-cut-page"},[_c("div",{staticClass:"tabular-print-heading mL0 mT0 mB20"},[_vm._v(" "+_vm._s(_vm.resultObj.report.name)+" ")]),_c("underlying-workorders",{staticClass:"underlying-report-print",attrs:{module:_vm.computedModule,reportObject:_vm.reportObj,resultObject:_vm.resultObj}})],1)]:[!1===_vm.failed&&!1===_vm.loading&&!0===_vm.reportObj.options.settings.chart?_c("el-tabs",{staticClass:"report-tab",model:{value:_vm.activeReportTab,callback:function($$v){_vm.activeReportTab=$$v},expression:"activeReportTab"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("home.dashboard.tabular_report"),name:"tabular"}},[_c("modular-new-tabular-report",{ref:"newTable",staticClass:"new-analytics-table",attrs:{reportObject:_vm.resultObj,reportConfig:_vm.reportObj}})],1),_c("el-tab-pane",{attrs:{label:_vm.$t("home.dashboard.underlying")+" "+_vm.getModuleString,name:"underlying"}},[_c("underlying-workorders",{ref:"underlyingWorkOrders",attrs:{module:_vm.computedModule,reportObject:_vm.reportObj,resultObject:_vm.resultObj}})],1)],1):_vm._e()]],2)],1),_vm.showListView&&_vm.listView?_c("el-dialog",{attrs:{title:_vm.listView.title||"VIEW",visible:_vm.showListView,"append-to-body":!0,"custom-class":"f-popup-view fc-dialog-center-body-p0 fc-dialog-center-body-m0 fc-card-popup-list-view",top:"0%","before-close":_vm.closeListView},on:{"update:visible":function($event){_vm.showListView=$event}}},[_c("template",{slot:"title"},[_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.listView.title||"VIEW")+" ")])])]),_c("CustomTable",{staticClass:"list-view-widget custom-view-table",attrs:{moduleName:_vm.listView.moduleName,viewname:"all",viewMode:!0,filterJSON:_vm.listView.filters}})],2):_vm._e(),_vm.emailReportVisibility?_c("email-report",{attrs:{visibility:_vm.emailReportVisibility,report:_vm.report},on:{"update:visibility":function($event){_vm.emailReportVisibility=$event}}}):_vm._e()],2)},ModuleNewReportvue_type_template_id_2c98d5e1_scoped_true_staticRenderFns=[],components_FNewHeatMap=__webpack_require__(283938),components_FTreeMap=__webpack_require__(650976),ModularNewTabularReport=__webpack_require__(340737),date_picker_NewDateHelper=__webpack_require__(708056),UnderlyingWorkorders=__webpack_require__(722784),FChartSettings=__webpack_require__(746036),ModularAnalyticmixin=__webpack_require__(795e3),modularUserFilter=__webpack_require__(884900),ModularUserFilterRender=__webpack_require__(955220),CriteriaTable=__webpack_require__(797995),CustomViewTableComponent=__webpack_require__(214090),ReportDrilldownMixin=__webpack_require__(425157),Spinner=__webpack_require__(604947),ModuleNewReportvue_type_script_lang_js={props:{showHeadingOnlyForPdf:{type:Boolean,default:!1},updateWidget:{type:Function},widgetBodyDimension:{type:Object},loadImmediately:{type:Boolean,default:!0},hideTimelineFilterInsideWidget:{},id:{},item:{},config:{},tabular:{},hideTabs:{},dbFilterJson:{},dbTimelineFilter:{},isWidget:{},qs:{},ruleInfo:{},componentVisibleInViewPort:{type:Boolean,default:!0}},mixins:[NewDataFormatHelper/* default */.Z,ModularAnalyticmixin/* default */.Z,modularUserFilter/* default */.Z,NewReportSummaryHelper/* default */.Z,ReportDrilldownMixin/* default */.Z],components:{EmailReport:DashboardEmailReport/* default */.Z,NewDatePicker:NewDatePicker/* default */.Z,ModularNewTabularReport:ModularNewTabularReport/* default */.Z,UnderlyingWorkorders:UnderlyingWorkorders/* default */.Z,FNewChart:FNewChart,ModularUserFilterRender:ModularUserFilterRender/* default */.Z,FChartSettings:FChartSettings/* default */.Z,CriteriaTable:CriteriaTable/* default */.Z,FNewHeatMap:components_FNewHeatMap/* default */.Z,FTreeMap:components_FTreeMap/* default */.Z,CustomTable:CustomViewTableComponent/* default */.Z,DrilldownBreadcrumb:DrilldownBreadcrumb/* default */.Z,Spinner:Spinner/* default */.Z},data:function(){return{reportPdfData:[],metaField:[],displayObject:{},isFilterApplied:!1,pdfloading:!1,isReportLoadedOnes:!1,emailReportVisibility:!1,activeReportTab:"tabular",loading:!0,failed:!1,noData:!1,reportObj:null,resultObj:null,showReportOptions:!1,dateFilter:null,userFilterApplied:null,userFilters:null,moduleName:null,moduleId:null,moduleResourceField:null,showDatePicker:!1,firstLoad:!0,datePickerCompKey:1,
//new refresh impl, remove syncPicker soon
criteriaObj:null,height:null,widgetWidth:null,widgetHeight:null,showListView:!1,listView:null,
// chartDimensions:{
//   'width': 980,
//   'height': 800
// },
heatMapOptions:{Colors:{Default:["#5EC343","#90E214","#E9F600","#FDA504","#F47533"],"Palette 1":["#40AF22","#77C700","#FFA000","#F76E0C","#E54619"],"Palette 2":["#16AC99","#037E80","#004852","#D25A38","#E8721E"],"Palette 3":["#70B804","#2DA70C","#006A6D","#002E5B","#2E004D"],"Palette 4":["#00AAB3","#009BC2","#2872C7","#623CB7","#C84D99"],"Palette 5":["#3A688A","#27916F","#44AE7A","#A4B83B","#839A08"],"Palette 6":["#4BB82D","#2DA70C","#44AE7A","#18898B","#076163"],"Palette 7":["#AFE7FF","#87DBFF","#69D2FF","#64C2FF","#53B4F2"],"Palette 8":["#C5E3FF","#FFB5B4","#B0F7CF","#C1A4FF","#FDCEE3"],"Palette 9":["#32AEF9","#1F98E3","#177ABD","#1869A0","#135582"],"Palette 10":["#FFA000","#FF7E30","#E02564","#500083","#0B0310"],"Palette 11":["#1CACEE","#009BE2","#3674FF","#0150FF","#1700FF"],"Palette 12":["#E8E4FF","#D8D1FD","#BDABF6","#AA90FB","#987AF4"],"Palette 13":["#00BBA4","#009BC2","#4D60A6","#4E177D","#4A0052"],"Palette 14":["#FFF2B5","#F7E383","#FFA085","#F4797B","#DF6A6B"],"Palette 15":["#F7E383","#F4D814","#FFC05C","#FFAA82","#FF9665"],"Palette 16":["#DC687F","#24C4BC","#366CBA","#30B089","#0297CC"]},chosenColors:"Default",minValue:null,maxValue:null,showGrandParent:!0,showColorScale:!0,showWidgetLegends:!1,treemapTextMode:2},excludeParamsObj:{}}},created:function(){
//on report load , db date filter overrides report date filter . on further change of either ,the last change is applied
if(!(0,validation/* isEmpty */.xb)(this.dbTimelineFilter)){var pickerObj=date_picker_NewDateHelper/* default */.Z.getDatePickerObject(this.dbTimelineFilter.operatorId,this.dbTimelineFilter.dateValueString);this.dateFilter=pickerObj}if(this.qs){var qsParams=this.getQueryStringParams(this.qs);if(qsParams.startTime&&qsParams.endTime){var _pickerObj=date_picker_NewDateHelper/* default */.Z.getDatePickerObject(20,qsParams.startTime+","+qsParams.endTime);this.dateFilter=_pickerObj}}},mounted:function(){var _JSON$parse,_this$$route$query$ex=this.$route.query.excludeParams,excludeParams=void 0===_this$$route$query$ex?{}:_this$$route$query$ex;this.excludeParamsObj=(0,validation/* isEmpty */.xb)(excludeParams)?{}:null!==(_JSON$parse=JSON.parse(excludeParams))&&void 0!==_JSON$parse?_JSON$parse:{};var _ref=null!==this&&void 0!==this?this:{},loadImmediately=_ref.loadImmediately;1==loadImmediately&&
// Two cases,
// 1) Dashboard, load after asking the rules/execute API.
// 2) Reports, load the data immediately.
this.init(),this.isPrinting&&(this.height=300)},computed:{dataObj:function(){var _ref2=this||{},_ref2$displayObject=_ref2.displayObject,displayObject=void 0===_ref2$displayObject?{}:_ref2$displayObject;return displayObject},widget:function(){var _ref3=null!==this&&void 0!==this?this:{},_ref3$item=_ref3.item,item=void 0===_ref3$item?{}:_ref3$item,_item$widget=item.widget,widget=void 0===_item$widget?{}:_item$widget;return widget},report:function(){var report=this.resultObj.report;return null!==report&&void 0!==report?report:{}},allFilters:function(){return{dbFilterJson:this.dbFilterJson,dbTimelineFilter:this.dbTimelineFilter,ruleInfo:this.ruleInfo}},widgetDatePicker:function(){return!!(this.reportObj&&this.reportObj.options&&this.reportObj.options.settings&&!this.reportObj.options.settings.chart&&this.reportObj.options.settings.table)},isHeatMap:function(){return!(!this.reportObj||!this.reportObj.options||"heatmap"!==this.reportObj.options.type)&&(this.widgetWidth=this.$el.clientWidth,this.widgetHeight=this.$mobile?this.config.height:this.$el.clientHeight-30,!0)},isTreeMap:function(){return!(!this.reportObj||!this.reportObj.report||7!==this.reportObj.report.analyticsType)&&(this.widgetWidth=this.$el.clientWidth,this.widgetHeight=this.$mobile?this.config.height:this.$el.clientHeight-30,!0)},filters:function(){return this.$route.query.filters?this.$route.query.filters:null},computedModule:function(){var module={};return module["moduleName"]=this.moduleName,module["moduleId"]=this.moduleId,this.moduleResourceField&&(module["resourceField"]=this.moduleResourceField),module},isPrinting:function(){return this.showHeadingOnlyForPdf?null:this.$route.query.print||this.$route.query.daterange},isGroupByCrossModule:function(){if(this.resultObj.report.dataPoints[0].hasOwnProperty("groupByFields")&&null!==this.resultObj.report.dataPoints[0].groupByFields){var groupField=this.resultObj.report.dataPoints[0].groupByFields[0];return!(groupField.field.module.name===this.resultObj.report.module.name||this.resultObj.report.module.extendModule&&groupField.field.module.name===this.resultObj.report.module.extendModule.name)}return!1},isXFieldCrossModule:function(){var xAxis=this.resultObj.report.dataPoints[0].xAxis;return!(xAxis.field.module.name===this.resultObj.report.module.name||this.resultObj.report.module.extendModule&&xAxis.field.module.name===this.resultObj.report.module.extendModule.name)},reportId:function(){var _ref4=null!==this&&void 0!==this?this:{},widget=_ref4.widget;if((0,validation/* isEmpty */.xb)(widget))return id||null;var newReportId=widget.dataOptions.newReportId;return newReportId},appliedDateRange:function(){return this.$route.query.daterange?JSON.parse(this.$route.query.daterange):""},getModuleString:function(){var _this=this;if(-1!==this.resultObj.report.moduleType&&this.resultObj.moduleTypes&&0!==this.resultObj.moduleTypes.length){var moduleName=this.resultObj.moduleTypes.filter((function(type){return type.type===_this.resultObj.report.moduleType}))[0].displayName;return moduleName}return this.resultObj.report.module&&this.resultObj.report.module.custom?this.resultObj.report.module.displayName:this.resultObj.report.module.name+"s"},appliedChartType:function(){
// Temp...will be changed for pdf once temp report support is implemented
return this.$route.query.charttype},getDateRangeString:function(){var temp={dateFieldLabel:"",label:""};if(this.resultObj){var dateField=this.resultObj.report.dataPoints[0].dateField,xField=this.resultObj.report.dataPoints[0].xAxis,dateFieldString="";if(xField&&(xField&&dateField&&xField.fieldId!==dateField.fieldId&&(temp["dateFieldLabel"]=dateField.label),dateField)){var a=moment_timezone_default()(this.resultObj.report.dateRange.startTime);return dateFieldString=a.format("DD/MM/YYYY")+" to ",a=moment_timezone_default()(this.resultObj.report.dateRange.endTime),dateFieldString=dateFieldString+a.format("DD/MM/YYYY")+" ",temp["label"]=dateFieldString,temp}return temp}return temp},getFacilioLogoURL:function(){var brandConfig=this.brandConfig,logo=this.$getProperty(brandConfig,"logo",null);return logo},showLogo:function(){var brandConfig=this.brandConfig,showLogoInPDF=this.$getProperty(brandConfig,"showLogoInPDF",!0);return showLogoInPDF},brandConfig:function(){return window.brandConfig}},watch:{userFilters:function(newValue){var filters=this.$route.query.filters;(0,validation/* isEmpty */.xb)(newValue)||!this.showHeadingOnlyForPdf||(0,validation/* isEmpty */.xb)(filters)||this.pdfUserFilter(JSON.parse(filters))},
//when widget at bottom of dashboard is scrolled up , this prop changes from false to true,
componentVisibleInViewPort:function(_componentVisibleInViewPort){_componentVisibleInViewPort&&(this.isReportLoadedOnes||this.loadImmediately)&&this.init()},allFilters:function(newVal,oldVal){var loading=this.loading;if(0==this.isReportLoadedOnes&&(this.isReportLoadedOnes=!0),!(0,lodash.isEqual)(newVal,oldVal)||loading){var timelineFilter=newVal.dbTimelineFilter,startTime=timelineFilter.startTime,endTime=timelineFilter.endTime,dateOperator=timelineFilter.dateOperator;(0,validation/* isEmpty */.xb)(startTime)||(0,validation/* isEmpty */.xb)(endTime)||(0,validation/* isEmpty */.xb)(dateOperator)||(this.dateFilter=date_picker_NewDateHelper/* default */.Z.getDatePickerObject(dateOperator,[startTime,endTime]),this.datePickerCompKey++),this.init()}},reportId:{handler:function(newData,oldData){this.dateFilter=null,this.showDatePicker=!1,this.userFilters=null,this.resetDrillDown(),this.init(!1)}},filters:{handler:function(newData,oldData){newData!==oldData&&this.init(!1)},deep:!0},config:{handler:function(newData,oldData){newData&&oldData?newData.id!==oldData.id?this.init(!1):((this.isHeatMap||this.isTreeMap)&&(this.widgetWidth=this.$el.clientWidth,this.widgetHeight=this.$mobile?this.config.height:this.$el.clientHeight-30,this.$refs["heatmap"]&&this.$refs["heatmap"].resize()),this.$emit("reportLoaded",this.reportObj,this.resultObj)):this.init(!1)},deep:!0}},methods:{getFields:function(fieldId){var fieldName=(this.metaField||[]).reduce((function(fieldNameList,field){return fieldId===field.id?[].concat((0,toConsumableArray/* default */.Z)(fieldNameList),[field.name]):fieldNameList}),[]);return fieldName[0]},pdfUserFilter:function(filter){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var validFilterObj,_loop,i,_this2$userFilters;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this2.isFilterApplied=!0,validFilterObj=(Object.keys(filter)||[]).reduce((function(filterObj,userFilter){var temp={},selectedVal=filter[userFilter].value;return(0,validation/* isEmpty */.xb)(selectedVal)||(temp[userFilter]=selectedVal),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filterObj),temp)}),{}),_loop=(0,regeneratorRuntime/* default */.Z)().mark((function _loop(){var currentEle,fieldName,selectedValues,displayVal,filters,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(currentEle=_this2.userFilters[i],fieldName=(0,validation/* isEmpty */.xb)(currentEle.criteria)?_this2.getFields(currentEle.fieldId):_this2.$getProperty(currentEle,"criteria.conditions.1.fieldName")||"",selectedValues=validFilterObj[fieldName],displayVal=[],(0,validation/* isEmpty */.xb)(selectedValues)){_context.next=15;break}if(displayVal=currentEle.allValues.filter((function(value){return!!selectedValues.includes(Object.keys(value)[0])})).map((function(value){return value[Object.keys(value)[0]]})),!(0,validation/* isEmpty */.xb)(displayVal)){_context.next=14;break}return filters=JSON.stringify((0,defineProperty/* default */.Z)({},fieldName,filter[fieldName])),_context.next=10,api/* API */.bl.get("/v3/picklist/".concat(currentEle.lookupModuleName),{filters:filters});case 10:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(displayVal=data.pickList.map((function(ele){return ele.label})));case 14:(0,validation/* isEmpty */.xb)(displayVal)||(_this2.displayObject=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this2.displayObject),{},(0,defineProperty/* default */.Z)({},currentEle.name,displayVal)));case 15:case"end":return _context.stop()}}),_loop)})),i=0;case 4:if(!(i<(null===(_this2$userFilters=_this2.userFilters)||void 0===_this2$userFilters?void 0:_this2$userFilters.length))){_context2.next=9;break}return _context2.delegateYield(_loop(),"t0",6);case 6:i++,_context2.next=4;break;case 9:case"end":return _context2.stop()}}),_callee)})))()},getQueryStringParams:function(qs){var params={};if(qs){var _step,qsList=qs.split("&"),_iterator=(0,createForOfIteratorHelper/* default */.Z)(qsList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var qsEntry=_step.value,key=qsEntry.split("=")[0],value=qsEntry.split("=")[1];params[key]=value}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return params},setUserFilter:function(val){this.userFilters=val,this.$forceUpdate(),this.initchart()},handleClickAction:function(val){var _this3=this,_this$resultObj$repor=this.resultObj.report.reportSettings,clickActionEnum=_this$resultObj$repor.clickActionEnum,isShowListAtDrillEnd=_this$resultObj$repor.isShowListAtDrillEnd;if("DRILLDOWN"==clickActionEnum)this.handleReportDrillDown(val,isShowListAtDrillEnd);else if("LIST"==clickActionEnum)this.drilltoList(val);else if("DASHBOARD_ACTION"==clickActionEnum){var groupBy,groupByFieldName,groupByModuleName,dataTypeEnum,_ref5=null!==val&&void 0!==val?val:{},_id=_ref5.id,dimensionIndex=(_ref5.name,_ref5.value,_ref5.index),reportObj=cloneDeep_default()(this.reportObj),resultObj=cloneDeep_default()(this.resultObj),_reportObj$report$dat=(0,slicedToArray/* default */.Z)(reportObj.report.dataPoints,1),dataPoint=_reportObj$report$dat[0],dimensionArray=resultObj.reportData.data,_ref6=null!==this&&void 0!==this?this:{},widgetId=_ref6.item.id,linkName=_ref6.widget.link_name,_ref7=null!==dataPoint&&void 0!==dataPoint?dataPoint:{},_ref7$xAxis=_ref7.xAxis,field=_ref7$xAxis.field,fieldName=_ref7$xAxis.fieldName,moduleName=_ref7$xAxis.moduleName,criteria=_ref7.allCriteria,groupByFields=_ref7.groupByFields;if(!(0,validation/* isEmpty */.xb)(field)&&(dataTypeEnum=field.dataTypeEnum,"LOOKUP"==dataTypeEnum||"LOOKUP_SIMPLE"==dataTypeEnum)){var lookupField=field.name,lookupModule=field.lookupModule.name;moduleName=lookupModule,fieldName=lookupField}if(!(0,validation/* isEmpty */.xb)(groupByFields)){var _field$lookupModule,_groupByFields=(0,slicedToArray/* default */.Z)(groupByFields,1),_groupByFields$=_groupByFields[0],_dataTypeEnum=_groupByFields$.dataTypeEnum,lookupMap=_groupByFields$.lookupMap,_field=_groupByFields$.field;groupByFieldName=null===_field||void 0===_field?void 0:_field.name,groupByModuleName=null===_field||void 0===_field||null===(_field$lookupModule=_field.lookupModule)||void 0===_field$lookupModule?void 0:_field$lookupModule.name,"LOOKUP"!=_dataTypeEnum&&"LOOKUP_SIMPLE"!=_dataTypeEnum||(groupBy=Object.keys(lookupMap).find((function(k){return lookupMap[k]==_id})))}var getDimension=function(){var dataArray=val.dataArray;if("DATE_TIME"==dataTypeEnum){var x=moment_timezone_default()(dataArray[dimensionIndex],"DD-MM-YYYY").tz(_this3.$timezone).valueOf();return null!==x&&void 0!==x?x:""}var _x=dimensionArray[dimensionIndex].X;return _x},action={widgetLinkName:linkName,criteria:criteria,dimension:getDimension(),fieldName:fieldName,moduleName:moduleName,id:widgetId,groupBy:groupBy,groupByModuleName:groupByModuleName,groupByFieldName:groupByFieldName};this.$emit("action",action)}},handleReportDrillDown:function(val,isShowListAtDrillEnd){var reloadReport=this.drillReport(val,isShowListAtDrillEnd,this.resultObj,this.reportObj);reloadReport&&this.init(),reloadReport||this.drilltoList(val,!0)},drilltoList:function(val,isShowListAtEnd){if(this.isXFieldCrossModule||this.isGroupByCrossModule);else{var appNameFromUrl=window.location.pathname.slice(1).split("/")[0];if("operations"===appNameFromUrl){var filters=this.handleBasicDrillDown(val,this.resultObj,this.reportObj,this.filters,!0);return this.listView={},this.listView["filters"]=filters,this.listView["moduleName"]=this.moduleName,this.listView["title"]="",void(this.showListView=!0)}if(isShowListAtEnd){var drilldown_filter={};for(var filter_val in this.drilldownactionslist){var drill_down_obj=this.drilldownactionslist[filter_val],key_name=Object.keys(drill_down_obj)[0];drilldown_filter[key_name]=(0,objectSpread2/* default */.Z)({},drill_down_obj[key_name])}this.handleBasicDrillDown(val,this.resultObj,this.reportObj,JSON.stringify(drilldown_filter))}else this.handleBasicDrillDown(val,this.resultObj,this.reportObj,this.filters)}},handleCrumbClick:function(crumbIndex){this.drillFromCrumb(crumbIndex),this.init()},closeListView:function(){this.listView=null,this.showListView=!1},setDateFilter:function(dateFilter){this.dateFilter=dateFilter,this.$emit("timelineFilterChange",dateFilter),this.userFilterApplied?this.applyFilter(this.userFilterApplied):this.initchart()},init:function(){
//when dashboard in lazy mode and widget ain't visible dont load
this.componentVisibleInViewPort&&this.initchart()},resize:function(){this.$refs["newChart"]&&this.$refs["newChart"].resize(),this.$refs["multiChart"]&&this.$refs["multiChart"].resize(),this.$refs["newTable"]&&this.$refs["newTable"].resize()},initchart:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,_ref8,ruleInfo;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.printQuery&&_this4.printQuery.underlyingData&&!0===_this4.printQuery.underlyingData&&(_this4.activeReportTab="underlying"),_this4.loading=!0,_this4.failed=!1,_this4.noData=!1,_this4.$refs["underlyingWorkOrders"]&&_this4.$refs["underlyingWorkOrders"].rerender(),params={reportId:_this4.reportId},_this4.firstLoad&&_this4.appliedDateRange.startTime&&_this4.appliedDateRange.endTime&&(_this4.firstLoad=!1,_this4.dateFilter=date_picker_NewDateHelper/* default */.Z.getDatePickerObject(_this4.appliedDateRange.operatorId,_this4.appliedDateRange.startTime+","+_this4.appliedDateRange.endTime)),(0,validation/* isEmpty */.xb)(_this4.dateFilter)||(params.startTime=_this4.dateFilter.value[0],params.endTime=_this4.dateFilter.value[1]),_this4.filters&&(params["filters"]=_this4.filters),(0,validation/* isEmpty */.xb)(_this4.dbFilterJson)||(params["filters"]=JSON.stringify(_this4.dbFilterJson)),_this4.userFilters&&(params.userFilters=_this4.userFilters),_ref8=null!==_this4&&void 0!==_this4?_this4:{},ruleInfo=_ref8.ruleInfo,(0,validation/* isEmpty */.xb)(ruleInfo)||(params["ruleInfo"]=ruleInfo),_this4.drilldownParams&&(params.drilldownParams=_this4.drilldownParams),_context3.next=16,api/* API */.bl.put("/v3/report/execute",params).then((function(_ref9){var data=_ref9.data,error=_ref9.error;if(error)_this4.loading=!1,_this4.failed=!0;else{data.criteriaData&&(_this4.criteriaObj=data.criteriaData);var result=data;if(_this4.reportPdfData=data,_this4.pdfloading=!0,_this4.config&&_this4.config.dashboardObj&&1965===_this4.config.dashboardObj.id&&(result.convertTo="hour"),result=_this4.specialHandler(result),_this4.moduleName=result.module.name,_this4.moduleId=result.module.moduleId,result.report.userFilters&&null===_this4.userFilters){var conf={},userFilters=null;userFilters=result.report.userFilters,conf["userFilters"]=userFilters,_this4.loadAllValues(conf)}var self=_this4;if(0===result.reportData.data.length){if(self.noData=!0,self.loading=!1,-1!==result.report.dateOperator){if((0,validation/* isEmpty */.xb)(self.dateFilter)){var getTimelineFilter=function(){if((0,validation/* isEmpty */.xb)(self.dbTimelineFilter))
// Using the date attached to the report.
return date_picker_NewDateHelper/* default */.Z.getDatePickerObject(result.report.dateOperator,result.report.dateValue);
// Using the date of global timeline filter.
var dateOperator=self.dbTimelineFilter.dateOperator;return date_picker_NewDateHelper/* default */.Z.getDatePickerObject(dateOperator)},datePickerObject=getTimelineFilter();result["dateRange"]=datePickerObject,self.dateFilter=datePickerObject}else result["dateRange"]=self.dateFilter,_this4.drilldownDatePickerObj&&(result["dateRange"]=self.drilldownDatePickerObj);self.showDatePicker=!0}result.xAggr=result.report.xAggr,self.resultObj=result,
// TO DO . FWidget should not depend on report obj emitted by this component
self.$emit("reportLoaded",result.report,result)}else{if(-1!==result.report.dateOperator){if(null===_this4.dateFilter){var _datePickerObject=date_picker_NewDateHelper/* default */.Z.getDatePickerObject(result.report.dateOperator,result.report.dateValue);result["dateRange"]=_datePickerObject,self.dateFilter=_datePickerObject,self.showDatePicker=!0}else result["dateRange"]=self.dateFilter,_this4.drilldownDatePickerObj&&(result["dateRange"]=_this4.drilldownDatePickerObj);_this4.showDatePicker=!0}else result["dateRange"]=self.dateFilter;result.xAggr=result.report.xAggr,self.reportObj=_this4.prepareReport(result),self.reportObj["report"]=result.report,
//self.resultObj is old result state here , from previous report load
//check why this is needed in execute report
_this4.drilldownParams||
//do not persist any options from old resultObj or from chartState while drilling down
_this4.handleAxisChartState(self.reportObj,self.resultObj,result),self.resultObj=result,//setting resultobj to current response result state
self.appliedChartType&&(self.reportObj.options.data.type=_this4.appliedChartType),self.isPrinting&&(self.reportObj.options.size||(self.reportObj.options.size={}),self.reportObj.options.size.height=300),self.reportObj&&self.reportObj.report&&7===self.reportObj.report.analyticsType&&(self.reportObj.options.heatMapOptions=self.heatMapOptions),self.$emit("reportLoaded",self.reportObj,self.resultObj),self.loading=!1}}}));case 16:case"end":return _context3.stop()}}),_callee2)})))()}}},reports_ModuleNewReportvue_type_script_lang_js=ModuleNewReportvue_type_script_lang_js,ModuleNewReport_component=(0,componentNormalizer/* default */.Z)(reports_ModuleNewReportvue_type_script_lang_js,ModuleNewReportvue_type_template_id_2c98d5e1_scoped_true_render,ModuleNewReportvue_type_template_id_2c98d5e1_scoped_true_staticRenderFns,!1,null,"2c98d5e1",null)
/* harmony default export */,ModuleNewReport=ModuleNewReport_component.exports,ReportHelper=__webpack_require__(507815),ModuleReportWidgetvue_type_script_lang_js={components:{ModuleNewReport:ModuleNewReport,DashboardFilterWidgetConfigDialog:DashboardFilterWidgetConfigDialog/* default */.Z},mixins:[BaseWidgetMixin/* default */.Z,ReportHelper/* default */.Z],props:{updateWidget:{type:Function},widgetBodyDimension:{type:Object,required:!0},loadImmediately:{type:Boolean,required:!0,default:!1},id:{type:String,required:!0},item:{type:Object,required:!0},hideTimelineFilterInsideWidget:{type:Boolean,required:!0,default:!1},componentVisibleInViewPort:{type:Boolean,default:!0}},computed:{widget:function(){var _ref=null!==this&&void 0!==this?this:{},_ref$item=_ref.item,item=void 0===_ref$item?{}:_ref$item,_item$widget=item.widget,widget=void 0===_item$widget?{}:_item$widget;return widget},newReport:function(){var _ref2=null!==this&&void 0!==this?this:{},newReport=_ref2.widget.dataOptions.newReport;return newReport},reportId:function(){var _ref3=null!==this&&void 0!==this?this:{},reportId=_ref3.widget.dataOptions.newReportId;return reportId},config:function(){var widget=this.item.widget;return{widget:widget}},widgetConfig:function(){var _this=this,_ref4=null!==this&&void 0!==this?this:{},id=_ref4.id,getGoToReport=function(){return _this.isPortalApp?[]:[{label:"Go to Report",action:_this.goToReport,icon:"el-icon-top-right"}]},getEditReport=function(){return _this.isPortalApp?[]:[{label:"Edit Report",action:_this.editReport,icon:"el-icon-edit"},{isLineBreak:!0}]};return{id:id,minW:25,maxW:96,minH:10,maxH:50,showHeader:!0,showExpand:!0,noResize:!1,showDropDown:!0,editMenu:[],borderAroundWidget:!0,viewMenu:[].concat((0,toConsumableArray/* default */.Z)(getGoToReport()),(0,toConsumableArray/* default */.Z)(getEditReport()),[{label:"Export as CSV",action:function(){return _this.exportReport("CSV")},icon:"el-icon-download"},{label:"Export as Excel",action:function(){return _this.exportReport("Excel")},icon:"el-icon-download"},{label:"Export as PDF",action:function(){return _this.exportReport("PDF")},icon:"el-icon-download"},{label:"Export as Image",action:function(){return _this.exportReport("Image")},icon:"el-icon-download"},{isLineBreak:!0},{label:"Email this Report",action:function(){_this.$refs["ModuleNewReport"].emailReportVisibility=!0},icon:"el-icon-message"}]),configFilter:[{label:"Configure filter",action:function(){return _this.configureFilter()},icon:"el-icon-setting"}]}}},created:function(){this.initWidget(this.widgetConfig)},data:function(){return{showDashboardFilterWidgetConfigDialog:!1,dbFilterJson:{},ruleInfo:{},dbTimelineFilter:{},exportDownloadUrl:null}},methods:{saveWidgetFilterSettings:function(widget){var _this2=this;this.showDashboardFilterWidgetConfigDialog=!1;var data={widgets:[{id:widget.id,widgetSettingsJsonString:JSON.stringify(widget.widgetSettings)}]};api/* API */.bl.post("v2/dashboardFilter/updateWidgetSettings",data).then((function(resp){var error=resp.error;if(error)_this2.$message("error updating widget-filter settings");else{var _widget$widgetSetting,_widget$widgetSetting2,clonedItem=(0,lodash.cloneDeep)(_this2.item);clonedItem.widget.widgetSettings.excludeDbFilters=null!==(_widget$widgetSetting=null===widget||void 0===widget||null===(_widget$widgetSetting2=widget.widgetSettings)||void 0===_widget$widgetSetting2?void 0:_widget$widgetSetting2.excludeDbFilters)&&void 0!==_widget$widgetSetting&&_widget$widgetSetting,_this2.updateWidget(clonedItem)}}))},configureFilter:function(){this.showDashboardFilterWidgetConfigDialog=!0},getCurrentModule:function(){
// TODO: Don't know why all this is written, please help.
var routeObj=this.$route,module=null,rootPath=null;if(routeObj.meta.module)module=routeObj.meta.module,rootPath=routeObj.path;else if(routeObj.matched){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(routeObj.matched);try{for(_iterator.s();!(_step=_iterator.n()).done;){var matchedRoute=_step.value;if(matchedRoute.meta.module){module=matchedRoute.meta.module,rootPath=matchedRoute.path;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return{module:module,rootPath:rootPath}},editReport:function(){
// TODO: Don't know why all this is written, please help.
var reportId=this.widget.dataOptions.newReportId,_this$getReportObj=this.getReportObj(),report=_this$getReportObj.report,moduleName=report.module.name,isCustomModule=report.module.custom,pageTypeModule=report.module.name;if(ReportHelper/* default */.Z.isHiddenModule(pageTypeModule)&&(pageTypeModule=ReportHelper/* default */.Z.findModuleFromSubmodule(pageTypeModule)),(0,router/* isWebTabsEnabled */.tj)()){pageTypeModule="alarm"==pageTypeModule?"newreadingalarm":pageTypeModule;var _ref5=(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_FORM,{moduleName:pageTypeModule})||{},name=_ref5.name,query={reportId:reportId,module:moduleName,fromDashboard:!0};name&&this.$router.push({name:name,query:query})}else if(this.$helpers.isEtisalat())this.$router.push({path:"/app/em/modulereports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});else switch(moduleName){case"workorder":case"workorderLabour":case"workorderCost":case"workorderItem":case"workorderTools":case"workorderService":case"workorderTimeLog":case"workorderHazard":case"plannedmaintenance":this.$router.push({path:"/app/wo/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});break;case"purchaseorder":case"poterms":case"purchaseorderlineitems":case"purchaserequest":case"purchaserequestlineitems":this.$router.push({path:"/app/purchase/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});break;case"inspectionTemplate":case"inspectionResponse":this.$router.push({path:"/app/inspection/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});break;case"budget":case"budgetamount":this.$router.push({path:"/app/ac/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});break;case"item":case"tool":case"itemTransactions":case"tootTransactions":case"itemTypes":case"toolTypes":case"storeRoom":case"shipment":case"transferrequest":case"transferrequestpurchaseditems":case"transferrequestshipmentreceivables":this.$router.push({path:"/app/inventory/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});break;case"alarm":case"newreadingalarm":case"readingalarmoccurrence":case"bmsalarm":case"mlAnomalyAlarm":case"anomalyalarmoccurrence":case"violationalarm":case"violationalarmoccurrence":case"operationalarm":case"operationalarmoccurrence":case"sensoralarm":case"sensoralarmoccurrence":case"sensorrollupalarm":case"sensorrollupalarmoccurrence":case"basealarm":case"alarmoccurrence":case"readingevent":case"bmsevent":case"mlAnomalyEvent":case"violationevent":case"operationevent":case"sensorevent":case"baseevent":this.$router.push({path:"/app/fa/reports/new",query:{reportId:reportId,fromDashboard:!0,module:this.$helpers.isLicenseEnabled("NEW_ALARMS")?moduleName:"alarm"}});break;case"serviceRequest":this.$router.push({path:"/app/sr/reports/new",query:{reportId:reportId,fromDashboard:!0,module:this.$helpers.isLicenseEnabled("ServiceRequest")?moduleName:"serviceRequest"}});break;case"asset":this.$router.push({path:"/app/at/reports/new",query:{reportId:reportId,fromDashboard:!0,module:"asset"}});break;case"visitor":case"visitorlog":case"invitevisitor":case"watchlist":this.$router.push({path:"/app/vi/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});break;case"tenant":case"tenantunit":case"tenantcontact":case"quote":case"contact":case"tenantspaces":case"quotelineitems":case"quoteterms":case"people":case"newsandinformationsharing":case"neighbourhoodsharing":case"dealsandofferssharing":case"contactdirectorysharing":case"admindocumentsharing":case"audienceSharing":this.$router.push({path:"/app/tm/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});break;case"contracts":case"purchasecontracts":case"purchasecontractlineitems":case"labourcontracts":case"labourcontractlineitems":case"warrantycontracts":case"warrantycontractlineitems":case"rentalleasecontracts":case"rentalleasecontractlineitems":this.$router.push({path:"/app/ct/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});break;default:isCustomModule?this.$router.push({path:"/app/ca/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}}):this.$router.push({path:"/app/at/reports/new",query:{reportId:reportId,fromDashboard:!0,module:moduleName}});break}},goToReport:function(exporturl){var _widget$dataOptions,widget=this.widget,id=this.widget.dataOptions.reportId,_this$getReportObj2=this.getReportObj(),report=_this$getReportObj2.report;
// TODO: This method requires a complete rewrite, I don't
// what it does... Please help.
if(5!==(null===widget||void 0===widget||null===(_widget$dataOptions=widget.dataOptions)||void 0===_widget$dataOptions?void 0:_widget$dataOptions.reportType)){var currentModule=this.getCurrentModule();if("view"===widget.type){var modulePath="";"workorder"===widget.dataOptions.moduleName?modulePath="/app/wo/orders/"+widget.dataOptions.viewName:"alarm"!==widget.dataOptions.moduleName&&"alarmoccurrence"!==widget.dataOptions.moduleName&&"readingalarmoccurrence"!==widget.dataOptions.moduleName&&"mlalarmoccurrence"!==widget.dataOptions.moduleName&&"violationalarmoccurrence"!==widget.dataOptions.moduleName&&"baseevent"!==widget.dataOptions.moduleName&&"newreadingalarm"!==widget.dataOptions.moduleName||(modulePath="/app/fa/faults/"+widget.dataOptions.viewName),this.$router.push(modulePath)}else{var moduleName=null,_modulePath=null;if(moduleName=(0,validation/* isEmpty */.xb)(report)?currentModule.module:report.module.name,ReportHelper/* default */.Z.isHiddenModule(moduleName)&&(moduleName=ReportHelper/* default */.Z.findModuleFromSubmodule(moduleName)),(0,router/* isWebTabsEnabled */.tj)()&&widget.dataOptions.newReportId){var routeObj;moduleName="alarm"==moduleName?"newreadingalarm":moduleName,routeObj=moduleName?"energydata"===moduleName?(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_VIEW,{moduleName:moduleName}):(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_VIEW,{moduleName:moduleName}):(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_VIEW);var _ref6=routeObj||{},name=_ref6.name,params={reportid:widget.dataOptions.newReportId};return"exportpdf"===exporturl?this.$router.resolve({name:name}).href+"/"+widget.dataOptions.newReportId:void((0,validation/* isEmpty */.xb)(name)?this.$dialog.confirm({title:this.$t("common._common.tab_not_configured"),message:this.$t("common._common.tab_not_configured_message"),rbLabel:this.$t("common._common.ok"),lbHide:!0}):this.$router.push({name:name,params:params}))}if(_modulePath=["workorder","workorderLabour","workorderCost","workorderItem","workorderTools","workorderService","workorderTimeLog","workorderHazard","plannedmaintenance"].includes(moduleName)?"/app/wo":["alarm","newreadingalarm","readingalarmoccurrence","bmsalarm","mlAnomalyAlarm","anomalyalarmoccurrence","violationalarm","violationalarmoccurrence","operationalarm","operationalarmoccurrence","sensoralarm","sensoralarmoccurrence","sensorrollupalarm","sensorrollupalarmoccurrence","basealarm","alarmoccurrence","readingevent","bmsevent","mlAnomalyEvent","violationevent","operationevent","sensorevent","baseevent"].includes(moduleName)?"/app/fa":"energydata"===moduleName?"/app/em":["inspectionTemplate","inspectionResponse"].includes(moduleName)?"/app/inspection":["asset","assetbreakdown","vendors"].includes(moduleName)?"/app/at":["tenant","tenantcontact","tenantunit","quote","contact","tenantspaces","quotelineitems","quoteterms","people","newsandinformationsharing","neighbourhoodsharing","dealsandofferssharing","contactdirectorysharing","admindocumentsharing","audienceSharing"].includes(moduleName)?"/app/tm":["contracts","purchasecontracts","labourcontracts","warrantycontracts","rentalleasecontracts","purchasecontractlineitems","labourcontractlineitems","warrantycontractlineitems","rentalleasecontractlineitems"].includes(moduleName)?"/app/ct":["visitorlog","visitor","invitevisitor","watchlist"].includes(moduleName)?"/app/vi":["serviceRequest"].includes(moduleName)?"/app/sr":["purchaseorder","purchaseorderlineitems","purchaserequest","poterms","purchaserequestlineitems"].includes(moduleName)?"/app/purchase":["budget","budgetamount"].includes(moduleName)?"/app/ac":["item","tool","itemTransactions","tootTransactions","itemTypes","toolTypes","storeRoom","shipment","transferrequest","transferrequestshipmentreceivables","transferrequestpurchaseditems"].includes(moduleName)?"/app/inventory":void 0!==report&&report.module.custom||currentModule.custom?"/app/ca":"/app/at",this.$helpers.isEtisalat()){var url="/app/em/modulereports/newview/"+widget.dataOptions.newReportId;return void this.$router.push(url)}if(widget.dataOptions.newReportId){var _url=_modulePath+"/reports/newview/"+widget.dataOptions.newReportId;this.$router.push(_url)}else if(id){var _url2=_modulePath+"/reports/view/"+id;if(this.$route.params&&"buildingdashboard"===this.$route.params.dashboardlink&&this.$route.params.buildingid){var data={buildingid:parseInt(this.$route.params.buildingid)};this.$router.push({path:_url2,query:{reportSpaceFilterContext:JSON.stringify(data)}})}else if(this.$route.params&&("chillerplant"===this.$route.params.dashboardlink||"chillers"===this.$route.params.dashboardlink)&&this.$route.params.buildingid){var _data={chillerId:parseInt(this.$route.params.buildingid)};this.$router.push({path:_url2,query:{reportSpaceFilterContext:JSON.stringify(_data)}})}else this.$router.push(_url2)}}}else{var _widget$dataOptions2;this.$router.push("/app/em/pivot/view/".concat(null===widget||void 0===widget||null===(_widget$dataOptions2=widget.dataOptions)||void 0===_widget$dataOptions2?void 0:_widget$dataOptions2.newReportId))}},exportReport:function(fileType){var _this$getReportObj3,_this3=this,self=this,fileTypeCode=Number(Object.keys(this.$constants.FILE_FORMAT).find((function(key){return fileType==_this3.$constants.FILE_FORMAT[key]}))),_ref7=null!==(_this$getReportObj3=this.getReportObj())&&void 0!==_this$getReportObj3?_this$getReportObj3:{},params=_ref7.params,timelineFilter=_ref7.timelineFilter,userFilter=_ref7.userFilter,reportId=_ref7.reportId;if(this.$message({message:"Exporting as ".concat(fileType),showClose:!0,duration:0}),"Image"===fileType&&(params["exportParams"]={showHeader:!0,showPrintDetails:!0}),params["fileFormat"]=fileTypeCode,params["reportId"]=reportId,params["url"]=this.goToReport("exportpdf"),!(0,validation/* isEmpty */.xb)(timelineFilter)){var _ref8=null!==timelineFilter&&void 0!==timelineFilter?timelineFilter:{},_ref8$value=(0,slicedToArray/* default */.Z)(_ref8.value,2),startTime=_ref8$value[0],endTime=_ref8$value[1];params["startTime"]=startTime,params["endTime"]=endTime}(0,validation/* isEmpty */.xb)(userFilter)||(params["filters"]=JSON.stringify(userFilter)),api/* API */.bl.post("/v2/report/exportModuleReport",params).then((function(res){element_ui_common.Message.closeAll();var fileUrl=res.data.fileUrl;self.exportDownloadUrl=fileUrl}))},expandReport:function(){var _this$getReportObj4,params={},_ref9=null!==(_this$getReportObj4=this.getReportObj())&&void 0!==_this$getReportObj4?_this$getReportObj4:{},timelineFilter=_ref9.timelineFilter,newReport=_ref9.report,_ref10=null!==this&&void 0!==this?this:{},userFilter=_ref10.dbFilterJson,reportId=_ref10.reportId;if(params["type"]="report",params["dbFilterJson"]=userFilter,params["url"]="",params["alt"]="",params["dashboardId"]="",params["reportId"]=reportId,params["newReport"]=newReport,params["target"]="",(0,validation/* isEmpty */.xb)(timelineFilter))params["dbTimelineFilter"]="";else{var _ref11=null!==timelineFilter&&void 0!==timelineFilter?timelineFilter:{},startTime=_ref11.startTime,endTime=_ref11.endTime,operatorId=_ref11.operatorId,label=_ref11.label,dateField=_ref11.dateField;params["dbTimelineFilter"]={startTime:startTime,endTime:endTime,operatorId:operatorId,dateLabel:label,dateValueString:"".concat(startTime,",").concat(endTime),dateField:dateField}}this.$popupView.openPopup(params)},getReportObj:function(){var _this$$refs$ModuleNew,_ref12=null!==(_this$$refs$ModuleNew=this.$refs["ModuleNewReport"])&&void 0!==_this$$refs$ModuleNew?_this$$refs$ModuleNew:{},reportObj=_ref12.reportObj,report=_ref12.resultObj.report,timelineFilter=_ref12.dateFilter,_ref13=null!==reportObj&&void 0!==reportObj?reportObj:{},params=_ref13.params,_ref14=null!==this&&void 0!==this?this:{},userFilter=_ref14.dbFilterJson,reportId=_ref14.reportId;return(0,lodash.cloneDeep)({params:null!==params&&void 0!==params?params:{},timelineFilter:timelineFilter,userFilter:userFilter,reportId:reportId,report:report})}}},widgets_ModuleReportWidgetvue_type_script_lang_js=ModuleReportWidgetvue_type_script_lang_js,ModuleReportWidget_component=(0,componentNormalizer/* default */.Z)(widgets_ModuleReportWidgetvue_type_script_lang_js,ModuleReportWidgetvue_type_template_id_d3bd7b8a_scoped_true_render,ModuleReportWidgetvue_type_template_id_d3bd7b8a_scoped_true_staticRenderFns,!1,null,"d3bd7b8a",null)
/* harmony default export */,ModuleReportWidget=ModuleReportWidget_component.exports,CardWidgetvue_type_template_id_d1aa29f4_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"card-wrapper",class:{loading:_vm.loading}},[_vm.componentName?_c(_vm.componentName,{key:_vm.componentKey,ref:"card-component",tag:"component",attrs:{isLoading:_vm.loading,widget:_vm.widget,componentKey:_vm.componentKey,cardData:_vm.dataObj,cardState:_vm.stateObj,cardParams:_vm.paramsObj,dbCustomScriptFilter:_vm.dbCustomScriptFilter,cardDrilldown:_vm.cardActions,triggerAction:_vm.triggerAction,widgetConfig:_vm.widgetConfig,customScriptId:_vm.customScriptId,scriptModeInt:_vm.scriptModeInt}}):_vm._e(),_c("CardActions",{ref:"card-actions"}),_vm.showCardBuilder?_c("card-builder",{staticStyle:{"z-index":"10000"},attrs:{cardData:_vm.widget,isDuplicate:_vm.isDuplicate},on:{close:_vm.closeCardBuilder,duplicate:_vm.duplicateCard,update:_vm.updateCard}}):_vm._e()],1)},CardWidgetvue_type_template_id_d1aa29f4_scoped_true_staticRenderFns=[],CardBuilder=__webpack_require__(606750),uuid=__webpack_require__(455877),CardActions=__webpack_require__(308649),Card=__webpack_require__(562946),type2_Card=__webpack_require__(267688),type3_Card=__webpack_require__(360718),type4_Card=__webpack_require__(795762),type5_Card=__webpack_require__(440997),type1_Card=__webpack_require__(356025),targetMeter_type2_Card=__webpack_require__(120685),targetMeter_type3_Card=__webpack_require__(232034),targetMeter_type4_Card=__webpack_require__(705552),targetMeter_type5_Card=__webpack_require__(422791),type6_Card=__webpack_require__(944504),type7_Card=__webpack_require__(992107),base_Card=__webpack_require__(540803),dataTable_base_Card=__webpack_require__(271050),weather_base_Card=__webpack_require__(416393),carbon_type1_Card=__webpack_require__(401146),energy_type1_Card=__webpack_require__(940945),energyCost_type1_Card=__webpack_require__(789245),graphicCard_type1_Card=__webpack_require__(341857),controlCard_type1_Card=__webpack_require__(535230),pmReadings_type1_Card=__webpack_require__(618966),kpi_type1_Card=__webpack_require__(710612),kpi_type2_Card=__webpack_require__(336496),web_base_Card=__webpack_require__(379523),photos_type1_Card=__webpack_require__(512081),readingTable_type1_Card=__webpack_require__(204543),floorPlan_type1_Card=__webpack_require__(60143),CardWidgetvue_type_script_lang_js={props:{loadImmediately:{type:Boolean,default:!0},updateWidget:{type:Function},dashboardId:{},item:{},showEdit:{},showRemove:{},showFilterConfig:{},widgetConfig:{},componentVisibleInViewPort:{type:Boolean,required:!0}},mixins:[BaseWidgetMixin/* default */.Z],components:{CardBuilder:CardBuilder/* default */.Z,CardActions:CardActions/* default */.Z,readingcard_layout_1:Card/* default */.Z,readingcard_layout_2:type2_Card/* default */.Z,readingcard_layout_3:type3_Card/* default */.Z,readingcard_layout_4:type4_Card/* default */.Z,readingcard_layout_5:type5_Card/* default */.Z,gauge_layout_1:type1_Card/* default */.Z,gauge_layout_2:targetMeter_type2_Card/* default */.Z,gauge_layout_3:targetMeter_type3_Card/* default */.Z,gauge_layout_4:targetMeter_type4_Card/* default */.Z,gauge_layout_5:targetMeter_type5_Card/* default */.Z,gauge_layout_6:type6_Card/* default */.Z,gauge_layout_7:type7_Card/* default */.Z,mapcard_layout_1:base_Card/* default */.Z,datatable:dataTable_base_Card/* default */.Z,weathercard_layout_1:weather_base_Card/* default */.Z,carboncard_layout_1:carbon_type1_Card/* default */.Z,energycost_layout_1:energyCost_type1_Card/* default */.Z,graphicalcard_layout_1:graphicCard_type1_Card/* default */.Z,energycard_layout_1:energy_type1_Card/* default */.Z,controlcard_layout_1:controlCard_type1_Card/* default */.Z,pmreadings_layout_1:pmReadings_type1_Card/* default */.Z,kpicard_layout_1:kpi_type1_Card/* default */.Z,kpicard_layout_2:kpi_type2_Card/* default */.Z,web_layout_1:web_base_Card/* default */.Z,photos_layout_1:photos_type1_Card/* default */.Z,table_layout_1:readingTable_type1_Card/* default */.Z,floorplan_layout_1:floorPlan_type1_Card/* default */.Z},data:function(){return{cardParentId:"",isReportLoadedOnes:!1,isDuplicate:!1,showCardBuilder:!1,dbFilterJson:{},dbTimelineFilter:{},loading:!0,result:null,showOptionsPopover:!1,pubSubWatcherKey:null,isInfoIconPopOverOpen:!1}},created:function(){this.initWidget(this.config),
//when dashboard in lazy mode and widget ain't visible dont load
this.componentVisibleInViewPort&&this.init()},beforeDestroy:function(){this.unSubscribeToLiveData()},watch:{"widget.dataOptions":function(){this.getData()},hasPropsChanged:function(){this.getData()},
//when widget at bottom of dashboard is scrolled up , this prop changes from false to true,
componentVisibleInViewPort:function(_componentVisibleInViewPort){_componentVisibleInViewPort&&(this.isReportLoadedOnes||this.loadImmediately)&&this.init()},allFilters:function(newVal,oldVal){0==this.isReportLoadedOnes&&(this.isReportLoadedOnes=!0),(0,lodash.isEqual)(newVal,oldVal)&&!this.loading||this.getData()}},computed:{allFilters:function(){var _ref=null!==this&&void 0!==this?this:{},dbTimelineFilter=_ref.dbTimelineFilter,dbFilterJson=_ref.dbFilterJson,cardParentId=_ref.cardParentId,dbCustomScriptFilter=_ref.dbCustomScriptFilter;return{dbFilterJson:dbFilterJson,dbTimelineFilter:dbTimelineFilter,cardParentId:cardParentId,dbCustomScriptFilter:dbCustomScriptFilter}},config:function(){var _this=this,_ref2=null!==this&&void 0!==this?this:{},id=_ref2.id;return{id:id,minW:25,maxW:90,minH:10,maxH:50,borderAroundWidget:!1,
// Gives a pale black border around the widgetWrapper...
showHeader:!1,showExpand:!1,noResize:!1,showDropDown:!0,editMenu:[{label:"Edit card",action:function(){_this.showCardBuilder=!0},icon:"el-icon-edit-outline"},{label:"Duplicate",action:function(){_this.isDuplicate=!0,_this.showCardBuilder=!0},icon:"el-icon-document-copy"}],viewMenu:[]}},id:function(){var _this$item$id;return null!==(_this$item$id=this.item.id)&&void 0!==_this$item$id?_this$item$id:null},customScriptId:function(){var _widget$dataOptions,widget=this.widget;return null!==widget&&void 0!==widget&&null!==(_widget$dataOptions=widget.dataOptions)&&void 0!==_widget$dataOptions&&_widget$dataOptions.customScriptId?widget.dataOptions.customScriptId:null},widget:function(){return this.item.widget},scriptModeInt:function(){var _widget$dataOptions2,widget=this.widget;return null!==widget&&void 0!==widget&&null!==(_widget$dataOptions2=widget.dataOptions)&&void 0!==_widget$dataOptions2&&_widget$dataOptions2.scriptModeInt?widget.dataOptions.scriptModeInt:null},showWidgetInfoIcon:function(){var _this$widget,_this$widget2;return(null===(_this$widget=this.widget)||void 0===_this$widget||null===(_this$widget=_this$widget.widgetSettings)||void 0===_this$widget?void 0:_this$widget.showHelpText)&&(null===(_this$widget2=this.widget)||void 0===_this$widget2?void 0:_this$widget2.helpText)},canShowOptions:function(){return this.showEdit||this.showRemove||this.showFilterConfig},componentKey:function(){var result=this.result,$getProperty=this.$getProperty;if(!(0,validation/* isEmpty */.xb)(result)){var id=$getProperty(result,"cardContext.id",null);if(!(0,validation/* isEmpty */.xb)(id))return id}return(0,uuid.v4)()},componentName:function(){var _this$widget$dataOpti=this.widget.dataOptions,dataOptions=void 0===_this$widget$dataOpti?{}:_this$widget$dataOpti;return dataOptions.cardLayout||null},dataObj:function(){var result=this.result,_ref3=null!==result&&void 0!==result?result:{},data=_ref3.data;return(0,validation/* isEmpty */.xb)(result)?{}:data},stateObj:function(){var result=this.result,$getProperty=this.$getProperty;if(!(0,validation/* isEmpty */.xb)(result)){var cardState=$getProperty(result,"state",null);return(0,validation/* isEmpty */.xb)(cardState)?{}:cardState}return{}},paramsObj:function(){var result=this.result,$getProperty=this.$getProperty;if(!(0,validation/* isEmpty */.xb)(result)){var cardParams=$getProperty(result,"cardContext.cardParams",null);return(0,validation/* isEmpty */.xb)(cardParams)?{}:cardParams}return{}},cardActions:function(){var cardDrilldown=this.$getProperty(this.widget,"dataOptions.cardDrilldown",null);return(0,validation/* isEmpty */.xb)(cardDrilldown)?{}:cardDrilldown},hasPropsChanged:function(){var widget=this.widget;return this.$getProperty(widget,"dataOptions.hasEdited",!1)||!1}},methods:{duplicateCard:function(duplicateCardContext){
// Don't remove the `id` of the widget, because we want to find out
// which grid it belongs to, section or master grid using the id only.
var duplicateCard=this.getUpdatedCard(duplicateCardContext);this.closeCardBuilder(),this.$parent.$emit("duplicateWidget",duplicateCard)},getUpdatedCard:function(updatedCardContext){var item=this.item,clonedCard=(0,lodash.cloneDeep)(item),dataOptions=clonedCard.widget.dataOptions;return this.$set(clonedCard.widget,"dataOptions",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},dataOptions),updatedCardContext),{},{hasEdited:!0})),clonedCard},updateCard:function(updatedCardContext){var updatedCard=this.getUpdatedCard(updatedCardContext);this.closeCardBuilder();var updateWidget=this.updateWidget;updateWidget(updatedCard)},closeCardBuilder:function(){this.showCardBuilder=!1,this.isDuplicate=!1},init:function(){var _this2=this;
//first time get data call alone, set up sockets
this.getData().then((function(){_this2.$nextTick((function(){return _this2.subscribeToLiveData()}))}))},helpTextConfig:function(){this.showOptionsPopover=!1,this.$emit("helpTextConfig")},editFilterConfig:function(){this.showOptionsPopover=!1;var widget=this.widget;this.$emit("editWidgetFilterConfig",widget)},remove:function(){this.showOptionsPopover=!1,this.$emit("removeCard")},duplicate:function(){this.showOptionsPopover=!1,this.$emit("duplicate")},subscribeToLiveData:function(){var _this3=this;(0,validation/* isEmpty */.xb)(this.pubSubWatcherKey)||this.unSubscribeToLiveData();var params=this.getSubscriptionParams();(0,validation/* isEmpty */.xb)(params)||(this.$wms?this.$http.post("/v2/fetchLiveUpdateFields",{liveUpdateFields:params.readings}).then((function(response){var readingFields=response.data.result.liveUpdateFields;if(readingFields&&readingFields.length){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(readingFields);try{for(_iterator.s();!(_step=_iterator.n()).done;){var reading=_step.value,topic="__livereading__/"+reading.parentId+"/"+reading.fieldId;_this3.$wms.subscribe(topic,_this3.getData)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}})):this.pubSubWatcherKey=this.subscribe(this.getSubscriptionEvent(),params,this.getData))},unSubscribeToLiveData:function(){var _this4=this,params=this.getSubscriptionParams();this.$wms?this.$http.post("/v2/fetchLiveUpdateFields",{liveUpdateFields:params.readings}).then((function(response){var readingFields=response.data.result.liveUpdateFields;if(readingFields&&readingFields.length){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(readingFields);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var reading=_step2.value,topic="__livereading__/"+reading.parentId+"/"+reading.fieldId;_this4.$wms.unsubscribe(topic,_this4.getData)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}})):this.pubSubWatcherKey&&(this.unsubscribe(this.pubSubWatcherKey,this.getSubscriptionEvent(),params),this.pubSubWatcherKey=null)},getSubscriptionEvent:function(){var cardComponent=this.$refs["card-component"],eventName=cardComponent&&cardComponent.subscriptionEvent;return eventName||"readingChange"},getSubscriptionParams:function(){var cardComponent=this.$refs["card-component"],params=cardComponent?cardComponent.subscriptionParams:[];return params||{}},triggerAction:function(element){var cardComponent=this.$refs["card-component"],cardDrilldown=cardComponent.getCardDrillDown();if(!(0,validation/* isEmpty */.xb)(cardComponent)){if(element=(0,validation/* isEmpty */.xb)(element)?"default":element,
//cardUserFilters and cardFilters are passed through . CardActioComp->executeAction to CardListView->executeAction
(0,validation/* isEmpty */.xb)(this.dbFilterJson)?cardComponent.cardUserFilters={}:cardComponent.cardUserFilters=(0,lodash.cloneDeep)(this.dbFilterJson),(0,validation/* isEmpty */.xb)(this.dbTimelineFilter))cardComponent.cardFilters={};else{var timelineFilter=(0,lodash.cloneDeep)(this.dbTimelineFilter);timelineFilter.operatorId=(0,lodash.cloneDeep)(timelineFilter.dateOperator),delete timelineFilter.dateOperator,cardComponent.cardFilters=timelineFilter}var action=(cardDrilldown||{})[element];if(!(0,validation/* isEmpty */.xb)(action)){var _this$widget$dataOpti2,_this$widget3,useDashboardFilters=null!==(_this$widget$dataOpti2=null===this||void 0===this||null===(_this$widget3=this.widget)||void 0===_this$widget3||null===(_this$widget3=_this$widget3.dataOptions)||void 0===_this$widget3||null===(_this$widget3=_this$widget3.cardDrilldown)||void 0===_this$widget3||null===(_this$widget3=_this$widget3.default)||void 0===_this$widget3||null===(_this$widget3=_this$widget3.data)||void 0===_this$widget3?void 0:_this$widget3.dashboardFilters)&&void 0!==_this$widget$dataOpti2&&_this$widget$dataOpti2;this.$refs["card-actions"].executeAction(action,cardComponent,this.allFilters,useDashboardFilters)}}},getData:function(){var _this5=this;if(this.componentVisibleInViewPort){var _this$widget4=this.widget,id=_this$widget4.id,dataOptions=_this$widget4.dataOptions,cardLayout=dataOptions.cardLayout,cardParams=dataOptions.cardParams,cardState=dataOptions.cardState,cardDrilldown=dataOptions.cardDrilldown,conditionalFormatting=dataOptions.conditionalFormatting,data={};data.cardId=id;var dbTimelineFilter=this.dbTimelineFilter,dbFilterJson=this.dbFilterJson,dbCustomScriptFilter=this.dbCustomScriptFilter,cardParentId=this.cardParentId;return(0,validation/* isEmpty */.xb)(dbTimelineFilter)||(data.cardFilters=JSON.stringify(dbTimelineFilter)),(0,validation/* isEmpty */.xb)(dbFilterJson)||(data.cardUserFilters=JSON.stringify(dbFilterJson)),(0,validation/* isEmpty */.xb)(dbCustomScriptFilter)||(data.customScriptFilter=dbCustomScriptFilter),-1!=data.cardId&&""==cardParentId||(data.cardContext=(0,lodash.cloneDeep)({cardLayout:cardLayout,cardParams:cardParams,cardState:cardState,cardDrilldown:cardDrilldown,conditionalFormatting:conditionalFormatting}),""!=cardParentId&&(data.cardContext.cardParams.reading.parentId=Number(cardParentId))),this.loading=!0,this.$http.post("/v2/dashboard/cards/getCardData",data).then((function(_ref4){var data=_ref4.data;0===data.responseCode&&_this5.$set(_this5,"result",data.result),_this5.$set(_this5,"loading",!1)})).catch((function(){_this5.$set(_this5,"loading",!1);
// TODO
}))}}}},widgets_CardWidgetvue_type_script_lang_js=CardWidgetvue_type_script_lang_js,CardWidget_component=(0,componentNormalizer/* default */.Z)(widgets_CardWidgetvue_type_script_lang_js,CardWidgetvue_type_template_id_d1aa29f4_scoped_true_render,CardWidgetvue_type_template_id_d1aa29f4_scoped_true_staticRenderFns,!1,null,"d1aa29f4",null)
/* harmony default export */,CardWidget=CardWidget_component.exports,ImageWidgetvue_type_template_id_9a99a5ba_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.localLoading?_vm._e():_c("div",{staticClass:"dragabale-card imagecard"},[_vm.url&&_vm.scaledSize&&_vm.imageAreas?[_c("img",{staticClass:"card-img",attrs:{usemap:"#"+_vm.imagecardData.photoId,src:_vm.url,width:_vm.scaledSize.width,height:_vm.scaledSize.height}}),_c("map",{attrs:{name:_vm.imagecardData.photoId}},_vm._l(_vm.imageAreas,(function(area,index){return _c("area",{key:index,attrs:{shape:area.type,coords:_vm.getAreaCoords(area),alt:area.link.alt},on:{click:function($event){return _vm.openArea(area)}}})})),0)]:_vm.url&&_vm.scaledSize?_c("img",{class:{"old-card-img":_vm.isOldImage},attrs:{src:_vm.url,width:_vm.scaledSize.width,height:_vm.scaledSize.height}}):_vm._e(),_vm.showImageEditer?_c("f-photoUploader",{attrs:{dialogVisible:_vm.showImageEditer,widget:_vm.clonedItem,editwidget:!0},on:{"update:dialogVisible":function($event){_vm.showImageEditer=$event},"update:dialog-visible":function($event){_vm.showImageEditer=$event},input:function($event){_vm.showImageEditer=!1},"upload-failed":_vm.imageUploadFailed,update:_vm.updateCard}}):_vm._e()],2)},ImageWidgetvue_type_template_id_9a99a5ba_staticRenderFns=[],FPhotoUploader=(__webpack_require__(737960),__webpack_require__(363256)),ImageWidgetvue_type_script_lang_js={mixins:[BaseWidgetMixin/* default */.Z],props:{updateWidget:{type:Function},item:{required:!0,type:Object},config:{type:Object,default:function(){return{width:0,height:0,actualWidth:0,actualHeight:0}}}},components:{FPhotoUploader:FPhotoUploader/* default */.Z},computed:{clonedItem:function(){var item=this.item;return(0,lodash.cloneDeep)(item)},id:function(){var id=this.item.id;return id},widgetConfig:function(){var _this=this,_ref=null!==this&&void 0!==this?this:{},id=_ref.id;return{id:id,minW:25,maxW:96,minH:10,maxH:50,showHeader:!1,showExpand:!1,noResize:!1,showDropDown:!0,editMenu:[{label:"Edit",action:function(){_this.showImageEditer=!0},icon:"el-icon-edit"}],borderAroundWidget:!0,viewMenu:[]}},widget:function(){return this.item.widget}},created:function(){this.initWidget(this.widgetConfig)},data:function(){return{showImageEditer:!1,imagecardData:null,imageAreas:null,url:null,loading:!1,oldScaledSize:null,scaledSize:null,isOldImage:!1,localLoading:!1}},mounted:function(){this.widget&&this.widget.dataOptions&&this.widget.dataOptions.imagecardData?(this.imagecardData=this.widget.dataOptions.imagecardData?this.widget.dataOptions.imagecardData:null,this.url=this.widget.dataOptions.imagecardData.url?this.widget.dataOptions.imagecardData.url:null,this.imagecardData&&this.imagecardData.options||(this.isOldImage=!0),this.setImageAreas(),this.loadImage()):this.loadCardData()},watch:{"config.width":function(){this.loadImage()},"config.height":function(){this.loadImage()},"config.editwidget":{
// need to be removed
handler:function(newData,oldData){if(this.widget.id>-1&&this.config.selectedWidgetId===this.widget.id&&newData!==oldData&&(this.localLoading=!0,this.widget.dataOptions&&this.widget.dataOptions.metaJson)){this.imagecardData=JSON.parse(this.widget.dataOptions.metaJson);var oldScaledSize=this.imagecardData&&this.imagecardData.options&&this.imagecardData.options.imageMeta&&this.imagecardData.options.imageMeta.scaledSize?this.imagecardData.options.imageMeta.scaledSize:this.oldScaledSize;this.setImageAreas(),this.resizeMap(oldScaledSize,this.scaledSize)}},deep:!0},widget:{handler:function(newData,oldData){if(this.widget.dataOptions&&this.widget.dataOptions.metaJson){this.localLoading=!0,this.imagecardData=JSON.parse(this.widget.dataOptions.metaJson);var oldScaledSize=this.imagecardData&&this.imagecardData.options&&this.imagecardData.options.imageMeta&&this.imagecardData.options.imageMeta.scaledSize?this.imagecardData.options.imageMeta.scaledSize:this.oldScaledSize;this.setImageAreas(),this.resizeMap(oldScaledSize,this.scaledSize)}},deep:!0}},methods:{updateCard:function(metaJson){var item=this.item,clonedCard=(0,lodash.cloneDeep)(item);clonedCard.widget.dataOptions.imagecardData=metaJson,this.showImageEditer=!1;var updateWidget=this.updateWidget;updateWidget(clonedCard)},imageUploadFailed:function(){this.$message.error("Image upload failed, please try again later."),this.showImageEditer=!1},loadCardData:function(){var self=this,params={widgetId:this.widget.id};self.loading=!0,self.$http.post("dashboard/getCardData",params).then((function(response){response.data.cardResult.widget&&response.data.cardResult.widget.metaJson?(self.imagecardData=JSON.parse(response.data.cardResult.widget.metaJson),self.setImageAreas()):self.isOldImage=!0,self.url=response.data.cardResult&&response.data.cardResult.result?response.data.cardResult.result:null,self.loadImage(),self.loading=!1})).catch((function(error){}))},setImageAreas:function(){if(this.imagecardData&&this.imagecardData.options&&this.imagecardData.options.areas&&this.imagecardData.options.areas.length){var _step,areaList=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.imagecardData.options.areas);try{for(_iterator.s();!(_step=_iterator.n()).done;){var area=_step.value;areaList.push({x:area.x,y:area.y,width:area.width,height:area.height,link:area.link})}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.imageAreas=areaList}else this.imagecardData&&this.imagecardData.options&&this.imagecardData.options.areas&&0===this.imagecardData.options.areas.length&&(this.imageAreas=[]);this.localLoading=!1},loadImage:function(){var _this2=this,scaleSize={width:this.$el.offsetWidth,height:this.$el.offsetHeight};if(scaleSize.width||(
// When offsetWidth == 0? Don't understand why this is here.
scaleSize.width=this.config.actualWidth),scaleSize.height||(scaleSize.height=this.config.actualHeight),this.imagecardData&&this.imagecardData.options&&this.imagecardData.options.imageMeta){var originalSize=this.imagecardData.options.imageMeta.originalSize;this.oldScaledSize=this.scaledSize?this.scaledSize:this.imagecardData.options.imageMeta.scaledSize,this.scaledSize=this.scaleImage(scaleSize,originalSize),this.resizeMap(this.oldScaledSize,this.scaledSize)}else{var temp=new Image;temp.src=this.url,temp.onload=function(){_this2.scaledSize=_this2.scaleImage(scaleSize,{width:_this2.width,height:_this2.height})}}},getAreaCoords:function(area){return area.x+","+area.y+","+(area.x+area.width)+","+(area.y+area.height)},openArea:function(area){if(!this.$mobile)if("popup"===area.link.target&&this.$popupView)this.$popupView.openPopup(area.link);else{var urlToLoad=null;"url"===area.link.type?urlToLoad=area.link.url:"report"===area.link.type?urlToLoad=window.location.origin+"/app/em/reports/newview/"+area.link.reportId:"dashboard"===area.link.type&&(urlToLoad=window.location.origin+"/app/em/newdashboard/"+area.link.dashboardId),urlToLoad&&window.open(urlToLoad,area.link.target)}},scaleImage:function(scaleSize,originalSize){var maxWidth=scaleSize.width,maxHeight=scaleSize.height,ratio=0,width=originalSize.width,height=originalSize.height;
// Check if the current width is larger than the max
return width>maxWidth&&(ratio=maxWidth/width,height*=ratio,// Reset height to match scaled image
width*=ratio),
// Check if current height is larger than max
height>maxHeight&&(ratio=maxHeight/height,// get ratio for scaling image
width*=ratio,// Reset width to match scaled image
height*=ratio),{width:width,height:height}},resizeMap:function(oldSize,newSize){if(this.imageAreas){var oldWidth=oldSize&&oldSize.width?oldSize.width:null,newWidth=newSize&&newSize.width?newSize.width:null,oldHeight=oldSize&&oldSize.height?oldSize.height:null,newHeight=newSize&&newSize.height?newSize.height:null;if(oldWidth&&newWidth&&oldHeight&&newHeight){var _step2,wPercent=newSize.width/oldSize.width,hPercent=newSize.height/oldSize.height,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.imageAreas);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var rect=_step2.value;rect.x=rect.x*wPercent,rect.width=rect.width*wPercent,rect.y=rect.y*hPercent,rect.height=rect.height*hPercent}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}}}},widgets_ImageWidgetvue_type_script_lang_js=ImageWidgetvue_type_script_lang_js,ImageWidget_component=(0,componentNormalizer/* default */.Z)(widgets_ImageWidgetvue_type_script_lang_js,ImageWidgetvue_type_template_id_9a99a5ba_render,ImageWidgetvue_type_template_id_9a99a5ba_staticRenderFns,!1,null,null,null)
/* harmony default export */,ImageWidget=ImageWidget_component.exports,TextWidgetvue_type_template_id_6db7f92e_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-quill ql-snow dragabale-card imagecard readonly"},[_c("div",{staticClass:"f-quill-view ql-editor text-data-container"},[_c("div",{staticClass:"ql-container p0",domProps:{innerHTML:_vm._s(_vm.widget.dataOptions.metaJson)}})]),_vm.showtextcard?_c("text-card-editer",{attrs:{widget:_vm.item,visibility:_vm.showtextcard},on:{"update:visibility":function($event){_vm.showtextcard=$event},update:_vm.updateTextCard,close:function($event){_vm.showtextcard=!1}}}):_vm._e()],1)},TextWidgetvue_type_template_id_6db7f92e_scoped_true_staticRenderFns=[],TextCardPopup=__webpack_require__(94505),TextWidgetvue_type_script_lang_js={components:{textCardEditer:TextCardPopup/* default */.Z},mixins:[BaseWidgetMixin/* default */.Z],props:{updateWidget:{type:Function},item:{required:!0,type:Object}},data:function(){return{showtextcard:!1,content:null}},created:function(){this.initWidget(this.widgetConfig)},mounted:function(){this.getCardData()},watch:{content:{handler:function(newData,oldData){this.updatecontehnt(!1)}},widget:{handler:function(newData,oldData){this.getCardData()},deep:!0}},methods:{updateTextCard:function(textData){var item=this.item,clonedCard=(0,lodash.cloneDeep)(item);clonedCard.widget.dataOptions.metaJson=textData;var updateWidget=this.updateWidget;updateWidget(clonedCard),this.showtextcard=!1},getCardData:function(){this.widget&&this.widget.dataOptions.metaJson&&(this.content=this.widget.dataOptions.metaJson)},updatecontehnt:function(){this.widget.dataOptions.metaJson=this.content}},computed:{widget:function(){return this.item.widget},id:function(){var id=this.item.id;return id},widgetConfig:function(){var _this=this,_ref=null!==this&&void 0!==this?this:{},id=_ref.id;return{id:id,minW:25,maxW:96,minH:10,maxH:50,showHeader:!1,showExpand:!0,noResize:!1,showDropDown:!0,editMenu:[{label:"Edit",action:function(){_this.showtextcard=!0},icon:"el-icon-edit"}],borderAroundWidget:!0,viewMenu:[]}}}},widgets_TextWidgetvue_type_script_lang_js=TextWidgetvue_type_script_lang_js,TextWidget_component=(0,componentNormalizer/* default */.Z)(widgets_TextWidgetvue_type_script_lang_js,TextWidgetvue_type_template_id_6db7f92e_scoped_true_render,TextWidgetvue_type_template_id_6db7f92e_scoped_true_staticRenderFns,!1,null,"6db7f92e",null)
/* harmony default export */,TextWidget=TextWidget_component.exports,WidgetHelpTextConfigvue_type_template_id_23cc0996_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"db-widget-filter-manager"},[_c("el-dialog",{staticClass:"db-widget-filter-manager-dialog",attrs:{visible:_vm.visibility,"show-close":!1,"append-to-body":!0,title:"Customize Help Text",width:"35%"}},[_c("div",{staticClass:"body"},[_c("el-checkbox",{staticClass:"mB20",staticStyle:{border:"none"},attrs:{label:"Show helptext cue in widgets"},model:{value:_vm.checkBoxModel,callback:function($$v){_vm.checkBoxModel=$$v},expression:"checkBoxModel"}}),_c("div",{staticClass:"mB15 help-text-title"},[_vm._v(" Help text ")]),_c("el-input",{staticClass:"fc-input-full-border-textarea width100 help-text-txt-area ",attrs:{type:"textarea",resize:"none",placeholder:_vm.$t("common._common.enter_desc")},model:{value:_vm.helpTextModel,callback:function($$v){_vm.helpTextModel=$$v},expression:"helpTextModel"}})],1),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveFilterConfig}},[_vm._v("Done")])],1)])],1)},WidgetHelpTextConfigvue_type_template_id_23cc0996_staticRenderFns=[],utility_methods=__webpack_require__(773258),WidgetHelpTextConfigvue_type_script_lang_js={components:{},props:["visibility","widget"],created:function(){var _widget$widgetSetting,widget=(0,utility_methods/* deepCloneObject */.kh)(this.widget);this.checkBoxModel=(null===widget||void 0===widget||null===(_widget$widgetSetting=widget.widgetSettings)||void 0===_widget$widgetSetting?void 0:_widget$widgetSetting.showHelpText)||!1,this.helpTextModel=null===widget||void 0===widget?void 0:widget.helpText},data:function(){return{checkBoxModel:null,helpTextModel:null}},methods:{closeDialog:function(){this.$emit("update:visibility",!1)},saveFilterConfig:function(){var widget=(0,utility_methods/* deepCloneObject */.kh)(this.widget);widget["widgetSettings"]={showHelpText:this.checkBoxModel},widget["helpText"]=this.helpTextModel,this.$emit("helpTextChanged",widget)}}},reusable_components_WidgetHelpTextConfigvue_type_script_lang_js=WidgetHelpTextConfigvue_type_script_lang_js,WidgetHelpTextConfig_component=(0,componentNormalizer/* default */.Z)(reusable_components_WidgetHelpTextConfigvue_type_script_lang_js,WidgetHelpTextConfigvue_type_template_id_23cc0996_render,WidgetHelpTextConfigvue_type_template_id_23cc0996_staticRenderFns,!1,null,null,null)
/* harmony default export */,WidgetHelpTextConfig=WidgetHelpTextConfig_component.exports,DropDownvue_type_template_id_532c9d18_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{placement:_vm.placement,width:"200",trigger:"click","popper-class":"widget-vertical-dropdown-body"},on:{show:function($event){return _vm.$emit("update:isDropDownExpanded",!0)},hide:function($event){return _vm.$emit("update:isDropDownExpanded",!1)}},model:{value:_vm.showPopover,callback:function($$v){_vm.showPopover=$$v},expression:"showPopover"}},[_vm._l(_vm.options,(function(ref,index){var action=ref.action,label=ref.label,icon=ref.icon,nested=ref.nested,isLineBreak=ref.isLineBreak;return[nested||isLineBreak?isLineBreak?_c("div",{key:index,staticClass:"horizontal-rule"}):nested?_c("drop-down",{key:index,attrs:{item:_vm.item,options:nested,placement:"left"},scopedSlots:_vm._u([{key:"icon",fn:function(){return[_c("div",{staticClass:"pointer options-label"},[icon?_c("i",{staticClass:"icons",class:icon}):_vm._e(),_vm._v(" "+_vm._s(label)+" ")])]},proxy:!0}],null,!0)}):_c("div",{key:index},[_vm._v("Error")]):_c("div",{key:index,staticClass:"pointer options-label",on:{click:function(){action(_vm.item),_vm.showPopover=!1}}},[icon?_c("i",{staticClass:"icons",class:icon}):_vm._e(),_vm._v(" "+_vm._s(label)+" ")])]})),_vm._t("icon",null,{slot:"reference"})],2)},DropDownvue_type_template_id_532c9d18_scoped_true_staticRenderFns=[],DropDownvue_type_script_lang_js={props:{options:{type:Array,default:function(){return[]},required:!0},placement:{type:String,default:"bottom"},item:{type:Object,required:!0},isDropDownExpanded:{
// Syncs the current state of the dropdown, expanded / collapsed.
type:Boolean}},components:{DropDown:DropDown},name:"DropDown",data:function(){return{showPopover:!1}}},components_DropDownvue_type_script_lang_js=DropDownvue_type_script_lang_js,DropDown_component=(0,componentNormalizer/* default */.Z)(components_DropDownvue_type_script_lang_js,DropDownvue_type_template_id_532c9d18_scoped_true_render,DropDownvue_type_template_id_532c9d18_scoped_true_staticRenderFns,!1,null,"532c9d18",null)
/* harmony default export */,DropDown=DropDown_component.exports,PivotTableWrappervue_type_template_id_7831f194_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pivot-table-wrapper height100"},[_c("PivotTable",{ref:"pivotTable",attrs:{printMode:_vm.printMode,loading:_vm.loading,columnFormatting:_vm.columnFormatting,theme:_vm.theme,sortBy:_vm.sortBy,pivotTable:_vm.pivotTable,showTimelineFilter:_vm.showTimelineFilter,dateOperator:_vm.dateOperator,dateValue:_vm.dateValue,dashbord:_vm.dashbord,config:_vm.config,isMobileDashboard:_vm.isMobileDashboard,widgetDatePicker:_vm.widgetDatePicker,fetchPivotDataError:_vm.fetchPivotDataError,updateWidget:_vm.updateWidget,item:_vm.item,diable_userfilter_drillown:_vm.diable_userfilter_drillown},on:{sortChanged:_vm.sortChanged,pickerChanged:_vm.pickerChanged}}),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()],1)},PivotTableWrappervue_type_template_id_7831f194_scoped_true_staticRenderFns=[],PivotTablevue_type_template_id_b7c08208_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pivot-table-comp-root height100 width100",class:_vm.isPivot?"pR25":""},[_vm.showTimelineFilter&&_vm.datePickerObj&&!_vm.isBuilder?_c("div",{staticClass:"date-picker-boxed-style",style:_vm.showTimelineFilter&&_vm.datePickerObj&&!_vm.isBuilder&&!_vm.isPivot?"display:none !important;":""},[_vm.config?_c("portal",{staticClass:"tabulardata-datepicker",attrs:{to:"widget-datepicker"+_vm.config.widget.id,slim:""}},[_c("new-date-picker",{key:_vm.pickerCompKey,ref:"datePickerRef",staticClass:"filter-field date-filter-comp-new-report inline",staticStyle:{"text-align":"right"},attrs:{zone:_vm.$timezone,dateObj:_vm.datePickerObj},on:{date:_vm.dateChanged}})],1):_c("new-date-picker",{key:_vm.pickerCompKey,ref:"datePickerRef",staticClass:"mB10",staticStyle:{"text-align":"left"},attrs:{zone:_vm.$timezone,dateObj:_vm.datePickerObj},on:{date:_vm.dateChanged}})],1):_vm._e(),_vm.isBuilder?_c("div",{staticClass:"pivot-tool-bar pivot-table-builder-root"},[_vm._t("tools-section"),_vm.showTimelineFilter&&_vm.datePickerObj?_c("div",{staticClass:"date-picker-slot"},[_c("new-date-picker",{key:_vm.pickerCompKey,ref:"datePickerRef",staticStyle:{"text-align":"left"},attrs:{zone:_vm.$timezone,dateObj:_vm.datePickerObj},on:{date:_vm.dateChanged}})],1):_vm._e()],2):_vm._e(),_vm.showTable?_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.outsideClick,expression:"outsideClick"}],ref:"pivotTableContainer",staticClass:"calculate-table-height h100 w100"},[_vm.isBuilderLoaded?_c("div",[_vm.loading?_c("skeletonLoader",{attrs:{show:_vm.loading,preset:"Table",columns:4,rows:4}}):_vm._e()],1):_vm.isNoConfig||_vm.fetchPivotDataError?_c("div",{staticClass:"no-config-pivot width100 flex-middle flex-direction-column justify-content-center",class:["pivot-theme-"+_vm.pivotThemeName]},[_vm.fetchPivotDataError?_c("div",{staticClass:"pivot-error-container"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label mB150"},[_vm._v(" "+_vm._s(_vm.$t("pivot.fetchError"))+" ")])],1):_vm._e(),_vm.isNoConfig&&_vm.spinnerStat.measures&&_vm.spinnerStat.dimensions?_c("div",{staticStyle:{width:"500px"}},[_c("img",{staticStyle:{"margin-top":"-480px",transform:"scale(0.3)","margin-left":"-700px"},attrs:{src:__webpack_require__(797818)}})]):_vm.fetchPivotDataError||_vm.isDimensionsAndMeasuresLoaded?_vm._e():_c("el-table",{attrs:{data:[],border:"","max-height":500,width:"100","cell-style":_vm.cellStyle,"header-cell-style":_vm.headerStyle,"row-class-name":"pivot-table-row","span-method":_vm.pivotSpanMethod},on:{"header-dragend":_vm.columnResizeEvent}},_vm._l(_vm.tableProps,(function(prop,index){return _c("el-table-column",{key:index,attrs:{resizable:"",fixed:_vm.isColumnFixed(index,prop),"min-width":_vm.getColumnWidth(prop),prop:prop,label:_vm.tableHeaders[index]},scopedSlots:_vm._u([{key:"header",fn:function(scope){return[_c("div",{class:prop==_vm.activeColumn?"selected-row pivot-table-header":"pivot-table-header"},[_c("span",{style:prop==_vm.activeColumn?"color:white !important":""},[_vm._v(" "+_vm._s(scope.column.label)+" ")])])]}}],null,!0)})})),1)],1):_c("div",{class:{"pivot-el-table-section":_vm.enableColumnFormat}},[_c("div",{staticClass:"height100 width100",class:["pivot-theme-"+_vm.pivotThemeName]},[_c("div",{staticClass:"height100 width100",class:["pivot-grid-line-"+_vm.pivotTableGrid,"pivot-stripe-"+_vm.pivotTableStripe,"pivot-font-"+_vm.pivotFontSize]},[_vm.isDimensionsAndMeasuresLoaded?_vm._e():_c("el-table",{ref:"pivotTable",attrs:{data:_vm.orderedPivotRecords,border:"","max-height":_vm.pivotTableHeight,"max-width":"100","cell-style":_vm.cellStyle,"header-cell-style":_vm.headerStyle,"row-class-name":"pivot-table-row"},on:{"header-dragend":_vm.columnResizeEvent,"header-click":_vm.enableTitleEdit,"cell-click":_vm.handleDrillDown}},_vm._l(_vm.pivotFilteredColumnProps,(function(prop,index){return _c("el-table-column",{key:index,attrs:{resizable:"",fixed:_vm.isColumnFixed(index,prop),prop:prop,label:_vm.pivotTable.pivotReconstructedData.headers[prop],"min-width":_vm.getColumnWidth(prop),"sort-method":function(a,b){return _vm.sortMethod(a,b,prop)}},scopedSlots:_vm._u([{key:"header",fn:function(scope){return[_c("div","number"!=prop?[_c("div",{class:prop==_vm.activeColumn?"selected-row pivot-table-header":"pivot-table-header"},[_c("div",{staticClass:"header-dropdown-container pointer",staticStyle:{width:"100%"}},[_vm.isColumnFixed(index,prop)?_c("i",{staticClass:"fa fa-thumb-tack mL5",staticStyle:{opacity:"0.5","font-size":"10px","padding-right":"5px"},attrs:{id:"pin-"+prop}}):_vm._e(),_vm.showTitleEditBox==prop?_c("div",[_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.titleEditModel,expression:"titleEditModel"},{name:"click-outside",rawName:"v-click-outside",value:_vm.headerLabelChanged,expression:"headerLabelChanged"}],staticClass:"el-input fc-input-full-border2",staticStyle:{border:"none"},domProps:{value:_vm.titleEditModel},on:{keydown:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.headerLabelChanged.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.titleEditModel=$event.target.value)}}})]):_c("span",{staticClass:"el-dropdown-tooltip",style:prop==_vm.activeColumn?"color:white !important":""},[_c("el-tooltip",{attrs:{placement:"top"}},[_c("div",{attrs:{slot:"content"},slot:"content"},[_c("span",[_vm._v(_vm._s(scope.column.label))])]),_c("div",{staticClass:"header-label",attrs:{id:"column-"+prop}},[_c("span",[_vm._v(" "+_vm._s(scope.column.label)+" ")])])]),_c("el-tooltip",{attrs:{placement:"top"}},[_c("div",{attrs:{slot:"content"},slot:"content"},[_c("span",[_vm._v(_vm._s(3==_vm.tableSort.order?"Ascending":"Descending"))])]),_c("i",{staticClass:"header-icon",class:[].concat(_vm.getSortIconClass(prop)),attrs:{id:"sort-"+prop},on:{click:function($event){return _vm.toggleSortColumn(prop)}}})])],1)]),_c("div",{staticClass:"header-icons"},[_vm.enableColumnFormat?_c("header-dropdown",{staticClass:"header-dropdown-icon",attrs:{contextmenu:_vm.getContextMenu(prop),prop:prop},on:{contextMenuSelectEvent:_vm.contextMenuSelectEvent}}):_vm._e()],1)])]:[_c("span",[_vm._v(" "+_vm._s(scope.column.label)+" ")])])]}},{key:"default",fn:function(scope){return[_c("table-cell-wrapper",{attrs:{textBackgroundStyle:_vm.getTextBackground(scope.row[prop].style,prop),prop:prop,pivotTable:_vm.pivotTable,visualConfig:_vm.getVisualConfig(prop),referenceValue:_vm.getReferenceValue(prop,scope.row),alignment:_vm.getTextAlignment(scope.row[prop]),value:scope.row[prop].formattedValue}})]}}],null,!0)})})),1)],1)])])]):_vm._e()])},PivotTablevue_type_template_id_b7c08208_scoped_true_staticRenderFns=[],esm_typeof=__webpack_require__(103336),PivotDefaults=(__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(725906),__webpack_require__(863173)),HeaderDropdownvue_type_template_id_89649a1c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"graphicsContextMenu",staticClass:"pivot-header-dropdown"},[_c("el-dropdown",{ref:_vm.prop,attrs:{trigger:"click"},on:{command:_vm.handleClickAction}},[_c("div",{staticClass:"more-icon-header"},[_c("i",{staticClass:"el-icon-more",staticStyle:{"margin-left":"6px"}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.menuOptions,(function(menu,index){return _c("el-dropdown-item",{key:index,attrs:{command:menu},on:{click:function($event){return _vm.handleClickAction(menu)}}},[_c("div",{staticClass:"dropdown-menu-text"},[_c("div",{staticStyle:{"padding-top":"2.5px","margin-right":"10px"}},[_c("InlineSvg",{attrs:{src:_vm.imgUrl[index],iconClass:"icon-sm flex icon"}})],1),_c("span",[_vm._v(" "+_vm._s(menu.isActive?menu.activeLabel:menu.label)+" ")])])])})),1)],1)],1)},HeaderDropdownvue_type_template_id_89649a1c_scoped_true_staticRenderFns=[],HeaderDropdownvue_type_script_lang_js={props:["contextmenu","prop","visible","isPinned"],data:function(){return{iconsSet1:["svgs/pivot/pin-notification","svgs/pivot/sort","svgs/pivot/auto-size-icon","svgs/pivot/cli-text-icon","svgs/pivot/Column","svgs/pivot/paint-icon","svgs/pivot/rename-icon"],iconsSet2:["svgs/pivot/pin-notification","svgs/pivot/sort","svgs/pivot/auto-size-icon","svgs/pivot/cli-text-icon","svgs/pivot/cell-visualixzation","svgs/pivot/Column","svgs/pivot/paint-icon","svgs/pivot/rename-icon"]}},computed:{menuOptions:function(){return this.contextmenu.menu},imgUrl:function(){return this.menuOptions.length<8?this.iconsSet1:this.iconsSet2}},methods:{handleClickAction:function(menu){this.$emit("contextMenuSelectEvent",{menu:menu,prop:this.prop})}}},widgets_HeaderDropdownvue_type_script_lang_js=HeaderDropdownvue_type_script_lang_js,HeaderDropdown_component=(0,componentNormalizer/* default */.Z)(widgets_HeaderDropdownvue_type_script_lang_js,HeaderDropdownvue_type_template_id_89649a1c_scoped_true_render,HeaderDropdownvue_type_template_id_89649a1c_scoped_true_staticRenderFns,!1,null,"89649a1c",null)
/* harmony default export */,HeaderDropdown=HeaderDropdown_component.exports,TableCellWrappervue_type_template_id_15245150_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{style:_vm.getCellStyle()},["data-bar"==_vm.displayType?_c("data-bar-view",{style:_vm.textBackgroundStyle,attrs:{value:_vm.value,referenceValue:_vm.referenceValue,visualConfig:_vm.visualConfig,prop:_vm.prop,pivotTable:_vm.pivotTable}}):"compare"==_vm.displayType?_c("compare-view",{style:_vm.textBackgroundStyle,attrs:{value:_vm.value,referenceValue:_vm.referenceValue,visualConfig:_vm.visualConfig,prop:_vm.prop,pivotTable:_vm.pivotTable,alignment:_vm.alignment}}):"circle"==_vm.displayType?_c("circle-view",{style:_vm.textBackgroundStyle,attrs:{value:_vm.value,referenceValue:_vm.referenceValue,visualConfig:_vm.visualConfig,prop:_vm.prop,pivotTable:_vm.pivotTable}}):_c("text-view",{style:_vm.textBackgroundStyle,attrs:{value:_vm.value,prop:_vm.prop,pivotTable:_vm.pivotTable}})],1)},TableCellWrappervue_type_template_id_15245150_staticRenderFns=[],TextViewvue_type_template_id_33c5ee7c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["number"==_vm.prop?_c("div",[_vm._v(" "+_vm._s(_vm.value)+" ")]):"#VALUE!"==_vm.getFormattedCellValue(_vm.value,_vm.prop)?_c("div",[_c("el-popover",{attrs:{placement:"bottom",title:_vm.$t("pivot.formulaError"),width:"425",trigger:"hover",content:"Error calculating formula field. Please check the expression."}},[_c("div",{attrs:{slot:"reference"},slot:"reference"},[_vm._v(" "+_vm._s(_vm.getFormattedCellValue(_vm.value,_vm.prop))+" ")])])],1):_c("div",[_vm._v(" "+_vm._s(_vm.getFormattedCellValue(_vm.value,_vm.prop))+" ")])])},TextViewvue_type_template_id_33c5ee7c_staticRenderFns=[],BaseViewvue_type_script_lang_js=(__webpack_require__(756532),{props:["value","pivotTable","prop","visualConfig","referenceValue"],mixins:[NewDataFormatHelper/* default */.Z],computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{valueInPercentage:function(){var result=100;if("constant"==this.visualConfig.compareWith&&this.visualConfig.constantValue){var _this$value,currentValue="string"==typeof this.value?null===(_this$value=this.value)||void 0===_this$value?void 0:_this$value.replaceAll(",",""):this.value;void 0==currentValue||isNaN(currentValue)||(result=Number(currentValue)/Number(this.visualConfig.constantValue)*100)}else if("maxValue"==this.visualConfig.compareWith&&this.visualConfig.columnMaxValue)result=this.value/this.visualConfig.columnMaxValue*100;else if("referenceColumn"==this.visualConfig.compareWith&&this.referenceValue){var _this$value2,_this$referenceValue,_currentValue="string"==typeof this.value?null===(_this$value2=this.value)||void 0===_this$value2?void 0:_this$value2.replaceAll(",",""):this.value,referenceValue="string"==typeof this.referenceValue?null===(_this$referenceValue=this.referenceValue)||void 0===_this$referenceValue?void 0:_this$referenceValue.replaceAll(",",""):this.referenceValue;void 0==_currentValue||isNaN(_currentValue)||isNaN(referenceValue)?void 0!=_currentValue&&!isNaN(_currentValue)&&Number(_currentValue)<=0&&!isNaN(referenceValue)&&Number(referenceValue)<=0&&(result=0):(result=Number(_currentValue)/Number(referenceValue)*100,result-=100)}else this.referenceValue||(result=100*this.value,result-=100);return result=Number(result).toFixed(2),parseFloat(result)},absValueInPercentage:function(){var result=Math.abs(this.valueInPercentage);return result}}),data:function(){return{timeAggregation:PivotDefaults/* timeAggregation */.tP}},methods:{isEmpty:validation/* isEmpty */.xb,getFormattedCellValue:function(value,prop){if(prop.startsWith("number"))return value;if(prop.startsWith("formula"))return value||"--";var _ref=this.pivotTable||{},dataAlias=_ref.dataAlias,rowAlias=_ref.rowAlias,field=dataAlias[prop]?dataAlias[prop].field:rowAlias[prop].field;if(prop.startsWith("data")&&(0,validation/* isEmpty */.xb)(value)){var aggr=this.pivotTable.values.find((function(e){return e.alias===prop})).aggr;if(1===aggr)return 0}if((0,validation/* isEmpty */.xb)(value))return"--";if((0,utils_field/* isIdField */.sh)(field)&&prop.startsWith("row"))return"#"+value;if((0,utils_field/* isNumberField */.Z2)(field)&&"DURATION"==field.displayType&&((0,validation/* isEmpty */.xb)(value)||(value=value.replaceAll(",","")),!isNaN(value)&&(0,validation/* isEmpty */.xb)(field.unit)&&(0,validation/* isEmpty */.xb)(field.unitId)&&(0,validation/* isEmpty */.xb)(field.unitEnum)))return this.$helpers.getFormattedDuration(Number(value),"seconds");if((0,utils_field/* isDateTimeField */.K)(field)||(0,utils_field/* isDateField */.y2)(field)){var _this$pivotTable,_aggr=0;null===(_this$pivotTable=this.pivotTable)||void 0===_this$pivotTable||null===(_this$pivotTable=_this$pivotTable.rows)||void 0===_this$pivotTable||_this$pivotTable.forEach((function(e){e.alias===prop&&(_aggr=e.field.aggr>0?e.field.aggr:0,!(0,validation/* isEmpty */.xb)(e.selectedTimeAggr)&&_aggr<=0&&(_aggr=_aggr>0?_aggr:e.selectedTimeAggr))}));var timeAggr=this.timeAggregation.find((function(obj){return obj.value===_aggr}));return this.formatDate(value,timeAggr.enumValue)}return value},formatDate:function(date,period){var _this$getCurrentUser,_this$getCurrentUser2,dateFormat=this.getDateFormat(period);return null===(null===(_this$getCurrentUser=this.getCurrentUser())||void 0===_this$getCurrentUser?void 0:_this$getCurrentUser.timezone)?moment_timezone_default()(new Date(date)).tz(vue_runtime_esm["default"].prototype.$timezone).format(dateFormat.tooltip):moment_timezone_default()(new Date(date)).tz(null===(_this$getCurrentUser2=this.getCurrentUser())||void 0===_this$getCurrentUser2?void 0:_this$getCurrentUser2.timezone).format(dateFormat.tooltip)},checkNumberField:function(prop){var _ref2=this.pivotTable||{},dataAlias=_ref2.dataAlias,rowAlias=_ref2.rowAlias,field=dataAlias[prop]?dataAlias[prop].field:rowAlias[prop].field;return!(0,validation/* isEmpty */.xb)(field)&&((0,utils_field/* isNumberField */.Z2)(field)||(0,utils_field/* isDecimalField */.No)(field)||(0,utils_field/* isIdField */.sh)(field))}}}),TableCell_BaseViewvue_type_script_lang_js=BaseViewvue_type_script_lang_js,BaseView_component=(0,componentNormalizer/* default */.Z)(TableCell_BaseViewvue_type_script_lang_js,BaseView_render,BaseView_staticRenderFns,!1,null,null,null)
/* harmony default export */,BaseView=BaseView_component.exports,TextViewvue_type_script_lang_js={extends:BaseView},TableCell_TextViewvue_type_script_lang_js=TextViewvue_type_script_lang_js,TextView_component=(0,componentNormalizer/* default */.Z)(TableCell_TextViewvue_type_script_lang_js,TextViewvue_type_template_id_33c5ee7c_render,TextViewvue_type_template_id_33c5ee7c_staticRenderFns,!1,null,null,null)
/* harmony default export */,TextView=TextView_component.exports,DataBarViewvue_type_template_id_aeb86916_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"progress-bar-wrapper"},[_c("div",{staticClass:"progress-bar",style:{background:_vm.fillColor+"0f"}},[_c("div",{staticClass:"progress-bar-base",style:{width:_vm.absValueInPercentage+"%",opacity:1,background:_vm.fillColor}},[_vm.showValue?_c("div",{staticClass:"data-bar-value-container",style:{color:_vm.textColor}},[_vm._v(" "+_vm._s(_vm.value)+" ")]):_vm._e()])]),_vm._e()])])},DataBarViewvue_type_template_id_aeb86916_scoped_true_staticRenderFns=[],DataBarViewvue_type_script_lang_js={computed:{showIcon:function(){return"maxValue"!=this.visualConfig.compareWith},fillColor:function(){return this.visualConfig.fillColor?this.visualConfig.fillColor:"green"},textColor:function(){return this.visualConfig.textColor?this.visualConfig.textColor:"black"},showValue:function(){return this.visualConfig.showValue}},extends:BaseView},TableCell_DataBarViewvue_type_script_lang_js=DataBarViewvue_type_script_lang_js,DataBarView_component=(0,componentNormalizer/* default */.Z)(TableCell_DataBarViewvue_type_script_lang_js,DataBarViewvue_type_template_id_aeb86916_scoped_true_render,DataBarViewvue_type_template_id_aeb86916_scoped_true_staticRenderFns,!1,null,"aeb86916",null)
/* harmony default export */,DataBarView=DataBarView_component.exports,CompareViewvue_type_template_id_0f685388_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"compare-view-wrapper"},[_c("el-row",{staticStyle:{display:"flex","min-width":"200px"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"compare-value-container"},[_vm._v(" "+_vm._s(_vm.value)+" ")])]),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"icons-container mR5"},[_vm.valueInPercentage<0?_c("i",{staticClass:"el-icon-bottom",style:{color:_vm.downArrowColor}}):_c("i",{staticClass:"el-icon-top",style:{color:_vm.upArrowColor}})])]),_c("el-col",{attrs:{span:24}},[_c("div",{style:_vm.getCellStyle},[_c("span",[_vm._v(" "+_vm._s(_vm.absValueInPercentage+" %"))])])])],1)],1)])},CompareViewvue_type_template_id_0f685388_staticRenderFns=[],CompareViewvue_type_script_lang_js={props:["visualConfig","referenceValue","alignment"],computed:{downArrowColor:function(){return this.visualConfig.downArrowColor?this.visualConfig.downArrowColor:"red"},upArrowColor:function(){return this.visualConfig.upArrowColor?this.visualConfig.upArrowColor:"green"},getCellStyle:function(){var style={display:"flex"};return"right"==this.alignment?style["justify-content"]="flex-end":"left"==this.alignment||"center"==this.alignment?style["justify-content"]="flex-start":style["justify-content"]="space-around",style["align-items"]="center",style}},extends:BaseView},TableCell_CompareViewvue_type_script_lang_js=CompareViewvue_type_script_lang_js,CompareView_component=(0,componentNormalizer/* default */.Z)(TableCell_CompareViewvue_type_script_lang_js,CompareViewvue_type_template_id_0f685388_render,CompareViewvue_type_template_id_0f685388_staticRenderFns,!1,null,null,null)
/* harmony default export */,CompareView=CompareView_component.exports,CircleViewvue_type_template_id_0c478bde_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"circle-view-wrapper"},[_c("div",{staticClass:"circle-view-pivot"},[_c("svg",{attrs:{height:"25",width:"25",viewBox:"0 0 20 20"}},[_c("circle",{attrs:{r:"10",cx:"10",cy:"10",fill:_vm.fillColor,opacity:"0.1"}}),_c("circle",{attrs:{r:"5",cx:"10",cy:"10",fill:"transparent",stroke:_vm.fillColor,"stroke-width":"10","stroke-dasharray":_vm.svgDashArray,transform:"rotate(-90) translate(-20)"}})])]),_vm.showValue?_c("div",{staticClass:"circle-value-container"},[_vm._v(" "+_vm._s(_vm.value)+" ")]):_vm._e()])])},CircleViewvue_type_template_id_0c478bde_scoped_true_staticRenderFns=[],CircleViewvue_type_script_lang_js={computed:{fillColor:function(){return this.visualConfig.fillColor?this.visualConfig.fillColor:"red"},svgDashArray:function(){return"".concat(31.4*this.absValueInPercentage/100," 31.4")},showValue:function(){return this.visualConfig.showValue}},extends:BaseView,methods:{format:function(){return this.value}}},TableCell_CircleViewvue_type_script_lang_js=CircleViewvue_type_script_lang_js,CircleView_component=(0,componentNormalizer/* default */.Z)(TableCell_CircleViewvue_type_script_lang_js,CircleViewvue_type_template_id_0c478bde_scoped_true_render,CircleViewvue_type_template_id_0c478bde_scoped_true_staticRenderFns,!1,null,"0c478bde",null)
/* harmony default export */,CircleView=CircleView_component.exports,TableCellWrappervue_type_script_lang_js={props:["textBackgroundStyle","value","prop","pivotTable","alignment","visualConfig","referenceValue"],computed:{displayType:function(){return this.visualConfig.visualType?this.visualConfig.visualType:"text"}},components:{TextView:TextView,DataBarView:DataBarView,CompareView:CompareView,CircleView:CircleView},methods:{getCellStyle:function(){var style={};return"data-bar"==this.displayType?{}:(style["display"]="flex","right"==this.alignment?style["justify-content"]="flex-end":"left"==this.alignment?style["justify-content"]="flex-start":style["justify-content"]="space-around",style["align-items"]="center",style)}}},widgets_TableCellWrappervue_type_script_lang_js=TableCellWrappervue_type_script_lang_js,TableCellWrapper_component=(0,componentNormalizer/* default */.Z)(widgets_TableCellWrappervue_type_script_lang_js,TableCellWrappervue_type_template_id_15245150_render,TableCellWrappervue_type_template_id_15245150_staticRenderFns,!1,null,null,null)
/* harmony default export */,TableCellWrapper=TableCellWrapper_component.exports,skeletonLoader=__webpack_require__(892249),PivotTablevue_type_script_lang_js={components:{NewDatePicker:NewDatePicker/* default */.Z,HeaderDropdown:HeaderDropdown,TableCellWrapper:TableCellWrapper,skeletonLoader:skeletonLoader/* default */.Z},watch:{recordsCount:function(newCount){this.$emit("recordCountUpdated",newCount)},isNoConfig:{handler:function(newState){1==newState&&(this.tableProps=null)}},pivotTable:function(){var _this=this;this.constructTableData(this.pivotTable),this.setDatePicker(),this.$nextTick().then((function(){var _this$$refs;(_this.$emit("tableReady",!1),_this.pivotTableHeight=_this.calculateTableHeight(),_this.rerenderTable(),_this.$refs.pivotTable)&&(null===(_this$$refs=_this.$refs)||void 0===_this$$refs||null===(_this$$refs=_this$$refs.pivotTable)||void 0===_this$$refs||_this$$refs.doLayout());if(_this.printMode){var clonedItem=(0,lodash.cloneDeep)(_this.item);clonedItem.x=0,clonedItem.w=96;var tableElement=_this.$el.querySelector(".el-table__body-wrapper");clonedItem.h=Math.ceil((tableElement.scrollHeight+100)/15),_this.updateWidget(clonedItem)}_this.tableSort=JSON.parse(JSON.stringify(_this.sortBy)),_this.currentSortAlias=_this.tableSort.alias}))}},mixins:[JumpToHelper/* default */.Z],props:{updateWidget:{type:Function},printMode:{type:Boolean,default:!1},item:{type:Object,required:!0},sortBy:{type:Object,default:null},showTimelineFilter:{type:Boolean,default:!1},activeColumn:{type:String,default:null},dateOperator:{type:Number,default:28},dateValue:{type:String,default:null},pivotTable:{type:Object,default:function(){return null}},theme:{type:Object,default:function(){return PivotDefaults/* defaultTheme */.uH}},columnFormatting:{type:Object,default:function(){return{}}},isNoConfig:{default:!1},spinnerStat:{type:Object},tableFormatting:{type:Object,default:function(){return{isStickyColumns:!1,noWrap:!1};
//setting no wrap property is like auto width for ALL columns ,styles are set to whitespace no wrap and no width property is set
}},loading:{type:Boolean,default:!0},dashbord:{type:Boolean},config:{type:Object},widgetDatePicker:{type:Object},enableColumnFormat:{type:Boolean},isMobileDashboard:{type:Boolean},fetchPivotDataError:{type:Boolean},diable_userfilter_drillown:{type:Boolean}},mounted:function(){var _this2=this;this.$nextTick().then((function(){var _this2$$refs;_this2.pivotTableHeight=_this2.calculateTableHeight(),_this2.setDatePicker(),null===(_this2$$refs=_this2.$refs)||void 0===_this2$$refs||null===(_this2$$refs=_this2$$refs.pivotTable)||void 0===_this2$$refs||_this2$$refs.doLayout()}))},data:function(){return{stickyColumnWidths:[],
//rendered row widths in pixel
dragging:!1,renameModel:null,datePickerObj:null,pickerCompKey:0,tableData:[],tableHeaders:[],tableProps:[],showSortIcon:"",borderColor:"",hoverColor:"",showTable:!0,tableSort:{},editTitleProp:null,currentSortAlias:null,pivotTableHeight:700,showTitleEditBox:null,headerDBClick:0,dBClickCounter:null,dBTimerObj:null,titleEditModel:"",contextMenu:{menu:[{label:"Pin",activeLabel:"Unpin",isActive:!1},{label:"Sort"},{label:"Auto size"},{label:"Text wrap",activeLabel:"Clip text",isActive:!0},{label:"Cell visualization"},{label:"Column formatting"},{label:"Conditional formatting"},{label:"Rename"}]},timeAggregation:PivotDefaults/* timeAggregation */.tP}},computed:{dateFilter:function(){var dateOperator=this.dateOperator,dateValue=this.dateValue;return{dateOperator:dateOperator,dateValue:dateValue}},noDataState:function(){var _this$pivotTable;return!(0!=(null===(_this$pivotTable=this.pivotTable)||void 0===_this$pivotTable||null===(_this$pivotTable=_this$pivotTable.pivotReconstructedData)||void 0===_this$pivotTable?void 0:_this$pivotTable.records.length))},isBuilderLoaded:function(){return this.$route.path.includes("pivotbuilder")?this.loading&&this.spinnerStat.dimensions&&this.spinnerStat.measures:this.loading},isDimensionsAndMeasuresLoaded:function(){return this.$route.path.includes("pivotbuilder")?!(this.spinnerStat.dimensions&&this.spinnerStat.measures):this.loading},recordsCount:function(){var _this$pivotTable2;return null===(_this$pivotTable2=this.pivotTable)||void 0===_this$pivotTable2||null===(_this$pivotTable2=_this$pivotTable2.pivotReconstructedData)||void 0===_this$pivotTable2?void 0:_this$pivotTable2.records.length},pivotThemeName:function(){var _this$theme,_this$theme2;return null!==(_this$theme=this.theme)&&void 0!==_this$theme&&_this$theme.class?null===(_this$theme2=this.theme)||void 0===_this$theme2?void 0:_this$theme2.class:"default"},isBuilder:function(){return this.enableColumnFormat},isPivot:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab,_findRouteForTab2,_findRouteForTab3,_ref=null!==(_findRouteForTab=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_VIEW))&&void 0!==_findRouteForTab?_findRouteForTab:{},path=_ref.path;if(this.$route.path.includes(path))return!0;var route_obj=null!==(_findRouteForTab2=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_FORM))&&void 0!==_findRouteForTab2?_findRouteForTab2:{};return!!this.$route.path.includes(route_obj.path)||(route_obj=null!==(_findRouteForTab3=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_VIEW_MANAGER))&&void 0!==_findRouteForTab3?_findRouteForTab3:{},!!this.$route.path.includes(route_obj.path))}return this.$route.path.includes("em/pivot")},pivotTableGrid:function(){var _this$theme3,_this$theme4;return null!==(_this$theme3=this.theme)&&void 0!==_this$theme3&&_this$theme3.grid?null===(_this$theme4=this.theme)||void 0===_this$theme4?void 0:_this$theme4.grid:"both"},pivotTableStripe:function(){var _this$theme5,_this$theme6;return!(null===(_this$theme5=this.theme)||void 0===_this$theme5||!_this$theme5.stripe)&&(null===(_this$theme6=this.theme)||void 0===_this$theme6?void 0:_this$theme6.stripe)},pivotFontSize:function(){var _this$theme7,_this$theme8;return null!==(_this$theme7=this.theme)&&void 0!==_this$theme7&&_this$theme7.fontSize?null===(_this$theme8=this.theme)||void 0===_this$theme8?void 0:_this$theme8.fontSize:"medium"},pivotShowRowNumber:function(){var _this$theme9;return!(null===(_this$theme9=this.theme)||void 0===_this$theme9||!_this$theme9.number)&&this.theme.number},pivotFilteredColumnProps:function(){var _this3=this;if(!this.columnFormatting||!this.tableProps)return this.tableProps;var props=this.tableProps.filter((function(prop){var _this3$columnFormatti;return!(null!==(_this3$columnFormatti=_this3.columnFormatting[prop])&&void 0!==_this3$columnFormatti&&_this3$columnFormatti.hideColumn)}));return props},orderedPivotRecords:function(){var _this$sortBy,_this$sortBy2,sort_alias=null===(_this$sortBy=this.sortBy)||void 0===_this$sortBy?void 0:_this$sortBy.alias,sort_order=null===(_this$sortBy2=this.sortBy)||void 0===_this$sortBy2?void 0:_this$sortBy2.order;if(!(0,validation/* isEmpty */.xb)(sort_alias)&&!(0,validation/* isEmpty */.xb)(this.pivotTable.pivotReconstructedData.records)&&this.pivotTable.pivotReconstructedData.records.length>1){var self=this,field=this.pivotTable.pivotAliasVsField[sort_alias];!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isLookupField */.Qf)(field)&&this.pivotTable.pivotReconstructedData.records.sort((function(objA,objB){return 3==sort_order?self.sortMethod(objA,objB,sort_alias):self.sortMethod(objB,objA,sort_alias)}))}return this.pivotTable.pivotReconstructedData.records}},methods:{isEmpty:validation/* isEmpty */.xb,outsideClick:function(){this.$emit("activeColumnChanged",null)},enableTitleEdit:function(column){
// this.showTitleEditBox = column.property
// if (this.showTitleEditBox === column.property) return
// if (this.dBTimerObj) {
//   clearTimeout(this.dBTimerObj)
//   this.dBClickCounter = 2
//   this.dBTimerObj = null
// } else {
//   this.dBClickCounter = 1
//   this.dBTimerObj = setTimeout(() => {
//     this.showTitleEditBox = null
//     this.dBClickCounter = 0
//     this.dBTimerObj = null
//   }, 200)
// }
// if (this.dBClickCounter == 2) {
//   this.dBClickCounter = 0
//   this.showTitleEditBox = column.property
//   this.titleEditModel = column.label
this.$emit("activeColumnChanged",column.property);
// }
},headerLabelChanged:function(){this.$emit("headerLabelChanged",{label:this.titleEditModel,prop:this.showTitleEditBox}),this.$emit("activeColumnChanged",null),this.showTitleEditBox=null,this.titleEditModel=""},getFormattedCellValue:function(value,prop){if(prop.startsWith("number"))return value;if(prop.startsWith("formula")||(0,validation/* isEmpty */.xb)(field))return value||"--";var _ref2=this.pivotTable||{},dataAlias=_ref2.dataAlias,rowAlias=_ref2.rowAlias,field=dataAlias[prop]?dataAlias[prop].field:rowAlias[prop].field;if((0,validation/* isEmpty */.xb)(value))return"--";if((0,utils_field/* isIdField */.sh)(field)&&prop.startsWith("row"))return"#"+value;if((0,utils_field/* isDateTimeField */.K)(field)||(0,utils_field/* isDateField */.y2)(field)){var _this$pivotTable3,timeAggr,aggr=0;return null===(_this$pivotTable3=this.pivotTable)||void 0===_this$pivotTable3||null===(_this$pivotTable3=_this$pivotTable3.rows)||void 0===_this$pivotTable3||_this$pivotTable3.forEach((function(e){e.alias===prop&&(aggr=e.field.aggr>0?e.field.aggr:0)})),this.timeAggregation.forEach((function(obj){obj.value===aggr&&(timeAggr=obj.enumValue)})),this.formatDate(value,timeAggr)}return value},formatDate:function(date,period){var dateFormat=this.getDateFormat(period);return this.$options.filters.toDateFormat(new Date(date),dateFormat.tooltip)},checkNumberField:function(prop){var _ref3=this.pivotTable||{},dataAlias=_ref3.dataAlias,rowAlias=_ref3.rowAlias,field=dataAlias[prop]?dataAlias[prop].field:rowAlias[prop].field;return!(0,validation/* isEmpty */.xb)(field)&&((0,utils_field/* isNumberField */.Z2)(field)||(0,utils_field/* isDecimalField */.No)(field)||(0,utils_field/* isIdField */.sh)(field))},sortMethod:function(obj1,obj2,column){var at=obj1[column].value,bt=obj2[column].value,field=this.pivotTable.pivotAliasVsField[column];return!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isLookupField */.Qf)(field)&&"number"==typeof obj1[column].value&&"string"==typeof obj1[column].formattedValue&&(at=obj1[column].formattedValue,bt=obj2[column].formattedValue),"string"==typeof at?at.localeCompare(bt):null==at?1:null==bt||at>bt?-1:1},handleDrillDown:function(rows,column){var _rowAliases,_this4=this,filters={},pattern="",count=0,global_pattern="",glocalCriteria=this.pivotTable.criteria;if(this.pivotTable&&this.pivotTable.criteria){global_pattern=glocalCriteria.pattern;var result=this.criteriaToSearchQuery(glocalCriteria,count,filters),globalCriteriaQuery=result[0];global_pattern=result[1],globalCriteriaQuery&&(count=Object.keys(globalCriteriaQuery).length),globalCriteriaQuery&&(filters=(0,objectSpread2/* default */.Z)({},globalCriteriaQuery))}
// data criteria search query
var data_pattern="";if(column.property.startsWith("data")){var dataCriteria=this.getDataCriteria(column.property);if(dataCriteria){data_pattern=dataCriteria.pattern;var _result=this.criteriaToSearchQuery(dataCriteria,count,filters),dataCriteriaQuery=_result[0];data_pattern=_result[1],filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),dataCriteriaQuery),count=Object.keys(filters).length}}
// timefilter search query
var time_filter_pattern="";if(!this.diable_userfilter_drillown&&this.pivotTable.pivotDrillDownFields["timeFilter"]){var timefilterQuery={},timefilterField=this.pivotTable.pivotDrillDownFields["timeFilter"],fieldName=this.generateUniqueFieldName(filters,timefilterField.name);timefilterQuery[fieldName]={operatorId:this.pivotTable.pivotDrillDownOperators["timeFilter"],value:["".concat(this.datePickerObj.value[0]),"".concat(this.datePickerObj.value[1])],id:++count},time_filter_pattern="(".concat(count,")"),filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),timefilterQuery),count=Object.keys(filters).length}var rowVsRowAggr=null;try{var _this$pivotTable4;rowVsRowAggr=null===this||void 0===this||null===(_this$pivotTable4=this.pivotTable)||void 0===_this$pivotTable4||null===(_this$pivotTable4=_this$pivotTable4.rows)||void 0===_this$pivotTable4?void 0:_this$pivotTable4.reduce((function(map,obj){return map[obj.alias]=obj.selectedTimeAggr,map}),{})}catch(e){}
// row search query
var _this$pivotTable5,row_pattern="",rowCriteriaQuery={},rowAliases=Object.keys(rows);if((null===(_rowAliases=rowAliases)||void 0===_rowAliases?void 0:_rowAliases.length)>0){row_pattern="(";var filtersClone=(0,objectSpread2/* default */.Z)({},filters);rowAliases=rowAliases.filter((function(row){return row.startsWith("row")})),rowAliases.forEach((function(row){var facilioField=_this4.pivotTable.pivotAliasVsField[row];if((0,validation/* isEmpty */.xb)(facilioField)||"SITE_ID"!=facilioField.columnName||"BaseSpace"!=facilioField.tableName){if(_this4.isDrillDownFieldValid(row)&&rows[row].value){var row_field=_this4.pivotTable.pivotDrillDownFields[row],_fieldName=_this4.generateUniqueFieldName(filtersClone,row_field.name),rowValue=_this4.getRowValue(row,rows[row].value),dateObj={};if(("DATE_TIME"===_this4.pivotTable.pivotDrillDownFields[row].dataTypeEnum||"DATE"===_this4.pivotTable.pivotDrillDownFields[row].dataTypeEnum)&&!(0,validation/* isEmpty */.xb)(rowVsRowAggr[row])&&rowVsRowAggr[row]>0){if(dateObj=date_picker_NewDateHelper/* default */.Z.getDatePickerObjectFromDateAggregation(rowVsRowAggr[row],[rowValue]),!(0,validation/* isEmpty */.xb)(dateObj)){var _queryObj={operatorId:_this4.pivotTable.pivotDrillDownOperators[row],value:_this4.getValueArray(dateObj.value),id:++count};rowCriteriaQuery[_fieldName]=_queryObj,filtersClone[_fieldName]=_queryObj}}else{var _queryObj2={operatorId:"DATE_TIME"===_this4.pivotTable.pivotDrillDownFields[row].dataTypeEnum||"DATE"===_this4.pivotTable.pivotDrillDownFields[row].dataTypeEnum?16:_this4.pivotTable.pivotDrillDownOperators[row],value:"STRING"===row_field.dataTypeEnum?[rowValue]:_this4.getValueArray(rowValue),id:++count};rowCriteriaQuery[_fieldName]=_queryObj2,filtersClone[_fieldName]=_queryObj2}row_pattern="("==row_pattern?"".concat(row_pattern," ").concat(count):"".concat(row_pattern,"  and ").concat(count)}}else{var queryObj={operatorId:36,value:_this4.getValueArray(rows[row].value),id:++count};rowCriteriaQuery["siteId"]=queryObj,filtersClone["siteId"]=queryObj,row_pattern="("==row_pattern?"".concat(row_pattern," ").concat(count):"".concat(row_pattern,"  and ").concat(count)}})),row_pattern+=")",filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),rowCriteriaQuery)}if(pattern="(",""!==global_pattern&&(pattern="".concat(pattern," ").concat(global_pattern," and")),""!==data_pattern&&(pattern="".concat(pattern," ").concat(data_pattern," and")),""!==time_filter_pattern&&(pattern="".concat(pattern," ").concat(time_filter_pattern," and")),""!==row_pattern&&(pattern="".concat(pattern," ").concat(row_pattern,")")),filters["drillDownPattern"]=pattern,null!==this&&void 0!==this&&this.$mobile){if(null!==(_this$pivotTable5=this.pivotTable)&&void 0!==_this$pivotTable5&&_this$pivotTable5.moduleName){var drillDowndata={moduleName:this.pivotTable.moduleName,viewName:"all",viewDisplayName:"All",type:"view",query:{filter:this.$helpers.formatFilter(filters)}};this.$helpers.sendToMobile(drillDowndata)}}else this.jumpToViewList(filters,this.pivotTable.moduleName,!0)},isDrillDownFieldValid:function(alias){var field=this.pivotTable.pivotDrillDownFields[alias],facilioField=this.pivotTable.pivotAliasVsField[alias],pivotExtendedModuleIds=this.pivotTable.pivotExtendedModuleIds;return!(!facilioField||!pivotExtendedModuleIds.includes(facilioField.moduleId))||!!(field&&(0,utils_field/* isLookupField */.Qf)(field)&&facilioField.mainField)},getValueArray:function(value){return value?"object"!=(0,esm_typeof/* default */.Z)(value)?"".concat(value).split(","):value.map((function(val){return"".concat(val)})):null},getRowValue:function(alias,value){var facilioField=this.pivotTable.pivotAliasVsField[alias],lookupField=this.pivotTable.pivotDrillDownFields[alias];return(0,utils_field/* isLookupField */.Qf)(lookupField)&&!(0,utils_field/* isLookupField */.Qf)(facilioField)?this.pivotTable.pivotLookupMap[alias][value]:value},criteriaToSearchQuery:function(criteria,count,filters){var pattern,_this5=this,searchQuery={},filtersClone=(0,objectSpread2/* default */.Z)({},filters);if(null!==criteria&&void 0!==criteria&&criteria.conditions){var conditionKeys=Object.keys(criteria.conditions);pattern=criteria.pattern,conditionKeys.forEach((function(key,index){var condition=criteria.conditions[key],newFieldName=_this5.getQueryFieldName(condition.fieldName),fieldName=_this5.generateUniqueFieldName(filtersClone,newFieldName),queryObj={operatorId:condition.operatorId,value:_this5.getValueArray(condition.value),id:++count};searchQuery[fieldName]=queryObj,filtersClone[fieldName]=queryObj,pattern=pattern.replace(index+1,count)}))}return[searchQuery,pattern]},getQueryFieldName:function(fieldName){var fieldNameArray=fieldName.split(".");return fieldNameArray.length>1?fieldNameArray[fieldNameArray.length-1]:fieldName},generateUniqueFieldName:function(filters,fieldName){if(filters&&!filters[fieldName])return fieldName;var count=1;while(filters[fieldName])fieldName="".concat(fieldName,"----").concat(count);return fieldName},getDataCriteria:function(alias){var _this$pivotTable6,criteria;if(null!==(_this$pivotTable6=this.pivotTable)&&void 0!==_this$pivotTable6&&_this$pivotTable6.data)return this.pivotTable.data.forEach((function(data){data.alias==alias&&(criteria=data.criteria)})),criteria},toggleSortColumn:function(alias){if(
//if clicked col already sort col , flip asc/desc 3/2 only
this.tableSort={limit:this.tableSort.limit,order:3==this.tableSort.order?2:3,alias:alias},!this.isBuilder){var sortOrder=3==this.tableSort.order?"ascending":"descending";return this.currentSortAlias=alias,void this.$refs.pivotTable.sort(alias,sortOrder)}this.$emit("sortChanged",this.tableSort)},constructTableData:function(data){var _this$tableProps,_this$tableProps2;this.tableData=[],this.tableProps=[],this.tableHeaders=[],data=JSON.parse(JSON.stringify(data)),this.tableData=data.pivotReconstructedData,this.pivotShowRowNumber&&this.tableProps.push("number"),(_this$tableProps=this.tableProps).push.apply(_this$tableProps,(0,toConsumableArray/* default */.Z)(data.rowHeaders));var valueProps=data.values.map((function(v){return v.alias}));(_this$tableProps2=this.tableProps).push.apply(_this$tableProps2,(0,toConsumableArray/* default */.Z)(valueProps)),this.tableHeaders=this.tableProps.map((function(prop){return data.pivotReconstructedData.headers[prop]}))},getTextAlignment:function(scope){var _scope$style;return null!==scope&&void 0!==scope&&null!==(_scope$style=scope.style)&&void 0!==_scope$style&&_scope$style.textAlign?scope.style.textAlign:"left"},getVisualConfig:function(prop){if(prop.startsWith("data")){var _this$pivotTable7,data=null===(_this$pivotTable7=this.pivotTable)||void 0===_this$pivotTable7||null===(_this$pivotTable7=_this$pivotTable7.values)||void 0===_this$pivotTable7?void 0:_this$pivotTable7.find((function(data){return data.alias==prop}));if(null!==data&&void 0!==data&&data.moduleMeasure.visualConfig)return data.moduleMeasure.visualConfig}else{var _this$pivotTable8,formula=null===(_this$pivotTable8=this.pivotTable)||void 0===_this$pivotTable8||null===(_this$pivotTable8=_this$pivotTable8.values)||void 0===_this$pivotTable8?void 0:_this$pivotTable8.find((function(formula){return formula.alias==prop}));if(null!==formula&&void 0!==formula&&formula.customMeasure.visualConfig)return formula.customMeasure.visualConfig}return{}},getReferenceValue:function(prop,row){var visualConfig=this.getVisualConfig(prop),referenceAlias=visualConfig.referenceAlias;return row[referenceAlias]?row[referenceAlias].formattedValue:null},getSortIconClass:function(alias){var _this$tableSort,_this$tableSort2,_this$tableSort3,elIconclass=2===(null===(_this$tableSort=this.tableSort)||void 0===_this$tableSort?void 0:_this$tableSort.order)?["el-icon-bottom"]:["el-icon-top"];(null===(_this$tableSort2=this.tableSort)||void 0===_this$tableSort2?void 0:_this$tableSort2.alias)===alias&&(elIconclass=3===(null===(_this$tableSort3=this.tableSort)||void 0===_this$tableSort3?void 0:_this$tableSort3.order)?["el-icon-bottom"]:["el-icon-top"]);return elIconclass.push("sort-column"),this.currentSortAlias==alias&&elIconclass.push("current-sort-column"),elIconclass},getColumnWidth:function(prop){var _this$columnFormattin;return prop.startsWith("number")?50:null!==(_this$columnFormattin=this.columnFormatting[prop])&&void 0!==_this$columnFormattin&&_this$columnFormattin.autoWidth?this.getTextWidth(this.pivotTable.pivotReconstructedData.headers[prop])+25:this.columnFormatting[prop].width},dateChanged:function(dateObj){this.datePickerObj=dateObj,this.$emit("pickerChanged",dateObj)},setDatePicker:function(){!(0,validation/* isEmpty */.xb)(this.dateOperator)&&this.showTimelineFilter&&((0,validation/* isEmpty */.xb)(this.dateValue)?this.datePickerObj=date_picker_NewDateHelper/* default */.Z.getDatePickerObject(this.dateOperator):
// Sometimes dateValue is returning 'undefined' from the server for some pivot reports.
this.datePickerObj=date_picker_NewDateHelper/* default */.Z.getDatePickerObject(this.dateOperator,this.dateValue),this.pickerCompKey++)},contextMenuSelectEvent:function(_ref4){var menu=_ref4.menu,prop=_ref4.prop;this.contextMenu.showContextMenu=!1,"Pin"==menu.label?this.$emit("columnPinningEvent",{prop:prop,value:!0}):"Unpin"==menu.label?this.$emit("columnPinningEvent",{prop:prop,value:!1}):"Sort"==menu.label?this.toggleSortColumn(prop):"Rename"==menu.label?(this.showTitleEditBox=prop,this.titleEditModel=this.pivotTable.pivotReconstructedData.headers[prop]):"Auto size"==menu.label?this.textAutoSize(prop):"Text wrap"==menu.label&&menu.isActive?this.$emit("columnTextWarpEvent",{prop:prop,value:!0}):"Text wrap"!=menu.label||menu.isActive?"Column formatting"==menu.label?this.$emit("openColumnFormatDialog",prop):"Conditional formatting"==menu.label?this.$emit("openConditionalFormatDialog",prop):"Cell visualization"==menu.label&&this.$emit("openCellVisualizationDialog",prop):this.$emit("columnTextWarpEvent",{prop:prop,value:!1})},isColumnFixed:function(index,prop){var _this$columnFormattin2;
// if (index == 0 && prop) return true
// else if (this.pivotShowRowNumber && index == 1) return true
return!(null===(_this$columnFormattin2=this.columnFormatting[prop])||void 0===_this$columnFormattin2||!_this$columnFormattin2.isFixed||this.isMobileDashboard)},getContextMenu:function(prop){var contextMenu=JSON.parse(JSON.stringify(this.contextMenu)),columnFormat=JSON.parse(JSON.stringify(this.columnFormatting[prop]));columnFormat.isFixed?(contextMenu.menu[0].isActive=!0,contextMenu.menu[0].label="Unpin"):(contextMenu.menu[0].isActive=!1,contextMenu.menu[0].label="Pin"),columnFormat.textWarp?contextMenu.menu[3].isActive=!1:contextMenu.menu[3].isActive=!0;var includeCellVisual=!1;prop.startsWith("data")&&(includeCellVisual=!0);var pivotAliasVsField=this.pivotTable.pivotAliasVsField,field=pivotAliasVsField[prop];return((0,utils_field/* isDecimalField */.No)(field)||(0,utils_field/* isNumberField */.Z2)(field))&&(includeCellVisual=!0),includeCellVisual||(contextMenu.menu=contextMenu.menu.filter((function(menu){return"Cell visualization"!=menu.label}))),contextMenu},getTextWidth:function(word,fontSize){var text=document.createElement("span");document.body.appendChild(text),text.style.fontFamily="'Aktiv-Grotesk', Helvetica, Arial, sans-serif",text.style.fontSize=fontSize?fontSize+"px":"16px",text.style.height="auto",text.style.width="auto",text.style.position="absolute",text.style.whiteSpace="no-wrap",text.innerHTML=word;var width=Math.ceil(text.clientWidth);return document.body.removeChild(text),width+50},rerenderTable:function(){var _this6=this;
// force re-render table...
setTimeout((function(){_this6.showTable=!1,_this6.$nextTick((function(){return _this6.showTable=!0}))}),250)},pivotSpanMethod:function(){return{rowspan:0,colspan:this.tableHeaders.length}},textAutoSize:function(prop){var records=[];this.pivotTable.pivotReconstructedData.records.forEach((function(ob){records.push(ob[prop].formattedValue)}));var longestWord=records.reduce((function(a,b){return a&&b&&a.length>b.length?a:b})),width=this.getTextWidth(longestWord,13);width=width<500?width:500,this.$emit("columnResizeEvent",{width:width,column:prop})},calculateTableHeight:function(){var _this$config;if(this.isMobileDashboard)return null===(_this$config=this.config)||void 0===_this$config?void 0:_this$config.height;var table=this.$refs.pivotTableContainer;return this.isPivot?!1===this.isMobileDashboard?table.clientHeight-55:table.clientHeight<600?600:table.clientHeight:table.clientHeight},cellStyle:function(data){var style={},columnFormat=JSON.parse(JSON.stringify(this.columnFormatting));if("LARGE"==this.theme.density?style["padding"]="15px 10px 15px 10px":"MEDIUM"==this.theme.density?style["padding"]="10px 10px 10px 10px":style["padding"]="5px 10px 5px 10px","number"!=data.column.property){var _data$row$data$column,columnStyle=null===(_data$row$data$column=data.row[data.column.property])||void 0===_data$row$data$column?void 0:_data$row$data$column.style;style["text-align"]=columnStyle.textAlign,columnFormat[data.column.property].textWarp?(style["white-space"]="nowrap",style["overflow"]="hidden"):style["white-space"]="inherit",
// conditional format
null!==columnStyle&&void 0!==columnStyle&&columnStyle.blink&&(style["animation"]="blinkerCell 1s linear infinite !important"),null!==columnStyle&&void 0!==columnStyle&&columnStyle.bgColor&&(style["backgroundColor"]="".concat(columnStyle.bgColor," !important")),null!==columnStyle&&void 0!==columnStyle&&columnStyle.textColor&&(style["color"]="".concat(columnStyle.textColor," !important"))}else style["text-align"]="left";return style},getTextBackground:function(cellStyleObj,prop){var _this7=this,style={};null!==cellStyleObj&&void 0!==cellStyleObj&&cellStyleObj.textBgColor&&(style["backgroundColor"]=cellStyleObj.textBgColor,style["padding"]="0px 10px",style["border-radius"]="5px"),null!==cellStyleObj&&void 0!==cellStyleObj&&cellStyleObj.textStyle&&cellStyleObj.textStyle.forEach((function(textStyle){var fontStyle=_this7.getFontStyle(textStyle);style=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},style),fontStyle)}));var visualConfig=this.getVisualConfig(prop);return"data-bar"!=(null===visualConfig||void 0===visualConfig?void 0:visualConfig.visualType)&&(style["width"]="fit-content"),style},getFontStyle:function(value){return"normal"==value?{}:"italic"==value?{"font-style":"italic"}:"bold"==value?{"font-weight":"bold"}:"strike-through"==value?{"text-decoration":"line-through"}:{}},columnResizeEvent:function(newWidth,oldWidth,column){var label=document.querySelectorAll("#column-".concat(column.property)),pin=document.querySelectorAll("#pin-".concat(column.property)),sort=document.querySelectorAll("#sort-".concat(column.property)),text=label.textContent,textWidth=this.getTextWidth(text,11);newWidth<textWidth+30?label.forEach((function(l){return l.style.display="none"})):newWidth>textWidth-50&&label.forEach((function(l){return l.style.display="inline"})),newWidth<84?sort.forEach((function(s){return s.style.display="none"})):sort.forEach((function(s){return s.style.display="inline"})),newWidth<50?pin.forEach((function(p){return p.style.display="none"})):pin.forEach((function(p){return p.style.display="inline"})),this.$emit("columnResizeEvent",{width:newWidth,column:column.property})},headerStyle:function(){var style={"text-align":"left","white-space":"nowrap"};return style}}},widgets_PivotTablevue_type_script_lang_js=PivotTablevue_type_script_lang_js,PivotTable_component=(0,componentNormalizer/* default */.Z)(widgets_PivotTablevue_type_script_lang_js,PivotTablevue_type_template_id_b7c08208_scoped_true_render,PivotTablevue_type_template_id_b7c08208_scoped_true_staticRenderFns,!1,null,"b7c08208",null)
/* harmony default export */,PivotTable=PivotTable_component.exports,PivotTableWrappervue_type_script_lang_js={components:{PivotTable:PivotTable},mixins:[BaseWidgetMixin/* default */.Z],data:function(){return{exportDownloadUrl:"",loading:!0,initialLoading:!0,theme:null,columnFormatting:null,sortBy:null,pivotTable:{},dateOperator:null,dateValue:null,showTimelineFilter:!1,startTime:null,endTime:null,fetchPivotDataError:!1,dbFilterJson:{},dbTimelineFilter:{},dateLabel:"",diable_userfilter_drillown:!1}},props:{printMode:{type:Boolean,default:!1},dashbord:{},item:{type:Object,required:!0},widgetDatePicker:{},isMobileDashboard:{},componentVisibleInViewPort:{type:Boolean,default:!0},updateWidget:{type:Function}},created:function(){this.initWidget(this.widgetConfig)},mounted:function(){this.init()},computed:{allFilters:function(){return{dbFilterJson:this.dbFilterJson,dbTimelineFilter:this.dbTimelineFilter}},id:function(){var id=this.item.id;return id},widgetConfig:function(){var _this=this,_ref=null!==this&&void 0!==this?this:{},id=_ref.id,getGoToReport=function(){return _this.isPortalApp?[]:[{label:"Go to Report",action:_this.goToReport,icon:"el-icon-top-right"}]},getEditReport=function(){return _this.isPortalApp?[]:[{label:"Edit Report",action:_this.editReport,icon:"el-icon-edit"}]};return{id:id,minW:25,maxW:96,minH:10,maxH:50,showHeader:!0,showExpand:!0,noResize:!1,showDropDown:!0,editMenu:[],borderAroundWidget:!0,showDatePickerInHeader:!0,alwaysShowWidgetControls:!0,viewMenu:[].concat((0,toConsumableArray/* default */.Z)(getGoToReport()),(0,toConsumableArray/* default */.Z)(getEditReport()),[{label:"Export as CSV",action:function(){return _this.exportReport("CSV")},icon:"el-icon-download"},{label:"Export as Excel",action:function(){return _this.exportReport("Excel")},icon:"el-icon-download"}])}},widget:function(){var widget=this.item.widget;return widget},reportId:function(){var newReportId=this.widget.dataOptions.newReportId;return newReportId},config:function(){var widget=this.item.widget;return{widget:widget}}},watch:{allFilters:function(newVal,oldVal){if(!(0,lodash.isEqual)(newVal,oldVal)){var _ref2=null!==newVal&&void 0!==newVal?newVal:{},dbTimelineFilter=_ref2.dbTimelineFilter;if(!(0,validation/* isEmpty */.xb)(dbTimelineFilter)){var startTime=dbTimelineFilter.startTime,endTime=dbTimelineFilter.endTime,dateOperator=dbTimelineFilter.dateOperator,dateValueString=dbTimelineFilter.dateValueString;this.startTime=startTime,this.endTime=endTime,this.dateOperator=dateOperator,this.dateValue=dateValueString}this.init()}},componentVisibleInViewPort:function(_componentVisibleInViewPort){_componentVisibleInViewPort&&this.init()}},methods:{updateItem:function(report){
// This is lame, but it workings.
var item=(0,lodash.cloneDeep)(this.item);item.widget.dataOptions.newReport=report,this.updateWidget(item)},expandReport:function(){var _this$dbTimelineFilte,params={type:"pivot"};params["dbFilterJson"]=this.dbFilterJson,params["dbTimelineFilter"]={startTime:this.startTime,endTime:this.endTime,operatorId:this.dateOperator,dateLabel:this.dateLabel,dateValueString:"".concat(this.startTime,",").concat(this.endTime),dateField:null===(_this$dbTimelineFilte=this.dbTimelineFilter)||void 0===_this$dbTimelineFilte?void 0:_this$dbTimelineFilte.dateField},params["url"]="",params["alt"]="",params["dashboardId"]="",params["reportId"]=this.widget.dataOptions.newReportId,params["newReport"]=this.widget.dataOptions.newReportId?this.widget.dataOptions.newReport:null,params["target"]="",this.$popupView.openPopup(params)},goToReport:function(){var _this$widget$dataOpti=this.widget.dataOptions,reportType=_this$widget$dataOpti.reportType,newReportId=_this$widget$dataOpti.newReportId;if(5===reportType){
// `reportType` = 5 is pivot report.
var path="/app/em/pivot/view/".concat(newReportId);if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab,_ref3=null!==(_findRouteForTab=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_VIEW))&&void 0!==_findRouteForTab?_findRouteForTab:{},name=_ref3.name;if(path=this.$router.resolve({name:name,query:{reportId:newReportId}}).href,(0,validation/* isEmpty */.xb)(name))return void this.$dialog.confirm({title:this.$t("common._common.tab_not_configured"),message:this.$t("common._common.tab_not_configured_message"),rbLabel:this.$t("common._common.ok"),lbHide:!0})}this.$router.push({path:path})}},editReport:function(){var newReportId=this.widget.dataOptions.newReportId,path="/app/em/pivotbuilder/new?reportId=".concat(newReportId);if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab2=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_FORM),name=_findRouteForTab2.name;path=this.$router.resolve({name:name,query:{reportId:newReportId}}).href}this.$router.push({path:path})},exportReport:function(){var _this2=this,fileType=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Excel",fileTypeCode=Number(Object.keys(this.$constants.FILE_FORMAT).find((function(key){return fileType==_this2.$constants.FILE_FORMAT[key]}))),_this$pivotTable$repo=this.pivotTable.report.params,params=void 0===_this$pivotTable$repo?{}:_this$pivotTable$repo,reportId=this.reportId;this.$message({message:"Exporting as "+fileType,showClose:!0,duration:0}),params["reportId"]=reportId,params["fileFormat"]=fileTypeCode;var startTime=this.startTime,endTime=this.endTime,dbTimelineFilter=this.dbTimelineFilter,dbFilterJson=this.dbFilterJson;if((0,validation/* isEmpty */.xb)(startTime)||(0,validation/* isEmpty */.xb)(endTime)){if(!(0,validation/* isEmpty */.xb)(dbTimelineFilter)){var _startTime=dbTimelineFilter.startTime,_endTime=dbTimelineFilter.endTime;params["startTime"]=_startTime,params["endTime"]=_endTime}}else params["startTime"]=startTime,params["endTime"]=endTime;(0,validation/* isEmpty */.xb)(dbFilterJson)||(params["filters"]=JSON.stringify(dbFilterJson)),api/* API */.bl.get("/v2/report/exportPivotReport",params).then((function(_ref4){var data=_ref4.data,error=_ref4.error;element_ui_common.Message.closeAll(),error||(_this2.exportDownloadUrl=data.fileUrl)}))},init:function(){this.componentVisibleInViewPort&&this.executeReport()},sortChanged:function(newSortBy){this.sortBy=newSortBy,this.executeReport()},pickerChanged:function(dateObj){this.startTime=dateObj.value[0],this.endTime=dateObj.value[1],this.dateValue="".concat(this.startTime,", ").concat(this.endTime),this.dateOperator=dateObj.operatorId,this.dateLabel=dateObj.label,this.$emit("timelineFilterChange",dateObj),this.executeReport()},buildPivotParams:function(){var params={};return this.startTime>0&&this.endTime>0&&(params["startTime"]=this.startTime,params["endTime"]=this.endTime),this.reportId&&(params["reportId"]=this.reportId),(0,validation/* isEmpty */.xb)(this.dbFilterJson)||(params["filters"]=JSON.stringify(this.dbFilterJson)),this.sortBy&&(params["sortBy"]=this.sortBy),params},executeReport:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,self;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this3.loading=!0,params=_this3.buildPivotParams(),self=_this3,_context.next=5,api/* API */.bl.cancel({uniqueKey:_this3.reportId+""});case 5:api/* API */.bl.get("v2/report/executePivotReport",params,{force:!0,uniqueKey:_this3.reportId+""}).then((function(resp){var data=resp.data,error=resp.error;if(error){if(error.isCancelled)return;return self.fetchPivotDataError=!0,void(self.loading=!1)}self.theme||(self.theme=data.pivotTemplateJSON.theme),self.columnFormatting||(self.columnFormatting=data.pivotTemplateJSON.columnFormatting),"diable_userfilter_drillown"in data.pivotTemplateJSON&&(_this3.diable_userfilter_drillown=data.pivotTemplateJSON.diable_userfilter_drillown),self.sortBy||(self.sortBy=data.sorting),self.showTimelineFilter=data.showTimelineFilter,(0,validation/* isEmpty */.xb)(self.dbTimelineFilter)&&!self.dateOperator&&(
// Global timeline filter absent and local timeline filter not set.
self.dateOperator=data.dateOperator,self.dateValue=data.dateOperatorValue),self.pivotTable=data,self.loading=!1,self.$emit("pivotReportLoaded",data.report),//reportObj
self.$emit("reportLoaded",data.report,data),_this3.updateItem(data.report)}));case 6:case"end":return _context.stop()}}),_callee)})))()}}},widgets_PivotTableWrappervue_type_script_lang_js=PivotTableWrappervue_type_script_lang_js,PivotTableWrapper_component=(0,componentNormalizer/* default */.Z)(widgets_PivotTableWrappervue_type_script_lang_js,PivotTableWrappervue_type_template_id_7831f194_scoped_true_render,PivotTableWrappervue_type_template_id_7831f194_scoped_true_staticRenderFns,!1,null,"7831f194",null)
/* harmony default export */,PivotTableWrapper=PivotTableWrapper_component.exports,FGraphicsWidgetvue_type_template_id_0390e85b_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"dragabale-card height100 graphics-widget",class:{mobileoverlay:_vm.$mobile},attrs:{id:"graphics-widget"}},[_vm.config.widget.graphicsId||_vm.config.widget.dataOptions.graphicsId?_c("f-graphics-builder",{ref:"graphicsWidget",attrs:{showFilters:_vm.showFilters,zoomLevel:_vm.zoomLevel,defaultAsset:_vm.defaultAsset,graphicsContext:{id:_vm.config.widget.graphicsId?_vm.config.widget.graphicsId:_vm.config.widget.dataOptions.graphicsId},readonly:"true",drilldown:!_vm.$mobile,width:_vm.config.width,height:_vm.config.height}}):_vm._e()],1)},FGraphicsWidgetvue_type_template_id_0390e85b_staticRenderFns=[],FGraphicsWidgetvue_type_script_lang_js={props:{item:{type:Object,required:!0}},mixins:[JumpToHelper/* default */.Z,BaseWidgetMixin/* default */.Z],components:{FGraphicsBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(99751),__webpack_require__.e(59850),__webpack_require__.e(11801),__webpack_require__.e(64687),__webpack_require__.e(98162)]).then(__webpack_require__.bind(__webpack_require__,264687))}},data:function(){return{showGraphicOptions:!1}},computed:{id:function(){var id=this.item.id;return id},widgetConfig:function(){var id=this.id,self=this;return{id:id,minW:25,maxW:96,minH:10,maxH:50,showHeader:!0,showExpand:!1,noResize:!1,showDropDown:!0,editMenu:[{label:"Graphics Options",action:function(){self.showGraphicOptions=!0}}],borderAroundWidget:!0,viewMenu:[{label:"Go to Graphics",action:this.gotoGraphics},{label:"Explore in Analytics",action:this.exploreInAnalytics},{label:"Export as Image",action:this.exportAsImage}]}},widget:function(){var widget=this.item.widget;return widget},config:function(){var widget=this.widget;return{widget:widget}},mode:function(){return!(!this.$route.query||!this.$route.query.create||"edit"!==this.$route.query.create)||!(!this.$route.query||!this.$route.query.create||"new"!==this.$route.query.create)},showFilters:function(){if(this.config.widget.dataOptions&&this.config.widget.dataOptions.graphicsOptions){var obj=JSON.parse(this.config.widget.dataOptions.graphicsOptions);if(obj.showFilter)return!0}return!1},zoomLevel:function(){if(this.config.widget.dataOptions&&this.config.widget.dataOptions.graphicsOptions){var obj=JSON.parse(this.config.widget.dataOptions.graphicsOptions);if(obj.zoomLevel&&obj.zoomLevel>.1)return obj.zoomLevel}return null},defaultAsset:function(){if(this.showFilters&&this.$route.query&&this.$route.query.assetId)return parseInt(this.$route.query.assetId);if(this.config.widget.dataOptions&&this.config.widget.dataOptions.graphicsOptions){var obj=JSON.parse(this.config.widget.dataOptions.graphicsOptions);if(obj.defaultAsset)return obj.defaultAsset}return null}},created:function(){this.initWidget(this.widgetConfig)},mounted:function(){},methods:{exploreInAnalytics:function(){},gotoGraphics:function(){},openInAnalytics:function(){this.$refs["graphicsWidget"]&&this.$refs["graphicsWidget"].openInAnalytics()},exportAsImage:function(){this.$refs["graphicsWidget"]&&this.$refs["graphicsWidget"].exportAsImage()}}},widgets_FGraphicsWidgetvue_type_script_lang_js=FGraphicsWidgetvue_type_script_lang_js,FGraphicsWidget_component=(0,componentNormalizer/* default */.Z)(widgets_FGraphicsWidgetvue_type_script_lang_js,FGraphicsWidgetvue_type_template_id_0390e85b_render,FGraphicsWidgetvue_type_template_id_0390e85b_staticRenderFns,!1,null,null,null)
/* harmony default export */,FGraphicsWidget=FGraphicsWidget_component.exports,WidgetWrappervue_type_script_lang_js={components:{NewDatePicker:NewDatePicker/* default */.Z,FListWidget:FListWidget,ModuleReportWidget:ModuleReportWidget,CardWidget:CardWidget,ImageWidget:ImageWidget,TextWidget:TextWidget,WidgetHelpTextConfig:WidgetHelpTextConfig,DropDown:DropDown,AnalyticalReportWidget:AnalyticalReportWidget,PivotTableWrapper:PivotTableWrapper,FGraphicsWidget:FGraphicsWidget,KpiCard:KpiMutiLayout},created:function(){var _this$widget$header$t,_this$widget;this.printMode&&(this.componentVisibleInViewPort=!0),this.title=cloneDeep_default()(null!==(_this$widget$header$t=null===(_this$widget=this.widget)||void 0===_this$widget||null===(_this$widget=_this$widget.header)||void 0===_this$widget?void 0:_this$widget.title)&&void 0!==_this$widget$header$t?_this$widget$header$t:""),0==this.title.length&&"edit"==this.viewOrEdit&&(this.titleInEditMode=!0)},mounted:function(){this.calculateWidgetBodyDimension()},methods:{calculateWidgetBodyDimension:function(){var self=this;this.$nextTick((function(){self.$nextTick((function(){self.$nextTick((function(){
// Note: $el will only be available in mount life cycle hook. Before $el will return
var _self$$el$getElements=self.$el.getElementsByClassName("widget-body"),_self$$el$getElements2=(0,slicedToArray/* default */.Z)(_self$$el$getElements,1),widgetBody=_self$$el$getElements2[0],_ref=null!==widgetBody&&void 0!==widgetBody?widgetBody:{},offsetWidth=_ref.offsetWidth,offsetHeight=_ref.offsetHeight;self.widgetBodyWidth=offsetWidth,self.widgetBodyHeight=offsetHeight}))}))}))},visibilityChanged:function(visibility){var isLazyDashboard=this.isLazyDashboard,componentVisibleInViewPort=this.componentVisibleInViewPort;0==componentVisibleInViewPort&&(isLazyDashboard?visibility&&(this.componentVisibleInViewPort=!0):this.componentVisibleInViewPort=!0)},dateChanged:function(date){},editTitle:function(){"edit"==this.viewOrEdit&&(this.titleInEditMode=!0)},expandReport:function(){this.$refs["component"].expandReport()},updateTitle:function(){var item=this.item,title=this.title,updateWidget=this.updateWidget,updatedWidget=cloneDeep_default()(item);updatedWidget.widget.header.title=title,updateWidget(updatedWidget),title.length>0&&(this.titleInEditMode=!1)},showHelpTextModal:function(){this.helpTextDialog=!0},removeWidget:function(){this.$emit("removeWidget")},updateHelpText:function(_ref2){var helpText=_ref2.helpText,showHelpText=_ref2.widgetSettings.showHelpText,item=this.item,updateWidget=this.updateWidget,updatedWidget=cloneDeep_default()(item),widget=updatedWidget.widget;widget["widgetSettings"].showHelpText=showHelpText,widget["helpText"]=helpText,updateWidget(updatedWidget),this.helpTextDialog=!1}},props:{printMode:{type:Boolean,default:!1},updateWidget:{type:Function},parentId:{type:String,default:"master"},groupList:{type:Array,default:function(){return[]}},loadImmediately:{type:Boolean,default:!1,required:!0},hideTimelineFilterInsideWidget:{type:Boolean,required:!0,default:!1},viewOrEdit:{type:String,required:!0},widgetConfig:{type:Object,default:function(){},required:!0},item:{type:Object,required:!0},isLazyDashboard:{type:Boolean,required:!0},dbFilterJson:{type:Object,default:function(){}}},watch:{widgetDimension:function(){this.calculateWidgetBodyDimension()}},computed:{alwaysShowWidgetControls:function(){var _this$widgetConfig$al,_this$widgetConfig;return null!==(_this$widgetConfig$al=null===this||void 0===this||null===(_this$widgetConfig=this.widgetConfig)||void 0===_this$widgetConfig?void 0:_this$widgetConfig.alwaysShowWidgetControls)&&void 0!==_this$widgetConfig$al&&_this$widgetConfig$al},filteredGroupList:function(){
// If the widget is in master grid then don't show master grid in
// move to drop down. If widget is in section -1 then don't show -1
// in the drop down and so on.
var groupList=this.groupList,parentId=this.parentId,filteredGroupList=groupList.filter((function(_ref3){var groupId=_ref3.groupId;return parentId!=groupId}));return filteredGroupList},commonEditMenu:function(){var commonEditMenu=[{label:"Edit Help Text",action:this.showHelpTextModal,icon:"el-icon-edit"},{label:"Remove",action:this.removeWidget,icon:"el-icon-delete"}],filteredGroupList=this.filteredGroupList;return filteredGroupList.length>0&&
// Don't show `Move to section` if no group is present in the dashboard.
commonEditMenu.push({label:"Move to Group",action:function(){},nested:this.filteredGroupList,icon:"el-icon-rank"}),commonEditMenu},commonViewMenu:function(){return[]},widgetDimension:function(){var _this$item=this.item,w=_this$item.w,h=_this$item.h;return{w:w,h:h}},widgetBodyDimension:function(){var widgetBodyWidth=this.widgetBodyWidth,widgetBodyHeight=this.widgetBodyHeight;return{widgetBodyWidth:null!==widgetBodyWidth&&void 0!==widgetBodyWidth?widgetBodyWidth:0,widgetBodyHeight:null!==widgetBodyHeight&&void 0!==widgetBodyHeight?widgetBodyHeight:0}},showDatePickerInHeader:function(){var _this$widgetConfig$sh,_this$widgetConfig2;return null!==(_this$widgetConfig$sh=null===this||void 0===this||null===(_this$widgetConfig2=this.widgetConfig)||void 0===_this$widgetConfig2?void 0:_this$widgetConfig2.showDatePickerInHeader)&&void 0!==_this$widgetConfig$sh&&_this$widgetConfig$sh},showDropDown:function(){var _this$widgetConfig3,length=this.options.length;return(null===this||void 0===this||null===(_this$widgetConfig3=this.widgetConfig)||void 0===_this$widgetConfig3?void 0:_this$widgetConfig3.showDropDown)&&length>0},widget:function(){var _this$item$widget,_this$item2;return null!==(_this$item$widget=null===this||void 0===this||null===(_this$item2=this.item)||void 0===_this$item2?void 0:_this$item2.widget)&&void 0!==_this$item$widget?_this$item$widget:[]},id:function(){return this.item.id},showHeader:function(){var _this$widgetConfig$sh2,_this$widgetConfig4;return null!==(_this$widgetConfig$sh2=null===this||void 0===this||null===(_this$widgetConfig4=this.widgetConfig)||void 0===_this$widgetConfig4?void 0:_this$widgetConfig4.showHeader)&&void 0!==_this$widgetConfig$sh2&&_this$widgetConfig$sh2},showHelpText:function(){var _this$widget$widgetSe,_this$widget2;return null!==(_this$widget$widgetSe=null===this||void 0===this||null===(_this$widget2=this.widget)||void 0===_this$widget2||null===(_this$widget2=_this$widget2.widgetSettings)||void 0===_this$widget2?void 0:_this$widget2.showHelpText)&&void 0!==_this$widget$widgetSe&&_this$widget$widgetSe},showExpand:function(){var _this$widgetConfig$sh3,_this$widgetConfig5;return null!==(_this$widgetConfig$sh3=null===this||void 0===this||null===(_this$widgetConfig5=this.widgetConfig)||void 0===_this$widgetConfig5?void 0:_this$widgetConfig5.showExpand)&&void 0!==_this$widgetConfig$sh3&&_this$widgetConfig$sh3},widgetType:function(){var _this$widget3,_ref4=null!==(_this$widget3=this.widget)&&void 0!==_this$widget3?_this$widget3:{},widgetType=_ref4.type,_ref4$dataOptions=_ref4.dataOptions,newReportId=_ref4$dataOptions.newReportId,reportType=_ref4$dataOptions.reportType,staticKey=_ref4$dataOptions.staticKey;switch(widgetType){case"chart":return(0,validation/* isEmpty */.xb)(newReportId)?"ChartWidget":2==reportType?"ModuleReportWidget":5==reportType?"PivotTableWrapper":"AnalyticalReportWidget";case"card":return"CardWidget";case"static":
// Image widget and Text widget.
if("textcard"==staticKey)return"TextWidget";if("imagecard"==staticKey)return"ImageWidget";if("kpiCard"==staticKey)return"KpiCard";break;case"view":return"FListWidget";case"graphics":return"FGraphicsWidget"}return"";// Default.
},borderAroundWidget:function(){var _this$widgetConfig$bo,_this$widgetConfig6;return null!==(_this$widgetConfig$bo=null===this||void 0===this||null===(_this$widgetConfig6=this.widgetConfig)||void 0===_this$widgetConfig6?void 0:_this$widgetConfig6.borderAroundWidget)&&void 0!==_this$widgetConfig$bo&&_this$widgetConfig$bo},options:function(){var _widgetConfig$configF,viewOrEdit=this.viewOrEdit,widgetConfig=this.widgetConfig,commonEditMenu=this.commonEditMenu,commonViewMenu=this.commonViewMenu;return"edit"==viewOrEdit?(0,validation/* isEmpty */.xb)(null===widgetConfig||void 0===widgetConfig?void 0:widgetConfig.editMenu)?(0,toConsumableArray/* default */.Z)(commonEditMenu):[].concat((0,toConsumableArray/* default */.Z)(widgetConfig.editMenu),(0,toConsumableArray/* default */.Z)(commonEditMenu)):"view"==viewOrEdit?(0,validation/* isEmpty */.xb)(null===widgetConfig||void 0===widgetConfig?void 0:widgetConfig.viewMenu)?(0,toConsumableArray/* default */.Z)(commonViewMenu):[].concat((0,toConsumableArray/* default */.Z)(widgetConfig.viewMenu),(0,toConsumableArray/* default */.Z)(commonViewMenu)):"configFilter"==viewOrEdit&&null!==(_widgetConfig$configF=null===widgetConfig||void 0===widgetConfig?void 0:widgetConfig.configFilter)&&void 0!==_widgetConfig$configF?_widgetConfig$configF:[]}},data:function(){return{isDropDownExpanded:!1,widgetBodyWidth:0,
// Initial width.
widgetBodyHeight:0,
// Initial height.
componentVisibleInViewPort:!1,isInfoIconPopOverOpen:!1,widgetDateObj:null,titleInEditMode:!1,title:null,showOptionsPopover:!1,helpTextDialog:!1}}},widgets_WidgetWrappervue_type_script_lang_js=WidgetWrappervue_type_script_lang_js,WidgetWrapper_component=(0,componentNormalizer/* default */.Z)(widgets_WidgetWrappervue_type_script_lang_js,render,staticRenderFns,!1,null,"64058f38",null)
/* harmony default export */,WidgetWrapper=WidgetWrapper_component.exports},
/***/250620:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"03daa5e7a5fe4964f41cd5e0c6dbcdb3.svg";
/***/},
/***/127253:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"60c096d8ebf416eed7d54da8b3dff7c4.svg";
/***/},
/***/952806:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"633c659181767fea5513dcb824174c5a.svg";
/***/},
/***/69627:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f359271401a234d09f973f08a9811bd5.svg";
/***/},
/***/211619:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"13aed16dc94c95542fb7405aef664e59.svg";
/***/},
/***/227288:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"ff7ae0479aeb3df4c83d45ae03228267.svg";
/***/},
/***/321273:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"80f960955764ed36785c8da08ad4e079.svg";
/***/},
/***/22023:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"52074a6dd17efe6ae8be7c2d7c779441.svg";
/***/},
/***/709574:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"264b211a14ebcd2aff27a59cf933e0c8.svg";
/***/},
/***/650566:
/***/function(module,__unused_webpack_exports,__webpack_require__){var map={"./reading-card-graph.jpg":511533,"./reading-card1.jpg":245250,"./reading-card2.jpg":868962,"./reading-card4.jpg":954208,"./reading-card5.jpg":435740,"./target-meter-6.jpg":792803,"./target-meter1.jpg":639598,"./target-meter2.jpg":40510,"./target-meter3.jpg":795045,"./target-meter4.jpg":957135,"./target-meter5.jpg":3871,"./target-meter6.jpg":661998,"./target-meter7.jpg":835400};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=650566},
/***/4307:
/***/function(module,__unused_webpack_exports,__webpack_require__){var map={"./blue.svg":127253,"./dark-green.svg":952806,"./light-green.svg":69627,"./orange.svg":211619,"./purple.svg":227288,"./red.svg":321273,"./teal.svg":22023,"./voilet.svg":709574};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=4307},
/***/511533:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card-graph.78b5c414.jpg"},
/***/245250:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card1.2c81304e.jpg"},
/***/868962:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card2.1b3e95c0.jpg"},
/***/954208:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card4.a00183bd.jpg"},
/***/435740:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card5.6f1d39bd.jpg"},
/***/792803:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter-6.d7dfff56.jpg"},
/***/639598:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter1.3f8d830b.jpg"},
/***/40510:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter2.a1a248b0.jpg"},
/***/795045:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter3.792dde74.jpg"},
/***/957135:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter4.eaab9195.jpg"},
/***/3871:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter5.7e6b63d6.jpg"},
/***/661998:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter6.5f5e7a7f.jpg"},
/***/835400:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter7.d4b89373.jpg"},
/***/216339:
/***/function(){
/* (ignored) */
/***/},
/***/292325:
/***/function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */CA:function(){/* binding */return __vue_component__$4},
/* harmony export */DY:function(){/* binding */return sort},
/* harmony export */Hn:function(){/* binding */return __vue_component__$3},
/* harmony export */NS:function(){/* binding */return __vue_component__$2},
/* harmony export */P8:function(){/* binding */return assign_uid}
/* harmony export */});
/* unused harmony exports CardComponent, SectionContainer, findIndicesUsingId */
/* harmony import */var gridstack_dist_gridstack_h5_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(334426),vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(720144),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(150361);
/* harmony import */const findIndicesUsingId=(id,layout)=>{
// The way this function is used needs to be rewritten to improve dashboard's performance...
let parentIndex=-1,childIndex=-1,widget=null;if(layout&&id){if(layout&&layout.length>0)outerloop:for(let i=0;i<layout.length;i++){const w=layout[i];if(w.id==id){parentIndex=i,childIndex=-1,widget=layout[parentIndex];break outerloop;// Break out of the outer loop.
}if(w.children){const children=layout[i].children;for(let ci=0;ci<children.length;ci++){const cw=children[ci];if(cw.id==id){parentIndex=i,childIndex=ci,widget=layout[parentIndex].children[childIndex];break outerloop;// Break out of the outer loop.
}}}}return{idx:parentIndex,cidx:childIndex,w:widget}}return{idx:-1,cidx:-1,w:null}},sort=items=>(items=items.map((i=>(i.children&&(i.children=i.children.sort(((a,b)=>a.y<b.y))),i))),items=items.sort(((a,b)=>a.y<b.y)),items),assign_uid=items=>{let itemsCopy=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__(items),uid=-1;const get_uid=()=>String(uid--);return itemsCopy=itemsCopy.map((i=>(i.id=get_uid(),i.children&&(i.children=i.children.map((i=>(i.id=get_uid(),i)))),i))),itemsCopy};
var script$4={props:{column:{type:Number,default:12},rowHeight:{type:String,default:"auto"},maxRows:{type:Number,default:0},minRows:{type:Number,default:0},margin:{default:function(){return 10}},resizable:{default:function(){return{autoHide:!0,handles:"se"}}},layout:{type:Array,required:!0},static:{type:Boolean,default:!1},alwaysShowResizeHandle:{type:Boolean,default:!1},float:{type:Boolean,default:!1},disableOneColumnMode:{type:Boolean,default:!1}},save(){},data(){return{loaded:!1,masterGridOption:{column:this.column,cellHeight:this.rowHeight,margin:this.margin,maxRow:this.maxRows,minRow:this.minRows,resizable:this.resizable,staticGrid:this.static,float:!0,alwaysShowResizeHandle:this.alwaysShowResizeHandle,disableOneColumnMode:this.disableOneColumnMode,acceptWidgets:!0},eventBus:new vue__WEBPACK_IMPORTED_MODULE_2__["default"],layoutRef:[],grid:null,removedItem:null,itemAdded:!1,itemsChanged:!1}},provide(){return{masterLayout:this,masterGridOption:this.masterGridOption,eventBus:this.eventBus}},created(){const self=this;this.$nextTick((()=>{self.grid=gridstack_dist_gridstack_h5_js__WEBPACK_IMPORTED_MODULE_0__.init(self.masterGridOption),self.subscribeToMasterGridEvents(),this.$nextTick((()=>{this.$nextTick((()=>{self.grid.float(self.float)}))}))}))},mounted(){this.layoutRef=this.layout},methods:{updateItem(id,opts){const el=this.$el.querySelector(`[gs-id='${id}']`);this.grid.update(el,opts)},removeItem(id){
// This is lame, will need refactoring.
const index=this.grid.engine.nodes.findIndex((n=>n.id==id));index>=0?this.grid.removeWidget(this.grid.engine.nodes[index].el,!1,!0):
// This items belongs in a subgrid.
this.eventBus.$emit("itemRemoved",id)},subscribeToMasterGridEvents(){const self=this;this.grid.on("removed",((event,items)=>{items.forEach((i=>{const{idx:idx,cidx:cidx,w:w}=findIndicesUsingId(i.id,self.layout);cidx>=0?(
// eslint-disable-next-line vue/no-mutating-props
self.layout[idx].children.splice(cidx,1),self.removedItem=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__(w)):idx>=0&&(
// Element having cidx (childIndx) doesn't belong to the masterGrid.
self.removedItem=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__(w),
// eslint-disable-next-line vue/no-mutating-props
self.layout.splice(idx,1))})),self.emitLayout()})),this.grid.on("change",((event,items)=>{items&&(1!=self.itemsChanged||0!=self.itemAdded?(items.forEach((i=>{const{w:w}=findIndicesUsingId(i.id,self.layout),pos={x:i.x,y:i.y,w:i.w,h:i.h};Object.assign(w,pos)})),self.emitLayout()):self.itemsChanged=!1)})),this.grid.on("added",((event,items)=>{if(1==self.itemAdded)return self.itemAdded=!1,void(self.itemsChanged=!0);items.forEach((i=>{const{w:w}=findIndicesUsingId(i.id,self.layout),pos={id:i.id,x:i.x,y:i.y,w:i.w,h:i.h};self.removedItem?.id==i.id&&null==w?(
// Widget has been moved from a subgrid into the masterGrid.
Object.assign(self.removedItem,pos),
// eslint-disable-next-line vue/no-mutating-props
self.layout.push(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__(self.removedItem)),self.removedItem=null,self.itemAdded=!0,self.itemsChanged=!1):
// Use cases:
// 1) Widget has be relocated within the masterGrid.
Object.assign(w,pos)})),self.emitLayout()}))},emitLayout(sectionId=null){this.$emit("update:layout",this.layout),sectionId&&this.$emit("sectionHeightChanged",sectionId)}}};function normalizeComponent(template,style,script,scopeId,isFunctionalTemplate,moduleIdentifier/* server only */,shadowMode,createInjector,createInjectorSSR,createInjectorShadow){"boolean"!==typeof shadowMode&&(createInjectorSSR=createInjector,createInjector=shadowMode,shadowMode=!1);
// Vue.extend constructor export interop.
const options="function"===typeof script?script.options:script;
// render functions
let hook;if(template&&template.render&&(options.render=template.render,options.staticRenderFns=template.staticRenderFns,options._compiled=!0,
// functional template
isFunctionalTemplate&&(options.functional=!0)),
// scopedId
scopeId&&(options._scopeId=scopeId),moduleIdentifier?(
// server build
hook=function(context){
// 2.3 injection
context=context||
// cached call
this.$vnode&&this.$vnode.ssrContext||
// stateful
this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,// functional
// 2.2 with runInNewContext: true
context||"undefined"===typeof __VUE_SSR_CONTEXT__||(context=__VUE_SSR_CONTEXT__),
// inject component styles
style&&style.call(this,createInjectorSSR(context)),
// register component module identifier for async chunk inference
context&&context._registeredComponents&&context._registeredComponents.add(moduleIdentifier)},
// used by ssr in case component is cached and beforeCreate
// never gets called
options._ssrRegister=hook):style&&(hook=shadowMode?function(context){style.call(this,createInjectorShadow(context,this.$root.$options.shadowRoot))}:function(context){style.call(this,createInjector(context))}),hook)if(options.functional){
// register for functional component in vue file
const originalRender=options.render;options.render=function(h,context){return hook.call(context),originalRender(h,context)}}else{
// inject component registration as beforeCreate hook
const existing=options.beforeCreate;options.beforeCreate=existing?[].concat(existing,hook):[hook]}return script}
/* script */const __vue_script__$4=script$4;
/* template */var __vue_render__$4=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"grid-stack"},[_vm._t("default")],2)},__vue_staticRenderFns__$4=[];
/* style */
const __vue_inject_styles__$4=void 0,__vue_scope_id__$4=void 0,__vue_module_identifier__$4=void 0,__vue_is_functional_template__$4=!1,__vue_component__$4=normalizeComponent({render:__vue_render__$4,staticRenderFns:__vue_staticRenderFns__$4},__vue_inject_styles__$4,__vue_script__$4,__vue_scope_id__$4,__vue_is_functional_template__$4,__vue_module_identifier__$4,!1,void 0,void 0,void 0);
/* scoped */
var script$3={props:{className:{type:Array,default:()=>[]},id:{type:String,required:!0},x:{type:Number,required:!0},y:{type:Number,required:!0},w:{type:Number,required:!0},h:{type:Number,required:!0},minW:{type:Number,default:0},minH:{type:Number,default:0},maxW:{type:Number,default:0},maxH:{type:Number,default:0},noResize:{type:Boolean,default:!1},locked:{type:Boolean,default:!1},move:{type:Boolean,default:!1},resizeHandles:{type:String,default:null},noScroll:{
// Show scroll on gridItem or not...
type:Boolean,default:!0},itemStyle:{type:Object},itemContentStyle:{type:Object},itemContentCustomClass:{type:Array,default:()=>[]},itemCustomClass:{type:Array,default:()=>[]}},inject:{masterLayout:{default:null},subGridLayout:{default:null}},computed:{contentStyle(){const{itemContentStyle:itemContentStyle,noScroll:noScroll}=this;return{...itemContentStyle,overflow:noScroll?"hidden":"auto"}}},data(){return{loaded:!1}},mounted(){const self=this;this.$nextTick((()=>{self.loaded=!0,this.$nextTick((()=>{self.subGridLayout?.grid?self.subGridLayout.grid.makeWidget(self.$el):self.masterLayout?.grid&&self.masterLayout.grid.makeWidget(self.$el)}))}))},beforeDestroy(){this.subGridLayout?.grid?this.subGridLayout?.grid.removeWidget(this.$el,!0,!1):this.masterLayout?.grid&&this.masterGrid?.grid.removeWidget(this.$el,!0,!1)}};
/* script */const __vue_script__$3=script$3;
/* template */var __vue_render__$3=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:[{"grid-stack-item":_vm.loaded}].concat(_vm.itemCustomClass),attrs:{"gs-id":_vm.id,"gs-x":_vm.x,"gs-y":_vm.y,"gs-w":_vm.w,"gs-h":_vm.h,"gs-min-w":_vm.minW,"gs-min-h":_vm.minH,"gs-max-w":_vm.maxW,"gs-max-h":_vm.maxH,"gs-no-resize":_vm.noResize,"gs-no-move":_vm.move,"gs-locked":_vm.locked}},[_c("div",{class:[{"grid-stack-item-content":_vm.loaded}].concat(_vm.itemContentCustomClass),style:_vm.contentStyle},[_vm._t("default")],2)])},__vue_staticRenderFns__$3=[];
/* style */
const __vue_inject_styles__$3=void 0,__vue_scope_id__$3="data-v-a42a7a5c",__vue_module_identifier__$3=void 0,__vue_is_functional_template__$3=!1,__vue_component__$3=normalizeComponent({render:__vue_render__$3,staticRenderFns:__vue_staticRenderFns__$3},__vue_inject_styles__$3,__vue_script__$3,__vue_scope_id__$3,__vue_is_functional_template__$3,__vue_module_identifier__$3,!1,void 0,void 0,void 0);
/* scoped */
var script$2={data(){return{grid:null,itemAdded:!1,itemsChanged:!1}},props:{item:{type:Object,required:!0}},provide(){return{subGridLayout:this}},inject:["masterGridOption","eventBus","masterLayout"],created(){const self=this;this.$nextTick((()=>{const subgridOptions=Object.assign(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__(self.masterGridOption),{acceptWidgets:el=>{let stackElm=el.getElementsByClassName("grid-stack");return!stackElm||!stackElm.length}});self.grid=gridstack_dist_gridstack_h5_js__WEBPACK_IMPORTED_MODULE_0__.addGrid(self.$el,subgridOptions),self.subsribeToSubGridEvents(),self.subscribeToEventBusEvents(),this.$nextTick((()=>{self.grid.float(self.masterLayout.float)}))}))},computed:{id(){return this.item.id}},methods:{subscribeToEventBusEvents(){const self=this;this.eventBus.$on("itemRemoved",(id=>{const index=self.grid.engine.nodes.findIndex((n=>n.id==id));index>=0&&self.grid.removeWidget(self.grid.engine.nodes[index].el,!1,!0)}))},subsribeToSubGridEvents(){const self=this;this.grid.on("change",((event,items)=>{items&&(1!=self.itemsChanged||0!=self.itemAdded?(items.forEach((i=>{const{w:w}=findIndicesUsingId(i.id,self.masterLayout.layout),pos={x:i.x,y:i.y,w:i.w,h:i.h};Object.assign(w,pos)})),self.masterLayout.emitLayout(this.id)):self.itemsChanged=!1)})),this.grid.on("added",((event,items)=>{if(1==self.itemAdded)return self.itemAdded=!1,void(self.itemsChanged=!0);items.forEach((i=>{const{w:w}=findIndicesUsingId(i.id,self.masterLayout.layout),pos={x:i.x,y:i.y,w:i.w,h:i.h};if(self.masterLayout.removedItem?.id==i.id&&null==w){
// Widget has been moved from a subgrid into the masterGrid.
Object.assign(self.masterLayout.removedItem,pos);const idx=self.masterLayout.layout.findIndex((i=>i.id==self.id));
// eslint-disable-next-line vue/no-mutating-props
self.masterLayout.layout[idx].children.push(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__(self.masterLayout.removedItem)),self.masterLayout.removedItem=null,self.itemAdded=!0,self.itemsChanged=!1,setTimeout((()=>{
// 1) Widget present inside a section.
// 2) Widget held and dragged onto the mastergrid (dragged into not dropped).
// 3) Widget dropped into the same section from where it was taken out.
// These steps will remove the widget from the section and add it back again into the section,
// this would trigger `itemAdded = true`, and in the next operation done by the user
// `itemAdded` would contain
// the value `true` leading to  `this.grid.on('change',() => {})` to misbehave.
self.itemAdded=!1}),0)}else
// Use cases:
// 1) Widget has be relocated within the masterGrid.
Object.assign(w,pos)})),self.masterLayout.emitLayout(this.id)})),this.grid.on("removed",((event,items)=>{items.forEach((i=>{const{idx:idx,cidx:cidx,w:w}=findIndicesUsingId(i.id,self.masterLayout.layout);cidx>=0&&(self.masterLayout.removedItem=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__(w),
// eslint-disable-next-line vue/no-mutating-props
self.masterLayout.layout[idx].children.splice(cidx,1))})),self.masterLayout.emitLayout(this.id)}))}}};
/* script */const __vue_script__$2=script$2;
/* template */var __vue_render__$2=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"grid-stack grid-stack-nested",class:{"shadow-widget-section":-1===_vm.item.id}},[_vm._t("default")],2)},__vue_staticRenderFns__$2=[];
/* style */
const __vue_inject_styles__$2=void 0,__vue_scope_id__$2="data-v-3ccda700",__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1,__vue_component__$2=normalizeComponent({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},__vue_inject_styles__$2,__vue_script__$2,__vue_scope_id__$2,__vue_is_functional_template__$2,__vue_module_identifier__$2,!1,void 0,void 0,void 0);
/* scoped */"undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/77286.js.map