"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[82299],{
/***/382299:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FcuCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/cards/FcuCard.vue?vue&type=template&id=a6e8bace
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"dragabale-card"},[_vm.loading?_c("div",{staticClass:"shimmer-frame"},[_c("div",{staticClass:"assetcard-shimmer shine"})]):_c("div",{staticClass:"fcu-container"},[_c("div",{staticClass:"fcu-header"},[_vm._v(" "+_vm._s(_vm.level)+" ")]),_c("div",{staticClass:"fcu-sections"},[_vm._v(" "+_vm._s(_vm.$t("panel.tyre.total"))+_vm._s(_vm.data&&_vm.data.totalFcu||0)+" ")]),_c("div",{staticClass:"fcu-data"},[_c("div",{staticClass:"fcu-count pointer",on:{click:function($event){return _vm.moveToAssetsForRunning()}}},[_vm._v(" "+_vm._s(_vm.data&&_vm.data.runningFcu||0)+" ")]),_c("div",{staticClass:"fcu-state"},[_vm._v(" "+_vm._s(_vm.$t("panel.tyre.running"))+" ")])])])])},staticRenderFns=[],router=(__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(329435)),FcuCardvue_type_script_lang_js={props:["widget","config"],data:function(){return{data:null,cardData:null,loading:!1}},mounted:function(){this.loadCardData(),this.updateMeta()},computed:{staticKey:function(){if(this.widget.dataOptions.cardData){var data=this.widget.dataOptions.cardData;if(data&&data.level)return"emrilllevel"+data.level}},level:function(){if(this.cardData&&this.cardData.level)return"level "+this.cardData.level},levelKey:function(){if(this.widget.dataOptions&&this.widget.dataOptions.cardData&&this.widget.dataOptions.cardData.level)return"Level "+this.widget.dataOptions.cardData.level},buildingId:function(){if(this.widget.dataOptions&&this.widget.dataOptions.cardData&&this.widget.dataOptions.cardData.selectedBuilding)return parseInt(this.widget.dataOptions.cardData.selectedBuilding)}},methods:{updateMeta:function(){this.widget.dataOptions.cardData?(this.widget.dataOptions.metaJson=JSON.stringify(this.widget.dataOptions.cardData),this.cardData=this.widget.dataOptions.cardData):this.widget.id>-1&&this.widget.dataOptions.metaJson&&(this.cardData=JSON.parse(this.widget.dataOptions.metaJson))},moveToAssetsForRunning:function(){if(this.data.runningFcuList.length>0){var queryData={id:{operatorId:9,value:this.data.runningFcuList}};if(!this.$mobile)if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)("asset",router/* pageTypes */.As.LIST)||{},name=_ref.name;name&&this.$router.push({name:name,params:{viewname:"all"},query:{search:queryData}})}else this.$router.push({path:"/app/at/assets/all?search="+encodeURIComponent(JSON.stringify(queryData))})}},moveToAssetsForAll:function(){if(this.data.allFcuList>0){var queryData={id:{operatorId:9,value:this.data.allFcuList}};if(!this.$mobile)if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForModule */.Jp)("asset",router/* pageTypes */.As.LIST)||{},name=_ref2.name;name&&this.$router.push({name:name,params:{viewname:"all"},query:{search:queryData}})}else this.$router.push({path:"/app/at/assets/all?search="+encodeURIComponent(JSON.stringify(queryData))})}},loadCardData:function(){var self=this,params=null;if(this.loading=!0,this.widget.id>-1){var meta=JSON.parse(this.widget.dataOptions.metaJson);this.selectedBuilding=meta.selectedBuilding,params={paramsJson:{level:"Level "+meta.level,buildingId:meta.selectedBuilding},staticKey:"emrillFcu"}}else params={paramsJson:{level:this.levelKey,buildingId:this.buildingId},staticKey:"emrillFcu"};self.$http.post("dashboard/getCardData",params).then((function(response){self.getCardData(response.data),self.updateMeta(response.data),self.loading=!1})).catch((function(error){self.loading=!1}))},getCardData:function(data){if(data&&data.cardResult){var carddata=data.cardResult;this.data={name:carddata.name?carddata.name:"",runningFcu:carddata.runningFcu?carddata.runningFcu:0,totalFcu:carddata.totalFcu?carddata.totalFcu:0,runningFcuList:carddata.runningFcuList?carddata.runningFcuList:{},allFcuList:carddata.allFcuList?carddata.allFcuList:{}}}else this.data={name:"",runningFcu:"",totalFcu:"",runningFcuList:"",allFcuList:""}}}},cards_FcuCardvue_type_script_lang_js=FcuCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(cards_FcuCardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FcuCard=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/82299.js.map