(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[72542,20470],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/383274:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAssignment}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FAssignment.vue?vue&type=template&id=3fd62ade
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showRecommendedUsers&&"view"===_vm.viewtype?_c("el-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",attrs:{"popper-class":"fc-popover-p02 fc-assignment-popover-height",placement:"bottom",width:"320",trigger:"click"},on:{show:function($event){return _vm.loadrecommendedUsers()}}},[_c("div",{staticClass:"row popover-active-block",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"10px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel pointer"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",{staticClass:"fc-search-sticky"},["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"}},[_vm.recommendedUsersList.length&&"workorder"===_vm.moduleName?_c("div",[_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recommended_users"))+" ")]),_vm._l(_vm.recommendedUsersList,(function(recommendedUser,reusridx){return _c("div",{key:reusridx,on:{click:function($event){return _vm.assignViewWorkOrder(recommendedUser)}}},[_c("div",{staticClass:"group-item-label pointer"},[_vm._v(" "+_vm._s(recommendedUser.name)+" ( "+_vm._s(_vm.userVsTicketCountObj[recommendedUser.id])+" Tickets) ")])])}))],2):_vm._e(),"workorder"===_vm.moduleName&&_vm.recommendedUsersList.length?_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.others"))+" ")]):_vm._e(),_vm._l(_vm.userList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])}))],2):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px","padding-left":"10px"}},_vm._l(_vm.memberList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])})),0):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("div",{key:grpidx,on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticClass:"pL5",staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])]):_vm._e()})),0):_vm._e(),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._t("showFAssignmentPopover")],2)]):"form"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment"},[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignWorkOrder(group,grpidx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()],1):"view"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",on:{open:function($event){_vm.isPopverVisible=!0},close:function($event){_vm.isPopverVisible=!1}}},[_vm.isPopverVisible?[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()]:_vm._e()],2):_vm._e()},staticRenderFns=[],defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),quasar_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(641358)),vuex_esm=__webpack_require__(420629),FSearch=__webpack_require__(947748),validation=__webpack_require__(990260),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),api=__webpack_require__(32284),FAssignmentvue_type_script_lang_js={props:{model:{},viewtype:{},record:{},form:{},siteId:{default:null},recordId:{},moduleName:{},showRecommendedUsers:{}},data:function(){return{showQuickSearch:!1,loading:!1,quickSearchQuery:null,assignmentValue:"assignmentGroup",selectedName:"",selectedGroup:"",selctedGroupMember:"",userVsTicketCountObj:{},memberList:[],typeVal:this.viewtype,workorder:null,actions:{assign:{loading:!1}},userList:[],recommendedUsersList:[],groupList:[],filtereduserList:[],filteredgroupList:[],filteredmemberList:[],isPopverVisible:!1}},components:{QPopover:quasar_esm/* QPopover */.oe,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QList:quasar_esm/* QList */.tu,FSearch:FSearch/* default */.Z},watch:{record:function(){this.loadWorkorders()},siteId:{handler:function(newVal,oldVal){var getCurrentSiteId=this.getCurrentSiteId,viewtype=this.viewtype;isEqual_default()(newVal,oldVal)||isEqual_default()(newVal,getCurrentSiteId)||isEqual_default()(viewtype,"view")||this.scopeTeamUser()},immediate:!0},isPopverVisible:function(){this.isPopverVisible&&"view"===this.viewtype&&(0,validation/* isEmpty */.xb)(this.userList)&&(0,validation/* isEmpty */.xb)(this.groupList)&&this.scopeTeamUser()},model:{handler:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var assignedTo=newVal.assignedTo,assignmentGroup=newVal.assignmentGroup,_ref=assignedTo||{},assignedToId=_ref.id,_ref2=assignmentGroup||{},assignmentGroupId=_ref2.id;(0,validation/* isEmpty */.xb)(assignedToId)&&(this.selectedName=null),(0,validation/* isEmpty */.xb)(assignmentGroupId)&&(this.selectedGroup=null)}}}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatusByLabel","getCurrentSiteId","getUser","getGroup"])),created:function(){var _this=this;this.$store.dispatch("loadTicketStatus","workorder").then((function(){_this.loadWorkorders()}))},methods:{memberCount:function(group){var _ref3=group||{},members=_ref3.members;return(members||[]).length},loadrecommendedUsers:function(){var _this2=this;this.loading=!0,this.userVsTicketCountObj={},this.recommendedUsersList=[];var url="v2/recommended/workorder?woId=".concat(this.record.id);this.$http.get(url).then((function(response){0===response.data.responseCode&&response.data.result&&response.data.result.recommendedUsers&&response.data.result.recommendedUsers.forEach((function(element){_this2.recommendedUsersList.push(element.user),_this2.userVsTicketCountObj[element.user.id]=element.reason.no_of_tickets;for(var i=0;i<_this2.userList.length;i++)_this2.userList[i].id===element.user.id&&_this2.userList.splice(i,1)})),_this2.loading=!1})).catch((function(){
// TODO handle errors
}))},loadWorkorders:function(){var objKey="model";"view"===this.viewtype&&(objKey="record");var parent=this[objKey],_ref4=parent||{},assignedTo=_ref4.assignedTo,assignmentGroup=_ref4.assignmentGroup,_ref5=assignedTo||{},assignedToId=_ref5.id,assignedToName=_ref5.name,_ref6=assignmentGroup||{},assignmentGroupId=_ref6.id,assignmentGroupName=_ref6.name;(0,validation/* isEmpty */.xb)(assignedToName)?this.selectedName=(0,validation/* isEmpty */.xb)(assignedToId)?null:this.getUserNameFromList(assignedToId):this.selectedName=assignedToName,(0,validation/* isEmpty */.xb)(assignmentGroupName)?this.assignmentGroupName=(0,validation/* isEmpty */.xb)(assignmentGroupId)?null:this.getGroupNameFromList(assignmentGroupId):this.selectedGroup=assignmentGroupName},assignment:function(value){this.assignmentValue=value},assignWorkOrder:function(assignedObj,index,value){var isValueChanged=!1,model=this.model,$refs=this.$refs,_ref7=model||{},assignedTo=_ref7.assignedTo,assignmentGroup=_ref7.assignmentGroup,_ref8=assignedObj||{},id=_ref8.id,name=_ref8.name;if("assignmentGroup"===value){var _ref9=assignmentGroup||{},assignmentGroupId=_ref9.id;(0,validation/* isEmpty */.xb)(name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(id)?null:this.getGroupNameFromList(id):this.selectedGroup=name,(0,validation/* isEmpty */.xb)(assignmentGroup)||(isValueChanged=assignmentGroupId!==id,this.$set(this.model.assignmentGroup,"id",id),this.$set(this.model.assignmentGroup,"name",name)),this.$emit("input",id),this.$emit("value",model),this.groupmemberList(index),isValueChanged&&this.$emit("onChange")}if("assignedTo"===value||"assignedToGroupMember"===value){
// get the assignedTo user and update using 'updateAssignedTo' emit.
var _ref10=assignedTo||{},assignedToId=_ref10.id;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,(0,validation/* isEmpty */.xb)(assignedTo)||(isValueChanged=assignedToId!==id,this.$set(this.model.assignedTo,"id",id),this.$set(this.model.assignedTo,"name",name)),this.$emit("input",id),this.$emit("value",model),$refs["assignedtopopover"]&&$refs["assignedtopopover"].close(),isValueChanged&&this.$emit("onChange",assignedObj)}},groupmemberList:function(groupIndex){this.assignmentValue="assignedToGroupMember",this.memberList=this.groupList[groupIndex].members,this.selectedName=null},assignViewWorkOrder:function(assignedTo,assignmentGroup,index){var _this3=this,$refs=this.$refs,record=this.record,assignObj={},moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref11=moduleState||{},statusId=_ref11.id,_ref12=record||{},recordId=_ref12.id;if(assignObj.id=[recordId],assignedTo){assignObj.assignedTo=assignedTo;var _ref13=assignedTo||{},id=_ref13.id,name=_ref13.name;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,$refs["assignedtopopover"]&&$refs["assignedtopopover"].close()}if(assignmentGroup){assignObj.assignmentGroup=assignmentGroup;var _ref14=assignmentGroup||{},_id=_ref14.id,_name=_ref14.name;(0,validation/* isEmpty */.xb)(_name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(_id)?null:this.getGroupNameFromList(_id):this.selectedGroup=_name,this.groupmemberList(index)}assignObj.status={id:statusId,status:"Assigned"},this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this3.$emit("assignactivity",assignObj),_this3.$dialog.notify(_this3.$t("common.products.workorder_assigned_successfully"))}))},scopeTeamUser:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,siteId,_yield$API$post,data,error,_ref15,groups,users;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return params={},siteId=_this4.siteId,siteId&&(params.siteId=siteId),_context.next=5,api/* API */.bl.post("v3/group/scopeBySite",params);case 5:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error||(_ref15=data||{},groups=_ref15.groups,users=_ref15.users,_this4.userList=users||[],_this4.groupList=groups||[]);case 9:case"end":return _context.stop()}}),_callee)})))()},removeTeamWO:function(assignValue){var _assignObj,_this5=this,record=this.record,_ref16=record||{},recordId=_ref16.id,moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref17=moduleState||{},statusId=_ref17.id,assignObj=(_assignObj={id:[recordId]},(0,defineProperty/* default */.Z)(_assignObj,assignValue,{id:-1}),(0,defineProperty/* default */.Z)(_assignObj,"status",{id:statusId,status:"Assigned"}),_assignObj);this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this5.$emit("assignactivity",assignObj),_this5.$dialog.notify(_this5.$t("common.products.workorder_assigned_successfully"))}))},reassign:function(assignValue){var model=this.model,_ref18=model||{},assignmentGroup=_ref18.assignmentGroup,assignedTo=_ref18.assignedTo;"assignmentGroup"===assignValue&&(this.selectedGroup=null,(0,validation/* isEmpty */.xb)(assignmentGroup)||(this.$set(this.model.assignmentGroup,"id",null),this.$set(this.model.assignmentGroup,"name",null))),"assignedTo"===assignValue&&(this.selectedName=null,(0,validation/* isEmpty */.xb)(assignedTo)||(this.$set(this.model.assignedTo,"id",null),this.$set(this.model.assignedTo,"name",null)))},reassignWO:function(assignValue){"assignmentGroup"===assignValue&&(this.selectedGroup=null),"assignedTo"===assignValue&&(this.selectedName=null),this.removeTeamWO(assignValue)},getUserNameFromList:function(id){var userList=this.userList;if((0,validation/* isEmpty */.xb)(userList))return this.getUser(id).name;var user=userList.find((function(user){return user.id===id}));return(0,validation/* isEmpty */.xb)(user)?void 0:this.$getProperty(user,"name",null)},getGroupNameFromList:function(id){var _this6=this,groupList=this.groupList;if((0,validation/* isEmpty */.xb)(groupList))this.$store.dispatch("loadGroups").then((function(){return(_this6.getGroup(id)||{}).name}));else{var group=groupList.find((function(group){return group.id===id}));if(!(0,validation/* isEmpty */.xb)(group))return this.$getProperty(group,"name",null)}}}},components_FAssignmentvue_type_script_lang_js=FAssignmentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAssignmentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAssignment=component.exports},
/***/436756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDialogNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDialogNew.vue?vue&type=template&id=388b7f7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"costdialog",class:["f-dialog",_vm.customClass],attrs:{visible:_vm.visible,"before-close":_vm.close,width:_vm.width,"append-to-body":!0},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.title)+" ")])]}))],2),_c("div",{staticClass:"f-dialog-content",style:_vm.styleCss},[_vm._t("content"),_vm._t("default")],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.loading?_vm.loadingTitle||"Saving...":_vm.confirmTitle||"Save"))])],1)]}))],2)])},staticRenderFns=[],FDialogNewvue_type_script_lang_js={props:["title","confirmTitle","visible","customClass","width","maxHeight","stayOnSave","loading","loadingTitle","record"],computed:{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null}},methods:{close:function(){this.$emit("close"),this.$emit("update:visible",!1)},save:function(){this.$emit("save"),this.stayOnSave||this.$emit("update:visible",!1)}}},components_FDialogNewvue_type_script_lang_js=FDialogNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDialogNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDialogNew=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/350367:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FUploadPhotos}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FUploadPhotos.vue?vue&type=template&id=5a0f9682
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"upload-photos-dialog fc-dialog-center-container",attrs:{title:"Upload Photos",visible:_vm.showDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event},"before-close":_vm.closeDialog}},[_vm.showDialog?_c("el-upload",{attrs:{multiple:"","list-type":"picture-card","file-list":_vm.photos,action:"",accept:"image/*","http-request":_vm.onUpload,"on-success":_vm.onUploadSuccess,"on-error":_vm.onError,"on-remove":_vm.onRemove}},[_c("i",{staticClass:"el-icon-plus"})]):_vm._e(),_c("span",{staticClass:"dialog-footer modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.done}},[_vm._v("Done")])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(990260)),eventBus=__webpack_require__(398011),FUploadPhotosvue_type_script_lang_js={props:["module","record","list"],data:function(){return{photos:[],showDialog:!1,isChanged:!1}},methods:{open:function(){this.photos=(0,validation/* isEmpty */.xb)(this.list)?[]:this.list,this.showDialog=!0},onUpload:function(_ref){var file=_ref.file,data=(_ref.onError,{parentId:this.record.id,module:this.module}),formData=new FormData;for(var key in formData.append("file",file,file.name),data)this.$helpers.setFormData(key,data[key],formData);return this.$http.post("v2/photos/upload",formData)},onUploadSuccess:function(response){var _response$data=response.data,responseCode=_response$data.responseCode,result=_response$data.result;0===responseCode&&(this.list.push(result.photos[0]),this.isChanged=!0)},onError:function(){this.$message.error(this.$t("setup.users_management.Invalid_image"))},onRemove:function(file){var _this=this;this.$http.post("/v2/photos/delete",{id:file.id,photoId:file.photoId,module:this.module,parentId:this.record.id}).then((function(response){if(0===response.data.responseCode){var list=(0,toConsumableArray/* default */.Z)(_this.list),index=list.findIndex((function(f){return f.id===file.id}));list.splice(index,1),_this.$emit("updatePhotos",list),_this.isChanged=!0}})).catch((function(){}))},done:function(){this.showDialog=!1,this.photos=[],this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1)},closeDialog:function(){this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1),this.showDialog=!1}}},components_FUploadPhotosvue_type_script_lang_js=FUploadPhotosvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FUploadPhotosvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FUploadPhotos=component.exports},
/***/391810:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return MobileAttachment2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/MobileAttachment2.vue?vue&type=template&id=46fd5568
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},[_c("div",{staticClass:"row"},[_c("div",[_c("div",{staticClass:"header-label pB15"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.before"))+" ")]),_vm.beforeImage?_c("div",[_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px"},attrs:{width:"100",height:"auto",src:_vm.beforeImage},on:{click:function($event){return _vm.imgaeBefore(1)}}})])]):_c("div",[_c("div",{staticClass:"inputover"},[_vm._m(0),_vm.doNotSave?_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.marshallFile($event.target.files,1)}}}):_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.filesChange($event.target.files,1)}}})])])]),_c("div",{staticClass:"mL30"},[_c("div",{staticClass:"header-label pB15",staticStyle:{"padding-left":"0px"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.after"))+" ")]),_vm.afterImage?_c("div",[_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px"},attrs:{width:"100",height:"auto",src:_vm.afterImage},on:{click:function($event){return _vm.imgaeBefore(2)}}})])]):_c("div",[_c("div",{staticClass:"inputover"},[_vm._m(1),_vm.doNotSave?_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.marshallFile($event.target.files,2)}}}):_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.filesChange($event.target.files,2)}}})])])])])])])]),_vm.visibility&&_vm.selectedAttachment?_c("preview-file",{attrs:{visibility:_vm.visibility,showDelete:"true",previewFile:_vm.selectedAttachment,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event},onDelete:_vm.taskPhotoDletion}}):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("label",{staticClass:"custom-file-upload",attrs:{for:"file-upload"}},[_c("i",{staticClass:"fa fa-camera"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("label",{staticClass:"custom-file-upload",attrs:{for:"file-upload"}},[_c("i",{staticClass:"fa fa-camera"})])}],createForOfIteratorHelper=__webpack_require__(566347),PreviewFile=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(720096)),api=__webpack_require__(32284),validation=__webpack_require__(990260),MobileAttachment2vue_type_script_lang_js={props:["module","record","disabled","doNotSave"],data:function(){return{loading:!0,before:!1,after:null,status:{UPLOADING:1,SUCCESS:2,FAILED:3},beforeImage:null,afterImage:null,attachments:[],formFieldName:"attachment",attachmentType:-1,selectedAttachment:null,visibility:!1,afterImageDetail:{},beforeImageDetail:{}}},watch:{record:function(recordObj){this.loadAttachments()},attachments:function(newVal){this.record.noOfAttachments=this.attachments.length}},components:{PreviewFile:PreviewFile/* default */.Z},mounted:function(){this.loadAttachments()},methods:{taskPhotoDletion:function(file){var _this=this,dialogObj={title:"Delete Task Attachment",message:"Are you sure you want to delete this attachment?",rbDanger:!0,rbLabel:"Delete"};this.$dialog.confirm(dialogObj).then((function(value){if(value){var url="/v2/tasks/deleteTaskAttachment",id=file.id,params={recordId:_this.record.id,attachmentId:[id],module:"taskattachments"};api/* API */.bl.post(url,params).then((function(_ref){_ref.data;var error=_ref.error;error?_this.$message.error(error.message||"Error Occured"):(1===file.type?_this.beforeImage=null:2===file.type&&(_this.afterImage=null),_this.$emit("taskattachmentactivity"),_this.visibility=!1)}))}}))},marshallFile:function(fileList,attType){var _this2=this,attachmentInfo={module:this.module,recordId:this.record.id,attachmentType:attType,formFieldName:this.formFieldName,file:fileList[0],fileName:fileList[0].name},picReader=new FileReader;picReader.addEventListener("load",(function(event){var picFile=event.target;1===attType?_this2.beforeImage=picFile.result:2===attType&&(_this2.afterImage=picFile.result)})),picReader.readAsDataURL(fileList[0]),this.$emit("marshalled",attachmentInfo)},loadAttachments:function(){if(!this.record&&!this.record.id)return!1;var self=this;return self.loading=!0,this.$http.get("/attachment?module="+this.module+"&recordId="+this.record.id).then((function(response){if(200===response.status)if(self.loading=!1,self.attachments=response.data.attachments?response.data.attachments:[],self.attachments.length>0){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(self.attachments);try{for(_iterator.s();!(_step=_iterator.n()).done;){var attachment=_step.value;1===attachment.type?self.beforeImage=attachment.previewUrl:2===attachment.type&&(self.afterImage=attachment.previewUrl),self.setAttachmentDetail(attachment)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else self.beforeImage=null,self.afterImage=null}))},imgaeBefore:function(type){if(this.attachments.length>0){this.visibility=!0;var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.attachments);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var attachment=_step2.value;type===attachment.type&&(this.selectedAttachment=attachment,this.setAttachmentDetail(attachment))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}},filesChange:function(fileList,attType){var self1=this,formData=new FormData;formData.append("module",this.module),formData.append("recordId",this.record.id),formData.append("attachmentType",attType),formData.append(this.formFieldName,fileList[0],fileList[0].name);var picReader=new FileReader;picReader.addEventListener("load",(function(event){var picFile=event.target;1===attType?(self1.beforeImage=picFile.result,self1.beforeImageDetail={}):2===attType&&(self1.afterImage=picFile.result,self1.afterImageDetail={})})),picReader.readAsDataURL(fileList[0]);var self=this;self.$http.post("/attachment/add",formData).then((function(response){if(self.$emit("taskattachmentactivity"),200===response.status){self.$message.success("Attachment added successfully");var _ref2=response||{},data=_ref2.data,_ref3=data||[],attachments=_ref3.attachments;(0,validation/* isEmpty */.xb)(attachments)||attachments.forEach((function(attachment){self.attachments.push(attachment),self.setAttachmentDetail(attachment)}));
// window.location.reload()
}})).catch((function(){self.$message.error("Error in adding attachment")}))},setAttachmentDetail:function(attachment){1==attachment.type&&(this.beforeImageDetail=attachment),2==attachment.type&&(this.afterImageDetail=attachment)}}},components_MobileAttachment2vue_type_script_lang_js=MobileAttachment2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_MobileAttachment2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MobileAttachment2=component.exports},
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/785869:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Subheader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Subheader.vue?vue&type=template&id=fa337eb6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"subheader-section",class:{filterclass:!0===_vm.querry}},[_c("div",{staticClass:"subheader-div"},[_c("ul",{staticClass:"subheader-tabs pull-left"},[_vm._t("prefix"),_vm._l(_vm.activeMenuList,(function(item,index){return[item.multilevel?_c("li",{key:index,staticClass:"sh-multilevel-header",class:{"router-link-exact-active active":_vm.getTabTitlenew(item)!==item.label||_vm.$route.params&&"chilleroverview"===_vm.$route.params.dashboardlink}},[_c("el-popover",{attrs:{placement:"bottom",width:"200","popper-class":"sh-popup-tree",trigger:"hover"},model:{value:_vm.closepop,callback:function($$v){_vm.closepop=$$v},expression:"closepop"}},[_vm._l(item.children,(function(d,index){return item.children?_c("div",{key:index,staticClass:"p5 parent-sh"},[_c("div",{staticClass:"sh-pop-parent p5 pointer",class:{active:d.path.path===_vm.$route.path},on:{click:function($event){return _vm.getparent(d)}}},[_vm._v(" "+_vm._s(d.label)+" ")]),d.children?_c("div",{staticClass:"p5 sh-con-header"},_vm._l(d.children,(function(c,idx){return d.children?_c("div",{key:idx,staticClass:"child-sh"},[_c("div",{staticClass:"sh-pop-child p5 pointer",class:{active:c.path.path===_vm.$route.path},on:{click:function($event){return _vm.getchild(c)}}},[_c("i",{staticClass:"fa fa-circle sh-indicater",class:{active:c.path.path===_vm.$route.path}}),_vm._v(_vm._s(c.label)+" ")])]):_vm._e()})),0):_vm._e()]):_vm._e()})),_c("a",{attrs:{slot:"reference"},slot:"reference"},[_vm._v(" "+_vm._s(_vm.getTabTitlenew(item))+" "),_c("i",{staticClass:"switch-icon-dropdown el-icon-arrow-down",staticStyle:{float:"right",margin:"5px"}})])],2),_c("div",{staticClass:"sh-selection-bar"})],1):item.disable?_c("li",{key:index,class:{"router-link-exact-active active":_vm.getTabTitle(item)!==item.label}},[_c("el-dropdown",{on:{command:_vm.openChild}},[_c("a",[_vm._v(" "+_vm._s(_vm.getTabTitle(item))+" "),_c("i",{staticClass:"switch-icon-dropdown el-icon-arrow-down",staticStyle:{float:"right",margin:"5px"}})]),_c("div",{staticClass:"sh-selection-bar"}),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(item.childrens,(function(child,childindex){return _c("el-dropdown-item",{key:childindex,attrs:{command:{curentItem:child,parentItem:item},disabled:child.disable}},[_vm._v(_vm._s(child.label))])})),1)],1)],1):item.childrens||!_vm.showCurrentViewOnly||_vm.currentView===item.name?_c("router-link",{key:index,attrs:{tag:"li",to:item.childrens&&item.childrens.find((function(cl){return cl.path.path===_vm.$route.path}))?item.childrens.find((function(cl){return cl.path.path===_vm.$route.path})).path:item.path}},[_c("a",[_vm._v(_vm._s(_vm.getTabTitle(item)))]),item.childrens?_c("div",{staticStyle:{float:"right",margin:"3px"}},[_c("el-dropdown",{on:{command:_vm.openChild}},[_c("i",{staticClass:"switch-icon-dropdown el-icon-arrow-down"}),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(item.childrens,(function(child,childindex){return _c("el-dropdown-item",{key:childindex,attrs:{command:{curentItem:child,parentItem:item},disabled:child.disable}},[_vm._v(_vm._s(child.label))])})),1)],1)],1):_vm._e(),item.disable?_vm._e():_c("div",{staticClass:"sh-selection-bar"})]):_vm._e()]})),_vm.moreMenuList.length&&!_vm.showCurrentViewOnly?_c("li",{staticClass:"pointer",class:{active:_vm.isMoreMenuActive}},[_c("div",[_c("svg",{staticStyle:{"enable-background":"new 0 0 408 408"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"18px",height:"18px",viewBox:"0 0 408 408","xml:space":"preserve"}},[_c("g",[_c("g",{attrs:{id:"more-horiz"}},[_c("path",{attrs:{d:"M51,153c-28.05,0-51,22.95-51,51s22.95,51,51,51s51-22.95,51-51S79.05,153,51,153z M357,153c-28.05,0-51,22.95-51,51    s22.95,51,51,51s51-22.95,51-51S385.05,153,357,153z M204,153c-28.05,0-51,22.95-51,51s22.95,51,51,51s51-22.95,51-51    S232.05,153,204,153z",fill:"#b1bdc9"}})])])])]),_c("q-popover",{ref:"shpopover",on:{open:_vm.moreMenuOpened,close:_vm.moreMenuClosed}},[_c("q-list",{staticClass:"scroll q-list-item",staticStyle:{"min-width":"150px"},attrs:{link:""}},[_vm._l(_vm.moreMenuList,(function(item,index){return _c("q-item",{key:index,on:{click:function($event){return _vm.openSubTab(item,index)}}},[_c("q-item-main",{staticStyle:{"font-size":"13px"},attrs:{label:item.label}})],1)})),_vm.showRearrange?_c("q-item",{staticClass:"rearrange-button",attrs:{menu:_vm.menu},on:{click:_vm.rearrange}},[_c("q-item-main",{staticStyle:{"font-size":"13px"},attrs:{label:_vm.$t("setup.users_management.rearrange")}})],1):_vm._e()],2)],1)],1):_vm._e()],2),_vm._t("suffix"),_c("div",{class:_vm.positionsheaders},[_vm._t("default")],2)],2)])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),quasar_esm=(__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(162506),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(634338),__webpack_require__(902918),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(641358)),Subheadervue_type_script_lang_js={computed:{currentView:function(){return this.$route.params.viewname},querry:function(){return""===this.$route.query.filters||!!this.$route.query.filters}},props:["menu","filtersRetain","newbtn","type","parent","positionsheader","showRearrange","listCount","showCurrentViewOnly","maxVisibleMenu"],components:{QPopover:quasar_esm/* QPopover */.oe,QList:quasar_esm/* QList */.tu,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui},data:function(){return{positionsheaders:"pull-right",closepop:!1,activeMenuList:[],moreMenuList:[],seletedvalue:null,isMoreMenuActive:!1}},watch:{$route:function(to,from){if(this.filtersRetain&&from.path!==to.path)for(var i=0;i<this.filtersRetain.length;i++){var key1=from.query.hasOwnProperty(this.filtersRetain[i]);key1&&this.$router.push({query:from.query})}this.setFirstMenu(),this.$emit("tabChange")},menu:function(newVal){this.multilevelheader()}},mounted:function(){this.multilevelheader()},methods:{getTabTitle:function(item){var _this=this;if(item.path.path!==this.$route.path&&item.childrens&&item.childrens.length){var child=item.childrens.find((function(it){return it.path.path===_this.$route.path}));if(child)return child.label}return item.label},getTabTitlenew:function(item){var _this2=this;if(item.path.path!==this.$route.path&&item.children&&item.children.length){var child=item.children.find((function(it){return it.path.path===_this2.$route.path})),ch=item.children.filter((function(it){return it.children}));if(child)return child.label;for(var i=0;i<ch.length;i++){var c=ch[i].children&&ch[i].children.find((function(rt){return rt.path.path===_this2.$route.path}));if(c)return c.label}}return item.label},getparent:function(data){data.path&&data.path.path&&(this.$router.push({path:data.path.path}),this.closepop=!1)},getchild:function(data){data.path&&data.path.path&&(this.$router.push({path:data.path.path}),this.closepop=!1)},selectheader:function(value,event){this.seletedvalue=value,this.$router.push(value[value.length-1])},multilevelheader:function(){this.seletedvalue=["/app/em/newdashboard/chilleroverview/391"],this.loadMenuList()},multiheaderClickEvent:function(){},callbackMethod:function(newVal){},handleFcAfterDateBack:function(data,event){},onClickChild:function(value){},openChild:function(obj){this.$router.push(obj.curentItem.path)},companyListSelected:function(label,id){},loadMenuList:function(){var self=this;self.positionsheaders=self.positionsheader||"pull-right",self.activeMenuList=[],self.moreMenuList=[];var accessibleMenu=this.menu.filter((function(m){return"undefined"===typeof m.permission||self.$hasPermission(m.permission)?m:void 0}));for(var idx in accessibleMenu)parseInt(idx)<(this.maxVisibleMenu||4)?this.activeMenuList.push(accessibleMenu[idx]):this.moreMenuList.push(accessibleMenu[idx]);this.setFirstMenu()},openSubTab:function(item,index,keepQuery){if(item&&item.disable&&item.childrens.length){var data=[];if(data=item.childrens.filter((function(rt){return rt.label!==item.label})),data.length){this.moreMenuList.splice(index,1);var lastMenu=this.activeMenuList.pop();this.moreMenuList.splice(0,0,lastMenu),this.activeMenuList.push(item),this.$router.push({path:data[0].path.path}),this.isMoreMenuActive&&this.$refs.shpopover.close()}}else{this.moreMenuList.splice(index,1);var _lastMenu=this.activeMenuList.pop();this.moreMenuList.splice(0,0,_lastMenu),this.activeMenuList.push(item),keepQuery?this.$router.replace({path:item.path.path,query:this.$route.query}):this.$router.push(item.path),this.isMoreMenuActive&&this.$refs.shpopover.close()}},setFirstMenu:function(){var _this3=this;if(this.parent&&(this.$route.path===this.parent||this.$route.path+"/"===this.parent)&&this.activeMenuList.length){var primaryView=this.activeMenuList.find((function(menu){return menu.primary}));primaryView||(primaryView=this.activeMenuList[0]),this.$router.replace({path:primaryView.path.path,query:this.$route.query,params:primaryView.path.params})}else this.checkAndSetMoreList(this.currentView);if(![].concat((0,toConsumableArray/* default */.Z)(this.activeMenuList),(0,toConsumableArray/* default */.Z)(this.moreMenuList)).find((function(menu){return menu.path.path===_this3.$route.path}))){var portfolio=[].concat((0,toConsumableArray/* default */.Z)(this.activeMenuList),(0,toConsumableArray/* default */.Z)(this.moreMenuList)).find((function(menu){return menu.path.path.endsWith("portfolio")}));if(portfolio&&null!==portfolio&&void 0!==portfolio&&portfolio.childrens){var currentBuilding=portfolio.childrens.find((function(menu){return menu.path.path===_this3.$route.path}));currentBuilding&&(currentBuilding.childrens=portfolio.childrens,this.activeMenuList.find((function(menu){return menu.path.path.endsWith("portfolio")}))?this.activeMenuList=this.activeMenuList.map((function(ele){return ele.path.path===portfolio.path.path?currentBuilding:ele})):this.moreMenuList=this.moreMenuList.map((function(ele){return ele.path.path===portfolio.path.path?currentBuilding:ele})))}else this.menu.length&&"/app/em/newdashboard"===this.$route.path&&(this.menu[0].disable&&this.menu[0].childrens&&this.menu[0].childrens.length>1&&this.menu[0].childrens[0].disable?this.$router.push(this.menu[0].childrens[1].path.path):this.$router.push(this.menu[0].path.path))}},moreMenuOpened:function(){this.isMoreMenuActive=!0},moreMenuClosed:function(){this.isMoreMenuActive=!1},checkAndSetMoreList:function(newView){if(newView){var index,menu=this.moreMenuList.find((function(menu,idx){if(menu.name===newView)return index=idx,!0}));menu&&this.openSubTab(menu,index,!0)}},rearrange:function(){this.$refs.shpopover.close(),this.$emit("rearrange")}}},components_Subheadervue_type_script_lang_js=Subheadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Subheadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Subheader=component.exports},
/***/751201:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Asset}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/Asset.vue?vue&type=template&id=30a11ac8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.asset?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[!_vm.showSlide||"undefined"!==typeof _vm.disableSlide&&!1!==_vm.disableSlide?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{staticClass:"fc-avatar-carousel",attrs:{trigger:"click",autoplay:!1,"indicator-position":"none"}},[_vm._l(_vm.photos,(function(photo,index){return[photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{target:"_blank",src:photo.url},on:{click:function($event){return _vm.openPhotoUrl(photo.originalUrl)}}})]):_vm._e()]}))],2)],1),_vm.showName?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(_vm.asset.name))])])]):_vm._e(),!_vm.showUpload||"undefined"!==typeof _vm.disableUpload&&!1!==_vm.disableUpload?_vm._e():_c("div",[_c("span",{staticClass:"upload-space-photos pointer",on:{click:_vm.showUploadPhotoDialog}},[_c("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),_c("f-upload-photos",{ref:"uploadDialog",attrs:{module:"assetphotos",list:_vm.photos,record:_vm.asset},on:{updatePhotos:function($event){return _vm.handleUpdate()}}})],1)])]):_vm._e()},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),FUploadPhotos=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(350367)),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),api=__webpack_require__(32284),Assetvue_type_script_lang_js={props:["size","asset","name","hovercard","disableUpload","disableSlide"],data:function(){return{avatarUrl:null,sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.asset.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["shuge","huge","xhuge","widget"]}},components:{FUploadPhotos:FUploadPhotos/* default */.Z},mounted:function(){this.loadAvatarUrl()},created:function(){this.$store.dispatch("loadAssetType")},computed:(0,objectSpread2/* default */.Z)({showSlide:function(){if(this.photos&&this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},(0,vuex_esm/* mapGetters */.Se)(["getAssetType"])),watch:{asset:function(){this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var asset,size,sliderEnabledSize,disableSlide,_ref,avatarUrl,assetId,_yield$API$get,error,data,_ref2,_ref2$photos,photos,defaultAvatarUrl;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(asset=_this.asset,size=_this.size,sliderEnabledSize=_this.sliderEnabledSize,disableSlide=_this.disableSlide,_ref=asset||{},avatarUrl=_ref.avatarUrl,assetId=_ref.id,!(sliderEnabledSize.indexOf(size)>=0&&(!disableSlide||disableSlide&&"true"===disableSlide))){_context.next=12;break}if(!assetId){_context.next=12;break}return _this.photosLoading=!0,_context.next=7,api/* API */.bl.get("/photos/get?module=assetphotos&parentId=".concat(assetId));case 7:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error||(_ref2=data||{},_ref2$photos=_ref2.photos,photos=void 0===_ref2$photos?[]:_ref2$photos,(0,validation/* isEmpty */.xb)(photos)||photos.forEach((function(photo){var _ref3=photo||{},url=_ref3.url;(0,validation/* isEmpty */.xb)(url)||(avatarUrl=url)})),_this.$set(_this,"photos",photos)),_this.photosLoading=!1;case 12:(0,validation/* isEmpty */.xb)(avatarUrl)?(defaultAvatarUrl=_this.getDefaultAvatar()||"",_this.$set(_this,"avatarUrl",defaultAvatarUrl)):_this.$set(_this,"avatarUrl",avatarUrl);case 13:case"end":return _context.stop()}}),_callee)})))()},handleUpdate:function(){this.loadAvatarUrl()},openPhotoUrl:function(url){window.open(url,"_blank")},getDefaultAvatar:function(){if(this.asset&&this.asset.type&&this.asset.type.id){var name=this.getAssetType(this.asset.type.id)?this.getAssetType(this.asset.type.id).name:"";return __webpack_require__("Plumbing Equipment"===name||"Equipment"===name?164065:"Furniture"===name?703659:"Vehicle"===name?916803:164065)}return __webpack_require__(164065)},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}},avatar_Assetvue_type_script_lang_js=Assetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_Assetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Asset=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/3644:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSelect}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/fields/FSelect.vue?vue&type=template&id=b0f9d916
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-select"},[_c("label",[_vm._v(_vm._s(_vm.label))]),_c("v-select",{class:_vm.iconClass,attrs:{"on-change":_vm.setValue,options:_vm.options},model:{value:_vm.selectedValue,callback:function($$v){_vm.selectedValue=$$v},expression:"selectedValue"}})],1)},staticRenderFns=[],vue_select=__webpack_require__(619938),vue_select_default=__webpack_require__.n(vue_select),FSelectvue_type_script_lang_js={props:["options","icon","label","value"],components:{vSelect:vue_select_default()},data:function(){return{iconClass:"fc-"+this.icon+"-icon",selectedValue:this.value?this.value:null}},methods:{setValue:function(val){val?this.$emit("input",val.value):this.$emit("input",null)}}},fields_FSelectvue_type_script_lang_js=FSelectvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(fields_FSelectvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSelect=component.exports},
/***/638507:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Activities2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/Activities2.vue?vue&type=template&id=0cb76648
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{"padding-top":"20px"}},[_vm.loading?_c("div",[_c("spinner",{attrs:{show:_vm.loading}})],1):_vm.activities&&_vm.activities.length?_vm._l(_vm.activities,(function(activity,index){return _c("div",{key:index,staticClass:"tactivity"},[_c("div",{staticClass:"tlContent2"},[_vm._m(0,!0),_c("div",{},[_c("div",{staticStyle:{display:"inline-flex"}},[_c("div",{staticClass:"tlContentMain pR10 pull-left"},[_c("avatar",{attrs:{size:"sm",user:{name:activity.name}}})],1),_c("div",{staticClass:"pull-left ",staticStyle:{"line-height":"1.4"}},[_c("span",[_vm._v(_vm._s(activity.name))]),16==activity.activityType?_c("span",[_vm._v(" "+_vm._s(activity.message)+" "),_c("avatar",{attrs:{size:"sm",user:{name:_vm.getAssignedBy(activity.info.updatedFields)}}}),_c("span",{staticClass:"updval"},[_vm._v(_vm._s(_vm.getAssignedBy(activity.info.updatedFields)))])],1):_c("span",{staticClass:"tlContentMain"},[_vm._v(" "+_vm._s(_vm.getMessage(activity).message?_vm.getMessage(activity).message:"")+" "),_vm.getMessage(activity).value?_c("span",{staticClass:"updval"},[_vm._v(_vm._s(_vm.getMessage(activity).value))]):_vm._e()]),_c("div",{staticClass:"tlDate2 col-12"},[_c("span",[_vm._v(_vm._s(_vm._f("fromNow")(activity.modifiedTime)))])])])])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})])})):_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.products.no_activities_tracked_yet"))+" ")])],2)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flLeft activityIconDiv2"},[_c("i",{staticClass:"fa fa-circle-o ",attrs:{"aria-hidden":"true"}})])}],Activities2vue_type_script_lang_js=__webpack_require__(942577),relatedlist_Activities2vue_type_script_lang_js=Activities2vue_type_script_lang_js/* default */.Z,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_Activities2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Activities2=component.exports},
/***/487565:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Comments2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/Comments2.vue?vue&type=template&id=baa28728
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-new-comments fc-comments row"},[_c("div",{staticClass:"col-12 scroll-new"},[_c("notes",{staticClass:"assetsnotes new-summary-block fc-visibility-gicon-visible flex-grow overflow-y-scroll",attrs:{module:"ticketnotes",parentModule:"workorder",record:_vm.record,notify:!0,layoutParams:500,resizeWidget:this.resizeWidget,isActive:!1,forWO:!0,listViewComments:!0}})],1)])},staticRenderFns=[],Notes=(__webpack_require__(228436),__webpack_require__(120470)),Comments2vue_type_script_lang_js={extends:Notes["default"],props:["record","moduleName","details","layoutParams","widget","resizeWidget"],components:{Notes:Notes["default"]},data:function(){return{markdownshow:!1}},methods:{markdownhelplist:function(){this.markdownshow=!0},focusCommentBox:function(){this.commentFocus=!0},blurCommentBox:function(){!this.newComment.body||this.newComment.body.trim()}}},relatedlist_Comments2vue_type_script_lang_js=Comments2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_Comments2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Comments2=component.exports},
/***/17300:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Steps}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/Steps.vue?vue&type=template&id=00816700
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{height:"300px"}},[_c("el-steps",{attrs:{direction:"vertical",active:1}},[_c("el-step",{attrs:{title:"Step 1"}}),_c("el-step",{attrs:{title:"Step 2"}}),_c("el-step",{attrs:{title:"Step 3"}})],1)],1)},staticRenderFns=[],Stepsvue_type_script_lang_js={props:["data"],data:function(){return{}}},relatedlist_Stepsvue_type_script_lang_js=Stepsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_Stepsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Steps=component.exports},
/***/526971:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SummaryAttachment}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/SummaryAttachment.vue?vue&type=template&id=3eb46d89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-attachments p0"},[_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",[_c("div",{staticClass:"row fc-summary-attchment",staticStyle:{"padding-top":"20px","margin-left":"15px","margin-right":"15px","margin-bottom":"20px","padding-left":"0px"}},_vm._l(_vm.attachments,(function(attachment){return _c("el-row",{key:attachment.attachmentId,staticStyle:{"border-bottom":"1px solid #ededed",width:"100%","padding-top":"10px","padding-bottom":"10px"}},[_c("el-col",{attrs:{span:22}},[_c("el-col",{staticClass:"mT5",attrs:{span:2}},[_c("img",{staticClass:"svg-icon",staticStyle:{width:"20px"},attrs:{src:__webpack_require__(250620)}})]),_c("el-col",{attrs:{span:18}},[_c("div",[attachment.previewUrl?_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                  placement: 'top',\n                  animation: 'shift-away',\n                  arrow: true,\n                }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:attachment.fileName},on:{click:function($event){return _vm.selectedFile(attachment)}}},[_vm._v(_vm._s(attachment.fileName))]):_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                  placement: 'top',\n                  animation: 'shift-away',\n                  arrow: true,\n                }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:attachment.fileName}},[_vm._v(_vm._s(attachment.fileName))]),_vm.getUser(attachment)>0?_c("div",{staticClass:"col-4 comment-file mT2",staticStyle:{border:"none"}},[_vm._v(" "+_vm._s(_vm.getUser(attachment))+" "),attachment.createdTime?_c("span",[_vm._v("| "+_vm._s(_vm._f("formatDate")(attachment.createdTime,"DD-MM_YYYY")))]):_vm._e()]):_c("div",{staticClass:"col-4 comment-file mT2",staticStyle:{border:"none"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(attachment.createdTime,"DD-MM_YYYY"))+" ")])])])],1),_c("el-col",{staticClass:"mT5 pointer",attrs:{span:2}},[_c("img",{attrs:{src:__webpack_require__(365565),width:"16",height:"16"},on:{click:function($event){return _vm.downloadAttachment(attachment.downloadUrl)}}})])],1)})),1),_vm.diasbleAttachment?_vm._e():_c("form",{staticStyle:{"margin-left":"15px","margin-right":"15px"},attrs:{enctype:"multipart/form-data",novalidate:""}},[_c("div",{staticClass:"dropbox"},[_c("input",{staticClass:"input-file",attrs:{type:"file",multiple:""},on:{change:function($event){return _vm.filesChange($event.target.files)}}}),_c("img",{staticClass:"upload-img mT10 opacity-05",attrs:{src:__webpack_require__(581121),height:"20",width:"20"}}),_c("p",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_files"))),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")])])])]),_vm.visibility&&_vm.selectedAttachedFile?_c("preview-file",{attrs:{visibility:_vm.visibility,previewFile:_vm.selectedAttachedFile,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),PreviewFile=(__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(891719),__webpack_require__(339772),__webpack_require__(720096)),validation=__webpack_require__(990260),SummaryAttachmentvue_type_script_lang_js={props:["module","record","diasbleAttachment"],data:function(){return{loading:!0,status:{UPLOADING:1,SUCCESS:2,FAILED:3},attachments:[],formFieldName:"attachment",exportDownloadUrl:null,selectedAttachedFile:null,visibility:!1}},components:{PreviewFile:PreviewFile/* default */.Z},mounted:function(){this.loadAttachments()},watch:{record:function(recordObj){this.loadAttachments()}},methods:{selectedFile:function(inList){this.selectedAttachedFile=inList,this.visibility=!0},loadAttachments:function(){var self=this;return self.loading=!0,this.$http.get("/attachment?module="+this.module+"&recordId="+this.record.id).then((function(response){self.loading=!1,self.attachments=response.data.attachments?response.data.attachments:[]})).catch((function(error){error&&(self.loading=!1,self.attachments=null)}))},filesChange:function(files){var _this=this,fileList=Array.from(files);if(fileList.length){
// append the files to FormData
var formData=new FormData;formData.append("module",this.module),formData.append("recordId",this.record.id);var _this$status=this.status,UPLOADING=_this$status.UPLOADING,SUCCESS=_this$status.SUCCESS,FAILED=_this$status.FAILED;fileList.forEach((function(file){var _ref=file||{},name=_ref.name,size=_ref.size,type=_ref.type,fileEntry={fileId:-1,fileName:name,fileSize:size,contentType:type,status:UPLOADING,error:null,previewUrl:null,uploadedBy:_this.$account.user.id};formData.append(_this.formFieldName,file,name),_this.attachments.unshift(fileEntry)})),this.$http.post("/attachment/add",formData).then((function(_ref2){var data=_ref2.data;data.attachments.forEach((function(attachment){var fileId=attachment.fileId,fileName=attachment.fileName,fileSize=attachment.fileSize,attachmentIdx=_this.attachments.findIndex((function(a){return a.fileName===fileName&&a.fileSize===fileSize}));if(!(0,validation/* isEmpty */.xb)(attachmentIdx)){var attachmentFile=_this.attachments[attachmentIdx];attachmentFile=fileId?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),attachment),{},{status:SUCCESS}):(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),{},{status:FAILED,error:"Upload failed."}),_this.$set(_this.attachments,attachmentIdx,attachmentFile)}}))})).catch((function(){fileList.forEach((function(file){var _ref3=file||{},name=_ref3.name,size=_ref3.size,attachmentIdx=_this.attachments.findIndex((function(a){return a.fileName===name&&a.fileSize===size}));if(!(0,validation/* isEmpty */.xb)(attachmentIdx)){var attachmentFile=_this.attachments[attachmentIdx];attachmentFile=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),{},{status:FAILED,error:"Upload failed."}),_this.$set(_this.attachments,attachmentIdx,attachmentFile)}}))}))}},getUser:function(assign){if(null!==assign&&assign.id){var assignto=this.$store.getters.getUser(assign.id);return assignto?assignto.name:"---"}return"---"},downloadAttachment:function(url){this.exportDownloadUrl=url},icon:function(file){return file&&"image/png"===file?"statics/icons/png.svg":"statics/icons/pdf.svg"}}},relatedlist_SummaryAttachmentvue_type_script_lang_js=SummaryAttachmentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_SummaryAttachmentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SummaryAttachment=component.exports},
/***/120470:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Notes}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/widget/Notes.vue?vue&type=template&id=3c8171f0
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.componentName?_c(_vm.componentName,_vm._b({key:_vm.recordId,tag:"component"},"component",_vm.$attrs,!1)):_vm._e()],1)},staticRenderFns=[],Notesvue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),{components:{NewNotes:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(89142),__webpack_require__.e(19347)]).then(__webpack_require__.bind(__webpack_require__,116920))},OldNotes:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(19037)]).then(__webpack_require__.bind(__webpack_require__,919037))}},computed:{componentName:function(){return this.$helpers.isLicenseEnabled("NEW_COMMENTS")?"NewNotes":"OldNotes"},recordId:function(){return this.$getProperty(this.$attrs,"record.id")}}}),widget_Notesvue_type_script_lang_js=Notesvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(widget_Notesvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Notes=component.exports},
/***/16297:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WorkHours}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/widgets/dialogs/WorkHours.vue?vue&type=template&id=4efda2fd
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"duration-dialog setup-dialog",attrs:{visible:_vm.showDialog,width:"40%"},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v("Set Work Hours")])])]),_c("div",{staticClass:"duration-body-scroll"},[_vm.id&&-1!=_vm.id?_c("div",[_c("div",{staticClass:"fc-dark-grey-txt14"},[_vm._v("Estimated Duration")]),_c("el-row",{staticClass:"el-row"},[_vm.estimatedDuration.days?_c("div",{staticClass:"el-col el-col-7"},[_vm._v(" "+_vm._s(_vm.estimatedDuration.days+" Days")+" ")]):_vm._e(),_c("div",{staticClass:"el-col el-col-11"},[_vm._v(" "+_vm._s(_vm.estimatedDuration.hours+" Hour"+(_vm.estimatedDuration.hours>1?"s":""))+" ")])])],1):_vm._e(),_c("div",[_c("duration",{staticClass:"fc-dark-grey-txt14",attrs:{label:"Work Hours"},model:{value:_vm.actualDuration,callback:function($$v){_vm.actualDuration=$$v},expression:"actualDuration"}})],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("span",{attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.setDuration}},[_vm._v("SET")])],1)])])},staticRenderFns=[],FWorkHourDurationvue_type_template_id_630dc428_render=(__webpack_require__(897389),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:_vm.labelClass},[_vm._v(_vm._s(_vm.label?_vm.label:"Duration"))]),_c("el-row",{attrs:{gutter:10}},[_vm._t("prefix"),_c("el-col",{attrs:{span:"l"==_vm.size?8:5}},[_c("el-input",{staticStyle:{width:"37%"},attrs:{type:"number",min:"0"},on:{change:function($event){return _vm.updateDuration("manual-entry")}},model:{value:_vm.duration.day,callback:function($$v){_vm.$set(_vm.duration,"day",$$v)},expression:"duration.day"}}),_c("span",{staticClass:"textcolor pL10"},[_vm._v("Day(s)")])],1),_c("el-col",{attrs:{span:11}},[_c("el-select",{staticStyle:{width:"50%"},on:{change:function($event){return _vm.updateDuration("manual-entry")}},model:{value:_vm.duration.hour,callback:function($$v){_vm.$set(_vm.duration,"hour",$$v)},expression:"duration.hour"}},_vm._l(_vm.getNumberRange(23),(function(hour){return _c("el-option",{key:hour.value,attrs:{label:hour.label,value:hour.value}})})),1),_c("span",{staticClass:"textcolor pL10"},[_vm._v("Hour(s)")])],1)],2),_vm._l(_vm.workTimings,(function(v,i){return _c("el-row",{key:i},[_c("div",{staticClass:"creteria-delete-new"},[_c("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"Start Time","end-placeholder":"End Time",format:"yyyy-MM-dd HH","value-format":"timestamp","range-separator":"To"},on:{change:function($event){return _vm.updateDuration("split")}},model:{value:_vm.workTimings[i],callback:function($$v){_vm.$set(_vm.workTimings,i,$$v)},expression:"workTimings[i]"}}),_vm.workTimings.length===parseInt(i)+1?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"37px"},attrs:{src:__webpack_require__(353654)},on:{click:_vm.addTiming}}):_vm._e(),0!==i?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px","margin-right":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteTiming(i)}}}):_vm._e()],1)])}))],2)}),FWorkHourDurationvue_type_template_id_630dc428_staticRenderFns=[],moment_timezone=(__webpack_require__(670560),__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(480008)),moment_timezone_default=__webpack_require__.n(moment_timezone),FWorkHourDurationvue_type_script_lang_js={props:["value","label","labelClass","format","size"],data:function(){return{duration:{day:0,hour:0},workTimings:[],now:moment_timezone_default()()}},watch:{duration:{handler:function(){this.onValueChange()},deep:!0}},mounted:function(){this.workTimings.push([Number(this.now.format("x")),Number(this.now.format("x"))]);var unwatch=this.$watch("value",(function(value){if(value&&-1!==value.duration){var duration=value.duration,factor=1;factor="h"===this.format?1:3600;var days=Math.floor(duration/(24*factor));duration-=24*days*factor;var hours=Math.floor(duration/factor);this.duration.day=days,this.duration.hour=hours,unwatch()}}),{immediate:!0})},methods:{updateDuration:function(val){if("manual-entry"===val){var start=this.now.clone().subtract(this.duration.day,"days").subtract(this.duration.hour,"hours");this.workTimings=[[Number(start.format("x")),Number(this.now.format("x"))]],this.onValueChange()}else"split"===val&&this.setDuration(this.workTimings)},setDuration:function(val){var totalDuration=moment_timezone_default().duration(0);val.forEach((function(e){if(0!==e.length){var duration=moment_timezone_default().duration(moment_timezone_default()(e[1],"x").diff(moment_timezone_default()(e[0],"x")));totalDuration.add(duration)}})),this.$set(this.duration,"day",totalDuration.get("days")),this.$set(this.duration,"hour",totalDuration.get("hours"))},addTiming:function(){this.workTimings.push([])},deleteTiming:function(i){this.workTimings.splice(i,1)},getNumberRange:function(no){for(var list=[],i=0;i<=no;i++)list.push({label:i+"",value:i});return list},onValueChange:function(){var factor=1;factor="h"===this.format?1:3600;var duration=24*this.duration.day*factor;duration+=this.duration.hour*factor,duration=duration||-1,this.$emit("input",{workTimings:this.workTimings,duration:duration})}}},components_FWorkHourDurationvue_type_script_lang_js=FWorkHourDurationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FWorkHourDurationvue_type_script_lang_js,FWorkHourDurationvue_type_template_id_630dc428_render,FWorkHourDurationvue_type_template_id_630dc428_staticRenderFns,!1,null,null,null)
/* harmony default export */,FWorkHourDuration=component.exports,WorkHoursvue_type_script_lang_js={props:["visible","id","callback"],components:{Duration:FWorkHourDuration},data:function(){return{showDialog:this.visible,estimatedDuration:{hours:0,days:0},actualDuration:null}},watch:{visible:{handler:function(val){val&&this.getEstimatedDuration()},immediate:!0},showDialog:function(val){this.$emit("update:visible",val)}},methods:{getEstimatedDuration:function(){var _this=this;this.id&&-1!==this.id&&this.$http.get("/workorder/getEstimatedWorkDuration?workOrderId="+this.id).then((function(response){if(response&&response.data){var duration=response.data.estimatedDuration;if(duration&&-1!==duration){var days=Math.floor(duration/86400);duration-=86400*days;var hours=(duration/3600).toFixed(2);_this.estimatedDuration.days=days,_this.estimatedDuration.hours=hours}}}))},setDuration:function(){this.callback&&this.callback(this.actualDuration)},close:function(){this.showDialog=!1}}},dialogs_WorkHoursvue_type_script_lang_js=WorkHoursvue_type_script_lang_js,WorkHours_component=(0,componentNormalizer/* default */.Z)(dialogs_WorkHoursvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkHours=WorkHours_component.exports},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/583972:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3aed7174c314bbc14fee9c5cd51e20fa.svg";
/***/},
/***/365565:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d022638208d4baab3e4d8fbec8ac38ca.svg";
/***/},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/250620:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"03daa5e7a5fe4964f41cd5e0c6dbcdb3.svg";
/***/},
/***/385769:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4a9843791f38c4a28fdf9f0a4584780d.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/},
/***/581121:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"88cd7135ef1417b08c9498c51d2cda59.svg";
/***/},
/***/164065:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"ee31f43b8151f3590eba8e0562377413.svg";
/***/},
/***/703659:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"782922838e1b33e6568fd666d379c2b8.svg";
/***/},
/***/916803:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"45e80daecf3b2313cd875b1056bb278b.svg";
/***/},
/***/942577:
/***/function(module,__webpack_exports__,__webpack_require__){"use strict";
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),_Avatar__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(574752)),vuex__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(420629);
/* harmony import */
/* module decorator */module=__webpack_require__.hmd(module),
/* harmony default export */__webpack_exports__.Z={props:["record","serviceportal"],data:function(){return{activities:[],loading:!0}},components:{Avatar:_Avatar__WEBPACK_IMPORTED_MODULE_5__["default"]},mounted:function(){this.serviceportal?this.loadServicePortalActivities():this.loadActivities()},watch:{record:function(){this.serviceportal?this.loadServicePortalActivities():this.loadActivities()}},computed:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_6__/* .mapGetters */.Se)(["getUser"])),methods:{getUserCall:function(names){return this.serviceportal&&this.$account.user.id===names?this.$account.user.name:this.getUser(names).name},getAssignedBy:function(updatedFields){var user=updatedFields.find((function(el){return"assignedTo"===el.fieldName}));return user.newValue?this.getUser(user.newValue.id).name:user.oldValue?this.getUser(user.oldValue.id).name:void 0},getMessage:function(activity){if(131072===activity.activityType)return{message:activity.message};if(2===activity.activityType){if(activity.info.updatedFields&&activity.info.updatedFields.length>0){if(activity.info.updatedFields.find((function(el){return"category"===el.fieldName}))&&"category"===activity.info.updatedFields.find((function(el){return"category"===el.fieldName})).fieldName)return{message:"updated category as",value:activity.info.updatedFields.find((function(el){return"category"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"priority"===el.fieldName}))&&"priority"===activity.info.updatedFields.find((function(el){return"priority"===el.fieldName})).fieldName)return{message:"updated priority as",value:activity.info.updatedFields.find((function(el){return"priority"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"actualWorkStart"===el.fieldName}))&&"actualWorkStart"===activity.info.updatedFields.find((function(el){return"actualWorkStart"===el.fieldName})).fieldName||activity.info.updatedFields.find((function(el){return"resumedWorkStart"===el.fieldName}))&&"resumedWorkStart"===activity.info.updatedFields.find((function(el){return"resumedWorkStart"===el.fieldName})).fieldName)return{message:"started work"};if(activity.info.updatedFields.find((function(el){return"actualWorkEnd"===el.fieldName}))&&"actualWorkEnd"===activity.info.updatedFields.find((function(el){return"actualWorkEnd"===el.fieldName})).fieldName)return{message:"resolved work"};if(activity.info.updatedFields.find((function(el){return"dueDateString"===el.fieldName}))&&"dueDateString"===activity.info.updatedFields.find((function(el){return"dueDateString"===el.fieldName})).fieldName)return{message:"updated Due Date as",value:activity.info.updatedFields.find((function(el){return"dueDateString"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"type"===el.fieldName}))&&"type"===activity.info.updatedFields.find((function(el){return"type"===el.fieldName})).fieldName)return{message:"updated Type as",value:activity.info.updatedFields.find((function(el){return"type"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"status"===el.fieldName}))&&"status"===activity.info.updatedFields.find((function(el){return"status"===el.fieldName})).fieldName)return{message:"pause the work"}}}else if(16384===activity.activityType){if(activity.info.updatedFields.length>0){if(activity.info.updatedFields.find((function(el){return"remarks"===el.fieldName}))&&"remarks"===activity.info.updatedFields.find((function(el){return"remarks"===el.fieldName})).fieldName)return{message:"updated task ("+activity.info.task.subject+") remarks as",value:activity.info.updatedFields.find((function(el){return"remarks"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"inputValue"===el.fieldName}))&&"inputValue"===activity.info.updatedFields.find((function(el){return"inputValue"===el.fieldName})).fieldName)return{message:"updated task ("+activity.info.task.subject+") input Value as",value:activity.info.updatedFields.find((function(el){return"inputValue"===el.fieldName})).newValue}}}else{if(128===activity.activityType)return activity.info.attachments?{message:"attached",value:this.getAttachmentsString(activity.info.attachments)}:{message:"attached",value:null};if(256===activity.activityType)return{message:"added the task",value:activity.info.task};if(72===(activity||{}).type){
// Approval Activity Message
var approvalMessage="",approvalStatus=this.$getProperty(activity,"info.status",""),moduleSingularDisplayName=this.$constants.moduleSingularDisplayNameMap[module]?this.$constants.moduleSingularDisplayNameMap[module]:module;return"Approved"===approvalStatus?approvalMessage="<b> Approved the ".concat(moduleSingularDisplayName,"</b>"):"Rejected"===approvalStatus?approvalMessage="<b> Rejected the ".concat(moduleSingularDisplayName,"</b>"):"Requested"===approvalStatus&&(approvalMessage="<b> resent for Approval.</b>"),{message:approvalMessage}}if(73===(activity||{}).type)return{message:"<b> initiated Approval process</b>"}}return{message:activity.message}},loadActivities:function(){var self=this;self.loading=!0,self.$http.get("/workorder/activities?workOrderId="+self.record.id).then((function(response){self.activities=response.data.filter((function(activity){return 16!==activity.activityType||activity.info.updatedFields&&activity.info.updatedFields.length>0&&activity.info.updatedFields.find((function(el){return"assignedTo"===el.fieldName}))})),self.loading=!1})).catch((function(){}))},loadServicePortalActivities:function(){var self=this;self.loading=!0,self.$http.get("/activities?workOrderRequestId="+self.record.id).then((function(response){self.activities=response.data,self.loading=!1}))},getAttachmentsString:function(obj){for(var str="",item=0;item<obj.length;item++)0!==item&&(item===obj.length-1?str+=" and ":str+=", "),str+=obj[item];return str}}}}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/72542.js.map