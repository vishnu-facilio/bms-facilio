"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[38084,32686,80865,53021],{
/***/122681:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CreateWorkpermit}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),toConsumableArray=__webpack_require__(488478),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(990260)),api=__webpack_require__(32284),FetchViewsMixin=__webpack_require__(646716),ModuleForm=__webpack_require__(498915),CreateWorkpermitvue_type_script_lang_js={extends:ModuleForm["default"],mixins:[FetchViewsMixin/* default */.Z],computed:{moduleDisplayName:function(){return"Work Permit"}},methods:{saveRecord:function(formModel){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleDataId,formObj,formId,moduleData,_ref,checklist,_ref2,_ref2$pre,pre,_ref2$post,post,_checklist,_moduleData$checklist,fieldId,deleteIds,_yield$API$createReco,workpermit,error,_error$message,message,_yield$API$updateReco,_workpermit,_error,_error$message2,_message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(moduleDataId=_this.moduleDataId,formObj=_this.formObj,formId=formModel.formId,moduleData=_this.$helpers.cloneObject(_this.serializedData(formObj,formModel)),_ref=moduleData||{},checklist=_ref.checklist,_ref2=checklist||{},_ref2$pre=_ref2.pre,pre=void 0===_ref2$pre?[]:_ref2$pre,_ref2$post=_ref2.post,post=void 0===_ref2$post?[]:_ref2$post,(0,validation/* isEmpty */.xb)(formId)||(moduleData.formId=formId),(0,validation/* isEmpty */.xb)(moduleData.checklist)||(_checklist=[],!(0,validation/* isEmpty */.xb)(pre)&&(0,validation/* isArray */.kJ)(pre)&&pre.forEach((function(category){(0,validation/* isEmpty */.xb)(category.checklist)||_checklist.push.apply(_checklist,(0,toConsumableArray/* default */.Z)(category.checklist))})),!(0,validation/* isEmpty */.xb)(post)&&(0,validation/* isArray */.kJ)(post)&&post.forEach((function(category){(0,validation/* isEmpty */.xb)(category.checklist)||_checklist.push.apply(_checklist,(0,toConsumableArray/* default */.Z)(category.checklist))})),_moduleData$checklist=moduleData.checklist,fieldId=_moduleData$checklist.fieldId,deleteIds=_moduleData$checklist.deleteIds,_this.$setProperty(moduleData,"relations.workpermitchecklist",[{fieldId:fieldId,data:_checklist,deleteIds:deleteIds}]),delete moduleData.checklist),!(0,validation/* isEmpty */.xb)(moduleDataId)){_context.next=18;break}return _this.isSaving=!0,_context.next=11,api/* API */.bl.createRecord(_this.moduleName,{data:moduleData});case 11:_yield$API$createReco=_context.sent,workpermit=_yield$API$createReco.workpermit,error=_yield$API$createReco.error,error?(_error$message=error.message,message=void 0===_error$message?_this.$t("common.products.error_occured_while_saving_work_permit"):_error$message,_this.$message.error(message)):(_this.$message.success(_this.$t("common.products.work_permit_created_successfully")),_this.redirectToSummary(workpermit.id)),_this.isSaving=!1,_context.next=26;break;case 18:return _this.isSaving=!0,_context.next=21,api/* API */.bl.updateRecord(_this.moduleName,{id:moduleDataId,data:moduleData});case 21:_yield$API$updateReco=_context.sent,_workpermit=_yield$API$updateReco.workpermit,_error=_yield$API$updateReco.error,_error?(_error$message2=_error.message,_message=void 0===_error$message2?_this.$t("common.products.error_occured_while_updating_work_permit"):_error$message2,_this.$message.error(_message)):(_this.$message.success(_this.$t("common.products.work_permit_updated_successfully")),_this.redirectToSummary(_workpermit.id)),_this.isSaving=!1;case 26:case"end":return _context.stop()}}),_callee)})))()}}},workpermit_CreateWorkpermitvue_type_script_lang_js=CreateWorkpermitvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(workpermit_CreateWorkpermitvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CreateWorkpermit=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 2 modules
}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/38084.js.map