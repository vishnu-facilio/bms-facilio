"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[33822],{
/***/333822:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return MetricsSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/common/MetricsSummary.vue?vue&type=template&id=5480516a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"p30 pT30 d-flex flex-direction-column metrics-card"},[_c("div",{staticClass:"f12 bold text-uppercase mB10 fc-black-13 text-left letter-spacing1"},[_vm._v(" MTBF ")]),_c("div",{staticClass:"d-flex items-baseline"},[_c("div",{staticClass:"featured"},[_c("span",{staticClass:"f26",domProps:{innerHTML:_vm._s(_vm.stats.mtbf)}}),_c("inline-svg",{staticClass:"d-flex items-end",attrs:{src:"svgs/arrow",iconClass:_vm.getTrendClasses(_vm.metrics.mtbf,_vm.metrics.mtbfTillLastMonth)+" icon arrow mL10 mb5"}})],1),_c("span",{staticClass:"f13 letter-spacing0_5"},[_c("span",{staticClass:"fwBold letter-spacing0_5",domProps:{innerHTML:_vm._s(_vm.stats.mtbfTillLastMonth)}}),_vm._v(" till last month ")])]),_c("div",{staticClass:"letter-spacing0_5 fc-blue-label f12 mT5 text-capitalize"},[_vm._v(" This Year ")]),_c("hr",{staticClass:"separator-line width100"}),_c("div",{staticClass:"f13 bold text-uppercase mB10 text-left fc-black-13 letter-spacing1"},[_vm._v(" MTTR ")]),_c("div",{staticClass:"d-flex items-baseline"},[_c("div",{staticClass:"featured"},[_c("span",{staticClass:"f26",domProps:{innerHTML:_vm._s(_vm.stats.mttr)}}),_c("inline-svg",{staticClass:"d-flex items-end",attrs:{src:"svgs/arrow",iconClass:_vm.getTrendClasses(_vm.metrics.mttr,_vm.metrics.mttrTillLastMonth)+" icon arrow mL10 mb5"}})],1),_c("span",{staticClass:"f13 letter-spacing0_5"},[_c("span",{staticClass:"fwBold letter-spacing0_5",domProps:{innerHTML:_vm._s(_vm.stats.mttrTillLastMonth)}}),_vm._v(" till last month ")])]),_c("div",{staticClass:"letter-spacing0_5 fc-blue-label f12 mT5 text-capitalize"},[_vm._v(" This Year ")]),_c("hr",{staticClass:"separator-line width100"}),_c("div",{staticClass:"f12 bold text-uppercase mB10 fc-black-13 text-left letter-spacing1"},[_vm._v(" Downtime ")]),_c("div",{staticClass:"d-flex items-baseline"},[_c("div",{staticClass:"featured"},[_c("span",{staticClass:"f26",domProps:{innerHTML:_vm._s(_vm.stats.downtime)}}),_c("inline-svg",{staticClass:"d-flex items-end",attrs:{src:"svgs/arrow",iconClass:_vm.getTrendClasses(_vm.metrics.downtime,_vm.metrics.downtimeTillLastMonth)+" icon arrow mL10 mb5"}})],1),_c("span",{staticClass:"f13 letter-spacing0_5"},[_c("span",{staticClass:"fwBold letter-spacing0_5",domProps:{innerHTML:_vm._s(_vm.stats.downtimeTillLastMonth)}}),_vm._v(" till last month ")])]),_c("div",{staticClass:"letter-spacing0_5 fc-blue-label f12 mT5 text-capitalize"},[_vm._v(" This Year ")])])},staticRenderFns=[],slicedToArray=__webpack_require__(554621),validation=(__webpack_require__(260228),__webpack_require__(336585),__webpack_require__(108472),__webpack_require__(634338),__webpack_require__(990260)),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),MetricsSummaryvue_type_script_lang_js={props:["details","layoutParams","hideTitleSection","activeTab","widget","resizeWidget","eventBus"],data:function(){return{metrics:{}}},mounted:function(){var _this=this;this.loadData(),this.eventBus.$on("asset-downtime-reported",(function(){_this.loadData()}))},computed:{stats:function(){var _this2=this;return(0,validation/* isEmpty */.xb)(this.metrics)?{downtime:'00:00 <span class="period">Hrs</span>',downtimeTillLastMonth:'00:00 <span class="period">Hrs</span>',mtbf:'00:00 <span class="period">Hrs</span>',mtbfTillLastMonth:'00:00 <span class="period">Hrs</span>',mttr:'00:00 <span class="period">Hrs</span>',mttrTillLastMonth:'00:00 <span class="period">Hrs</span>'}:Object.entries(this.metrics).reduce((function(result,_ref){var _ref2=(0,slicedToArray/* default */.Z)(_ref,2),key=_ref2[0],value=_ref2[1];return result[key]=_this2.getFormattedDuration(value,"seconds"),result}),{})}},methods:{loadData:function(){var _this3=this,url="v2/assets/downtimemetrics?assetId=".concat(this.details.id);this.$http.get(url).then((function(response){0===response.data.responseCode?_this3.metrics=(0,validation/* isEmpty */.xb)(response.data.result.metrics)?{}:response.data.result.metrics:
// TODO handle errors
_this3.metrics={}})).catch((function(){
// TODO handle errors
_this3.metrics={}}))},getFormattedDuration:function(value,format){if(!value)return'00:00 <span class="period">Hrs</span>';var duration=moment_timezone_default().duration(parseInt(value,10),format),days=parseInt(duration.asDays(),10),hours=duration.hours(),minutes=duration.minutes(),seconds=duration.seconds(),pad=function(val){return String(val).padStart(2,"0")};return days>0?hours?"".concat(pad(days),' <span class="period">Days</span> ').concat(pad(hours),' <span class="period">Hrs</span>'):"".concat(pad(days),' <span class="period">Days</span>'):hours>0?minutes?"".concat(pad(hours),' <span class="period">Hrs</span> ').concat(pad(minutes),' <span class="period">Mins</span>'):"".concat(pad(hours),' <span class="period">Hrs</span>'):minutes>0?"".concat(pad(minutes),":").concat(pad(seconds),' <span class="period">Mins</span>'):"".concat(pad(seconds),' <span class="period">Secs</span>')},getTrendClasses:function(durationA,durationB){return(0,validation/* isEmpty */.xb)(durationA)||(0,validation/* isEmpty */.xb)(durationB)||0===durationA&&0===durationB?"hide-v":durationA-durationB?"fill-green":"fill-red rotate-bottom"}}},common_MetricsSummaryvue_type_script_lang_js=MetricsSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(common_MetricsSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MetricsSummary=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/33822.js.map