(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[46766],{
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/673362:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetMultiChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetMultiChooser.vue?vue&type=template&id=0ccc2fed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top",width:"60%","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","before-close":_vm.handleclose,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"multi f-element",attrs:{id:"spaceassetchooser"}},[_vm.hideBanner?_vm._e():_c("banner",{attrs:{message:_vm.message,hideIcon:!_vm.selectedList.count}}),_c("div",{staticStyle:{height:"600px","overflow-y":"hidden"}},[_c("div",{staticStyle:{"background-color":"#ffffff",height:"100%",width:"100%",display:"inline-block"}},[_c("div",{staticClass:"flex-middle justify-content-space pT20 pL20 pR20"},[_vm.isAsset?_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.assetCategory.placeHolder,disabled:!_vm.isAsset||_vm.disable},on:{change:_vm.onCategoryChange},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategoryChange},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1),_vm.hideBanner?_vm._e():_c("div",{staticClass:"pull-right"},[_c("el-radio-group",{on:{change:_vm.onIncludeTypeChange},model:{value:_vm.includeType,callback:function($$v){_vm.includeType=$$v},expression:"includeType"}},[_c("el-radio",{staticClass:"fc-radio",attrs:{label:"all"}},[_vm._v("All")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"include"}},[_vm._v("Include")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"exclude"}},[_vm._v("Exclude")])],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10 pB10",staticStyle:{"padding-left":"20px","padding-right":"20px","border-bottom":"1px solid #e6ecf3 !important"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v("search")]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.setResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"asset-chooser-select-block"},[_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"inline"},[!_vm.resourceType||_vm.resourceType.includes(field.spaceType+1)?_c("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationChange(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1):_vm._e()],1)})),_c("span",{staticClass:"searchicon pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])],2)])])],1),_c("div",{staticClass:"scroll-multichooser"},[_c("el-row",[_c("el-col",{staticClass:"table-scroll-chooser",attrs:{span:_vm.hideBanner?16:24}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px","overflow-y":"scroll","padding-bottom":"50px"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table border-right-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow "},[_c("el-checkbox",{attrs:{disabled:"exclude"===_vm.includeType&&!_vm.hideBanner},on:{change:_vm.onSelectAllChange},model:{value:_vm.selectall,callback:function($$v){_vm.selectall=$$v},expression:"selectall"}})],1),_c("td",{staticClass:"headerrow width30"},[_vm._v("#ID")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("NAME")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("CATEGORY")])])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:space.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(space,!0)}},model:{value:space.selected,callback:function($$v){_vm.$set(space,"selected",$$v)},expression:"space.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" "+_vm._s(space.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(space.spaceTypeVal)+" ")])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:asset.id,staticClass:"tablerow",class:{selectedrow:asset.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(asset,!0)}},model:{value:asset.selected,callback:function($$v){_vm.$set(asset,"selected",$$v)},expression:"asset.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" #"+_vm._s(asset.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" "+_vm._s(asset.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")])]):_vm._e()})),_vm.spaceList&&_vm.spaceList.length<1&&_vm.assetList&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_vm.hideBanner?_c("el-col",{staticClass:"chooser-selected-container",attrs:{span:8}},[_c("div",{staticClass:"chooser-scroll-block"},[_vm.selectedList&&_vm.selectedList.length?_c("div",{staticClass:"count-message"},[_vm._v(" "+_vm._s(_vm.message)+" ")]):_vm._e(),_vm._l(_vm.selectedList,(function(resource,value){return _c("div",{key:value,staticClass:"selected-field"},[_vm._v(" "+_vm._s(resource.name)+" "),_c("i",{staticClass:"el-icon-close remove",on:{click:function($event){return _vm.deSelect(resource)}}})])}))],2)]):_vm._e()],1)],1),_c("div",{staticClass:"f-footer row"},[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.handleclose}},[_c("span",[_vm._v("Cancel")])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.associate}},[_c("span",[_vm._v("Ok")])])])],1)]),_c("div",{staticStyle:{position:"absolute",top:"45%",left:"45%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),v_infinite_scroll=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),ResourceMixin=__webpack_require__(22637),FBannervue_type_template_id_85b57242_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.message?_c("div",{staticClass:"banner-block",style:{"background-color":_vm.bannerColor}},[_c("div",{staticClass:"banner-content"},[_c("i",{directives:[{name:"show",rawName:"v-show",value:!_vm.hideIcon,expression:"!hideIcon"}],class:["banner-icon flLeft",_vm.bannerIcon],style:{color:_vm.bannerTextColor},attrs:{"aria-hidden":"true"}}),_c("p",{staticClass:"banner-txt flLeft",style:{color:_vm.bannerTextColor}},[_vm._v(" "+_vm._s(_vm.message)+" ")])])]):_vm._e()])},FBannervue_type_template_id_85b57242_staticRenderFns=[],FBannervue_type_script_lang_js={props:["message","icon","color","textColor","hideIcon"],computed:{bannerColor:function(){var color;return this.color?color=this.color:this.isError||(color="#ecf3da"),color},bannerTextColor:function(){var color;return this.textColor?color=this.textColor:this.isError||(color="#67933a"),color},bannerIcon:function(){var icon;return this.icon?icon=this.icon:this.isError||(icon="el-icon-circle-check-outline"),icon}}},components_FBannervue_type_script_lang_js=FBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FBannervue_type_script_lang_js,FBannervue_type_template_id_85b57242_render,FBannervue_type_template_id_85b57242_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBanner=component.exports,vuex_esm=__webpack_require__(420629),SpaceAssetMultiChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","disable","hideBanner"],components:{Banner:FBanner,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{selectall:!1,showQuickSearch:!1,includeType:"all",selectedList:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{message:function(){var message,selectedCount=this.selectedList.length;if("all"===this.includeType&&this.categoryName)message="All "+this.categoryName+"s have been selected";else if("all"!==this.includeType&&selectedCount){var includeMsg;includeMsg=this.hideBanner?" Selected":"include"===this.includeType?" Included":" Excluded";var resource=(this.categoryName?this.categoryName:"")+(this.showAsset?" Asset":" Space");message=selectedCount+" "+resource+(selectedCount>1?"s":"")+includeMsg}else message=this.resourceType?"No Space Selected":"No Asset Selected";return message},categoryName:function(){return!this.assetCategory||this.assetCategory.value<=0?"":this.assetCategory.options[this.assetCategory.value]}}),created:function(){var _this=this;this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadAssetCategory").then((function(){_this.initResourceData()}))},watch:{visibility:function(val){val?this.reInit():val||!this.query||this.selectedList&&this.selectedList.length||this.$emit("associate",{})},query:function(val){this.quickSearchQuery=val,val&&(this.showQuickSearch=!0,this.setResourceData())},initialResourcesFecthed:function(val){val&&this.setInitialData()}},methods:{reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.checkAndInitResourceData()},deSelect:function(object){var resource=this.resourceList.find((function(resource){return resource.id===object.id}));resource?resource.selected=!1:resource=object,this.setSelectedResource(resource),this.setIncludeTypeOnChange()},handleclose:function(){this.$emit("update:visibility",!1),this.$emit("update:siteId",null)},openSpace:function(){this.isAsset=!1,this.loadSpace()},openAsset:function(){this.isAsset=!0,this.loadAsset()},associate:function(){var obj={};"all"!==this.includeType&&(obj.resourceList=this.selectedList,obj.isInclude="include"===this.includeType),this.$emit("associate",obj)},toggleQuickSearch:function(){var _this2=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.setResourceData())},onCategoryChange:function(){this.assetCategory.value?this.includeType="all":this.setIncludeTypeOnChange(),this.onCategorySelected(),this.selectedList=[]},onSpaceCategoryChange:function(){this.spaceCategory;this.onSpaceCategorySelected(),this.selectedList=[]},onSelectAllChange:function(){var _this3=this;this.selectedList=[],this.resourceList.forEach((function(resource){_this3.$set(resource,"selected",_this3.selectall),_this3.setSelectedResource(resource)})),this.setIncludeTypeOnChange()},toggleSelect:function(resource,alreadyChanged){alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource),this.selectall=this.selectedList.length===this.resourceList.length,this.setIncludeTypeOnChange()},setInitialData:function(){var _this4=this;if(this.initialData){var selectedResources=this.initialData.selectedResources;this.includeType=selectedResources&&selectedResources.length?this.initialData.isIncludeResource?"include":"exclude":"all";var idArray=[];selectedResources&&(this.selectedList=[],this.resourceList.forEach((function(resource){var resourceSelectedObj=_this4.initialData.selectedResources.some((function(selctedResource){return selctedResource.id===resource.id}));_this4.$set(resource,"selected",resourceSelectedObj),_this4.setSelectedResource(resource)}))),this.selectedList&&selectedResources&&this.selectedList.length<selectedResources.length&&(this.selectedList=[],this.initialData.selectedResources.forEach((function(d){idArray.push(d.id)})),this.$util.loadResource(idArray).then((function(fields){_this4.selectedList=fields})))}},setIncludeTypeOnChange:function(){"all"===this.includeType?this.includeType="include":this.selectedList.length||(this.includeType="all")},onIncludeTypeChange:function(){var _this5=this;"all"===this.includeType&&(this.resourceList.forEach((function(resource){_this5.$set(resource,"selected",!1)})),this.selectedList=[],this.selectall=!1)},isSelected:function(resourceId){return this.selectedList.find((function(resource){return resource.id===resourceId}))},onLocationChange:function(field){var _this6=this;this.onLocationSelected(field).then((function(){_this6.setListSelected()})),this.setIncludeTypeOnChange()},setResourceData:function(){var _this7=this;this.loadResourceData().then((function(){_this7.setListSelected()}))},setListSelected:function(){var _this8=this,selectedIds=this.selectedList.map((function(resource){return resource.id}));this.isAsset?this.assetList.map((function(asset){return selectedIds.includes(asset.id)&&_this8.$set(asset,"selected",!0),asset})):this.spaceList.map((function(space){return selectedIds.includes(space.id)&&_this8.$set(space,"selected",!0),space}))},setSelectedResource:function(resource){if(resource.selected)this.selectedList.push(this.$helpers.cloneObject(resource));else{var idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==idx&&this.selectedList.splice(idx,1)}}}},components_SpaceAssetMultiChooservue_type_script_lang_js=SpaceAssetMultiChooservue_type_script_lang_js,SpaceAssetMultiChooser_component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetMultiChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetMultiChooser=SpaceAssetMultiChooser_component.exports},
/***/358551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/overview/FDatePicker.vue?vue&type=template&id=fd3cfbc4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-date-picker",{ref:"date-picker",attrs:{appendToBody:_vm.appendToBody,clearable:!_vm.hideClear,type:_vm.type,"value-format":_vm.valueFormat,format:_vm.pickerFormat,placeholder:_vm.placeholder,disabled:_vm.disabled,editable:_vm.editable,"default-value":_vm.defaultValue,"picker-options":_vm.pickerOptions,"prefix-icon":_vm.prefixIcon,"clear-icon":_vm.clearIcon,"start-placeholder":_vm.startPlaceholder,"end-placeholder":_vm.endPlaceholder,"time-arrow-control":_vm.arrowControl,"default-time":_vm.defaultTime},on:{change:_vm.pickerChange},model:{value:_vm.ttime,callback:function($$v){_vm.ttime=$$v},expression:"ttime"}})},staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(990260)),constant=__webpack_require__(354754),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),FDatePickervue_type_script_lang_js={props:["appendToBody","value","value-format","format","default-value","placeholder","disabled","editable","picker-options","type","prefix-icon","clear-icon","start-placeholder","end-placeholder","hideClear","arrowControl","default-time"],mounted:function(){this.init()},data:function(){return{timeinorg:[]}},computed:{isRangeType:function(){var _ref=this||{},type=_ref.type;return["daterange","datetimerange"].includes(type)},defaultFormats:function(){var $timeformat=this.$timeformat,$dateformat=this.$dateformat,dateformat=($dateformat||"").replaceAll("Y","y");return dateformat=(dateformat||"").replaceAll("D","d"),{date:dateformat,month:"yyyy-MM",datetime:"".concat(dateformat," ").concat($timeformat),time:"".concat($timeformat),week:"yyyywWW",timerange:"".concat($timeformat),daterange:"".concat(dateformat),monthrange:"yyyy-MM",datetimerange:"".concat(dateformat," ").concat($timeformat),year:"yyyy"}},pickerFormat:function(){var _ref2=this||{},defaultFormats=_ref2.defaultFormats,type=_ref2.type,format=_ref2.format;return(0,validation/* isEmpty */.xb)(format)&&!(0,validation/* isEmpty */.xb)(defaultFormats[type])?defaultFormats[type]:format},ttime:{get:function(){var _this=this,_ref3=this||{},value=_ref3.value,isRangeType=_ref3.isRangeType;return(0,validation/* isEmpty */.xb)(value)?isRangeType?[]:"":isRangeType?value.map((function(val){return _this.getTimeInSystemZone(val)})):this.getTimeInSystemZone(value)},set:function(value){var isRangeType=this.isRangeType;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("input",this.timeinorg),this.$emit("change",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("input",modifiedTimeFormat),this.$emit("change",modifiedTimeFormat)}}}},methods:{pickerChange:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("pickerChange",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("pickerChange",modifiedTimeFormat)}},init:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value){var timeVal=parseInt(value[time]);this.timeinorg[time]=timeVal}this.$emit("input",this.timeinorg)}else if(!(0,validation/* isEmpty */.xb)(value)){var isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)||!1;isPlaceHoldersEnabled||this.$emit("input",value)}this.$emit("initialized")},focus:function(){this.$refs["date-picker"].focus()},getTimeInSystemZone:function(value){return new Date(moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss"))}}},overview_FDatePickervue_type_script_lang_js=FDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(overview_FDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDatePicker=component.exports},
/***/365678:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FieldsList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/modules/FieldsList.vue?vue&type=template&id=213146b5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"custom-modules-details"},[_c("div",{staticClass:"user-layout"},[_c("portal",{attrs:{to:"module-summary-actions",slim:""}},[_c("div",{staticClass:"action-btn"},[_c("el-dropdown",{staticClass:"setup-el-btn",on:{command:_vm.addNewForm}},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"}},[_vm._v(" New Custom Field "),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"addField"}},[_vm._v("Add field")]),_c("el-dropdown-item",{attrs:{command:"customField"}},[_vm._v(" Add field in template ")]),_c("el-dropdown-item",{attrs:{command:"rollup"}},[_vm._v(" Add Rollup Field ")])],1)],1),_vm.showDialog?_c("NewCustomField",{attrs:{visibility:_vm.showDialog,isNew:_vm.isNew,module:_vm.moduleName,field:_vm.selectedField},on:{"update:visibility":function($event){_vm.showDialog=$event},onsave:_vm.loadFields}}):_vm._e()],1)]),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout mT30"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.label"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.field_type"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.type"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.link_name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])]),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_c("tbody",_vm._l(_vm.filteredFields,(function(field,index){return _c("tr",{key:index,staticClass:"tablerow"},[_c("td",{staticStyle:{"padding-top":"18px","padding-bottom":"18px"}},[_vm._v(" "+_vm._s(field.displayName)+" ")]),_c("td",[_vm._v(" "+_vm._s(field.displayType&&_vm.displayTypeMap[field.displayType]?_vm.displayTypeMap[field.displayType]:field.dataTypeEnum?field.dataTypeEnum:null)+" ")]),_c("td",[_vm._v(_vm._s(field.default?"System":"Custom"))]),_c("td",[_vm._v(_vm._s(field.name))]),_c("td",[_c("div",{staticClass:"actions pointer flex-row-space min-width100px"},[field.default||field.locked?_vm._e():[_c("i",{staticClass:"el-icon-edit pointer",on:{click:function($event){return _vm.editField(field)}}}),_c("i",{staticClass:"el-icon-delete pointer mL30",on:{click:function($event){return _vm.deleteField(field)}}})],_vm.showFieldPermissionDropDown(field)?_c("el-dropdown",{staticClass:"mL-auto",attrs:{trigger:"click"}},[_c("span",{staticClass:"el-dropdown-link "},[_c("InlineSvg",{attrs:{src:"svgs/menu",iconClass:"icon icon-xs mR10"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.showFieldPermission(field)}}},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.field_permission"))+" ")])])],1)],1):_vm._e()],2)])])})),0)])])])]),_vm.showFormCreation?_c("FieldPermissionEditForm",{attrs:{selectedField:_vm.selectedField},on:{save:_vm.loadFields,close:function($event){_vm.showFormCreation=!1}}}):_vm._e(),_vm.showRollupField?_c("NewRollupField",{attrs:{visibility:_vm.showRollupField,isNew:_vm.isNew,model:_vm.rollupFieldGet,module:_vm.moduleName},on:{saved:_vm.loadFields,"update:visibility":function($event){_vm.showRollupField=$event}}}):_vm._e(),_c("el-dialog",{staticClass:"fc-dialog-center-container fc-dialog-center-body-p0 scale-up-center",attrs:{title:"List of Form Templates",visible:_vm.dialogVisible,width:"40%","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_vm.loading?_c("div",{staticClass:"flex-middle height450"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.formTemplateData)&&!_vm.loading?_c("div",{staticClass:"height450 flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Template available ")])],1):_vm._e(),_vm.loading||_vm.$validation.isEmpty(_vm.formTemplateData)?_vm._e():_c("el-table",{staticClass:"fc-table-th-pLalign-reduce mB60",staticStyle:{width:"100%"},attrs:{data:_vm.formTemplateData,stripe:"",height:"450"}},[_c("el-table-column",{attrs:{prop:"Name",label:"Name"},scopedSlots:_vm._u([{key:"default",fn:function(formList){return[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:formList.row},model:{value:_vm.selectedRow,callback:function($$v){_vm.selectedRow=$$v},expression:"selectedRow"}},[_vm._v(" "+_vm._s(formList.row.displayName)+" ")])]}}],null,!1,446006235)}),_c("el-table-column",{attrs:{prop:"Type",label:"Type"},scopedSlots:_vm._u([{key:"default",fn:function(formList){return[_vm._v(" "+_vm._s(formList.row.formTypeVal)+" ")]}}],null,!1,2811944200)})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" CANCEL ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.editForm}},[_vm._v(" Ok ")])],1)],1)],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),constant=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(354754)),NewCustomFieldvue_type_template_id_915745e0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("el-form",{ref:"ruleForm",attrs:{"label-position":"top"}},[_c("div",{attrs:{id:"newcustomfield"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?"New Custom Field":"Edit Custom Field")+" ")])])]),_c("div",{staticClass:"new-body-modal"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt pB10"},[_vm._v("Field name")]),_c("el-form-item",{attrs:{prop:"name"}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{autofocus:!0,type:"text",placeholder:"Enter Field Name"},model:{value:_vm.fieldLabel,callback:function($$v){_vm.fieldLabel=$$v},expression:"fieldLabel"}})],1)],1)],1),_vm.isNew?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pB10"},[_vm._v("Field Type")]),_c("el-form-item",{attrs:{prop:"fieldType"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Choose Fieldtype"},model:{value:_vm.fieldType,callback:function($$v){_vm.fieldType=$$v},expression:"fieldType"}},_vm._l(_vm.newfield,(function(fieldType){return _vm.isNew&&"SELECTBOX"!==fieldType.type||!_vm.isNew?_c("el-option",{key:fieldType.type,attrs:{label:fieldType.label,value:fieldType.type}}):_vm._e()})),1)],1)],1)],1):_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pB10"},[_vm._v("Field Type")]),_c("el-form-item",[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{disabled:!0,type:"text",placeholder:"Enter Field Name"},model:{value:_vm.fieldTypeLabel,callback:function($$v){_vm.fieldTypeLabel=$$v},expression:"fieldTypeLabel"}})],1)],1)],1)],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.saveCustomField("ruleForm")}}},[_vm._v(_vm._s(_vm.saving?"Saving...":"Save"))])],1)])],1)},NewCustomFieldvue_type_template_id_915745e0_staticRenderFns=[],esm_typeof=__webpack_require__(103336),ErrorBanner=(__webpack_require__(162506),__webpack_require__(297157)),NewCustomFieldvue_type_script_lang_js={props:["module","field","isNew","visibility"],components:{ErrorBanner:ErrorBanner/* default */.Z},data:function(){return{showPicklistItems:!1,moduleName:null,showAssetDapartments:!1,fieldId:-1,name:"",fieldType:null,fieldLabel:null,fieldTypeLabel:null,fieldRequired:!1,fieldOptions:[],error:!1,errorText:"",saving:!1,fieldTypes:[{type:"TEXTBOX",label:"Single Line Text",displayType:1,dataType:1,hint:"Capture small text."},{type:"TEXTAREA",label:"Multi Line Text",displayType:2,dataType:18,hint:"Capture larger amounts of text, typically spanning multiple lines."},{type:"EMAIL",label:"Email",displayType:8,dataType:1,hint:"Capture a email address"},{type:"NUMBER",label:"Number",displayType:9,dataType:2,hint:"Capture a numeric value. Only integers allowed."},{type:"DECIMAL",label:"Decimal",displayType:13,dataType:3,hint:"Capture a decimal value."},{type:"SELECTBOX",label:"Pick List",displayType:3,dataType:1,hint:"Provide a picklist with options you define. The record will be tagged accordingly."},{type:"DATE",label:"Date",displayType:6,dataType:5,hint:"Capture a date in the future or past."},{type:"DATETIME",label:"Datetime",displayType:7,dataType:6,hint:"Capture a datetime in the future or past."},{type:"RADIO",label:"Radio",displayType:4,dataType:4,hint:"Capture one value from the listed options."},{type:"DECISION_BOX",label:"Checkbox",displayType:5,dataType:4,hint:"Capture a yes/no value."}],newfield:[{type:"TEXTBOX",label:"Single Line Text",displayType:1,dataType:1,hint:"Capture small text."},{type:"TEXTAREA",label:"Multi Line Text",displayType:2,dataType:18,hint:"Capture larger amounts of text, typically spanning multiple lines."},{type:"NUMBER",label:"Number",displayType:9,dataType:2,hint:"Capture a numeric value. Only integers allowed."},{type:"DATE",label:"Date",displayType:6,dataType:5,hint:"Capture a date in the future or past."},{type:"DATETIME",label:"Datetime",displayType:7,dataType:6,hint:"Capture a date in the future or past."},{type:"SELECTBOX",label:"Pick List",displayType:3,dataType:1,hint:"Provide a picklist with options you define. The record will be tagged accordingly."}]}},computed:{selectedFieldType:function(){var _this=this;if(this.fieldType){var ftype=this.fieldTypes.filter((function(fieldType){return fieldType.type===_this.fieldType}));if(ftype&&ftype.length)return ftype[0]}return null},assetCategory:function(){return this.$store.state.assetCategory}},mounted:function(){this.initField()},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAssetDepartment")},methods:{reset:function(){this.fieldId=-1,this.fieldType=null,this.fieldLabel=null,this.fieldTypeLabel=null,this.fieldRequired=!1,this.fieldOptions=[]},closeDialog:function(){this.$emit("update:visibility",!1)},handleclose:function(){this.reset()},removeFieldOption:function(index){this.fieldOptions.splice(index,1)},addFieldOption:function(){this.fieldOptions.push({value:""})},initField:function(){this.isNew?(this.fieldId=-1,this.fieldLabel=null,this.fieldType=null,this.fieldRequired=!1):(this.fieldId=this.field.fieldId,this.fieldLabel=this.field.displayName,this.field.displayType&&"LOOKUP_SIMPLE"===this.field.displayType||"LOOKUP_POPUP"===this.field.displayType?this.fieldTypeLabel="SELECTBOX":this.field.displayType&&"TEXTBOX"===this.field.displayType?this.fieldTypeLabel="Single Line Text":this.field.displayType&&"TEXTAREA"===this.field.displayType?this.fieldTypeLabel="Multi Line Text":this.fieldTypeLabel=this.field.dataTypeEnum,this.fieldRequired=this.field.required,"SELECTBOX"===this.fieldType&&this.loadFieldOptions(this.field))},loadFieldOptions:function(field){if("asset"===this.module&&"department"===field.name){for(var dept in this.showPicklistItems=!0,this.$store.state.assetDepartment)this.fieldOptions({name:dept.name});this.showAssetDapartments=!0}0===this.fieldOptions.length&&this.addFieldOption()},validation:function(ruleForm){if(this.error=!1,this.errorText="",null===this.fieldLabel||""===this.fieldLabel)return this.errorText="Please enter the Field Name",this.error=!0,!1;null===this.fieldType&&this.isNew?(this.errorText="Please select Field Type",this.error=!0):(this.errorText="",this.error=!1)},saveCustomField:function(ruleForm){var self=this;if(this.validation(),!this.error){self.saving=!0;var newCF={};if(newCF=this.isNew?{dataType:this.selectedFieldType.dataType,displayName:this.fieldLabel,displayType:this.selectedFieldType.type,displayTypeInt:this.selectedFieldType.displayType,required:this.fieldRequired}:{dataType:this.field.dataType,displayName:this.fieldLabel,displayType:this.field.displayType,displayTypeInt:this.field.displayTypeInt,required:this.field.required,fieldId:this.field.id},this.fieldId>0){
// update field
newCF.fieldId=this.fieldId;var updateObj={fieldId:this.fieldId,field:newCF};self.$http.post("/module/updatefield",updateObj).then((function(response){self.$emit("onsave",newCF),self.$emit("update:visibility",!1),self.$dialog.notify("Field updated successfully!")}))}else{var addObj={moduleName:this.moduleName?this.moduleName:this.module,fields:[newCF]};self.$http.post("/module/addfields",addObj).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)&&(newCF.fieldId=response.data[0],newCF.displayType={_name:self.selectedFieldType.label},self.$emit("update:visibility",!1),newCF.id=response.data[0],newCF.fieldId=response.data[0],newCF.displayType._name=newCF.displayType._name.toUpperCase(),self.$emit("onsave",newCF),self.$dialog.notify("Field created successfully!"),self.fields.splice(self.fields.indexOf(self.field),1))}))}}},cancel:function(){this.$emit("canceled")}}},components_NewCustomFieldvue_type_script_lang_js=NewCustomFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_NewCustomFieldvue_type_script_lang_js,NewCustomFieldvue_type_template_id_915745e0_render,NewCustomFieldvue_type_template_id_915745e0_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewCustomField=component.exports,NewRollupFieldsvue_type_template_id_72143ef6_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form setup-dialog50 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("el-form",{ref:"roolupForm",attrs:{model:_vm.rollupData,"label-position":"top"}},[_c("el-header",{staticClass:"fc-dialog-right-header",attrs:{height:"50"}},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?"New":"Edit")+" Rollup Fields ")])]),_c("div",{staticClass:"new-body-modal"},[_c("el-form-item",{attrs:{label:"Name",prop:"name"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",placeholder:"Enter user name"},model:{value:_vm.rollupData.name,callback:function($$v){_vm.$set(_vm.rollupData,"name",$$v)},expression:"rollupData.name"}})],1),_c("el-form-item",{attrs:{label:"Description",prop:"description"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"textarea",autosize:{minRows:2,maxRows:2},resize:"none",placeholder:_vm.$t("common._common.enter_desc")},model:{value:_vm.rollupData.description,callback:function($$v){_vm.$set(_vm.rollupData,"description",$$v)},expression:"rollupData.description"}})],1),_c("div",{staticClass:"fc-text-pink mT20"},[_vm._v("CONFIGURATION")]),_c("el-form-item",{attrs:{label:"Module",prop:"module"}},[_c("el-select",{staticClass:"width70",attrs:{placeholder:"Select",filterable:"",clearable:""},on:{change:function($event){return _vm.moduleChange(_vm.rollupData)}},model:{value:_vm.rollupData.formModule,callback:function($$v){_vm.$set(_vm.rollupData,"formModule",$$v)},expression:"rollupData.formModule"}},_vm._l(_vm.moduleValueDatas,(function(moduleValue,index){return _c("el-option",{key:index,attrs:{label:moduleValue.displayName,value:moduleValue.name}})})),1)],1),_c("el-form-item",{attrs:{label:"Rollup Type",prop:"rollupType"}},[_c("el-radio-group",{model:{value:_vm.rollupData.rollupType,callback:function($$v){_vm.$set(_vm.rollupData,"rollupType",$$v)},expression:"rollupData.rollupType"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:1}},[_vm._v("Count")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:3}},[_vm._v("Sum")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:4}},[_vm._v("Min")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:5}},[_vm._v("Max")])],1)],1),_c("el-form-item",{attrs:{label:"Field to Aggregate",prop:"aggregate"}},[_c("el-select",{staticClass:"width70",attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:_vm.rollupData.aggregate,callback:function($$v){_vm.$set(_vm.rollupData,"aggregate",$$v)},expression:"rollupData.aggregate"}},_vm._l(_vm.categoryFields,(function(category,index){return _c("el-option",{key:index,attrs:{label:category.displayName,value:category.name}})})),1)],1),_c("el-form-item",{staticClass:"pT10",attrs:{prop:"criteria"}},[_c("el-radio-group",{model:{value:_vm.rollupData.criteriaSelect,callback:function($$v){_vm.$set(_vm.rollupData,"criteriaSelect",$$v)},expression:"rollupData.criteriaSelect"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:4}},[_vm._v("All records")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:5}},[_vm._v("Specific records")])],1)],1),5===_vm.rollupData.criteriaSelect?_c("new-criteria-builder",{attrs:{exrule:_vm.rollupData.criteria,title:"Specify rules for event filtering",module:_vm.rollupData.formModule},on:{condition:_vm.somefnt},model:{value:_vm.rollupData.criteria,callback:function($$v){_vm.$set(_vm.rollupData,"criteria",$$v)},expression:"rollupData.criteria"}}):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm("roolupForm")}}},[_vm._v(_vm._s(_vm.saving?"Saving...":"SAVE"))])],1)],1)],1)],1)},NewRollupFieldsvue_type_template_id_72143ef6_staticRenderFns=[],NewCriteriaBuilder=(__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(506203),__webpack_require__(425728),__webpack_require__(859850)),api=__webpack_require__(32284),validation=__webpack_require__(990260),NewRollupFieldsvue_type_script_lang_js={props:["visibility","isNew","module","model"],data:function(){return{saving:!1,loading:!0,rollupData:{name:"",description:"",formModule:null,rollupType:1,aggregate:null,criteriaSelect:4,criteria:null,id:""},moduleValueDatas:[],asset:null,categoryFields:[],category:null}},components:{NewCriteriaBuilder:NewCriteriaBuilder/* default */.Z},computed:{},mounted:function(){this.loadAssetFields(),this.isNew||Object.assign(this.rollupData,{name:this.model.parentRollUpField.displayName,description:this.model.description,formModule:this.model.childModule.name,rollupType:this.model.aggregateFunctionId,aggregate:this.model.aggregateField.displayName,criteriaSelect:(0,validation/* isEmpty */.xb)(this.model.childCriteria)?4:5,criteria:this.model.childCriteria,id:this.model.parentRollUpField.id})},methods:{closeDialog:function(){this.$emit("update:visibility",!1)},loadAssetFields:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,error,data,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,_context.next=3,api/* API */.bl.get("v2/rollUpField/fetchRollUpSubModules?moduleName=".concat(_this.module));case 3:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?(message=error.message,_this.$message.error(message)):(_this.moduleValueDatas=data.submodules,_this.loading=!1);case 7:case"end":return _context.stop()}}),_callee)})))()},somefnt:function(newVal){this.rollupData.criteria=newVal},loadMetaFields:function(){var _this2=this;this.loading=!0;var moduleData=this.rollupData.formModule,spaceRemoved=moduleData.split(" ").join("");
// if(spaceRemoved) {
//   return
// }
this.categoryFields=[],this.$http.get("module/metafields?moduleName=".concat(spaceRemoved)).then((function(response){_this2.categoryFields=response.data.meta.fields||[],_this2.loading=!1}))},moduleChange:function(rollupData){rollupData.formModule?(this.aggregate=this.moduleValueDatas.length>0?this.moduleValueDatas[0].id:null,this.loadMetaFields(),rollupData.criteria=null,rollupData.criteriaSelect=4,rollupData.aggregate=null,this.categoryFields=null):(rollupData.criteria=null,rollupData.criteriaSelect=4,rollupData.aggregate=null,this.categoryFields=null)},submitForm:function(roolupForm){var _this3=this;this.$refs[roolupForm].validate((function(valid){if(valid)if(_this3.saving=!0,_this3.isNew){var rollupFieldData={moduleName:_this3.module,fields:[{displayName:_this3.rollupData.name}],childModuleId:_this3.moduleValueDatas.find((function(module){return module.name===_this3.rollupData.formModule})).moduleId,aggregateFunctionId:_this3.rollupData.rollupType,description:_this3.rollupData.description,aggregateFieldId:_this3.categoryFields.find((function(module){return module.name===_this3.rollupData.aggregate})).id};5===_this3.rollupData.criteriaSelect?rollupFieldData.criteria=_this3.rollupData.criteria:rollupFieldData.criteria={criteriaId:-99},_this3.$http.post("/v2/rollUpField/add",rollupFieldData).then((function(response){var _response$data2=response.data,responseCode=_response$data2.responseCode,message=_response$data2.message;0===responseCode?(_this3.$message("New rollup field added."),_this3.saving=!1,_this3.$emit("update:visibility",!1),_this3.$emit("saved"),_this3.resetForm()):(_this3.$message.error(message),_this3.saving=!1)}))}else{var rollupFieldUpdate={aggregateFunctionId:_this3.rollupData.rollupType,description:_this3.rollupData.description,field:{displayName:_this3.rollupData.name,id:_this3.rollupData.id}};5===_this3.rollupData.criteriaSelect?rollupFieldUpdate.criteria=_this3.rollupData.criteria:rollupFieldUpdate.criteria={criteriaId:-99},_this3.$http.post("/v2/rollUpField/update",rollupFieldUpdate).then((function(response){var _response$data=response.data,responseCode=_response$data.responseCode,message=_response$data.message;0===responseCode?(_this3.$message("Edit Rollup fields updated."),_this3.saving=!1,_this3.$emit("update:visibility",!1),_this3.$emit("saved"),_this3.resetForm()):(_this3.$message.error(message),_this3.saving=!1)}))}}))},resetForm:function(){this.$refs["roolupForm"].resetFields()}}},components_NewRollupFieldsvue_type_script_lang_js=NewRollupFieldsvue_type_script_lang_js,NewRollupFields_component=(0,componentNormalizer/* default */.Z)(components_NewRollupFieldsvue_type_script_lang_js,NewRollupFieldsvue_type_template_id_72143ef6_render,NewRollupFieldsvue_type_template_id_72143ef6_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewRollupFields=NewRollupFields_component.exports,utility_methods=__webpack_require__(555005),FieldPermissionEditFormvue_type_template_id_094d440a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"d-flex",attrs:{title:_vm.$t("setup.setupLabel.field_permission"),visible:!0,fullscreen:!1,"append-to-body":!0,"before-close":_vm.closeDialog,"custom-class":"fc-dialog-center-container module-field-permission"}},[_c("el-form",{ref:"fieldPermissionForm",attrs:{model:_vm.fieldObj}},[_c("el-form-item",{staticClass:"d-flex",attrs:{label:_vm.$t("setup.setupLabel.export")}},[_c("el-radio-group",{staticClass:"pL30",model:{value:_vm.fieldObj.exportable,callback:function($$v){_vm.$set(_vm.fieldObj,"exportable",$$v)},expression:"fieldObj.exportable"}},_vm._l(_vm.buttonOptions,(function(value,label){return _c("el-radio",{key:value,staticClass:"fc-radio-btn",attrs:{label:value}},[_vm._v(" "+_vm._s(label)+" ")])})),1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel border-bottom-left-radius",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.cancel")))]),_c("el-button",{staticClass:"modal-btn-save border-bottom-right-radius",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.updateCustomField}},[_vm._v(_vm._s(_vm.handleSaving))])],1)],1)},FieldPermissionEditFormvue_type_template_id_094d440a_scoped_true_staticRenderFns=[],objectSpread2=__webpack_require__(595082),FieldPermissionEditFormvue_type_script_lang_js={props:["selectedField"],data:function(){return{buttonOptions:{Allow:!0,"Don't Allow":!1},saving:!1,fieldObj:{exportable:null,dataType:null}}},computed:{handleSaving:function(){return this.saving?this.$t("common._common._saving"):this.$t("common._common._save")}},created:function(){var _ref=this.selectedField||{},exportable=_ref.exportable,dataType=_ref.dataType,fieldId=_ref.id;this.fieldObj={exportable:exportable,dataType:dataType,fieldId:fieldId}},methods:{closeDialog:function(){this.$emit("close")},updateCustomField:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,url,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.saving=!0,params={fieldJson:(0,objectSpread2/* default */.Z)({},_this.fieldObj||{})},url="v2/modules/fields/update",_context.next=5,api/* API */.bl.post(url,params);case 5:_yield$API$post=_context.sent,error=_yield$API$post.error,error?_this.$message.error(error.message||_this.$t("common._common.error_occured")):(_this.$message.success(_this.$t("forms.field_permission.update_success")),_this.$emit("save"),_this.closeDialog()),_this.saving=!1;case 9:case"end":return _context.stop()}}),_callee)})))()}}},setup_FieldPermissionEditFormvue_type_script_lang_js=FieldPermissionEditFormvue_type_script_lang_js,FieldPermissionEditForm_component=(0,componentNormalizer/* default */.Z)(setup_FieldPermissionEditFormvue_type_script_lang_js,FieldPermissionEditFormvue_type_template_id_094d440a_scoped_true_render,FieldPermissionEditFormvue_type_template_id_094d440a_scoped_true_staticRenderFns,!1,null,"094d440a",null)
/* harmony default export */,FieldPermissionEditForm=FieldPermissionEditForm_component.exports,FieldsListvue_type_script_lang_js={props:["moduleName"],components:{NewCustomField:NewCustomField,NewRollupField:NewRollupFields,FieldPermissionEditForm:FieldPermissionEditForm},data:function(){return{selectedRow:null,loading:!0,fields:[],selectedField:null,isNew:!1,dialogVisible:!1,showDialog:!1,showRollupField:!1,formList:null,rollupFieldGet:[],formTemplateData:[],showFormCreation:!1,displayTypeMap:{LOOKUP_POPUP:"Picklist",LOOKUP_SIMPLE:"Picklist",DATETIME:"Datetime",DATE:"Date",TEXTAREA:"Multi Line Text",TEXTBOX:"Single Line Text",NUMBER:"Number",ROLL_UP_FIELD:"Rollup Field",CURRENCY:"Currency",MULTI_CURRENCY:"Multi Currency"}}},created:function(){this.loadFields()},computed:{filteredFields:function(){var fields=this.fields,$constants=this.$constants,moduleName=this.moduleName,HideFieldsSpecificToModule=$constants.HideFieldsSpecificToModule,hiddenFields=HideFieldsSpecificToModule[moduleName]||[];return fields.filter((function(f){return!hiddenFields.includes(f.name)}))}},watch:{moduleName:function(){this.loadFields()}},methods:{loadFields:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleName,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,moduleName=_this.moduleName,_context.next=4,api/* API */.bl.get("/v2/modules/fields/fields",{moduleName:moduleName});case 4:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this.$message.error(error.message||"Error Occurred"):_this.fields=data.fields,_this.loading=!1;case 9:case"end":return _context.stop()}}),_callee)})))()},showRollUpForm:function(){this.selectedField=null,this.isNew=!0,this.showRollupField=!0},editField:function(field){var displayType=field.displayType;displayType&&"Rollup Field"===this.displayTypeMap[displayType]?(this.isNew=!1,this.getRollupFieldData(field)):(this.showDialog=!0,this.isNew=!1,this.selectedField=field)},showFieldPermissionDropDown:function(field){var _ref=field||{},dataTypeEnum=_ref.dataTypeEnum;return"LARGE_TEXT"!==dataTypeEnum},editForm:function(){var moduleName=this.moduleName,selectedRow=this.selectedRow,id=selectedRow.id;if(-1===id){
/* Have to add the default forms to the DB, before editing them */
var formData=(0,utility_methods/* serializeProps */._$)(selectedRow,constant/* default */.Z.FORM_RESOURCE_PROPS),data={form:formData};this.saveRecord(data)}else{var currentPath=this.$router.resolve({name:"modules-details",params:{moduleName:moduleName}}).href;this.$router.push({path:"".concat(currentPath,"/layouts/").concat(id,"/edit")})}},saveRecord:function(data){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,url,_yield$API$post,error,dataObj,id,currentPath;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return!(0,validation/* isEmpty */.xb)(data.form)&&(0,validation/* isEmpty */.xb)(data.form.stateFlowId)&&(data.form.stateFlowId=-99),moduleName=_this2.moduleName,url="v2/forms/add",data.moduleName=moduleName,_context2.next=6,api/* API */.bl.post(url,data);case 6:_yield$API$post=_context2.sent,error=_yield$API$post.error,dataObj=_yield$API$post.data,error?_this2.$message.error(error.message||"Error Occurred"):(id=dataObj.form.id,currentPath=_this2.$router.resolve({name:"modules-details",params:{moduleName:moduleName}}).href,_this2.$router.push({path:"".concat(currentPath,"/layouts/").concat(id,"/edit")}));case 10:case"end":return _context2.stop()}}),_callee2)})))()},deleteField:function(customField){var _this3=this,id=customField.id,displayName=customField.displayName,formData={fieldIds:[id]};this.$dialog.confirm({title:"Delete Field",message:"Are you sure you want to delete this Custom Field?"+displayName+"?",rbDanger:!0,rbLabel:"Delete"}).then(function(){var _ref2=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(value){var _yield$API$post2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!value){_context3.next=6;break}return _context3.next=3,api/* API */.bl.post("/module/deletefields",formData);case 3:_yield$API$post2=_context3.sent,error=_yield$API$post2.error,error?_this3.$message.error("Error in deleting"):(_this3.fields=_this3.fields.filter((function(field){return id!==field.id})),_this3.$message.success("Successfully deleted the field"));case 6:case"end":return _context3.stop()}}),_callee3)})));return function(_x){return _ref2.apply(this,arguments)}}())},showFieldPermission:function(field){this.selectedField=field,this.showFormCreation=!0},addNewForm:function(cmd){"rollup"===cmd?this.showRollUpForm():"customField"===cmd?(this.dialogVisible=!0,this.getFormTemplateList()):"addField"===cmd&&this.openCustomFields()},openCustomFields:function(){this.showDialog=!0,this.isNew=!0,this.selectedField=null},getRollupFieldData:function(field){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _yield$API$get2,error,data,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,api/* API */.bl.get("v2/rollUpField/getRollUpFields?fieldIds=".concat(field.id));case 2:_yield$API$get2=_context4.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error?(message=error.message,_this4.$message.error(message)):(_this4.rollupFieldGet=data.rollUpFields[0],_this4.showRollupField=!0);case 6:case"end":return _context4.stop()}}),_callee4)})))()},closeDialog:function(){this.dialogVisible=!1},getFormTemplateList:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var _yield$API$get3,error,data,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _this5.loading=!0,_context5.next=3,api/* API */.bl.get("/v2/forms?moduleName=".concat(_this5.moduleName));case 3:_yield$API$get3=_context5.sent,error=_yield$API$get3.error,data=_yield$API$get3.data,error?(message=error.message,_this5.$message.error(message)):(_this5.formTemplateData=data.forms,_this5.loading=!1);case 7:case"end":return _context5.stop()}}),_callee5)})))()}}},modules_FieldsListvue_type_script_lang_js=FieldsListvue_type_script_lang_js,FieldsList_component=(0,componentNormalizer/* default */.Z)(modules_FieldsListvue_type_script_lang_js,render,staticRenderFns,!1,null,"213146b5",null)
/* harmony default export */,FieldsList=FieldsList_component.exports},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/385769:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4a9843791f38c4a28fdf9f0a4584780d.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/46766.js.map