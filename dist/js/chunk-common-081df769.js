"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[22061],{
/***/853708:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(566347),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(595082),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(554621),lodash_merge__WEBPACK_IMPORTED_MODULE_16__=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(169358),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(336585),__webpack_require__(670560),__webpack_require__(947522),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(879288),__webpack_require__(682492)),lodash_merge__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_16__),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(150361),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17__),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(990260),src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(483700),_facilio_api__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(32284);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={data:function(){return{hiddenWidgetsHashMap:{},recentTimelineFilterPayload:{},recentUserFilterPayload:{},recentActionsPayload:{},rawUserFilter:{}}},methods:{getDashboardTabId:function(){return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(this.dashboardTabId)?{}:{dashboardTabId:this.dashboardTabId}},removeTriggerWidgetId:function(){var _recentTimelineFilter,_recentUserFilterPayl,_recentActionsPayload,recentTimelineFilterPayload=this.recentTimelineFilterPayload,recentUserFilterPayload=this.recentUserFilterPayload,recentActionsPayload=this.recentActionsPayload;null===recentTimelineFilterPayload||void 0===recentTimelineFilterPayload||null===(_recentTimelineFilter=recentTimelineFilterPayload.action_meta)||void 0===_recentTimelineFilter||delete _recentTimelineFilter.trigger_widget_id,null===recentUserFilterPayload||void 0===recentUserFilterPayload||null===(_recentUserFilterPayl=recentUserFilterPayload.action_meta)||void 0===_recentUserFilterPayl||delete _recentUserFilterPayl.trigger_widget_id,null===recentActionsPayload||void 0===recentActionsPayload||null===(_recentActionsPayload=recentActionsPayload.action_meta)||void 0===_recentActionsPayload||delete _recentActionsPayload.trigger_widget_id},getUserFilterReq:function(_ref){var filter=_ref.filter,filterId=_ref.filterId,dashboardId=this.dashboardId,userFilterList=this.userFilterList,placeHolderMeta=function(){return Object.keys(filter).reduce((function(placeHolderMeta,key){var _field$name,_field$module$name,_field$module,_userFilterList$find=userFilterList.find((function(userFilter){return userFilter.id==key})),linkName=_userFilterList$find.link_name,field=_userFilterList$find.field,moduleName=_userFilterList$find.moduleName;return placeHolderMeta[linkName]={fieldName:null!==(_field$name=null===field||void 0===field?void 0:field.name)&&void 0!==_field$name?_field$name:moduleName,moduleName:null!==(_field$module$name=null===field||void 0===field||null===(_field$module=field.module)||void 0===_field$module?void 0:_field$module.name)&&void 0!==_field$module$name?_field$module$name:moduleName},placeHolderMeta}),{})},placeHolders=function(){return Object.entries(filter).reduce((function(placeHolders,_ref2){var _ref3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_ref2,2),id=_ref3[0],filter=_ref3[1],_userFilterList$find2=userFilterList.find((function(userFilter){return userFilter.id==id})),linkName=_userFilterList$find2.link_name,dateTimeValues=_userFilterList$find2.dateTimeValues,selectedSliderRangeValues=_userFilterList$find2.selectedSliderRangeValues;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(dateTimeValues)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(selectedSliderRangeValues))
// This is done to handle `multi-select` and `dropdowns`.
placeHolders[linkName]={value:lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(filter)};else{
// This is done to handle `slider filter`.
var getDateTimeValues=function(){
// This is stupid, in the `first load` the object dateTimeValue
// returns `undefined` for some reason, so we construct the range by ourselves.
if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(dateTimeValues)){for(var _selectedSliderRangeV=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(selectedSliderRangeValues,2),start=_selectedSliderRangeV[0],end=_selectedSliderRangeV[1],preparedDateTimeValues=[],i=start;i<=end;i++)preparedDateTimeValues.push(String(i));return preparedDateTimeValues}return lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(dateTimeValues)};placeHolders[linkName]={value:getDateTimeValues(),operatorId:filter}}return placeHolders}),{})};return{action_meta:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)({dashboardId:dashboardId,placeHolders:placeHolders(),placeHoldersMeta:placeHolderMeta(),trigger_widget_id:filterId},this.getDashboardTabId())}},getTimelineFilterReq:function(timelineFilter){var _ref4=null!==timelineFilter&&void 0!==timelineFilter?timelineFilter:{},startTime=_ref4.startTime,endTime=_ref4.endTime,operatorId=_ref4.operatorId,dateValueString=_ref4.dateValueString,dateLabel=_ref4.dateLabel,_ref5=null!==this&&void 0!==this?this:{},dashboardId=_ref5.dashboardId;return{action_meta:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)({placeHolders:{startTime:startTime,endTime:endTime,dateOperator:operatorId,dateValueString:dateValueString,dateLabel:dateLabel},dashboardId:dashboardId},this.getDashboardTabId())}},timelineFilterChanged:function(filterData){this.persistDbTimelineFilter(filterData),// This is used when download the dashboard as .pdf.
this.removeTriggerWidgetId();var recentUserFilterPayload=this.recentUserFilterPayload,recentActionsPayload=this.recentActionsPayload,timelineFilterPayload=this.getTimelineFilterReq(filterData);this.recentTimelineFilterPayload=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(timelineFilterPayload);var req=lodash_merge__WEBPACK_IMPORTED_MODULE_16___default()(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(recentActionsPayload),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(recentUserFilterPayload),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(timelineFilterPayload));this.executeActions(req)},userFilterChanged:function(filterData){var filter=filterData.filter;this.rawUserFilter=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(filter),this.persistDbUserFilters(filter),this.removeTriggerWidgetId();var recentTimelineFilterPayload=this.recentTimelineFilterPayload,recentActionsPayload=this.recentActionsPayload,userFilterPayload=this.getUserFilterReq(filterData);this.recentUserFilterPayload=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(userFilterPayload);var req=lodash_merge__WEBPACK_IMPORTED_MODULE_16___default()(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(recentActionsPayload),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(recentTimelineFilterPayload),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(userFilterPayload));this.executeActions(req)},executeActions:function(req){var _this=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee(){var self,_yield$API$post,widgets,_widgets$reduce,localActions,globalActions;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(self=_this,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(req)){_context.next=9;break}return _context.next=4,_facilio_api__WEBPACK_IMPORTED_MODULE_19__/* .API */.bl.post("/v3/dashboard/rule/execute",req);case 4:_yield$API$post=_context.sent,widgets=_yield$API$post.data.result,
// if (isEmpty(this.hiddenWidgetsHashMap)) {
//   widgets.push({
//     actionType: 'hide_sections',
//     actionMeta: {
//       HIDE_SECTIONS: {
//         section_ids: ['23604'],
//       },
//     },
//   })
// } else {
//   widgets.push({
//     actionType: 'show_sections',
//     actionMeta: {
//       SHOW_SECTIONS: {
//         section_ids: ['23604'],
//       },
//     },
//   })
// }
_widgets$reduce=widgets.reduce((function(actions,widget){var globalActions=actions.globalActions,localActions=actions.localActions,_ref6=null!==widget&&void 0!==widget?widget:{},actionWidgetId=_ref6.widget_id;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(actionWidgetId)?globalActions.push(widget):localActions.push(widget),actions}),{globalActions:[],localActions:[]}),localActions=_widgets$reduce.localActions,globalActions=_widgets$reduce.globalActions,// We must first `show` the widgets, and then apply other actions on them.
// If we don't do this the widgets will show (Mount on DOM) but they won't load because
// the order to load the widget has already been given to the widget (THe widget doesn't exist in the DOM)...
globalActions.forEach((function(widget){self.executeGlobalActions(widget)})),localActions.forEach((function(widget){self.executeLocalActions(widget)}));case 9:case"end":return _context.stop()}}),_callee)})))()},executeLocalActions:function(widget){var self=this;this.$nextTick((function(){var _self$dashboardFilter,id=String(widget.widget_id),_ref7=null!==(_self$dashboardFilter=self.dashboardFilterObj)&&void 0!==_self$dashboardFilter?_self$dashboardFilter:{},customScriptWidgets=_ref7.customScriptWidgets,dashboardUserFilters=_ref7.dashboardUserFilters;
// Used nextTick() to be safe, to make sure all the widgets are mounted and is present in the DOM, before sending them
// orders via eventBus.
// We can animate the widgets which are triggered by the actions API.
// For example, we can make a widget vibrate when the global timeline filter
// updates a specific widget.
// const { widget_id: widgetId } = widget
// self.animateWidget(widgetId)
(null!==customScriptWidgets&&void 0!==customScriptWidgets?customScriptWidgets:[]).includes(widget.widget_id)&&Object.assign(widget.actionMeta,{CUSTOM_SCRIPT_FILTER:lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()({filterValues:self.rawUserFilter,filterMeta:dashboardUserFilters})}),src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_18__/* .eventBus */.Y.$emit("applyAction_".concat(id),widget)}))},hideWidget:function(widgetId){var hiddenWidget=this.dashboardLayout.find((function(widget){return widget.id==widgetId}));(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(hiddenWidget)||(delete this.hiddenWidgetsHashMap[widgetId],this.hiddenWidgetsHashMap[widgetId]=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(hiddenWidget),this.deleteWidget(widgetId))},showWidget:function(widgetId){var hiddenWidgetsHashMap=this.hiddenWidgetsHashMap,dashboardLayout=this.dashboardLayout,widget=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(hiddenWidgetsHashMap[widgetId]);delete hiddenWidgetsHashMap[widgetId],(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(widget)||dashboardLayout.push(widget)},executeGlobalActions:function(widget){var self=this;this.$nextTick((function(){
// Used nextTick() to be safe, to make sure all the widgets are mounted and is present in the DOM, before sending them
// orders via eventBus.
var actionType=widget.actionType,actionMeta=widget.actionMeta,showWidget=self.showWidget,hideWidget=self.hideWidget,showHideSections=function(sections,action){var _step,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(sections);try{for(_iterator.s();!(_step=_iterator.n()).done;){var section=_step.value;action(section)}}catch(err){_iterator.e(err)}finally{_iterator.f()}};if("hide_sections"==actionType){var sections=actionMeta.HIDE_SECTIONS.section_ids;showHideSections(sections,hideWidget)}else if("show_sections"==actionType){var _ref8=null!==actionMeta&&void 0!==actionMeta?actionMeta:{},_sections=_ref8.SHOW_SECTIONS.section_ids;showHideSections(_sections,showWidget)}else if("url"==actionType){var _ref9=null!==actionMeta&&void 0!==actionMeta?actionMeta:{},url=_ref9.URL.url;window.open(url,"_blank")}}))},onAction:function(action){this.removeTriggerWidgetId();
// This method handles `clicking on bar`, etc. types of actions, other than `timeline filter` and `user filter`.
var _ref10=null!==action&&void 0!==action?action:{},widgetLinkName=_ref10.widgetLinkName,criteria=_ref10.criteria,dimension=_ref10.dimension,fieldName=(_ref10.value,_ref10.fieldName),moduleName=_ref10.moduleName,groupBy=_ref10.groupBy,groupByFieldName=_ref10.groupByFieldName,groupByModuleName=_ref10.groupByModuleName,id=_ref10.id,_ref11=null!==this&&void 0!==this?this:{},dashboardId=_ref11.dashboardId,placeHoldersMeta=function(){var placeHolderMeta={};return placeHolderMeta[widgetLinkName]={fieldName:fieldName,moduleName:moduleName},placeHolderMeta},placeHolders=function(){var placeHolders={};return placeHolders[widgetLinkName]={dimension:[String(dimension)],criteria:criteria,group_by:groupBy,metrics:""},placeHolders},groupByMeta=function(){var groupByMeta={};return groupByMeta[widgetLinkName]={groupByFieldName:groupByFieldName,groupByModuleName:groupByModuleName},groupByMeta},actionsPayload={action_meta:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)({trigger_widget_id:Number(id),dashboardId:dashboardId,placeHolders:placeHolders(),placeHoldersMeta:placeHoldersMeta()},this.getDashboardTabId())};(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(groupByFieldName)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(groupByModuleName)||(actionsPayload.action_meta["groupByMeta"]=groupByMeta());var _ref12=null!==this&&void 0!==this?this:{},recentTimelineFilterPayload=_ref12.recentTimelineFilterPayload,recentUserFilterPayload=_ref12.recentUserFilterPayload;this.recentActionsPayload=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(actionsPayload);var req=lodash_merge__WEBPACK_IMPORTED_MODULE_16___default()(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(recentUserFilterPayload),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(recentTimelineFilterPayload),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_17___default()(actionsPayload));this.executeActions(req)}}}},
/***/459430:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(103336),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(488478),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(566347),moment_timezone__WEBPACK_IMPORTED_MODULE_39__=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(186466),__webpack_require__(843843),__webpack_require__(897389),__webpack_require__(879288),__webpack_require__(76265),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(865137),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(538077),__webpack_require__(241830),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(689730),__webpack_require__(212826),__webpack_require__(228436),__webpack_require__(902918),__webpack_require__(339772),__webpack_require__(795765),__webpack_require__(506203),__webpack_require__(162506),__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(322462),__webpack_require__(75239),__webpack_require__(480008)),moment_timezone__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_39__),vue__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(720144),util_deepmerge__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(708634),_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(460895),d3__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(348727),src_newcharts_model_newDateModel__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(138810),src_components_mixins_NumberFormatHelper__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(415402),charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(676240),third_party_ckmeans_min_js__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(196009),billboard_js_dist_plugin_billboardjs_plugin_bubblecompare_js__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(192098),billboard_js_dist_plugin_billboardjs_plugin_bubblecompare_js__WEBPACK_IMPORTED_MODULE_49___default=__webpack_require__.n(billboard_js_dist_plugin_billboardjs_plugin_bubblecompare_js__WEBPACK_IMPORTED_MODULE_49__),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(990260),chroma_js__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(428670);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={prepare:function(chartContext){var params={};if(params.padding=chartContext.options.customPadding?chartContext.options.customPadding:chartContext.options.padding,params.size=chartContext.options.size,this.prepareGeneralOptions(chartContext,params),params.data=this.prepareData(chartContext),params.axis=this.prepareAxis(chartContext),params.tooltip=this.prepareTooltip(chartContext),chartContext.options.regionConfig&&(params.regions=this.prepareRegionData(chartContext)),chartContext.options.point&&(params.point=chartContext.options.point),chartContext.options.axes&&(params.data.axes=chartContext.options.axes),chartContext.options.chartType&&(params.data.type=chartContext.options.chartType),"scatter"===params.data.type&&!0!==chartContext.options.combo&&(params.point={show:!0,pattern:chartContext.Readingdp||chartContext.scatterConfig?params.point.pattern:[]}),chartContext.options.fixedAxis&&Object.keys(chartContext.options.fixedAxis).forEach((function(rt){params.axis[rt].label&&(params.axis[rt].label.text=chartContext.options.fixedAxis[rt].label),params.axis[rt].min&&params.axis[rt].min>=0&&(params.axis[rt].min=chartContext.options.fixedAxis[rt].min),params.axis[rt].max&&(params.axis[rt].max=chartContext.options.fixedAxis[rt].max)})),this.applyDefaultOptions(chartContext,params),chartContext.options.disbaleNiceTickMarks||chartContext.options.isGroupedByTime||(!0!==chartContext.options.general.normalizeStack||"stackedbar"!==chartContext.options.type)&&this.applyNiceTickMarks(params,chartContext),chartContext.options.hasOwnProperty("zoom")&&(params.zoom=chartContext.options.zoom),chartContext.options.hasOwnProperty("isDepreciationCostTrend")&&params.data.json["Current Price"]){var unitMap={},yData=params.data.json["Current Price"].map((function(d){return d})),depData=params.data.json["Depreciated Amount"].map((function(d){return d})),firstCost=yData.find((function(val){return null!==val})),OBVIndex=yData.indexOf(firstCost),OBV=[];if(firstCost)for(var idx in yData)yData[idx]===firstCost&&parseInt(idx)===OBVIndex?(yData[idx]=0,depData[idx]=null,OBV.push(firstCost)):OBV.push(null);else OBV=yData.map((function(){return null}));unitMap["OBV"]=chartContext.unitMap["Current Price"];var newParams={data:{json:{"Current Price":yData,"Depreciated Amount":depData,OBV:OBV},colors:{OBV:"#ec6363"},names:{OBV:"Opening Book Value"},groups:[["Opening Book Value","Current Price","Depreciated Amount"]],axes:{"Depreciated Amount":params.data.axes["Current Price"],OBV:params.data.axes["Current Price"]},order:"asc",labels:{format:{"Depreciated Amount":function(x){return[0,null].includes(x)?"":x},OBV:function(x){return[0,null].includes(x)?"":x}}}},bar:{width:{ratio:.75}}};return chartContext.unitMap=util_deepmerge__WEBPACK_IMPORTED_MODULE_40__/* ["default"] */.Z.objectAssignDeep({},chartContext.unitMap,unitMap),util_deepmerge__WEBPACK_IMPORTED_MODULE_40__/* ["default"] */.Z.objectAssignDeep({},params,newParams)}if(chartContext.scatterConfig&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_48__/* .isEmpty */.xb)(params.data.types)){var types=Object.values(params.data.types);types.includes("bubble")&&(params["plugins"]=[new(billboard_js_dist_plugin_billboardjs_plugin_bubblecompare_js__WEBPACK_IMPORTED_MODULE_49___default())({minR:10,maxR:50,expandScale:1})])}if("bar"===chartContext.options.type&&chartContext.options.bar.showGroupTotal){var groupTotalData=this.getGroupTotalDataPoint(params,null);groupTotalData&&(params.data.json.group_total=groupTotalData,params.data.colors.group_total="rgba(126,127,127,0.2)",params.data.labels=!1)}if(chartContext.baselineData){var json=this.prepareBaselineData(chartContext);params.data.json=this.extendObject(params.data.json,json);var names=this.getNamesForBaseline(chartContext);params.data.names=this.extendObject(params.data.names,names);var axes=this.getXYMapForBaseline(chartContext);params.data.axes=this.extendObject(params.data.axes,axes);var xs=this.getXsMapForBaseline(chartContext);params.data.xs=this.extendObject(params.data.xs,xs);var _types=this.getTypesForBaseline(chartContext);params.data.types=this.extendObject(params.data.types,_types);var colors=this.getColorsForBaseline(chartContext);params.data.colors=this.extendObject(params.data.colors,colors),params.line.point=[]}return params},extendObject:function(originalObj,data){for(var i in data)originalObj[i]=data[i];return originalObj},linearInterpolationForBaseLine:function(arr1,arr2,resolution){for(var lerp=function(x,y,a){return x*(1-a)+y*a},xaxis=[],yaxis=[],i=0;i<arr1.length;i++){var diff=arr1[i]-arr1[i+1],inbetweenCount=void 0;inbetweenCount=diff<0?parseInt(-1*diff/resolution):parseInt(diff/resolution);for(var j=0;j<=inbetweenCount;j++){
// let x = arr1[i] + j * resolution
// console.log('x value -> ', x)
// let y = interpolate(arr1[i], arr2[i], arr1[i + 1], arr2[i + 1], x)
var percent=j/inbetweenCount,x=lerp(arr1[i],arr1[i+1],percent),y=lerp(arr2[i],arr2[i+1],percent);xaxis.push(x.toFixed(2)),yaxis.push(y.toFixed(2))}}return[xaxis,yaxis]},prepareBaselineData:function(chartContext){var _this=this,graphPoints=chartContext.baselineData,result=[],tempX=[],tempY=[],count=0,alphabet="abcdefghijklmnopqrstuvwxyz".split("");return graphPoints.forEach((function(op){JSON.parse(op.graphValue).forEach((function(td){""!==td.x&&""!==td.y&&(tempX.push(parseFloat(td.x)),tempY.push(parseFloat(td.y)))}));var interploteResult=_this.linearInterpolationForBaseLine(tempX,tempY,.02);result[alphabet[count]]=interploteResult[1],result[alphabet[count+1]]=interploteResult[0],tempX=[],tempY=[],count+=2})),result},getNamesForBaseline:function(chartContext){for(var selectedGraphPoints=chartContext.baselineData,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},count=0,i=0;i<selectedGraphPoints.length;i+=1)result[alphabet[count]]=selectedGraphPoints[i].label,result[alphabet[count+1]]=selectedGraphPoints[i].label,count+=2;return result},getXYMapForBaseline:function(chartContext){for(var selectedGraphPoints=chartContext.baselineData,val=selectedGraphPoints.length,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},i=0;i<val;i+=1)result[alphabet[i]]="y",result[alphabet[i+1]]="x";return result},getColorsForBaseline:function(chartContext){for(var colors=chartContext.baselineColors,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},count=0,i=0;i<chartContext.baselineData.length;i+=1)result[alphabet[count]]=colors[i],result[alphabet[count+1]]=colors[i],count+=2;return result},getTypesForBaseline:function(chartContext){for(var selectedGraphPoints=chartContext.baselineData,val=selectedGraphPoints.length,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},count=0,i=0;i<val;i+=1)result[alphabet[count]]="line",result[alphabet[count+1]]="line",count+=2;return result},getXsMapForBaseline:function(chartContext){for(var selectedGraphPoints=chartContext.baselineData,val=selectedGraphPoints.length,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},count=0,i=0;i<val;i+=1)result[alphabet[count]]=alphabet[count+1],count+=2;return result},getGroupTotalDataPoint:function(c3Params,hiddenTargetIds){for(var groupedBarPoints=[],_i=0,_Object$keys=Object.keys(c3Params.data.json);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];c3Params.data.groups.indexOf(key)<0&&"x"!==key&&("bar"!==c3Params.data.type&&"bar"!==c3Params.data.types[key]||groupedBarPoints.push(key))}if(groupedBarPoints.length>1){for(var groupTotalData=[],i=0;i<c3Params.data.json.x.length;i++){var _step,sum=0,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(groupedBarPoints);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _key=_step.value;(!hiddenTargetIds||hiddenTargetIds.indexOf(_key)<0)&&"group_total"!==_key&&(sum+=parseFloat(c3Params.data.json[_key][i]?c3Params.data.json[_key][i]:0))}}catch(err){_iterator.e(err)}finally{_iterator.f()}groupTotalData.push(sum)}return groupTotalData}return null},rerenderInterSecions:function(chart){if(chart.hasOwnProperty("clipId")){var id="intersections-container-"+chart.clipId;document.getElementById(id)&&document.getElementById(id).remove()}else document.getElementById("intersections-container")&&document.getElementById("intersections-container").remove()},drawIntersections:function(chart,chartContext){if(chartContext.options.intersections){this.rerenderInterSecions(chart,chartContext),chart.hasOwnProperty("clipId")?chart.intersectionContainer=chart.svg.select("g").select(".bb-chart").append("g").attr("class","intersections-container").attr("id","intersections-container-"+chart.clipId):chart.intersectionContainer=chart.svg.select("g").select(".bb-chart").append("g").attr("class","intersections-container").attr("id","intersections-container");for(var i=0;i<chartContext.options.intersections.length;i++)chart.hiddenTargetIds.length||this.drawPaths(chart,chartContext,chartContext.options.intersections[i],i)}},scaleTime:function(chart){return d3__WEBPACK_IMPORTED_MODULE_42__.scaleTime().domain(chart.orgXDomain).range(chart.xAxis.config.range)},prepareSpecificRangeOfChartData:function(chart,chartContext,params){if(!(chartContext&&chart&&params&&params.regions))return{minDomain:new Date(chart.orgXDomain[0]),maxDomain:new Date(chart.orgXDomain[1]),xMin:chart.xMin,xMax:chart.xMax,data:chartContext.data};if(params.regions.length){var timeScale=this.scaleTime(chart),d=params.regions[0];return{minDomain:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat),maxDomain:new Date(chart.orgXDomain[1]),xMin:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat)),xMax:chart.xMax,data:chartContext.data}}},drawPaths:function(chart,chartContext,config,index){if(chart){var pathArea=chart.intersectionContainer.append("g").attr("class","intersections-"+index),yAxis=chart.yAxis.config.valueOf().tickValues,yMin=0,yMax=0;yAxis&&yAxis.length&&(yMin=yAxis[0],yMax=yAxis[yAxis.length-1]);var xdata={};xdata=this.prepareSpecificRangeOfChartData(chart,chartContext);var xDomain=chart.xAxis.params.orgXScale.domain()?chart.xAxis.params.orgXScale.domain():[new Date(chart.orgXDomain[0]),new Date(chart.orgXDomain[1])],x=d3__WEBPACK_IMPORTED_MODULE_42__.scaleTime().domain(xDomain).range(chart.xAxis.config.range),y=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().range(chart.yAxis.config.range.reverse()).domain([yMin,yMax]),points=[];points=this.regionAreaPoints(xdata.data,config.from,config.to,chartContext.options.xFormat);var area=d3__WEBPACK_IMPORTED_MODULE_42__.area().x((function(d){return x(d.x)})).y1((function(d){return y(d.high)})).defined((function(d){if(null!==d.low&&null!==d.high)return d})),area1=d3__WEBPACK_IMPORTED_MODULE_42__.area().x((function(d){return x(d.x)})).y0((function(d){return y(d.low)})).defined((function(d){return d}));pathArea.datum(points),pathArea.append("defs").append("pattern").attr("id","diagonalHatchnew").attr("patternUnits","userSpaceOnUse").attr("width",4).attr("height",4).append("path").attr("d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2").attr("stroke","#dadada").attr("stroke-width",1),pathArea.append("clipPath").attr("id",config.context.id+"clip-below").append("path").attr("d",area.y0(chart.yAxis.config.range[1])),pathArea.append("clipPath").attr("id",config.context.id+"clip-above").append("path").attr("d",area.y0(chart.yAxis.config.range[0])),pathArea.append("path").attr("class","area above").attr("clip-path","url(#"+config.context.id+"clip-above)").attr("d",area.y0((function(d){return y(d["low"])}))).style("opacity",1).style("stroke","none").style("fill","none"),pathArea.append("path").attr("class","area below").attr("clip-path","url(#"+config.context.id+"clip-below)").attr("d",area1.y1((function(d){return y(d["high"])}))).style("opacity",1).style("stroke","none").style("fill","#f36886")}},renderDiffPath:function(chart,chartContext,params,config){if(chart){chart.svg.select("g").select(".bb-chart").select(config.context.class).remove();var pathArea=chart.svg.select("g").select(".bb-chart").append("g").attr("class",config.context.class),yAxis=chart.yAxis.config.valueOf().tickValues,yMin=0,yMax=0;yAxis&&yAxis.length&&(yMin=yAxis[0],yMax=yAxis[yAxis.length-1]);var xdata={};xdata=this.prepareSpecificRangeOfChartData(chart,chartContext,params);var x=d3__WEBPACK_IMPORTED_MODULE_42__.scaleTime().domain([new Date(chart.orgXDomain[0]),new Date(chart.orgXDomain[1])]).range(chart.xAxis.config.range),y=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().range(chart.yAxis.config.range.reverse()).domain([yMin,yMax]),points=[];points=params.regions?this.regionAreaPoints(xdata.data,config.from,config.to,chartContext.options.xFormat,params.regions[0]):this.regionAreaPoints(xdata.data,config.from,config.to,chartContext.options.xFormat);var area=d3__WEBPACK_IMPORTED_MODULE_42__.area().x((function(d){return x(d.x)})).y1((function(d){return y(d.high)})).defined((function(d){if(null!==d.low&&null!==d.high)return d})),area1=d3__WEBPACK_IMPORTED_MODULE_42__.area().x((function(d){return x(d.x)})).y0((function(d){return y(d.low)})).defined((function(d){return d}));pathArea.datum(points),pathArea.append("defs").append("pattern").attr("id","diagonalHatch").attr("patternUnits","userSpaceOnUse").attr("width",4).attr("height",4).append("path").attr("d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2").attr("stroke","#dadada").attr("stroke-width",1),pathArea.append("clipPath").attr("id",config.context.id+"clip-below").append("path").attr("d",area.y0(chart.yAxis.config.range[1])),pathArea.append("clipPath").attr("id",config.context.id+"clip-above").append("path").attr("d",area.y0(chart.yAxis.config.range[0])),config.to&&config.to.color&&!config.to.disable&&pathArea.append("path").attr("class","area above").attr("clip-path","url(#"+config.context.id+"clip-above)").attr("d",area.y0((function(d){return y(d["low"])}))).style("opacity",.2).style("stroke","none").style("fill",config.to.color),config.to.disable||pathArea.append("path").attr("class","area above").attr("clip-path","url(#"+config.context.id+"clip-above)").attr("d",area.y0((function(d){return y(d["low"])}))).style("opacity",.2).style("stroke","none").style("fill","url(#diagonalHatch)"),config.from&&config.from.color&&!config.from.disable&&pathArea.append("path").attr("class","area below").attr("clip-path","url(#"+config.context.id+"clip-below)").attr("d",area1.y1((function(d){return y(d["high"])}))).style("opacity",.2).style("stroke","none").style("fill",config.from.color),config.from.disable||pathArea.append("path").attr("class","area below").attr("clip-path","url(#"+config.context.id+"clip-below)").attr("d",area1.y1((function(d){return y(d["high"])}))).style("opacity",.2).style("stroke","none").style("fill","url(#diagonalHatch)")}},regionAreaPoints:function(points,from,to,format,region){var data=[];return region?points.x.forEach((function(d,index){moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(region.reportingPeriodStartTime,format)<=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d,format)&&data.push({x:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d,format),high:points[from.point][index]?Number(points[from.point][index]):null,low:points[to.point][index]?Number(points[to.point][index]):null})})):points.x.forEach((function(d,index){data.push({x:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d,format),high:points[from.point][index]?Number(points[from.point][index]):null,low:points[to.point][index]?Number(points[to.point][index]):null})})),data},prepareRegionData:function(chartContext){var data={};data=chartContext.options.regionConfig;var endOfMomentDay=Number(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.end).endOf("month").format("DD")),endOfDay=Number(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.end).format("DD"));return data["start"]=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.start).format(chartContext.options.xFormat),endOfMomentDay===endOfDay&&"MM-YYYY"===chartContext.options.xFormat?data["end"]=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.end).add(1,"day").format(chartContext.options.xFormat):data["end"]=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.end).format(chartContext.options.xFormat),data["reportingPeriodStartTime"]=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.reportingPeriodStartTime).format(chartContext.options.xFormat),[data]},prepareColorTile:function(chartContext,params){return{pattern:[params.data.colors["F"]],tiles:function(){var pattern=d3__WEBPACK_IMPORTED_MODULE_42__.select(document.createElementNS(d3__WEBPACK_IMPORTED_MODULE_42__.namespaces.svg,"pattern")).attr("patternUnits","userSpaceOnUse").attr("width","6").attr("height","6"),g=pattern.append("g").attr("fill-rule","evenodd").attr("stroke-width",1).append("g").attr("fill","rgb(255, 127, 14)");g.append("polygon").attr("points","5 0 6 0 0 6 0 5"),g.append("polygon").attr("points","6 5 6 6 5 6");var gradient=d3__WEBPACK_IMPORTED_MODULE_42__.select(document.createElementNS(d3__WEBPACK_IMPORTED_MODULE_42__.namespaces.svg,"linearGradient")).attr("patternUnits","userSpaceOnUse").attr("x2","0").attr("y2","80%");
// Should return an array of SVGPatternElement
return gradient.append("stop").attr("offset","49%").attr("stop-color","blue"),gradient.append("stop").attr("offset","50%").attr("stop-color","grey"),gradient.append("stop").attr("offset","51%").attr("stop-color","red"),[pattern.node(),gradient.node()]}}},prepareMobile:function(c3Params){var source=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$source?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$source:"";return"analytics"===source?(c3Params.padding.left=45,c3Params.padding.right=15,c3Params.padding.bottom=-20):"dashboard"===source?c3Params.axis&&c3Params.axis.y2&&c3Params.axis.y2.show?(c3Params.padding.left=45,c3Params.padding.right=45,c3Params.padding.bottom="donut"===c3Params.data.type||"pie"===c3Params.data.type?20:-20):(c3Params.padding.left=45,c3Params.padding.right=15,c3Params.padding.bottom="donut"===c3Params.data.type||"pie"===c3Params.data.type?20:-20,c3Params.axis.x&&c3Params.axis.x.tick&&"category"===c3Params.axis.x.type&&(c3Params.axis.x.tick.multiline=!1,c3Params.axis.x.tick.rotate=20,c3Params.axis.x.tick.tooltip=!1,c3Params.padding.bottom+=20)):(c3Params.padding.left=45,c3Params.padding.right=15,c3Params.padding.bottom="donut"===c3Params.data.type||"pie"===c3Params.data.type?20:-20),c3Params.zoom.enabled=!1,c3Params.mobile=!0,c3Params},prepareBooleanAlarmChart:function(chartContext,x,alarms){var params={padding:{top:20,left:30,right:30,bottom:0}},dummyData=[];if(x&&x.length)for(var i=0;i<x.length;i++)dummyData.push(1);params.data={json:{x:alarms.data.x,alarms:alarms.data.alarms},xFormat:"%m-%d-%Y %H:%M",x:"x"},params.size={height:50},alarms.barSize&&"mini"===alarms.barSize&&(params.size.height=40),alarms.barSize&&"small"===alarms.barSize&&(params.size.height=50),alarms.barSize&&"medium"===alarms.barSize&&(params.size.height=57),params.size.height+=70,params.grid={x:{show:!1},y:{show:!1}},params.axis=this.prepareAxis(chartContext),params.axis.x.tick.values=null,params.axis.x.min=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),params.axis.x.max=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),params.tooltip={show:!1,contents:function(d){if(alarms.regions[d[0].value]){var _step2,alarmList=alarms.regions[d[0].value].alarms,tooltipData=[],_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarmList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var alarm=_step2.value;tooltipData.push({label:"Alarm",value:alarm.subject})}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}var tooltipConfig={className:"bb-chart-tooltip",data:tooltipData,mode:1};return _graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)}return null}},params.axis.x.show=!0,params.axis.y.show=!1,params.axis.y.tick.format=null,params.axis.x.tick.outer=!1,params.axis.y2.show=!1,params.legend={show:!1};var _step3,regions=[],alarmSeverityValues={},_iterator3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarms.regions);try{var _loop=function(){var _step6,alarm=_step3.value,severityMap={},isCleared=!1,highSev=null,highSevId=null,_iterator6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarm.alarms);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var a=_step6.value,sevId=a.severity?a.severity.id:0,severity=sevId?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(sevId,!0):null;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,a.previousSeverity&&(sevId=a.previousSeverity.id,severity=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(sevId,!0))),severity&&(highSev?highSev>severity.cardinality&&(highSev=severity.cardinality,highSevId=sevId):(highSev=severity.cardinality,highSevId=sevId)),severityMap[sevId]||(severityMap[sevId]=0),severityMap[sevId]=severityMap[sevId]+1}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}var maxSeverity=highSevId||Object.keys(severityMap).reduce((function(a,b){return severityMap[a]>severityMap[b]?a:b})),maxSeverityCount=severityMap[maxSeverity];regions.push({start:alarm.start,end:alarm.end,class:"fc-boolean-"+maxSeverity+"_"+maxSeverityCount,alarms:alarm.alarms,isCleared:isCleared,count:alarm.count}),alarmSeverityValues[maxSeverity]||(alarmSeverityValues[maxSeverity]=[]),alarmSeverityValues[maxSeverity].push(maxSeverityCount)};for(_iterator3.s();!(_step3=_iterator3.n()).done;)_loop()}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return params.regions=regions,params.onafterinit=function(){for(var severityId in alarmSeverityValues){var color=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(severityId)?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(severityId,!0).color:"#ff0000",alarmValues=alarmSeverityValues[severityId],distinctAlarmValues=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(new Set(alarmValues));distinctAlarmValues.sort((function(a,b){return b-a}));var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);parentSelector.selectAll(".fc-boolean-0").style("fill",color),parentSelector.selectAll(".fc-boolean-0 rect").style("fill-opacity","0.1");var _step4,_iterator4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(distinctAlarmValues);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var al=_step4.value;.1;var key="0.8".replace(".","");parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al+" rect").style("fill",color),parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al+" rect").classed("fc-boolean-rect-"+key,!0),parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al).on("mouseover",(function(d){var _step5,tooltipData=[],alarmTooltipData=[],_iterator5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(d.alarms);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var alarm=_step5.value,severity=alarm.severity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.severity.id,!0):null,isCleared=!1;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,severity=alarm.previousSeverity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.previousSeverity.id,!0):null);var message=void 0,subject=void 0;vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.isLicenseEnabled("NEW_ALARMS")?(message=alarm.alarm.description||"",subject=alarm.alarm&&alarm.alarm.subject?alarm.alarm.subject:""):(message=alarm.problem||alarm.readingMessage,subject=alarm.subject||""),alarmTooltipData.push({name:subject,message:message,severity:severity,isCleared:isCleared,count:d.alams&&d.alams.legend?d.alams.length:0})}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start).format("LLL")+" - "+moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end).format("LLL"),subtitle:{start:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start).format("hh:mm a"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end).format("hh:mm a")},titleObj:{start:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start).format("DD MMM YYYY"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end).format("DD MMM YYYY")},data:tooltipData,alarms:alarms.showTimeOnly?null:alarmTooltipData,count:alarmTooltipData.length?alarmTooltipData[0].count:0,mode:1};_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltip1(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()})).on("click",(function(d){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip(),d.alarms&&d.alarms.length&&chartContext.openAlarm&&chartContext.openAlarm(d.alarms)}))}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}},params},prepareBooleanChart:function(chartContext,x,alarms){var params={};params.padding={top:20,left:chartContext.options.padding.left,right:chartContext.options.padding.right,bottom:0};for(var dummyData=[],i=0;i<x.length;i++)dummyData.push(1);params.data={json:{x:alarms.data.x,alarms:alarms.data.alarms},xFormat:"%m-%d-%Y %H:%M",x:"x"},params.size={height:50},alarms.barSize&&"mini"===alarms.barSize&&(params.size.height=40),alarms.barSize&&"small"===alarms.barSize&&(params.size.height=50),alarms.barSize&&"medium"===alarms.barSize&&(params.size.height=57),params.grid={x:{show:!1},y:{show:!1}},params.axis=this.prepareAxis(chartContext),params.axis.x.tick.values=null,params.axis.x.min=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),params.axis.x.max=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),params.tooltip={show:!1,contents:function(d){if(alarms.regions[d[0].value]){var _step7,alarmList=alarms.regions[d[0].value].alarms,tooltipData=[],_iterator7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarmList);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var alarm=_step7.value;tooltipData.push({label:"Alarm",value:alarm.subject})}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}var tooltipConfig={className:"bb-chart-tooltip",data:tooltipData,mode:1};return _graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)}return null}},params.axis.x.show=!1,params.axis.y.show=!1,params.axis.y.tick.format=null,params.axis.y2.show=!1,params.legend={show:!1};var _step8,regions=[],alarmSeverityValues={},_iterator8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarms.regions);try{var _loop2=function(){var _step11,alarm=_step8.value,severityMap={},isCleared=!1,highSev=null,highSevId=null,_iterator11=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarm.alarms);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var a=_step11.value,sevId=a.severity?a.severity.id:0,severity=sevId?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(sevId):null;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,a.previousSeverity&&(sevId=a.previousSeverity.id,severity=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(sevId))),severity&&(highSev?highSev>severity.cardinality&&(highSev=severity.cardinality,highSevId=sevId):(highSev=severity.cardinality,highSevId=sevId)),severityMap[sevId]||(severityMap[sevId]=0),severityMap[sevId]=severityMap[sevId]+1}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}var maxSeverity=highSevId||Object.keys(severityMap).reduce((function(a,b){return severityMap[a]>severityMap[b]?a:b})),maxSeverityCount=severityMap[maxSeverity];regions.push({start:alarm.start,end:alarm.end,class:"fc-boolean-"+maxSeverity+"_"+maxSeverityCount,alarms:alarm.alarms,isCleared:isCleared,count:alarm.count}),alarmSeverityValues[maxSeverity]||(alarmSeverityValues[maxSeverity]=[]),alarmSeverityValues[maxSeverity].push(maxSeverityCount)};for(_iterator8.s();!(_step8=_iterator8.n()).done;)_loop2()}catch(err){_iterator8.e(err)}finally{_iterator8.f()}return params.regions=regions,params.onafterinit=function(){for(var severityId in alarmSeverityValues){var color=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(severityId)?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(severityId).color:"#ff0000",alarmValues=alarmSeverityValues[severityId],distinctAlarmValues=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(new Set(alarmValues));distinctAlarmValues.sort((function(a,b){return b-a}));var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);parentSelector.selectAll(".fc-boolean-0").style("fill",color),parentSelector.selectAll(".fc-boolean-0 rect").style("fill-opacity","0.1");var _step9,_iterator9=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(distinctAlarmValues);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var al=_step9.value;.1;var key="0.8".replace(".","");parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al+" rect").style("fill",color),parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al+" rect").classed("fc-boolean-rect-"+key,!0),parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al).on("mouseover",(function(d){var _step10,tooltipData=[],alarmTooltipData=[],_iterator10=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(d.alarms);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var alarm=_step10.value,severity=alarm.severity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.severity.id):null,isCleared=!1;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,severity=alarm.previousSeverity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.previousSeverity.id):null);var message=void 0,subject=void 0;vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.isLicenseEnabled("NEW_ALARMS")?(message=alarm.alarm.description||"",subject=alarm.alarm&&alarm.alarm.subject?alarm.alarm.subject:""):(message=alarm.problem||alarm.readingMessage,subject=alarm.subject||""),alarmTooltipData.push({name:subject,message:message,severity:severity,isCleared:isCleared,count:d.count})}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start).format("LLL")+" - "+moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end).format("LLL"),data:tooltipData,alarms:alarms.showTimeOnly?null:alarmTooltipData,count:alarmTooltipData.length?alarmTooltipData[0].count:0,mode:1};_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltip1(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()})).on("click",(function(d){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip(),d.alarms&&d.alarms.length&&chartContext.openAlarm&&chartContext.openAlarm(d.alarms)}))}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}}},params},prepareMultichart:function(chartContext){var _this2=this,dataList=this.prepareMultichartData(chartContext),c3Data=[],index=0,overallHeight=chartContext.options.size.height-20,withoutBooleanPoints=dataList.filter((function(dl){return!dl.booleanChart&&!dl.enumChart}));overallHeight-=50*(dataList.length-withoutBooleanPoints.length);var _step12,_iterator12=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataList);try{var _loop3=function(){var d=_step12.value;index+=1;var params={};params.label=d.label,params.key=d.key,params.padding={top:chartContext.options.padding.top,right:chartContext.options.padding.right,bottom:chartContext.options.padding.bottom,left:chartContext.options.padding.left},_this2.prepareGeneralOptions(chartContext,params,d.key),params.data=d,params.axis=_this2.prepareAxis(chartContext,d.key),chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length||chartContext.Readingdp?params.tooltip=_this2.prepareTooltip(chartContext):params.tooltip=_this2.prepareMultichartTooltip(chartContext),params.data.point&&(params.point=params.data.point),"scatter"===params.data.type&&!0!==chartContext.options.combo&&(params.point={show:!0,pattern:chartContext.Readingdp||chartContext.scatterConfig?params.point.pattern:[]}),_this2.applyDefaultOptions(chartContext,params),chartContext.options.disbaleNiceTickMarks||chartContext.options.isGroupedByTime||(!0!==chartContext.options.general.normalizeStack||"stackedbar"!==chartContext.options.type)&&_this2.applyNiceTickMarks(params,chartContext),index!==dataList.length||!0!==params.axis.x.show||chartContext.scatterConfig||(overallHeight-=50);var height=chartContext.groupByMetrics?150:100;if(overallHeight){var calcHeight=overallHeight/withoutBooleanPoints.length;(calcHeight>=100&&!chartContext.groupByMetrics||calcHeight>=150)&&(height=calcHeight)}if(params.size={height:height,width:chartContext.options.size.width},chartContext.scatterConfig&&(dataList.length>2?params.size.height=chartContext.options.size.height/Math.ceil(dataList.length/2):params.size.height=chartContext.options.size.height),index===dataList.length||chartContext.scatterConfig||(params.axis.x.label.text="",params.axis.x.show=!!chartContext.scatterConfig,params.padding.bottom=-6,params.size.height=params.size.height-25),params.padding.top=0,d.booleanChart){params.grid.y=!1,params.size.height=25,params.axis.x.label.text="",params.axis.x.show=!1,params.axis.y.show=!1,params.axis.y2.show=!1,params.padding.bottom=-25,params.axis.x.min=chartContext.dateRange.range.highResMin,params.axis.x.max=chartContext.dateRange.range.highResMax;var offClassName="fc-boolean-"+d.key+"-0",onClassName="fc-boolean-"+d.key+"-1",booleanTimeline=chartContext.booleanData&&chartContext.booleanData[d.key.replace("datapoint_","")]?chartContext.booleanData[d.key.replace("datapoint_","")]:null;if(booleanTimeline&&booleanTimeline.length){var _step13,regions=[],x=[],y=[],_iterator13=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(booleanTimeline);try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var range=_step13.value;x.push(range.start),y.push(null),x.push(range.end),y.push(null),regions.push({start:range.start,end:range.end,class:range.value?onClassName:offClassName})}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}params.regions=regions,params.data.json.x=x,params.data.json[d.key.replace("datapoint_","")]=y,params.data.xFormat="%m-%d-%Y %H:%M",params.axis.x.tick.values=null}else params.data.xFormat="%m-%d-%Y %H:%M",params.regions={start:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]?chartContext.dateRange.time[1]:chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),class:offClassName},params.data.json.x=[moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]?chartContext.dateRange.time[1]:chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm")],params.data.json[d.key.replace("datapoint_","")]=[null,null],params.axis.x.tick.values=null;params.tooltip.show=!1;var c3Self=_this2;params.onafterinit=function(){var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);parentSelector.selectAll("."+onClassName).style("fill",d.booleanChart.color),parentSelector.selectAll("."+onClassName+" rect").style("fill-opacity","0.9"),parentSelector.selectAll("."+onClassName+" rect").classed("fc-boolean-rect-09",!0),parentSelector.selectAll("."+offClassName).style("fill",d.booleanChart.color),parentSelector.selectAll("."+offClassName+" rect").style("fill-opacity","0.1"),parentSelector.selectAll(".bb-chart").style("display","none");// removed the bb-chart element from the boolean chart. it causes tool tip issue. mouse over event fires when mouse over the alarm charts not a boolean chart
var self=this;parentSelector.selectAll("."+onClassName).on("mousemove",(function(){var _step14,mouse=d3__WEBPACK_IMPORTED_MODULE_42__.mouse(this),closestDate=c3Self.newFindClosest(chartContext.data.x,chartContext.options.axis.x.time.format.d3Format,self.x.invert(mouse[0])),closestIdx=closestDate.i,xVal=closestDate.date,tooltipData=[],_iterator14=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var dataPoint=_step14.value;if("group"===dataPoint.type){if(dataPoint.children){var _step15,children=[],_iterator15=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var dp=_step15.value,dJson=chartContext.data[dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=null===dJson[closestIdx]?0:dJson[closestIdx];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=c3Self.getBooleanValue(chartContext,xVal,dp.key,closestIdx));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson&&children.push({label:dp.label,value:tVal,color:dp.color})}}catch(err){_iterator15.e(err)}finally{_iterator15.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else{var _dJson=chartContext.data[dataPoint.key],_unit=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal=null===_dJson[closestIdx]?0:_dJson[closestIdx];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal=c3Self.getBooleanValue(chartContext,xVal,dataPoint.key,closestIdx));var _tVal=["days","hours","minutes","seconds","milliseconds"].includes(_unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal,_unit,dataPoint.convertTounit):("$"===_unit?_unit+" ":"")+_actualVal+(_unit&&"$"!==_unit?" "+_unit:""),_val=_actualVal;_enumMap&&_enumMap[_val]&&(_tVal=_enumMap[_val]),_dJson&&tooltipData.push({label:dataPoint.label,value:_tVal,color:dataPoint.color})}}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=xVal;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(xVal)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(xVal).format(dateFormat):"number"===typeof xVal&&(tooltipTitle=chartContext.data.x[xVal]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};if(chartContext.tooltipCallback)return chartContext.tooltipCallback(tooltipData,tooltipConfig,tooltipTitle),null;_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()})),parentSelector.selectAll("."+offClassName).on("mousemove",(function(){var _step16,mouse=d3__WEBPACK_IMPORTED_MODULE_42__.mouse(this),closestDate=c3Self.newFindClosest(chartContext.data.x,chartContext.options.axis.x.time.format.d3Format,self.x.invert(mouse[0])),closestIdx=closestDate.i,xVal=closestDate.date,tooltipData=[],_iterator16=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var dataPoint=_step16.value;if("group"===dataPoint.type){if(dataPoint.children){var _step17,children=[],_iterator17=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var dp=_step17.value,dJson=chartContext.data[dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=null===dJson[closestIdx]?0:dJson[closestIdx];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=c3Self.getBooleanValue(chartContext,xVal,dp.key,closestIdx));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson&&children.push({label:dp.label,value:tVal,color:dp.color})}}catch(err){_iterator17.e(err)}finally{_iterator17.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else{var _dJson2=chartContext.data[dataPoint.key],_unit2=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap2=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal2=null===_dJson2[closestIdx]?0:_dJson2[closestIdx];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal2=c3Self.getBooleanValue(chartContext,xVal,dataPoint.key,closestIdx));var _tVal2=["days","hours","minutes","seconds","milliseconds"].includes(_unit2)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal2,_unit2,dataPoint.convertTounit):("$"===_unit2?_unit2+" ":"")+_actualVal2+(_unit2&&"$"!==_unit2?" "+_unit2:""),_val2=_actualVal2;_enumMap2&&_enumMap2[_val2]&&(_tVal2=_enumMap2[_val2]),_dJson2&&tooltipData.push({label:dataPoint.label,value:_tVal2,color:dataPoint.color})}}}catch(err){_iterator16.e(err)}finally{_iterator16.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=xVal;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(xVal)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(xVal).format(dateFormat):"number"===typeof xVal&&(tooltipTitle=chartContext.data.x[xVal]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};if(chartContext.tooltipCallback)return chartContext.tooltipCallback(tooltipData,tooltipConfig,tooltipTitle),null;_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()}))}}if(d.enumChart){params.grid.y=!1,params.size.height=25,params.axis.x.label.text="",params.axis.x.show=!1,params.axis.y.show=!1,params.axis.y2.show=!1,params.padding.bottom=-25,params.axis.x.min=chartContext.dateRange.range.highResMin,params.axis.x.max=chartContext.dateRange.range.highResMax;for(var _offClassName="fc-boolean-"+d.key+"-0",classes={},_i2=0,_Object$keys2=Object.keys(d.enumMap);_i2<_Object$keys2.length;_i2++){var enumVal=_Object$keys2[_i2];classes[enumVal]="fc-boolean-"+d.key+"-"+enumVal}var _booleanTimeline=chartContext.booleanData&&chartContext.booleanData[d.key.replace("datapoint_","")]?chartContext.booleanData[d.key.replace("datapoint_","")]:null;if(_booleanTimeline&&_booleanTimeline.length){var _step18,_regions=[],_x=[],_y=[],_iterator18=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_booleanTimeline);try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _range=_step18.value;_x.push(_range.start),_y.push(null),_x.push(_range.end),_y.push(null),_regions.push({start:_range.start,end:_range.end,class:_range.value?classes[_range.value]:_offClassName})}}catch(err){_iterator18.e(err)}finally{_iterator18.f()}params.regions=_regions,params.data.json.x=_x,params.data.json[d.key.replace("datapoint_","")]=_y,params.data.xFormat="%m-%d-%Y %H:%M",params.axis.x.tick.values=null}else params.data.xFormat="%m-%d-%Y %H:%M",params.regions={start:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]?chartContext.dateRange.time[1]:chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),class:_offClassName},params.data.json.x=[moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]?chartContext.dateRange.time[1]:chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm")],params.data.json[d.key.replace("datapoint_","")]=[null,null],params.axis.x.tick.values=null;params.tooltip.show=!1;var _c3Self=_this2;params.onafterinit=function(){for(var self=this,parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element),_i3=0,_Object$keys3=Object.keys(d.enumMap);_i3<_Object$keys3.length;_i3++){var _enumVal=_Object$keys3[_i3];parentSelector.selectAll("."+classes[_enumVal]).style("fill",d.enumColorMap[_enumVal]),parentSelector.selectAll("."+classes[_enumVal]+" rect").style("fill-opacity","0.9"),parentSelector.selectAll("."+classes[_enumVal]+" rect").classed("fc-boolean-rect-09",!0),parentSelector.selectAll("."+classes[_enumVal]).on("mousemove",(function(){var _step19,mouse=d3__WEBPACK_IMPORTED_MODULE_42__.mouse(this),closestDate=_c3Self.newFindClosest(chartContext.data.x,chartContext.options.axis.x.time.format.d3Format,self.x.invert(mouse[0])),closestIdx=closestDate.i,xVal=closestDate.date,tooltipData=[],_iterator19=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var dataPoint=_step19.value;if("group"===dataPoint.type){if(dataPoint.children){var _step20,children=[],_iterator20=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var dp=_step20.value,dJson=chartContext.data[dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=null===dJson[closestIdx]?0:dJson[closestIdx];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=_c3Self.getBooleanValue(chartContext,xVal,dp.key,closestIdx));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;if(enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson){var data={label:dp.label,value:tVal};"---"!==val&&(data["color"]="ENUM"===dp.dataType?dp.enumColorMap[val]:dp.color),children.push(data)}}}catch(err){_iterator20.e(err)}finally{_iterator20.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else{var _dJson3=chartContext.data[dataPoint.key],_unit3=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap3=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal3=null===_dJson3[closestIdx]?0:_dJson3[closestIdx];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal3=_c3Self.getBooleanValue(chartContext,xVal,dataPoint.key,closestIdx));var _tVal3=["days","hours","minutes","seconds","milliseconds"].includes(_unit3)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal3,_unit3,dataPoint.convertTounit):("$"===_unit3?_unit3+" ":"")+_actualVal3+(_unit3&&"$"!==_unit3?" "+_unit3:""),_val3=_actualVal3;if(_enumMap3&&_enumMap3[_val3]&&(_tVal3=_enumMap3[_val3]),_dJson3){var _data={label:dataPoint.label,value:_tVal3};"---"!==_val3&&(_data["color"]="ENUM"===dataPoint.dataType?dataPoint.enumColorMap[_val3]:dataPoint.color),tooltipData.push(_data)}}}}catch(err){_iterator19.e(err)}finally{_iterator19.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=xVal;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(xVal)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(xVal).format(dateFormat):"number"===typeof xVal&&(tooltipTitle=chartContext.data.x[xVal]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};if(chartContext.tooltipCallback)return chartContext.tooltipCallback(tooltipData,tooltipConfig,tooltipTitle),null;_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()}))}parentSelector.selectAll("."+_offClassName).style("fill",d.enumChart.color),parentSelector.selectAll("."+_offClassName+" rect").style("fill-opacity","0.1"),parentSelector.selectAll(".bb-chart").style("display","none"),// removed the bb-chart element from the boolean chart. it causes tool tip issue. mouse over event fires when mouse over the alarm charts not a boolean chart
parentSelector.selectAll("."+_offClassName).on("mousemove",(function(){var _step21,mouse=d3__WEBPACK_IMPORTED_MODULE_42__.mouse(this),closestDate=_c3Self.newFindClosest(chartContext.data.x,chartContext.options.axis.x.time.format.d3Format,self.x.invert(mouse[0])),closestIdx=closestDate.i,xVal=closestDate.date,tooltipData=[],_iterator21=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var dataPoint=_step21.value;if("group"===dataPoint.type){if(dataPoint.children){var _step22,children=[],_iterator22=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var dp=_step22.value,dJson=chartContext.data[dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=null===dJson[closestIdx]?0:dJson[closestIdx];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=_c3Self.getBooleanValue(chartContext,xVal,dp.key,closestIdx));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;if(enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson){var data={label:dp.label,value:tVal};"---"!==val&&(data["color"]="ENUM"===dp.dataType?dp.enumColorMap[val]:dp.color),tooltipData.push(data)}}}catch(err){_iterator22.e(err)}finally{_iterator22.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else{var _dJson4=chartContext.data[dataPoint.key],_unit4=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap4=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal4=null===_dJson4[closestIdx]?0:_dJson4[closestIdx];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal4=_c3Self.getBooleanValue(chartContext,xVal,dataPoint.key,closestIdx));var _tVal4=["days","hours","minutes","seconds","milliseconds"].includes(_unit4)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal4,_unit4,dataPoint.convertTounit):("$"===_unit4?_unit4+" ":"")+_actualVal4+(_unit4&&"$"!==_unit4?" "+_unit4:""),_val4=_actualVal4;if(_enumMap4&&_enumMap4[_val4]&&(_tVal4=_enumMap4[_val4]),_dJson4){var _data2={label:dataPoint.label,value:_tVal4};"---"!==_val4&&(_data2["color"]="ENUM"===dataPoint.dataType?dataPoint.enumColorMap[_val4]:dataPoint.color),tooltipData.push(_data2)}}}}catch(err){_iterator21.e(err)}finally{_iterator21.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=xVal;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(xVal)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(xVal).format(dateFormat):"number"===typeof xVal&&(tooltipTitle=chartContext.data.x[xVal]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};if(chartContext.tooltipCallback)return chartContext.tooltipCallback(tooltipData,tooltipConfig,tooltipTitle),null;_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()}))}}if(index!==dataList.length||chartContext.scatterConfig||(params.axis.x.show||!d.enumChart&&!d.booleanChart?params.axis.x.show&&(d.enumChart||d.booleanChart||(params.size.height=params.size.height+50),params.padding.bottom=0):(params.axis.x.show=!0,params.size.height=95,params.axis.x.label.text="Timestamp",params.padding.bottom=0)),params.axis.y&&params.axis.y.show&&(params.axis.y.label=" "),params.axis.y2&&params.axis.y2.show&&(params.axis.y2.label=" "),chartContext.options.customizeC3){var mergedparams=util_deepmerge__WEBPACK_IMPORTED_MODULE_40__/* ["default"] */.Z.objectAssignDeep(params,chartContext.options.customizeC3);params=mergedparams}params.data.json=Object.freeze(params.data.json),c3Data.push(params)};for(_iterator12.s();!(_step12=_iterator12.n()).done;)_loop3()}catch(err){_iterator12.e(err)}finally{_iterator12.f()}return c3Data},newFindClosest:function(dates,d3Format,testDate){for(var date=new Date(testDate),max=dates.length,parseTime=d3__WEBPACK_IMPORTED_MODULE_42__.timeParse(d3Format),lowIdx=null,lowDate=null,lowDiff=null,i=0;i<max;i++){var dateObj=parseTime(dates[i]),d=date-dateObj;d<0&&(d=-d),lowDiff?lowDiff>d&&(lowDiff=d,lowDate=dateObj,lowIdx=i):(lowDate=dateObj,lowDiff=d,lowIdx=i)}return{i:lowIdx,date:lowDate}},prepareGeneralOptions:function(chartContext,params,multichartKey){var generalOptions=chartContext.options.general,grid={x:{show:generalOptions.grid.x},y:{show:generalOptions.grid.y}};if("pie"!==chartContext.options.type&&"donut"!==chartContext.options.type&&"gauge"!==chartContext.options.type){if(grid.y.lines=[{value:0,class:"x-axis-zero-line"}],grid.y2={lines:[{value:0,class:"x-axis-zero-line"}]},chartContext.options.safeLimit&&chartContext.options.safeLimit.length){var points=[];chartContext.options.dataPoints.forEach((function(dp){"group"===dp.type?multichartKey?multichartKey==="group_"+dp.label&&points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):multichartKey?multichartKey==="datapoint_"+dp.key&&points.push(dp):points.push(dp)}));var _step23,safeLimitColorMap={},keyIndex=0,_iterator23=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.safeLimit);try{var _loop4=function(){var sl=_step23.value;keyIndex+=1;var dpObj=points.find((function(dp){return dp.key===sl.datapoint}));if(!dpObj)return 1;// continue
if(!0===dpObj.safelimit){var className="safelimit-"+keyIndex;safeLimitColorMap[className]=dpObj.color,grid.y.lines.push({value:sl.value,text:sl.label+": "+sl.value,class:className+" "+sl.key,axis:dpObj.axes,position:"y2"===dpObj.axes?"end":"start"})}};for(_iterator23.s();!(_step23=_iterator23.n()).done;)_loop4()}catch(err){_iterator23.e(err)}finally{_iterator23.f()}params.onafterinit=function(){var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);for(var key in safeLimitColorMap)parentSelector.selectAll("."+key+" line").style("stroke",safeLimitColorMap[key]),parentSelector.selectAll("."+key+" text").style("fill",safeLimitColorMap[key]),parentSelector.selectAll("."+key+".min line").style("stroke-dasharray","2,2"),parentSelector.selectAll("."+key+".max line").style("stroke-dasharray","8,2")}}if(chartContext.options.benchmark&&(chartContext.options.benchmark.variances||chartContext.options.benchmark.constant||chartContext.options.benchmark.lines)){var _points=[];chartContext.options.dataPoints.forEach((function(dp){"group"===dp.type?multichartKey?multichartKey==="group_"+dp.label&&_points.push.apply(_points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):_points.push.apply(_points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):multichartKey?multichartKey==="datapoint_"+dp.key&&_points.push(dp):_points.push(dp)}));var colorMap={},_keyIndex=0;chartContext.options.benchmark.constant&&grid.y.lines.push({value:chartContext.options.benchmark.constant,text:"Benchmark : ".concat(chartContext.options.benchmark.constant),class:"safelimit-constant benchmark",axis:"y",position:"end"}),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_48__/* .isArray */.kJ)(chartContext.options.benchmark.lines)&&((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_48__/* .isEmpty */.xb)(chartContext.options.benchmark.lines)||chartContext.options.benchmark.lines.forEach((function(constantLine){if(_keyIndex+=1,""!=constantLine.value&&!0===constantLine.show){var className="safelimit-constantLine-".concat(_keyIndex);colorMap[className]=constantLine.color,grid.y.lines.push({value:constantLine.value,text:"".concat(constantLine.label," : ").concat(constantLine.value),class:"".concat(className," benchmark"),axis:"y",position:"end"})}}))),_points.forEach((function(dp){chartContext.options.benchmark.variances[dp.key]&&chartContext.options.benchmark.variances[dp.key].length&&chartContext.reportVarianceData&&chartContext.options.benchmark.variances[dp.key].forEach((function(variance){if(chartContext.reportVarianceData["".concat(dp.key,".").concat(variance)]){_keyIndex+=1;var className="safelimit-".concat(_keyIndex);colorMap[className]=dp.color;var value=parseInt(chartContext.reportVarianceData["".concat(dp.key,".").concat(variance)]),label=chartContext.options.benchmark.label?chartContext.options.benchmark.label:"Benchmark";grid.y.lines.push({value:value,text:"".concat(label,": ").concat(value),class:"".concat(className," benchmark"),axis:dp.axes,position:"end"})}}))})),params.onafterinit=function(){var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);for(var key in colorMap)parentSelector.selectAll("."+key+" line").style("stroke",colorMap[key]),parentSelector.selectAll("."+key+" text").style("fill",colorMap[key]),parentSelector.selectAll("."+key+".min line").style("stroke-dasharray","2,2"),parentSelector.selectAll("."+key+".max line").style("stroke-dasharray","8,2");parentSelector.selectAll(".safelimit-constant line").style("stroke","#000"),parentSelector.selectAll(".safelimit-constant text").style("fill","#000")}}}chartContext.scatterConfig&&(grid["focus"]={show:!0,y:!0}),params.grid=grid,params.point=chartContext.options.general.point?chartContext.options.general.point:generalOptions.point,params.line={connectNull:!chartContext.options.line||null===chartContext.options.line.connectNull||chartContext.options.line.connectNull}},prepareMultichartData:function(chartContext){var _this3=this,chartDataList=[];if(chartContext.options.dataPoints&&chartContext.options.dataPoints.length){var _step24,_iterator24=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{var _loop5=function(){var dataPoint=_step24.value,data=chartContext.scatterConfig?{}:{x:"x"};chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(data.xFormat=chartContext.options.axis.x.time.format.d3Format),chartContext.options.general.labels&&(data.labels=!0);var names={},colors={},types={},groups=[],axes={},jsonData={},xs={},xMap={};if(chartContext.scatterConfig&&chartContext.xMap&&(xMap=chartContext.xMap),chartContext.options.isGroupedByTime){if(chartContext.options.isGroupedByTime){var columns=[],pointaxes={},pointtypes={};if("datapoint"===dataPoint.type||"rangeGroup"===dataPoint.type)columns=Object.keys(chartContext.options.timeGroupOptions).filter((function(k){return k.split("_")[0]===dataPoint.key})),pointaxes[dataPoint.key]=dataPoint.axes,pointtypes[dataPoint.key]=dataPoint.chartType;else if(dataPoint.children&&dataPoint.children.length){var _step27,_iterator27=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{var _loop6=function(){var child=_step27.value,col=Object.keys(chartContext.options.timeGroupOptions).filter((function(k){return k.split("_")[0]===child.key}));columns=columns.concat(col),pointaxes[child.key]=child.axes,pointtypes[child.key]=child.chartType};for(_iterator27.s();!(_step27=_iterator27.n()).done;)_loop6()}catch(err){_iterator27.e(err)}finally{_iterator27.f()}}var _step28,_group=[],_iterator28=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(columns);try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var column=_step28.value;chartContext.options.timeGroupOptions[column].name&&(pointaxes[column.split("_")[0]]&&(axes[column]=pointaxes[column.split("_")[0]]),pointtypes[column.split("_")[0]]&&(types[column]="stackedbar"===pointtypes[column.split("_")[0]]?"bar":pointtypes[column.split("_")[0]],"stackedbar"===pointtypes[column.split("_")[0]]&&_group.push(column)),names[column]=chartContext.options.timeGroupOptions[column].name,colors[column]=chartContext.options.timeGroupOptions[column].color,jsonData[column]=chartContext.data[column])}}catch(err){_iterator28.e(err)}finally{_iterator28.f()}_group.length&&groups.push(_group)}}else if("datapoint"===dataPoint.type||"rangeGroup"===dataPoint.type){if(dataPoint.visible){if(chartContext.data[dataPoint.key]&&(jsonData[dataPoint.key]=chartContext.data[dataPoint.key]),xMap[dataPoint.key]||dataPoint.key.split("_").length&&xMap[dataPoint.key.split("_")[0]])if(3===dataPoint.pointType){var key=dataPoint.key.split("_")[0];xs[dataPoint.key]=xMap[key]}else xs[dataPoint.key]=xMap[dataPoint.key];dataPoint.label&&(names[dataPoint.key]=dataPoint.label),dataPoint.chartType&&(types[dataPoint.key]="stackedbar"===dataPoint.chartType||"histogram"===dataPoint.chartType?"bar":dataPoint.chartType),dataPoint.color&&(colors[dataPoint.key]=dataPoint.color),dataPoint.axes&&(axes[dataPoint.key]=dataPoint.axes),chartContext.scatterConfig?(types[dataPoint.key]="scatter",3===dataPoint.pointType&&(
//trendLine
types[dataPoint.key]="line")):3===dataPoint.pointType&&(
//trendLine
types[dataPoint.key]="line")}else if(!1===dataPoint.visible)return 0;// continue
}else if(dataPoint.children&&dataPoint.children.length){var booleanDpList=dataPoint.children.filter((function(dp){return"BOOLEAN"===dp.dataType||"ENUM"===dp.dataType}));if(booleanDpList&&booleanDpList.length){var _step25,_iterator25=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(booleanDpList);try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var child=_step25.value,booleanData=chartContext.scatterConfig?{}:{x:"x"};chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(booleanData.xFormat=chartContext.options.axis.x.time.format.d3Format),chartContext.options.general.labels&&(booleanData.labels=!0);var booleanNames={},booleanColors={},booleanTypes={},booleanAxes={},booleanJsonData={},booleanxs={};if(child.visible)chartContext.data[child.key]&&(booleanJsonData[child.key]=chartContext.data[child.key]),xMap[child.key]&&(booleanxs[child.key]=xMap[child.key]),child.label&&(booleanNames[child.key]=child.label),child.chartType&&(booleanTypes[child.key]=child.chartType),child.color&&(booleanColors[child.key]=child.color),child.axes&&(booleanAxes[child.key]=child.axes);else if(!1===child.visible)continue;if(chartContext.scatterConfig||(booleanJsonData.x=chartContext.data.x),booleanData.json=booleanJsonData,booleanData.names=booleanNames,booleanData.colors=booleanColors,booleanData.types=booleanTypes,booleanData.type="area",booleanData.axes=booleanAxes,booleanData.key=child.type+"_"+(child.key?child.key:child.label),booleanData.label=child.label,0!==Object.keys(booleanxs).length){booleanData["xs"]=booleanxs;for(var _i4=0,_Object$keys4=Object.keys(booleanxs);_i4<_Object$keys4.length;_i4++){var xkey=_Object$keys4[_i4];!booleanData.json[booleanxs[xkey]]&&chartContext.data[booleanxs[xkey]]&&(booleanData.json[booleanxs[xkey]]=chartContext.data[booleanxs[xkey]])}}booleanData.booleanChart="BOOLEAN"===child.dataType?{color:child.color}:null,"ENUM"===child.dataType&&(booleanData.enumChart="ENUM"===child.dataType?{color:child.color}:null,booleanData.enumMap=child.enumMap,child.enumColorMap&&(booleanData.enumColorMap=child.enumColorMap)),chartDataList.push(booleanData)}}catch(err){_iterator25.e(err)}finally{_iterator25.f()}return 0;// continue
}var _step26,group=[],visibleChildPoints=0,_iterator26=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _child=_step26.value;if(_child.visible){if(chartContext.data[_child.key]&&(jsonData[_child.key]=chartContext.data[_child.key]),xMap[_child.key]||_child.key.split("_").length&&xMap[_child.key.split("_")[0]])if(3===dataPoint.pointType){var _key2=_child.key.split("_")[0];xs[_child.key]=xMap[_key2]}else xs[_child.key]=xMap[_child.key];_child.label&&(names[_child.key]=_child.label),_child.chartType&&(types[_child.key]=_child.chartType),_child.color&&(colors[_child.key]=_child.color),_child.axes&&(axes[_child.key]=_child.axes),"stackedbar"===_child.chartType&&(types[_child.key]="bar",group.push(_child.key?_child.key+"":_child.key)),chartContext.scatterConfig?(types[_child.key]="scatter",3===dataPoint.pointType&&(
//trendLine
types[_child.key]="line")):3===dataPoint.pointType&&(
//trendLine
types[_child.key]="line")}"undefined"!==typeof _child.visible&&!0!==_child.visible||(visibleChildPoints+=1)}}catch(err){_iterator26.e(err)}finally{_iterator26.f()}if(group.length&&groups.push(group),0===visibleChildPoints)return 0;// continue
}if(chartContext.scatterConfig||(jsonData.x=chartContext.data.x),data.json=jsonData,data.names=names,data.colors=colors,data.types=types,0!==Object.keys(xs).length){data["xs"]=xs,data["xSort"]=!1;for(var _i5=0,_Object$keys5=Object.keys(xs);_i5<_Object$keys5.length;_i5++){var _xkey=_Object$keys5[_i5];!data.json[xs[_xkey]]&&chartContext.data[xs[_xkey]]&&(data.json[xs[_xkey]]=chartContext.data[xs[_xkey]])}}else chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length&&(data["xSort"]=!1);var allowedTypes=["scatter","bubble"],scatterJSOn={},colorClusters={};if(Object.keys(types).find((function(key){return"scatter"===types[key]}))&&(!chartContext.options.regressionConfig||0===chartContext.options.regressionConfig.length)||chartContext.options.trendLine&&chartContext.options.trendLine.enable)if(data.point={},data.point["show"]=!0,data.point["pattern"]=[],"datapoint"===dataPoint.type)if(allowedTypes.includes(types[dataPoint.key])||6===dataPoint.pointType)if(chartContext.scatterConfig&&dataPoint.pointCustomization){var pointPattern=_this3.getPointPattern(dataPoint.pointCustomization.shape);"x"!==dataPoint.axes&&data.point.pattern.push(pointPattern),scatterJSOn[dataPoint.key]=dataPoint.pointCustomization,colorClusters[dataPoint.key]=_this3.getClusters(data.json[dataPoint.key].slice()),chartContext.options.scatter.size&&"x"!==dataPoint.axes?(data.json[dataPoint.key]=_this3.getBubbleFormatedData(data.json[dataPoint.key],data.json[dataPoint.pointCustomization.size.basedOn]),data.types[dataPoint.key]="bubble"):data.types[dataPoint.key]="scatter"}else data.point.pattern.push("circle");else data.point.pattern.push("<polygon></polygon>");else if("systemgroup"===dataPoint.type){var _step29,_iterator29=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _child2=_step29.value;if(allowedTypes.includes(types[_child2.key]))if(chartContext.scatterConfig&&_child2.pointCustomization){var _pointPattern=_this3.getPointPattern(_child2.pointCustomization.shape);"x"!==_child2.axes&&data.point.pattern.push(_pointPattern),scatterJSOn[_child2.key]=_child2.pointCustomization,colorClusters[_child2.key]=_this3.getClusters(data.json[_child2.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==_child2.axes?(data.json[_child2.key]=_this3.getBubbleFormatedData(data.json[_child2.key],data.json[_child2.pointCustomization.size.basedOn]),data.types[_child2.key]="bubble"):data.types[_child2.key]="scatter"}else data.point.pattern.push("circle");else data.point.pattern.push("<polygon></polygon>")}}catch(err){_iterator29.e(err)}finally{_iterator29.f()}}else if("rangeGroup"===dataPoint.type)if(allowedTypes.includes(types[dataPoint.key]))if(chartContext.scatterConfig&&dataPoint.pointCustomization){var _pointPattern2=_this3.getPointPattern(dataPoint.pointCustomization.shape);"x"!==dataPoint.axes&&data.point.pattern.push(_pointPattern2),scatterJSOn[dataPoint.key]=dataPoint.pointCustomization,colorClusters[dataPoint.key]=_this3.getClusters(data.json[dataPoint.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==dataPoint.axes?(data.json[dataPoint.key]=_this3.getBubbleFormatedData(data.json[dataPoint.key],data.json[dataPoint.pointCustomization.size.basedOn]),data.types[dataPoint.key]="bubble"):data.types[dataPoint.key]="scatter"}else data.point.pattern.push("circle");else data.point.pattern.push("<polygon></polygon>");else if(dataPoint.children&&dataPoint.children.length){var _step30,_iterator30=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _child3=_step30.value;if(allowedTypes.includes(types[_child3.key]))if(chartContext.scatterConfig&&_child3.pointCustomization){var _pointPattern3=_this3.getPointPattern(_child3.pointCustomization.shape);"x"!==_child3.axes&&data.point.pattern.push(_pointPattern3),scatterJSOn[_child3.key]=_child3.pointCustomization,colorClusters[_child3.key]=_this3.getClusters(data.json[_child3.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==_child3.axes?(data.json[_child3.key]=_this3.getBubbleFormatedData(data.json[_child3.key],data.json[_child3.pointCustomization.size.basedOn]),data.types[_child3.key]="bubble"):data.types[_child3.key]="scatter"}else data.point.pattern.push("circle");else data.point.pattern.push("<polygon></polygon>")}}catch(err){_iterator30.e(err)}finally{_iterator30.f()}}data.color=function(color,d){if(scatterJSOn[d.id]&&chartContext.options.scatter.color.mode){var colorKey=scatterJSOn[d.id].color.basedOn;if(colorClusters[colorKey]){var colorScale="monochrome"===chartContext.options.scatter.color.mode?chroma_js__WEBPACK_IMPORTED_MODULE_47__.scale(["white",color]).colors(6):["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"],colorRange=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().domain(colorClusters[colorKey]).range("monochrome"===chartContext.options.scatter.color.mode?colorScale.slice(1,6):colorScale);return"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value?d.value.y?colorRange(d.value.y):colorRange(d.value):color}}else if(chartContext.options.scatter&&"monochrome"===chartContext.options.scatter.color.mode){if(colorClusters[d.id]){var _colorScale=chroma_js__WEBPACK_IMPORTED_MODULE_47__.scale(["white",color]).colors(6),_colorRange=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().domain(colorClusters[d.id]).range(_colorScale.slice(1,6));return"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value?d.value.y?_colorRange(d.value.y):_colorRange(d.value):color}}else if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value){var matchpoint=chartContext.options.dataPoints.find((function(dp){return dp.key===d.id}));if(matchpoint&&matchpoint.colorCriteria){var min,max,mincolor,maxcolor,resultcolor,_step31,_iterator31=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(matchpoint.colorCriteria);try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var crit=_step31.value;("undefined"===typeof min||min>crit.min)&&(min=crit.min,mincolor=crit.color),("undefined"===typeof max||max<crit.max)&&(max=crit.max,maxcolor=crit.color),d.value>=crit.min&&d.value<crit.max?resultcolor=crit.color:d.value<min?resultcolor=mincolor:d.value>max&&(resultcolor=maxcolor)}}catch(err){_iterator31.e(err)}finally{_iterator31.f()}return resultcolor}}return color},data.type=chartContext.Readingdp||chartContext.scatterConfig?"scatter":"area",groups.length&&(data.groups=groups),data.axes=axes,data.key=dataPoint.type+"_"+(dataPoint.key?dataPoint.key:dataPoint.label),data.label=dataPoint.label,data.booleanChart="BOOLEAN"===dataPoint.dataType?{color:dataPoint.color}:null,"ENUM"===dataPoint.dataType&&(data.enumChart="ENUM"===dataPoint.dataType?{color:dataPoint.color}:null,data.enumMap=dataPoint.enumMap,dataPoint.enumColorMap&&(data.enumColorMap=dataPoint.enumColorMap)),chartDataList.push(data)};for(_iterator24.s();!(_step24=_iterator24.n()).done;)_loop5()}catch(err){_iterator24.e(err)}finally{_iterator24.f()}}return chartDataList},transformPieData:function(type,chartContext){for(var data=chartContext.data,options=chartContext.options,newData={},colors={},labels={},dataKey=Object.keys(data).filter((function(k){return"x"!==k}))[0],i=0;i<data.x.length;i++){var key=data.x[i];if(newData[key]=[data[dataKey][i]],-1!==options.axis.x.datatype.indexOf("date")){var parseTime=d3__WEBPACK_IMPORTED_MODULE_42__.timeParse(chartContext.options.axis.x.time.format.d3Format);labels[key]=this.newGetDateFormat(parseTime(key),chartContext.dateRange.period,chartContext.dateRange.rangeType)}options.xColorMap&&options.xColorMap[key]&&(colors[key]=options.xColorMap[key])}return newData.x=[dataKey],chartContext.xActualDataType=chartContext.options.axis.x.datatype,chartContext.options.axis.x.datatype="string",chartContext.xLabelMap=labels,{json:newData,colors:colors,labels:labels,type:type}},prepareData:function(chartContext){var data={json:Object.assign({},chartContext.data),type:"stackedbar"===chartContext.options.type||"histogram"===chartContext.options.type?"bar":chartContext.options.type};if(chartContext.scatterConfig||(data.x="x"),chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(data.xFormat=chartContext.options.axis.x.time.format.d3Format),chartContext.options.general.labels&&(data.labels=!0),chartContext.xValueMode)return data=this.transformPieData(data.type,chartContext),data;var xMap={};if(chartContext.scatterConfig&&chartContext.xMap&&(xMap=chartContext.xMap),chartContext.options.dataPoints&&chartContext.options.dataPoints.length){var names={},colors={},types={},groups=[],axes={},hidden=[],stackedGroup=[],xs={};if(chartContext.options.isGroupedByTime){if(chartContext.options.timeGroupOptions){var allPoints=[];chartContext.options.dataPoints.forEach((function(dp){"group"===dp.type?allPoints.push.apply(allPoints,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):allPoints.push(dp)}));for(var _loop8=function(){var column=_Object$keys6[_i6];chartContext.options.timeGroupOptions[column].visible||hidden.push(column),"stackedbar"===chartContext.options.type&&(types[column]="bar",stackedGroup.push(column?column+"":column));var point=allPoints.find((function(dp){return dp.key===column.split("_")[0]}));point&&point.axes&&(axes[column]=point.axes),names[column]=chartContext.options.timeGroupOptions[column].name,colors[column]=chartContext.options.timeGroupOptions[column].color},_i6=0,_Object$keys6=Object.keys(chartContext.options.timeGroupOptions);_i6<_Object$keys6.length;_i6++)_loop8()}}else{var _step32,_iterator32=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{var _loop7=function(){var dataPoint=_step32.value;if("datapoint"===dataPoint.type){if(dataPoint.label&&(names[dataPoint.key]=dataPoint.label),dataPoint.chartType&&(types[dataPoint.key]=dataPoint.chartType),dataPoint.color&&(colors[dataPoint.key]=dataPoint.color),dataPoint.axes&&(axes[dataPoint.key]=dataPoint.axes),chartContext.options.hideDataPoints&&chartContext.options.hideDataPoints.length&&chartContext.options.hideDataPoints.find((function(rt){return rt===dataPoint.key}))&&(dataPoint.visible=!1),!1===dataPoint.visible&&hidden.push(dataPoint.key),(!chartContext.options.combo&&"stackedbar"===chartContext.options.type||"stackedbar"===dataPoint.chartType)&&(types[dataPoint.key]="bar",stackedGroup.push(dataPoint.key?dataPoint.key+"":dataPoint.key)),chartContext.options.combo&&"histogram"===dataPoint.chartType&&(types[dataPoint.key]="bar"),xMap[dataPoint.key]||dataPoint.key.split("_").length&&xMap[dataPoint.key.split("_")[0]])if(3===dataPoint.pointType||6===dataPoint.pointType){var key=dataPoint.key.split("_")[0];xs[dataPoint.key]=xMap[key]}else xs[dataPoint.key]=xMap[dataPoint.key];chartContext.Readingdp||chartContext.options.trendLine&&chartContext.options.trendLine.enable?(types[dataPoint.key]=chartContext.options.type,3!==dataPoint.pointType&&6!==dataPoint.pointType||(
//trendLine
types[dataPoint.key]="line")):3!==dataPoint.pointType&&6!==dataPoint.pointType||(
//trendLine
types[dataPoint.key]="line")}else if("systemgroup"===dataPoint.type){var _step33,group=[],_iterator33=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var child=_step33.value;if(group.push(child.key?child.key+"":child.key),xMap[child.key]||child.key.toString().split("_").length&&xMap[child.key.toString().split("_")[0]])if(3===dataPoint.pointType||6===dataPoint.pointType){var _key3=dataPoint.key.split("_")[0];xs[child.key]=xMap[_key3]}else xs[child.key]=xMap[dataPoint.key];child.label&&(names[child.key]=child.label),dataPoint.chartType&&(types[child.key]=dataPoint.chartType),child.color&&(colors[child.key]=child.color),child.axes&&(axes[child.key]=child.axes),chartContext.options.hideDataPoints&&chartContext.options.hideDataPoints.length&&chartContext.options.hideDataPoints.find((function(rt){return rt===dataPoint.key}))&&(dataPoint.visible=!1),!1===dataPoint.visible&&hidden.push(dataPoint.key)}}catch(err){_iterator33.e(err)}finally{_iterator33.f()}"bar"!==chartContext.options.type&&"histogram"!==chartContext.options.type&&groups.push(group)}else if("rangeGroup"===dataPoint.type){if(dataPoint.label&&(names[dataPoint.key]=dataPoint.label),dataPoint.chartType&&(types[dataPoint.key]=dataPoint.chartType),dataPoint.color&&(colors[dataPoint.key]=dataPoint.color),dataPoint.axes&&(axes[dataPoint.key]=dataPoint.axes),chartContext.options.hideDataPoints&&chartContext.options.hideDataPoints.length&&chartContext.options.hideDataPoints.find((function(rt){return rt===dataPoint.key}))&&(dataPoint.visible=!1),!1===dataPoint.visible&&hidden.push(dataPoint.key),xMap[dataPoint.key]||dataPoint.key.split("_").length&&xMap[dataPoint.key.split("_")[0]])if(3===dataPoint.pointType||6===dataPoint.pointType){var _key4=dataPoint.key.split("_")[0];xs[dataPoint.key]=xMap[_key4]}else xs[dataPoint.key]=xMap[dataPoint.key]}else if(dataPoint.children&&dataPoint.children.length){var _step34,_group2=[],_iterator34=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var _child4=_step34.value;if("x"!==_child4.axes){if(_group2.push(_child4.key?_child4.key+"":_child4.key),_child4.label&&(names[_child4.key]=_child4.label),dataPoint.chartType)if("scatter"===_child4.chartType){if(xMap[_child4.key]||_child4.key.split("_").length&&xMap[_child4.key.split("_")[0]])if(3===dataPoint.pointType||6===dataPoint.pointType){var _key5=_child4.key.split("_")[0];xs[_child4.key]=xMap[_key5]}else xs[_child4.key]=xMap[_child4.key];types[_child4.key]=_child4.chartType}else types[_child4.key]=dataPoint.chartType;_child4.color&&(colors[_child4.key]=_child4.color),_child4.axes&&(axes[_child4.key]=_child4.axes),!1===dataPoint.visible&&hidden.push(dataPoint.key)}}}catch(err){_iterator34.e(err)}finally{_iterator34.f()}groups.push(_group2)}};for(_iterator32.s();!(_step32=_iterator32.n()).done;)_loop7()}catch(err){_iterator32.e(err)}finally{_iterator32.f()}}0!==stackedGroup.length&&groups.push(stackedGroup),data.names=names,data.colors=colors,data.types=types;var allowedTypes=["scatter","bubble"],scatterJSOn={},colorClusters={};if(Object.keys(types).find((function(key){return allowedTypes.includes(types[key])}))&&(!chartContext.options.regressionConfig||0===chartContext.options.regressionConfig.length)||chartContext.options.trendLine&&chartContext.options.trendLine.enable){chartContext.options.point={},chartContext.options.point["show"]=!0,chartContext.options.point["pattern"]=[];var _step35,_iterator35=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var dataPoint=_step35.value;if("datapoint"===dataPoint.type)if(allowedTypes.includes(types[dataPoint.key])||6===dataPoint.pointType)if(chartContext.scatterConfig&&dataPoint.pointCustomization){var pointPattern=this.getPointPattern(dataPoint.pointCustomization.shape);"x"!==dataPoint.axes&&chartContext.options.point.pattern.push(pointPattern),scatterJSOn[dataPoint.key]=dataPoint.pointCustomization,colorClusters[dataPoint.key]=this.getClusters(data.json[dataPoint.key].slice()),"reading"===chartContext.options.scatter.size.mode&&"x"!==dataPoint.axes?(data.json[dataPoint.key]=this.getBubbleFormatedData(data.json[dataPoint.key],data.json[dataPoint.pointCustomization.size.basedOn]),data.types[dataPoint.key]="bubble"):data.types[dataPoint.key]="scatter"}else chartContext.options.point.pattern.push("circle");else chartContext.options.point.pattern.push("<polygon></polygon>");else if("systemgroup"===dataPoint.type){var _step36,_iterator36=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var child=_step36.value;if(allowedTypes.includes(types[child.key]))if(chartContext.scatterConfig&&child.pointCustomization){var _pointPattern4=this.getPointPattern(child.pointCustomization.shape);"x"!==child.axes&&chartContext.options.point.pattern.push(_pointPattern4),scatterJSOn[child.key]=child.pointCustomization,colorClusters[child.key]=this.getClusters(data.json[child.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==child.axes?(data.json[child.key]=this.getBubbleFormatedData(data.json[child.key],data.json[child.pointCustomization.size.basedOn]),data.types[child.key]="bubble"):data.types[child.key]="scatter"}else chartContext.options.point.pattern.push("circle");else chartContext.options.point.pattern.push("<polygon></polygon>")}}catch(err){_iterator36.e(err)}finally{_iterator36.f()}}else if("rangeGroup"===dataPoint.type)if(allowedTypes.includes(types[dataPoint.key]))if(chartContext.scatterConfig&&dataPoint.pointCustomization){var _pointPattern5=this.getPointPattern(dataPoint.pointCustomization.shape);"x"!==dataPoint.axes&&chartContext.options.point.pattern.push(_pointPattern5),scatterJSOn[dataPoint.key]=dataPoint.pointCustomization,colorClusters[dataPoint.key]=this.getClusters(data.json[dataPoint.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==dataPoint.axes?(data.json[dataPoint.key]=this.getBubbleFormatedData(data.json[dataPoint.key],data.json[dataPoint.pointCustomization.size.basedOn]),data.types[dataPoint.key]="bubble"):data.types[dataPoint.key]="scatter"}else chartContext.options.point.pattern.push("circle");else chartContext.options.point.pattern.push("<polygon></polygon>");else if(dataPoint.children&&dataPoint.children.length){var _step37,_iterator37=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var _child5=_step37.value;if(allowedTypes.includes(types[_child5.key]))if(chartContext.scatterConfig&&_child5.pointCustomization){var _pointPattern6=this.getPointPattern(_child5.pointCustomization.shape);"x"!==_child5.axes&&chartContext.options.point.pattern.push(_pointPattern6),scatterJSOn[_child5.key]=_child5.pointCustomization,colorClusters[_child5.key]=this.getClusters(data.json[_child5.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==_child5.axes?(data.json[_child5.key]=this.getBubbleFormatedData(data.json[_child5.key],data.json[_child5.pointCustomization.size.basedOn]),data.types[_child5.key]="bubble"):data.types[_child5.key]="scatter"}else chartContext.options.point.pattern.push("circle");else chartContext.options.point.pattern.push("<polygon></polygon>")}}catch(err){_iterator37.e(err)}finally{_iterator37.f()}}}}catch(err){_iterator35.e(err)}finally{_iterator35.f()}}data.color=function(color,d){if(scatterJSOn[d.id]&&chartContext.options.scatter.color.mode){var colorKey=scatterJSOn[d.id].color.basedOn;if(colorClusters[colorKey]){var colorScale="monochrome"===chartContext.options.scatter.color.mode?chroma_js__WEBPACK_IMPORTED_MODULE_47__.scale(["white",color]).colors(6):chartContext.options.scatter.color.colors?chartContext.options.scatter.color.colors:["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"],colorRange=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().domain(colorClusters[colorKey]).range("monochrome"===chartContext.options.scatter.color.mode?colorScale.slice(1,6):colorScale);if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)){var val=data.json[colorKey][d.index];
// for data point
return val?val.y?colorRange(val.y):colorRange(val):color;
// for label
}return color}}else if(chartContext.options.scatter&&"monochrome"===chartContext.options.scatter.color.mode){if(colorClusters[d.id]){var _colorScale2=chroma_js__WEBPACK_IMPORTED_MODULE_47__.scale(["white",color]).colors(6),_colorRange2=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().domain(colorClusters[d.id]).range(_colorScale2.slice(1,6));return"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value?d.value.y?_colorRange2(d.value.y):_colorRange2(d.value):color}}else if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value){var matchpoint=chartContext.options.dataPoints.find((function(dp){return dp.key===d.id}));if(matchpoint&&matchpoint.colorCriteria){var min,max,mincolor,maxcolor,resultcolor,_step38,_iterator38=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(matchpoint.colorCriteria);try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var crit=_step38.value;("undefined"===typeof min||min>crit.min)&&(min=crit.min,mincolor=crit.color),("undefined"===typeof max||max<crit.max)&&(max=crit.max,maxcolor=crit.color),d.value>=crit.min&&d.value<crit.max?resultcolor=crit.color:d.value<min?resultcolor=mincolor:d.value>max&&(resultcolor=maxcolor)}}catch(err){_iterator38.e(err)}finally{_iterator38.f()}return resultcolor}}return color},data.groups=groups,data.axes=axes,0!==Object.keys(xs).length?(data["xs"]=xs,data["xSort"]=!1):chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length&&(data["xSort"]=!1),hidden.length&&(data.hide=hidden)}return chartContext.options.general&&chartContext.options.general.normalizeStack&&(data.stack={normalize:!0}),chartContext.options.general&&chartContext.options.general.dataOrder&&"none"!==chartContext.options.general.dataOrder&&(data.order=chartContext.options.general.dataOrder),data},getOnlyDataPoints:function(dataPoints){var _step39,result=[],_iterator39=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoints);try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var dataPoint=_step39.value;if("datapoint"===dataPoint.type.trim().toLowerCase())result.push(dataPoint);else{var _step40,_iterator40=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var child=_step40.value;result.push(child)}}catch(err){_iterator40.e(err)}finally{_iterator40.f()}}}}catch(err){_iterator39.e(err)}finally{_iterator39.f()}return result},getTickCount:function(chartContext,tickCount,decimals,axis){var tickObject={};if(!decimals){var onlyDataPoints=this.getOnlyDataPoints(chartContext.options.dataPoints),maxArr=[],_loop9=function(dataKey){if("x"===dataKey)return 1;// continue
var dp=onlyDataPoints.find((function(dp){return dp.key===dataKey}));dp&&dp.length||"y"!==axis?dp&&dp.axes===axis&&maxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(chartContext.data[dataKey])):maxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(chartContext.data[dataKey]))};for(var dataKey in chartContext.data)_loop9(dataKey);var yMax=d3__WEBPACK_IMPORTED_MODULE_42__.max(maxArr);yMax&&tickCount&&yMax<tickCount?yMax<1&&yMax>0?(tickObject["decimal"]=2,tickObject["count"]=tickCount):(tickCount=Math.round(yMax)+1,tickObject["count"]=tickCount):tickObject["count"]=tickCount}return tickObject},prepareAxis:function(chartContext,multiChartKey){var axisOptions=chartContext.options.axis;multiChartKey&&chartContext.options.multichart[multiChartKey]&&!chartContext.Readingdp&&(axisOptions=chartContext.options.multichart[multiChartKey].axis);var c3Axis={};if(c3Axis.rotated=axisOptions.rotated,c3Axis.x={show:axisOptions.x.show,label:axisOptions.x.label,tick:{},height:70},-1===axisOptions.x.datatype.indexOf("number")&&-1===axisOptions.x.datatype.indexOf("decimal")?(chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length||chartContext.Readingdp?c3Axis.x.type="indexed":c3Axis.x.type=-1!==axisOptions.x.datatype.indexOf("date")&&this.periodCheck(chartContext.dateRange)?"timeseries":"category","category"!==c3Axis.x.type&&"indexed"!==c3Axis.x.type||(axisOptions.x.tick.hasOwnProperty("fit")?c3Axis.x.tick.fit=axisOptions.x.tick.fit:chartContext.options&&"scatter"===chartContext.options.type?c3Axis.x.tick.fit=!1:c3Axis.x.tick.fit=!0)):(chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length||axisOptions.x.datatype.indexOf("number")>=0||axisOptions.x.datatype.indexOf("decimal")>=0?c3Axis.x.type="indexed":c3Axis.x.type="category",axisOptions.x.tick.hasOwnProperty("fit")?c3Axis.x.tick.fit=axisOptions.x.tick.fit:chartContext.options&&"scatter"===chartContext.options.type?c3Axis.x.tick.fit=!1:c3Axis.x.tick.fit="indexed"!==c3Axis.x.type),"timeseries"===c3Axis.x.type){var self=this,dateRangeObj=chartContext.dateRange,index=0,perDate=null;if(c3Axis.x.tick.format=function(date){var axisLabel=chartContext.options.isMobile?self.mobileDateFormat(date,dateRangeObj.period,dateRangeObj.rangeType,dateRangeObj):self.newGetDateFormat(date,dateRangeObj.period,dateRangeObj.rangeType,index,perDate);return index++,perDate=date,axisLabel},dateRangeObj.range.domain&&dateRangeObj.range.domain.length<10&&(c3Axis.x.tick.values=dateRangeObj.range.domain),chartContext.options.isMobileMulti&&(axisOptions.x.culling={max:4}),axisOptions.x.culling&&axisOptions.x.culling.max&&chartContext.options.isMobile){var newList=[];if(dateRangeObj.range.domain&&dateRangeObj.range.domain.length<6)newList=dateRangeObj.range.domain;else if(dateRangeObj.range.domain&&7===dateRangeObj.range.domain.length)newList.push(dateRangeObj.range.domain[0]),newList.push(dateRangeObj.range.domain[2]),newList.push(dateRangeObj.range.domain[4]),newList.push(dateRangeObj.range.domain[dateRangeObj.range.domain.length-1]);else if(dateRangeObj.range.domain&&dateRangeObj.range.domain.length>8){for(var split=parseInt(dateRangeObj.range.domain.length/axisOptions.x.culling.max),i=0;i<axisOptions.x.culling.max;i++)newList.push(dateRangeObj.range.domain[i*split]);newList[newList.length-1]!==dateRangeObj.range.domain[dateRangeObj.range.domain.length-1]&&newList.push(dateRangeObj.range.domain[dateRangeObj.range.domain.length-1])}else newList=dateRangeObj.range.domain;c3Axis.x.tick.values=newList}c3Axis.x.tick.fit=!1,
// c3Axis.x.tick.count = 10
c3Axis.x.min=dateRangeObj.range.min,c3Axis.x.max=dateRangeObj.range.max}
// else{
//   if(axisOptions.x.range){
//     c3Axis.x.min = axisOptions.x.range.min
//     c3Axis.x.max = axisOptions.x.range.max
//   }
// }
if(-1===axisOptions.x.datatype.indexOf("number")&&-1===axisOptions.x.datatype.indexOf("decimal")||(null!==axisOptions.x.range.min&&""!==axisOptions.x.range.min&&(c3Axis.x.min=axisOptions.x.range.min),null!==axisOptions.x.range.max&&""!==axisOptions.x.range.max&&(c3Axis.x.max=axisOptions.x.range.max),axisOptions.x.tick.format&&(c3Axis.x.tick.format=axisOptions.x.tick.format)),chartContext.data&&chartContext.data.x&&(chartContext.data.x.length<4&&(c3Axis.x.tick.multiline=!0),chartContext.data.x.length>0&&"timeseries"===c3Axis.x.type)){var xData=chartContext.data.x;xData[0]<c3Axis.x.min&&(c3Axis.x.min=xData[0]),xData[xData.length-1]>c3Axis.x.max&&(c3Axis.x.max=xData[xData.length-1]),c3Axis.x.tick.culling=!1}"vertical"===axisOptions.x.tick.direction?(c3Axis.x.tick.rotate=90,c3Axis.x.tick.multiline=!1,c3Axis.x.tick.tooltip=!0):"slanting"===axisOptions.x.tick.direction&&(c3Axis.x.tick.rotate=45,c3Axis.x.tick.multiline=!1,c3Axis.x.tick.tooltip=!0),chartContext.scatterConfig&&(c3Axis.x.tick.count=axisOptions.x.ticks.count,c3Axis.x.tick.format=function(d){if(axisOptions.x.format.decimals)return d3__WEBPACK_IMPORTED_MODULE_42__.format(",."+axisOptions.x.format.decimals+"f")(d);var val=d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(Math.round(Math.ceil(100*d)/100));return val})
/* y axis formatting start */,c3Axis.y={},c3Axis.y.show=axisOptions.y.show,c3Axis.y.label={text:axisOptions.y.label.text,position:axisOptions.y.label.position},axisOptions.y.unit&&![""," "].includes(axisOptions.y.unit)&&(c3Axis.y.label.text+=" ("+this.formatUnit(axisOptions.y.unit)+")");var tickCount=this.getTickCount(chartContext,axisOptions.y.ticks.count,axisOptions.y.format.decimals,"y");
/* y axis formatting end */
if(tickCount.decimal&&(axisOptions.y.format.decimals=tickCount.decimal),c3Axis.y.tick={count:tickCount.count?tickCount.count:axisOptions.y.ticks.count,format:function(d){var _axisOptions;if(axisOptions.y.format.decimals)return d3__WEBPACK_IMPORTED_MODULE_42__.format(",."+axisOptions.y.format.decimals+"f")(d);if(null!==(_axisOptions=axisOptions)&&void 0!==_axisOptions&&null!==(_axisOptions=_axisOptions.y)&&void 0!==_axisOptions&&_axisOptions.formatUnit&&"None"!==axisOptions.y.formatUnit){if("M"===axisOptions.y.formatUnit){var _val5=Math.round(Math.round(Math.ceil(100*d)/100)/1e6);return 0!==_val5?_val5+"M":_val5}if("K"===axisOptions.y.formatUnit){var _val6=Math.round(Math.round(Math.ceil(100*d)/100)/1e3);return 0!==_val6?_val6+"K":_val6}if("L"===axisOptions.y.formatUnit){var _val7=Math.round(Math.round(Math.ceil(100*d)/100)/1e5);return 0!==_val7?_val7+"L":_val7}if("C"===axisOptions.y.formatUnit){var _val8=Math.round(Math.round(Math.ceil(100*d)/100)/1e7);return 0!==_val8?_val8+"C":_val8}}var val=d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(Math.round(Math.ceil(100*d)/100));return axisOptions.y.format.unit?val+=axisOptions.y.format.unit:chartContext.options.general&&chartContext.options.general.normalizeStack&&(val+="%"),val}
// stepSize: 1,
// culling: {
//   max: 10,
// },
},c3Axis.y.min=axisOptions.y.range.min,axisOptions.y.range.max&&(c3Axis.y.max=axisOptions.y.range.max),c3Axis.y.padding=axisOptions.y.padding,axisOptions.y2){c3Axis.y2={},c3Axis.y2.show=axisOptions.y2.show,c3Axis.y2.label={text:axisOptions.y2.label.text,position:axisOptions.y2.label.position},axisOptions.y2.unit&&![""," "].includes(axisOptions.y2.unit)&&(c3Axis.y2.label.text+=" ("+this.formatUnit(axisOptions.y2.unit)+")");var y2TickCount=this.getTickCount(chartContext,axisOptions.y2.ticks.count,axisOptions.y2.format.decimals,"y2");y2TickCount.decimal&&(axisOptions.y2.format.decimals=y2TickCount.decimal),c3Axis.y2.tick={count:y2TickCount.count?y2TickCount.count:axisOptions.y2.ticks.count,format:function(d){var _axisOptions2;if(axisOptions.y2.format.decimals)return d3__WEBPACK_IMPORTED_MODULE_42__.format(",."+axisOptions.y2.format.decimals+"f")(d);if(null!==(_axisOptions2=axisOptions)&&void 0!==_axisOptions2&&null!==(_axisOptions2=_axisOptions2.y2)&&void 0!==_axisOptions2&&_axisOptions2.formatUnit&&"None"!==axisOptions.y2.formatUnit){if("M"===axisOptions.y2.formatUnit){var _val9=Math.round(Math.round(Math.ceil(100*d)/100)/1e6);return 0!==_val9?_val9+"M":_val9}if("K"===axisOptions.y2.formatUnit){var _val10=Math.round(Math.round(Math.ceil(100*d)/100)/1e3);return 0!==_val10?_val10+"K":_val10}if("L"===axisOptions.y2.formatUnit){var _val11=Math.round(Math.round(Math.ceil(100*d)/100)/1e5);return 0!==_val11?_val11+"L":_val11}if("C"===axisOptions.y2.formatUnit){var _val12=Math.round(Math.round(Math.ceil(100*d)/100)/1e7);return 0!==_val12?_val12+"C":_val12}}var val=d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(Math.round(Math.ceil(100*d)/100));return axisOptions.y2.format.unit&&(val+=axisOptions.y2.format.unit),val}},c3Axis.y2.min=axisOptions.y2.range.min,axisOptions.y2.range.max&&(c3Axis.y2.max=axisOptions.y2.range.max),c3Axis.y2.padding=axisOptions.y2.padding}return c3Axis.rotated&&(c3Axis.x.label.position="outer-middle",c3Axis.y.label.position="outer-center",c3Axis.y2.label.position="outer-center"),11===chartContext.options.common.mode&&(c3Axis.y.label.text="Duration (Days)",c3Axis.y.tick.format=function(timeStamp){return src_components_mixins_NumberFormatHelper__WEBPACK_IMPORTED_MODULE_44__/* ["default"] */.Z.formatTime(timeStamp,!0)}),c3Axis},formatUnit:function(unit){if(unit)switch(unit){case"&deg;C":return"C";case"&deg;F":return"F";case"&#x3BC;V":return"V";case"&#x3BC;A":return"A";case"&#x3BC;W":return"W";case"&#x3BC;Hz":return"Hz";case"&deg;":return"";default:return unit}},mobileDateFormat:function(date,period,rangeType,dateRangeObj){period=period||"high";var mdate=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date);if(rangeType){if("yearly"===period)return mdate.format("YYYY");if("D"===rangeType)return parseInt(dateRangeObj.offset)>1?mdate.format("MMM D"):mdate.format("hh a");if("W"===rangeType){if("high"===period)return mdate.format("ddd");if("hourly"===period)return mdate.format("ddd");if("daily"===period)return mdate.format("ddd");if("weekly"===period)return mdate.format("ddd");if("dayofweek"===period)return mdate.format("ddd")}else if("M"===rangeType){if("high"===period)return mdate.format("MMM D");if("hourly"===period)return mdate.format("MMM D");if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return"W"+mdate.format("WW YYYY");if("monthly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("dayofweek"===period)return mdate.format("ddd")}else if("Y"===rangeType)if("high"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("hourly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("daily"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("weekly"===period)return"W"+mdate.format("WW YYYY");if("monthly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("dayofweek"===period)return mdate.format("ddd")}else if("R"===rangeType){if("high"===period)return mdate.format("MMM D");if("hourly"===period)return mdate.format("MMM D");if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return mdate.format("MMM D");if("monthly"===period)return mdate.format("MMM");if("dayofweek"===period)return mdate.format("ddd")}else if("Q"===rangeType){if("high"===period)return mdate.format("MMM D");if("hourly"===period)return mdate.format("MMM D");if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return mdate.format("MMM D");if("monthly"===period)return mdate.format("MMM");if("dayofweek"===period)return mdate.format("ddd")}}return date.getMilliseconds()?mdate.format(".SSS"):date.getSeconds()?mdate.format(":ss"):date.getMinutes()?mdate.format("hh:mm"):date.getHours()?mdate.format("hh a"):date.getDay()&&1!==date.getDate()||1!==date.getDate()?mdate.format("MMM D"):date.getMonth()?mdate.format("MMM"):date.getYear()?mdate.format("MMM YYYY"):mdate.format("MMM D, YYYY")},getAggregate:function(childAggregate,isParent){var formatHierarchy=src_newcharts_model_newDateModel__WEBPACK_IMPORTED_MODULE_43__/* ["default"] */.Z.formatHierarchy,index=null;return formatHierarchy.forEach((function(element){element.label===childAggregate.trim().toLowerCase()&&(index=formatHierarchy.indexOf(element))})),isParent?formatHierarchy[index+1]:formatHierarchy[index]},getNewDateFormat:function(date,dateRangeObject,formatString,tickCount){var parentAggregate=null,aggregateObject=null,formatHierarchy=src_newcharts_model_newDateModel__WEBPACK_IMPORTED_MODULE_43__/* ["default"] */.Z.formatHierarchy;for(var index in formatHierarchy){if(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.min,formatString).isSame(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.max,formatString),formatHierarchy[index].momentLabel)){var aggregate=this.getAggregate(dateRangeObject.period,!1);return moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date,formatString).format(aggregate.formatString)}var _diff=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.max,formatString).diff(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.min,formatString),formatHierarchy[index].momentLabel,!0);if(_diff<formatHierarchy[index].maxLimit){_diff<tickCount?0===index?(aggregateObject=formatHierarchy[index],parentAggregate=formatHierarchy[formatHierarchy.indexOf(aggregateObject)+1]):(parentAggregate=formatHierarchy[index],aggregateObject=formatHierarchy[formatHierarchy.indexOf(parentAggregate)-1]):(aggregateObject=formatHierarchy[index],parentAggregate=formatHierarchy[formatHierarchy.indexOf(aggregateObject)+1]);break}"yearly"===formatHierarchy[index].label&&(parentAggregate=formatHierarchy[index],aggregateObject=formatHierarchy[formatHierarchy.indexOf(parentAggregate)-1])}var diff=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.max,formatString).diff(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.min,formatString),parentAggregate.momentLabel,!0);if(diff<=parentAggregate.maxLimit&&diff<tickCount)return moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date,formatString).format(aggregateObject.formatString);if(diff<=parentAggregate.maxLimit&&diff>tickCount)return moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date,formatString).format(parentAggregate.formatString);var totalLabel=aggregateObject.formatString+" "+parentAggregate.formatString;return moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date,formatString).format(totalLabel)},newGetDateFormat:function(date,period,rangeType,index,perDate){var mdate=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date);if(rangeType&&period){if("yearly"===period)return mdate.format("YYYY");if("D"===rangeType){if("hourly"===period)return mdate.format("hh a")}else if("W"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDate())return mdate.format("ddd")}else{if("daily"===period)return mdate.format("ddd");if("dayofweek"===period)return mdate.format("ddd")}else if("M"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDate())return void 0!==index&&0===index||1===date.getDate()?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D")}else{if("daily"===period)return void 0!==index&&0===index||1===date.getDate()?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if("weekly"===period)return"W"+mdate.format("ww YYYY");if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM")}else if("Y"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDay()&&1!==date.getDate())return void 0!==index&&0===index?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if(1!==date.getDate())return void 0!==index&&0===index?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("daily"===period){if(date.getDay()&&1!==date.getDate())return void 0!==index&&0===index?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if(1!==date.getDate())return mdate.format("D")+"\n"+mdate.format("MMM");if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("weekly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("quarterly"===period)return mdate.format("[Q]Q YYYY");if("monthly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM")}}else if("Q"===rangeType){if("hourly"===period)return void 0!==index&&0===index||1===date.getDate()?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if("daily"===period)return void 0!==index&&0===index||1===date.getDate()?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if("weekly"===period)return"W"+mdate.format("ww YYYY");if("quarterly"===period)return mdate.format("[Q]Q YYYY");if("monthly"===period)return mdate.format("MMM YYYY");if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM YYYY")}}return date.getMilliseconds()?mdate.format(".SSS"):date.getSeconds()?mdate.format(":ss"):date.getMinutes()?mdate.format("hh:mm"):date.getHours()?mdate.format("hh a"):date.getDay()&&1!==date.getDate()&&void 0!==(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(index)&&0===index?mdate.format("D")+"\n"+mdate.format("MMM"):date.getDay()&&1===date.getDate()?"monthly"===period?mdate.format("MMM"):mdate.format("D")+"\n"+mdate.format("MMM"):date.getDay()&&1!==date.getDate()&&perDate&&perDate!==date||0===date.getDay()&&1!==date.getDate()&&void 0!==(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(index)&&index>0&&"D"===rangeType?mdate.format("D"):1!==date.getDate()||date.getMonth()&&rangeType&&"D"===rangeType?mdate.format("D")+"\n"+mdate.format("MMM"):date.getMonth()?mdate.format("MMM"):date.getYear()?mdate.format("MMM YYYY"):mdate.format("MMM D, YYYY")},getDateFormat:function(date,period,rangeType){var mdate=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date);if(rangeType&&period){if("yearly"===period)return mdate.format("YYYY");if("D"===rangeType){if("hourly"===period)return mdate.format("hh a")}else if("W"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDate())return mdate.format("ddd")}else{if("daily"===period)return mdate.format("ddd");if("dayofweek"===period)return mdate.format("ddd")}else if("M"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDate())return mdate.format("MMM D")}else{if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return"W"+mdate.format("ww YYYY");if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM")}else if("Y"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDay()&&1!==date.getDate())return mdate.format("MMM D");if(1!==date.getDate())return mdate.format("MMM D");if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("daily"===period){if(date.getDay()&&1!==date.getDate())return mdate.format("MMM D");if(1!==date.getDate())return mdate.format("MMM D");if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("weekly"===period){
// if (date.getDate() !== 1) {
//   return 'W' + mdate.format('WW YYYY')
// }
if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("quarterly"===period)return mdate.format("[Q]Q YYYY");if("monthly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM")}}else if("Q"===rangeType){if("hourly"===period)return mdate.format("MMM D");if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return"W"+mdate.format("ww YYYY");if("monthly"===period)return mdate.format("MMM YYYY");if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM YYYY")}}return date.getMilliseconds()?mdate.format(".SSS"):date.getSeconds()?mdate.format(":ss"):date.getMinutes()?mdate.format("hh:mm"):date.getHours()?mdate.format("hh a"):date.getDay()&&1!==date.getDate()||1!==date.getDate()?mdate.format("MMM D"):date.getMonth()?mdate.format("MMM"):date.getYear()?mdate.format("MMM YYYY"):mdate.format("MMM D, YYYY")},getMatchingAlarmRegion:function(chartContext,dateStr){var date=new Date(dateStr);if(chartContext.alarms){var _step41,_iterator41=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.alarms.regions);try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var region=_step41.value,startDate=new Date(region.start),endDate=new Date(region.end);if(date>=startDate&&date<endDate)return region}}catch(err){_iterator41.e(err)}finally{_iterator41.f()}}return null},getBooleanValue:function(chartContext,date,dataPointKey){
// boolean tooltip fix
if(chartContext.booleanData&&chartContext.booleanData[dataPointKey]){var _step42,booleanData=chartContext.booleanData[dataPointKey],_iterator42=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(booleanData);try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var region=_step42.value,startDate=new Date(region.start),endDate=new Date(region.end);if(date>=startDate&&date<endDate)return region.value}}catch(err){_iterator42.e(err)}finally{_iterator42.f()}}return"---"},getLabelWithCaps:function(name){var firstChar=name.charAt(0);return firstChar=firstChar.toUpperCase(),name=name.toLowerCase(),name=name.slice(1),name=firstChar+name,name},prepareTooltip:function(chartContext){var self=this,tooltipOptions={show:!0,onhide:function(){if(_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip(),chartContext.tooltipHideCallback)return chartContext.tooltipHideCallback(),null},contents:function(d,defaultTitleFormat,defaultValueFormat,color){if(chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length&&d&&d.length){var regressionPoint=d.find((function(e){return e.id.endsWith("regr")}));if(regressionPoint)return null}var tooltipData=[],alarms=[],tooltipTitle=null,isSingleMode=!1,baselinePoints=chartContext.options.dataPoints.filter((function(point){return point.isBaseLine})),diffMap={};if(baselinePoints&&baselinePoints.length){var _step43,_iterator43=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(baselinePoints);try{var _loop10=function(){var bd=_step43.value,baseval=d.find((function(d1){return d1.id===bd.key})),val=d.find((function(d1){return d1.id===bd.dpAlias}));if(baseval&&null!==baseval.value&&val&&null!==val.value){var diff=(val.value-baseval.value)/baseval.value*100;diffMap[bd.dpAlias]=diff}};for(_iterator43.s();!(_step43=_iterator43.n()).done;)_loop10()}catch(err){_iterator43.e(err)}finally{_iterator43.f()}}var groupTotal=d.find((function(d1){return"group_total"===d1.id})),groupPercentMap={},groupTotalUnit=null;if(groupTotal&&groupTotal.value){var _step44,_iterator44=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(d);try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var e=_step44.value;if("group_total"!==e.id){groupTotalUnit=chartContext.unitMap[e.id];var diff=e.value/groupTotal.value*100;groupPercentMap[e.id]=diff}}}catch(err){_iterator44.e(err)}finally{_iterator44.f()}}var _step45,_iterator45=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(d);try{var _loop11=function(){var e=_step45.value;if(chartContext.options.isDepreciationCostTrend&&"Current Price"===e.id)return 0;// continue
if(null!==e&&!e.id.endsWith("TrendLine")){var _unit6=chartContext.xValueMode?chartContext.options.dataPoints[0].unitStr:chartContext.unitMap[e.id],_enumMap5=chartContext.enumMap[e.id];if(!chartContext.options.tooltip.showNullValues&&null===e.value)return 0;// continue
var _val13=null===e.value?0:e.value,dataPoints=chartContext.options.dataPoints,_dataPoint=dataPoints.filter((function(point){return point.key===e.id}));
// fetch data Point from chartContext
if(0!==_dataPoint.length&&_dataPoint[0].customFormat)_dataPoint.pointCustomization&&(_val13=_val13&&_val13.y?_val13.y:_val13),_val13=src_components_mixins_NumberFormatHelper__WEBPACK_IMPORTED_MODULE_44__/* ["default"] */.Z.getFormattedValue(_val13,null,_dataPoint[0].customFormat);else if(11!==chartContext.options.common.mode)if(_val13&&_val13.y&&(_val13=_val13&&_val13.y?_val13.y:_val13),Number.isInteger(_val13))_val13=d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(_val13);else if(Array.isArray(_val13)){var _step48,_iterator48=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_val13);try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var value=_step48.value;value=Number.isInteger(value)?d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(value):d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(value)}}catch(err){_iterator48.e(err)}finally{_iterator48.f()}}else _val13=d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(_val13);var valueStr=null,valueUnit=null;if(_dataPoint.length&&"rangeGroup"===_dataPoint[0].type&&Array.isArray(_val13))for(var ranges=["max","avg","min"],rangeValues=[],i=ranges.length-1;i>=0;i--){var v=_val13[i];v=ranges[i]+": "+v,_unit6&&(v=v+" "+_unit6),rangeValues.push(v),valueStr=rangeValues.join()}else"$"===_unit6?valueStr=_unit6+_val13:["days","hours","minutes","seconds","milliseconds"].includes(_unit6)?valueStr=(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_val13,_unit6,_dataPoint.length?_dataPoint[0].convertTounit:null,void 0,_unit6,chartContext.options.defaultDurationUnit):(valueStr=_val13,valueUnit=_unit6);_enumMap5&&_enumMap5[e.value]&&(valueStr=_enumMap5[e.value]);var label=e.name,_diff2=diffMap?diffMap[e.id]:null;"group_total"===label&&(label=chartContext.options.bar.groupTotalLabel||"Group Total",valueUnit=groupTotalUnit);var percent=null;if(groupPercentMap&&groupPercentMap[e.id]&&(percent=groupPercentMap[e.id]),chartContext.xValueMode){var percentage=null;try{if(chartContext.xActualDataType&&-1!==chartContext.xActualDataType.indexOf("date")&&chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format){var _dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip;label=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(e.name,chartContext.options.axis.x.time.format.format).format(_dateFormat)}else label=chartContext.xLabelMap&&chartContext.xLabelMap[e.name]?chartContext.xLabelMap[e.name]:e.name;var calculatePercent=function(value,data){var total=d3__WEBPACK_IMPORTED_MODULE_42__.sum(data),percent=total?value/total*100:0;return d3__WEBPACK_IMPORTED_MODULE_42__.format(".1f")(percent)};percentage=calculatePercent(e.value,chartContext.data[Object.keys(chartContext.data).filter((function(k){return"x"!==k}))[0]])}catch(error){label=chartContext.xLabelMap&&chartContext.xLabelMap[e.name]?chartContext.xLabelMap[e.name]:e.name}tooltipTitle=label,tooltipData.push({label:chartContext.options.dataPoints&&chartContext.options.dataPoints.length?chartContext.options.dataPoints[0].label:chartContext.options.axis.y.label.text,value:valueStr,unit:valueUnit,color:color(e),key:e.id}),percentage&&(isSingleMode=!0,tooltipData.push({label:"Percentage",value:percentage,unit:"%",color:color(e),key:e.id}))}else 11===chartContext.options.common.mode?tooltipData.push({label:"Duration",value:src_components_mixins_NumberFormatHelper__WEBPACK_IMPORTED_MODULE_44__/* ["default"] */.Z.formatTime(valueStr),color:color(e),key:e.id}):chartContext.scatterConfig||(chartContext.specialScatter&&(label=chartContext.options.axis.y.label.text),tooltipData.push({label:label,value:valueStr,unit:valueUnit,color:color(e),diff:_diff2,percent:percent,key:e.id}))}};for(_iterator45.s();!(_step45=_iterator45.n()).done;)_loop11()}catch(err){_iterator45.e(err)}finally{_iterator45.f()}if(chartContext.scatterConfig){var _step46,relatedpoints=chartContext.options.dataPoints.filter((function(dp){return dp.key.split("_").length&&dp.key.split("_")[0]===d[0].id})),_iterator46=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(relatedpoints);try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var dataPoint=_step46.value,dJson=chartContext.data[dataPoint.key],unit=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],enumMap=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],actualVal=null===dJson[d[0].index]?0:dJson[d[0].index],tVal=null;tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dataPoint.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:"");var val=actualVal;enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson&&tooltipData.push({label:dataPoint.name,value:tVal,key:dataPoint.id?dataPoint.id:dataPoint.key})}}catch(err){_iterator46.e(err)}finally{_iterator46.f()}}var dateFormat="LLL";if(chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip),(chartContext.options.regressionConfig&&0!=chartContext.options.regressionConfig.length||chartContext.scatterConfig)&&chartContext.options.timeValues){dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip;var time=null;dateFormat&&(time=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.options.timeValues[d[0].index]).format(chartContext.options.axis.x.time.format.tooltip),tooltipData.push({label:"Time",value:time}))}if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d[0].x)){tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d[0].x).format(dateFormat);var matchingAlarmRegion=self.getMatchingAlarmRegion(chartContext,d[0].x);if(matchingAlarmRegion&&matchingAlarmRegion.alarms){var _step47,_iterator47=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(matchingAlarmRegion.alarms);try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var alarm=_step47.value,severity=alarm.severity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.severity.id):null,isCleared=!1;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,severity=alarm.previousSeverity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.previousSeverity.id):null);var message=void 0,subject=void 0;vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.isLicenseEnabled("NEW_ALARMS")?(message=alarm.alarm.description||"",subject=alarm.alarm&&alarm.alarm.subject?alarm.alarm.subject:""):(message=alarm.problem||alarm.readingMessage,subject=alarm.subject||""),alarms.push({name:subject,message:message,severity:severity,isCleared:isCleared,count:matchingAlarmRegion.count})}}catch(err){_iterator47.e(err)}finally{_iterator47.f()}}}else"number"!==typeof d[0].x||chartContext.scatterConfig||(tooltipTitle=chartContext.data.x[d[0].x]);if(tooltipTitle||(tooltipTitle=d[0].x),chartContext.Readingdp){d[0].x&&(tooltipTitle=d[0].x);var _unit5=chartContext.Readingdp.yAxis&&chartContext.Readingdp.yAxis.unitStr?chartContext.Readingdp.yAxis.unitStr:"";tooltipTitle=tooltipTitle+" "+_unit5}if(!chartContext.options.isSystemGroup&&"pie"!=chartContext.options.type&&"donut"!=chartContext.options.type&&"bubble"!=chartContext.options.type&&"scatter"!=chartContext.options.type&&"gauge"!=chartContext.options.type){var newToolTipData=[];chartContext.options.dataPoints.forEach((function(dt){if("datapoint"===dt.type){var x=tooltipData.findIndex((function(z){return z.key===dt.key}));-1!==x&&newToolTipData.push(tooltipData[x])}else if("group"===dt.type){var newData={label:dt.label,children:[],is_group:!0};dt.children.forEach((function(ch){var x=tooltipData.findIndex((function(z){return z.key===ch.key}));-1!==x&&newData.children.push(tooltipData[x])})),newData.children.length>0&&newToolTipData.push(newData)}})),tooltipData=newToolTipData}
// if (d[0].id === d[0].id.toLowerCase()) {
//   tooltipData = [
//     {
//       label: 'X value',
//       value: d[0].x,
//     },
//     {
//       label: 'Y value',
//       value: d[0].value,
//     },
//   ]
//   tooltipTitle = d[0].name
// }
if(1===d.length||isSingleMode){var _chartContext$options,tlData=[];chartContext.options.axis.x.label.text&&tooltipTitle&&tlData.push({label:chartContext.options.axis.x.label.text,value:tooltipTitle}),tlData.push.apply(tlData,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(tooltipData));var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},data:tlData,color:tlData[tlData.length-1].color,alarms:alarms.showTimeOnly?null:alarms,count:alarms.length?alarms[0].count:0,dataPoint:chartContext.options.dataPoints};return null!==(_chartContext$options=chartContext.options)&&void 0!==_chartContext$options&&_chartContext$options.tooltip.compare_indicator&&(tooltipConfig.compare_indicator=chartContext.options.tooltip.compare_indicator),chartContext.options.axis.x.label.text||(tooltipConfig.title=tooltipTitle),(chartContext.specialScatter||chartContext.scatterConfig)&&(tooltipConfig.title=d[0].name),chartContext.tooltipCallback?(chartContext.tooltipCallback(d,tooltipConfig,tooltipTitle),null):(_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig),null)}var _chartContext$options2,_tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,alarms:alarms.showTimeOnly?null:alarms,count:alarms.length?alarms[0].count:0,data:tooltipData,dataPoint:chartContext.options.dataPoints};return null!==(_chartContext$options2=chartContext.options)&&void 0!==_chartContext$options2&&null!==(_chartContext$options2=_chartContext$options2.tooltip)&&void 0!==_chartContext$options2&&_chartContext$options2.compare_indicator&&(_tooltipConfig.compare_indicator=chartContext.options.tooltip.compare_indicator),chartContext.tooltipCallback?(chartContext.tooltipCallback(d,_tooltipConfig,tooltipTitle),null):(_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(_tooltipConfig),null)}};return"asc"!==chartContext.options.tooltip.sortOrder&&"desc"!==chartContext.options.tooltip.sortOrder||(tooltipOptions.order=chartContext.options.tooltip.sortOrder),chartContext.scatterConfig&&(tooltipOptions["grouped"]=!1),tooltipOptions},prepareMultichartTooltip:function(chartContext){var self=this,tooltipOptions={show:!0,linked:!chartContext.scatterConfig&&{name:chartContext.multichartUniqueKey},onshow:function(){chartContext.hoveringChart||(chartContext.hoveringChart=null)},onhide:function(){chartContext.hoveringChart=null,_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()},contents:function(d){if(chartContext.hoveringChart){if(!chartContext.options.isMobile)return null}else chartContext.hoveringChart=d[0].id;var _step49,tooltipData=[],_iterator49=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getDataPoints(chartContext.options.dataPoints,[1,2,4,6],!0));try{var _loop12=function(){var dataPoint=_step49.value;if(!chartContext.scatterConfig||d[0].id===dataPoint.key)if(chartContext.options.isGroupedByTime){var columns=[],_children=[];if("datapoint"===dataPoint.type||"rangeGroup"===dataPoint.type)columns=Object.keys(chartContext.options.timeGroupOptions).filter((function(k){return k.split("_")[0]===dataPoint.key}));else if(dataPoint.children&&dataPoint.children.length){var _step51,_iterator51=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{var _loop13=function(){var child=_step51.value,col=Object.keys(chartContext.options.timeGroupOptions).filter((function(k){return k.split("_")[0]===child.key}));columns=columns.concat(col)};for(_iterator51.s();!(_step51=_iterator51.n()).done;)_loop13()}catch(err){_iterator51.e(err)}finally{_iterator51.f()}}var _step52,_iterator52=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(columns);try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var column=_step52.value,_dJson6=chartContext.data[column],_unit8=chartContext.unitMap[column.split("_")[0]],_actualVal6=chartContext.scatterConfig?d[0].value&&d[0].value.y?d[0].value.y:d[0].value:null===_dJson6[d[0].index]?0:_dJson6[d[0].index],_tVal6=["days","hours","minutes","seconds","milliseconds"].includes(_unit8)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal6,_unit8,dataPoint.convertTounit):("$"===_unit8?_unit8+" ":"")+_actualVal6+(_unit8&&"$"!==_unit8?" "+_unit8:""),_tRawVal=chartContext.scatterConfig?d[0].value&&d[0].value.y?d[0].value.y:d[0].value:_dJson6[d[0].index];_dJson6&&_children.push({key:column,rawValue:_tRawVal,rawunit:_unit8,label:chartContext.options.timeGroupOptions[column].name,value:_tVal6,color:chartContext.options.timeGroupOptions[column].color})}}catch(err){_iterator52.e(err)}finally{_iterator52.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:_children})}else if("group"===dataPoint.type){if(dataPoint.children){var _step50,children=[],_iterator50=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var dp=_step50.value;if(dp.visible){var dJson=chartContext.data["x"===dp.axes?"x":dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=chartContext.scatterConfig?d[0].value&&d[0].value.y?d[0].value.y:d[0].value:null===dJson[d[0].index]?0:dJson[d[0].index];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=self.getBooleanValue(chartContext,d[0].x,dp.key));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;enumMap&&enumMap[val]&&(tVal=enumMap[val]);var tRawVal=enumMap&&enumMap[val]?enumMap[val]:dJson[d[0].index];dJson&&children.push({key:dp.key,rawValue:tRawVal,rawunit:unit,label:dp.label,value:tVal,color:dp.color})}}}catch(err){_iterator50.e(err)}finally{_iterator50.f()}children.length&&tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else if(dataPoint.visible){var _dJson5=chartContext.data[dataPoint.key],_unit7=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap6=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal5=chartContext.scatterConfig?d[0].value&&d[0].value.y?d[0].value.y:d[0].value:null===_dJson5[d[0].index]?0:_dJson5[d[0].index];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal5=self.getBooleanValue(chartContext,d[0].x,dataPoint.key));var _tVal5=null;if("rangeGroup"===dataPoint.type){var range=["max","avg","min"];_tVal5||(_tVal5=[]);for(var i=range.length-1;i>=0;i--){var finalVal=range[i]+": "+_dJson5[d[0].index][i]+(_unit7?" "+_unit7:"");_tVal5.push(finalVal)}_tVal5=_tVal5.join(",")}else{_tVal5=["days","hours","minutes","seconds","milliseconds"].includes(_unit7)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal5,_unit7,dataPoint.convertTounit):("$"===_unit7?_unit7+" ":"")+_actualVal5+(_unit7&&"$"!==_unit7?" "+_unit7:"");var _val14=_actualVal5;_enumMap6&&_enumMap6[_val14]&&(_tVal5=_enumMap6[_val14])}_dJson5&&tooltipData.push({label:dataPoint.label,value:_tVal5,color:dataPoint.color})}};for(_iterator49.s();!(_step49=_iterator49.n()).done;)_loop12()}catch(err){_iterator49.e(err)}finally{_iterator49.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=d[0].x;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d[0].x)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d[0].x).format(dateFormat):"number"!==typeof d[0].x||chartContext.scatterConfig||(tooltipTitle=chartContext.data.x[d[0].x]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};return chartContext.tooltipCallback?(chartContext.tooltipCallback(d,tooltipConfig,tooltipTitle),null):(_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig),null)}};return chartContext.scatterConfig&&(tooltipOptions["grouped"]=!1),tooltipOptions},prepareColorPalette:function(){},getTitleList:function(chartCore,chartContext,params){var data=chartCore,timeScale=d3__WEBPACK_IMPORTED_MODULE_42__.scaleTime().domain([new Date(data.orgXDomain[0]),new Date(data.orgXDomain[1])]).range(chartCore.xAxis.config.range),d={start:params.regions.length?params.regions[0].start:null,end:params.regions.length?params.regions[0].end:null},regionsTitles=[{title:"BASELINE PERIOD",startWidth:data.xMin,endWidth:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat)),diff:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat))-data.xMin,key:"FIRST",margin:data.margin},{title:"ECM",startWidth:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat)),endWidth:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end,chartContext.options.xFormat)),diff:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end,chartContext.options.xFormat))-timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat)),key:"MID",margin:data.margin},{title:"REPORTING PERIOD",startWidth:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end,chartContext.options.xFormat)),endWidth:data.xMax,diff:data.xMax-timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end,chartContext.options.xFormat)),key:"LAST",margin:data.margin}];chartContext.regionsTitles=regionsTitles},applyDefaultOptions:function(chartContext,params){var self=this;if("timeseries"!==params.axis.x.type||params.data.booleanChart||params.data.enumChart)params.zoom={enabled:!1};else{params.zoom={enabled:{type:"drag"}};var lastTime=chartContext.data["x"][chartContext.data["x"].length-1];lastTime=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(lastTime).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).valueOf();var currentTime=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(new Date).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).valueOf();(!chartContext.data.x.length||lastTime<=currentTime)&&(params.zoom={enabled:{type:"drag"}})}params.onzoom=function(){},params.oninit=function(){};var isToggle=!1;params.onrendered=function(){try{chartContext.options.diffChartConfig&&Object.keys(chartContext.options.diffChartConfig).length>1&&(params.regions&&self.getTitleList(this,chartContext,params),chartContext.options.diffChartConfig&&self.renderDiffPath(this,chartContext,params,chartContext.options.diffChartConfig)),chartContext.options.intersections&&chartContext.options.intersections.length&&self.drawIntersections(this,chartContext);var yAxis=null,y2Axis=null;if(params.key&&chartContext.options.multichart[params.key]?(
// multichart case
yAxis=chartContext.options.multichart[params.key].axis.y,y2Axis=chartContext.options.multichart[params.key].axis.y2):(yAxis=chartContext.options.axis.y,y2Axis=chartContext.options.axis.y2),yAxis&&this.axes.y&&this.axes.y.select("text")){var textWidth=this.axes.y.select("text").node().getComputedTextLength(),text=this.axes.y.select("text").text();if(this.height<textWidth){var widthPerChar=textWidth/text.length,maxChar=this.height/widthPerChar;if(maxChar=Math.floor(maxChar)-1,text.length>maxChar){var diff=text.length-yAxis.label.text.length,trimmedText=yAxis.label.text.substring(0,maxChar-diff)+"..";yAxis.unit&&(trimmedText+=" ("+yAxis.unit+")"),this.axes.y.select("text").text(trimmedText),this.axes.y.select("text").append("svg:title").text((function(){return text}))}}}if(y2Axis&&this.axes.y2&&this.axes.y2.select("text")){var _textWidth=this.axes.y2.select("text").node().getComputedTextLength(),_text=this.axes.y2.select("text").text();if(this.height<_textWidth){var _widthPerChar=_textWidth/_text.length,_maxChar=this.height/_widthPerChar;if(_maxChar=Math.floor(_maxChar)-1,_text.length>_maxChar){var _diff3=_text.length-y2Axis.label.text.length,_trimmedText=y2Axis.label.text.substring(0,_maxChar-_diff3)+"..";y2Axis.unit&&(_trimmedText+=" ("+y2Axis.unit+")"),this.axes.y2.select("text").text(_trimmedText),this.axes.y2.select("text").append("svg:title").text((function(){return _text}))}}}if(this.arcs.select(".bb-chart-arcs-title").selectAll("tspan").attr("dy","15"),this.arcs.select(".bb-chart-arcs-title").select("tspan").attr("dy","-10"),isToggle?isToggle=!1:self.applyGroupTotalBar.bind(this,chartContext)(),"histogram"===chartContext.options.type&&!(chartContext.options.dataPoints.length>1)&&!(chartContext.options.dataPoints[0].groupBy.length>0)){var noOfBars=params.data.json.x.length,barParams=[];if(chartContext.options.axis.rotated)for(var j=1;j<noOfBars;j++){var barStart=parseInt(this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+(j-1).toString()).node().getAttribute("d").split(",")[1].split(" ")[1].split("V")[1]);barParams=[];var barStartNext=this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+j.toString()).node().getAttribute("d").split(",");barParams.push(barStartNext[0]),barParams=barParams.concat(barStartNext[1].split(" "));var level1=barParams[1].split("H"),changedValue=barStart+1+"H"+level1[1];barParams[1]=changedValue,barParams[1]=barParams.slice(0,2).join(","),this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+j.toString()).attr("d",barParams.splice(1).join(" "))}else for(var i=1;i<noOfBars;i++){var _barStart=parseInt(this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+(i-1).toString()).node().getAttribute("d").split(",")[1].split(" ")[1].split("H")[1]),_barStartNext=this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+i.toString()).node().getAttribute("d").split(","),check="M"+(_barStart+1).toString();_barStartNext[0]=check,this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+i.toString()).attr("d",_barStartNext.join(","))}}
// eslint-disable-next-line no-empty
}catch(error){}},params.ontoggle=function(){isToggle=!0},params.legend={show:!1},params.bar={padding:1,width:{ratio:"histogram"!==chartContext.options.type||chartContext.options.dataPoints.length>1||chartContext.options.dataPoints[0].groupBy.length>0?.5:1}},("histogram"!=chartContext.options.type||chartContext.options.dataPoints.length>1||chartContext.options.dataPoints[0].groupBy.length>0)&&(params.bar.width.max=75),chartContext.options.bar&&chartContext.options.bar.radius&&(params.bar.radius={ratio:.1*chartContext.options.bar.radius}),chartContext.options.bar&&chartContext.options.bar.padding&&(params.bar.padding=chartContext.options.bar.padding);var areaOptions={};if(chartContext.options.area.linearGradient&&(areaOptions.linearGradient=!0),chartContext.options.area.above&&(areaOptions.above=!0),Object.keys(areaOptions).length&&(params.area=areaOptions),chartContext.options.donut.labelType&&"percentage"!==chartContext.options.donut.labelType&&(params.donut={label:{format:function(d){return"none"===chartContext.options.donut.labelType?"":Number.isInteger(d)?d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(d):d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(d)}}},params.pie={label:{format:function(d){return"none"===chartContext.options.donut.labelType?"":Number.isInteger(d)?d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(d):d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(d)}}}),chartContext.options.donut.centerText.primaryText||chartContext.options.donut.centerText.secondaryText){var totalValList=[];for(var key in params.data.json)"x"===key||params.data.hide&&-1!==params.data.hide.indexOf(key)||totalValList.push(d3__WEBPACK_IMPORTED_MODULE_42__.sum(params.data.json[key]));var fieldMap={_sum:d3__WEBPACK_IMPORTED_MODULE_42__.sum(totalValList),_min:d3__WEBPACK_IMPORTED_MODULE_42__.min(totalValList),_max:d3__WEBPACK_IMPORTED_MODULE_42__.max(totalValList),_avg:d3__WEBPACK_IMPORTED_MODULE_42__.mean(totalValList)},unit=chartContext.xValueMode&&chartContext.options.dataPoints.length?chartContext.options.dataPoints[0].unitStr:null,donutTitle="";if(chartContext.options.donut.centerText.primaryText){var primaryText=chartContext.options.donut.centerText.primaryText;for(var fl in fieldMap){var fieldVal=fieldMap[fl];chartContext.options.donut.centerText.primaryRoundOff&&(fieldVal=parseInt(fieldVal)),fieldVal=chartContext.options.donut.centerText.primaryUnit?this.formatStringWithUnit(fieldVal,chartContext.options.donut.centerText.primaryUnit):unit?this.formatDurationToHighestUnit(fieldVal,unit):this.formatNumber(fieldVal),primaryText=primaryText.replace(new RegExp(fl,"g"),fieldVal)}donutTitle+=primaryText}if(donutTitle+="\n",donutTitle+=" ",donutTitle+="\n",donutTitle+=" ",donutTitle+="\n",chartContext.options.donut.centerText.secondaryText){var secondaryText=chartContext.options.donut.centerText.secondaryText;for(var _fl in fieldMap){var _fieldVal=fieldMap[_fl];chartContext.options.donut.centerText.secondaryRoundOff&&(_fieldVal=parseInt(_fieldVal)),_fieldVal=chartContext.options.donut.centerText.secondaryUnit?this.formatStringWithUnit(_fieldVal,chartContext.options.donut.centerText.secondaryUnit):unit?this.formatDurationToHighestUnit(_fieldVal,unit):this.formatNumber(_fieldVal),secondaryText=secondaryText.replace(new RegExp(_fl,"g"),_fieldVal)}donutTitle+=secondaryText}params.donut||(params.donut={}),params.donut.title=donutTitle}chartContext.options.legend.show&&"right"===chartContext.options.legend.position&&(params.axis.y2.show||(params.padding.right=10))},applyGroupTotalBar:function(chartContext){try{if("bar"===chartContext.options.type&&chartContext.options.bar.showGroupTotal&&this.data.targets.length>1){var singleBarWidth=this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar").node().getBoundingClientRect().width,noOfBars=Object.keys(chartContext.data).length-1;// exluding x
noOfBars-=this.hiddenTargetIds.length,this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").selectAll(".bb-chart-bar").style("transform","translateX("+singleBarWidth+"px)");var newWidth=singleBarWidth*noOfBars+noOfBars;this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").selectAll(".bb-bars-group-total .bb-shape").attr("d",(function(){var existsD=this.getAttribute("d"),hStr=existsD.match(/H[0-9\.]+/g)+"",newHStr="H"+Math.round(parseFloat(hStr.replace("H",""))+(newWidth-singleBarWidth)),newD=existsD.replace(hStr,newHStr);return newD})).style("transform","translateX(-"+newWidth+"px)")}
// eslint-disable-next-line no-empty
}catch(error){}},applyNiceTickMarks:function(c3Params,chartContext){try{var yMaxArr=[],y2MaxArr=[],groupedKeys=[];if(c3Params.data.groups&&c3Params.data.groups.length){var _step53,_iterator53=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(c3Params.data.groups);try{var _loop14=function(){var _step54,grp=_step53.value,grpData=[],_iterator54=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(grp);try{var _loop15=function(){var g=_step54.value;groupedKeys.push(g);for(var _loop16=function(i){if(c3Params.data.json[g][i]){var getGroupData=function(){var y=c3Params.data.json[g][i].y,d=c3Params.data.json[g][i];return y?grpData[i]>=parseFloat(y)?grpData[i]:parseFloat(y):grpData[i]>=parseFloat(d)?grpData[i]:parseFloat(d)};grpData[i]&&(grpData[i]=getGroupData()),grpData.push(c3Params.data.json[g][i].y?parseFloat(c3Params.data.json[g][i].y):parseFloat(c3Params.data.json[g][i]))}},i=0;i<c3Params.data.json[g].length;i++)_loop16(i)};for(_iterator54.s();!(_step54=_iterator54.n()).done;)_loop15()}catch(err){_iterator54.e(err)}finally{_iterator54.f()}"y"===c3Params.data.axes[grp[0]]&&yMaxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(grpData)),"y2"===c3Params.data.axes[grp[0]]&&y2MaxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(grpData))};for(_iterator53.s();!(_step53=_iterator53.n()).done;)_loop14()}catch(err){_iterator53.e(err)}finally{_iterator53.f()}}if(c3Params.data.axes)for(var keys=Object.keys(c3Params.data.axes),_i7=0,_keys=keys;_i7<_keys.length;_i7++){var key=_keys[_i7];groupedKeys.indexOf(key)<0&&("y"===c3Params.data.axes[key]&&c3Params.data.hide&&!c3Params.data.hide.includes(key)&&yMaxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(c3Params.data.json[key],(function(d){return d&&d.y?parseFloat(d.y):parseFloat(d)}))),"y2"!==c3Params.data.axes[key]||c3Params.data.hide.includes(key)||y2MaxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(c3Params.data.json[key],(function(d){return d&&d.y?parseFloat(d.y):parseFloat(d)}))))}yMaxArr&&yMaxArr.length&&!c3Params.axis.y.min&&!c3Params.axis.y.max&&d3__WEBPACK_IMPORTED_MODULE_42__.max(yMaxArr)&&(c3Params.axis.y.tick.values=this.findNiceDelta(d3__WEBPACK_IMPORTED_MODULE_42__.max(yMaxArr),c3Params.axis.y.tick.count)),chartContext.scatterConfig&&yMaxArr&&yMaxArr.length&&(!c3Params.axis.y.max||""===c3Params.axis.y.max)&&d3__WEBPACK_IMPORTED_MODULE_42__.max(yMaxArr)&&(c3Params.axis.y.max=d3__WEBPACK_IMPORTED_MODULE_42__.max(yMaxArr)),y2MaxArr&&y2MaxArr.length&&!c3Params.axis.y2.min&&!c3Params.axis.y2.max&&d3__WEBPACK_IMPORTED_MODULE_42__.max(y2MaxArr)&&(c3Params.axis.y2.tick.values=this.findNiceDelta(d3__WEBPACK_IMPORTED_MODULE_42__.max(y2MaxArr),c3Params.axis.y2.tick.count)),chartContext.scatterConfig&&y2MaxArr&&y2MaxArr.length&&(!c3Params.axis.y2.max||""===c3Params.axis.y2.max)&&d3__WEBPACK_IMPORTED_MODULE_42__.max(y2MaxArr)&&(c3Params.axis.y2.max=d3__WEBPACK_IMPORTED_MODULE_42__.max(y2MaxArr))}catch(error){}},findNiceDelta:function(maxVal,count){for(var step=maxVal/(count-1),order=Math.pow(10,Math.floor(Math.log10(step))),delta=step/order,ndex=[1,2,2.5,3,4,5,10],ndexLenght=ndex.length,stepVal=null,i=ndexLenght-2;i>=0;--i)if(delta>ndex[i]){stepVal=ndex[i+1]*order;break}stepVal||(stepVal=delta*order);var stepList=[];stepList.push(0);for(var j=1;j<count;j++)stepList.push(j*stepVal);return stepList},periodCheck:function(dateRange){return!dateRange||!["dayofweek","dayofmonth","hourofday"].includes(dateRange.period)},prepareProgressChart:function(chartContext,colors,unit){var params={};this.prepareGeneralOptions(chartContext,params),params.data=this.prepareData(chartContext),colors&&(params.data.colors=colors),params.axis=this.prepareAxis(chartContext),params.padding={top:chartContext.options.padding.top,bottom:chartContext.options.padding.bottom,left:10};var overallHeight=100;this.applyDefaultOptions(chartContext,params),!0!==params.axis.x.show&&(overallHeight-=50),params.size={height:overallHeight,width:chartContext.options.size.width},params.padding.top=0,params.grid.y=!1,params.axis.x.label.text="",params.axis.y.show=!1,params.axis.y2.show=!1,params.padding.bottom=-25;var _step55,classes={},regions=[],tooltipData=[],labelMap={current:"Current",baseline:"Baseline",median:"National Median",target:"Target"},maxValue=params.data.json.x[params.data.json.x.length-1],delta=maxValue*(chartContext.options.regionMultiplier?chartContext.options.regionMultiplier:.005),_iterator55=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(Object.keys(params.data.json).filter((function(k){return"x"!==k})));try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var dkey=_step55.value;classes[dkey]="fc-boolean-"+dkey+"-1";var _step57,_iterator57=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(params.data.json[dkey]);try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var data=_step57.value;data&&(regions.push({start:"current"===dkey?0:data-delta,end:"current"===dkey?data:data+delta,class:classes[dkey]}),tooltipData.push({label:labelMap[dkey]?labelMap[dkey]:dkey,value:d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(parseInt(data)),unit:unit,color:colors[dkey]}))}}catch(err){_iterator57.e(err)}finally{_iterator57.f()}params.data.json[dkey]=params.data.json.x.map((function(){return null}))}}catch(err){_iterator55.e(err)}finally{_iterator55.f()}return params.regions=regions,params.axis.x.tick.values=params.data.json.x,params.tooltip&&(params.tooltip["show"]=!1),params.onafterinit=function(){var _step56,parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element),_iterator56=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(Object.keys(params.data.json).filter((function(k){return"x"!==k})));try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var dkey=_step56.value;parentSelector.selectAll("."+classes[dkey]).style("fill",params.data.colors[dkey]),parentSelector.selectAll("."+classes[dkey]+" rect").style("fill-opacity","0.9"),parentSelector.selectAll("."+classes[dkey]+" rect").classed("fc-boolean-rect-09",!0),parentSelector.selectAll(".bb-chart").style("display","none"),// removed the bb-chart element from the boolean chart. it causes tool tip issue. mouse over event fires when mouse over the alarm charts not a boolean chart
parentSelector.selectAll("."+classes[dkey]).on("mousemove",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart({data:tooltipData,position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},mode:1})})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()}))}}catch(err){_iterator56.e(err)}finally{_iterator56.f()}},params.axis.x.show&&(params.padding.bottom=0),params.axis.y&&params.axis.y.show&&(params.axis.y.label=" "),params.axis.y2&&params.axis.y2.show&&(params.axis.y2.label=" "),params.data.json=Object.freeze(params.data.json),params},getPointPattern:function(pattern){switch(pattern){case"circle":return"circle";case"rectangle":return"rectangle";case"triangle":return"<polygon points='2.5 0 0 5 5 5'></polygon>";case"diamond":return"<polygon points='2.5 0 0 2.5 2.5 5 5 2.5 2.5 0'></polygon>";default:return"circle"}},getClusters:function(data){var clusterData=[];data&&data.length&&(clusterData=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(new Set(data.filter((function(val){return null!==val})))).sort((function(a,b){return parseFloat(a)-parseFloat(b)})));var clusters=[];if(clusterData.length>=5)clusters=(0,third_party_ckmeans_min_js__WEBPACK_IMPORTED_MODULE_46__/* ["default"] */.Z)(clusterData,5);else{clusters=clusterData;while(clusters.length<5)clusters.push(parseFloat(clusters[clusters.length-1])+1)}return clusters},getBubbleFormatedData:function(yData,zData){return yData&&zData&&yData.length===zData.length?yData.map((function(val,idx){return{y:val&&val.y?parseFloat(val.y):parseFloat(val),z:zData[idx]&&zData[idx].y?parseFloat(zData[idx].y):parseFloat(zData[idx])}})):yData},formatDurationToHighestUnit:function(val,unit){return"hours"===unit?val>24?"".concat(this.formatNumber(val/24)," days"):"".concat(this.formatNumber(val)," hours"):"minutes"===unit?val>1440?"".concat(this.formatNumber(val/1440)," days"):val>60?"".concat(this.formatNumber(val/60)," hours"):"".concat(val," minutes"):"seconds"===unit?val>86400?"".concat(this.formatNumber(val/86400)," days"):val>3600?"".concat(this.formatNumber(val/3600)," hours"):val>60?"".concat(this.formatNumber(val/60)," minutes"):"".concat(this.formatNumber(val)," seconds"):["$","",""].includes(unit)?"".concat(unit," ").concat(this.formatNumber(val)):"".concat(this.formatNumber(val)," ").concat(unit)},formatStringWithUnit:function(val,unit){return["$","",""].includes(unit)?"".concat(unit," ").concat(this.formatNumber(val)):"".concat(this.formatNumber(val)," ").concat(unit)},formatNumber:function(fieldVal){return fieldVal=Number.isInteger(fieldVal)?d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(fieldVal):d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(fieldVal),fieldVal}}},
/***/532795:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(488478),newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(374575)),util_deepmerge__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(708634),lodash_debounce__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(23279),lodash_debounce__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={props:{width:{},height:{},data:{},options:{},dateRange:{},alarms:{},hidecharttypechanger:{},clientWidth:{},fixedChartHeight:{},mergeOption:{},widgetBodyDimension:{type:Object,default:function(){return{widgetBodyWidth:0,widgetBodyHeight:0}}}},computed:{chartDimension:function(){
// We recieve the widget's body dimension from widget wrapper,
// now if the widget has chart legend we have to adjust the
// size of the chart, making sure the legend and the chart
// takes appropriate amount of space.
var _this$widgetBodyDimen=this.widgetBodyDimension,widgetBodyWidth=_this$widgetBodyDimen.widgetBodyWidth,widgetBodyHeight=_this$widgetBodyDimen.widgetBodyHeight;return{width:widgetBodyWidth,height:widgetBodyHeight}}},methods:{getOptions:function(){var options=this.options?this.options:{},height=this.chartDimension.height;options.size={height:height||this.$el.clientHeight};
// if (this.clientWidth && this.$el.clientWidth) {
//   if (!options.size) {
//     options.size = {}
//   }
//   options.size.width = this.$el.clientWidth
// }
// if (this.$route.query && this.$route.query.print) {
//   if (!options.size) {
//     options.size = {}
//   }
//   options.size.width = 800
// }
var defaultOptions={};return defaultOptions=util_deepmerge__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z.objectAssignDeep(defaultOptions,newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z.constant,options),defaultOptions},getUnitMap:function(dataPoints){var unitMap={},points=[];return dataPoints.length&&dataPoints.forEach((function(dp){"group"===dp.type||"systemgroup"===dp.type?points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(dp.children)):points.push(dp)})),points.length&&points.forEach((function(dp){unitMap[dp.key]=dp.unitStr})),unitMap},getEnumMap:function(dataPoints){var enumMap={},points=[];return dataPoints.length&&dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(dp.children)):points.push(dp)})),points.length&&points.forEach((function(dp){enumMap[dp.key]=dp.enumMap})),enumMap}},watch:{chartDimension:function(){if(this.resize){var self=this,debouncedFunction=lodash_debounce__WEBPACK_IMPORTED_MODULE_6___default()((function(){self.resize()}),500);debouncedFunction()}},options:{handler:function(){this.update&&this.update()},deep:!0}}}},
/***/265334:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(488478),_facilio_ui_dashboard__WEBPACK_IMPORTED_MODULE_13__=(__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(339772),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(538077),__webpack_require__(292325)),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(990260),src_pages_dashboard_dashboard_filters_DashboardFilterHelper_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(981452),lodash_merge__WEBPACK_IMPORTED_MODULE_16__=(__webpack_require__(708056),__webpack_require__(682492)),lodash_merge__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_16__),lodash__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(496486),_facilio_router__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(329435),src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(483700);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={data:function(){return{showGridstackComponent:!1,preparedDashboardLayout:[],widgetsToCopy:[]}},computed:{sectionStyle:function(){var sections=this.dashboardLayout,style=sections.reduce((function(style,section){var id=section.id,widgetType=section.type,header=section.banner_meta;if("section"==widgetType){var headerType=header.type;if("banner"==headerType){var _header$banner=header.banner,borderColor=_header$banner.borderColor,backgroundColor=_header$banner.backgroundColor;style[id]={border:"1px solid ".concat(borderColor),"border-radus":"5px","background-color":backgroundColor}}else if("color"==headerType){var _header$color=header.color,color=_header$color.color,background=_header$color.background;style[id]={border:"1px solid ".concat(color),"border-left":"5px solid ".concat(color),"border-radius":"3px","background-color":background}}}else style[id]={};return style}),{});return style}},methods:{unsubscribeEventBus:function(){src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_19__/* .eventBus */.Y.$off("initWidget"),src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_19__/* .eventBus */.Y.$off("onAction"),src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_19__/* .eventBus */.Y.$off("updateEditDropDown"),src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_19__/* .eventBus */.Y.$off("updateViewDropDown")},subscribeEventBus:function(){this.unsubscribeEventBus();// To make sure that all the existing listeners are disconnected first. To prevent multiple listeners listening for the same event.
var self=this;src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_19__/* .eventBus */.Y.$on("initWidget",(function(config){self.$set(self.widgetConfigMap,config.id,config)})),src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_19__/* .eventBus */.Y.$on("updateEditDropDown",(function(_ref){var _self$widgetConfigMap,items=_ref.items,id=_ref.id;(_self$widgetConfigMap=self.widgetConfigMap[id].editMenu).push.apply(_self$widgetConfigMap,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(items))})),src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_19__/* .eventBus */.Y.$on("updateViewDropDown",(function(_ref2){var _self$widgetConfigMap2,items=_ref2.items,id=_ref2.id;(_self$widgetConfigMap2=self.widgetConfigMap[id].viewMenu).push.apply(_self$widgetConfigMap2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(items))})),src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_19__/* .eventBus */.Y.$on("onAction",this.onAction)},gotoEditer:function(){var dashboardLink=this.dashboardLink;if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_18__/* .isWebTabsEnabled */.tj)()){var _ref3=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_18__/* .findRouteForTab */.OD)(_facilio_router__WEBPACK_IMPORTED_MODULE_18__/* .pageTypes */.As.DASHBOARD_EDITOR)||{},name=_ref3.name;if(name){var params={dashboardlink:dashboardLink};this.$router.push({name:name,params:params,query:{create:"edit"}})}}else this.$router.push({path:"/app/home/editdashboard/".concat(dashboardLink),query:{create:"edit"}})},editSection:function(id){var index=this.dashboardLayout.findIndex((function(w){return w.id==id}));this.sectionSelectedForEditing=this.dashboardLayout[index],this.showSectionEditor=!0},duplicateWidget:function(widget){var id=widget.id,_this$findIndexUsingI=this.findIndexUsingId(id),index=_this$findIndexUsingI.index,childIndex=_this$findIndexUsingI.childIndex,newId=this.get_uid();widget["id"]=newId,widget.widget["id"]=newId,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(childIndex)?this.dashboardLayout.push(widget):this.dashboardLayout[index].children.push(widget)},deleteWidget:function(id){this.$refs["gridstack"].removeItem(id)},findIndexUsingId:function(id){var index=null,childIndex=null;if(this.dashboardLayout&&this.dashboardLayout.length>0)outerloop:for(var i=0;i<this.dashboardLayout.length;i++){var w=this.dashboardLayout[i];if(w.id==id){index=i,childIndex=null;break outerloop;// Break out of the outer loop.
}if(w.children)for(var children=this.dashboardLayout[i].children,ci=0;ci<children.length;ci++){var cw=children[ci];if(cw.id==id){index=i,childIndex=ci;break outerloop;// Break out of the outer loop.
}}}return{index:index,childIndex:childIndex}},updateWidget:function(updatedWidget){var _ref4=null!==updatedWidget&&void 0!==updatedWidget?updatedWidget:{},id=_ref4.id,_this$findIndexUsingI2=this.findIndexUsingId(id),index=_this$findIndexUsingI2.index,childIndex=_this$findIndexUsingI2.childIndex;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(childIndex)?this.$set(this.dashboardLayout,index,updatedWidget):this.$set(this.dashboardLayout[index].children,childIndex,updatedWidget);var getDimension=function(){var dimension={};return"h"in updatedWidget&&(dimension["h"]=updatedWidget.h),"w"in updatedWidget&&(dimension["w"]=updatedWidget.w),"x"in updatedWidget&&(dimension["x"]=updatedWidget.x),"y"in updatedWidget&&(dimension["y"]=updatedWidget.y),dimension};this.resizeWidget(id,getDimension())},getMinW:function(type,widget){if(this.newDashboardData&&this.newDashboardData.widget&&this.newDashboardData.widget.dataOptions&&this.newDashboardData.widget.dataOptions.type&&"boolean"===this.newDashboardData.widget.dataOptions.type)return 4;if(widget&&widget.dataOptions&&widget.dataOptions.staticKey){if("textcard"===widget.dataOptions.staticKey)return 4;if("imagecard"===widget.dataOptions.staticKey)return 4;if("web"===widget.dataOptions.staticKey)return 4;if("readingComboCard"===widget.dataOptions.staticKey)return 4}if(type){var width=24;switch(type){case"chart":width=32;break;case"static":width=24;break;case"view":width=48;break;case"list":width=40;break;case"map":width=56;break;case"web":width=32;break;case"connectedapps":width=32;break;case"graphics":width=96;break;default:width=32;break}return width}return 24},getMinH:function(type,widget){if(this.newDashboardData&&this.newDashboardData.widget&&this.newDashboardData.widget.dataOptions&&this.newDashboardData.widget.dataOptions.type&&"boolean"===this.newDashboardData.widget.dataOptions.type)return 4;if(widget&&widget.dataOptions&&widget.dataOptions.staticKey){if("textcard"===widget.dataOptions.staticKey)return 4;if("imagecard"===widget.dataOptions.staticKey)return 4;if("web"===widget.dataOptions.staticKey)return 4;if("readingComboCard"===widget.dataOptions.staticKey)return 4}if(type){var height=24;switch(type){case"chart":height=24;break;case"static":height=32;break;case"view":height=32;break;case"list":height=32;break;case"map":height=32;break;case"buildingcard":height=24;break;case"web":height=32;break;case"connectedapps":height=32;break;case"graphics":height=45;break;default:height=32;break}return height}return 32},resizeSection:function(_ref5){var id=_ref5.id,height=_ref5.height,collapsed=_ref5.collapsed,index=this.dashboardLayout.findIndex((function(w){return w.id==id})),section=this.dashboardLayout[index];section.collapsed=collapsed,
// this.animateWidget({
//   id,
//   keyframes: [
//     { transform: `rotateY(0deg) skew(0deg, 0deg)` },
//     { transform: `rotateY(0.5deg) skew(0deg, 0.5deg)` },
//     { transform: `rotateY(0deg) skew(0deg, 0.5deg)` },
//   ],
//   options: {
//     duration: 300,
//     iterations: 1,
//   },
// })
this.resizeWidget(id,{h:height})},resizeWidget:function(id,dimension){
// The 'height' and 'width' should be an integer not a float number else it doesn't work.
this.$refs["gridstack"].updateItem(id,dimension)},deserializeWidgets:function(widgets){var _this=this,self=this,makeWidget=function(item){var getDimension=function(){return self.printMode&&"view"==(null===item||void 0===item?void 0:item.type)?{x:0,y:1*(item.layout.y?item.layout.y:0),w:96,h:1*item.layout.height}:{x:1*(item.layout.x?item.layout.x:0),y:1*(item.layout.y?item.layout.y:0),w:1*item.layout.width,h:1*item.layout.height,minW:0,minH:0}};return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({id:item.id+"",widget:item},getDimension()),{},{minW:_this.getMinW(item.type,item),minH:_this.getMinH(item.type,item)})},makeSectionWidgets=function(widgets){var children=[];return widgets.forEach((function(widget){var madeWidget=makeWidget(widget.widget);children.push(madeWidget)})),children};return widgets.reduce((function(layout,item){if(item=item.widget,"section"==item.type){var _item$banner_meta,sectionWidgets=makeSectionWidgets(item.section);item["children"]=sectionWidgets,delete item.section,item.banner_meta=JSON.parse(null!==(_item$banner_meta=item.banner_meta)&&void 0!==_item$banner_meta?_item$banner_meta:"{}"),item.id=item.id+"",// Typecasting number id to a string id...
layout.push(item)}else{var madeWidget=makeWidget(item);layout.push(madeWidget)}return layout}),[])},prepareDashboardLayout:function(widgets){var _this$widgetsToCopy;this.preparedDashboardLayout=this.deserializeWidgets((0,lodash__WEBPACK_IMPORTED_MODULE_17__.cloneDeep)((null!==widgets&&void 0!==widgets?widgets:[]).concat(null!==(_this$widgetsToCopy=this.widgetsToCopy)&&void 0!==_this$widgetsToCopy?_this$widgetsToCopy:[]))),this.widgetsToCopy=[],this.loadWidgetsUsingActions()},loadWidgetsUsingActions:function(){var _ref6=null!==this&&void 0!==this?this:{},isTimelineFilterEnabled=_ref6.isTimelineFilterEnabled,userFilterList=_ref6.userFilterList,dbTimelineFilter=_ref6.dbTimelineFilter;
// Handling timeline filter onLoad.
// Handling userFilter onLoad.
if(isTimelineFilterEnabled&&(this.recentTimelineFilterPayload=(0,lodash__WEBPACK_IMPORTED_MODULE_17__.cloneDeep)(this.getTimelineFilterReq(dbTimelineFilter))),!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(userFilterList)){var userFilter=(0,src_pages_dashboard_dashboard_filters_DashboardFilterHelper_js__WEBPACK_IMPORTED_MODULE_14__/* .getUserFilterModel */.jb)(userFilterList);this.recentUserFilterPayload=(0,lodash__WEBPACK_IMPORTED_MODULE_17__.cloneDeep)(this.getUserFilterReq({filter:userFilter}))}
// 1. If there are filters - either timeline filter or user filter, then hit the API get the actions, announce the actions to appropriate widgets
// using eventBus. The actions announced to the widgets will load the widgets.
// 2. If there are no filters, that is, if there is no timeline filter or user filter then load the widgets without making any API call to get a list of actions.
// Only mount the widgets after setting the prop `loadImmediately` to true in this case. This is automatically taken care of since `changeDashboardLayout()`
// method mounts all the widgets in the nextTick() after the `loadImmediately` is changed.
var req=lodash_merge__WEBPACK_IMPORTED_MODULE_16___default()((0,lodash__WEBPACK_IMPORTED_MODULE_17__.cloneDeep)(this.recentUserFilterPayload),(0,lodash__WEBPACK_IMPORTED_MODULE_17__.cloneDeep)(this.recentTimelineFilterPayload));(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_20__/* .isEmpty */.xb)(req)?this.changeDashboardLayout({layout:this.preparedDashboardLayout,loadImmediately:!0}):(this.changeDashboardLayout({layout:this.preparedDashboardLayout,loadImmediately:!1}),this.executeActions(req))},changeDashboardLayout:function(){var _this2=this,_ref7=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},layout=_ref7.layout,_ref7$loadImmediately=_ref7.loadImmediately,loadImmediately=void 0!==_ref7$loadImmediately&&_ref7$loadImmediately;
// This is a hack, this has been done to overcome a flaw in Gridstack component...
// 1) Unmount the Gridstack component.
// 2) Change this.gridstackLayout.
// 3) Mount the Gridstack component back.
// Or layout.sync will emit events from inside the Gridstack component and change the prop value... This is unpredictable.
this.loadImmediately=loadImmediately,this.showGridstackComponent=!1;var self=this;this.$nextTick((function(){self.dashboardLayout=(0,_facilio_ui_dashboard__WEBPACK_IMPORTED_MODULE_13__/* .sort */.DY)((0,lodash__WEBPACK_IMPORTED_MODULE_17__.cloneDeep)(layout)),self.dashboardLayout.forEach((function(layout){var print=JSON.parse(_this2.$getProperty(_this2,"$route.query.printing",!1));if(layout.hasOwnProperty("children")&&layout.collapsed&&print){layout.collapsed=!1;var children=layout.children,SECTION_HEAD_HEIGHT=7,SECTION_BODY_HEIGHT=_this2.findSectionMaxHeight(children),SECTION_BOTTOM_PADDING=1;layout.h=SECTION_HEAD_HEIGHT+SECTION_BODY_HEIGHT+SECTION_BOTTOM_PADDING}})),self.showGridstackComponent=!0}))},findSectionMaxHeight:function(children){var length=children.length;return length?Math.max.apply(Math,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(children.map((function(o){return o.y+o.h})))):13},animateWidget:function(_ref8){var id=_ref8.id,_ref8$keyframes=_ref8.keyframes,keyframes=void 0===_ref8$keyframes?[{"transform-origin":"0% 0%"},{transform:"translateY(50%)"},{transform:"translate(5px, 5px) rotate(1deg)"},{transform:"translate(0, 0) rotate(0deg)"},{transform:"translate(-5px, 5px) rotate(-1deg)"},{transform:"translate(0, 0) rotate(0deg)"}]:_ref8$keyframes,_ref8$options=_ref8.options,options=void 0===_ref8$options?{duration:200,iterations:3}:_ref8$options,element=this.$el.querySelector('[gs-id="'.concat(id,'"]'));element.animate(keyframes,options)},getAllWidgetElements:function(){var _Array$from,_this$$el$querySelect;return null!==(_Array$from=Array.from(null!==(_this$$el$querySelect=this.$el.querySelectorAll("[gs-id], .gridstack-group"))&&void 0!==_this$$el$querySelect?_this$$el$querySelect:[]))&&void 0!==_Array$from?_Array$from:[]},getWidgetElements:function(){return this.getAllWidgetElements().filter((function(element){return!element.classList.contains("gridstack-group")}))},getAllGroupElements:function(){return this.getAllWidgetElements().filter((function(element){return element.classList.contains("gridstack-group")}))},animateAllGroups:function(){var groupElements=this.getAllGroupElements(),self=this;groupElements.forEach((function(element){var id=element.getAttribute();self.animateWidget({id:id,keyframes:[{transform:"rotateY(0deg) skew(0deg, 0deg)"},{transform:"rotateY(1deg) skew(0deg, 1deg)"},{transform:"rotateY(0deg) skew(0deg, 0deg)"}],options:{duration:300,iterations:1}})}))},animateAllWidgets:function(){var groupElements=this.getWidgetElements(),self=this;groupElements.forEach((function(element){var id=element.getAttribute("gs-id");self.animateWidget(id)}))}}}},
/***/579924:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(488478),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(566347),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(595082),_Subheader__WEBPACK_IMPORTED_MODULE_18__=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(634338),__webpack_require__(538077),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(228436),__webpack_require__(865137),__webpack_require__(947522),__webpack_require__(785869)),_page_widget_utils_eventBus__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(398011),src_pages_new_dashboard_components_dashboard_NewDashboard_vue__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(186267),src_pages_new_dashboard_components_dashboard_DashboardShare_vue__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(733569),src_pages_dashboard_components_DashboardManager_vue__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(967070),_OutsideClick__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(21864),vuex__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(420629),_facilio_router__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(329435),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(990260),_facilio_api__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(32284);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={data:function(){return{showDashboardComments:!1,subheaderMenu:[],isMobileDashboard:!1,loadAll:!1,managerloading:!1,activeScreen:[],rawdata:[],dashboard:null,headerList:[],buildings:[],Mobilebuildings:[],chillers:[],Mobilechillers:[],sites:[],Mobilesites:[],subheaderdata:[],linkName:"buildingdashboard",commercial:[],customDashboard:[],chillerDashboard:null,loading:!1,residential:[],showDashboardManager:!1,showListWorkorder:!1,activeFolderNames:""}},components:{Subheader:_Subheader__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */.Z,NewDashboard:src_pages_new_dashboard_components_dashboard_NewDashboard_vue__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z,share:src_pages_new_dashboard_components_dashboard_DashboardShare_vue__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */.Z,DashboardManager:src_pages_dashboard_components_DashboardManager_vue__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */.Z,OutsideClick:_OutsideClick__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */.Z},computed:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_26__/* .mapState */.rn)({groups:function(state){return state.groups},users:function(state){return state.users},roles:function(state){return state.roles}})),(0,vuex__WEBPACK_IMPORTED_MODULE_26__/* .mapGetters */.Se)(["getCurrentUser","dashboard/dbFilterQueryParam"])),{},{currentUser:function(){return this.getCurrentUser()},getDashboardId:function(){var _this=this;if(this.rawdata){var dashboard=this.rawdata.find((function(rt){return rt.linkName===_this.dashboardlink||null}));if(dashboard)return dashboard.id}return null},query:function(){return this.$route.query},dashboardLink:function(){var dashboardlink=this.$attrs.dashboardlink||this.$route.params.dashboardlink;return["residentialbuildingdashboard","commercialbuildingdashboard"].includes(dashboardlink)?"buildingdashboard":dashboardlink},buildingId:function(){var _ref=this.$attrs||this.$route.params||{},buildingid=_ref.buildingid;return buildingid?parseInt(buildingid):null},dashBoardCEPermission:function(){return"dashboard:UPDATE,CREATE"},dashBoardSharePermission:function(){return"dashboard:SHARE_DASHBOARD"},tabId:function(){var _this$$route;return null!==(_this$$route=this.$route)&&void 0!==_this$$route&&null!==(_this$$route=_this$$route.query)&&void 0!==_this$$route&&_this$$route.tab?this.$route.query.tab:null},pdfUrl:function(){var printUrl,customAppUrl;if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .isWebTabsEnabled */.tj)()){var query={printing:!0};this.tabId&&this.$set(query,"tab",this.tabId),customAppUrl=this.$router.resolve({query:query}).href,this["dashboard/dbFilterQueryParam"]&&(query["dbFilters"]=this["dashboard/dbFilterQueryParam"],customAppUrl+="&dbFilters="+this["dashboard/dbFilterQueryParam"]),customAppUrl=customAppUrl.replace("/?","?"),printUrl="".concat(window.location.protocol,"//").concat(window.location.host).concat(customAppUrl)}else{
//check for db filters, if any filters applied ,append to print
var linkname=this.dashboardLink;printUrl="".concat(window.location.protocol,"//").concat(window.location.host,"/app/home/dashboard/").concat(linkname),this.tabId?printUrl+="?tab=".concat(this.tabId,"&printing=true"):printUrl+="?printing=true",this["dashboard/dbFilterQueryParam"]&&(printUrl+="&dbFilters="+this["dashboard/dbFilterQueryParam"])}return printUrl}}),created:function(){this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups"),418!==this.$account.org.orgId&&this.$store.dispatch("loadBuildings"),this.$store.dispatch("loadUsers")},methods:{hasEditPermission:function(dashboard){var _this2=this,previlegedRole=this.$getProperty(this,"currentUser.role.isPrevileged",null);if(previlegedRole)return!0;var _dashboard$locked,_dashboard$dashboardS,_dashboard$createdByU,_dashboard$createdBy,locked=!1,shareContext=[],createdByUserId=null,createdBy=null;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_27__/* .isEmpty */.xb)(null===dashboard||void 0===dashboard?void 0:dashboard.rawdata)?(locked=null!==(_dashboard$locked=null===dashboard||void 0===dashboard?void 0:dashboard.locked)&&void 0!==_dashboard$locked&&_dashboard$locked,shareContext=null!==(_dashboard$dashboardS=null===dashboard||void 0===dashboard?void 0:dashboard.dashboardSharingContext)&&void 0!==_dashboard$dashboardS?_dashboard$dashboardS:[],createdByUserId=null!==(_dashboard$createdByU=null===dashboard||void 0===dashboard?void 0:dashboard.createdByUserId)&&void 0!==_dashboard$createdByU?_dashboard$createdByU:null,createdBy=null!==(_dashboard$createdBy=null===dashboard||void 0===dashboard?void 0:dashboard.createdBy)&&void 0!==_dashboard$createdBy?_dashboard$createdBy:null):(locked=this.$getProperty(dashboard,"rawdata.locked",!1),shareContext=this.$getProperty(dashboard,"rawdata.dashboardSharingContext",[]),createdByUserId=this.$getProperty(dashboard,"rawdata.createdByUserId",null),createdBy=this.$getProperty(dashboard,"rawdata.createdBy",null)),locked){var _ref2=this.getCurrentUser()||{},peopleId=_ref2.peopleId,id=_ref2.id,currentRoleId=_ref2.roleId,isCreatedUser=null===createdBy?createdByUserId===id:createdBy===peopleId;if(isCreatedUser)return isCreatedUser;var _step,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(shareContext);try{var _ret,_loop=function(){var context=_step.value,_ref3=context||{},sharingType=_ref3.sharingType,orgUserId=_ref3.orgUserId,roleId=_ref3.roleId,groupId=_ref3.groupId;if(1===sharingType&&id===orgUserId)return{v:!1};if(2===sharingType&&currentRoleId===roleId)return{v:!1};if(3===sharingType){var _step2,_ref4=_this2||{},_ref4$groups=_ref4.groups,groups=void 0===_ref4$groups?[]:_ref4$groups,groupDetail=groups.filter((function(group){return group.id===groupId})),_ref5=groupDetail||{},_ref5$members=_ref5.members,members=void 0===_ref5$members?[]:_ref5$members,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(members);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var user=_step2.value;if(user.id==id)return{v:!1}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}};for(_iterator.s();!(_step=_iterator.n()).done;)if(_ret=_loop(),_ret)return _ret.v}catch(err){_iterator.e(err)}finally{_iterator.f()}return!1}return!0},setBuildingMobileIcon:function(){var _this3=this;this.buildingId&&(this.Mobilebuildings.find((function(rt){return rt.baseSpaceId===_this3.buildingId})).mobileEnabled=this.isMobileDashboard)},goBack:function(){window.history.go(-1)},deletedashboardFolder:function(dashboard,index){var self=this,data={dashboardFolderContext:{id:dashboard.id}};self.$dialog.confirm({title:"Delete Dashboard Folder",message:"Are you sure you want to delete this Dashboard folder?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&(self.headerList.splice(index,1),self.$http.post("/dashboard/deleteDashboardFolder",data).then((function(response){self.$message({message:"Dashboard Folder deleted successfully!",type:"success"})})).catch((function(error){var errorString=error.response.data.errorString;self.$message({message:errorString,type:"error"})})))}))},deletedashboard:function(dashboard,index,idx){var self=this,data={dashboardId:dashboard.id};self.$dialog.confirm({title:"Delete Dashboard",message:"Are you sure you want to delete this Dashboard?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&(self.headerList[index].childrens.splice(idx,1),self.$http.post("/dashboard/deleteDashboard",data).then((function(response){self.$message({message:"Dashboard deleted successfully!",type:"success"})})).catch((function(error){var errorString=error.response.data.errorString;self.$message({message:errorString,type:"error"})})))}))},dashboardCommand:function(moduleName){if("download"==moduleName)this.isPdfDownload=!0;else if("dashboardmanager"===moduleName)if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .isWebTabsEnabled */.tj)()){var _ref6=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .findRouteForTab */.OD)(_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .pageTypes */.As.DASHBOARD_MANAGER)||{},name=_ref6.name;name&&this.$router.push({name:name})}else{var url="/app/newdashboardmanager";this.$router.push(url)}else if("edit"===moduleName)this.geteditdashboardLink(moduleName);else if("mobile"===moduleName)this.EnableMobileDashboard();else if("share"===moduleName)this.sharedialogVisible=!0;else if("addDashboardRule"==moduleName)this.gotoDashboardRules("new");else if("publish"===moduleName)this.publishdialogVisible=!0;else if("editFilters"==moduleName)this.$refs["dashboardViewer"]?this.$refs["dashboardViewer"].editFromDropDown():_page_widget_utils_eventBus__WEBPACK_IMPORTED_MODULE_19__/* .eventBus */.Y.$emit("editFilterClicked");else if("openClonePopup"===moduleName)this.isClone=!0,this.dashboardNameObj.name=this.dashboard.label;else if("clone"===moduleName){var _this$dashboardNameOb,_this$dashboardNameOb2;null!==this&&void 0!==this&&null!==(_this$dashboardNameOb=this.dashboardNameObj)&&void 0!==_this$dashboardNameOb&&_this$dashboardNameOb.name&&""!==(null===this||void 0===this||null===(_this$dashboardNameOb2=this.dashboardNameObj)||void 0===_this$dashboardNameOb2||null===(_this$dashboardNameOb2=_this$dashboardNameOb2.name)||void 0===_this$dashboardNameOb2?void 0:_this$dashboardNameOb2.trim())&&(this.isClone=!1,this.saving=!0,this.cloneDashboard())}else"enableDarkMode"===moduleName&&this.switchTheme()},handleCommand:function(command,thisContext,cancelRedirect){if(this.activeFolderNames=command,this.subheaderMenu=this.headerList.find((function(rt){return rt.id===command}))&&this.headerList.find((function(rt){return rt.id===command})).childrens?this.headerList.find((function(rt){return rt.id===command})).childrens:[],this.subheaderMenu.length){var query=this.$helpers.cloneObject(this.query);if((query||{}).tab&&delete query.tab,"Portfolio"===this.subheaderMenu[0].label&&1===this.buildings.length&&this.subheaderMenu[0].childrens.length){if(!cancelRedirect)if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .isWebTabsEnabled */.tj)()){var linkName=this.subheaderMenu[0].childrens[0].linkName,_findRouteForTab=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .findRouteForTab */.OD)(_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .pageTypes */.As.DASHBOARD_VIEWER),name=_findRouteForTab.name;name&&this.$router.push({name:name,params:{dashboardlink:linkName},query:query}).catch((function(){}))}else this.$router.push({path:this.subheaderMenu[0].childrens[0].path.path,query:query}).catch((function(){}))}else if(!cancelRedirect)if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .isWebTabsEnabled */.tj)()){var _linkName=this.subheaderMenu[0].linkName,_findRouteForTab2=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .findRouteForTab */.OD)(_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .pageTypes */.As.DASHBOARD_VIEWER),_name=_findRouteForTab2.name;_name&&this.$router.push({name:_name,params:{dashboardlink:_linkName},query:query}).catch((function(){}))}else this.$router.push({path:this.subheaderMenu[0].path.path,query:query}).catch((function(){}))}},handleCommand3:function(command,path){this.activeFolderNames=command,this.subheaderMenu=this.headerList.find((function(rt){return rt.id===command}))&&this.headerList.find((function(rt){return rt.id===command})).childrens?this.headerList.find((function(rt){return rt.id===command})).childrens:[],this.subheaderMenu.length&&this.$router.push({path:path,query:this.query})},handleCommand2:function(command){this.activeFolderNames=command,this.subheaderMenu=this.headerList.find((function(rt){return rt.id===command}))&&this.headerList.find((function(rt){return rt.id===command})).childrens?this.headerList.find((function(rt){return rt.id===command})).childrens:[],this.subheaderMenu.length&&this.$router.push({query:this.query}).catch((function(){}))},getdashboardObj:function(data){data&&(this.dashboard=data)},EnableMobileDashboard:function(){var self=this;self.isMobileDashboard=!self.isMobileDashboard;var params={dashboard:{id:this.dashboard.id,mobileEnabled:self.isMobileDashboard}};this.buildingId&&(params.dashboard.buildingId=this.buildingId),this.Mobilebuildings.length&&self.setBuildingMobileIcon(),self.$http.post("/dashboard/updateDashboard",params).then((function(){self.isMobileDashboard?self.$message({message:"Mobile dashboard enabled successfully!",type:"success"}):self.$message({message:"Mobile dashboard disabled successfully!",type:"success"})}))},EnableMobileDashboardInManager:function(dashboard,modeule){var self=this;dashboard.rawdata.mobileEnabled=!dashboard.rawdata.mobileEnabled,self.$forceUpdate();var params={dashboard:{id:dashboard.id,mobileEnabled:dashboard.rawdata.mobileEnabled}};self.$http.post("/dashboard/updateDashboard",params).then((function(){dashboard.rawdata.mobileEnabled?self.$message({message:"Mobile dashboard enabled successfully!",type:"success"}):self.$message({message:"Mobile dashboard disabled successfully!",type:"success"})}))},mobiledashboardstatus:function(data){var _this4=this;this.buildingId?this.Mobilebuildings.length?this.isMobileDashboard=!!this.Mobilebuildings.find((function(rt){return rt.baseSpaceId===_this4.buildingId}))&&this.Mobilebuildings.find((function(rt){return rt.baseSpaceId===_this4.buildingId})).mobileEnabled:this.isMobileDashboard=!1:this.isMobileDashboard=data},enableRule:function(){var _this5=this,orgDetails=[190,151,75,78,176,210];return"energydata"===this.getCurrentModule().module||!("workorder"!==this.getCurrentModule().module||!orgDetails.find((function(rt){return rt===_this5.$account.org.id})))},exitfullscreen:function(){document.addEventListener("fullscreenchange",(function(){document.getElementsByClassName("headingFlSc")&&document.getElementsByClassName("headingFlSc")[0]&&(document.getElementsByClassName("headingFlSc")[0].style.display="none")}))},goInFullscreen:function(){
// let fullscreen = document.getElementById('q-app').clientHeight
element.requestFullscreen?element.requestFullscreen():element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullscreen?element.webkitRequestFullscreen():element.msRequestFullscreen&&element.msRequestFullscreen()},goInFullscreenBody:function(){
// let element = document.getElementsByClassName('dashboardmainlayout')[0]
// This method needs serious refactoring, accessing the DOM this heavily is
// not recommended. Use $el or $parent etc, instead of document.
var element=document.getElementsByTagName("body")[0];element.requestFullscreen?element.requestFullscreen():element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullscreen?element.webkitRequestFullscreen():element.msRequestFullscreen&&element.msRequestFullscreen(),document.addEventListener("fullscreenchange",(function(){if(document.fullscreenElement){if(document.getElementsByClassName("gridstack-container")[0].style.background="white",document.getElementsByClassName("dashboardmainlayout")[0].style.background="white",document.getElementsByClassName("dashboard-container")[0].style.paddingBottom="0px",document.getElementsByClassName("headingFlSc")&&document.getElementsByClassName("headingFlSc")[0]){var body=document.body;body.classList.add("dashboard-widget-view"),document.getElementsByClassName("headingFlSc")[0].style.display="block"}1===document.getElementsByClassName("single-dashboard").length&&(document.getElementsByClassName("fc-widget-header")[0].style.display="none"),document.getElementsByClassName("dashboardmainlayout")&&document.getElementsByClassName("dashboardmainlayout")[0]&&(document.getElementsByClassName("dashboardmainlayout")[0].style.paddingBottom="0px")}else{var _body=document.body;1===document.getElementsByClassName("single-dashboard").length&&(document.getElementsByClassName("fc-widget-header")[0].style.display="flex"),_body.classList.remove("dashboard-widget-view"),document.getElementsByClassName("gridstack-container")[0].style.background="none",document.getElementsByClassName("dashboardmainlayout")[0].style.background="none",document.getElementsByClassName("dashboard-container")[0].style.paddingBottom="50px",document.getElementsByClassName("headingFlSc")&&document.getElementsByClassName("headingFlSc")[0]&&(document.getElementsByClassName("headingFlSc")[0].style.display="none"),1===document.getElementsByClassName("single-dashboard").length&&(document.getElementsByClassName("fc-widget-header")[0].style.display="block"),document.getElementsByClassName("dashboardmainlayout")&&document.getElementsByClassName("dashboardmainlayout")[0]&&(document.getElementsByClassName("dashboardmainlayout")[0].style.paddingBottom="110px")}}))},toggleFilters:function(){if(this.$route.query.filters){var filters=this.$route.query.filters;this.$router.replace({query:{showFilter:!0,filters:filters}})}else this.$router.replace({query:{showFilter:!0}})},toggleTemplate:function(){if(this.$route.query.templateParams){var filters=this.$route.query.templateParams;this.$router.replace({query:{showTemplate:!0,filters:filters}})}else this.$router.replace({query:{showTemplate:!0}})},getCurrentModule:function(moduleData){if(!this.$route.params.moduleName)return null;var routeObj=this.$route,module=null,rootPath=null;if(routeObj.params.moduleName)this.$route.meta.module=routeObj.params.moduleName,module=routeObj.params.moduleName,rootPath=routeObj.path;else if(routeObj.matched){var _step3,_iterator3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(routeObj.matched);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var matchedRoute=_step3.value;if(matchedRoute.params.moduleName){this.$route.meta.module=matchedRoute.params.moduleName,module=matchedRoute.params.moduleName,rootPath=matchedRoute.path;break}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}return moduleData||{module:module,rootPath:rootPath}},gotoDashboardRules:function(mode){var linkname=this.dashboardLink,dashboardTabId=null;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_27__/* .isEmpty */.xb)(this.$route.query)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_27__/* .isEmpty */.xb)(this.$route.query.tab)||(dashboardTabId=this.$route.query.tab),(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .isWebTabsEnabled */.tj)()){var _ref7=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .findRouteForTab */.OD)(_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .pageTypes */.As.DASHBOARD_RULES)||{},name=_ref7.name;if(name){var query={create:"new"==mode?"new":"edit"};dashboardTabId&&(query.tabId=dashboardTabId),this.$router.push({name:name,params:{dashboardlink:linkname},query:query}).catch((function(){}))}}else{var url="/app/home/dashboardrules/"+linkname;"new"===mode?this.$router.push(url+"?create=new"):this.$router.push(url+"?create=edit")}},geteditdashboardLink:function(mode){if(mode)if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .isWebTabsEnabled */.tj)())if("new"===mode){var _ref8=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .findRouteForTab */.OD)(_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .pageTypes */.As.DASHBOARD_CREATION)||{},name=_ref8.name;name&&this.$router.push({name:name,query:{create:"new"}})}else{var _ref9=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .findRouteForTab */.OD)(_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .pageTypes */.As.DASHBOARD_EDITOR)||{},_name2=_ref9.name;if(_name2){var params={dashboardlink:this.dashboardLink};"buildingdashboard"===this.dashboardLink&&this.buildingId&&(params[buildingid]=this.buildingId),this.$router.push({name:_name2,params:params,query:{create:"edit"}})}}else{var linkname=this.dashboardLink;"buildingdashboard"===linkname&&this.buildingId&&(linkname+="/"+this.buildingId);var url="/app/home/editdashboard/"+linkname;"new"===mode?this.$router.push(url+"?create=new"):this.$router.push(url+"?create=edit")}},getMobiledashboardList:function(dashboard){var list=dashboard.find((function(rt){return"buildingdashboard"===rt.linkName}));list&&list.spaceFilteredDashboardSettings&&list.spaceFilteredDashboardSettings.length&&(this.Mobilebuildings=list.spaceFilteredDashboardSettings,this.mobiledashboardstatus(!1))},getSubheaderFormater:function(response){var dashboardlist=response.data.dashboardFolders,self=this;return self.getsubheaderData(dashboardlist)},loadDashboardFolders:function(appId){var url="/dashboardWithFolder";(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_27__/* .isEmpty */.xb)(appId)||(url+="?appId="+appId);var self=this;self.$http.get(url).then((function(response){var _response$data;self.dashboardCloneObj.folder=null,self.moveDashboardObj.folder=null,self.dashboardFoldersList=null!==response&&void 0!==response&&null!==(_response$data=response.data)&&void 0!==_response$data&&_response$data.dashboardFolders?response.data.dashboardFolders:[]})).catch((function(error){}))},isPortalApp:function(){var PORTALS=this.$constants.appCategory.PORTALS;return!(!(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .getApp */.wx)()||(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .getApp */.wx)().appCategory!==PORTALS)},loadDashboards:function(disableRedirect,appId){this.subheaderdata=[],null!==this&&void 0!==this&&this.dashboardCloneObj&&(this.dashboardCloneObj.selectedAppId=appId),null!==this&&void 0!==this&&this.moveDashboardObj&&(this.moveDashboardObj.selectedAppId=appId);
// let url = '/dashboardWithFolder'
// if (!isEmpty(appId)) {
//   url += '?appId=' + appId
// }
var url="v3/dashboard/list",params={appId:(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_27__/* .isEmpty */.xb)(appId)?(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .getApp */.wx)().id:appId,withSharing:!0,withEmptyFolders:!0},self=this;self.loading=!0,_facilio_api__WEBPACK_IMPORTED_MODULE_25__/* .API */.bl.get(url,params).then((function(response){var _response$data2;self.subheaderdata=self.getSubheaderFormater(response),self.dashboardFoldersList=null!==response&&void 0!==response&&null!==(_response$data2=response.data)&&void 0!==_response$data2&&_response$data2.dashboardFolders?response.data.dashboardFolders:[],self.headerList=self.subheaderdata,disableRedirect||self.setDefaultdashboard(self.subheaderdata),self.loading=!1})).catch((function(error){self.loading=!1}))},setDefaultdashboard:function(dashboard){if(dashboard&&dashboard.length){var self=this,filterdDashboard=null;filterdDashboard=dashboard.find((function(rt){if(self.$route.path&&rt.childrens.find((function(rl){var linkName=rl.linkName;return"Portfolio"===rl.label&&rl.childrens&&rl.childrens.length&&rl.childrens.find((function(rx){return rx.linkName===self.$route.params.dashboardlink}))||linkName===self.$route.params.dashboardlink?rt:void 0})))return rt})),filterdDashboard&&this.dashboardLink?(this.activeFolderNames=filterdDashboard.id,this.handleCommand2(this.activeFolderNames)):(
//  this.activeFolderNames = dashboard.find(rt => rt.label === 'default').id || -1
dashboard[0].childrens&&(this.activeFolderNames=dashboard.find((function(rt){if(null!==rt.childrens&&rt.childrens.length)return rt})).id),this.handleCommand(this.activeFolderNames))}},displayOrder:function(dashboards){if(null!==dashboards){var sortedDashboards=dashboards.sort((function(a,b){return a.displayOrder<b.displayOrder?-1:a.displayOrder>b.displayOrder?1:0})),unOrderArray=[],orderArray=[];return sortedDashboards.forEach((function(element){-1===element.displayOrder||null===element.displayOrder?unOrderArray.push(element):orderArray.push(element)})),[].concat(orderArray,unOrderArray)}return[]},getsubheaderchildren:function(list){var data=[],self=this;if(list=this.displayOrder(list),list.length)return list.forEach((function(rt){var listobj={label:rt.dashboardName,path:{path:"/app/home/dashboard/"+rt.linkName,editPath:"/app/home/editdashboard/"+rt.linkName+"?create=edit"},
// permission: this.dashboardpermission(rt.moduleName),
id:rt.id?rt.id:-1,rawdata:rt,linkName:rt.linkName,collapse:!1},copyObj=self.$helpers.cloneObject(listobj);("energyportfolio"===rt.linkName.toLowerCase()&&list.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")>-1})).length||"alarmportfolio"===rt.linkName.toLowerCase()&&list.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")>-1})).length||"maintenanceportfolio"===rt.linkName.toLowerCase()&&list.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")>-1})).length||"portfolio"===rt.linkName.toLowerCase()&&list.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")>-1})).length)&&(listobj["childrens"]=self.groupBuildingDashboard(list,copyObj)),data.push(listobj)})),list.find((function(rt){return"energyportfolio"===rt.linkName.toLowerCase()}))&&list.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")>-1})).length||list.find((function(rt){return"alarmportfolio"===rt.linkName.toLowerCase()}))&&list.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")>-1})).length||list.find((function(rt){return"maintenanceportfolio"===rt.linkName.toLowerCase()}))&&list.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")>-1})).length||list.find((function(rt){return"portfolio"===rt.linkName.toLowerCase()}))&&list.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")>-1})).length?self.removeGroupedDashboardFromMainList(data):data},removeGroupedDashboardFromMainList:function(listobj){return listobj.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")<0}))},groupBuildingDashboard:function(list,obj){return list.length&&obj?[obj].concat((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(this.subHeaderFormat(this.displayOrder(list.filter((function(rt){return rt.linkName.toLowerCase().indexOf("buildingdashboard/")>-1})))))):[]},subHeaderFormat:function(list){var data=[];return list=this.displayOrder(list),list.length?(list.forEach((function(rt){var listobj={label:rt.dashboardName,path:{path:"/app/home/dashboard/"+rt.linkName,editPath:"/app/home/editdashboard/"+rt.linkName+"?create=edit"},
// permission: this.dashboardpermission(rt.moduleName),
id:rt.id?rt.id:-1,rawdata:rt,collapse:!1};data.push(listobj)})),data):data},dashboardpermission:function(moduleName){return"energydata"===moduleName&&(moduleName="energy"),moduleName+":VIEW_DASHBOARDS"},getsubheaderData:function(list){var _this6=this,data=[];return list=this.displayOrder(list),list.forEach((function(rt){var dashboardlist={label:"default"!==rt.name?rt.name:"Default",path:{path:"/app/home/dashboard/"+rt.linkName,editPath:"/app/home/editdashboard/"+rt.linkName+"?create=edit"},
// permission: this.dashboardpermission(rt.moduleName),
id:rt.id?rt.id:-1,rawdata:rt,childrens:[]};rt.dashboards&&(dashboardlist.childrens=_this6.getsubheaderchildren(rt.dashboards)),data.push(dashboardlist)})),data},getDashboardSharedInfo:function(sharedList){if(sharedList){var data={users:[],roles:[],groups:[]},shareTo="",self=this;return sharedList.forEach((function(rt){1===rt.sharingType?data.users.push(self.users.find((function(rl){return rl.id===rt.orgUserId}))):2===rt.sharingType?data.roles.push(self.roles.find((function(rl){return rl.id===rt.roleId}))):3===rt.sharingType&&data.groups.push(self.groups.find((function(rl){return rl.id===rt.groupId})))})),data.users=data.users.filter((function(element){return void 0!==element})),shareTo=sharedList.length?1===sharedList.length&&1===data.users.length&&data.users[0].id===this.getCurrentUser().ouid?"Only Me":"Specific":"Everyone",{message:"",data:data,shareTo:shareTo}}return{message:"",data:{}}},cloneDashboard:function(){var _this7=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(){var linkName,params,_yield$API$post,data,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(linkName=_this7.dashboardLink,!linkName||""===linkName.trim()){_context.next=10;break}return params={dashboard_link_name:linkName,cloned_dashboard_name:_this7.dashboardNameObj.name},_context.next=5,_facilio_api__WEBPACK_IMPORTED_MODULE_25__/* .API */.bl.post("v3/dashboard/clone",{data:params});case 5:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,_this7.saving=!1,!error&&null!==data&&void 0!==data&&data.dashboard_link_name?_this7.redirectClonedDashboardToEdit(data.dashboard_link_name):_this7.$message.error("Error while cloning dashboard");case 10:case"end":return _context.stop()}}),_callee)})))()},redirectClonedDashboardToEdit:function(dashboard_link_name){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .isWebTabsEnabled */.tj)()){var _ref10=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .findRouteForTab */.OD)(_facilio_router__WEBPACK_IMPORTED_MODULE_24__/* .pageTypes */.As.DASHBOARD_EDITOR)||{},name=_ref10.name;if(name){var params={dashboardlink:dashboard_link_name};"buildingdashboard"===this.dashboardLink&&this.buildingId&&(params[buildingid]=this.buildingId),this.$router.push({name:name,params:params,query:{create:"edit"}})}}else{var link="/app/home/neweditdashboard/"+dashboard_link_name+"?create=edit";this.$router.push(link)}},cloneDashboardToPortal:function(isCloneToAnotherPortal){var _this8=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(){var _dashboardObj$dashboa,_dashboardObj$dashboa2,dashboardObj,params,_yield$API$post2,data,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(dashboardObj=_this8.dashboardCloneObj,params=null,(null===dashboardObj||void 0===dashboardObj?void 0:dashboardObj.folder)>0&&null!==dashboardObj&&void 0!==dashboardObj&&dashboardObj.name&&""!==(null===dashboardObj||void 0===dashboardObj?void 0:dashboardObj.name.trim())&&(null===dashboardObj||void 0===dashboardObj?void 0:dashboardObj.selectedAppId)>0&&(null===dashboardObj||void 0===dashboardObj||null===(_dashboardObj$dashboa=dashboardObj.dashboard)||void 0===_dashboardObj$dashboa?void 0:_dashboardObj$dashboa.id)>0?params={dashboard_link_name:dashboardObj.dashboard.linkName,cloned_dashboard_name:dashboardObj.name,folder_id:dashboardObj.folder}:null!==dashboardObj&&void 0!==dashboardObj&&dashboardObj.name&&""!==(null===dashboardObj||void 0===dashboardObj?void 0:dashboardObj.name.trim())&&(null===dashboardObj||void 0===dashboardObj||null===(_dashboardObj$dashboa2=dashboardObj.dashboard)||void 0===_dashboardObj$dashboa2?void 0:_dashboardObj$dashboa2.id)>0&&(params={dashboard_link_name:dashboardObj.dashboard.linkName,cloned_dashboard_name:dashboardObj.name}),!params){_context2.next=12;break}return _this8.dashboardSaving=!0,_context2.next=7,_facilio_api__WEBPACK_IMPORTED_MODULE_25__/* .API */.bl.post("v3/dashboard/clone",{data:params});case 7:_yield$API$post2=_context2.sent,data=_yield$API$post2.data,error=_yield$API$post2.error,_this8.isClone=!1,!error&&null!==data&&void 0!==data&&data.dashboard_link_name?_this8.$message.success("Dashboard Cloned Successfully"):_this8.$message.error("Error while cloning dashboard");case 12:_this8.dashboardSaving=!1;case 13:case"end":return _context2.stop()}}),_callee2)})))()},moveDashboardToPortal:function(){var _this9=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee3(){var _dashboardObj$dashboa3,dashboardObj,params,_yield$API$post3,data,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(dashboardObj=_this9.moveDashboardObj,!((null===dashboardObj||void 0===dashboardObj?void 0:dashboardObj.folder)>0&&(null===dashboardObj||void 0===dashboardObj?void 0:dashboardObj.selectedAppId)>0&&(null===dashboardObj||void 0===dashboardObj||null===(_dashboardObj$dashboa3=dashboardObj.dashboard)||void 0===_dashboardObj$dashboa3?void 0:_dashboardObj$dashboa3.id)>0)){_context3.next=11;break}return _this9.dashboardSaving=!0,params={dashboard_link:dashboardObj.dashboard.linkName,folder_id:dashboardObj.folder},_context3.next=6,_facilio_api__WEBPACK_IMPORTED_MODULE_25__/* .API */.bl.post("v3/dashboard/moveto",{data:params});case 6:_yield$API$post3=_context3.sent,data=_yield$API$post3.data,error=_yield$API$post3.error,_this9.isMoveTo=!1,error||"success"!==(null===data||void 0===data?void 0:data.result)?_this9.$message.error("Error while moving dashboard"):(_this9.loadDashboards(!0,_this9.appId),_this9.$message.success("Dashboard Moved Successfully"));case 11:_this9.dashboardSaving=!1;case 12:case"end":return _context3.stop()}}),_callee3)})))()}}}},
/***/708056:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(821057),__webpack_require__(506203)
/* harmony import */;var moment_timezone__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(480008),moment_timezone__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_7__),vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(720144),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(150361),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_8__),dlv__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_9__),DateType={DAY:1,WEEK:2,MONTH:3,YEAR:4,QUARTER:5,RANGE:6,properties:{1:{name:"Day",value:1,code:"D"},2:{name:"Week",value:2,code:"W"},3:{name:"Month",value:3,code:"M"},4:{name:"Year",value:4,code:"Y"},5:{name:"Quarter",value:5,code:"Q"},6:{name:"Range",value:6,code:"R"}}};
/* harmony default export */__webpack_exports__.Z={dateOperators:function(){return lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_8___default()({Days:[{id:0,operatorId:22,label:"Today",value:null,offset:0,operationOn:"day",operationOnId:1},{id:1,operatorId:25,label:"Yesterday",value:null,offset:-1,operationOn:"day",operationOnId:1},{id:2,operatorId:43,label:"Today upto Now",value:null,offset:0,operationOn:"day",operationOnId:1},{id:6,operatorId:49,label:"Last 2 days",value:null,offset:-2,operationOn:"day",operationOnId:1},{id:7,operatorId:49,label:"Last 7 days",value:null,offset:-7,operationOn:"day",operationOnId:1},{id:8,operatorId:49,label:"Last 15 days",value:null,offset:-15,operationOn:"day",operationOnId:1},{id:9,operatorId:49,label:"Last 30 days",value:null,offset:-30,operationOn:"day",operationOnId:1}],Weeks:[{id:10,operatorId:31,label:"This week",value:null,offset:0,operationOn:"week",operationOnId:2},{id:11,operatorId:30,label:"Last week",value:null,offset:-1,operationOn:"week",operationOnId:2},{id:13,operatorId:50,label:"Last 2 weeks",value:null,offset:-2,operationOn:"week",operationOnId:2},{id:14,operatorId:50,label:"Last 4 weeks",value:null,offset:-4,operationOn:"week",operationOnId:2},{id:15,operatorId:50,label:"Last 8 weeks",value:null,offset:-8,operationOn:"week",operationOnId:2},{operatorId:47,label:"This Week Until Now",offset:0,value:null,operationOn:"week",operationOnId:2}],Months:[{id:16,operatorId:28,label:"This month",value:null,offset:0,operationOn:"month",operationOnId:3},{id:17,operatorId:66,label:"This Month till yesterday",value:null,operationOn:"month",operationOnId:3},{id:18,operatorId:27,label:"Last month",value:null,offset:-1,operationOn:"month",operationOnId:3},{id:19,operatorId:51,label:"Last 2 months",value:null,offset:-2,operationOn:"month",operationOnId:3},{id:20,operatorId:51,label:"Last 4 months",offset:-4,value:null,operationOn:"month",operationOnId:3},{operatorId:48,label:"This Month Until Now",offset:0,value:null,operationOn:"month",operationOnId:3}],Year:[{id:21,operatorId:44,label:"This year",value:null,offset:0,operationOn:"year",operationOnId:4},{id:23,operatorId:45,label:"Last year",value:null,offset:-1,operationOn:"year",operationOnId:4},{id:24,operatorId:46,label:"This Year upto Now",value:null,offset:0,operationOn:"year",operationOnId:4},{id:25,operatorId:72,label:"Till Now",value:null,offset:0,operationOn:"year",operationOnId:4}],Quarter:[{operatorId:68,label:"This Quarter",value:null,offset:0,operationOn:"quarter",operationOnId:5},{operatorId:69,label:"Last Quarter",value:null,offset:-1,operationOn:"quarter",operationOnId:5},{operatorId:70,label:"",value:null,offset:-1,operationOn:"quarter",operationOnId:5}],Custom:[{operatorId:62,label:"",value:null,offset:0,operationOn:"day",operationOnId:1},{operatorId:63,label:"",value:null,offset:0,operationOn:"week",operationOnId:2},{operatorId:64,label:"",value:null,offset:0,operationOn:"month",operationOnId:3},{operatorId:65,label:"",value:null,offset:0,operationOn:"year",operationOnId:4},{operatorId:20,label:"",value:null,offset:null,operationOn:"hour",operationOnId:6},{operatorId:67,label:"",value:null,offset:0,operationOn:"quarter",operationOnId:5}]})},computeMoment:function(additionalInfo,timeZone){var momentNew=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone),finalValue=null;if(additionalInfo.period)switch(additionalInfo.period){case"start":momentNew.startOf(additionalInfo.label);break;case"end":momentNew.endOf(additionalInfo.label);break}if(additionalInfo.operation)switch(additionalInfo.operation){case"add":momentNew.add(additionalInfo.label,additionalInfo.value);break;case"subtract":momentNew.subtract(additionalInfo.label,additionalInfo.value);break}if(additionalInfo.label)switch(additionalInfo.label){case"day":finalValue=momentNew.day();break;case"week":finalValue=momentNew.week();break;case"month":finalValue=momentNew.month();break;case"year":finalValue=momentNew.year();break}return finalValue},DateType:DateType,tabContextNames:function(){},getDateOperatorsHashMap:function(){var _this$dateOperators,dateOperators=null!==(_this$dateOperators=this.dateOperators())&&void 0!==_this$dateOperators?_this$dateOperators:{},operatorsHashMap={};
// Returns a {operatorId: operator} hashMap.
return Object.keys(dateOperators).forEach((function(operatorKey){var operators=dateOperators[operatorKey];operators.forEach((function(operator){var _ref=null!==operator&&void 0!==operator?operator:{},operatorId=_ref.operatorId;operatorsHashMap[operatorId]=operator}))})),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_8___default()(operatorsHashMap)},updateStartOfWeekInMoment:function(org){org&&"GB"===(null===org||void 0===org?void 0:org.country)&&moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().updateLocale("en",{week:{dow:1}})},calculateCustomCaseValue:function(customCaseSection,timeZone,org){if(this.updateStartOfWeekInMoment(org),72===customCaseSection.operatorId||25===customCaseSection.id){
// till now
var data=dlv__WEBPACK_IMPORTED_MODULE_9___default()(vue__WEBPACK_IMPORTED_MODULE_10__["default"],"prototype.$org.createdTime",1483209e6);customCaseSection.value=[data],customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).valueOf())}else if(48===customCaseSection.operatorId)
// this month till now
customCaseSection.value=[],customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("month").valueOf()),customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).valueOf());else if(46===customCaseSection.operatorId)
// this year till now
customCaseSection.value=[],customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("year").valueOf()),customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).valueOf());else if(43===customCaseSection.operatorId)
// today till now
customCaseSection.value=[],customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("day").valueOf()),customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).valueOf());else if(47===customCaseSection.operatorId)
// this week till now
customCaseSection.value=[],customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("week").valueOf()),customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).valueOf());else if(66===customCaseSection.operatorId)customCaseSection.value=[],moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("day").valueOf()===moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("month").valueOf()?customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).subtract(1,"month").startOf("month").valueOf()):customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("month").valueOf()),customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).subtract(1,"day").endOf("day").valueOf());else if(51===customCaseSection.operatorId||50===customCaseSection.operatorId||49===customCaseSection.operatorId&&customCaseSection.offset<-1){customCaseSection.value=[];var tempMoment=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).add(customCaseSection.offset,customCaseSection.operationOn).startOf(customCaseSection.operationOn).valueOf();customCaseSection.value.push(tempMoment),customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(tempMoment,timeZone).add(Math.abs(customCaseSection.offset+1),customCaseSection.operationOn).endOf(customCaseSection.operationOn).valueOf())}else if(0===customCaseSection.offset||-1===customCaseSection.offset){customCaseSection.value=[];var _tempMoment=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).add(customCaseSection.offset,customCaseSection.operationOn).startOf(customCaseSection.operationOn).valueOf();customCaseSection.value.push(_tempMoment),customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(_tempMoment,timeZone).endOf(customCaseSection.operationOn).valueOf())}else{customCaseSection.value=[];var _tempMoment2=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).add(customCaseSection.offset+1,customCaseSection.operationOn).startOf(customCaseSection.operationOn).valueOf();customCaseSection.value.push(_tempMoment2),customCaseSection.value.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(_tempMoment2,timeZone).add(Math.abs(customCaseSection.offset+1),customCaseSection.operationOn).endOf(customCaseSection.operationOn).valueOf())}return customCaseSection},isValueRequired:function(operatorId){return 42===operatorId||49===operatorId||50===operatorId||51===operatorId||70===operatorId||(62===operatorId||63===operatorId||64===operatorId||65===operatorId||67===operatorId||20===operatorId)},getDatePickerObject:function(id,value,timeZone){var _dateOperatorsHashMap;timeZone||(timeZone=vue__WEBPACK_IMPORTED_MODULE_10__["default"].prototype.$timezone),this.isValueRequired(id)||(value=null),value&&"string"===typeof value&&(value=value.split(",").length>1?value.split(",").map((function(d){return parseInt(d)})):parseInt(value)>1e3?[parseInt(value)]:parseInt(value));var dateObj={},fromMoment=null,toMoment=null,dateOperatorsHashMap=this.getDateOperatorsHashMap(),_ref2=null!==(_dateOperatorsHashMap=dateOperatorsHashMap[id])&&void 0!==_dateOperatorsHashMap?_dateOperatorsHashMap:{},operationOnId=_ref2.operationOnId,operationOn=_ref2.operationOn,operatorId=_ref2.operatorId,label=_ref2.label;if(dateObj["operatorId"]=operatorId,dateObj["operationOnId"]=operationOnId,dateObj["operationOn"]=operationOn,dateObj["label"]=label,Array.isArray(value)){1===value.length?(fromMoment=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default()(value[0]).tz(timeZone).startOf(dateObj["operationOn"]),toMoment=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default()(value[0]).tz(timeZone).endOf(dateObj["operationOn"]),dateObj["value"]=[fromMoment.valueOf(),toMoment.valueOf()]):(fromMoment=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default()(value[0]),toMoment=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default()(value[1]),dateObj["value"]=value);var offset=-toMoment.diff(fromMoment,operationOn)-1;dateObj["offset"]=offset}else null===value?22===id||31===id||28===id||44===id||68===id?(dateObj["offset"]=0,dateObj=this.calculateCustomCaseValue(dateObj,timeZone,vue__WEBPACK_IMPORTED_MODULE_10__["default"].prototype.$org)):(dateObj["offset"]=-1,dateObj=this.calculateCustomCaseValue(dateObj,timeZone,vue__WEBPACK_IMPORTED_MODULE_10__["default"].prototype.$org)):(dateObj["offset"]=-1*value,dateObj=this.calculateCustomCaseValue(dateObj,timeZone,vue__WEBPACK_IMPORTED_MODULE_10__["default"].prototype.$org));return dateObj},getDatePickerObjectFromDateAggregation:function(dateAggregation,startEndTimeStampString,timeZone){var dateOperator=null;switch(dateAggregation){
//Map BMSAggregateOperators to  DateOperators
case 25:
//QUARTERLY
dateOperator=67;break;case 10:
//MONTHLY
dateOperator=64;break;case 11:
//WEEKLY
dateOperator=63;break;case 12:
//DAILY
dateOperator=62;break;case 20:
//HOURLY
dateOperator=20;break;default:throw new Error("invalid DATE AGGREGATION")}return this.getDatePickerObject(dateOperator,startEndTimeStampString,timeZone)},returnOperator:function(id){var _this$dateOperators2,dateOperators=null!==(_this$dateOperators2=this.dateOperators())&&void 0!==_this$dateOperators2?_this$dateOperators2:{};for(var key in Object.keys(dateOperators))if("Custom"!==dateOperators[Object.keys(dateOperators)[key]]){var operationsList=dateOperators[Object.keys(dateOperators)[key]];for(var operation in operationsList){var temp=operationsList[operation];if(temp.operatorId===id)return temp}}return null},getOperationFromLabel:function(search){var _this$dateOperators3,dateOperators=null!==(_this$dateOperators3=this.dateOperators())&&void 0!==_this$dateOperators3?_this$dateOperators3:{};for(var key in Object.keys(dateOperators)){var operations=dateOperators[Object.keys(dateOperators)[key]];for(var operationIndex in operations)if(operations[operationIndex].label.split(" ").join("").toLowerCase()===search)return operations[operationIndex]}return null},getDate:function(operatorId,timeZone){var temp=[];if(48===this.customCaseSection.id)
// this month till now
temp=[],temp.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("month").valueOf()),temp.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).valueOf());else if(46===this.customCaseSection.id)
// this year till now
temp=[],temp.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("year").valueOf()),temp.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).valueOf());else if(43===this.customCaseSection.id)
// today till now
temp=[],temp.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("day").valueOf()),temp.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).valueOf());else if(47===this.customCaseSection.id)
// this week till now
temp=[],temp.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).startOf("week").valueOf()),temp.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).valueOf());else{temp=[];var operation=this.returnOperator(operatorId),tempMoment=null;if(operation.offset<0)tempMoment=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).subtract(Math.abs(operation.offset),operation.operationOn).startOf(operation.operationOn).valueOf(),temp.push(tempMoment);else{var _tempMoment3=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default().tz(timeZone).add(Math.abs(operation.offset),operation.operationOn).valueOf();temp.push(_tempMoment3)}temp.push(moment_timezone__WEBPACK_IMPORTED_MODULE_7___default()(tempMoment).endOf(operation.operationOn).valueOf())}return temp},getTabFromOperation:function(operationOnId,offset){return offset<-1?"R":1===operationOnId?"D":2===operationOnId?"W":3===operationOnId?"M":4===operationOnId?"Y":5===operationOnId?"Q":6===operationOnId?"R":void 0},getLastNMonthsTimeStamp:function(n){var startTime=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default()().subtract(n-1,"months").startOf("month").valueOf(),endTime=moment_timezone__WEBPACK_IMPORTED_MODULE_7___default()().endOf("month").valueOf();return{value:[startTime,endTime]}}}},
/***/107545:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358)
/* harmony import */;var src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(483700),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(990260),_facilio_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(329435),lodash__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(496486);
/* harmony default export */__webpack_exports__.Z={data:function(){return{dbCustomScriptFilter:{}}},computed:{isPortalApp:function(){var PORTALS=this.$constants.appCategory.PORTALS;return!(!(0,_facilio_router__WEBPACK_IMPORTED_MODULE_4__/* .getApp */.wx)()||(0,_facilio_router__WEBPACK_IMPORTED_MODULE_4__/* .getApp */.wx)().appCategory!==PORTALS)}},mounted:function(){this.subscribeEventBus()},beforeDestory:function(){this.unsubscribeEventBus()},methods:{unsubscribeEventBus:function(){var _this$item$id,_this$item,id=String(null!==(_this$item$id=null===this||void 0===this||null===(_this$item=this.item)||void 0===_this$item?void 0:_this$item.id)&&void 0!==_this$item$id?_this$item$id:null===this||void 0===this?void 0:this.id);// Both user filters and dashboard widgets are widgets.
src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_3__/* .eventBus */.Y.$off("applyAction_".concat(id))},subscribeEventBus:function(){var _this$item$id2,_this$item2;this.unsubscribeEventBus();var id=String(null!==(_this$item$id2=null===this||void 0===this||null===(_this$item2=this.item)||void 0===_this$item2?void 0:_this$item2.id)&&void 0!==_this$item$id2?_this$item$id2:null===this||void 0===this?void 0:this.id);src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_3__/* .eventBus */.Y.$on("applyAction_".concat(id),this.applyAction)},updateEditDropDown:function(items){src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_3__/* .eventBus */.Y.$emit("updateEditDropDown",{id:this.item.id,items:items})},updateViewDropDown:function(items){src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_3__/* .eventBus */.Y.$emit("updateViewDropDown",{id:this.item.id,items:items})},initWidget:function(widgetConfig){src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_3__/* .eventBus */.Y.$emit("initWidget",widgetConfig)},onAction:function(action){src_pages_new_dashboard_utils_eventBus_js__WEBPACK_IMPORTED_MODULE_3__/* .eventBus */.Y.$emit("onAction",action)},applyAction:function(data){var _this$item$id3,_this$item3,_ref=null!==data&&void 0!==data?data:{},actionWidgetId=_ref.widget_id,_ref2=null!==data&&void 0!==data?data:{},actions=_ref2.actionMeta,currentWidgetId=null!==(_this$item$id3=null===this||void 0===this||null===(_this$item3=this.item)||void 0===_this$item3?void 0:_this$item3.id)&&void 0!==_this$item$id3?_this$item$id3:null===this||void 0===this?void 0:this.id,self=this;currentWidgetId==actionWidgetId&&((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__/* .isEmpty */.xb)(actions)?(self.dbFilterJson={},self.dbTimelineFilter={},self.dbCustomScriptFilter={}):Object.keys(actions).forEach((function(key){if("TIMELINE_FILTER"==key){var timelineFilter=actions.TIMELINE_FILTER;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__/* .isEmpty */.xb)(timelineFilter)||(self.dbTimelineFilter=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.cloneDeep)(timelineFilter))}else if("USER_FILTER"==key){var userFilter=actions.USER_FILTER;(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isObject)(userFilter)&&(self.dbFilterJson=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.cloneDeep)(userFilter))}else if("FILTER"==key){var _actions$FILTER=actions.FILTER,criteria=_actions$FILTER.criteria,ruleInfo=_actions$FILTER.ruleInfo,datapoint=_actions$FILTER.datapoint,_ref3=null!==ruleInfo&&void 0!==ruleInfo?ruleInfo:{},triggerWidgetCriteria=_ref3.trigger_widget_criteria;self.ruleInfo={criteria:criteria,trigger_widget_criteria:triggerWidgetCriteria,datapointList:datapoint}}else"card_parent_id"==key?self.cardParentId=actions[key]:"CUSTOM_SCRIPT_FILTER"==key&&(self.dbCustomScriptFilter=actions[key])})))}}}},
/***/863173:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */tP:function(){/* binding */return timeAggregation},
/* harmony export */uH:function(){/* binding */return defaultTheme}
/* harmony export */});
/* unused harmony exports pivotThemeOptions, datePeriodOptions, defaultColFormat */
var defaultTheme={density:"SMALL",name:"Default",class:"default",grid:"both",stripe:!1,fontSize:"medium",number:!1},timeAggregation=[{name:"Actual",value:0,enumValue:null},{name:"Hourly",value:20,enumValue:"hourly"},{name:"Daily",value:12,enumValue:"daily"},{name:"Weekly",value:11,enumValue:"weekly"},{name:"Monthly",value:10,enumValue:"monthly"},{name:"Quarterly",value:25,enumValue:"quarterly"},{name:"Yearly",value:8,enumValue:"yearly"},{name:"Hour of day",value:19,enumValue:"hourofday"},{name:"Day of week",value:17,enumValue:"dayofweek"},{name:"Day of month",value:18,enumValue:"dayofmonth"}]},
/***/689471:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */CO:function(){/* binding */return serializeUserFilters},
/* harmony export */Me:function(){/* binding */return generateFilterJSON},
/* harmony export */jb:function(){/* binding */return getUserFilterModel},
/* harmony export */rj:function(){/* binding */return getUserFilterObj},
/* harmony export */yZ:function(){/* binding */return getCascadingFilterModel}
/* harmony export */});
/* unused harmony exports CONSTANTS, getCondition */
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(482482),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(595082),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(566347),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_16__=(__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(212826),__webpack_require__(879288),__webpack_require__(990260)),_facilio_utils_utility_methods__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(555005),dlv__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_15__),CONSTANTS={componentTypes:{LOOKUP:{SINGLE_SELECT:1,MULTI_SELECT:2}},optionType:{ALL:1,SOME:2},PICKLIST_OPERATOR:{IS:36,ISN_T:37},BUILDING_OPERATOR:{BUILDING_IS:38},DATETIME_OPERATOR:{HOUR_OF_DAY:103,DAY_OF_MONTH:101,DAY_OF_WEEK:85}};
/* harmony import */function serializeUserFilters(userFilterObjs){return userFilterObjs.map((function(userFilterObj){var userFilter=(0,_facilio_utils_utility_methods__WEBPACK_IMPORTED_MODULE_14__/* .serializeProps */._$)(userFilterObj,["isOthersOptionEnabled","isAllOptionEnabled","showOnlyRelevantValues","id","parentModuleName","filterOrder","optionType","componentType","label","fieldId","moduleName","defaultValues","selectedOptions","criteria","criteriaId","selectedSliderRangeValues","selectedDayOrHourValues","filterDisplayType"]),_ref=userFilterObj||{},moduleName=_ref.moduleName,module=_ref.module,_ref2=module||{},parentModule=_ref2.parentModule;"ticketstatus"===moduleName&&(userFilter.parentModuleName=parentModule);var criteria=userFilter.criteria;if(criteria&&criteria.conditions)
//dont send operator as there is no enum setter for operator,causes struts error,operatorId is sent which will suffice
for(var conditionId in criteria.conditions)delete criteria.conditions[conditionId].operator;return userFilter}))}function getUserFilterObj(filterOption){
// filterOption is either-> Field/Module Object indicated by filterOption.filterType
// construct a db user filter context obj
var filterObj={optionType:1,componentType:1,label:filterOption.displayName,defaultValues:[],isAllOptionEnabled:!0,isOthersOptionEnabled:!0,showOnlyRelevantValues:!1,filterDisplayType:1};return"FIELD"==filterOption.filterType?(filterObj.fieldId=filterOption.fieldId,filterObj.field=filterOption):"MODULE"==filterOption.filterType&&(filterObj.moduleName=filterOption.name,filterObj.module=filterOption),filterObj}function getUserFilterModel(userFilters){var model={};return userFilters.forEach((function(filter){model[filter.id]=filter.defaultValues.filter((function(rt){if("all"!==rt)return rt}))})),model}
// cascadingFilters -> map of UserFilterId:applicableFieldObj
// userFilters Array of filter meta, userFilterModel {filterId:valueArray} , object of applied dropdown values for all filters
function getCascadingFilterModel(userFilters,userFilterModel){
// MAP userFilterId:FilterJson(that applies to columns in that Filter)
var _step,cascadingFilterModel={},_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(userFilters);try{for(_iterator.s();!(_step=_iterator.n()).done;){var userFilter=_step.value;if(userFilter.showOnlyRelevantValues&&userFilter.cascadingFilters){var filterJSON=getCascadingFilterJsonForFilter(userFilter.cascadingFilters,userFilterModel);filterJSON&&(cascadingFilterModel[userFilter.id]=filterJSON)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return cascadingFilterModel}function getCascadingFilterJsonForFilter(cascadingFilters,userFilterModel){var filterJsonForUserFilter={};for(var userFilterId in cascadingFilters)
//ALL handling etc being done here , to do ,user the generated widget->filterModel for this
if(userFilterModel[userFilterId]&&!userFilterModel[userFilterId].includes("all")&&!userFilterModel[userFilterId].includes("others")){
// if that filter has a criteria , ie its dropdown set to something oTHER THAN all etc
var condition=getSimpleCondition(cascadingFilters[userFilterId].name,userFilterModel[userFilterId],cascadingFilters[userFilterId].module.name);filterJsonForUserFilter=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},filterJsonForUserFilter),condition)}return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_16__/* .isEmpty */.xb)(filterJsonForUserFilter)?null:filterJsonForUserFilter}function getSimpleCondition(fieldName,values,fieldModuleName){return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},fieldName,{operatorId:isSpaceRelatedModuleName(fieldModuleName)?CONSTANTS.BUILDING_OPERATOR.BUILDING_IS:CONSTANTS.PICKLIST_OPERATOR.IS,value:values})}function generateFilterJSON(filterModel,userFilterList,widgetFilterRel){var userFilterObjMap=userFilterList.reduce((function(obj,ele){return obj[ele.id]=ele,obj}),{}),filterConditions={};
//generate condition for each filterID{widgetID:{"category":"operatorId",WidgetID2:{"differentModCategory:..."}}
//generate condition for each widget for each filter-> due to field mapping ,
//init map of widgetID:{filterID:{condition},filterID2Condition},widgetId2:{filterId1:c}...
for(var widgetId in widgetFilterRel)filterConditions[widgetId]={};for(var _widgetId in widgetFilterRel){
//widget filter rel=> {widgetID:[applicableFilter1,applicableFilter2],widgetId2:[..]}
//widget id key present only if atleast one applicable filter present
var _step2,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(widgetFilterRel[_widgetId]);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _condition$ttime,_condition$ttime2,_condition$ttime3,applicableFilterId=_step2.value,condition=getCondition(applicableFilterId,filterModel[applicableFilterId],userFilterObjMap[applicableFilterId],_widgetId);if(condition)if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_16__/* .isEmpty */.xb)(condition)||!condition.ttime||(null===condition||void 0===condition||null===(_condition$ttime=condition.ttime)||void 0===_condition$ttime?void 0:_condition$ttime.operatorId)!==CONSTANTS.DATETIME_OPERATOR.HOUR_OF_DAY&&(null===condition||void 0===condition||null===(_condition$ttime2=condition.ttime)||void 0===_condition$ttime2?void 0:_condition$ttime2.operatorId)!==CONSTANTS.DATETIME_OPERATOR.DAY_OF_WEEK&&(null===condition||void 0===condition||null===(_condition$ttime3=condition.ttime)||void 0===_condition$ttime3?void 0:_condition$ttime3.operatorId)!==CONSTANTS.DATETIME_OPERATOR.DAY_OF_MONTH)filterConditions[_widgetId][applicableFilterId]=condition;else{var dttimeFilterKey=condition.ttime.operatorId,dtTimeFilterJson={};dtTimeFilterJson["ttime_"+dttimeFilterKey]=condition.ttime,filterConditions[_widgetId][applicableFilterId]=dtTimeFilterJson}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}var widgetFilterJSON={},_loop=function(_widgetId2){var filterJson={};widgetFilterRel[_widgetId2].forEach((function(filterId){filterJson=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},filterJson),filterConditions[_widgetId2][filterId])})),
//generate json only if atleast of the applicable filters needs a condition  , ie workorder-Widget -> category,priority filter  ,if all three are set to 'ALL' don't need any filter to be applied
(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_16__/* .isEmpty */.xb)(filterJson)||(widgetFilterJSON[_widgetId2]=filterJson)};for(var _widgetId2 in widgetFilterRel)_loop(_widgetId2);return widgetFilterJSON}function getCondition(filterId,values,userFilterObj,widgetId){var fieldName=null,field=userFilterObj.field,optionType=userFilterObj.optionType,selectedOptions=userFilterObj.selectedOptions,mappedField=dlv__WEBPACK_IMPORTED_MODULE_15___default()(userFilterObj,"widgetFieldMap.".concat(widgetId));if(fieldName=null!==mappedField&&void 0!==mappedField&&mappedField.name?mappedField.name:userFilterObj.moduleName,1==optionType){if(values.includes("all")||values.includes("")||values.includes(null)||!values.length)return{};if(null!==mappedField&&void 0!==mappedField&&mappedField.name&&"DATE_TIME"===mappedField.dataTypeEnum&&values&&"ALL"!=values[0]){var _userFilterObj$dateTi,_userFilterObj$dateTi2,_userFilterObj$select,_userFilterObj$select2,dateTimeValues=[];if(!((null===userFilterObj||void 0===userFilterObj||null===(_userFilterObj$dateTi=userFilterObj.dateTimeValues)||void 0===_userFilterObj$dateTi?void 0:_userFilterObj$dateTi.length)>0))if((null===userFilterObj||void 0===userFilterObj||null===(_userFilterObj$select=userFilterObj.selectedSliderRangeValues)||void 0===_userFilterObj$select?void 0:_userFilterObj$select.length)>0){var start=userFilterObj.selectedSliderRangeValues[0],end=userFilterObj.selectedSliderRangeValues[1];for(start;start<=end;start++)dateTimeValues.push(start.toString())}else(null===userFilterObj||void 0===userFilterObj||null===(_userFilterObj$select2=userFilterObj.selectedDayOrHourValues)||void 0===_userFilterObj$select2?void 0:_userFilterObj$select2.length)>0&&(dateTimeValues=userFilterObj.selectedDayOrHourValues);return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},fieldName,{operatorId:Number(values[0]),value:(null===userFilterObj||void 0===userFilterObj||null===(_userFilterObj$dateTi2=userFilterObj.dateTimeValues)||void 0===_userFilterObj$dateTi2?void 0:_userFilterObj$dateTi2.length)>0?userFilterObj.dateTimeValues:dateTimeValues})}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},fieldName,{operatorId:isSpaceRelatedModule(userFilterObj)?CONSTANTS.BUILDING_OPERATOR.BUILDING_IS:CONSTANTS.PICKLIST_OPERATOR.IS,value:values})}if(2==optionType)
//in multiselect if both all and others are chosen . no need for filters Irrespective of option type
return values.includes("all")&&values.includes("others")||values.includes("")||values.includes(null)||!values.length?null:values.includes("all")?isPickListLookup(field||mappedField)?(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},fieldName,{operatorId:CONSTANTS.PICKLIST_OPERATOR.IS,value:selectedOptions}):
//for lookups like building,asset etc. Resolve the criteria to IDS and send when 'all' is chosen and LIMIT options is configured
userFilterObj.criteria?(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},fieldName,{operatorId:isSpaceRelatedModule(userFilterObj)?CONSTANTS.BUILDING_OPERATOR.BUILDING_IS:CONSTANTS.PICKLIST_OPERATOR.IS,value:userFilterObj.selectedOptionsRecordIds}):null:values.includes("others")?isPickListLookup(field||mappedField)?(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},fieldName,{operatorId:CONSTANTS.PICKLIST_OPERATOR.ISN_T,value:selectedOptions}):userFilterObj.criteria?(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},fieldName,{operatorId:CONSTANTS.PICKLIST_OPERATOR.ISN_T,value:userFilterObj.selectedOptionsRecordIds}):null:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},fieldName,{operatorId:isSpaceRelatedModule(userFilterObj)?CONSTANTS.BUILDING_OPERATOR.BUILDING_IS:CONSTANTS.PICKLIST_OPERATOR.IS,value:values})}function isPickListLookup(field){return"LOOKUP"==field.dataTypeEnum&&"PICK_LIST"==field.lookupModule.typeEnum}function isSpaceRelatedModule(userFilterObj){return!(!userFilterObj.moduleName||!["site","building","floor","space"].includes(userFilterObj.moduleName))}
// to do both methods in one
function isSpaceRelatedModuleName(moduleName){return!!["site","building","floor","space","resource"].includes(moduleName)}
/***/},
/***/356126:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(566347),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(554621),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(595082),_facilio_api__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(648324),__webpack_require__(32284)),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(990260),util_utility_methods__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(773258),_DashboardFilterHelper__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(689471),_mixins_NewDateHelper__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(105534),vuex__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(420629),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(150361),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={data:function(){return{showDashboardFilterWidgetConfigDialog:!1,filterEditMode:!1,hideFilterInsideWidgets:!1,widgetForFilterConfig:null,
//main state for db filters->used in desktop and mobile db viewer
dashboardFilterObj:null,dbUserFilters:{},
//'widgetId':filterJson
dbTimelineFilter:{},
//'widgetId':{startTime:123,endTime...}
dbCustomScriptFilter:{}}},methods:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_14__/* .mapActions */.nv)({persistDbTimelineFilter:"dashboard/persistDbTimelineFilter",persistDbUserFilters:"dashboard/persistDbUserFilters"})),{},{clearDashboardFilters:function(){this.dbUserFilters={},this.dbTimelineFilter={},this.dashboardFilterObj=null,this.persistDbTimelineFilter(null),this.persistDbUserFilters(null)},initializeDashboardFilters:function(dashboardFilter){if(dashboardFilter){this.dashboardFilterObj=dashboardFilter;var urlDbFilterString=this.$route.query.dbFilters,urlDbFilters=null;urlDbFilterString&&(urlDbFilters=JSON.parse(urlDbFilterString));var urlUserFilters=null,urlTimelineFilter=null;urlDbFilters&&(urlUserFilters=urlDbFilters.userFilters,urlTimelineFilter=urlDbFilters.timelineFilter);var _this$dashboardFilter=this.dashboardFilterObj,dashboardUserFilters=_this$dashboardFilter.dashboardUserFilters,widgetUserFiltersMap=_this$dashboardFilter.widgetUserFiltersMap,isTimelineFilterEnabled=_this$dashboardFilter.isTimelineFilterEnabled,dateOperator=(_this$dashboardFilter.hideFilterInsideWidgets,_this$dashboardFilter.dateOperator),dateValueString=_this$dashboardFilter.dateValue,dateLabel=_this$dashboardFilter.dateLabel,self=(_this$dashboardFilter.startTime,_this$dashboardFilter.endTime,this);if(dashboardUserFilters){
//override defaults using values from url params
urlUserFilters&&dashboardUserFilters.forEach((function(dbUserFilter){var values=urlUserFilters[dbUserFilter.id];(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(values)||self.$set(dbUserFilter,"defaultValues",values)}));
//get filterModel in the form {userFilterId:[defaulValues]}
var filterModel=(0,_DashboardFilterHelper__WEBPACK_IMPORTED_MODULE_11__/* .getUserFilterModel */.jb)(dashboardUserFilters);this.rawUserFilter=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_13___default()(filterModel),this.dbUserFilters=(0,_DashboardFilterHelper__WEBPACK_IMPORTED_MODULE_11__/* .generateFilterJSON */.Me)(filterModel,dashboardUserFilters,widgetUserFiltersMap),this.setCustomScriptFilters(filterModel),this.showDashboardFilterBar=!0}if(isTimelineFilterEnabled){(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(urlTimelineFilter)||(dateOperator=urlTimelineFilter.operatorId,urlTimelineFilter.startTime&&urlTimelineFilter.endTime&&(dateValueString=urlTimelineFilter.startTime+","+urlTimelineFilter.endTime),urlTimelineFilter.dateLabel&&(dateLabel=urlTimelineFilter.dateLabel));var pickerObj=_mixins_NewDateHelper__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */.Z.getDatePickerObject(dateOperator,dateValueString),value=pickerObj.value,operatorId=pickerObj.operatorId,_Array$from=Array.from(value),_Array$from2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(_Array$from,2),_startTime=_Array$from2[0],_endTime=_Array$from2[1];
//pickerObj always has start and end times,
//set initial state of filters
this.dbTimelineFilter={startTime:_startTime,endTime:_endTime,dateLabel:dateLabel,dateValueString:_startTime+","+_endTime,operatorId:operatorId}}}
/* ********* */},setCustomScriptFilters:function(filterModel){var _step,newdbCustomScriptFilter={},_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(this.dashboardFilterObj.customScriptWidgets);try{for(_iterator.s();!(_step=_iterator.n()).done;){var widgetId=_step.value;newdbCustomScriptFilter[widgetId]={filterValues:filterModel,filterMeta:this.dashboardFilterObj.dashboardUserFilters}}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.$set(this,"dbCustomScriptFilter",(0,util_utility_methods__WEBPACK_IMPORTED_MODULE_10__/* .deepCloneObject */.kh)(newdbCustomScriptFilter))},editWidgetFilterConfig:function(widget){this.widgetForFilterConfig=widget,this.showDashboardFilterWidgetConfigDialog=!0},saveWidgetFilterSettings:function(widget){var _this=this;this.showDashboardFilterWidgetConfigDialog=!1;var data={widgets:[{id:widget.id,widgetSettingsJsonString:JSON.stringify(widget.widgetSettings)}]};_facilio_api__WEBPACK_IMPORTED_MODULE_9__/* .API */.bl.post("v2/dashboardFilter/updateWidgetSettings",data).then((function(resp){resp.data;var error=resp.error;error?_this.$message("error updating widget-filter settings"):
//saved widget settings, change state in dashboard viewer
_this.widgetForFilterConfig.widgetSettings=widget.widgetSettings}))}})}},
/***/463491:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),vuex__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(420629),_facilio_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(329435);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={computed:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_2__/* .mapState */.rn)({currentTab:function(state){return state.webtabs.selectedTab}})),(0,vuex__WEBPACK_IMPORTED_MODULE_2__/* .mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{hasViewPermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("VIEW",currentTab)}return this.$hasPermission("dashboard:READ")},hasCreatePermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("CREATE",currentTab)}return this.$hasPermission("dashboard:CREATE")},hasDeletePermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("DELETE",currentTab)}return this.$hasPermission("dashboard:DELETE")},hasDashboardEditPermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("EDIT",currentTab)}return this.$hasPermission("dashboard:UPDATE")},hasSharePermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("SHARE",currentTab)}return this.$hasPermission("dashboard:SHARE_DASHBOARD")}})}},
/***/483700:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */Y:function(){/* binding */return eventBus}
/* harmony export */});
/* harmony import */var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(720144),eventBus=new vue__WEBPACK_IMPORTED_MODULE_0__["default"];
// Dashboard actions, etc. works using this eventBus instance.
},
/***/663763:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(566347),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(554621),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(548534),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(821694),__webpack_require__(976801),__webpack_require__(228436),__webpack_require__(879288),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(990260)),util_utility_methods__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(773258),util_picklist__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(961358);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={methods:{
/* Event handling related methods */onKeyDownEvent:function(event){
//TO DO , Unable to capture Esc key here , must make sure ESC key press closes the editor
event.stopPropagation()},onMouseDownEvent:function(event){event.stopPropagation()},handleRecordSelected:function(option){var activeRowIndex=this.activeRowIndex,activeColumnIndex=this.activeColumnIndex,_ref=option||{},value=_ref.value;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(option)||this.cacheLookUpLabels(option),this.activeEditorInstance.instance.deselectCell(),this.$emit("onHotTableLookupFieldChange",{value:value,activeRowIndex:activeRowIndex,activeColumnIndex:activeColumnIndex})},handleSelectChange:function(value){var activeRowIndex=this.activeRowIndex,activeColumnIndex=this.activeColumnIndex;
// Close editor for on select change
this.$emit("onHotTableSelectChange",{value:value,activeRowIndex:activeRowIndex,activeColumnIndex:activeColumnIndex}),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(value)||this.cacheSelectLabels(value),this.activeEditorInstance.instance.deselectCell()},handlePasteEvent:function(selectedRowsArr,coords,hotInstance){var _this=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().mark((function _callee(){var hotTableSettingsData,activeColumn,_ref2,columns,selectedColumn,preHookData,activeTab;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:hotTableSettingsData=_this.hotTableSettingsData,activeColumn=_this.activeColumn,_ref2=hotTableSettingsData||{},columns=_ref2.columns,selectedColumn=columns.find((function(column){return column.data===activeColumn.data})),preHookData={},selectedRowsArr=_this.normalizeSelectedRows(selectedRowsArr,coords),activeTab=_this.activeTab,"0"!==activeTab&&null!=activeTab&&!1!==selectedColumn.readOnly||(preHookData=_this.preBeforePasteEventHanlder(selectedRowsArr,coords),_this.resolvePasteData({selectedRowsArr:selectedRowsArr,coords:coords,hotInstance:hotInstance,preHookData:preHookData}));case 8:case"end":return _context.stop()}}),_callee)})))()},resolvePasteData:function(props){var _this2=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().mark((function _callee2(){var selectedRowsArr,coords,hotInstance,preHookData,hotTableData,pasteDataMap,isinvite,_coords,_coords$,selectedCellsCoords,startRow,startCol,_iterator,_step,_step$value,rowIndex,row,currentRow,physicalRow,activeRowData,rowLength,_iterator2,_step2,_loop;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:selectedRowsArr=props.selectedRowsArr,coords=props.coords,hotInstance=props.hotInstance,preHookData=props.preHookData,hotTableData=_this2.hotTableData,pasteDataMap=_this2.pasteDataMap,isinvite=_this2.hotTableSettingsData.isinvite,_coords=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(coords,1),_coords$=_coords[0],selectedCellsCoords=void 0===_coords$?{}:_coords$,startRow=selectedCellsCoords.startRow,startCol=selectedCellsCoords.startCol,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(selectedRowsArr.entries()),_context3.prev=6,_iterator.s();case 8:if((_step=_iterator.n()).done){_context3.next=35;break}if(_step$value=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(_step.value,2),rowIndex=_step$value[0],row=_step$value[1],currentRow=startRow+rowIndex,physicalRow=_this2.getPhysicalRowIndex(currentRow),activeRowData=hotTableData[physicalRow]||{},(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(row)){_context3.next=33;break}rowLength=row.length,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(row.entries()),_context3.prev=16,_loop=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().mark((function _loop(){var _step2$value,colIndex,pasteValue,currentCol,cellProperties,rowsData,_ref3,cellType,specialOptionsFetch,_ref3$options,options,prop,field,cachedMapKey,resolvedCellValue,selectedOption,_ref4,value,resolvedLookupValue;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_step2$value=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(_step2.value,2),colIndex=_step2$value[0],pasteValue=_step2$value[1],currentCol=startCol+colIndex,cellProperties=hotInstance.getCellMeta(currentRow,currentCol),rowsData=hotInstance.getDataAtRow(currentRow),_ref3=cellProperties||{},cellType=_ref3.cellType,specialOptionsFetch=_ref3.specialOptionsFetch,_ref3$options=_ref3.options,options=void 0===_ref3$options?[]:_ref3$options,prop=_ref3.prop,field=_ref3.field,cachedMapKey=_ref3.cachedMapKey,resolvedCellValue=pasteValue,!specialOptionsFetch){_context2.next=13;break}return _context2.next=9,_this2.onPasteEventHook({preHookData:preHookData,cellType:cellType,cachedMapKey:cachedMapKey,startIndex:startCol,rowLength:rowLength,selectedRowsArr:selectedRowsArr,rowIndex:rowIndex,propName:prop,field:field,pasteValue:pasteValue,activeRowData:activeRowData});case 9:resolvedCellValue=_context2.sent,_this2.setPasteData({rowData:activeRowData,rowsData:rowsData,propName:prop,colValue:resolvedCellValue,cellProperties:cellProperties,pasteDataMap:pasteDataMap,cellType:cellType,isinvite:isinvite}),_context2.next=25;break;case 13:if(!["select","lookup"].includes(cellType)){_context2.next=25;break}if("select"!==cellType){_context2.next=20;break}selectedOption=options.find((function(option){var label=option.label;return label.toLowerCase().trim()===pasteValue.toLowerCase().trim()})),_ref4=selectedOption||{},value=_ref4.value,resolvedCellValue=value||pasteValue,_context2.next=25;break;case 20:if("lookup"!==cellType){_context2.next=25;break}return _context2.next=23,_this2.pasteEventLookupHandler({field:field,pasteValue:pasteValue});case 23:resolvedLookupValue=_context2.sent,resolvedCellValue=resolvedLookupValue;case 25:_this2.setPasteData({rowData:activeRowData,rowsData:rowsData,propName:prop,colValue:resolvedCellValue,cellProperties:cellProperties,pasteDataMap:pasteDataMap,cellType:cellType,isinvite:isinvite});case 26:case"end":return _context2.stop()}}),_loop)})),_iterator2.s();case 19:if((_step2=_iterator2.n()).done){_context3.next=23;break}return _context3.delegateYield(_loop(),"t0",21);case 21:_context3.next=19;break;case 23:_context3.next=28;break;case 25:_context3.prev=25,_context3.t1=_context3["catch"](16),_iterator2.e(_context3.t1);case 28:return _context3.prev=28,_iterator2.f(),_context3.finish(28);case 31:return _context3.next=33,_this2.afterRowPaste({activeRowData:activeRowData});case 33:_context3.next=8;break;case 35:_context3.next=40;break;case 37:_context3.prev=37,_context3.t2=_context3["catch"](6),_iterator.e(_context3.t2);case 40:return _context3.prev=40,_iterator.f(),_context3.finish(40);case 43:_this2.$emit("update:pasteDataMap",pasteDataMap),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(hotInstance)||hotInstance.render(),_this2.$emit("update:isPasteInProgress",!1),_this2.afterPasteHook();case 47:case"end":return _context3.stop()}}),_callee2,null,[[6,37,40,43],[16,25,28,31]])})))()},pasteEventLookupHandler:function(props){return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().mark((function _callee3(){var field,pasteValue,resolvedLookupValue,_field$optionsCache,optionsCache,keyValue,_ref5,options,selectedOption;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(field=props.field,pasteValue=props.pasteValue,resolvedLookupValue="",_field$optionsCache=field.optionsCache,optionsCache=void 0===_field$optionsCache?{}:_field$optionsCache,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(optionsCache)||(keyValue=(0,util_utility_methods__WEBPACK_IMPORTED_MODULE_13__/* .getKeyByValue */.V9)(optionsCache,pasteValue),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(keyValue)||(resolvedLookupValue=Number(keyValue))),!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(resolvedLookupValue)){_context4.next=15;break}return field.filters={name:{operatorId:5,value:[pasteValue]}},_context4.next=8,(0,util_picklist__WEBPACK_IMPORTED_MODULE_14__/* .getFieldOptions */._K)({field:field});case 8:if(_context4.t0=_context4.sent,_context4.t0){_context4.next=11;break}_context4.t0={};case 11:_ref5=_context4.t0,options=_ref5.options,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(options)?resolvedLookupValue=pasteValue:(field.options=options,selectedOption=options.find((function(option){return option.label.toLowerCase().trim()===pasteValue.toLowerCase().trim()}))||{},resolvedLookupValue=selectedOption.value,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(resolvedLookupValue)||(field.optionsCache[resolvedLookupValue]=selectedOption.label)),field.filters={};case 15:return _context4.abrupt("return",resolvedLookupValue);case 16:case"end":return _context4.stop()}}),_callee3)})))()},setPasteData:function(prop){var rowData=prop.rowData,propName=prop.propName,colValue=prop.colValue,cellProperties=prop.cellProperties,pasteDataMap=prop.pasteDataMap,rowsData=prop.rowsData,cellType=prop.cellType,isinvite=prop.isinvite,cellsErrorMap=this.cellsErrorMap,hotTableSettingsData=this.hotTableSettingsData,_ref6=hotTableSettingsData||{},uniqueDataKey=_ref6.uniqueDataKey,id=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(rowData)?null:rowData[uniqueDataKey],isValidEntry=!0;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isFunction */.mf)(cellProperties.validateFn)&&(isValidEntry=cellProperties.validateFn({cellValue:colValue,rowsData:rowsData,cellType:cellType}));var isAlreadyInvalid=(cellsErrorMap[id]||[]).includes(propName);this.pushOrRemoveError({isValidEntry:isValidEntry,isAlreadyInvalid:isAlreadyInvalid,id:id,propName:propName}),id&&(isinvite?((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(pasteDataMap[id])&&(pasteDataMap[id]={}),["select","lookup"].includes(cellType)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isNumber */.hj)(colValue)?pasteDataMap[id][propName]=colValue:["select","lookup"].includes(cellType)&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isNumber */.hj)(colValue)?(this.$message.error(this.$t("common._common.invalid_value")),pasteDataMap[id][propName]=null,this.activeEditorInstance.instance.setDataAtCell(cellProperties.row,cellProperties.col,null)):pasteDataMap[id][propName]=colValue):((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(pasteDataMap[id])&&(pasteDataMap[id]={}),["select","lookup"].includes(cellType)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isNumber */.hj)(colValue)?pasteDataMap[id][propName]=colValue:["select","lookup"].includes(cellType)&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isNumber */.hj)(colValue)&&(this.$message.error(this.$t("common._common.invalid_value")),pasteDataMap[id][propName]=colValue)))},normalizeSelectedRows:function(selectedRowsArr,coords){var _coords2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(coords,1),_coords2$=_coords2[0],selectedCellsCoords=void 0===_coords2$?{}:_coords2$,startRow=selectedCellsCoords.startRow,startCol=selectedCellsCoords.startCol,endRow=selectedCellsCoords.endRow,endCol=selectedCellsCoords.endCol,selectedArrRowLength=selectedRowsArr.length,selectedArrColLength=selectedRowsArr[0].length,coordsRowLength=endRow-startRow+1,coordsColLength=endCol-startCol+1,canSkipNormalization=this.skipNormalization({endRow:endRow,startRow:startRow,endCol:endCol,startCol:startCol,selectedArrRowLength:selectedArrRowLength,selectedArrColLength:selectedArrColLength,coordsRowLength:coordsRowLength,coordsColLength:coordsColLength});if(!canSkipNormalization){var resultArr=[],rowCount=0,dataRowCount=0;while(rowCount<coordsRowLength){var colCount=0,dataColCount=0;selectedArrRowLength<=dataRowCount&&(dataRowCount=0);while(colCount<coordsColLength)selectedArrColLength<=dataColCount&&(dataColCount=0),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(resultArr[rowCount])?resultArr[rowCount]=[selectedRowsArr[dataRowCount][dataColCount]]:resultArr[rowCount].push(selectedRowsArr[dataRowCount][dataColCount]),colCount++,dataColCount++;rowCount++,dataRowCount++}return resultArr}return selectedRowsArr},skipNormalization:function(props){var selectedArrRowLength=props.selectedArrRowLength,selectedArrColLength=props.selectedArrColLength,coordsRowLength=props.coordsRowLength,coordsColLength=props.coordsColLength;return selectedArrRowLength>=coordsRowLength&&selectedArrColLength>=coordsColLength}}}},
/***/906653:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265)
/* harmony import */;var _handsontable_base_CustomValidator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(314346),_handsontable_base_CustomEditor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(857019),_handsontable_base_CustomRenderer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(876161),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(990260),supportedComponentHash={input:{visibilityKey:"canShowInput",refKey:"inputComponent"},select:{visibilityKey:"canShowSelect",refKey:"selectComponent"},picker:{visibilityKey:"canShowPicker",refKey:"pickerComponent"},lookup:{visibilityKey:"canShowLookup",refKey:"lookUpComponent"}};
/* harmony default export */__webpack_exports__.Z={methods:{getHotTableInstance:function(){return this.$refs["hotTableInstance"]},getPhysicalRowIndex:function(currentRow){var physicalRowArr=this.physicalRowArr;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__/* .isEmpty */.xb)(physicalRowArr)?currentRow:physicalRowArr[currentRow]},getHotCustomEditor:function(componentName){var compInstance=this,editorWrapper=(0,_handsontable_base_CustomEditor__WEBPACK_IMPORTED_MODULE_4__/* .CustomEditorWrapper */.$)(compInstance,componentName);return editorWrapper},getHotCustomRenderer:function(componentName){var compInstance=this,rendererWrapper=(0,_handsontable_base_CustomRenderer__WEBPACK_IMPORTED_MODULE_5__/* .CustomRendererWrapper */.I)(compInstance,componentName);return rendererWrapper},getValidateFn:function(column){var cellType=column.cellType;if("select"===cellType||"lookup"===cellType)return _handsontable_base_CustomValidator__WEBPACK_IMPORTED_MODULE_3__/* .selectLookupFieldValidator */.h},getVisibilityKey:function(name){var key=(supportedComponentHash[name]||{}).visibilityKey;return key||""},getRefElement:function(componentInstance,name){var key=(supportedComponentHash[name]||{}).refKey;return new Promise((function(resolve){(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__/* .isEmpty */.xb)(key)||componentInstance.$nextTick((function(){resolve(componentInstance.$refs[key]||{})}))}))},
// For special options fetch
getLookupOptionsForColumn:function(props){var activeRowIndex=this.activeRowIndex,activeColumnIndex=this.activeColumnIndex;return this.getLookupOptions({picklistOptions:props,row:activeRowIndex,col:activeColumnIndex}).then((function(options){return{options:options}})).catch((function(error){return error}))},getSelectOptionsForColumn:function(props){var activeSelectField=this.activeSelectField;activeSelectField.isSelectOptionsLoading=!0;var promise=this.getSelectOptions(props).then((function(options){return options}));return Promise.all([promise]).finally((function(){return activeSelectField.isSelectOptionsLoading=!1}))},getOptionLabel:function(value){var activeLookupField=this.activeLookupField,_ref=activeLookupField||{},optionsCache=_ref.optionsCache;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__/* .isEmpty */.xb)(optionsCache)?"":optionsCache[value]}}}},
/***/580302:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(482482),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(566347),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(554621),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_16__=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(169358),__webpack_require__(843843),__webpack_require__(150361)),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_16__),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(990260);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={methods:{
/* Initializing data related methods */setupHotTableSettingsData:function(){var _this=this,hotTableSettingsData=this.hotTableSettingsData,compInstance=this,columns=hotTableSettingsData.columns,colHeaders=hotTableSettingsData.colHeaders,uniqueDataKey=hotTableSettingsData.uniqueDataKey;
// By default, uniqueDataKey is id
(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(uniqueDataKey)&&(hotTableSettingsData.uniqueDataKey="id"),
// Strech Columns to full width
hotTableSettingsData.stretchH="all",
// Only allow vertical drag to fill
hotTableSettingsData.fillHandle={direction:"vertical"},
/*
        Here normal function is used instead of arrow function to aviod parent scoping
        While copying from handson, have to convert id to corresponding label
      */
(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(columns)||columns.forEach((function(column,index){if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(column.editor)||(column.editor=_this.getHotCustomEditor(column.editor)),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(column.renderer)||(column.renderer=_this.getHotCustomRenderer(column.renderer)),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(column.validateFn)&&(column.validateFn=_this.getValidateFn(column)),column.filters){var svgContent=__webpack_require__(567835),styledSvg='<svg class="icon icon-sm filter-icon"';svgContent=(svgContent||{}).default||"",svgContent=svgContent.replace(/<svg/,styledSvg),colHeaders[index]="".concat(colHeaders[index]," ").concat(svgContent)}}))
/* Hottable hooks setup */,hotTableSettingsData.beforeCopy=function(selectedRowsArr,coords){var _this2=this,_coords=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(coords,1),_coords$=_coords[0],selectedCellsCoords=void 0===_coords$?{}:_coords$,startRow=selectedCellsCoords.startRow,startCol=selectedCellsCoords.startCol;selectedRowsArr.forEach((function(row,rowIndex){var currentRow=startRow+rowIndex;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(row)||row.forEach((function(cellValue,cellIndex){var currentCol=startCol+cellIndex,cellProperties=_this2.getCellMeta(currentRow,currentCol),_ref=cellProperties||{},cellType=_ref.cellType,_ref$options=_ref.options,options=void 0===_ref$options?[]:_ref$options,_ref$field=_ref.field,field=void 0===_ref$field?{}:_ref$field;if(["select","lookup"].includes(cellType)){var _ref2=field||{},optionsCache=_ref2.optionsCache,optionsArr=field.options||options,selectedOption=optionsArr.find((function(option){return option.value===cellValue}))||{},selectedLabel=selectedOption.label;!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(optionsCache)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(selectedLabel)&&(selectedLabel=optionsCache[cellValue]),selectedRowsArr[rowIndex][cellIndex]=selectedLabel||cellValue}}))}))},hotTableSettingsData.beforeCut=function(selectedRowsArr,coords){var _this3=this,_coords2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(coords,1),_coords2$=_coords2[0],selectedCellsCoords=void 0===_coords2$?{}:_coords2$,startRow=selectedCellsCoords.startRow,startCol=selectedCellsCoords.startCol,categoryRowIndexArr=[];selectedRowsArr.forEach((function(row,rowIndex){var currentRow=startRow+rowIndex;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(row)||row.forEach((function(cellValue,cellIndex){var currentCol=startCol+cellIndex,cellProperties=_this3.getCellMeta(currentRow,currentCol),_ref3=cellProperties||{},cellType=_ref3.cellType,_ref3$options=_ref3.options,options=void 0===_ref3$options?[]:_ref3$options,_ref3$field=_ref3.field,field=void 0===_ref3$field?{}:_ref3$field,prop=_ref3.prop,rowValue=_ref3.row;if("categoryId"===prop&&categoryRowIndexArr.push(rowValue),["select","lookup"].includes(cellType)){var _ref4=field||{},optionsCache=_ref4.optionsCache,optionsArr=field.options||options,selectedOption=optionsArr.find((function(option){return option.value===cellValue}))||{},selectedLabel=selectedOption.label;!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(optionsCache)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(selectedLabel)&&(selectedLabel=optionsCache[cellValue]),selectedRowsArr[rowIndex][cellIndex]=selectedLabel||cellValue}}))})),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(categoryRowIndexArr)||categoryRowIndexArr.forEach((function(row){compInstance.resetActiveRowData&&compInstance.resetActiveRowData({activeRowIndex:row})}))},hotTableSettingsData.beforePaste=function(selectedRowsArr,coords){compInstance.$emit("update:isPasteInProgress",!0),compInstance.handlePasteEvent(selectedRowsArr,coords,this)},hotTableSettingsData.beforeColumnSort=function(currentSortConfig,destinationSortConfigs){var columnSortPlugin=this.getPlugin("columnSorting");columnSortPlugin.setSortConfig(destinationSortConfigs);var _ref5=compInstance||{},handleSorting=_ref5.handleSorting;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isFunction */.mf)(handleSorting)?compInstance.handleSorting(currentSortConfig,destinationSortConfigs,columnSortPlugin,compInstance):void 0},hotTableSettingsData.afterChange=function(changes,source){var _this4=this;
// Skip validation for change triggered due to paste event
if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(changes)&&"CopyPaste.paste"!==source){var _step,promises=[],changedRows=new Set,changedValues={},_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(changes.entries());try{var _loop=function(){var _step$value=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_step.value,2),rowData=_step$value[1],_rowData=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(rowData,4),row=_rowData[0],prop=_rowData[1],newValue=(_rowData[2],_rowData[3]),_ref6=changedValues||{},rowValue=_ref6[row];(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(rowValue)?rowValue=[rowData]:rowValue.push(rowData),changedValues[row]=rowValue;var physicalRow=compInstance.getPhysicalRowIndex(row),cellsErrorMap=compInstance.cellsErrorMap,hotTableData=compInstance.hotTableData,hotTableSettingsData=compInstance.hotTableSettingsData,pasteDataMap=compInstance.pasteDataMap,_ref7=hotTableSettingsData||{},uniqueDataKey=_ref7.uniqueDataKey,data=hotTableData[physicalRow],id=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(data)?null:data[uniqueDataKey],columnsArr=_this4.getCellMetaAtRow(row)||[],selectedColumn=columnsArr.find((function(column){return column&&column.prop===prop}))||{};if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(selectedColumn)){var _ref8=selectedColumn||{},validateFn=_ref8.validateFn,cellType=_ref8.cellType,isValidEntry=!0;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isFunction */.mf)(validateFn)){var rowsData=_this4.getDataAtRow(row),dataFromPasteMap=pasteDataMap[id]?pasteDataMap[id][prop]:null;isValidEntry=validateFn({cellValue:dataFromPasteMap||newValue,rowsData:rowsData,cellType:cellType})}var isAlreadyInvalid=(cellsErrorMap[id]||[]).includes(prop);compInstance.pushOrRemoveError({isValidEntry:isValidEntry,isAlreadyInvalid:isAlreadyInvalid,id:id,propName:prop})}changedRows.add(row)};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}if("Autofill.fill"===source)
// To execute hook for each row change only for autofill event
for(var _i=0,_Object$keys=Object.keys(changedValues);_i<_Object$keys.length;_i++){var item=_Object$keys[_i];promises.push(compInstance.onAutoFillRowChange({index:item,rowChanges:changedValues[item]}))}
// To execute hook for each row change
var _step2,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(changedRows.values());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _item=_step2.value;promises.push(compInstance.onRowChange({index:_item}))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}Promise.all(promises).then((function(){return _this4.render()}))}},hotTableSettingsData.afterDocumentKeyDown=function(event){var key=event.key,_ref9=this.getSelectedRange()||[],_ref10=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_ref9,1),range=_ref10[0];compInstance.handleAfterDocumentKeyDown({range:range},key)},hotTableSettingsData.beforeOnCellMouseDown=function(e,coords){var parentElem=e.target.parentElement.nodeName,svgClassName=e.target.classList.value,isSvgElement=svgClassName.includes("filter-icon")||["g","svg"].includes(parentElem);coords.row<0&&isSvgElement&&compInstance.openFilterDialog(coords.col)},hotTableSettingsData.beforeAutofill=function(){var _this$getSelectedRang=this.getSelectedRange(),_this$getSelectedRang2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this$getSelectedRang,1),range=_this$getSelectedRang2[0];compInstance.selectedRange=range},hotTableSettingsData.beforeChange=function(changes,source){if("Autofill.fill"===source){
// When autofill happens fill pasteDataMap for those rows with the
// correct values to use when saving
var selectedRange=compInstance.selectedRange,from=selectedRange.from,to=selectedRange.to,pasteDataMap=compInstance.pasteDataMap;changes.forEach((function(change,index){var startRowIndex,referenceRowIndex,_compInstance$hotTabl=compInstance.hotTableSettingsData,data=_compInstance$hotTabl.data,uniqueDataKey=_compInstance$hotTabl.uniqueDataKey,_change=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(change,2),rowIndex=_change[0],colKey=_change[1],selectionRowLength=to.row-from.row+1;changes[0][0]<from.row?(
// Direction of autofill is towards the top
startRowIndex=to.row,referenceRowIndex=startRowIndex-index%selectionRowLength):(
// Direction of autofill is down
startRowIndex=from.row,referenceRowIndex=startRowIndex+index%selectionRowLength);var referenceRow=data[referenceRowIndex],referenceId=referenceRow[uniqueDataKey],valueToPaste=pasteDataMap[referenceId],targetRow=data[rowIndex],targetId=targetRow[uniqueDataKey];valueToPaste&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_17__/* .isEmpty */.xb)(valueToPaste[colKey])&&(pasteDataMap[targetId]?pasteDataMap[targetId][colKey]=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_16___default()(valueToPaste[colKey]):pasteDataMap[targetId]=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},colKey,valueToPaste[colKey]))}))}}}}}},
/***/331156:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(566347),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(595082),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(548534),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(425728),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(260228),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(450886),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(538077),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(947522),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(670560),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(821694),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(76265),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(634338),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(300268),core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(648324),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(434284),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_set_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(919649),core_js_modules_es_set_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_set_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(169358),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(865137),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(564043),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(857267),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_string_replace_all_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(756532),core_js_modules_es_string_replace_all_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_string_replace_all_js__WEBPACK_IMPORTED_MODULE_21__),_relatedlist_SummaryAttachment__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(526971),_relatedlist_Activities2__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(638507),_relatedlist_Steps__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(17300),_relatedlist_Comments2__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(487565),vuex__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(420629),_Avatar__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(574752),_avatar_User__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(426803),_fields_FSelect__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(3644),_Subheader__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(785869),_avatar_Asset__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(751201),_FDialogNew__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(436756),_SpaceAssetChooser__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(372587),_MobileAttachment2__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(391810),_FAssignment__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(383274),pages_workorder_widgets_dialogs_WorkHours__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(16297),pages_workorder_workorders_v1_mixins_workorderHelper__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(865764),lodash_clone__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(766678),lodash_clone__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(lodash_clone__WEBPACK_IMPORTED_MODULE_37__),_facilio_api__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(32284),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(990260),quasar__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(641358),util_picklist__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(961358);
/* harmony import */
// import { Promise } from 'q'
/* harmony default export */__webpack_exports__.Z={props:[],mixins:[pages_workorder_workorders_v1_mixins_workorderHelper__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z,pages_workorder_workorders_v1_mixins_workorderHelper__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z],data:function(){return{reportLoading:!0,pm:null,tasksList:"",notesList:"",workordersList:"",woObject:"",sequencedData:!1,comments:[],pmMap:{},preRequestList:{},preRequestSections:{},taskList:{},tl:{},newTaskList:[],taskL:[],sec:{},sections:{},workorder:null,newTask:{subject:"",description:"",resource:{id:-1},isReadingTask:!1,readingFieldId:null,options:[],taskType:-1,enableInput:!1,inputType:1,attachmentRequired:!1,inputValidation:null,minSafeLimit:null,maxSafeLimit:null,id:-1},building:null,showAddTask:!1,selectedTask:{inputValidationRuleId:-1,inputValidation:null,safeLimitRuleId:-1,minSafeLimit:null,maxSafeLimit:null,options:[],taskType:-1,previousExecution:null,enableInput:!1,inputType:1,attachmentRequired:!1,subject:"",selectedResourceName:"",inputValues:[]},taskAttachments:{},woAttachments:{},history:{},siteNameCollection:{},logoCollection:{},buildingsList:[],metricWithUnits:{}}},mounted:function(){var _this=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().mark((function _callee(){return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadReadingFieldUnits();case 2:return _context.next=4,_this.loadReport();case 4:case"end":return _context.stop()}}),_callee)})))()},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketStatus","workorder"),this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups"),this.isEmpty=_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb},computed:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_42__/* .mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketcategory:function(state){return state.ticketCategory},ticketpriority:function(state){return state.ticketPriority},ticketstatus:function(state){return state.ticketStatus.workorder}})),(0,vuex__WEBPACK_IMPORTED_MODULE_42__/* .mapGetters */.Se)(["getTicketTypePickList","getTicketPriority","getTicketCategory"])),{},{tickettype:function(){return this.getTicketTypePickList()},openStatusId:function(){var id=this.$store.getters.getTicketStatusByLabel("Submitted","workorder").id;return id?parseInt(id):id},workorderObject:function(){var _this2=this;if(this.workordersList){for(var _loop=function(i){_this2.tasksList&&_this2.tasksList[_this2.workordersList[i].id]&&(_this2.workordersList[i].taskLists=_this2.tasksList[_this2.workordersList[i].id],_this2.getTaskAndSectionLists(_this2.tasksList[_this2.workordersList[i].id])&&(_this2.workordersList[i].sec=_this2.sec,_this2.workordersList[i].taskL=_this2.taskL)),_this2.notesList&&_this2.notesList[_this2.workordersList[i].id]&&(_this2.workordersList[i].notesLists=_this2.notesList[_this2.workordersList[i].id]),_this2.workordersList[i].pm&&_this2.workordersList[i].pm.id&&_this2.pmMap[_this2.workordersList[i].pm.id]&&_this2.pmMap[_this2.workordersList[i].pm.id].workorders&&_this2.pmMap[_this2.workordersList[i].pm.id].workorders.length>1&&(_this2.workordersList[i].previousExecution=_this2.toGetPreviousExecutedWo(_this2.pmMap[_this2.workordersList[i].pm.id].workorders,_this2.workordersList[i].createdTime,_this2.workordersList[i])),_this2.workordersList[i].trigger&&_this2.workordersList[i].trigger.id>0&&_this2.workordersList[i].pm&&_this2.workordersList[i].pm.id&&_this2.pmMap[_this2.workordersList[i].pm.id]?_this2.workordersList[i].triggerEnum=_this2.pmMap[_this2.workordersList[i].pm.id].triggers.find((function(trig){return trig.id===_this2.workordersList[i].trigger.id})).scheduleMsg:_this2.workordersList[i].previousExecution=0},i=0;i<this.workordersList.length;i++)_loop(i);return this.workordersList}return""},closedStatusId:function(){var id=this.$store.getters.getTicketStatusByLabel("Closed","workorder").id;return id?parseInt(id):id},workorderId:function(){return this.$route.query.workorderId},ticketStatusValue:function(){return this.workorder&&this.workorder.status&&this.workorder.status.id&&this.$store.getters.getTicketStatus(this.workorder.status.id,"workorder")||""},showImage:function(){return!0===this.$route.query.showImage||"true"===this.$route.query.showImage},showAttachements:function(){return!0===this.$route.query.showAttachements||"true"===this.$route.query.showAttachements},showComments:function(){return!0===this.$route.query.showComments||"true"===this.$route.query.showComments},showHistory:function(){var checkHistory=this.$getProperty(this,"$route.query.showHistory",null);return!0===checkHistory||"true"===checkHistory},showSignature:function(){var toShowSign=this.$getProperty(this.$route,"query.showSignature",null);return!0===toShowSign||"true"===toShowSign},useSiteLogo:function(){var toUseSiteLogo=this.$getProperty(this.$route,"query.useSiteLogo",null);return!0===toUseSiteLogo||"true"===toUseSiteLogo},getFacilioLogoURL:function(){var brandConfig=this.brandConfig,logo=this.$getProperty(brandConfig,"logo",null);return logo},showLogo:function(){var brandConfig=this.brandConfig,showLogoInPDF=this.$getProperty(brandConfig,"showLogoInPDF",!0);return showLogoInPDF},brandConfig:function(){return window.brandConfig}}),methods:{loadBuildings:function(wolist){var _this3=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().mark((function _callee2(){var buildingIds,_yield$getFieldOption,options;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(buildingIds=[],buildingIds=wolist.filter((function(wo){var _wo$resource,_wo$resource2,_wo$resource3;return(2===(null===(_wo$resource=wo.resource)||void 0===_wo$resource?void 0:_wo$resource.resourceType)||2!==(null===(_wo$resource2=wo.resource)||void 0===_wo$resource2?void 0:_wo$resource2.spaceType))&&(null===(_wo$resource3=wo.resource)||void 0===_wo$resource3?void 0:_wo$resource3.buildingId)>0})).map((function(wo){return String(wo.resource.buildingId)})),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(buildingIds)){_context2.next=8;break}return _context2.next=5,(0,util_picklist__WEBPACK_IMPORTED_MODULE_40__/* .getFieldOptions */._K)({field:{lookupModuleName:"building",skipDeserialize:!0},defaultIds:buildingIds,perPage:buildingIds.length});case 5:_yield$getFieldOption=_context2.sent,options=_yield$getFieldOption.options,_this3.buildingsList=options;case 8:case"end":return _context2.stop()}}),_callee2)})))()},toGetPreviousExecutedWo:function(wos,currentWoCreatedTime,currentWo){var workOrders=wos.filter((function(i){return i.resource.id===currentWo.resource.id}));if(workOrders&&workOrders.length>1){var a=[];workOrders.forEach((function(d){a.push(d.createdTime)}));var lastDelta,result=0;return a.some((function(item){if(currentWoCreatedTime!==item&&currentWoCreatedTime>item){var delta=Math.abs(currentWoCreatedTime-item);if(delta>lastDelta)return 0;result=item,lastDelta=delta}})),result}return 0},isPmAvail:function(wo){var _wo$pm,_pmMap$wo$pm$id,pmMap=this.pmMap;return!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(pmMap)&&(null===wo||void 0===wo||null===(_wo$pm=wo.pm)||void 0===_wo$pm?void 0:_wo$pm.id)&&(null===(_pmMap$wo$pm$id=pmMap[wo.pm.id])||void 0===_pmMap$wo$pm$id||null===(_pmMap$wo$pm$id=_pmMap$wo$pm$id.workorders)||void 0===_pmMap$wo$pm$id?void 0:_pmMap$wo$pm$id.length)>1&&(null===wo||void 0===wo?void 0:wo.previousExecution)>0},isScheduleMsgAvail:function(wo){var _pmMap$wo$pm$id2,_wo$pm2,pmMap=this.pmMap;return!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(pmMap)&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(null===(_pmMap$wo$pm$id2=pmMap[null===(_wo$pm2=wo.pm)||void 0===_wo$pm2?void 0:_wo$pm2.id])||void 0===_pmMap$wo$pm$id2?void 0:_pmMap$wo$pm$id2.scheduleMsg)},loadTaskAttachments:function(){var _this4=this,promises=[];if(this.showImage&&this.tasksList)for(var taskObj in this.tasksList)for(var sectionId in this.tasksList[taskObj].tasks)this.tasksList[taskObj].tasks[sectionId].forEach((function(task){(null===task||void 0===task?void 0:task.noOfAttachments)>0&&promises.push(_this4.loadAttachments(task))}));promises.length?Promise.all([].concat(promises)).then((function(){_this4.reportLoading=!1,setTimeout((function(){_this4.print()}),2e3)})):(this.reportLoading=!1,setTimeout((function(){_this4.print()}),1e3))},loadAttachments:function(task){var self=this;return self.loading=!0,this.$http.get("/attachment?module=taskattachments&recordId="+task.id).then((function(response){if(200===response.status){self.loading=!1;var attachments=response.data.attachments?response.data.attachments:[];if(attachments.length>0){self.taskAttachments[task.parentTicketId]||(self.taskAttachments[task.parentTicketId]={attachments:[]});var _step,taskAttachment={},_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(attachments);try{for(_iterator.s();!(_step=_iterator.n()).done;){var attachment=_step.value;attachment.previewUrl=attachment.previewUrl+"?width=360&height=360",1===attachment.type?taskAttachment.before=attachment.previewUrl:2===attachment.type&&(taskAttachment.after=attachment.previewUrl),taskAttachment.uploadedTime=attachment.uploadedTime}}catch(err){_iterator.e(err)}finally{_iterator.f()}taskAttachment.subject=task.subject,self.taskAttachments[task.parentTicketId].attachments.push(taskAttachment)}}}))},loadWoAttachments:function(woId){var self=this;return this.$http.get("/attachment?module=ticketattachments&recordId="+woId).then((function(response){var attachments=response.data.attachments?response.data.attachments:[];attachments.length&&(self.woAttachments[woId]={images:[],docs:[]},attachments.forEach((function(attachment){attachment.contentType.startsWith("image/")?(attachment.previewUrl=attachment.previewUrl+"?width=360&height=360",self.woAttachments[woId].images.push(attachment)):self.woAttachments[woId].docs.push(attachment)})))})).catch((function(error){error&&(self.woAttachments={})}))},updateWoActions:function(){this.loadactivitie(),this.isStateFlowEnabled&&this.fetchAvailableStates()},loadReport:function(){var _this5=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().mark((function _callee3(){var self,workorderIds,ids,data,promise2,promise3,promises,$route,viewName,params,_yield$API$fetchAll,list,siteIds,_yield$API$fetchAll2,siteList,workorders,pmIDs,i;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return self=_this5,workorderIds=_this5.$route.query.workorderId.split(","),ids=workorderIds.map(String),data={id:ids},{viewname:"all",page:"1",id:data.id},promise2=self.$http.post("/v2/tasks/parents",{id:ids}),promise3=self.$http.post("/v2/notes/parent/noteList",{notesIds:ids}),promises=[],_this5.showAttachements&&workorderIds.forEach((function(id){
// promises.push()
_this5.loadWoAttachments(id)})),_this5.showHistory&&workorderIds.forEach((function(id){_this5.loadHistory(id)})),$route=self.$route,viewName=_this5.$getProperty($route,"query.viewName",null),params={moduleName:"workorder",viewName:viewName,filters:JSON.stringify({id:{operatorId:9,value:ids}}),page:1,perPage:50,withoutCustomButtons:!0},_context3.next=15,_facilio_api__WEBPACK_IMPORTED_MODULE_38__/* .API */.bl.fetchAll("workorder",params);case 15:if(_yield$API$fetchAll=_context3.sent,list=_yield$API$fetchAll.list,!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(list)){_context3.next=21;break}_this5.$message.error("No Workorders to print"),_context3.next=32;break;case 21:return _this5.workordersList=lodash_clone__WEBPACK_IMPORTED_MODULE_37___default()(list),siteIds=[],list.forEach((function(wo){return siteIds.push(String(wo.siteId))})),_context3.next=26,_facilio_api__WEBPACK_IMPORTED_MODULE_38__/* .API */.bl.fetchAll("site",{page:1,filters:JSON.stringify({id:{operatorId:9,value:siteIds}})});case 26:if(_yield$API$fetchAll2=_context3.sent,siteList=_yield$API$fetchAll2.list,siteList.forEach((function(site){var _ref=site||{},siteId=_ref.siteId;siteId&&(_this5.logoCollection[siteId]=_this5.useSiteLogo&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(site.avatarUrl)?site.avatarUrl:_this5.$org.logoUrl,_this5.siteNameCollection[siteId]=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(site.name)?"---":site.name)})),_this5.loadBuildings(list),workorders=_this5.workordersList.filter((function(b){return b.pm&&null!==b.pm})),workorders&&workorders.length){for(pmIDs=new Set,i=0;i<workorders.length;i++)workorders[i].pm&&workorders[i].pm.id&&pmIDs.add(workorders[i].pm.id);pmIDs.size>0&&pmIDs.forEach((function(pmId){promises.push(_this5.$http.get("/workorder/preventiveMaintenanceSummary?id="+parseInt(pmId)))}))}case 32:promises.length>0?Promise.all([].concat(promises)).then((function(value){value.forEach((function(d){self.pmMap[d.data.preventivemaintenance.id]=d.data.preventivemaintenance})),Object.keys(self.pmMap).length&&Promise.all([promise3,promise2]).then((function(values){self.notesList=values[0].data.result.notesList,self.tasksList=values[1].data.result.tasks,self.setPrerequisites(values[1]),self.loadTaskAttachments()}))})):Promise.all([promise3,promise2]).then((function(values){self.notesList=values[0].data.result.notesList,self.tasksList=values[1].data.result.tasks,self.setPrerequisites(values[1]),self.loadTaskAttachments()}));case 33:case"end":return _context3.stop()}}),_callee3)})))()},setPrerequisites:function(response){var self=this;if(self.preRequestList=response.data.result.preRequests,self.preRequestList)for(var woId in self.preRequestList){var preRequestList=self.preRequestList[woId].tasks;if(preRequestList)for(var idx in preRequestList)for(var idx2 in preRequestList[idx])preRequestList[idx][idx2].inputValue="1"===preRequestList[idx][idx2].inputValue?preRequestList[idx][idx2].truevalue:"0"===preRequestList[idx][idx2].inputValue?preRequestList[idx][idx2].falsevalue:null,preRequestList[idx][idx2].status&&preRequestList[idx][idx2].status.id!==self.openStatusId?preRequestList[idx][idx2].status={type:"CLOSED",typeCode:2,id:self.closedStatusId}:preRequestList[idx][idx2].status={type:"OPEN",typeCode:1,id:self.openStatusId},-1===preRequestList[idx][idx2].inputTime&&(preRequestList[idx][idx2].inputTime=null)}},canShowTaskResource:function(wo){return wo.resource&&1===wo.resource.resourceType},print:function(){this.$nextTick((function(){
// this.$emit('printed')
window.print()}))},fetchWo:function(force){this.$store.dispatch("workorder/fetchWorkOrder",{id:this.openWorkorderId,force:force})},getPMType:function(type){return this.tickettype[type]},checkOptionsLength:function(options){return options.length<=2&&!options.some((function(option){return option.length>10}))},workorderstatus:function(id){var priority=this.getTicketPriority(id).displayName;return priority||""},ticketstatusvalue:function(id){if(null!==id){var status=this.$store.getters.getTicketStatus(id,"workorder").status;return status||""}return""},loadComments:function(){var self=this;if(self.loading=!0,this.showComments&&this.comments)return this.$http.get("/note/get?module=ticketnotes&parentId="+this.workorderId).then((function(response){self.loading=!1,self.comments=response.data&&response.data.notes?response.data.notes:[]})).catch((function(error){error&&(self.loading=!1,self.comments=[])}))},loadHistory:function(woId){var _this6=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().mark((function _callee4(){var _yield$_this6$$http$g,data,activity;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(_this6.loading=!0,_this6.modulename="workorders",!_this6.showHistory){_context4.next=10;break}return _context4.next=5,_this6.$http.get("/v2/workorders/activity?workOrderId="+woId);case 5:_yield$_this6$$http$g=_context4.sent,data=_yield$_this6$$http$g.data,activity=_this6.$getProperty(data,"result.activity",null),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(activity)||(_this6.history[woId]=activity),_this6.loading=!1;case 10:case"end":return _context4.stop()}}),_callee4)})))()},loadFields:function(){var self=this;self.loading=!0,self.$http.get("/module/fields?moduleName=workorder").then((function(response){self.fields=response.data.fields,self.loading=!1}))},getTaskAndSectionLists:function(woTasks){var self=this;if(self.tl={},self.taskL=[],self.sec={},woTasks&&woTasks.tasks&&Object.keys(woTasks.tasks).length>0){if(-1!==woTasks.tasks[Object.keys(woTasks.tasks)[0]][0].sequence){var unsorted=[];Object.keys(woTasks.tasks).forEach((function(key){unsorted.push({secId:key,seq:woTasks.tasks[key][0].sequence})}));var sorted=self.sort(unsorted),newTaskList=[];sorted.forEach((function(ele){newTaskList.push({sectionId:ele.secId,taskList:woTasks.tasks[ele.secId]})})),newTaskList=newTaskList.map((function(obj,objInx){var tasks=obj.taskList.map((function(task,index){return task.status&&task.status.id!==self.openStatusId?task.status={type:"CLOSED",typeCode:2,id:self.closedStatusId}:task.status={type:"OPEN",typeCode:1,id:self.openStatusId},-1===task.inputTime&&(task.inputTime=null),task}));return obj.taskList=tasks,obj})),
// self.newTaskList = newTaskList
self.taskL=newTaskList,self.sequencedData=!0}else self.sequencedData=!1;
// self.taskList = woTasks.tasks ? woTasks.tasks : {}
for(var idx in self.tl=woTasks.tasks?woTasks.tasks:{},self.tl)for(var idx2 in self.tl[idx])self.tl[idx][idx2].status&&self.tl[idx][idx2].status.id!==self.openStatusId?self.tl[idx][idx2].status={type:"CLOSED",typeCode:2,id:self.closedStatusId}:self.tl[idx][idx2].status={type:"OPEN",typeCode:1,id:self.openStatusId},-1===self.tl[idx][idx2].inputTime&&(self.tl[idx][idx2].inputTime=null);return self.sec=woTasks.sections?woTasks.sections:{},!0}return!1},loadBuilding:function(workorder){if(this.workorder.resource&&(2===this.workorder.resource.resourceType||2!==this.workorder.resource.spaceType)&&this.workorder.resource.buildingId>0){var self=this;self.loading=!0,self.$http.get("/building/"+this.workorder.resource.buildingId).then((function(response){self.building=response.data.building,self.loading=!1}))}},resourceLabel:function(_ref2){var pmCreationType=_ref2.pmCreationType,pmResourceLabel=_ref2.pmResourceLabel;if(1===pmCreationType)return pmResourceLabel},sort:function(arr){for(var len=arr.length,i=len-1;i>=0;i--)for(var j=1;j<=i;j++)if(arr[j-1].seq>arr[j].seq){var temp=arr[j-1];arr[j-1]=arr[j],arr[j]=temp}return arr},loadReadingFieldUnits:function(){var _this7=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().mark((function _callee5(){return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_facilio_api__WEBPACK_IMPORTED_MODULE_38__/* .API */.bl.get("v2/getReadingFieldUnits").then((function(response){if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(response.error)&&response.data){var _ref3=response.data||{},readingFieldUnits=_ref3.readingFieldUnits,_ref4=readingFieldUnits||{},MetricsWithUnits=_ref4.MetricsWithUnits;_this7.metricWithUnits=MetricsWithUnits}}));case 1:case"end":return _context5.stop()}}),_callee5)})))()},
// Helper function to return the unit (in short form) with unitId 'readingFieldUnit'.
getReadingFieldUnit:function(readingFieldMetricId,readingFieldUnit){if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(readingFieldMetricId)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(readingFieldUnit))return"--";var readingFieldUnitSymbol="";if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(this.metricWithUnits)){var currentMetricId=Object.keys(this.metricWithUnits).find((function(metricUnitKey){return metricUnitKey==readingFieldMetricId})),readingFieldUnits=this.metricWithUnits[currentMetricId];Array.isArray(readingFieldUnits)&&readingFieldUnits.forEach((function(item){item.unitId===readingFieldUnit&&(readingFieldUnitSymbol=item.symbol)}))}return readingFieldUnitSymbol},
// Helper function to convert the inputValue (in SI Unit) to the format toUnit_1 : touUnit_2.
// Eg. inputValue (in seconds) = 3660 to "1 h 1 min", where unit_1 is hours, unit_2 is minutes.
convertSIUnitValueToUnit1Unit2Format:function convertSIUnitValueToUnit1Unit2Format(readingFieldMetricId,
// metric ID
convertedToUnitId_1,
// unitId required for conversion
convertedToUnitId_2,
// unitId required for conversion
inputValue){if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(readingFieldMetricId)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(convertedToUnitId_1)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(convertedToUnitId_2))return"";var toUnit_1={},toUnit_2={};if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_41__/* .isEmpty */.xb)(this.metricWithUnits)){var currentMetricId=Object.keys(this.metricWithUnits).find((function(metricUnitKey){return metricUnitKey==readingFieldMetricId})),readingFieldUnits=this.metricWithUnits[currentMetricId];Array.isArray(readingFieldUnits)&&readingFieldUnits.forEach((function(item){item.unitId===convertedToUnitId_1&&(toUnit_1=item),item.unitId===convertedToUnitId_2&&(toUnit_2=item)}));
// conversion starts here
// get the fromSiUnit, toSiUnit expressions of unit_1
var unit_1_expression_fromSiUnit=toUnit_1.fromSiUnit?toUnit_1.fromSiUnit:"",unit_1_expression_toSiUnit=toUnit_1.toSiUnit?toUnit_1.toSiUnit:"";
// replace the occurrences of 'si' with inputValue
unit_1_expression_fromSiUnit=unit_1_expression_fromSiUnit.replaceAll("si",inputValue);
// evaluate the expression
var unit_1_value=Math.floor(eval(unit_1_expression_fromSiUnit));
// replace the occurrences of 'this' with unit_1_value
unit_1_expression_toSiUnit=unit_1_expression_toSiUnit.replaceAll("this",unit_1_value);
// get the fromSiUnit expression of unit_2
var unit_2_expression=toUnit_2.fromSiUnit?toUnit_2.fromSiUnit:"",unit_2_val=Math.abs(inputValue-Math.floor(eval(unit_1_expression_toSiUnit)));
// evaluate the expression - subtract value of unit_1_expression_toSiUnit from inputValue
// replace the occurrences of 'si' with unit_2_val
unit_2_expression=unit_2_expression.replaceAll("si",unit_2_val);
// evaluate the expression
var unit_2_value=Math.floor(eval(unit_2_expression));return unit_1_value+" "+toUnit_1.symbol+" "+unit_2_value+" "+toUnit_2.symbol}}},components:{Avatar:_Avatar__WEBPACK_IMPORTED_MODULE_26__["default"],UserAvatar:_avatar_User__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */.Z,Attachments:_relatedlist_SummaryAttachment__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */.Z,Activities:_relatedlist_Activities2__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */.Z,Comments:_relatedlist_Comments2__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z,Toast:quasar__WEBPACK_IMPORTED_MODULE_39__/* .Toast */.FN,Ripple:quasar__WEBPACK_IMPORTED_MODULE_39__/* .Ripple */.HW,QBtn:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QBtn */.OV,QIcon:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QIcon */.oF,QModal:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QModal */.hc,QModalLayout:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QModalLayout */.Zm,QToolbar:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QToolbar */.UX,QToolbarTitle:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QToolbarTitle */.OU,QSearch:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QSearch */.nV,QList:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QList */.tu,QItem:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QItem */.ry,QItemSide:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QItemSide */.hJ,QItemMain:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QItemMain */.Ui,QSelect:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QSelect */.zO,QField:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QField */.Hd,QDatetime:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QDatetime */.fB,QItemSeparator:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QItemSeparator */.Xu,QChip:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QChip */.gO,FSelect:_fields_FSelect__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */.Z,QTabs:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QTabs */.Ss,QTab:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QTab */.zN,QOptionGroup:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QOptionGroup */._W,QPopover:quasar__WEBPACK_IMPORTED_MODULE_39__/* .QPopover */.oe,Steps:_relatedlist_Steps__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */.Z,Subheader:_Subheader__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */.Z,Alert:quasar__WEBPACK_IMPORTED_MODULE_39__/* .Alert */.bZ,AssetAvatar:_avatar_Asset__WEBPACK_IMPORTED_MODULE_30__["default"],FDialog:_FDialogNew__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */.Z,TaskSpaceAssetChooser:_SpaceAssetChooser__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */.Z,MobileAttachment:_MobileAttachment2__WEBPACK_IMPORTED_MODULE_33__/* ["default"] */.Z,FAssignment:_FAssignment__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */.Z,WorkHours:pages_workorder_widgets_dialogs_WorkHours__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */.Z},filters:{getUser:function(id,users){var userObj=users.find((function(user){return user.id===id}));return userObj||{name:"System"}},options:function(jsonobj,type){var array=[];if("category"===type||"priority"===type)for(var jsonkey in jsonobj){var val=jsonobj[jsonkey];array.push({label:val,value:parseInt(jsonkey)})}else if("user"===type||"space"===type)for(var key in jsonobj)array.push({label:jsonobj[key].name,value:jsonobj[key].id});return array}}}},
/***/308486:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */__webpack_require__(450886);
/* harmony import */var _facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(990260),src_pages_purchase_po_mixin_poMixin__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(472646);
/* harmony default export */__webpack_exports__.Z={mixins:[src_pages_purchase_po_mixin_poMixin__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z],methods:{getVendorQuotesLineItems:function(val){return this.$getProperty(val,"vendorQuotesLineItems")},uom:function(val){var unitOfMeasure=this.$getProperty(val,"requestForQuotationLineItem.unitOfMeasure");return this.uomEnumMap[unitOfMeasure]},getItemName:function(val){var _ref=val||{},inventoryTypeEnum=_ref.inventoryTypeEnum,inventoryTypeVsKeys={ITEM:"itemType.name",TOOL:"toolType.name",SERVICE:"service.name",DEFAULT:"description"},nameKey=inventoryTypeVsKeys[inventoryTypeEnum]||inventoryTypeVsKeys["DEFAULT"];return this.$getProperty(val,nameKey,"---")},getItemDescription:function(val){var _ref2=val||{},inventoryTypeEnum=_ref2.inventoryTypeEnum;return"OTHERS"===inventoryTypeEnum?" ":this.$getProperty(val,"description"," ")},getRemarks:function(val){return this.$getProperty(val,"remarks","---")},getAmount:function(val){var _ref3=val||{},quantity=_ref3.quantity,counterPrice=_ref3.counterPrice,taxAmount=_ref3.taxAmount,amount=quantity*counterPrice;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(taxAmount)||(amount+=taxAmount),val.amount=amount,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(amount)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(counterPrice)?"---":this.$d3.format(",.2f")(amount)},getTotalAmount:function(vendorQuote){var _ref4=vendorQuote||{},vendorQuotesLineItems=_ref4.vendorQuotesLineItems,totalAmount=this.$d3.sum(vendorQuotesLineItems.map((function(vendorQuoteLineItem){return vendorQuoteLineItem.amount})));return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(totalAmount)?"---":this.$d3.format(",.2f")(totalAmount)},getCounterPrice:function(val){var counterPrice=this.$getProperty(val,"counterPrice");return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(counterPrice)?"---":this.$d3.format(",.2f")(counterPrice)},getUnitPrice:function(val){var unitPrice=this.$getProperty(val,"unitPrice");return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(unitPrice)?"---":this.$d3.format(",.2f")(unitPrice)},totalQuotedAmount:function(vendorQuotesLineItems){var totalAmount=this.$d3.sum(vendorQuotesLineItems.map((function(vendorQuoteLineItem){var _ref5=vendorQuoteLineItem||{},quantity=_ref5.quantity,counterPrice=_ref5.counterPrice,taxAmount=_ref5.taxAmount,amount=quantity*counterPrice;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(taxAmount)||(amount+=taxAmount),amount})));return totalAmount?this.$d3.format(",.2f")(totalAmount):"---"}}}},
/***/28341:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(260228)
/* harmony import */;var chartTypes=[{label:"Pie",ct:"pie",icon:'<svg width="20px" height="16px" viewBox="0 0 20 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>pie chart</title><desc>Created with Sketch.</desc><defs><circle id="path-1" cx="10" cy="8" r="5"></circle><mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="10" height="10" fill="white"><use xlink:href="#path-1"></use></mask><circle id="path-3" cx="10" cy="8" r="5"></circle><mask id="mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="10" height="10" fill="white"><use xlink:href="#path-3"></use></mask</defs><g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-633.000000, -98.000000)"><g id="pie-chart" transform="translate(633.000000, 98.000000)"><rect id="Rectangle-8" stroke="#EF508F" x="0.5" y="0.5" width="19" height="15" rx="1.20000005"></rect><circle id="Oval" fill="#EF508F" transform="translate(10.000000, 8.000000) rotate(-15.000000) translate(-10.000000, -8.000000) " cx="10" cy="8" r="5"></circle><use id="#FFC53A:40%" stroke="#FA90BA" mask="url(#mask-2)" stroke-width="10" stroke-dasharray="12.57142857142857,50" transform="translate(10.000000, 8.000000) rotate(-15.000000) translate(-10.000000, -8.000000) " xlink:href="#path-1"></use><use id="#FAFF81:0.2" stroke="#FFC4DB" mask="url(#mask-4)" stroke-width="10" stroke-dasharray="6.285714285714286,50" transform="translate(10.000000, 8.000000) rotate(-15.000000) translate(-10.000000, -8.000000) " xlink:href="#path-3"></use></g></g></svg>',rule:function(report){if(report.data.length>1)
// multi series data
return!1;var data=report.data[0].data;return(!data.length||!Array.isArray(data[0].value))&&-1===report.options.xaxis.datatype.indexOf("date")}},{label:"Doughnut",ct:"doughnut",icon:'<svg id="icon-donut" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#49bfda" style="fill: var(--color5, #49bfda)" d="M24.4 16.2v.8l5 .5c.4-3.3-.4-7-2.8-9.7-2-2.7-5-4.4-8.2-4.8l-.6 5.4c3.8.6 6.6 4 6.6 7.8z"></path><path fill="#ef7c80" style="fill: var(--color33, #ef7c80)" d="M16.4 8.2h1L18 3c-3.4-.4-7 .4-10 2.8-5.6 4.4-6.5 12.8-2 18.5.2 0 0 0 .2.2l4-3.2c-1-1.4-1.7-3-1.7-5 0-4.5 3.5-8 8-8z"></path><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M16.4 24.2c-2.4 0-4.5-1-6-2.7l-4 3.2c4.7 5.3 12.6 6 18 1.5 2.8-2 4.4-5 5-8.2l-5.2-.6c-.4 4-3.7 6.8-7.8 6.8z"></path><path fill="#fff" style="fill: var(--color8, #fff)" d="M18 3h.5L18 8.4h-.6L18 3zm11.4 14.5v.5l-5-.6V17l5 .5zm-19.2 3.7l.3.3-4 3.3-.3-.4 4-3.2z"></path></svg>',rule:function(report){if(report.data.length>1)
// multi series data
return!1;var data=report.data[0].data;return(!data.length||!Array.isArray(data[0].value))&&-1===report.options.xaxis.datatype.indexOf("date")}},{label:"Bar",ct:"bar",icon:'<svg id="icon-bar-flat" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#ef7c80" style="fill: var(--color33, #ef7c80)" d="M4.6 5.3H11v22H4.6v-22z"></path><path fill="#49bfda" style="fill: var(--color5, #49bfda)" d="M13.4 10.2h6.4v17.2h-6.4V10.2z"></path><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M22.3 12.8h6.4v14.6h-6.4V12.8z"></path></svg>',rule:function(report){if(report.data.length>1)
// multi series data
return!1;var data=report.data[0].data,options=report.data[0].options;return(!data.length||!Array.isArray(data[0].value))&&!options.is_highres_data}},{label:"Stacked Bar",ct:"stackedbar",icon:'<svg id="icon-stacked" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#ef7c80" style="fill: var(--color41, #ef7c80)" d="M4.6 4.5H11v7.2H4.6V4.5z"></path><path fill="#b8d15c" style="fill: var(--color5, #b8d15c)" d="M4.6 11.7H11V19H4.6v-7.3z"></path><path fill="#49bfda" style="fill: var(--color7, #49bfda)" d="M4.6 19H11v8H4.6v-8z"></path><path fill="#ef7c80" style="fill: var(--color41, #ef7c80)" d="M13.4 9.3h6.4V15h-6.4V9.2z"></path><path fill="#b8d15c" style="fill: var(--color5, #b8d15c)" d="M13.4 15h6.4v5.5h-6.4V15z"></path><path fill="#49bfda" style="fill: var(--color7, #49bfda)" d="M13.4 20.5h6.4V27h-6.4v-6.5z"></path><path fill="#ef7c80" style="fill: var(--color41, #ef7c80)" d="M22.2 13.3h6.4V18h-6.4v-4.7z"></path><path fill="#b8d15c" style="fill: var(--color5, #b8d15c)" d="M22.2 18h6.4v4h-6.4v-4z"></path><path fill="#49bfda" style="fill: var(--color7, #49bfda)" d="M22.2 22h6.4v5h-6.4v-5z"></path></svg>',rule:function(report){if(report.data.length>1)
// multi series data
return!report.data[0].options.is_highres_data;var data=report.data[0].data,options=report.data[0].options;return!(data.length&&!Array.isArray(data[0].value))&&!options.is_highres_data}},{label:"Grouped Bar",ct:"groupedbar",icon:'<svg id="icon-stacked" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#ef7c80" style="fill: var(--color41, #ef7c80)" d="M4.6 4.5H11v7.2H4.6V4.5z"></path><path fill="#b8d15c" style="fill: var(--color5, #b8d15c)" d="M4.6 11.7H11V19H4.6v-7.3z"></path><path fill="#49bfda" style="fill: var(--color7, #49bfda)" d="M4.6 19H11v8H4.6v-8z"></path><path fill="#ef7c80" style="fill: var(--color41, #ef7c80)" d="M13.4 9.3h6.4V15h-6.4V9.2z"></path><path fill="#b8d15c" style="fill: var(--color5, #b8d15c)" d="M13.4 15h6.4v5.5h-6.4V15z"></path><path fill="#49bfda" style="fill: var(--color7, #49bfda)" d="M13.4 20.5h6.4V27h-6.4v-6.5z"></path><path fill="#ef7c80" style="fill: var(--color41, #ef7c80)" d="M22.2 13.3h6.4V18h-6.4v-4.7z"></path><path fill="#b8d15c" style="fill: var(--color5, #b8d15c)" d="M22.2 18h6.4v4h-6.4v-4z"></path><path fill="#49bfda" style="fill: var(--color7, #49bfda)" d="M22.2 22h6.4v5h-6.4v-5z"></path></svg>',rule:function(report){if(report.data.length>1)
// multi series data
return!report.data[0].options.is_highres_data;var data=report.data[0].data,options=report.data[0].options;return!(data.length&&!Array.isArray(data[0].value))&&!options.is_highres_data}},{label:"Progress",ct:"progress",icon:'<svg id="icon-bubble" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#999" style="fill: var(--color40, #999)" d="M.3 27.8h32v.8H.3v-.8z"></path><path fill="#999" style="fill: var(--color40, #999)" d="M.3 4H1v24H.4V4z"></path><path fill="#35c7e1" stroke="#136776" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color42, #136776), fill: var(--color41, #35c7e1)" d="M8.3 23.7C8.3 25 7.3 26 6 26s-2-1-2-2.4c0-1.3 1-2.3 2.3-2.3s2.3 1 2.3 2.3z"></path><path fill="#f57c7f" stroke="#cd4c4e" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color44, #cd4c4e), fill: var(--color43, #f57c7f)" d="M22 15c0 3-2.5 5.4-5.5 5.4S11 18 11 15c0-3.2 2.5-5.6 5.5-5.6S22 11.8 22 15z"></path><path fill="#b8e659" stroke="#688332" stroke-width=".5" stroke-miterlimit="10" style="stroke: var(--color46, #688332), fill: var(--color45, #b8e659)" d="M29.8 22c0 1.8-1.3 3-3 3s-3-1.2-3-3c0-1.6 1.4-3 3-3s3 1.4 3 3z"></path><path fill="#cecece" stroke="#999" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color40, #999), fill: var(--color39, #cecece)" d="M7.5 11.7C7.5 12.5 7 13 6 13s-1.4-.5-1.4-1.3.7-1.5 1.5-1.5 1.5.7 1.5 1.5z"></path></svg>',rule:function(report){if(report.data.length>1)
// multi series data
return!1;var data=report.data[0].data,options=report.data[0].options;return(!data.length||!Array.isArray(data[0].value))&&!options.is_highres_data}},{label:"Line",ct:"line",icon:'<svg id="icon-line3" viewBox="0 0 32 32" width="100%" height="100%"><path fill="none" stroke="#49bfda" stroke-width="2.4" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M4.2 25l6.8-8.3 5 5.3 6-7.6 6-2.5"></path><path fill="#fff" stroke="#49bfda" stroke-width="1.6" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M6.7 24c0 1-.7 2-1.7 2s-1.8-1-1.8-2S4 22.4 5 22.4s1.7.8 1.7 1.8zm6.3-7.2c0 1-1 1.8-2 1.8s-1.6-.8-1.6-1.8S10 15 11 15s2 .8 2 1.8zm5 5c0 1-1 1.8-1.8 1.8s-1.8-.8-1.8-1.8.8-1.7 1.8-1.7S18 21 18 22zm6.3-7.3c0 1-.8 1.7-1.7 1.7s-1.8-.7-1.8-1.7.8-1.8 1.8-1.8 1.7.8 1.7 1.8z"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M.8 27h30v.8H.7V27zm0-24h.8v24H.8V3z"></path></svg>',rule:function(report){if(report.data.length>1)
// multi series data
return!report.data[0].options.is_highres_data;var options=report.data[0].options;return-1!==options.xaxis.datatype.indexOf("date")}},{label:"Area",ct:"area",icon:'<svg id="icon-area1" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M.8 27l14-13.8 13 10.2 3.4-.2v4z"></path><path fill="none" stroke="#7e9649" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color4, #7e9649)" d="M.6 27l14-13.8 12.8 10.2 3.4-.2v4"></path><path fill="#49bfda" opacity=".8" style="fill: var(--color5, #49bfda)" d="M.8 12.2l9.2 11 5.4-5.2 12 9.4L.7 27z"></path><path fill="none" stroke="#1f7d8e" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color6, #1f7d8e)" d="M.8 12.2l9.4 11.3 5.4-5.4 11.7 9.3"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M0 27h32v.8H0V27zM0 3h.8v24H0V3z"></path></svg>',rule:function(report){if(report.data.length>1)
// multi series data
return!report.data[0].options.is_highres_data;var options=report.data[0].options;return-1!==options.xaxis.datatype.indexOf("date")}},{label:"Scatter",ct:"scatter",icon:'<svg id="icon-area1" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M.8 27l14-13.8 13 10.2 3.4-.2v4z"></path><path fill="none" stroke="#7e9649" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color4, #7e9649)" d="M.6 27l14-13.8 12.8 10.2 3.4-.2v4"></path><path fill="#49bfda" opacity=".8" style="fill: var(--color5, #49bfda)" d="M.8 12.2l9.2 11 5.4-5.2 12 9.4L.7 27z"></path><path fill="none" stroke="#1f7d8e" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color6, #1f7d8e)" d="M.8 12.2l9.4 11.3 5.4-5.4 11.7 9.3"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M0 27h32v.8H0V27zM0 3h.8v24H0V3z"></path></svg>',rule:function(report){if(report.data.length>1)
// multi series data
return!report.data[0].options.is_highres_data;var options=report.data[0].options;return-1!==options.xaxis.datatype.indexOf("date")}},{label:"Boolean",ct:"boolean",icon:'<svg id="icon-area1" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M.8 27l14-13.8 13 10.2 3.4-.2v4z"></path><path fill="none" stroke="#7e9649" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color4, #7e9649)" d="M.6 27l14-13.8 12.8 10.2 3.4-.2v4"></path><path fill="#49bfda" opacity=".8" style="fill: var(--color5, #49bfda)" d="M.8 12.2l9.2 11 5.4-5.2 12 9.4L.7 27z"></path><path fill="none" stroke="#1f7d8e" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color6, #1f7d8e)" d="M.8 12.2l9.4 11.3 5.4-5.4 11.7 9.3"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M0 27h32v.8H0V27zM0 3h.8v24H0V3z"></path></svg>',rule:function(report){var options=report.data[0].options;return!(!options.is_highres_data||-1===options.xaxis.datatype.indexOf("date")||"boolean"!==options.y1axis.datatype)}},{label:"Timeseries",ct:"timeseries",icon:'<svg id="icon-line3" viewBox="0 0 32 32" width="100%" height="100%"><path fill="none" stroke="#49bfda" stroke-width="2.4" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M4.2 25l6.8-8.3 5 5.3 6-7.6 6-2.5"></path><path fill="#fff" stroke="#49bfda" stroke-width="1.6" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M6.7 24c0 1-.7 2-1.7 2s-1.8-1-1.8-2S4 22.4 5 22.4s1.7.8 1.7 1.8zm6.3-7.2c0 1-1 1.8-2 1.8s-1.6-.8-1.6-1.8S10 15 11 15s2 .8 2 1.8zm5 5c0 1-1 1.8-1.8 1.8s-1.8-.8-1.8-1.8.8-1.7 1.8-1.7S18 21 18 22zm6.3-7.3c0 1-.8 1.7-1.7 1.7s-1.8-.7-1.8-1.7.8-1.8 1.8-1.8 1.7.8 1.7 1.8z"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M.8 27h30v.8H.7V27zm0-24h.8v24H.8V3z"></path></svg>',rule:function(report){var options=report.data[0].options;return-1!==options.xaxis.datatype.indexOf("date")}},{label:"Heatmap",ct:"heatMap",icon:'<svg id="icon-bubble" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#999" style="fill: var(--color40, #999)" d="M.3 27.8h32v.8H.3v-.8z"></path><path fill="#999" style="fill: var(--color40, #999)" d="M.3 4H1v24H.4V4z"></path><path fill="#35c7e1" stroke="#136776" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color42, #136776), fill: var(--color41, #35c7e1)" d="M8.3 23.7C8.3 25 7.3 26 6 26s-2-1-2-2.4c0-1.3 1-2.3 2.3-2.3s2.3 1 2.3 2.3z"></path><path fill="#f57c7f" stroke="#cd4c4e" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color44, #cd4c4e), fill: var(--color43, #f57c7f)" d="M22 15c0 3-2.5 5.4-5.5 5.4S11 18 11 15c0-3.2 2.5-5.6 5.5-5.6S22 11.8 22 15z"></path><path fill="#b8e659" stroke="#688332" stroke-width=".5" stroke-miterlimit="10" style="stroke: var(--color46, #688332), fill: var(--color45, #b8e659)" d="M29.8 22c0 1.8-1.3 3-3 3s-3-1.2-3-3c0-1.6 1.4-3 3-3s3 1.4 3 3z"></path><path fill="#cecece" stroke="#999" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color40, #999), fill: var(--color39, #cecece)" d="M7.5 11.7C7.5 12.5 7 13 6 13s-1.4-.5-1.4-1.3.7-1.5 1.5-1.5 1.5.7 1.5 1.5z"></path></svg>',rule:function(report){var options=report.data[0].options;return-1!==options.xaxis.datatype.indexOf("date")&&"hoursofdayonly"===options.xaxis.operation}},{label:"Treemap",ct:"treemap",icon:'<svg id="icon-bubble" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#999" style="fill: var(--color40, #999)" d="M.3 27.8h32v.8H.3v-.8z"></path><path fill="#999" style="fill: var(--color40, #999)" d="M.3 4H1v24H.4V4z"></path><path fill="#35c7e1" stroke="#136776" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color42, #136776), fill: var(--color41, #35c7e1)" d="M8.3 23.7C8.3 25 7.3 26 6 26s-2-1-2-2.4c0-1.3 1-2.3 2.3-2.3s2.3 1 2.3 2.3z"></path><path fill="#f57c7f" stroke="#cd4c4e" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color44, #cd4c4e), fill: var(--color43, #f57c7f)" d="M22 15c0 3-2.5 5.4-5.5 5.4S11 18 11 15c0-3.2 2.5-5.6 5.5-5.6S22 11.8 22 15z"></path><path fill="#b8e659" stroke="#688332" stroke-width=".5" stroke-miterlimit="10" style="stroke: var(--color46, #688332), fill: var(--color45, #b8e659)" d="M29.8 22c0 1.8-1.3 3-3 3s-3-1.2-3-3c0-1.6 1.4-3 3-3s3 1.4 3 3z"></path><path fill="#cecece" stroke="#999" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color40, #999), fill: var(--color39, #cecece)" d="M7.5 11.7C7.5 12.5 7 13 6 13s-1.4-.5-1.4-1.3.7-1.5 1.5-1.5 1.5.7 1.5 1.5z"></path></svg>',disabled:!0,rule:function(report){if(report.data.length>1)
// multi series data
return!1;var data=report.data[0].data;return(!data.length||!Array.isArray(data[0].value))&&-1===report.options.xaxis.datatype.indexOf("date")}},{label:"Regression",ct:"regression",icon:'<svg id="icon-bubble" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#999" style="fill: var(--color40, #999)" d="M.3 27.8h32v.8H.3v-.8z"></path><path fill="#999" style="fill: var(--color40, #999)" d="M.3 4H1v24H.4V4z"></path><path fill="#35c7e1" stroke="#136776" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color42, #136776), fill: var(--color41, #35c7e1)" d="M8.3 23.7C8.3 25 7.3 26 6 26s-2-1-2-2.4c0-1.3 1-2.3 2.3-2.3s2.3 1 2.3 2.3z"></path><path fill="#f57c7f" stroke="#cd4c4e" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color44, #cd4c4e), fill: var(--color43, #f57c7f)" d="M22 15c0 3-2.5 5.4-5.5 5.4S11 18 11 15c0-3.2 2.5-5.6 5.5-5.6S22 11.8 22 15z"></path><path fill="#b8e659" stroke="#688332" stroke-width=".5" stroke-miterlimit="10" style="stroke: var(--color46, #688332), fill: var(--color45, #b8e659)" d="M29.8 22c0 1.8-1.3 3-3 3s-3-1.2-3-3c0-1.6 1.4-3 3-3s3 1.4 3 3z"></path><path fill="#cecece" stroke="#999" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color40, #999), fill: var(--color39, #cecece)" d="M7.5 11.7C7.5 12.5 7 13 6 13s-1.4-.5-1.4-1.3.7-1.5 1.5-1.5 1.5.7 1.5 1.5z"></path></svg>',rule:function(report){var options=report.data[0].options;return!(!options.trendline||-1===options.xaxis.datatype.indexOf("number")&&-1===options.xaxis.datatype.indexOf("decimal"))}},{label:"Runtime",ct:"runtime",disabled:!0,icon:'<svg id="icon-bar-flat" viewBox="0 0 32 32"  width="100%" height="100%"><path fill="#ef7c80" style="fill: var(--color33, #ef7c80)" d="M4.6 5.3H11v22H4.6v-22z"></path><path fill="#49bfda" style="fill: var(--color5, #49bfda)" d="M13.4 10.2h6.4v17.2h-6.4V10.2z"></path><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M22.3 12.8h6.4v14.6h-6.4V12.8z"></path></svg>',rule:function(report){var options=report.data[0].options;return-1!==options.xaxis.datatype.indexOf("date")&&"hoursofdayonly"===options.xaxis.operation}},{label:"Combo Chart",ct:"combo",disabled:!1,icon:'<svg id="icon-bar-flat" viewBox="0 0 32 32"  width="100%" height="100%"><path fill="#ef7c80" style="fill: var(--color33, #ef7c80)" d="M4.6 5.3H11v22H4.6v-22z"></path><path fill="#49bfda" style="fill: var(--color5, #49bfda)" d="M13.4 10.2h6.4v17.2h-6.4V10.2z"></path><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M22.3 12.8h6.4v14.6h-6.4V12.8z"></path></svg>',rule:function(report){if(report.data.length>1){if(!report.data[0].options.is_highres_data)return!0}else if(report.combined)return!0;return!1}}];
/* harmony default export */__webpack_exports__.Z={methods:{getChartType:function(report){var availableChartTypes=[];if(report.data&&report.data.length)for(var _i=0,_chartTypes=chartTypes;_i<_chartTypes.length;_i++){var _chartType=_chartTypes[_i];_chartType.rule(report)&&availableChartTypes.push(_chartType)}else availableChartTypes=chartTypes;var chartType=null;return report.options.is_combo?(chartType=chartTypes.find((function(ctype){return ctype.ct===report.options.type})),report.options.type=chartType.ct):(chartType=availableChartTypes.find((function(ctype){return ctype.ct===report.options.type})),chartType||(chartType=report.options.type===availableChartTypes[0].ct&&availableChartTypes.length>1?availableChartTypes[0]:availableChartTypes[1]),report.options.type=chartType.ct),{chartType:chartType,availableChartTypes:availableChartTypes}},getCombinationChartTypes:function(){for(var ctypeList=["bar","line","area"],availableChartTypes=[],_i2=0,_chartTypes2=chartTypes;_i2<_chartTypes2.length;_i2++){var chartType=_chartTypes2[_i2];-1!==ctypeList.indexOf(chartType.ct)&&availableChartTypes.push(chartType)}return availableChartTypes}}}},
/***/146371:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(566347),d3__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(348727));
/* harmony import */
/* harmony default export */__webpack_exports__.Z={computeRegressionAlias:function(conf){var _step,groupAlias="",_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(conf["xAxis"]);try{for(_iterator.s();!(_step=_iterator.n()).done;){var x=_step.value;groupAlias+=x.alias,groupAlias+="_"}}catch(err){_iterator.e(err)}finally{_iterator.f()}return groupAlias+=conf["yAxis"].alias,groupAlias+="regr",groupAlias},getAllDataPoints:function(option){var _step2,dataPoints=[],_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(option.dataPoints);try{var _loop=function(){var point=_step2.value;if("datapoint"===point.type){var isAlreadyExisting=dataPoints.find((function(dP){return dP.alias===point.alias}));isAlreadyExisting||dataPoints.push(point)}else if("group"===point.type){var _step3,_iterator3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(point.children);try{var _loop2=function(){var child=_step3.value,isAlreadyExisting=dataPoints.find((function(dP){return dP.alias===child.alias}));isAlreadyExisting||dataPoints.push(child)};for(_iterator3.s();!(_step3=_iterator3.n()).done;)_loop2()}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return dataPoints},getDataPoint:function(fieldId,parentId,options){var _step4,_iterator4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(options.dataPoints);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var dp=_step4.value;if("dataPoint"===dp.type){if(dp.fieldId===fieldId&&dp.parentId===parentId)return dp}else if("group"===dp.type){var _step5,_iterator5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(dp.children);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var child=_step5.value;if(child.fieldId===fieldId&&child.parentId===parentId)return child}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}},pointTypes:function(){var types={5:"regressionPoint"};return types},contextNames:function(){var contextNames={REGRESSION:"regression",LINEAR:"linear",SINGLE:"single",MULTIPLE:"multi"};return contextNames},dataTypes:function(){var dataTypes={DATAPOINT:"datapoint",GROUP:"group",RANGEGROUP:"rangeGroup",SYSTEMGROUP:"systemGroup",REGRESSION:"regression"};return dataTypes},regressionTypes:function(){var regressionTypes={SINGLE:"single",MULTIPLE:"multiple"};return regressionTypes},regressionMetrics:function(){var regressionMetricKeys=[{name:"rsquared",displayName:"R Square"},{name:"adjustedrSquared",displayName:"Adjusted R Square"},{name:"standardError",displayName:"Standard Error"},{name:"observations",displayName:"Observations"}];return regressionMetricKeys},anovaResultKeys:function(){var anovaResultKeys=[{name:"degreeOfFreedom",displayName:"DF"},{name:"sumOfSquare",displayName:"SS"},{name:"meanSumOfSquare",displayName:"MS"},{name:"fStat",displayName:"F"}];return anovaResultKeys},regressionStatistics:function(){var regressionStatKeys=[{name:"coefficient",displayName:"COEFFICIENTS"},{name:"standardError",displayName:"STANDARD ERROR"},{name:"tValue",displayName:"T VALUE"},{name:"pValue",displayName:"P VALUE"}];return regressionStatKeys},evaluateLinearData:function(coefficients,modelData,type){if("linear"===type){var data=[];
// let newXSet = new Set()
if(Array.isArray(modelData)){var _step6,_iterator6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(modelData);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var d=_step6.value,y=coefficients.a*d+coefficients.b;data.push(y)}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}return data}return data=coefficients.a*modelData+coefficients.b,data}},getEquationString:function(coefficients,rsquared,type){switch(type){case"linear":return"y="+d3__WEBPACK_IMPORTED_MODULE_8__.format(",g")(coefficients.a)+"x+"+d3__WEBPACK_IMPORTED_MODULE_8__.format(",g")(coefficients.b)+" (R2= "+d3__WEBPACK_IMPORTED_MODULE_8__.format(",g")(rsquared)+")"}},getPeriod:function(period){switch(period){case"hourly":return 8;case"daily":return 1;case"weekly":return 2;case"monthly":return 3;default:return null}},getReadingFieldForEnpi:function(){var readingField={safeLimitId:-1,raiseSafeLimitAlarm:!1,displayName:"",dataType:1,lesserThan:null,greaterThan:null,betweenTo:null,betweenFrom:null,safeLimitPattern:"none",safeLimitSeverity:"Minor"};return readingField},getAggregateString:function(aggr){if(aggr)switch(aggr){case 2:return"avg";case 3:return"sum";case 4:return"min";case 5:return"max"}},getStaticCriteria:function(parentId){var criteria={},conditions={1:{fieldName:"parentId",operatorId:9,sequence:"1",value:parentId},2:{fieldName:"ttime",operatorId:20,sequence:"2",value:"${startTime}, ${endTime}"}};return criteria["pattern"]="(1 and 2)",criteria["conditions"]=conditions,criteria},getWorkFlowForSingleRegression:function(reportObject,regressionObject){var workFlow={},expressions=[],parameters=[];if(regressionObject.regressionType===this.contextNames.LINEAR){var xDataPoint=regressionObject.children.find((function(dp){return"x"===dp.axes})),regressionPoint=regressionObject.children.find((function(d){return d.alias===regressionObject.key})),coefficients=regressionPoint.coefficients;expressions.push({name:"A",constant:coefficients[xDataPoint.alias]+""}),expressions.push({name:"B",aggregateString:this.getAggregateString(xDataPoint.aggr),fieldName:xDataPoint.fieldName,moduleName:xDataPoint.moduleName,criteria:this.getStaticCriteria(xDataPoint.parentId),conditionSeqVsBaselineId:{}}),expressions.push({name:"C",constant:coefficients.constant+""}),parameters=[{name:"startTime",typeString:"Number"},{name:"endTime",typeString:"Number"}],workFlow["resultEvaluator"]="(A*B+C)"}return workFlow["expressions"]=expressions,workFlow["parameters"]=parameters,workFlow},getNewWorkFlowForEnpi:function(resultObject,regressionObject){return resultObject.options||resultObject.regressionConfig&&resultObject.regressionType===this.regressionTypes().SINGLE?this.getWorkFlowForSingleRegression(resultObject,regressionObject):this.getWorkFlowForRegression(resultObject,regressionObject.aliases.actual)},provideStringOperators:function(){var operators={SUM:"+",DIFF:"-",MUL:"*",DIV:"/"};return operators},getWorkFlowForRegression:function(resultObject,choosenAlias){var _this=this,workFlow={},expressions=[],expressionPattern="",regressionConfig=resultObject.regressionConfig.filter((function(conf){return conf.groupAlias===choosenAlias})),coefficientMap=resultObject.reportData.regressionResult[choosenAlias].coefficientMap,currentCharacterCode=65,parameters=[{name:"startTime",typeString:"Number"},{name:"endTime",typeString:"Number"}];if(workFlow["parameters"]=parameters,0!==regressionConfig.length){expressionPattern="";var _loop3=function(key){if("constant"!=key){var constant={constant:coefficientMap[key]+"",name:String.fromCharCode(currentCharacterCode)};expressions.push(constant),currentCharacterCode+=1;var dataPoint=resultObject.report.dataPoints.find((function(dp){return dp.aliases.actual===key}));if(dataPoint){var temp={};temp["name"]=String.fromCharCode(currentCharacterCode),currentCharacterCode+=1,temp["fieldName"]=dataPoint.yAxis.field.name,temp["moduleName"]=dataPoint.yAxis.field.module.name,temp["criteria"]=_this.getStaticCriteria(dataPoint.metaData.parentIds[0]),temp["aggregateString"]=_this.getAggregateString(dataPoint.yAxis.aggr),temp["conditionSeqVsBaselineId"]={},expressions.push(temp);var overOperation=coefficientMap[key]<0?_this.provideStringOperators().DIFF:_this.provideStringOperators().SUM;expressionPattern=_this.populateResultEvaluator(expressionPattern,[constant,temp],overOperation,[_this.provideStringOperators().MUL])}}else{var _overOperation=coefficientMap[key]<0?_this.provideStringOperators().DIFF:_this.provideStringOperators().SUM,_constant={constant:coefficientMap[key]+"",name:String.fromCharCode(currentCharacterCode)};expressions.push(_constant),currentCharacterCode+=1,expressionPattern=_this.populateResultEvaluator(expressionPattern,[_constant],_overOperation,null)}};for(var key in coefficientMap)_loop3(key);
// console.log('Expressions')
// console.log(expressions)
// console.log('Expression Pattern')
// console.log(expressionPattern)
return workFlow["expressions"]=expressions,workFlow["resultEvaluator"]=expressionPattern,workFlow}},populateResultEvaluator:function(expressionPattern,variables,overOperation,inOperation){if(1===variables.length)expressionPattern=""!==expressionPattern?expressionPattern+overOperation+"("+variables[0].name+")":expressionPattern+"("+variables[0].name+")";else{for(var subExpression="",i=0;i<variables.length-1;i++)subExpression=subExpression+"("+variables[i].name+inOperation[i];subExpression=subExpression+variables[variables.length-1].name+")",""!==expressionPattern?expressionPattern=expressionPattern+overOperation+subExpression:expressionPattern+=subExpression}return expressionPattern},prepareNewEnpiObject:function(reportObject,choosenAlias,commons,datePeriod){var _step7,_this2=this,newEnpi={},_iterator7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(choosenAlias);try{var _loop4=function(){var alias=_step7.value,regressionObject=reportObject.options?reportObject.options.dataPoints.filter((function(dp){return"group"===dp.type&&dp.key&&dp.key===alias})):reportObject.report.dataPoints.filter((function(dp){return dp.aliases.actual===alias}));if(regressionObject.length){regressionObject=regressionObject[0],
// let xDataPoint = regressionObject.children.find((dp) => dp.axes === 'x')
newEnpi["name"]=regressionObject.label?regressionObject.label:regressionObject.name,newEnpi["description"]="",newEnpi["triggerType"]=1,newEnpi["formulaFieldType"]=1,newEnpi["resourceType"]=1,newEnpi["resultDataType"]=3,newEnpi["readingField"]=_this2.getReadingFieldForEnpi(),newEnpi["interval"]=60,reportObject.options?(newEnpi["matchedResources"]=[{name:reportObject.options.common.buildingName}],newEnpi["resourceId"]=reportObject.options.common.buildingIds[0]):(newEnpi["matchedResources"]=[{name:commons.buildingName}],newEnpi["resourceId"]=parseInt(commons.buildingIds[0])),newEnpi["workflow"]=_this2.getNewWorkFlowForEnpi(reportObject,regressionObject);var period=null;period=reportObject.dateRange&&reportObject.dateRange.period?_this2.getPeriod(reportObject.dateRange.period):_this2.getPeriod(datePeriod),newEnpi["frequency"]=period||8}};for(_iterator7.s();!(_step7=_iterator7.n()).done;)_loop4();
// console.log('Constructed New Enpi config')
// console.log(newEnpi)
}catch(err){_iterator7.e(err)}finally{_iterator7.f()}return newEnpi}}},
/***/862230:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(566347),chartTypes=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(670560),[{label:"Pie",value:"pie",chartTypeInt:1,icon:'<svg width="20px" height="16px" viewBox="0 0 20 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>pie chart</title><desc>Created with Sketch.</desc><defs><circle id="path-1" cx="10" cy="8" r="5"></circle><mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="10" height="10" fill="white"><use xlink:href="#path-1"></use></mask><circle id="path-3" cx="10" cy="8" r="5"></circle><mask id="mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="10" height="10" fill="white"><use xlink:href="#path-3"></use></mask</defs><g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-633.000000, -98.000000)"><g id="pie-chart" transform="translate(633.000000, 98.000000)"><rect id="Rectangle-8" stroke="#EF508F" x="0.5" y="0.5" width="19" height="15" rx="1.20000005"></rect><circle id="Oval" fill="#EF508F" transform="translate(10.000000, 8.000000) rotate(-15.000000) translate(-10.000000, -8.000000) " cx="10" cy="8" r="5"></circle><use id="#FFC53A:40%" stroke="#FA90BA" mask="url(#mask-2)" stroke-width="10" stroke-dasharray="12.57142857142857,50" transform="translate(10.000000, 8.000000) rotate(-15.000000) translate(-10.000000, -8.000000) " xlink:href="#path-1"></use><use id="#FAFF81:0.2" stroke="#FFC4DB" mask="url(#mask-4)" stroke-width="10" stroke-dasharray="6.285714285714286,50" transform="translate(10.000000, 8.000000) rotate(-15.000000) translate(-10.000000, -8.000000) " xlink:href="#path-3"></use></g></g></svg>',rule:function(options,dataPoints,typeMode){return!options.isSystemGroup&&("number"!==options.axis.x.datatype&&"decimal"!==options.axis.x.datatype&&"point"!==typeMode)}},{label:"Doughnut",value:"donut",chartTypeInt:2,icon:'<svg id="icon-donut" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#49bfda" style="fill: var(--color5, #49bfda)" d="M24.4 16.2v.8l5 .5c.4-3.3-.4-7-2.8-9.7-2-2.7-5-4.4-8.2-4.8l-.6 5.4c3.8.6 6.6 4 6.6 7.8z"></path><path fill="#ef7c80" style="fill: var(--color33, #ef7c80)" d="M16.4 8.2h1L18 3c-3.4-.4-7 .4-10 2.8-5.6 4.4-6.5 12.8-2 18.5.2 0 0 0 .2.2l4-3.2c-1-1.4-1.7-3-1.7-5 0-4.5 3.5-8 8-8z"></path><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M16.4 24.2c-2.4 0-4.5-1-6-2.7l-4 3.2c4.7 5.3 12.6 6 18 1.5 2.8-2 4.4-5 5-8.2l-5.2-.6c-.4 4-3.7 6.8-7.8 6.8z"></path><path fill="#fff" style="fill: var(--color8, #fff)" d="M18 3h.5L18 8.4h-.6L18 3zm11.4 14.5v.5l-5-.6V17l5 .5zm-19.2 3.7l.3.3-4 3.3-.3-.4 4-3.2z"></path></svg>',rule:function(options,dataPoints,typeMode){return!options.isSystemGroup&&("number"!==options.axis.x.datatype&&"decimal"!==options.axis.x.datatype&&"point"!==typeMode)}},{label:"Guage",value:"gauge",chartTypeInt:18,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-23.75 -23.75 47.5 23.75"><path d="M-23.75,-2.9085361479749637e-15A23.75,23.75,0,1,1,23.75,0L14.25,0A14.25,14.25,0,1,0,-14.25,-1.7451216887849782e-15Z" fill="#EF508F"/></svg>',rule:function(options,dataPoints,typeMode){return!options.isSystemGroup&&("number"!==options.axis.x.datatype&&"decimal"!==options.axis.x.datatype&&"point"!==typeMode)}},{label:"Bar",value:"bar",chartTypeInt:3,icon:'<svg id="icon-bar-flat" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#ef7c80" style="fill: var(--color33, #ef7c80)" d="M4.6 5.3H11v22H4.6v-22z"></path><path fill="#49bfda" style="fill: var(--color5, #49bfda)" d="M13.4 10.2h6.4v17.2h-6.4V10.2z"></path><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M22.3 12.8h6.4v14.6h-6.4V12.8z"></path></svg>',rule:function(report){return!0}},{label:"Stacked Bar",value:"stackedbar",chartTypeInt:4,icon:'<svg id="icon-stacked" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#ef7c80" style="fill: var(--color41, #ef7c80)" d="M4.6 4.5H11v7.2H4.6V4.5z"></path><path fill="#b8d15c" style="fill: var(--color5, #b8d15c)" d="M4.6 11.7H11V19H4.6v-7.3z"></path><path fill="#49bfda" style="fill: var(--color7, #49bfda)" d="M4.6 19H11v8H4.6v-8z"></path><path fill="#ef7c80" style="fill: var(--color41, #ef7c80)" d="M13.4 9.3h6.4V15h-6.4V9.2z"></path><path fill="#b8d15c" style="fill: var(--color5, #b8d15c)" d="M13.4 15h6.4v5.5h-6.4V15z"></path><path fill="#49bfda" style="fill: var(--color7, #49bfda)" d="M13.4 20.5h6.4V27h-6.4v-6.5z"></path><path fill="#ef7c80" style="fill: var(--color41, #ef7c80)" d="M22.2 13.3h6.4V18h-6.4v-4.7z"></path><path fill="#b8d15c" style="fill: var(--color5, #b8d15c)" d="M22.2 18h6.4v4h-6.4v-4z"></path><path fill="#49bfda" style="fill: var(--color7, #49bfda)" d="M22.2 22h6.4v5h-6.4v-5z"></path></svg>',rule:function(report,dataPoints,typeMode){return!!report.isSystemGroup||(!!report.isGroupedByTime||dataPoints.length>1)}},{label:"Histogram",value:"histogram",chartTypeInt:19,icon:'<svg id="icon-bar-flat" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#ef7c80" style="fill: var(--color33, #ef7c80)" d="M4.6 5.3H11v22H4.6v-22z"></path><path fill="#49bfda" style="fill: var(--color5, #49bfda)" d="M13.4 10.2h6.4v17.2h-6.4V10.2z"></path><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M22.3 12.8h6.4v14.6h-6.4V12.8z"></path></svg>',rule:function(options){return!0}},{label:"Area",value:"area",chartTypeInt:5,icon:'<svg id="icon-area1" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M.8 27l14-13.8 13 10.2 3.4-.2v4z"></path><path fill="none" stroke="#7e9649" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color4, #7e9649)" d="M.6 27l14-13.8 12.8 10.2 3.4-.2v4"></path><path fill="#49bfda" opacity=".8" style="fill: var(--color5, #49bfda)" d="M.8 12.2l9.2 11 5.4-5.2 12 9.4L.7 27z"></path><path fill="none" stroke="#1f7d8e" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color6, #1f7d8e)" d="M.8 12.2l9.4 11.3 5.4-5.4 11.7 9.3"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M0 27h32v.8H0V27zM0 3h.8v24H0V3z"></path></svg>',rule:function(report){return!0}},{label:"Area Spline",value:"area-spline",chartTypeInt:6,icon:'<svg id="icon-area1" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M.8 27l14-13.8 13 10.2 3.4-.2v4z"></path><path fill="none" stroke="#7e9649" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color4, #7e9649)" d="M.6 27l14-13.8 12.8 10.2 3.4-.2v4"></path><path fill="#49bfda" opacity=".8" style="fill: var(--color5, #49bfda)" d="M.8 12.2l9.2 11 5.4-5.2 12 9.4L.7 27z"></path><path fill="none" stroke="#1f7d8e" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color6, #1f7d8e)" d="M.8 12.2l9.4 11.3 5.4-5.4 11.7 9.3"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M0 27h32v.8H0V27zM0 3h.8v24H0V3z"></path></svg>',rule:function(report){return!0}},{label:"Area Step",value:"area-step",chartTypeInt:7,icon:'<svg id="icon-area1" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M.8 27l14-13.8 13 10.2 3.4-.2v4z"></path><path fill="none" stroke="#7e9649" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color4, #7e9649)" d="M.6 27l14-13.8 12.8 10.2 3.4-.2v4"></path><path fill="#49bfda" opacity=".8" style="fill: var(--color5, #49bfda)" d="M.8 12.2l9.2 11 5.4-5.2 12 9.4L.7 27z"></path><path fill="none" stroke="#1f7d8e" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color6, #1f7d8e)" d="M.8 12.2l9.4 11.3 5.4-5.4 11.7 9.3"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M0 27h32v.8H0V27zM0 3h.8v24H0V3z"></path></svg>',rule:function(report){return!0}},{label:"Area Spline Range",value:"area-spline-range",chartTypeInt:8,icon:'<svg id="icon-area1" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M.8 27l14-13.8 13 10.2 3.4-.2v4z"></path><path fill="none" stroke="#7e9649" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color4, #7e9649)" d="M.6 27l14-13.8 12.8 10.2 3.4-.2v4"></path><path fill="#49bfda" opacity=".8" style="fill: var(--color5, #49bfda)" d="M.8 12.2l9.2 11 5.4-5.2 12 9.4L.7 27z"></path><path fill="none" stroke="#1f7d8e" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color6, #1f7d8e)" d="M.8 12.2l9.4 11.3 5.4-5.4 11.7 9.3"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M0 27h32v.8H0V27zM0 3h.8v24H0V3z"></path></svg>',rule:function(report){return 0!==report.dataPoints.filter((function(dp){return"rangeGroup"===dp.type})).length}},{label:"Area Line Range",value:"area-line-range",chartTypeInt:9,icon:'<svg id="icon-area1" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#b8d15c" style="fill: var(--color3, #b8d15c)" d="M.8 27l14-13.8 13 10.2 3.4-.2v4z"></path><path fill="none" stroke="#7e9649" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color4, #7e9649)" d="M.6 27l14-13.8 12.8 10.2 3.4-.2v4"></path><path fill="#49bfda" opacity=".8" style="fill: var(--color5, #49bfda)" d="M.8 12.2l9.2 11 5.4-5.2 12 9.4L.7 27z"></path><path fill="none" stroke="#1f7d8e" stroke-width=".8" stroke-miterlimit="10" style="stroke: var(--color6, #1f7d8e)" d="M.8 12.2l9.4 11.3 5.4-5.4 11.7 9.3"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M0 27h32v.8H0V27zM0 3h.8v24H0V3z"></path></svg>',rule:function(report){return 0!==report.dataPoints.filter((function(dp){return"rangeGroup"===dp.type})).length}},{label:"Line",value:"line",chartTypeInt:10,icon:'<svg id="icon-line3" viewBox="0 0 32 32" width="100%" height="100%"><path fill="none" stroke="#49bfda" stroke-width="2.4" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M4.2 25l6.8-8.3 5 5.3 6-7.6 6-2.5"></path><path fill="#fff" stroke="#49bfda" stroke-width="1.6" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M6.7 24c0 1-.7 2-1.7 2s-1.8-1-1.8-2S4 22.4 5 22.4s1.7.8 1.7 1.8zm6.3-7.2c0 1-1 1.8-2 1.8s-1.6-.8-1.6-1.8S10 15 11 15s2 .8 2 1.8zm5 5c0 1-1 1.8-1.8 1.8s-1.8-.8-1.8-1.8.8-1.7 1.8-1.7S18 21 18 22zm6.3-7.3c0 1-.8 1.7-1.7 1.7s-1.8-.7-1.8-1.7.8-1.8 1.8-1.8 1.7.8 1.7 1.8z"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M.8 27h30v.8H.7V27zm0-24h.8v24H.8V3z"></path></svg>',rule:function(report){return!0}},{label:"Spline",value:"spline",chartTypeInt:11,icon:'<svg id="icon-line3" viewBox="0 0 32 32" width="100%" height="100%"><path fill="none" stroke="#49bfda" stroke-width="2.4" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M4.2 25l6.8-8.3 5 5.3 6-7.6 6-2.5"></path><path fill="#fff" stroke="#49bfda" stroke-width="1.6" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M6.7 24c0 1-.7 2-1.7 2s-1.8-1-1.8-2S4 22.4 5 22.4s1.7.8 1.7 1.8zm6.3-7.2c0 1-1 1.8-2 1.8s-1.6-.8-1.6-1.8S10 15 11 15s2 .8 2 1.8zm5 5c0 1-1 1.8-1.8 1.8s-1.8-.8-1.8-1.8.8-1.7 1.8-1.7S18 21 18 22zm6.3-7.3c0 1-.8 1.7-1.7 1.7s-1.8-.7-1.8-1.7.8-1.8 1.8-1.8 1.7.8 1.7 1.8z"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M.8 27h30v.8H.7V27zm0-24h.8v24H.8V3z"></path></svg>',rule:function(report){return!0}},{label:"Step",value:"step",chartTypeInt:12,icon:'<svg id="icon-line3" viewBox="0 0 32 32" width="100%" height="100%"><path fill="none" stroke="#49bfda" stroke-width="2.4" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M4.2 25l6.8-8.3 5 5.3 6-7.6 6-2.5"></path><path fill="#fff" stroke="#49bfda" stroke-width="1.6" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M6.7 24c0 1-.7 2-1.7 2s-1.8-1-1.8-2S4 22.4 5 22.4s1.7.8 1.7 1.8zm6.3-7.2c0 1-1 1.8-2 1.8s-1.6-.8-1.6-1.8S10 15 11 15s2 .8 2 1.8zm5 5c0 1-1 1.8-1.8 1.8s-1.8-.8-1.8-1.8.8-1.7 1.8-1.7S18 21 18 22zm6.3-7.3c0 1-.8 1.7-1.7 1.7s-1.8-.7-1.8-1.7.8-1.8 1.8-1.8 1.7.8 1.7 1.8z"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M.8 27h30v.8H.7V27zm0-24h.8v24H.8V3z"></path></svg>',rule:function(report){return!0}},{label:"Bubble",value:"bubble",chartTypeInt:13,icon:'<svg id="icon-line3" viewBox="0 0 32 32" width="100%" height="100%"><path fill="none" stroke="#49bfda" stroke-width="2.4" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M4.2 25l6.8-8.3 5 5.3 6-7.6 6-2.5"></path><path fill="#fff" stroke="#49bfda" stroke-width="1.6" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M6.7 24c0 1-.7 2-1.7 2s-1.8-1-1.8-2S4 22.4 5 22.4s1.7.8 1.7 1.8zm6.3-7.2c0 1-1 1.8-2 1.8s-1.6-.8-1.6-1.8S10 15 11 15s2 .8 2 1.8zm5 5c0 1-1 1.8-1.8 1.8s-1.8-.8-1.8-1.8.8-1.7 1.8-1.7S18 21 18 22zm6.3-7.3c0 1-.8 1.7-1.7 1.7s-1.8-.7-1.8-1.7.8-1.8 1.8-1.8 1.7.8 1.7 1.8z"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M.8 27h30v.8H.7V27zm0-24h.8v24H.8V3z"></path></svg>',rule:function(report){return!0}},{label:"Scatter",value:"scatter",chartTypeInt:14,icon:'<svg id="icon-line3" viewBox="0 0 32 32" width="100%" height="100%"><path fill="none" stroke="#49bfda" stroke-width="2.4" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M4.2 25l6.8-8.3 5 5.3 6-7.6 6-2.5"></path><path fill="#fff" stroke="#49bfda" stroke-width="1.6" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M6.7 24c0 1-.7 2-1.7 2s-1.8-1-1.8-2S4 22.4 5 22.4s1.7.8 1.7 1.8zm6.3-7.2c0 1-1 1.8-2 1.8s-1.6-.8-1.6-1.8S10 15 11 15s2 .8 2 1.8zm5 5c0 1-1 1.8-1.8 1.8s-1.8-.8-1.8-1.8.8-1.7 1.8-1.7S18 21 18 22zm6.3-7.3c0 1-.8 1.7-1.7 1.7s-1.8-.7-1.8-1.7.8-1.8 1.8-1.8 1.7.8 1.7 1.8z"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M.8 27h30v.8H.7V27zm0-24h.8v24H.8V3z"></path></svg>',rule:function(options){
// return (
//   options.axis.x.datatype === 'number' ||
//   options.axis.x.datatype === 'decimal'
// )
return!0}},{label:"Combo Chart",value:"combo",chartTypeInt:15,icon:'<svg id="icon-line3" viewBox="0 0 32 32" width="100%" height="100%"><path fill="none" stroke="#49bfda" stroke-width="2.4" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M4.2 25l6.8-8.3 5 5.3 6-7.6 6-2.5"></path><path fill="#fff" stroke="#49bfda" stroke-width="1.6" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M6.7 24c0 1-.7 2-1.7 2s-1.8-1-1.8-2S4 22.4 5 22.4s1.7.8 1.7 1.8zm6.3-7.2c0 1-1 1.8-2 1.8s-1.6-.8-1.6-1.8S10 15 11 15s2 .8 2 1.8zm5 5c0 1-1 1.8-1.8 1.8s-1.8-.8-1.8-1.8.8-1.7 1.8-1.7S18 21 18 22zm6.3-7.3c0 1-.8 1.7-1.7 1.7s-1.8-.7-1.8-1.7.8-1.8 1.8-1.8 1.7.8 1.7 1.8z"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M.8 27h30v.8H.7V27zm0-24h.8v24H.8V3z"></path></svg>',rule:function(options,dataPoints,typeMode){return dataPoints.length>1&&"point"!==typeMode}},{label:"Table",value:"table",chartTypeInt:16,icon:'<svg id="icon-line3" viewBox="0 0 32 32" width="100%" height="100%"><path fill="none" stroke="#49bfda" stroke-width="2.4" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M4.2 25l6.8-8.3 5 5.3 6-7.6 6-2.5"></path><path fill="#fff" stroke="#49bfda" stroke-width="1.6" stroke-miterlimit="10" style="stroke: var(--color5, #49bfda)" d="M6.7 24c0 1-.7 2-1.7 2s-1.8-1-1.8-2S4 22.4 5 22.4s1.7.8 1.7 1.8zm6.3-7.2c0 1-1 1.8-2 1.8s-1.6-.8-1.6-1.8S10 15 11 15s2 .8 2 1.8zm5 5c0 1-1 1.8-1.8 1.8s-1.8-.8-1.8-1.8.8-1.7 1.8-1.7S18 21 18 22zm6.3-7.3c0 1-.8 1.7-1.7 1.7s-1.8-.7-1.8-1.7.8-1.8 1.8-1.8 1.7.8 1.7 1.8z"></path><path fill="#9a9999" style="fill: var(--color7, #9a9999)" d="M.8 27h30v.8H.7V27zm0-24h.8v24H.8V3z"></path></svg>',rule:function(options){return!0}},{label:"Heatmap",value:"heatmap",chartTypeInt:17,icon:'<svg id="icon-bubble" viewBox="0 0 32 32" width="100%" height="100%"><path fill="#999" style="fill: var(--color40, #999)" d="M.3 27.8h32v.8H.3v-.8z"></path><path fill="#999" style="fill: var(--color40, #999)" d="M.3 4H1v24H.4V4z"></path><path fill="#35c7e1" stroke="#136776" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color42, #136776), fill: var(--color41, #35c7e1)" d="M8.3 23.7C8.3 25 7.3 26 6 26s-2-1-2-2.4c0-1.3 1-2.3 2.3-2.3s2.3 1 2.3 2.3z"></path><path fill="#f57c7f" stroke="#cd4c4e" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color44, #cd4c4e), fill: var(--color43, #f57c7f)" d="M22 15c0 3-2.5 5.4-5.5 5.4S11 18 11 15c0-3.2 2.5-5.6 5.5-5.6S22 11.8 22 15z"></path><path fill="#b8e659" stroke="#688332" stroke-width=".5" stroke-miterlimit="10" style="stroke: var(--color46, #688332), fill: var(--color45, #b8e659)" d="M29.8 22c0 1.8-1.3 3-3 3s-3-1.2-3-3c0-1.6 1.4-3 3-3s3 1.4 3 3z"></path><path fill="#cecece" stroke="#999" stroke-width=".4" stroke-miterlimit="10" style="stroke: var(--color40, #999), fill: var(--color39, #cecece)" d="M7.5 11.7C7.5 12.5 7 13 6 13s-1.4-.5-1.4-1.3.7-1.5 1.5-1.5 1.5.7 1.5 1.5z"></path></svg>',rule:function(options){return 2===options.common.type&&!(!options.isTime||options.isSystemGroup)}}]);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={methods:{getChartTypes:function(options,dataPoints,typeMode,skipTableType){var availableChartTypes=[];if(options&&dataPoints&&dataPoints.length)for(var _i=0,_chartTypes=chartTypes;_i<_chartTypes.length;_i++){var chartType=_chartTypes[_i];chartType.rule(options,dataPoints,typeMode)&&availableChartTypes.push(chartType)}else availableChartTypes=chartTypes;if("range"===typeMode||1===dataPoints.length&&"rangeGroup"===dataPoints[0].type){var _step,finalChartTypes=[],_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(availableChartTypes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var cType=_step.value;"area-line-range"!==cType.value&&"area-spline-range"!==cType.value||finalChartTypes.push(cType)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return skipTableType&&(finalChartTypes=finalChartTypes.filter((function(type){return 16!=type.chartTypeInt}))),finalChartTypes}return skipTableType&&(availableChartTypes=availableChartTypes.filter((function(type){return 16!=type.chartTypeInt&&1!=type.chartTypeInt&&2!=type.chartTypeInt&&18!=type.chartTypeInt}))),availableChartTypes},getFullChartList:function(){return chartTypes}}}},
/***/804911:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(103336),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(595082),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(488478),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(566347),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(548534),vue__WEBPACK_IMPORTED_MODULE_43__=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(169358),__webpack_require__(879288),__webpack_require__(976801),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(865137),__webpack_require__(634338),__webpack_require__(162506),__webpack_require__(241830),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(564043),__webpack_require__(322462),__webpack_require__(228436),__webpack_require__(689730),__webpack_require__(648324),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(506203),__webpack_require__(677049),__webpack_require__(795765),__webpack_require__(897389),__webpack_require__(720144)),newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(374575),moment_timezone__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(480008),moment_timezone__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_34__),util_deepmerge__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(708634),newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(794211),_mixins_NewDateHelper__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(105534),src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(146371),pages_report_mixins_NewChartTypes__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(862230),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(990260),util_picklist__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(961358),src_util_helpers_js__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(778390),MomentRange=__webpack_require__(923542),contextNames=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_38__/* ["default"] */.Z.contextNames(),dataTypes=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_38__/* ["default"] */.Z.dataTypes();
/* harmony import */
/* harmony default export */__webpack_exports__.Z={mixins:[pages_report_mixins_NewChartTypes__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z],data:function(){return{assets:[]}},created:function(){this.loadAssetPickListData()},methods:{noneSelected:function(reportFilter){var nonEmptyFilters=Object.keys(reportFilter).filter((function(key){var _Object$keys,filter=reportFilter[key];if((null===filter||void 0===filter?void 0:filter.length)>0&&null!=filter&&(null===(_Object$keys=Object.keys(filter))||void 0===_Object$keys?void 0:_Object$keys.length)>0||Number(filter)>0)return key}));return!(nonEmptyFilters.length>0)},prepareUserFilterProps:function(reportFilter,report,isFromUserFilter){var siteFilter=reportFilter.siteFilter,buildingFilter=reportFilter.buildingFilter,categoryFilter=reportFilter.categoryFilter,assetFilter=reportFilter.assetFilter,ttimeFilter=reportFilter.ttimeFilter;if(this.noneSelected(reportFilter))return{};var _siteFilter,_buildingFilter,_assetFilter,filterState=report.options.common.filters.filterState;filterState&&"none"!==filterState.liveFilterField&&(null!==reportFilter&&void 0!==reportFilter&&reportFilter.siteId?siteFilter=[reportFilter.siteId]:(null===(_siteFilter=siteFilter)||void 0===_siteFilter?void 0:_siteFilter.length)<=0&&(siteFilter=[]),null!==reportFilter&&void 0!==reportFilter&&reportFilter.buildingId?buildingFilter=[reportFilter.buildingId]:(null===(_buildingFilter=buildingFilter)||void 0===_buildingFilter?void 0:_buildingFilter.length)<=0&&(buildingFilter=[]),reportFilter.assetId?assetFilter=[reportFilter.assetId]:(null===(_assetFilter=assetFilter)||void 0===_assetFilter?void 0:_assetFilter.length)<=0&&(assetFilter=[]));return{siteFilter:siteFilter.length?siteFilter:filterState&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_42__/* .isEmpty */.xb)(isFromUserFilter)?filterState.siteFilter:[],buildingFilter:buildingFilter.length?buildingFilter:filterState&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_42__/* .isEmpty */.xb)(isFromUserFilter)?filterState.buildingFilter:[],categoryFilter:categoryFilter.length?categoryFilter:filterState&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_42__/* .isEmpty */.xb)(isFromUserFilter)?filterState.categoryFilter:[],assetFilter:assetFilter.length?assetFilter:filterState&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_42__/* .isEmpty */.xb)(isFromUserFilter)?filterState.assetFilter:[],ttimeFilter:ttimeFilter}},loadAssetPickListData:function(){var _this=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,util_picklist__WEBPACK_IMPORTED_MODULE_40__/* .getFieldOptions */._K)({field:{lookupModuleName:"asset",skipDeserialize:!0}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this.$message.error(error.message||"Error Occured"):_this.assets=options;case 6:case"end":return _context.stop()}}),_callee)})))()},prepareReport:function(reportObj,params){var _reportObj$report;if((reportObj.report.chartState&&!["null",null].includes(reportObj.report.chartState)&&"string"===typeof reportObj.report.chartState&&(reportObj.report.chartState=JSON.parse(reportObj.report.chartState),reportObj.report.chartState=this.applyWidgetChartState(reportObj.report.chartState),reportObj.report.chartState.regressionConfig&&!reportObj.regression&&(reportObj.regression=!0,reportObj.regressionConfig=reportObj.report.chartState.regressionConfig),reportObj.report.chartState.common&&reportObj.report.chartState.common.mode&&(reportObj.mode=reportObj.report.chartState.common.mode,reportObj.filters=reportObj.report.chartState.common.filters,reportObj.sorting=reportObj.report.chartState.common.sorting)),this.isRangeMode(reportObj),null!==reportObj&&void 0!==reportObj&&reportObj.appliedAssetFilter)&&(null===reportObj||void 0===reportObj||null===(_reportObj$report=reportObj.report)||void 0===_reportObj$report||null===(_reportObj$report=_reportObj$report.chartState)||void 0===_reportObj$report||null===(_reportObj$report=_reportObj$report.dataPoints)||void 0===_reportObj$report?void 0:_reportObj$report.length)>0)for(var dataPointIndex in reportObj.report.chartState.dataPoints){var _reportObj$appliedAss,_reportObj$appliedAss2,dataPoint=reportObj.report.chartState.dataPoints[dataPointIndex];if(null!==reportObj&&void 0!==reportObj&&null!==(_reportObj$appliedAss=reportObj.appliedAssetFilter)&&void 0!==_reportObj$appliedAss&&_reportObj$appliedAss.name&&""!==(null===reportObj||void 0===reportObj||null===(_reportObj$appliedAss2=reportObj.appliedAssetFilter)||void 0===_reportObj$appliedAss2?void 0:_reportObj$appliedAss2.name)){var label=reportObj.appliedAssetFilter.name+" ( "+dataPoint.name+" )";label!==dataPoint.label&&(dataPoint.label=label)}}var report={};if(report["options"]=this.prepareReportOptions(reportObj,params),report["data"]=this.prepareReportData(reportObj,report.options),report["booleanData"]=this.prepareBooleanData(reportObj),report["reportType"]=reportObj.report.type,reportObj.report.defaultDurationUnit&&(report["defaultDurationUnit"]=reportObj.report.defaultDurationUnit),reportObj.Readingdp&&(report["Readingdp"]=reportObj.Readingdp),reportObj.scatterConfig&&(report["scatterConfig"]=reportObj.scatterConfig),report.scatterConfig){var _step,xMap={},_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(report.scatterConfig);try{var _loop=function(){var config=_step.value,xAxis="x";if(config.yAxis)if(config.yAxis.aliases.actual)xAxis=config.yAxis.aliases.actual;else{var match=report.options.dataPoints.find((function(dp){return parseInt(dp.parentId)===parseInt(config.yAxis.parentId)&&parseInt(dp.fieldId)===parseInt(config.yAxis.yAxis.fieldId)}));match&&(xAxis=match.key)}if(config.xAxis&&config.xAxis.length){var _step2,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(config.xAxis);try{var _loop2=function(){var xObject=_step2.value;if(xObject.aliases.actual)xMap[xObject.aliases.actual]=xAxis;else{var _match=report.options.dataPoints.find((function(dp){return parseInt(dp.parentId)===parseInt(xObject.parentId)&&parseInt(dp.fieldId)===parseInt(xObject.yAxis.fieldId)}));_match&&(xMap[_match.key]=xAxis)}};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop2()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}report["xMap"]=xMap,reportObj["xMap"]=xMap}reportObj.report.reportState&&reportObj.report.reportState.groupByTimeAggr>0?report.options["isGroupedByTime"]=!0:report.options["isGroupedByTime"]=!1,(1===reportObj.report.type||3===reportObj.report.type||"date_time"===report.options.axis.x.datatype||"date"===report.options.axis.x.datatype||report.Readingdp&&4===reportObj.report.type)&&(report["dateRange"]=this.prepareDateRange(reportObj)),this.getXColorMap(report,reportObj.report.chartState),this.applyDefaultOptionsForModuleReport(report,reportObj.report.chartState);
// reading as x axis
var xDataPoint=reportObj.scatterConfig?null:report.options.dataPoints.find((function(dp){return"x"===dp.axes}));if(xDataPoint&&report.data){var reportDataPoint=reportObj.report.dataPoints.find((function(rdp){return rdp.name===xDataPoint.key||rdp.aliases&&rdp.aliases.actual===xDataPoint.key}));reportDataPoint&&(report.options.axis.x.datatype=reportDataPoint.yAxis.dataTypeEnum.toLowerCase(),report.data.x=report.data[xDataPoint.key],xDataPoint.visible=!1,reportDataPoint.xDataPoint&&!0===reportDataPoint.xDataPoint&&report.options.axis.x.label.text===reportDataPoint.xAxis.label&&(report.options.axis.x.label.text=reportDataPoint.name),report.options.axis.x.label.text===reportDataPoint.xAxis.label&&(report.options.axis.x.label.text=reportDataPoint.yAxis.label))}else if(!reportObj.scatterConfig){var _xDataPoint=reportObj.report.dataPoints.find((function(dp){return!0===dp.xDataPoint}));_xDataPoint&&report.data&&(report.options.axis.x.datatype=_xDataPoint.yAxis.dataTypeEnum.toLowerCase(),
// report.data.x = report.data[xDataPoint.aliases.actual]
report.options.axis.x.label.text!==_xDataPoint.xAxis.label||reportObj.report.chartState||(report.options.axis.x.label.text=_xDataPoint.yAxis.label))}if(null!=report.booleanData){var filterDp,filterDPS=[];if(report.options.dataPoints.forEach((function(dp){5===dp.pointType&&filterDPS.push(dp.key)})),report.booleanData.hasOwnProperty("Filter")?filterDp=report.booleanData["Filter"]:report.booleanData.hasOwnProperty("TimeFilter")?filterDp=report.booleanData["TimeFilter"]:report.booleanData.hasOwnProperty("Cri_A")&&(filterDp=report.booleanData["Cri_A"]),null!=filterDp&&!reportObj.scatterConfig){report.options&&report.options.line&&(report.options.line.connectNull=!1);var intervals=[],filterRegion=filterDp.filter((function(dp){return 1==dp.value}));filterRegion.forEach((function(interval){intervals.push(interval.start),intervals.push(interval.end)})),report.data.x=report.data.x.concat(intervals).sort();var _loop3=function(){if(!filterDPS.includes(key)&&"x"!==key){var dp=report.data[key];intervals.forEach((function(interval){var first=report.data.x.indexOf(interval),last=report.data.x.lastIndexOf(interval),isAdded=!0;-1!=first&&isAdded&&(dp.splice(first,0,null),isAdded=!1),-1!=last&&isAdded&&dp.splice(last,0,null)}))}};for(var key in report.data)_loop3()}(!report.options.settings.filterBar&&null!=filterDp||reportObj.scatterConfig)&&(report.options.dataPoints=report.options.dataPoints.filter((function(dp){return 5!=dp.pointType})))}else report.options.line.connectNull=!0;return report.data=Object.freeze(report.data),report.booleanData=Object.freeze(report.booleanData),report},applyWidgetChartState:function(chartState){var _this2=this;return this.config&&this.config.widget&&this.config.widget.dataOptions&&this.config.widget.dataOptions.hasOwnProperty("chartType")&&this.config.widget.dataOptions.hasOwnProperty("chartTypeInt")&&this.config.widget.dataOptions.chartTypeInt&&(chartState.type=this.getFullChartList().find((function(rt){return rt.chartTypeInt===_this2.config.widget.dataOptions.chartTypeInt})).value),chartState},prepareDateRange:function(reportObj){var period=this.getTimePeriod(reportObj);return{operatorId:reportObj.dateRange.operatorId,operationOn:reportObj.dateRange?reportObj.dateRange.operationOn:null,value:reportObj.dateRange.offset,offset:-reportObj.dateRange.offset,time:reportObj.dateRange.value,rangeType:_mixins_NewDateHelper__WEBPACK_IMPORTED_MODULE_37__/* ["default"] */.Z.DateType.properties[reportObj.dateRange.operationOnId].code,period:period,range:this.isSeriesMode(reportObj.mode)?null:this.getDateRange(reportObj.dateRange.value,period,reportObj.dateRange.operationOn)}},prepareHighResDateRange:function(reportObj){var period=this.getTimePeriod(reportObj);return{operatorId:reportObj.dateRange.operatorId,value:reportObj.dateRange.offset,offset:-reportObj.dateRange.offset,time:reportObj.dateRange.value,rangeType:_mixins_NewDateHelper__WEBPACK_IMPORTED_MODULE_37__/* ["default"] */.Z.DateType.properties[reportObj.dateRange.operationOnId].code,period:period,range:this.isSeriesMode(reportObj.mode)?null:this.getDateRange(reportObj.dateRange.value,period,reportObj.dateRange.operationOn)}},prepareReportOptions:function(reportObj,params){var reportOptions=this.getReportOptions(reportObj);reportObj.mode&&(reportOptions.common||(reportOptions.common={}),reportOptions.common.mode=reportObj.mode,reportOptions.common.type=reportObj.report.type,reportObj.filters&&(reportOptions.common.filters=reportObj.filters,reportOptions.common.sorting=reportObj.sorting)
/* reportOptions.common = {
          mode: reportObj.mode,
          buildingIds: reportObj.buildingIds
        } */),!reportObj.report.chartState&&reportObj.scatterConfig&&(newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_33__/* ["default"] */.Z.options.general.grid.x=!0);var defaultOptions={},mergedOptions=util_deepmerge__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */.Z.objectAssignDeep(defaultOptions,newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_33__/* ["default"] */.Z.options,{style:newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_33__/* ["default"] */.Z.style},reportOptions);return reportObj.report.template&&(mergedOptions.reportTemplate=JSON.parse(reportObj.report.template)),reportObj.hasOwnProperty(contextNames.REGRESSION)&&!0===reportObj.regression&&(mergedOptions.settings.safelimit=!1,reportObj.report.chartState?mergedOptions.general.point=reportObj.report.chartState.general.point:mergedOptions.general.point={show:!0,pattern:[]}),(reportObj.Readingdp||reportObj.scatterConfig)&&(mergedOptions.settings.safelimit=!1,reportObj.report.chartState?mergedOptions.general.point=reportObj.report.chartState.general.point:(mergedOptions.general.point={show:!0,pattern:[]},mergedOptions.type="scatter")),reportObj.showReportFilter&&(mergedOptions.settings.filterBar=!0),reportObj.report.chartState&&(reportObj.report.chartState.settings&&(params&&null!=params.showAlarms&&(mergedOptions.settings.alarm=params.showAlarms,mergedOptions.settings.safelimit=params.showSafeLimit),reportObj.report.chartState.settings.alarm&&(mergedOptions.settings.alarm=reportObj.report.chartState.settings.alarm),reportObj.report.chartState.settings.enableAlarm||(mergedOptions.settings.alarm=!1),mergedOptions.settings.chart=reportObj.report.chartState.settings.chart),reportObj.report.chartState&&reportObj.report.chartState.legend&&(mergedOptions.legend=reportObj.report.chartState.legend)),reportObj.report.dataPoints.find((function(rd){return"boolean"===rd.yAxis.dataTypeEnum.toLowerCase()||"enum"===rd.yAxis.dataTypeEnum.toLowerCase()}))&&(mergedOptions.settings.chartMode="multi"),reportObj.report.reportState&&reportObj.report.reportState.groupByTimeAggr>0&&reportObj.report.dataPoints.length>1?mergedOptions.settings.chartMode="multi":reportObj.report.reportState&&reportObj.report.reportState.groupByTimeAggr>0&&(mergedOptions.settings.chartMode="single"),reportObj.report.chartState&&reportObj.report.chartState.trendLine&&(mergedOptions.trendLine=reportObj.report.chartState.trendLine),reportObj.report.defaultDurationUnit&&(mergedOptions.defaultDurationUnit=reportObj.report.defaultDurationUnit),mergedOptions},prepareBooleanReport:function(aggr){var alarmData={x:[],alarms:[]},alarms=aggr.alarms,alarmRegions=[];if(alarms&&alarms.length&&alarms)for(var index=0;index<alarms.length;index++){var d=alarms[index];if(d.alarm&&d.alarm.length){var startTime=this.$options.filters.toDateFormat(d.time,"MM-DD-YYYY HH:mm");alarmData.x.push(startTime,null),alarmData.alarms.push(index);var now=this.$options.filters.now(),end=alarms[index+1].time;end>now&&(end=now),alarmRegions.push({start:startTime,end:this.$options.filters.toDateFormat(end,"MM-DD-YYYY HH:mm"),value:index,count:d.alarm.length,alarms:d.alarm.filter((function(alarmId){return aggr.alarmInfo[alarmId]})).map((function(alarmId){return aggr.alarmInfo[alarmId]}))})}}return{data:alarmData,regions:alarmRegions}},prepareRelatedAlarms:function(alarmsList){var _step3,result=[],_iterator3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(alarmsList);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var alarm=_step3.value,alarmObj=this.prepareBooleanReport(alarm);alarmObj.barSize="medium",alarmObj.alarmTitle=alarm.alarmTitle,result.push(alarmObj)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return result},getReportOptions:function(reportObj){var yAxisOptions={},y2AxisOptions={},unitVsAxes={};if(reportObj.report.chartState&&!reportObj.regression)yAxisOptions=reportObj.report.chartState.axis.y,y2AxisOptions=reportObj.report.chartState.axis.y2,
// TODO migrate
yAxisOptions.label.type||(yAxisOptions.label.type="custom",y2AxisOptions.label.type="custom"),y2AxisOptions.unit&&!1!==y2AxisOptions.show&&(unitVsAxes[y2AxisOptions.unit]="y2");else{var _yAxis$label,yAxis=null,y2Axis=null;if(reportObj.hasOwnProperty(contextNames.REGRESSION)&&!0===reportObj.regression){
// regression graphs cannot have multi charts
var yDataPoint=reportObj.report.dataPoints.find((function(dP){return dP.yAxis.fieldId===reportObj.regressionConfig[0].yAxis.readingId&&dP.metaData.parentIds[0]===reportObj.regressionConfig[0].yAxis.parentId}));yDataPoint&&(yAxis=yDataPoint.yAxis,unitVsAxes[yAxis.unitStr]="y")}else{var _step4,_iterator4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.dataPoints);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var dataPoint=_step4.value;reportObj.Readingdp&&!0===dataPoint.xDataPoint?reportObj.Readingdp=dataPoint:4===dataPoint.yAxis.dataType&&yAxis||unitVsAxes[dataPoint.yAxis.unitStr]||(yAxis?y2Axis||(y2Axis=dataPoint.yAxis,(yAxis.unitStr||2!==reportObj.report.type)&&(unitVsAxes[y2Axis.unitStr]="y2")):(yAxis=dataPoint.yAxis,(yAxis.unitStr||2!==reportObj.report.type)&&(unitVsAxes[yAxis.unitStr]="y")))}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}yAxisOptions={label:{text:null===(_yAxis$label=yAxis.label)||void 0===_yAxis$label?void 0:_yAxis$label.toUpperCase(),type:"auto"},datatype:yAxis.dataTypeEnum.toLowerCase(),unit:yAxis.unitStr},y2Axis&&(y2AxisOptions={show:!0,label:{text:y2Axis.label.toUpperCase(),type:"auto"},datatype:y2Axis.dataTypeEnum.toLowerCase(),unit:y2Axis.unitStr})}var axisOptions={},xAxis=reportObj.report.dataPoints[0].xAxis;7===reportObj.report.analyticsType&&(xAxis=reportObj.report.dataPoints[0].yAxis);var xDataPoint=null;if(!reportObj.report.chartState||1!==reportObj.report.type||reportObj.regression||reportObj.scatterConfig){var text;if("resource"===xAxis.fieldName&&reportObj.report.xAggrEnum)
// for space aggregation -> module analytics
text=reportObj.report.xAggrEnum;else if(reportObj.hasOwnProperty(contextNames.REGRESSION)&&!0===reportObj.regression)xDataPoint=reportObj.report.dataPoints.filter((function(dP){return dP.yAxis.fieldId===reportObj.regressionConfig[0].xAxis[0].readingId&&dP.metaData.parentIds[0]===reportObj.regressionConfig[0].xAxis[0].parentId})),xDataPoint=xDataPoint[0],xDataPoint&&(text=xDataPoint.yAxis.label,xAxis=xDataPoint.xAxis);else if(reportObj.scatterConfig){xDataPoint=reportObj.report.dataPoints.filter((function(dP){return dP.xDataPoint})),text="";var _step5,_iterator5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(xDataPoint);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var point=_step5.value;if(point){var labels=text.split(" & ");text=""==text||labels.includes(point.name.match(/\(([^)]+)\)/)[1])?point.name.match(/\(([^)]+)\)/)[1]:text+" & "+point.name.match(/\(([^)]+)\)/)[1],xAxis=point.xAxis}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}else reportObj.Readingdp?(xDataPoint=reportObj.Readingdp,xDataPoint&&(text=xDataPoint.name,xAxis=xDataPoint.xAxis)):text=reportObj.report&&reportObj.report.reportState&&reportObj.report.reportState.reportResourceAliases&&"mvproject"===reportObj.report.reportState.reportResourceAliases.X?"M&Vs":6===reportObj.mode?"Site":7===reportObj.mode?"Building":8===reportObj.mode?"Asset":9===reportObj.mode?"Floor":10===reportObj.mode?"Space":2===reportObj.mode?"Asset":xAxis.label;axisOptions.x={label:{text:text}}}else axisOptions.x=reportObj.report.chartState.axis.x,axisOptions.rotated=reportObj.report.chartState.axis.rotated,axisOptions.showy2axis=reportObj.report.chartState.axis.showy2axis;if(axisOptions.x.datatype="siteId"===xAxis.fieldName?"string":xAxis.dataTypeEnum.toLowerCase(),reportObj.report.chartState&&["number","decimal"].includes(axisOptions.x.datatype)&&(axisOptions.x.range={},null!==reportObj.report.chartState.axis.x.range.min&&(axisOptions.x.range.min=parseFloat(reportObj.report.chartState.axis.x.range.min)),null!==reportObj.report.chartState.axis.x.range.max&&(axisOptions.x.range.max=parseFloat(reportObj.report.chartState.axis.x.range.max))),reportObj.regression&&(axisOptions.x.tick={fit:!1}),reportObj.Readingdp||reportObj.scatterConfig){switch(xDataPoint=reportObj.Readingdp,axisOptions.x.tick||(axisOptions.x.tick={}),axisOptions.x.tick.fit=!1,xDataPoint.yAxis.dataType){case 2:axisOptions.x.datatype="number";break;case 3:axisOptions.x.datatype="decimal";break;default:axisOptions.x.datatype="string";break}var period=this.getTimePeriod(reportObj);axisOptions.x.time={period:period,format:this.getDateFormat(period)},reportObj.report.chartState&&(axisOptions.x.range={},null!==reportObj.report.chartState.axis.x.range.min&&(axisOptions.x.range.min=reportObj.report.chartState.axis.x.range.min),null!==reportObj.report.chartState.axis.x.range.max&&(axisOptions.x.range.max=reportObj.report.chartState.axis.x.range.max))}if(this.isSeriesMode(reportObj.mode)||reportObj.hasOwnProperty(contextNames.REGRESSION)&&!0===reportObj.regression&&!reportObj.report.chartState)if(reportObj.regression)switch(axisOptions.x.tick||(axisOptions.x.tick={}),axisOptions.x.tick.fit=!1,xDataPoint.yAxis.dataType){case 2:axisOptions.x.datatype="number";break;case 3:axisOptions.x.datatype="decimal";break;default:axisOptions.x.datatype="string";break}else axisOptions.x.datatype="string";if(-1!==axisOptions.x.datatype.indexOf("date")){var _period=this.getTimePeriod(reportObj);axisOptions.x.time={period:_period,format:this.getDateFormat(_period)}}axisOptions.y=yAxisOptions,axisOptions.y2=y2AxisOptions;var dataPoints=this.prepareDataPoints(reportObj,unitVsAxes);this.isSeriesMode(reportObj.mode)||this.prepareYAxes(axisOptions,dataPoints,reportObj.report.dataPoints);
// else if(reportObj.mode === 8){
//   this.prepareYAxes(axisOptions, dataPoints, reportObj.report.dataPoints)
// }
var multichartOptions={};this.isSeriesMode(reportObj.mode)||(multichartOptions=this.getMultichartOptions(axisOptions,dataPoints,reportObj.report.dataPoints,reportObj.report.chartState,reportObj));var widgetLegend=this.prepareWidgetLegends(reportObj,dataPoints),safeLimit=this.prepareSafelimit(reportObj),points=[];dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dp.children)):points.push(dp)}));var benchmark=reportObj.report.chartState&&reportObj.report.chartState.benchmark?reportObj.report.chartState.benchmark:{show:!1,label:"Benchmark",variances:{}};points.forEach((function(dp){benchmark.variances[dp.alias]||(benchmark.variances[dp.alias]=[])}));var isRange=reportObj.report.chartState&&reportObj.report.chartState.combo?reportObj.report.chartState.combo:!(!reportObj.report.rangeModeEnabled||!0!==reportObj.report.rangeModeEnabled),regressionConfig=reportObj.regression?reportObj.regressionConfig:null,defaultScatter=reportObj.report.chartState&&reportObj.report.chartState.scatter?reportObj.report.chartState.scatter:{shape:"circle",color:{mode:null,pallete:1,colors:["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"],reading:null},size:{mode:null,reading:null}};if(defaultScatter.color&&defaultScatter.color.mode){var _points=dataPoints.filter((function(dp){return"x"!==dp.axes&&!dp.isBaseLine&&dp.pointCustomization&&dp.visible}));_points.length>1&&(defaultScatter.color.mode=null)}if(reportObj.report.chartState&&(1===reportObj.report.type||3===reportObj.report.type||4===reportObj.report.type))return reportObj.report.chartState.combo=isRange,reportObj.report.chartState.axis=axisOptions,reportObj.report.chartState.dataPoints=dataPoints,reportObj.report.chartState.multichart=multichartOptions,reportObj.report.chartState.widgetLegend=widgetLegend,reportObj.report.chartState.benchmark=benchmark,reportObj.report.chartState.safeLimit=safeLimit,reportObj.report.chartState.scatter=defaultScatter,reportObj.report.chartState.regressionConfig=regressionConfig,reportObj.report.chartState;var systemGroupPoints=dataPoints.filter((function(element){return"systemgroup"===element.type})),isSystemGroup=systemGroupPoints.length>0,defaultChartType=this.isSeriesMode(reportObj.mode)||reportObj.xAggr>0?"bar":"area";return defaultChartType=!0===isSystemGroup?"stackedbar":reportObj.Readingdp||reportObj.scatterConfig?"scatter":defaultChartType,{type:reportObj.report.chartState?reportObj.report.chartState.type:defaultChartType,axis:axisOptions,regressionConfig:regressionConfig,combo:isRange,multichart:multichartOptions,isSystemGroup:isSystemGroup,dataPoints:dataPoints,widgetLegend:widgetLegend,benchmark:benchmark,safeLimit:safeLimit,scatter:defaultScatter}},handleAxisChartState:function(rObj,stateResultObject,newResultObject){stateResultObject?(newResultObject.report&&newResultObject.report.chartState&&(rObj.options.axis.rotated=newResultObject.report.chartState.axis.rotated,rObj.options.axis.showy2axis=newResultObject.report.chartState.axis.showy2axis),stateResultObject.report.dataPoints[0].xAxis.fieldId===newResultObject.report.dataPoints[0].xAxis.fieldId&&(rObj.options.axis.x.label=newResultObject.report.chartState.axis.x.label,rObj.options.axis.x.tick=newResultObject.report.chartState.axis.x.tick,rObj.options.axis.x.show=newResultObject.report.chartState.axis.x.show,rObj.options.axis.x.tick.direction=newResultObject.report.chartState.axis.x.tick.direction)):newResultObject.report&&newResultObject.report.chartState&&(rObj.options.axis.rotated=newResultObject.report.chartState.axis.rotated,rObj.options.axis.showy2axis=newResultObject.report.chartState.axis.showy2axis,rObj.options.axis.x.label=newResultObject.report.chartState.axis.x.label,rObj.options.axis.x.tick=newResultObject.report.chartState.axis.x.tick,rObj.options.axis.x.show=newResultObject.report.chartState.axis.x.show,rObj.options.axis.x.tick.direction=newResultObject.report.chartState.axis.x.tick.direction)},getXColorMap:function(report,chartState){if(report.data&&report.data.x&&2===Object.keys(report.data).length&&report.data.x.length<=15){for(var colors=newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.newColorPicker(report.data.x.length),xColorMap={},i=0;i<report.data.x.length;i++){var xVal=report.data.x[i];xColorMap[xVal]=chartState&&chartState.xColorMap&&chartState.xColorMap[xVal]?chartState.xColorMap[xVal]:colors[i]}report.options.xColorMap=xColorMap}},applyDefaultOptionsForModuleReport:function(report,chartState){2===report.options.common.type&&(report.options.general.points=chartState&&chartState.general.points?chartState.general.points:{show:!1},report.options.general.dataOrder=chartState&&chartState.general.dataOrder?chartState.general.dataOrder:"asc",report.options.general.hideZeroes=!(!chartState||"undefined"===typeof chartState.general.hideZeroes)&&chartState.general.hideZeroes,report.options.general.grid=chartState&&chartState.general.grid?chartState.general.grid:{x:!1,y:!0},report.options.general.labels=chartState?chartState.general.labels:"stackedbar"!==report.options.type,report.options.donut.labelType=chartState&&chartState.donut&&chartState.donut.labelType?chartState.donut.labelType:"actual",report.options.donut.centerText=chartState&&chartState.donut&&chartState.donut.centerText.primaryText?chartState.donut.centerText:{primaryText:"_sum",primaryUnit:null,primaryRoundOff:!1,secondaryText:report.options.dataPoints[0].label,secondaryUnit:null,secondaryRoundOff:!1}),chartState&&chartState.general.normalizeStack&&(report.options.general.normalizeStack=chartState.general.normalizeStack),chartState&&chartState.bar&&chartState.bar.showGroupTotal&&(report.options.bar.showGroupTotal=chartState.bar.showGroupTotal),chartState&&chartState.bar&&chartState.bar.groupTotalLabel&&(report.options.bar.groupTotalLabel=chartState.bar.groupTotalLabel)},getMultichartOptions:function(mainAxisOptions,dataPoints,reportDataPoints,chartState,reportObj){var _step6,multichartOptions={},_iterator6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dataPoints);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var dp=_step6.value,dpList=[];if("datapoint"===dp.type)
// dp.axes = 'y'
dpList.push(dp);else if("systemgroup"===dp.type)dpList.push(dp);else if("rangeGroup"===dp.type)dpList.push(dp);else if(dp.type===dataTypes.GROUP&&dp.pointType===dataTypes.REGRESSION)dpList.push(dp);else{var _step7,yAxis=null,y2Axis=null,unitVsAxes={},_iterator7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dp.children);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var c=_step7.value;c.unit&&(unitVsAxes[c.unit]||(yAxis?y2Axis||(unitVsAxes[c.unit]="y2",y2Axis=c.unit):(unitVsAxes[c.unit]="y",yAxis=c.unit)),c.axes=unitVsAxes[c.unit])}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}dpList.push.apply(dpList,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dp.children))}var axisOptions={y:{label:{type:"auto"}},y2:{label:{type:"auto"}}};this.prepareYAxes(axisOptions,dpList,reportDataPoints);var multichartYTickcount={y:{ticks:{count:3}},y2:{ticks:{count:3}}},newAxisOptions={};util_deepmerge__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */.Z.objectAssignDeep(newAxisOptions,newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_33__/* ["default"] */.Z.options.axis,multichartYTickcount,mainAxisOptions,axisOptions);var mKey=dp.type+"_"+(dp.key?dp.key:dp.label);chartState&&chartState.multichart&&chartState.multichart[mKey]?(multichartOptions[mKey]={axis:chartState.multichart[mKey].axis},multichartOptions[mKey].axis.y.label.type||(multichartOptions[mKey].axis.y.label.type="custom",multichartOptions[mKey].axis.y2.label.type="custom")):multichartOptions[mKey]={axis:newAxisOptions}}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}return multichartOptions},countUnits:function(dataPoints){var initialUnitCount={};for(var index in dataPoints)if("group"===dataPoints[index].type)for(var childIndex in dataPoints[index].children)initialUnitCount.hasOwnProperty(dataPoints[index].unitStr)?initialUnitCount[dataPoints[index].children[childIndex].unitStr]=initialUnitCount[dataPoints[index].children[childIndex].unitStr]+1:initialUnitCount[dataPoints[index].children[childIndex].unitStr]=1;else initialUnitCount.hasOwnProperty(dataPoints[index].unitStr)?initialUnitCount[dataPoints[index].unitStr]=initialUnitCount[dataPoints[index].unitStr]+1:initialUnitCount[dataPoints[index].unitStr]=1;return initialUnitCount},countMetrics:function(dataPoints){var initialMetricCount={};for(var index in dataPoints)if("group"===dataPoints[index].type)for(var childIndex in dataPoints[index].children)initialMetricCount.hasOwnProperty(dataPoints[index].metricEnum)?initialMetricCount[dataPoints[index].children[childIndex].metricEnum]=initialMetricCount[dataPoints[index].children[childIndex].metricEnum]+1:initialMetricCount[dataPoints[index].children[childIndex].metricEnum]=1;else initialMetricCount.hasOwnProperty(dataPoints[index].metricEnum)?initialMetricCount[dataPoints[index].metricEnum]=initialMetricCount[dataPoints[index].metricEnum]+1:initialMetricCount[dataPoints[index].metricEnum]=1;return initialMetricCount},getLastGroupKey:function(dataPoints){var largestGroupKey=0,groups=dataPoints.filter((function(db){return"group"===db.type}));if(0===groups.length)return largestGroupKey;for(var index in dataPoints)if("group"===dataPoints[index].type){if(!(dataPoints[index].groupId>largestGroupKey))continue;largestGroupKey=dataPoints[index].groupId}return largestGroupKey},groupPoints:function(unitCount,dataPoints){for(var lastGroupKey=this.getLastGroupKey(dataPoints),_loop4=function(index){if("group"===dataPoints[index].type&&(""===dataPoints[index].unit||null===dataPoints[index].unit))return 0;// continue
if(unitCount[dataPoints[index].unitStr]>1&&null!==dataPoints[index].unitStr){var group=dataPoints.filter((function(db){return"group"===db.type&&db.unit===dataPoints[index].unitStr&&""!==db.unit}));if(0!==group.length){
// add to already existing group
var removedDataPoint=dataPoints.splice(index,1),groupIndex=dataPoints.indexOf(group[0]);dataPoints[groupIndex].children.push(removedDataPoint[0])}else if("group"!==dataPoints[index].type){
// add a new group
var dataPoint=dataPoints.splice(index,1),temp={label:dataPoint[0].unitStr,children:[],type:"group",chartType:"",dataType:dataPoint[0].dataType,groupKey:lastGroupKey+=1,unit:dataPoint[0].unitStr};
// new group temp object
temp.children.push(dataPoint[0]),dataPoints.push(temp)}}else{if(1===unitCount[dataPoints[index].unitStr]&&null!==dataPoints[index].unitStr)return 0;// continue
// dataType check if unitStr is null and dataType is boolean
if("boolean"===dataPoints[index].dataType.trim().toLowerCase()){
// create new group for boolean
var _group=dataPoints.filter((function(db){return"group"===db.type&&null===db.unit&&"boolean"===db.dataType.trim().toLowerCase()}));if(0!==_group.length){var _dataPoint=dataPoints.splice(index,1),_groupIndex=dataPoints.indexOf(_group[0]);dataPoints[_groupIndex].children.push(_dataPoint[0])}else{var _dataPoint2=dataPoints.splice(index,1),_temp={label:"Status",children:[],type:"group",chartType:"",groupKey:lastGroupKey+=1,unit:null,dataType:_dataPoint2[0].dataType};_temp.children.push(_dataPoint2[0]),dataPoints.push(_temp)}}else{if("enum"!==dataPoints[index].dataType.trim().toLowerCase())return 0;// continue
var _group2=dataPoints.filter((function(db){return"group"===db.type&&null===db.unit&&"enum"===db.dataType.trim().toLowerCase()}));if(0!==_group2.length){var _dataPoint3=dataPoints.splice(index,1),_groupIndex2=dataPoints.indexOf(_group2[0]);dataPoints[_groupIndex2].children.push(_dataPoint3[0])}else{var _dataPoint4=dataPoints.splice(index,1),_temp2={label:"Status",children:[],type:"group",chartType:"",groupKey:lastGroupKey+=1,unit:null,dataType:_dataPoint4[0].dataType};_temp2.children.push(_dataPoint4[0]),dataPoints.push(_temp2)}}}},index=Object.keys(dataPoints).length-1
// grouping
;index>=0;index--)_loop4(index);return dataPoints},groupPointsByMetric:function(metricCount,dataPoints){var _this3=this,lastGroupKey=this.getLastGroupKey(dataPoints),finalDataPoints=[],nonBooleanPoints=[],allPoints=[];dataPoints.forEach((function(dp){"group"===dp.type?allPoints.push.apply(allPoints,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dp.children)):allPoints.push(dp)})),allPoints.forEach((function(dp){4===dp.dataTypeId||8===dp.dataTypeId?finalDataPoints.push(dp):nonBooleanPoints.push(dp)}));for(
// grouping
var _loop5=function(index){if("group"===nonBooleanPoints[index].type)finalDataPoints.push(nonBooleanPoints[index]);else if(metricCount[nonBooleanPoints[index].metricEnum]>0&&null!==nonBooleanPoints[index].metricEnum){var group=finalDataPoints.filter((function(db){return"group"===db.type&&db.metricEnum===nonBooleanPoints[index].metricEnum&&""!==db.metricEnum}));if(0!==group.length){
// add to already existing group
var removedDataPoint=nonBooleanPoints.splice(index,1),groupIndex=finalDataPoints.indexOf(group[0]);finalDataPoints[groupIndex].children.push(removedDataPoint[0])}else if("group"!==nonBooleanPoints[index].type){
// add a new group
var dataPoint=nonBooleanPoints.splice(index,1),temp={label:_this3.$options.filters.pascalCase(dataPoint[0].metricEnum),children:[],type:"group",chartType:"",dataType:dataPoint[0].dataType,groupKey:lastGroupKey+=1,unit:dataPoint[0].unitStr,metricEnum:dataPoint[0].metricEnum};
// new group temp object
temp.children.push(dataPoint[0]),finalDataPoints.push(temp)}}else finalDataPoints.push(nonBooleanPoints[index])},index=Object.keys(nonBooleanPoints).length-1;index>=0;index--)_loop5(index);return finalDataPoints},hasDiffUnit:function(newDataPoints,finalDataPoints){var newDataPointsUnitKeys=Object.keys(this.countUnits(newDataPoints)),finalDataPointsUnitKeys=Object.keys(this.countUnits(finalDataPoints));for(var newUnit in newDataPointsUnitKeys)if(!finalDataPointsUnitKeys.includes(newDataPointsUnitKeys[newUnit]))return!0;return!1},hasDiffMetrics:function(newDataPoints,finalDataPoints){var newDataPointsUnitKeys=Object.keys(this.countMetrics(newDataPoints)),finalDataPointsUnitKeys=Object.keys(this.countMetrics(finalDataPoints));for(var newUnit in newDataPointsUnitKeys)if(!finalDataPointsUnitKeys.includes(newDataPointsUnitKeys[newUnit]))return!0;return!1},groupNonBooleanPoints:function(dataPoints){if(!dataPoints||!dataPoints.length)return dataPoints;
// Assuming no group will be present
var booleanPoints=[],nonBooleanPoints=[],allPoints=[];dataPoints.forEach((function(dp){"group"===dp.type?allPoints.push.apply(allPoints,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dp.children)):allPoints.push(dp)})),allPoints.forEach((function(dp){4===dp.dataTypeId||8===dp.dataTypeId?booleanPoints.push(dp):nonBooleanPoints.push(dp)}));var newPoints=[];return booleanPoints.length&&newPoints.push({label:"Status",children:booleanPoints,type:"group",chartType:"",groupKey:1,unit:null,dataType:booleanPoints[0].dataType}),nonBooleanPoints.length&&newPoints.push({label:"Timeseries",children:nonBooleanPoints,type:"group",chartType:"",dataType:nonBooleanPoints[0].dataType,groupKey:2,unit:nonBooleanPoints[0].unitStr}),newPoints},setColorForNonExisting:function(finalDataPoints,colors){var _step8,colorIndex=0,_iterator8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(finalDataPoints);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var dataPoint=_step8.value;if("datapoint"===dataPoint.type)dataPoint.color||(dataPoint.color=colors[colorIndex],colorIndex++);else if("rangeGroup"===dataPoint.type)dataPoint.color||(dataPoint.color=colors[colorIndex],colorIndex++);else{var _step9,_iterator9=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var dp=_step9.value;dp.color||(dp.color=colors[colorIndex],colorIndex++)}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}}}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}return finalDataPoints},getLabelWithCaps:function(name){var firstChar=name.charAt(0);return firstChar=firstChar.toUpperCase(),name=name.toLowerCase(),name=name.slice(1),name=firstChar+name,name},getLabelsForSpecialCases:function(dataPoint){return"resource"!==dataPoint.name||21!==dataPoint.xAggr&&22!==dataPoint.xAggr&&23!==dataPoint.xAggr?1===dataPoint.yAxis.aggr?"Number of "+dataPoint.yAxis.moduleName+"s":dataPoint.name:this.getLabelWithCaps(dataPoint.xAggrEnum)},mergeDataPointsChnages:function(resultdataPoints,stateDataPoints){
// to check the state dataPoints name changes with result datapoints
return stateDataPoints&&stateDataPoints.length&&resultdataPoints&&resultdataPoints.length&&stateDataPoints.forEach((function(rt){rt.name=resultdataPoints.find((function(rl){rl.aliases&&rl.aliases.actual&&rl.aliases.actual===rt.alias&&(3===rl.type||5===rl.type)&&(rt.label=rl.name)}))})),stateDataPoints},setDataPointAxis:function(reportObj,dataPoint,statePoint,unitVsAxes,dataPointNumber){var _dataPoint$yAxis,axis=null;if(!reportObj.hasOwnProperty(contextNames.REGRESSION)||!0!==reportObj.regression)return reportObj.Readingdp||reportObj.scatterConfig?!0===dataPoint.xDataPoint?"x":(axis=unitVsAxes[dataPoint.yAxis.unitStr]?unitVsAxes[dataPoint.yAxis.unitStr]:2===reportObj.report.type&&dataPointNumber>0?"y2":"y",axis):reportObj.groupByMetrics?"y":(axis=unitVsAxes[null===dataPoint||void 0===dataPoint||null===(_dataPoint$yAxis=dataPoint.yAxis)||void 0===_dataPoint$yAxis?void 0:_dataPoint$yAxis.unitStr]?unitVsAxes[dataPoint.yAxis.unitStr]:2===reportObj.report.type?statePoint&&null!==statePoint&&statePoint.axes?statePoint.axes:dataPointNumber>0?"y2":"y":"y",axis);if(!dataPoint.yAxis.field)return"y";var _step10,_iterator10=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.regressionConfig);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var config=_step10.value;for(var key in config)if("xAxis"===key||"yAxis"===key){if("yAxis"===key&&config[key].readingId===dataPoint.yAxis.fieldId&&config[key].parentId===dataPoint.metaData.parentIds[0])return axis=config[key].axis,axis;if("xAxis"===key&&config[key][0].readingId===dataPoint.yAxis.fieldId&&config[key][0].parentId===dataPoint.metaData.parentIds[0])return axis=config[key][0].axis,axis}}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}},prepareDataPoints:function(reportObj,unitVsAxes){var _this4=this,existingColors=[],newDataPoints=[],dataPointLabelMap={},shapeArr=["circle","rectangle","triangle","diamond"],noOfDataPoints=reportObj.report.dataPoints.length;reportObj.report.baseLines&&(noOfDataPoints*=1+reportObj.report.baseLines.length);
// let colors = colorHelper.colorPicker(noOfDataPoints)
// let colorIndex = 0
for(var _loop6=function(){var dataPoint=reportObj.report.dataPoints[i];dataPoint.aliases.actual&&(dataPointLabelMap[dataPoint.aliases.actual]=dataPoint.name);var statePoint=null;if(null!==reportObj.report.chartState&&reportObj.report.chartState&&(statePoint=reportObj.report.chartState.dataPoints.find((function(sdp){return sdp.key===dataPoint.aliases.actual}))),!0!==dataPoint.xDataPoint||!reportObj.Readingdp||reportObj.scatterConfig){var dpgroupBy=[],dpgroupByLabelValues={},dpChildren=[],point={buildingId:dataPoint.buildingId?dataPoint.buildingId:-1,visible:6!==dataPoint.type||!reportObj.scatterConfig,label:reportObj.scatterConfig&&dataPoint.name&&dataPoint.name.split("(").length?dataPoint.name.split("(")[0]:dataPoint.name,name:dataPoint.name&&dataPoint.name.split("(").length>1?dataPoint.name.split("(")[1].split(")")[0]:dataPoint.name,key:dataPoint.aliases.actual,alias:dataPoint.aliases.actual,type:"datapoint",chartType:"",
// color: colors[colorIndex],
color:null,
// axes: unitVsAxes[dataPoint.yAxis.unitStr] ? unitVsAxes[dataPoint.yAxis.unitStr] : reportObj.report.type === 2 ? ((i >0) ? 'y2' : 'y') : 'y',
axes:_this4.setDataPointAxis(reportObj,dataPoint,statePoint,unitVsAxes,i),safelimit:!1,aggr:dataPoint.yAxis.aggr,parentId:1!==reportObj.report.type&&3!==reportObj.report.type&&4!==reportObj.report.type||!dataPoint.criteria?null:dataPoint.criteria.conditions["1"].value?parseInt(dataPoint.criteria.conditions["1"].value.trim()):null,
// TODO remove
fieldId:dataPoint.yAxis.fieldId,
// TODO remove
fieldName:dataPoint.yAxis.fieldName,
// TODO remove
metric:dataPoint.yAxis.metricEnum,moduleName:dataPoint.yAxis&&dataPoint.yAxis.module?dataPoint.yAxis.module.name:null,moduleId:dataPoint.yAxis&&dataPoint.yAxis.moduleId?dataPoint.yAxis.moduleId:null,pointType:dataPoint.type,unitStr:dataPoint.yAxis.unitStr,convertTounit:null,metricEnum:dataPoint.yAxis.metricEnum,dataType:dataPoint.yAxis.dataTypeEnum,
// TODO remove
dataTypeId:dataPoint.yAxis.dataType,
// TODO use this everywhere as dataType
enumMap:dataPoint.yAxis.enumMap,groupBy:[],groupByLabelValues:{},xDataPoint:dataPoint.xDataPoint,duplicateDataPoint:dataPoint.duplicateDataPoint,rule_aggr_type:null===dataPoint||void 0===dataPoint?void 0:dataPoint.rule_aggr_type,rightInclusive:null===dataPoint||void 0===dataPoint?void 0:dataPoint.rightInclusive};if("DYNAMIC"===dataPoint.kpiType&&(point["kpiType"]=dataPoint.kpiType),"ENUM"===point.dataType||"SYSTEM_ENUM"===point.dataType){point.enumColorMap={};for(var _i8=0,_Object$keys7=Object.keys(point.enumMap);_i8<_Object$keys7.length;_i8++){var idx=_Object$keys7[_i8];point.enumColorMap[idx]=newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.newColorPicker(1)[0]}}
//scatter customization json added
if(reportObj.scatterConfig&&(point["pointCustomization"]={shape:null!==reportObj.report.chartState&&reportObj.report.chartState&&reportObj.report.chartState.scatter.shape?"predefined"===reportObj.report.chartState.scatter.shape?shapeArr[i%4]:reportObj.report.chartState.scatter.shape:"circle",color:{enable:!1,basedOn:point.key},size:{enable:!1,basedOn:point.key}}),dataPoint.groupByFields&&1===dataPoint.groupByFields.length){var _step18,_iterator18=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dataPoint.groupByFields);try{var _loop12=function(){var group=_step18.value;point.groupBy.push({name:group.fieldName,id:group.fieldId});var groupMap=reportObj.report.dataPoints[0].groupByFields.filter((function(element){return element.fieldId===group.fieldId}))[0].lookupMap;point.groupByLabelValues[group.fieldId]=groupMap,dpgroupBy=point.groupBy,dpgroupByLabelValues=point.groupByLabelValues};for(_iterator18.s();!(_step18=_iterator18.n()).done;)_loop12()}catch(err){_iterator18.e(err)}finally{_iterator18.f()}}if(dataPoint.groupByFields&&1===dataPoint.groupByFields.length){var colorMap={},numberOfGroups=Object.keys(_this4.requiredGroupValues(reportObj)).length,_colors=newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.newColorPicker(numberOfGroups);
// Only for first level group by
if(colorMap={},"lookup"===reportObj.report.dataPoints[0].groupByFields[0].dataTypeEnum.toLowerCase()||"siteId"===reportObj.report.dataPoints[0].groupByFields[0].fieldName){reportObj.report.dataPoints[0].groupByFields[0].fieldId;for(var groupMap=_this4.requiredGroupValues(reportObj),groupKeys=Object.keys(groupMap),j=0;j<groupKeys.length;j++){var key=groupKeys[j],color=_colors[j],label=groupMap[key];colorMap[label]=color}}else for(var groups=_this4.requiredGroupValues(reportObj),_j=0;_j<Object.keys(groups).length;_j++){var _color=_colors[_j],_key=Object.keys(groups)[_j];colorMap[groups[_key]]=_color}point["children"]=[];var requiredGroups=_this4.requiredGroupValues(reportObj);for(var childGroupId in requiredGroups){var childDataPoint={visible:6!==dataPoint.type||!reportObj.scatterConfig,label:requiredGroups[childGroupId],key:requiredGroups[childGroupId],alias:requiredGroups[childGroupId],type:"datapoint",chartType:"",color:requiredGroups[childGroupId]?colorMap[requiredGroups[childGroupId]]:null,axes:unitVsAxes[dataPoint.yAxis.unitStr]?unitVsAxes[dataPoint.yAxis.unitStr]:"y",fieldId:parseInt(childGroupId),
// TODO remove
fieldName:requiredGroups[childGroupId],
// TODO remove
pointType:null,unitStr:dataPoint.yAxis.unitStr,convertTounit:null,metricEnum:dataPoint.yAxis.metricEnum,dataType:null,
// TODO remove
dataTypeId:null,
// TODO use this everywhere as dataType
enumMap:null};point.children.push(childDataPoint)}dpChildren=point.children,point.type="systemgroup",newDataPoints.push(point)}else if(reportObj.report.rangeModeEnabled&&!0===reportObj.report.rangeModeEnabled){var aliasSplit=dataPoint.aliases.actual.split("."),rangeAliases=reportObj.report.rangeAliases.map((function(a){if(a.alias&&!0===a.rangeMode)return a.alias}));if(rangeAliases.includes(aliasSplit[0])){var dpGroup=newDataPoints.filter((function(dp){return dp.alias===aliasSplit[0]&&"rangeGroup"===dp.type}));if(0!==dpGroup.length){var dPoint=dpGroup[0];point.label=point.label+" "+dataPoint.yAxis.aggrEnum.toLowerCase(),dPoint.children.push(point)}else{var rangeGroup={visible:!0,key:aliasSplit[0],alias:aliasSplit[0],label:dataPoint.name+"(Range)",color:null,children:[],axes:"y",type:"rangeGroup",chartType:"area-line-range"};point.label=point.label+" "+dataPoint.yAxis.aggrEnum.toLowerCase(),rangeGroup.children.push(point),newDataPoints.push(rangeGroup)}}else newDataPoints.push(point)}else newDataPoints.push(point);
// colorIndex++
if(reportObj.report.baseLines&&!_this4.isDimension(dataPoint,reportObj)){var _aliasSplit=dataPoint.aliases.actual.split(".");if(reportObj.report.rangeModeEnabled){var isRangePoint=reportObj.report.rangeAliases.filter((function(r){return r.alias===_aliasSplit[0]&&!0===r.rangeMode}));if(0===isRangePoint.length){var _step20,_iterator20=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var _bl=_step20.value;if(2!==dataPoint.type){var _blKey=dataPoint.name+" - "+_bl.baseLine.name,_point2={visible:!0,label:_blKey,key:dataPoint.aliases[_bl.baseLine.name],alias:dataPoint.aliases[_bl.baseLine.name],dpKey:dataPoint.name,dpAlias:dataPoint.aliases.actual,type:"datapoint",chartType:"",
// color: colors[colorIndex],
color:null,axes:unitVsAxes[dataPoint.yAxis.unitStr]?unitVsAxes[dataPoint.yAxis.unitStr]:"y",isBaseLine:!0,baseLineName:_bl.baseLine.name,parentId:1!==reportObj.report.type&&3!==reportObj.report.type&&4!==reportObj.report.type||!dataPoint.criteria?null:dataPoint.criteria.conditions["1"].value?parseInt(dataPoint.criteria.conditions["1"].value.trim()):null,
// TODO remove
fieldId:dataPoint.yAxis.fieldId,fieldName:dataPoint.yAxis.fieldName,metric:dataPoint.yAxis.metricEnum,pointType:dataPoint.type,unitStr:dataPoint.yAxis.unitStr,convertTounit:null,metricEnum:dataPoint.yAxis.metricEnum,dataType:dataPoint.yAxis.dataTypeEnum,dataTypeId:dataPoint.yAxis.dataType,enumMap:dataPoint.yAxis.enumMap,xDataPoint:dataPoint.xDataPoint,duplicateDataPoint:dataPoint.duplicateDataPoint};if("ENUM"===_point2.dataType||"SYSTEM_ENUM"===_point2.dataType){_point2.enumColorMap={};for(var _i10=0,_Object$keys9=Object.keys(_point2.enumMap);_i10<_Object$keys9.length;_i10++){var _idx5=_Object$keys9[_i10];_point2.enumColorMap[_idx5]=newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.newColorPicker(1)[0]}}4===_point2.dataTypeId&&(0===_point2.enumMap[0]&&(_point2.enumMap[0]="False"),1===_point2.enumMap[1]&&(_point2.enumMap[1]="True")),newDataPoints.push(_point2)}}}catch(err){_iterator20.e(err)}finally{_iterator20.f()}}}else{var _step19,_iterator19=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var bl=_step19.value;if(2!==dataPoint.type){var blKey=dataPoint.name+" - "+bl.baseLine.name,_point={visible:6!==dataPoint.type||!reportObj.scatterConfig,label:blKey,key:2===reportObj.report.type?"".concat(dataPoint.aliases.actual,"-").concat(bl.baseLine.name):dataPoint.aliases[bl.baseLine.name],alias:2===reportObj.report.type?"".concat(dataPoint.aliases.actual,"-").concat(bl.baseLine.name):dataPoint.aliases[bl.baseLine.name],dpKey:dataPoint.name,dpAlias:dataPoint.aliases.actual,type:"datapoint",chartType:"",
// color: colors[colorIndex],
color:null,axes:unitVsAxes[dataPoint.yAxis.unitStr]?unitVsAxes[dataPoint.yAxis.unitStr]:"y",isBaseLine:!0,baseLineName:bl.baseLine.name,parentId:1!==reportObj.report.type&&3!==reportObj.report.type&&4!==reportObj.report.type||!dataPoint.criteria?null:dataPoint.criteria.conditions["1"].value?parseInt(dataPoint.criteria.conditions["1"].value.trim()):null,
// TODO remove
fieldId:dataPoint.yAxis.fieldId,fieldName:dataPoint.yAxis.fieldName,metric:dataPoint.yAxis.metricEnum,pointType:dataPoint.type,unitStr:dataPoint.yAxis.unitStr,convertTounit:null,metricEnum:dataPoint.yAxis.unitStr,dataType:dataPoint.yAxis.dataTypeEnum,dataTypeId:dataPoint.yAxis.dataType,enumMap:dataPoint.yAxis.enumMap,xDataPoint:dataPoint.xDataPoint,duplicateDataPoint:dataPoint.duplicateDataPoint,rightInclusive:null===dataPoint||void 0===dataPoint?void 0:dataPoint.rightInclusive};if(dpgroupBy.length&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_42__/* .isEmpty */.xb)(dpgroupByLabelValues)&&(_point["groupBy"]=dpgroupBy,_point["groupByLabelValues"]=dpgroupByLabelValues,_point["children"]=dpChildren,_point.type="systemgroup"),"ENUM"===_point.dataType||"SYSTEM_ENUM"===_point.dataType){_point.enumColorMap={};for(var _i9=0,_Object$keys8=Object.keys(_point.enumMap);_i9<_Object$keys8.length;_i9++){var _idx4=_Object$keys8[_i9];_point.enumColorMap[_idx4]=newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.newColorPicker(1)[0]}}4===_point.dataTypeId&&(0===_point.enumMap[0]&&(_point.enumMap[0]="False"),1===_point.enumMap[1]&&(_point.enumMap[1]="True")),newDataPoints.push(_point)}}}catch(err){_iterator19.e(err)}finally{_iterator19.f()}}}}},i=0;i<reportObj.report.dataPoints.length;i++)_loop6();reportObj.hasOwnProperty(contextNames.REGRESSION)&&!0===reportObj.regression&&this.addRegressionDataPoints(reportObj,newDataPoints);
// handle for regression
var finalDataPoints=[];if(reportObj.report.chartState&&!reportObj.regression){var _step11,newDataPointMap={},_iterator11=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(newDataPoints);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var newDp=_step11.value;if(newDp.children&&0!==newDp.children.length){newDataPointMap[newDp.key]=newDp;var _step13,_iterator13=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(newDp.children);try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var child=_step13.value;newDataPointMap[child.key]=child}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}}else newDataPointMap[newDp.key]=newDp}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}for(var stateDataPoints=this.mergeDataPointsChnages(reportObj.report.dataPoints,reportObj.report.chartState.dataPoints),stateDataPointMap={},_loop7=function(){var dp=stateDataPoints[_i];if("datapoint"===dp.type&&newDataPointMap[dp.alias]&&"datapoint"===newDataPointMap[dp.alias].type&&newDataPointMap[dp.alias].fieldId===dp.fieldId){if(dp.key!==dp.alias&&(
// For older report
dp.key=dp.alias),dp.parentId&&newDataPointMap[dp.alias].parentId&&dp.parentId!==newDataPointMap[dp.alias].parentId)return 1;// continue
stateDataPointMap[dp.key]=!0;var _newDp=newDataPointMap[dp.key];if(_newDp){if(_newDp.label=dp.label,
// reportObj.report.reportTemplate !== null &&
// reportObj.report.type === 4 &&
// newDp.type !== 2 &&
// dataPointLabelMap[dp.key]
//   ? dataPointLabelMap[dp.key]
//   : dp.label
_newDp.visible=dp.visible,_newDp.safelimit=dp.safelimit,_newDp.chartType=dp.chartType,_newDp.color=dp.color,_newDp.convertTounit=dp.convertTounit,dp.colorCriteria&&(_newDp.colorCriteria=dp.colorCriteria),"ENUM"===_newDp.dataType&&"ENUM"===dp.dataType)for(var _i2=0,_Object$keys2=Object.keys(dp.enumColorMap);_i2<_Object$keys2.length;_i2++){var idx=_Object$keys2[_i2];_newDp.enumColorMap[idx]&&(_newDp.enumColorMap[idx]=dp.enumColorMap[idx])}2===reportObj.report.type||reportObj.Readingdp||(_newDp.axes=dp.axes),_newDp.groupBy=dp.groupBy,_newDp.groupByLabelValues=dp.groupByLabelValues,
//scatter customization json added for datapoint type
dp.pointCustomization&&(_newDp["pointCustomization"]={shape:dp.pointCustomization.shape,color:{enable:dp.pointCustomization.color.enable,basedOn:dp.pointCustomization.color.basedOn},size:{enable:dp.pointCustomization.size.enable,basedOn:dp.pointCustomization.color.basedOn}}),existingColors.push(dp.color),finalDataPoints.push(_newDp)}}else if("systemgroup"===dp.type&&newDataPointMap[dp.key]&&"systemgroup"===newDataPointMap[dp.key].type)if(_this4.checkForGroupConsistency(newDataPointMap[dp.key],dp)){stateDataPointMap[dp.key]=!0;for(var children=[],stateKeys=dp.children.map((function(element){return element.key})),requiredGroups=_this4.requiredGroupValues(reportObj),_loop8=function(){var groupChild=_Object$keys3[_i3],child=requiredGroups[groupChild];if(stateKeys.includes(child)){var _newDp2=newDataPointMap[child],childDp=dp.children.filter((function(element){return element.key===child}))[0];if(_newDp2.color=childDp.color,_newDp2.convertTounit=childDp.convertTounit,"ENUM"===_newDp2.dataType&&"ENUM"===childDp.dataType)for(var _i4=0,_Object$keys4=Object.keys(childDp.enumColorMap);_i4<_Object$keys4.length;_i4++){var _idx=_Object$keys4[_i4];_newDp2.enumColorMap[_idx]&&(_newDp2.enumColorMap[_idx]=childDp.enumColorMap[_idx])}children.push(_newDp2)}else{var _newDp3=newDataPointMap[child];_newDp3&&children.push(_newDp3)}},_i3=0,_Object$keys3=Object.keys(requiredGroups);_i3<_Object$keys3.length;_i3++)_loop8();finalDataPoints.push({label:dp.label,type:"systemgroup",key:dp.key,axes:dp.axes,chartType:newDataPointMap[dp.key].chartType?newDataPointMap[dp.key].chartType:null,unit:newDataPointMap[dp.key].unitStr,unitStr:newDataPointMap[dp.key].unitStr,convertTounit:newDataPointMap[dp.key].convertTounit,metricEnum:newDataPointMap[dp.key].metricEnum,children:children,dataType:newDataPointMap[dp.key].dataType,dataTypeId:newDataPointMap[dp.key].dataTypeId,groupBy:dp.groupBy,groupByLabelValues:dp.groupByLabelValues})}else{stateDataPointMap[dp.key]=!0;var _step14,_newDp4=newDataPointMap[dp.key],_iterator14=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(_newDp4.children);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _child=_step14.value;existingColors.push(_child.color)}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}finalDataPoints.push(_newDp4)}else if("rangeGroup"===dp.type&&!0===reportObj.report.rangeModeEnabled){var _children=dp.children;dp.children=[],stateDataPointMap[dp.alias]=!0,existingColors.push(dp.color);var _step15,_iterator15=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(_children);try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var rChild=_step15.value;if(stateDataPointMap[rChild.key]=!0,newDataPointMap[rChild.alias]){var _newDp5=newDataPointMap[rChild.alias];if(_newDp5.fieldId===rChild.fieldId&&(existingColors.push(rChild.color),_newDp5.color=rChild.color,_newDp5.convertTounit=rChild.convertTounit,"ENUM"===_newDp5.dataType&&"ENUM"===rChild.dataType))for(var _i5=0,_Object$keys5=Object.keys(rChild.enumColorMap);_i5<_Object$keys5.length;_i5++){var _idx2=_Object$keys5[_i5];_newDp5.enumColorMap[_idx2]&&(_newDp5.enumColorMap[_idx2]=rChild.enumColorMap[_idx2])}dp.children.push(_newDp5)}}}catch(err){_iterator15.e(err)}finally{_iterator15.f()}reportObj.report.rangeAliases&&0!==reportObj.report.rangeAliases.length&&0!==reportObj.report.rangeAliases.filter((function(rAlias){return rAlias.alias===dp.alias&&!0===rAlias.rangeMode})).length&&finalDataPoints.push(dp)}else if("group"===dp.type){for(var childList=[],j=0;j<dp.children.length;j++){var subDp=dp.children[j];subDp.key!==subDp.alias&&(
// For older report
subDp.key=subDp.alias),stateDataPointMap[subDp.key]=!0;var _newDp6=newDataPointMap[subDp.key];if(_newDp6){if(_newDp6.label=subDp.label,_newDp6.visible=subDp.visible,_newDp6.safelimit=subDp.safelimit,_newDp6.chartType=subDp.chartType,_newDp6.color=subDp.color,_newDp6.convertTounit=subDp.convertTounit,"ENUM"===_newDp6.dataType&&"ENUM"===subDp.dataType)for(var _i6=0,_Object$keys6=Object.keys(subDp.enumColorMap);_i6<_Object$keys6.length;_i6++){var _idx3=_Object$keys6[_i6];_newDp6.enumColorMap[_idx3]&&(_newDp6.enumColorMap[_idx3]=subDp.enumColorMap[_idx3])}_newDp6.axes=subDp.axes,
//scatter customization json added for group type
subDp.pointCustomization&&(_newDp6["pointCustomization"]={shape:subDp.pointCustomization.shape,color:{enable:subDp.pointCustomization.color.enable,basedOn:subDp.pointCustomization.color.basedOn},size:{enable:subDp.pointCustomization.size.enable,basedOn:subDp.pointCustomization.color.basedOn}}),existingColors.push(subDp.color),childList.push(_newDp6)}}finalDataPoints.push({label:dp.label,type:"group",key:dp.key,chartType:dp.chartType?dp.chartType:"",pointType:dp.pointType?dp.pointType:"",children:childList,unit:dp.unit,convertTounit:dp.convertTounit,dataType:""===dp.dataType?"":dp.dataType,groupBy:dp.groupBy,groupByLabelValues:dp.groupByLabelValues})}},_i=0;_i<stateDataPoints.length;_i++)_loop7();var _step12,_iterator12=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(newDataPoints);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _newDp7=_step12.value;stateDataPointMap[_newDp7.key]||finalDataPoints.push(_newDp7)}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}reportObj.report.chartState.settings&&!reportObj.groupByMetrics&&("multi"===reportObj.report.chartState.settings.chartMode&&this.hasDiffUnit(newDataPoints,finalDataPoints)&&reportObj.report.chartState.settings.hasOwnProperty("autoGroup")&&!1===reportObj.report.chartState.settings.autoGroup&&!reportObj.hasOwnProperty(contextNames.REGRESSION)?(reportObj.report.chartState.settings.autoGroup=!0,finalDataPoints=this.groupPoints(this.countUnits(finalDataPoints),finalDataPoints)):reportObj.report.chartState.settings.hasOwnProperty("autoGroup")&&!0===reportObj.report.chartState.settings.autoGroup&&(finalDataPoints=this.groupPoints(this.countUnits(finalDataPoints),finalDataPoints)))}else finalDataPoints=newDataPoints,reportObj.groupByMetrics&&(finalDataPoints=this.groupPointsByMetric(this.countMetrics(finalDataPoints),finalDataPoints));if(0!==finalDataPoints.filter((function(element){return"datapoint"===element.type||"rangeGroup"===element.type})).length||reportObj.groupByMetrics){var colors=newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.newColorPicker(noOfDataPoints,existingColors);finalDataPoints=this.setColorForNonExisting(finalDataPoints,colors)}if(reportObj.hasOwnProperty(contextNames.REGRESSION)&&!0===reportObj.regression&&(finalDataPoints=this.groupForRegression(reportObj,finalDataPoints)),reportObj.report.chartState&&reportObj.report.chartState.settings&&reportObj.report.chartState.settings.hasOwnProperty("filterBar")&&reportObj.report.chartState.settings.filterBar){for(var filterDataPoints=finalDataPoints.filter((function(element){return"datapoint"!==element.type}))||[],_loop9=function(){var dataPoint=reportObj.report.dataPoints[_i7],statePoint=null;null!==reportObj.report.chartState&&(statePoint=finalDataPoints.find((function(sdp){return sdp.key===dataPoint.aliases.actual}))),statePoint&&filterDataPoints.push(statePoint)},_i7=0;_i7<reportObj.report.dataPoints.length;_i7++)_loop9();finalDataPoints=filterDataPoints}if("multi"===reportObj.scatterType){var _step16,lastGroupKey=0,dataPoints=[],_iterator16=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.scatterConfig);try{var _loop10=function(){var config=_step16.value,temp={label:lastGroupKey+1,children:[],type:"group",chartType:"",dataType:"decimal",groupKey:lastGroupKey+=1,unit:""};if(config.yAxis){var yAxis=finalDataPoints.find((function(dp){return dp.key===config.yAxis.aliases.actual}));yAxis&&temp.children.push(yAxis)}if(config.xAxis&&config.xAxis.length){var _step17,_iterator17=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(config.xAxis);try{var _loop11=function(){var xObject=_step17.value,xAxis=finalDataPoints.find((function(dp){return dp.key===xObject.aliases.actual}));xAxis&&temp.children.push(xAxis)};for(_iterator17.s();!(_step17=_iterator17.n()).done;)_loop11()}catch(err){_iterator17.e(err)}finally{_iterator17.f()}}temp.children.length&&dataPoints.push(temp);var prevPoints=finalDataPoints.filter((function(dp){return"group"===dp.type}));prevPoints.length&&(dataPoints=dataPoints.concat(prevPoints))};for(_iterator16.s();!(_step16=_iterator16.n()).done;)_loop10()}catch(err){_iterator16.e(err)}finally{_iterator16.f()}finalDataPoints=dataPoints}return finalDataPoints},isDimension:function(dp,reportObj){return!(!reportObj.Readingdp&&!reportObj.scatterConfig)&&!0===dp.xDataPoint},addRegressionDataPoints:function(reportObj,newDataPoints){var _step21,_iterator21=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.regressionConfig);try{var _loop13=function(){var rConfig=_step21.value,xDataPoint=reportObj.report.dataPoints.filter((function(dP){return dP.yAxis.fieldId===rConfig.xAxis[0].readingId&&dP.metaData.parentIds[0]===rConfig.xAxis[0].parentId})),yDataPoint=reportObj.report.dataPoints.filter((function(dP){return dP.yAxis.fieldId===rConfig.yAxis.readingId&&dP.metaData.parentIds[0]===rConfig.yAxis.parentId})),dataPoint=null;if(0!==xDataPoint.length&&0!==yDataPoint.length)if(newDataPoints.filter((function(dp){return dp.alias===xDataPoint[0].aliases.actual+"_"+yDataPoint[0].aliases.actual+"regr"})).length){var regressionPoint=reportObj.report.dataPoints.filter((function(dp){return dp.aliases.actual===xDataPoint[0].aliases.actual+"_"+yDataPoint[0].aliases.actual+"regr"}));dataPoint=newDataPoints.filter((function(dp){return dp.alias===xDataPoint[0].aliases.actual+"_"+yDataPoint[0].aliases.actual+"regr"})),dataPoint=dataPoint[0],regressionPoint.length&&(dataPoint.label=regressionPoint[0].expressionString?regressionPoint[0].expressionString:""),dataPoint.xAxis=rConfig["xAxis"],dataPoint.yAxis=rConfig["yAxis"],dataPoint["coefficients"]=reportObj.reportData.regressionResult[xDataPoint[0].aliases.actual+"_"+yDataPoint[0].aliases.actual+"regr"].coefficientMap,dataPoint["pattern"]=null,dataPoint["pointType"]=dataTypes.REGRESSION,dataPoint["regressionTypes"]=contextNames.LINEAR,dataPoint["chartType"]="line"}else dataPoint={visible:!0,label:"Model line",key:xDataPoint[0].aliases.actual+"_"+yDataPoint[0].aliases.actual+"regr",xAxis:rConfig["xAxis"],yAxis:rConfig["yAxis"],alias:xDataPoint[0].aliases.actual+"_"+yDataPoint[0].aliases.actual+"regr",type:"datapoint",chartType:"line",color:null,axes:"y",evaluator:null,pattern:null,pointType:dataTypes.REGRESSION,regressionTypes:contextNames.linear,groupBy:[],groupByLabelValues:{}},newDataPoints.push(dataPoint)};for(_iterator21.s();!(_step21=_iterator21.n()).done;)_loop13()}catch(err){_iterator21.e(err)}finally{_iterator21.f()}},populateRegressionStateholder:function(reportObj,regressionPoints){if(reportObj.hasOwnProperty(contextNames.REGRESSION)&&!0===reportObj.regression){var _step22,_iterator22=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.regressionConfig);try{var _loop14=function(){var config=_step22.value,xDataPoint=reportObj.report.dataPoints.filter((function(xDp){return xDp.yAxis.fieldId===config["xAxis"][0].readingId&&xDp.metaData.parentIds[0]===config["xAxis"][0].parentId})),yDataPoint=reportObj.report.dataPoints.filter((function(xDp){return xDp.yAxis.fieldId===config["yAxis"].readingId&&xDp.metaData.parentIds[0]===config["yAxis"].parentId}));if(0!==xDataPoint.length&&0!==yDataPoint.length){var key=xDataPoint[0].aliases.actual+"_"+yDataPoint[0].aliases.actual+"regr";config.groupAlias=key,regressionPoints[xDataPoint[0].yAxis.fieldId+"_"+xDataPoint[0].metaData.parentIds]||(regressionPoints[xDataPoint[0].yAxis.fieldId+"_"+xDataPoint[0].metaData.parentIds]=[]),regressionPoints[xDataPoint[0].yAxis.fieldId+"_"+xDataPoint[0].metaData.parentIds].push(key),regressionPoints[yDataPoint[0].yAxis.fieldId+"_"+yDataPoint[0].metaData.parentIds]||(regressionPoints[yDataPoint[0].yAxis.fieldId+"_"+yDataPoint[0].metaData.parentIds]=[]),regressionPoints[yDataPoint[0].yAxis.fieldId+"_"+yDataPoint[0].metaData.parentIds].push(key)}};for(_iterator22.s();!(_step22=_iterator22.n()).done;)_loop14()}catch(err){_iterator22.e(err)}finally{_iterator22.f()}}},groupForRegression:function(reportObj,dataPoints){var _this5=this,finalDataPoints=[],regGroup=1,options={dataPoints:dataPoints},dps=JSON.parse(JSON.stringify(src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_38__/* ["default"] */.Z.getAllDataPoints(options))),regressionPoints={};this.populateRegressionStateholder(reportObj,regressionPoints);var _step23,regressionConfig=reportObj.regressionConfig,_iterator23=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(regressionConfig);try{var _loop15=function(){var rConfig=_step23.value,xDataPoint=dps.filter((function(dP){return dP.fieldId===rConfig.xAxis[0].readingId&&dP.parentId===rConfig.xAxis[0].parentId}));if(0!==xDataPoint.length){dps.indexOf(xDataPoint[0]);xDataPoint=xDataPoint[0]}var _step24,_iterator24=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dps);try{var _loop16=function(){var dataPoint=_step24.value;if(dataPoint.type===dataTypes.DATAPOINT&&"x"!==dataPoint.axes)if(dataPoint.pointType===dataTypes.REGRESSION&&dataPoint.alias===rConfig.groupAlias){var group=finalDataPoints.filter((function(dP){return dP.key===dataPoint.alias&&dP.type===dataTypes.GROUP}));if(0!==group.length)group[0].children.push(dataPoint);else{var childList=[];childList.push(xDataPoint),childList.push(dataPoint);var groupLabel="Regression"+regGroup,_group3={label:groupLabel,type:"group",pointType:contextNames.REGRESSION,key:rConfig.groupAlias,chartType:dataPoint.chartType,children:childList,unit:null};regGroup++,finalDataPoints.push(_group3)}}else if(_this5.isPartOfRegression(dataPoint,regressionPoints,rConfig.groupAlias)){
// find the group and add else create a new group
"y"===dataPoint.axes&&(dataPoint.chartType="scatter");var rGroup=finalDataPoints.filter((function(dp){return dp.type===dataTypes.GROUP&&dp.key===regressionPoints[dataPoint.fieldId+"_"+dataPoint.parentId]}));if(0!==rGroup.length)rGroup[0].children.push(dataPoint);else{var _childList=[];_childList.push(xDataPoint),_childList.push(dataPoint);var _groupLabel="Regression"+regGroup,_group4={label:_groupLabel,type:"group",pointType:contextNames.REGRESSION,key:rConfig.groupAlias,chartType:"line",children:_childList,unit:null};regGroup++,finalDataPoints.push(_group4)}}};for(_iterator24.s();!(_step24=_iterator24.n()).done;)_loop16()}catch(err){_iterator24.e(err)}finally{_iterator24.f()}};for(_iterator23.s();!(_step23=_iterator23.n()).done;)_loop15()}catch(err){_iterator23.e(err)}finally{_iterator23.f()}return finalDataPoints},sortBasedOnRSqr:function(finalDataPoints){var _step25,dataPoints=[],rvsIndex={},_iterator25=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(finalDataPoints);try{var _loop17=function(){var dataPoint=_step25.value,index=finalDataPoints.indexOf(dataPoint);if("group"===dataPoint.type){var regressionPoint=dataPoint.children.filter((function(dp){return dp.alias===dataPoint.key}));regressionPoint.length&&(rvsIndex[regressionPoint[0].rSquared]=index)}};for(_iterator25.s();!(_step25=_iterator25.n()).done;)_loop17()}catch(err){_iterator25.e(err)}finally{_iterator25.f()}var _step26,orderedX=Object.keys(rvsIndex).sort((function(a,b){return a-b})),_iterator26=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(orderedX);try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var key=_step26.value,group=finalDataPoints[rvsIndex[key]];dataPoints.push(group)}}catch(err){_iterator26.e(err)}finally{_iterator26.f()}return dataPoints},isPartOfRegression:function(dataPoint,regressionPoints,groupAlias){return!(!Object.keys(regressionPoints).includes(dataPoint.fieldId+"_"+dataPoint.parentId)||!regressionPoints[dataPoint.fieldId+"_"+dataPoint.parentId].includes(groupAlias))},requiredGroupValues:function(reportObject){var firstLevelGroupId=reportObject.report.dataPoints[0].groupByFields[0].fieldId,firstLevelGroupName=reportObject.report.dataPoints[0].groupByFields[0].fieldName,groupField=reportObject.report.dataPoints[0].groupByFields.filter((function(element){return element.fieldId===firstLevelGroupId}))[0],requiredGroups={};if(["lookup","boolean","enum","system_enum","multi_enum","multi_lookup"].includes(reportObject.report.dataPoints[0].groupByFields[0].dataTypeEnum.toLowerCase())||"siteId"===firstLevelGroupName){var _step27,firstLevelGroupMap="lookup"===groupField.dataTypeEnum.toLowerCase()||"multi_lookup"===groupField.dataTypeEnum.toLowerCase()||"siteId"===groupField.fieldName?groupField.lookupMap:groupField.enumMap,_iterator27=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObject.reportData.data);try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var _step28,record=_step27.value,yValue=record[firstLevelGroupName],_iterator28=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(yValue);try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var val=_step28.value;(val[firstLevelGroupName]&&firstLevelGroupMap[val[firstLevelGroupName]]||0===val[firstLevelGroupName]&&"BOOLEAN"===groupField.dataTypeEnum)&&(requiredGroups[val[firstLevelGroupName]]=firstLevelGroupMap[val[firstLevelGroupName]])}}catch(err){_iterator28.e(err)}finally{_iterator28.f()}}}catch(err){_iterator27.e(err)}finally{_iterator27.f()}}else{var _step29,groups=[],_iterator29=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObject.reportData.data);try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _step30,_record=_step29.value,_yValue=_record[firstLevelGroupName],_iterator30=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(_yValue);try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _val=_step30.value;_val[firstLevelGroupName]&&""!==_val[firstLevelGroupName]&&!groups.includes(_val[firstLevelGroupName])&&groups.push(_val[firstLevelGroupName])}}catch(err){_iterator30.e(err)}finally{_iterator30.f()}}}catch(err){_iterator29.e(err)}finally{_iterator29.f()}requiredGroups=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},groups)}return requiredGroups},checkForGroupConsistency:function(oldDp,newDp){return newDp.groupBy[0].id===oldDp.groupBy[0].id},prepareYAxes:function(axisOptions,dataPoints,reportDataPoints){var _step31,axes=["y","y2"],allPoints=[],_iterator31=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dataPoints);try{var _loop19=function(){var dp=_step31.value;if("group"!==dp.type&&"rangeGroup"!==dp.type)"x"!==dp.axes&&!1!==dp.visible&&allPoints.push(dp);else{var isRegression=dp.children.filter((function(dataPoint){return dataPoint.key===dp.key}));if(0!==isRegression.length){var yPoint=dp.children.find((function(inDp){var _isRegression$0$yAxis;return inDp.fieldId===(null===(_isRegression$0$yAxis=isRegression[0].yAxis)||void 0===_isRegression$0$yAxis?void 0:_isRegression$0$yAxis.readingId)&&inDp.parentId===isRegression[0].yAxis.parentId}));yPoint&&allPoints.push(yPoint)}else allPoints.push.apply(allPoints,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dp.children.filter((function(child){return"x"!==child.axes&&!1!==child.visible}))))}};for(_iterator31.s();!(_step31=_iterator31.n()).done;)_loop19()}catch(err){_iterator31.e(err)}finally{_iterator31.f()}axes.forEach((function(axis){var yAxis=axisOptions[axis],yPoints=allPoints.filter((function(dp){return dp.axes===axis}));if(Object.keys(yAxis).length||(axisOptions[axis]={label:{type:"auto"}}),yPoints.length){yAxis.show=!0;var _step32,rdPoints=[],rdLabels=new Set,_iterator32=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(yPoints);try{var _loop18=function(){var point=_step32.value,dp=reportDataPoints.find((function(rdp){return point.dpKey===rdp.name||point.key===rdp.name||point.key===rdp.aliases.actual}));dp&&dp.yAxis.unitStr&&rdPoints.push(dp),dp&&dp.yAxis.label&&rdLabels.add(dp.yAxis.label.toUpperCase())};for(_iterator32.s();!(_step32=_iterator32.n()).done;)_loop18()}catch(err){_iterator32.e(err)}finally{_iterator32.f()}var units=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(new Set(rdPoints.map((function(rp){return rp.yAxis.unitStr}))));1===units.length?(yAxis.unit=units[0],yAxis.datatype=rdPoints[0].yAxis.dataTypeEnum.toLowerCase()):(yAxis.unit=null,yAxis.datatype=null),"auto"===yAxis.label.type&&(yAxis.label.text=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(rdLabels).join(" & "))}else yAxis.show=!1}))},prepareSafelimit:function(reportObj){var _step33,safeLimits=[],_iterator33=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.dataPoints);try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var dp=_step33.value,aliasKey=dp.aliases["actual"],dpname=dp.name,limit=reportObj.reportData.aggr[aliasKey+".safeLimit"];if(limit&&(null!==limit.min&&safeLimits.push({value:limit.min,label:"Min",key:"min",datapoint:aliasKey,name:dpname,show:!1}),null!==limit.max&&safeLimits.push({value:limit.max,label:"Max",key:"max",datapoint:aliasKey,name:dpname,show:!1})),"energybenchmark"===dp.yAxis.fieldName&&reportObj.reportData.aggr[aliasKey+".lastValue"]){var value=reportObj.reportData.aggr[aliasKey+".lastValue"];safeLimits.push({value:value,label:"Benchmark",key:"benchmark",datapoint:aliasKey,name:dpname,show:!1})}}}catch(err){_iterator33.e(err)}finally{_iterator33.f()}return safeLimits},prepareWidgetLegends:function(reportObj,dataPoints){var stateLegend=reportObj.report.chartState?reportObj.report.chartState.widgetLegend:null,widgetLegend={show:stateLegend?stateLegend.show:2===reportObj.report.analyticsType&&!this.isSeriesMode(reportObj.mode)&&!reportObj.scatterConfig,variances:{}},sumDefaultUnits=["AED","kWh","co2","kg"],sumDefaultFields=["cdd","hdd","wdd","cost"],sumMetricFields=["ENERGY","LENGTH","MASS","CURRENCY"],points=[];dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dp.children)):points.push(dp)}));var setEnumLegends=function(dp){4===dp.dataTypeId?widgetLegend.variances[dp.alias||dp.key]=["1"]:8!==dp.dataTypeId&&12!==dp.dataTypeId||(widgetLegend.variances[dp.alias||dp.key]=[],Object.keys(dp.enumMap).forEach((function(key){widgetLegend.variances[dp.alias||dp.key].push(key+"")})))};return 1===points.length?[4,8].includes(points[0].dataTypeId)?setEnumLegends(points[0]):widgetLegend.variances[points[0].alias||points[0].key]=["min","max","sum","avg","lastValue"]:points.forEach((function(dp){var showSumAggr=sumDefaultUnits.includes(dp.unitStr)||sumDefaultFields.includes(dp.fieldName)||sumMetricFields.includes(dp.metric);[4,8].includes(dp.dataTypeId)?setEnumLegends(dp):widgetLegend.variances[dp.alias||dp.key]=2!==dp.pointType?[showSumAggr?"sum":"avg"]:[]})),stateLegend&&src_util_helpers_js__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.ZP.copy(widgetLegend.variances,stateLegend.variances),widgetLegend},getTimePeriod:function(reportObj){var period=null;if(reportObj.xAggr||reportObj.report.xAggr){var xAggr=reportObj.xAggr?reportObj.xAggr:reportObj.report.xAggr;20===xAggr?period="hourly":12===xAggr?period="daily":11===xAggr?period="weekly":10===xAggr?period="monthly":8===xAggr?period="yearly":25===xAggr?period="quarterly":0===xAggr?period="high-res":19===xAggr?period="hourofday":17===xAggr?period="dayofweek":18===xAggr?period="dayofmonth":16===xAggr?period="weekofyear":15===xAggr&&(period="monthofyear")}return period},getPeriodFromAggr:function(aggr){switch(aggr){case 20:return"hourly";case 12:return"daily";case 11:return"weekly";case 10:return"monthly";case 8:return"yearly";case 25:return"quarterly";case 19:return"hourofday";case 17:return"dayofweek";case 18:return"dayofmonth";case 16:return"weekofyear";case 15:return"monthofyear";case 0:return"high-res"}},isEmptyData:function(reportObj){for(var key in reportObj.reportData){var dp=reportObj.reportData[key],keys=Object.keys(dp);if(keys.length)return!1}return!0},isSeriesMode:function(mode){return!![2,6,7,8,9,10].includes(mode)},reverseIterate:function(timeString,periodObject){return moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()(timeString,periodObject.format).valueOf()},prepareReportDataForSpecialCases:function(reportObj){var _this6=this,data={},xData=[],xLabelMap=null,columns=[],groupIds=[],groupLabelValues={},XAlias=reportObj.report.xAlias?reportObj.report.xAlias:"X",isTimeSeries=5===reportObj.report.dataPoints[0].xAxis.dataType||6===reportObj.report.dataPoints[0].xAxis.dataType,period=this.getTimePeriod(reportObj);
// for handling X
(reportObj.report.dataPoints[0].xAxis.field&&"lookup"===reportObj.report.dataPoints[0].xAxis.field.dataTypeEnum.toLowerCase()||"lookup"===reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()||"multi_lookup"===reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()||"siteId"===reportObj.report.dataPoints[0].xAxis.fieldName)&&(xLabelMap=reportObj.report.dataPoints[0].xAxis.lookupMap);
// populating aliases
var _step34,_iterator34=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.dataPoints);try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var dataPoint=_step34.value,_temp3={};if(_temp3["name"]=dataPoint.name,_temp3["alias"]=dataPoint.aliases.actual,columns.push(_temp3),reportObj.report.baseLines){var _step41,_iterator41=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var bl=_step41.value;columns.push({alias:dataPoint.aliases[bl.baseLine.name],label:dataPoint.name+" - "+bl.baseLine.name})}}catch(err){_iterator41.e(err)}finally{_iterator41.f()}}}
// initalize groupFields and groupBuckets
}catch(err){_iterator34.e(err)}finally{_iterator34.f()}if(reportObj.report.dataPoints[0].groupByFields&&0!==reportObj.report.dataPoints[0].groupByFields.length){
// group by is unique. so take one datapoint
var _step35,_iterator35=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.dataPoints[0].groupByFields);try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var group=_step35.value,temp={};temp["name"]=group.fieldName,temp["id"]=group.fieldId,groupIds.push(temp),"lookup"===group.dataTypeEnum.toLowerCase()?groupLabelValues[group.fieldId]=group.lookupMap:groupLabelValues[group.fieldId]=this.requiredGroupValues(reportObj),1}}catch(err){_iterator35.e(err)}finally{_iterator35.f()}}
// X data population
if(isTimeSeries&&null!==reportObj.report.dataPoints[0].groupByFields){var _step36,dateRange=this.getDateRange(reportObj.dateRange.value,period,reportObj.dateRange.operationOn),requiredGroups=this.requiredGroupValues(reportObj),_iterator36=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dateRange.domain);try{var _loop20=function(){var domain=_step36.value,yData=reportObj.reportData.data.filter((function(element){return _this6.formatDate(new Date(element[XAlias]),period)===domain}));if(0===yData.length){xData.push(domain);var groupMap=requiredGroups;for(var key in groupMap){var label=groupMap[key];data[label]||(data[label]=[]),data[label].push(0)}}else{xData.push(domain);for(var firstLevelGroupLabel=groupIds[0].name,yValues=yData[0][firstLevelGroupLabel],_loop21=function(){var group=_Object$keys10[_i11],filter=yValues.filter((function(element){return"string"!==typeof element[firstLevelGroupLabel]&&parseInt(element[firstLevelGroupLabel])===parseInt(group)||element[firstLevelGroupLabel]===requiredGroups[group]})),groupLabel=requiredGroups[group];if(0===filter.length)for(var columnIdx=0;columnIdx<columns.length;columnIdx++)data[groupLabel]||(data[groupLabel]=[]),data[groupLabel].push(0);else{var _step37,_iterator37=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var column=_step37.value,val=filter[0][column.alias];data[groupLabel]||(data[groupLabel]=[]),data[groupLabel].push(val)}}catch(err){_iterator37.e(err)}finally{_iterator37.f()}}},_i11=0,_Object$keys10=Object.keys(requiredGroups);_i11<_Object$keys10.length;_i11++)_loop21()}};for(_iterator36.s();!(_step36=_iterator36.n()).done;)_loop20()}catch(err){_iterator36.e(err)}finally{_iterator36.f()}data.x=xData}else{var _step38,_iterator38=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.reportData.data);try{var _loop22=function(){var dataEntry=_step38.value;if("lookup"===reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()||"multi_lookup"===reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()||"siteId"===reportObj.report.dataPoints[0].xAxis.fieldName){var xLabel=xLabelMap[dataEntry[XAlias]];if(!xLabel)return 0;// continue
xData.push(xLabel)}else if("enum"!==reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()&&"multi_enum"!==reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()&&"system_enum"!==reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()&&"boolean"!==reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()||!reportObj.report.dataPoints[0].xAxis.enumMap)if(isTimeSeries){var _dateRange=_this6.getDateRange(reportObj.dateRange.value,period,reportObj.dateRange.operationOn);_dateRange.domain.includes(_this6.formatDate(new Date(dataEntry[XAlias]),period))&&xData.push(_this6.formatDate(new Date(dataEntry[XAlias]),period))}else xData.push(dataEntry[XAlias]);else{var enumMap=reportObj.report.dataPoints[0].xAxis.enumMap,_xLabel=enumMap[dataEntry[XAlias]];if(!_xLabel)return 0;// continue
xData.push(_xLabel)}if(reportObj.report.dataPoints[0].groupByFields&&0!==reportObj.report.dataPoints[0].groupByFields.length){
// if group by was applied
if(1===groupIds.length)for(
// TODO first level groupBy for Y2 Axis ??
var firstLevelGroupLabel=groupIds[0].name,yValues=dataEntry[firstLevelGroupLabel],_requiredGroups=_this6.requiredGroupValues(reportObj),_loop23=function(){var group=_Object$keys11[_i12],filter=yValues.filter((function(element){return parseInt(element[firstLevelGroupLabel])===parseInt(group)||element[firstLevelGroupLabel]===_requiredGroups[group]})),groupLabel=_requiredGroups[group];if(0===filter.length)for(var columnIdx=0;columnIdx<columns.length;columnIdx++)data[groupLabel]||(data[groupLabel]=[]),data[groupLabel].push(0);else{var _step39,_iterator39=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var column=_step39.value,val=filter[0][column.alias];data[groupLabel]||(data[groupLabel]=[]),data[groupLabel].push(val)}}catch(err){_iterator39.e(err)}finally{_iterator39.f()}}},_i12=0,_Object$keys11=Object.keys(_requiredGroups);_i12<_Object$keys11.length;_i12++)_loop23()}else{
// no groupby applied
var _step40,_iterator40=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var column=_step40.value;data[column.alias]?data[column.alias].push(dataEntry[column.alias]?dataEntry[column.alias]:null):(data[column.alias]=[],data[column.alias].push(void 0==dataEntry[column.alias]?null:dataEntry[column.alias]))}}catch(err){_iterator40.e(err)}finally{_iterator40.f()}}};for(_iterator38.s();!(_step38=_iterator38.n()).done;)_loop22()}catch(err){_iterator38.e(err)}finally{_iterator38.f()}data.x=xData}return reportObj["groupIds"]=groupIds,reportObj["groupLabelValues"]=groupLabelValues,data},prepareReportData:function(reportObj,options){var _this7=this,xDataPoint=reportObj.scatterConfig?null:src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_38__/* ["default"] */.Z.getAllDataPoints(options).find((function(dp){return"x"===dp.axes}));xDataPoint||!reportObj.Readingdp||reportObj.scatterConfig||(xDataPoint=reportObj.report.dataPoints.find((function(dp){return!0===dp.xDataPoint})));var xAlias=xDataPoint&&xDataPoint.alias?xDataPoint.alias:xDataPoint&&xDataPoint.aliases&&xDataPoint.aliases.actual?xDataPoint.aliases.actual:reportObj.report.xAlias?reportObj.report.xAlias:"X",columns=[],groupedColumns=[],timeValues=[];if("siteId"===reportObj.report.dataPoints[0].xAxis.fieldName||reportObj.report.dataPoints[0].xAxis.field&&"lookup"===reportObj.report.dataPoints[0].xAxis.field.dataTypeEnum.toLowerCase()||"lookup"===reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()||"multi_enum"===reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()||"system_enum"===reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()||"multi_lookup"===reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase()||reportObj.report.dataPoints[0].groupByFields&&reportObj.report.dataPoints[0].groupByFields.length){var data=this.prepareReportDataForSpecialCases(reportObj);return data}if(7===reportObj.report.analyticsType){var _data=this.prepareDataForSpecialScatter(reportObj);return _data}if(reportObj.reportData.data&&reportObj.reportData.data.length){if(reportObj.report.rangeModeEnabled&&!0===reportObj.report.rangeModeEnabled){var _step42,_iterator42=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.rangeAliases);try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var rangeAlias=_step42.value;columns.push({alias:rangeAlias.alias,label:rangeAlias.dataPointName,rangeMode:rangeAlias.rangeMode})}
// TODO: add baseline support
}catch(err){_iterator42.e(err)}finally{_iterator42.f()}}else{var _step43,_iterator43=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.dataPoints);try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var dp=_step43.value;if(!(xDataPoint&&xDataPoint.alias===dp.aliases.actual||xDataPoint&&xDataPoint.aliases&&xDataPoint.aliases.actual===dp.aliases.actual)&&((!reportObj.scatterConfig||5!==dp.type)&&(columns.push({alias:dp.aliases["actual"],label:dp.name}),reportObj.report.baseLines))){var _step44,_iterator44=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var bl=_step44.value;columns.push({alias:dp.aliases[bl.baseLine.name],label:dp.name+" - "+bl.baseLine.name})}}catch(err){_iterator44.e(err)}finally{_iterator44.f()}}}}catch(err){_iterator43.e(err)}finally{_iterator43.f()}}var isTimeseries=xDataPoint&&xDataPoint.dataTypeId?[5,6].includes(xDataPoint.dataTypeId):xDataPoint&&xDataPoint.yAxis&&xDataPoint.yAxis.dataType?[5,6].includes(xDataPoint.yAxis.dataType):!reportObj.Readingdp&&!reportObj.scatterConfig&&[5,6].includes(reportObj.report.dataPoints[0].xAxis.dataType),period=this.getTimePeriod(reportObj),x=[],_data2={};if(isTimeseries&&reportObj.xAggr>0){var _step45,timeMap={},_iterator45=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.reportData.data);try{var _loop24=function(){var record=_step45.value,formattedString=_this7.formatDate(new Date(record[xAlias]),period);if(reportObj.report.reportState&&reportObj.report.reportState.groupByTimeAggr>0){timeMap[formattedString]||(timeMap[formattedString]={});var _step50,_iterator50=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(record.group);try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var groupedRecord=_step50.value,_period2=_this7.getPeriodFromAggr(parseInt(reportObj.report.reportState.groupByTimeAggr)),formattedTime=_this7.formatDate(new Date(groupedRecord[xAlias]),_period2);["hourofday","dayofmonth"].includes(_period2)&&(formattedTime=_this7.convertToTooltipFormat(new Date(groupedRecord[xAlias]),_period2));var _step51,_iterator51=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var _column3=_step51.value,val=null;val=groupedRecord[_column3.alias]?groupedRecord[_column3.alias]:null,timeMap[formattedString][_column3.alias+"_"+formattedTime]=val,groupedColumns.includes(_column3.alias+"_"+formattedTime)||groupedColumns.push(_column3.alias+"_"+formattedTime)}}catch(err){_iterator51.e(err)}finally{_iterator51.f()}}}catch(err){_iterator50.e(err)}finally{_iterator50.f()}}else{timeMap[formattedString]={};var _step52,_iterator52=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{var _loop25=function(){var column=_step52.value,val=null;if(reportObj.report.rangeModeEnabled&&!0===reportObj.report.rangeModeEnabled&&column.rangeMode&&!0===column.rangeMode){var range=["max","avg","min"];val=[],range.forEach((function(r){return val.push(isNaN(parseInt(record[column.alias+"."+r]))?null:parseInt(record[column.alias+"."+r]))}))}else val=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_42__/* .isEmpty */.xb)(record[column.alias])?null:record[column.alias];timeMap[formattedString][column.alias]=val};for(_iterator52.s();!(_step52=_iterator52.n()).done;)_loop25()}catch(err){_iterator52.e(err)}finally{_iterator52.f()}}};for(_iterator45.s();!(_step45=_iterator45.n()).done;)_loop24()}catch(err){_iterator45.e(err)}finally{_iterator45.f()}if(groupedColumns.length>0)if(12===parseInt(reportObj.report.reportState.groupByTimeAggr))groupedColumns=groupedColumns.map((function(date){var parts=date.split("-");return"".concat(parts[2],"-").concat(parts[0],"-").concat(parts[1])})).sort().map((function(date){var parts=date.split("-");return"".concat(parts[1],"-").concat(parts[2],"-").concat(parts[0])}));else if(10===parseInt(reportObj.report.reportState.groupByTimeAggr))groupedColumns=groupedColumns.map((function(date){var parts=date.split("-");return"".concat(parts[1],"-").concat(parts[0])})).sort().map((function(date){var parts=date.split("-");return"".concat(parts[1],"-").concat(parts[0])}));else if(17===parseInt(reportObj.report.reportState.groupByTimeAggr)){for(var days=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],temp=[],_i13=0,_days=days;_i13<_days.length;_i13++){var _step46,day=_days[_i13],_iterator46=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(groupedColumns);try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var column=_step46.value;column.split("_")[1]===day&&temp.push(column)}}catch(err){_iterator46.e(err)}finally{_iterator46.f()}}groupedColumns=temp}else if(18===parseInt(reportObj.report.reportState.groupByTimeAggr)){for(var _days2=["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","13th","14th","15th","16th","17th","18th","19th","20th","21st","22nd","23rd","24th","25th","26th","27th","28th","29th","30th","31st"],_temp4=[],_i14=0,_days3=_days2;_i14<_days3.length;_i14++){var _step47,_day=_days3[_i14],_iterator47=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(groupedColumns);try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var _column=_step47.value;_column.split("_")[1]===_day&&_temp4.push(_column)}}catch(err){_iterator47.e(err)}finally{_iterator47.f()}}groupedColumns=_temp4}else if(19===parseInt(reportObj.report.reportState.groupByTimeAggr)){for(var _days4=["12 am","1 am","2 am","3 am","4 am","5 am","6 am","7 am","8 am","9 am","10 am","11 am","12 pm","1 pm","2 pm","3 pm","4 pm","5 pm","6 pm","7 pm","8 pm","9 pm","10 pm","11 pm"],_temp5=[],_i15=0,_days5=_days4;_i15<_days5.length;_i15++){var _step48,_day2=_days5[_i15],_iterator48=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(groupedColumns);try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var _column2=_step48.value;_column2.split("_")[1]===_day2&&_temp5.push(_column2)}}catch(err){_iterator48.e(err)}finally{_iterator48.f()}}groupedColumns=_temp5}var _step49,dateRange=this.getDateRange(reportObj.dateRange.value,period,reportObj.dateRange.operationOn),_iterator49=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dateRange.domain);try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var range=_step49.value;if(x.push(range),reportObj.report.reportState&&reportObj.report.reportState.groupByTimeAggr>0)if(timeMap.hasOwnProperty(range)){var _step54,_iterator54=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(groupedColumns);try{for(_iterator54.s();!(_step54=_iterator54.n()).done;){var _column5=_step54.value;_data2[_column5]||(_data2[_column5]=[]),"undefined"!==typeof timeMap[range][_column5]?_data2[_column5].push(timeMap[range][_column5]):_data2[_column5].push(null)}}catch(err){_iterator54.e(err)}finally{_iterator54.f()}}else{var _step53,_iterator53=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(groupedColumns);try{for(_iterator53.s();!(_step53=_iterator53.n()).done;){var _column4=_step53.value;_data2[_column4]||(_data2[_column4]=[]),_data2[_column4].push(null)}}catch(err){_iterator53.e(err)}finally{_iterator53.f()}}else if(timeMap.hasOwnProperty(range)){var _step56,_iterator56=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var _column6=_step56.value;_data2[_column6.alias]||(_data2[_column6.alias]=[]),_data2[_column6.alias].push(timeMap[range][_column6.alias])}}catch(err){_iterator56.e(err)}finally{_iterator56.f()}}else{var _step55,_iterator55=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{var _loop26=function(){var column=_step55.value;if(_data2[column.alias]||(_data2[column.alias]=[]),reportObj.report.rangeModeEnabled&&!0===reportObj.report.rangeModeEnabled&&column.rangeMode&&!0===column.rangeMode){var _range=["max","avg","min"],subData=[];_range.forEach((function(r){return subData.push(null)})),_data2[column.alias].push(subData)}else _data2[column.alias].push(null)};for(_iterator55.s();!(_step55=_iterator55.n()).done;)_loop26()}catch(err){_iterator55.e(err)}finally{_iterator55.f()}}}}catch(err){_iterator49.e(err)}finally{_iterator49.f()}}else{var _step57,_iterator57=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.reportData.data);try{var _loop27=function(){var row=_step57.value;if(isTimeseries){if(null===row[xAlias])return 0;// continue
x.push(_this7.formatDate(new Date(row[xAlias]),period))}else if(["enum","boolean","system_enum"].includes(reportObj.report.dataPoints[0].xAxis.dataTypeEnum.toLowerCase())){var enumMap=reportObj.report.dataPoints[0].xAxis.enumMap;if(null===enumMap[row[xAlias]])return 0;// continue
x.push(enumMap[row[xAlias]])}else{if(null===row[xAlias])return 0;// continue
if(2===reportObj.mode){var asset=[];asset=_this7.assets,x.push(asset[row[xAlias]])}else x.push(row[xAlias])}xDataPoint&&(5===reportObj.report.dataPoints[0].xAxis.dataType||6===reportObj.report.dataPoints[0].xAxis.dataType||reportObj.Readingdp)&&timeValues.push(row["X"]);var _step58,_iterator58=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{var _loop28=function(){var column=_step58.value;
// for pushing y data
if(_data2[column.alias]||(_data2[column.alias]=[]),reportObj.report.rangeModeEnabled&&!0===reportObj.report.rangeModeEnabled&&column.rangeMode&&!0===column.rangeMode){var subAliases=[column.alias+".max",column.alias+".avg",column.alias+".min"],subData=[];subAliases.forEach((function(subAlias){subData.push(isNaN(parseInt(row[subAlias]))?null:parseInt(row[subAlias]))})),_data2[column.alias].push(subData)}else _data2[column.alias].push((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_42__/* .isEmpty */.xb)(row[column.alias])?null:parseFloat(row[column.alias]))};for(_iterator58.s();!(_step58=_iterator58.n()).done;)_loop28()}catch(err){_iterator58.e(err)}finally{_iterator58.f()}};for(_iterator57.s();!(_step57=_iterator57.n()).done;)_loop27()}catch(err){_iterator57.e(err)}finally{_iterator57.f()}}if(groupedColumns.length>0&&this.prepareTimeGroupedDataOptions(groupedColumns,reportObj,options),0!==x.length&&(!xDataPoint||reportObj.Readingdp||reportObj.scatterConfig?reportObj.scatterConfig?reportObj.scatterConfig&&(options["timeValues"]=x):_data2.x=x:_data2[xDataPoint.alias]=x),reportObj.Readingdp)0!==timeValues.length&&(options["timeValues"]=timeValues),null===options.axis.y.range.min&&(options.axis.y.range.min=0),null===options.axis.y2.range.min&&(options.axis.y2.range.min=0);else if(!reportObj.report.chartState&&0===groupedColumns.length){var ymin=0,y2min=0;if(columns.length>0){var _step59,_iterator59=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{var _loop29=function(){var column=_step59.value,minOfColumn=Math.min.apply(Math,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_data2[column.alias])),point=options.dataPoints.find((function(dp){return dp.alias===column.alias}));point&&minOfColumn&&("y"===point.axes&&minOfColumn<ymin?ymin=minOfColumn:"y2"===point.axes&&minOfColumn<y2min&&(y2min=minOfColumn))};for(_iterator59.s();!(_step59=_iterator59.n()).done;)_loop29()}catch(err){_iterator59.e(err)}finally{_iterator59.f()}}options.axis.y.range.min=ymin,options.axis.y2.range.min=y2min}if(reportObj.hasOwnProperty(contextNames.REGRESSION)&&!0===reportObj.regression){0!==timeValues.length&&(options["timeValues"]=timeValues);var _step60,_iterator60=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(options.regressionConfig);try{for(_iterator60.s();!(_step60=_iterator60.n()).done;){var conf=_step60.value;if(conf.errorState&&2!==conf.errorState){var yDataPoint=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_38__/* ["default"] */.Z.getDataPoint(conf.yAxis.readingId,conf.yAxis.parentId,options),_xDataPoint2=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_38__/* ["default"] */.Z.getDataPoint(conf.xAxis[0].readingId,conf.xAxis[0].parentId,options);if(yDataPoint&&_data2[yDataPoint.alias]){var yMin=Math.min.apply(Math,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_data2[yDataPoint.alias])),yMax=Math.max.apply(Math,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_data2[yDataPoint.alias]));if(options.axis.y.range.min=yMin,options.axis.y.range.max=yMax,options.axis.y.format.decimals=2,options.multichart){var multiChartOptions=options.multichart["group_"+conf.groupAlias];multiChartOptions&&(multiChartOptions.axis.y.range.min=yMin,multiChartOptions.axis.y.range.max=yMax,multiChartOptions.axis.y.format.decimals=2)}}_data2[_xDataPoint2.alias]&&_data2[yDataPoint.alias]&&(_data2=this.rearrangeData(reportObj,options,_data2),this.populatePointsInfo(options,_data2))}else _data2={};
// data = this.computeRegressionValues(reportObj,options,data)
}}catch(err){_iterator60.e(err)}finally{_iterator60.f()}}return _data2;
// }
}},rearrangeData:function(reportObj,options,data){var _step61,finalData={},_iterator61=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.regressionConfig);try{for(_iterator61.s();!(_step61=_iterator61.n()).done;){var rConfig=_step61.value,xDataPoint=rConfig.xAxis[0],yDataPoint=rConfig.yAxis;finalData["x"]=data[xDataPoint.alias],finalData[yDataPoint.alias]=data[yDataPoint.alias],finalData[xDataPoint.alias+"_"+yDataPoint.alias+"regr"]=data[xDataPoint.alias+"_"+yDataPoint.alias+"regr"]}}catch(err){_iterator61.e(err)}finally{_iterator61.f()}return finalData},populatePointsInfo:function(options,data){var dataPoints=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_38__/* ["default"] */.Z.getAllDataPoints(options);options.general.point.pattern=[];var _loop30=function(key){var dp=dataPoints.filter((function(d){return d.alias===key}));dp.length&&(dp[0].pointType===contextNames.REGRESSION?options.general.point.pattern.push("<polygon></polygon>"):options.general.point.pattern.push("circle"))};for(var key in data)_loop30(key)},prepareBooleanData:function(reportObj){var _step62,booleanData={},_iterator62=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.dataPoints);try{for(_iterator62.s();!(_step62=_iterator62.n()).done;){var dp=_step62.value;if("boolean"===dp.yAxis.dataTypeEnum.toLowerCase()||"enum"===dp.yAxis.dataTypeEnum.toLowerCase()){var aliasKey=dp.aliases["actual"],aggregatedTimeline=reportObj.reportData.aggr[aliasKey+".timeline"];if(aggregatedTimeline){var prevVal=null,start=null,end=null,rangeList=[];aggregatedTimeline.sort((function(a,b){return a.key-b.key}));// Temp
var _step63,_iterator63=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(aggregatedTimeline);try{for(_iterator63.s();!(_step63=_iterator63.n()).done;){var b=_step63.value;if(null===prevVal)start=b.key,prevVal=b.value,1===aggregatedTimeline.length&&(end=this.$options.filters.now());else{var now=this.$options.filters.now();end=reportObj.dateRange&&reportObj.dateRange.value[1]&&b.key>reportObj.dateRange.value[1]?reportObj.dateRange.value[1]:b.key>now?now:b.key,prevVal!==b.value&&(rangeList.push({start:moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()(new Date(start)).tz(vue__WEBPACK_IMPORTED_MODULE_43__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()(new Date(end)).tz(vue__WEBPACK_IMPORTED_MODULE_43__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),value:prevVal}),prevVal=b.value,start=b.key)}}}catch(err){_iterator63.e(err)}finally{_iterator63.f()}rangeList.push({start:moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()(new Date(start)).tz(vue__WEBPACK_IMPORTED_MODULE_43__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()(new Date(end)).tz(vue__WEBPACK_IMPORTED_MODULE_43__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),value:prevVal}),booleanData[aliasKey]=rangeList}}}}catch(err){_iterator62.e(err)}finally{_iterator62.f()}return Object.keys(booleanData).length?booleanData:null},isRangeMode:function(reportObj){var _step64,uniqueAlias=new Set,uniqueNames={},aliasList=[],rangeAlias=[],_iterator64=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.report.dataPoints);try{for(_iterator64.s();!(_step64=_iterator64.n()).done;){var dataPoint=_step64.value,alias=dataPoint.aliases.actual.split(".");uniqueNames[alias[0]]=dataPoint.name,uniqueAlias.add(alias[0]),aliasList.push(alias[0])}}catch(err){_iterator64.e(err)}finally{_iterator64.f()}var _step65,_iterator65=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(uniqueAlias.values());try{var _loop31=function(){var alias=_step65.value;if(3===aliasList.filter((function(a){return a===alias})).length){var temp={};temp["alias"]=alias,temp["dataPointName"]=uniqueNames[alias],temp["rangeMode"]=!0,rangeAlias.push(temp)}else{var _temp6={};_temp6["alias"]=alias,_temp6["dataPointName"]=uniqueNames[alias],_temp6["rangeMode"]=!1,rangeAlias.push(_temp6)}};for(_iterator65.s();!(_step65=_iterator65.n()).done;)_loop31()}catch(err){_iterator65.e(err)}finally{_iterator65.f()}0!==rangeAlias.filter((function(range){return!0===range.rangeMode})).length?(reportObj.report["rangeModeEnabled"]=!0,reportObj.report["rangeAliases"]=rangeAlias):reportObj.report["rangeModeEnabled"]=!1},getDateRange:function(dateRange,period,operationOn){var currentTimezone=vue__WEBPACK_IMPORTED_MODULE_43__["default"].prototype.$timezone,momentRange=MomentRange.extendMoment(moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()),start=moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()(dateRange[0]).tz(currentTimezone),end=moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()(dateRange[1]).tz(currentTimezone),range=momentRange.range(start,end),dateFormat=this.getDateFormat(period),dateAxis={};if(dateAxis.min=this.formatDate(new Date(dateRange[0]),period),dateAxis.max=this.formatDate(new Date(dateRange[1]),period),dateAxis.highResMin=this.formatDate(new Date(dateRange[0]),null),dateAxis.highResMax=this.formatDate(new Date(dateRange[1]),null),"dayofweek"===period?(dateAxis.min="Mon",dateAxis.max="Sun"):"weekofyear"===period&&"year"===operationOn?(dateAxis.min="01",dateAxis.max="52"):"dayofmonth"===period?(dateAxis.min="01",dateAxis.max="31"):"hourofday"===period&&(dateAxis.min="00",dateAxis.max="23"),dateFormat.interval){var _this$$org,domain=null;if(null!==period)if("weekly"===period)"GB"===(null===this||void 0===this||null===(_this$$org=this.$org)||void 0===_this$$org?void 0:_this$$org.country)&&(start=start.locale("fr"),end=end.locale("fr"),range=momentRange.range(start,end)),domain=Array.from(range.by(dateFormat.interval)).map((function(timestamp){return timestamp.startOf("week").format(dateFormat.format)}));else domain="monthly"===period?Array.from(range.by(dateFormat.interval)).map((function(timestamp){return timestamp.startOf("month").format(dateFormat.format)})):"quarterly"===period?Array.from(range.by(dateFormat.interval)).map((function(timestamp){return timestamp.startOf("quarter").format(dateFormat.format)})):"dayofweek"===period?["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:"dayofmonth"===period?["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]:"hourofday"===period?["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]:Array.from(range.by(dateFormat.interval)).map((function(timestamp){return timestamp.format(dateFormat.format)}));domain&&2===domain.length&&domain[0]===domain[1]&&(domain=[domain[0]]),dateAxis.domain=domain}if("weekly"===period){var days=start.isValid()&&end.isValid()?end.diff(start,"days")+1:null,_domain=dateAxis.domain;_domain=_domain&&1===_domain.length?_domain[0]:null,days&&days<=7&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_42__/* .isEmpty */.xb)(_domain)&&(dateAxis.min=_domain,dateAxis.max=_domain)}return dateAxis},formatDate:function(date,period){var dateFormat=this.getDateFormat(period);return moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()(date).tz(vue__WEBPACK_IMPORTED_MODULE_43__["default"].prototype.$timezone).format(dateFormat.format)},convertToTooltipFormat:function(date,period){var dateFormat=this.getDateFormat(period);return moment_timezone__WEBPACK_IMPORTED_MODULE_34___default()(date).tz(vue__WEBPACK_IMPORTED_MODULE_43__["default"].prototype.$timezone).format(dateFormat.tooltip)},getDateFormat:function(period){var formatConfig=null;return"hourly"===period?formatConfig={period:"hour",interval:"hours",format:"MM-DD-YYYY HH",d3Format:"%m-%d-%Y %H",tooltip:"dddd, MMM D, YYYY h a"}:"daily"===period?formatConfig={period:"day",interval:"days",format:"MM-DD-YYYY",d3Format:"%m-%d-%Y",tooltip:"dddd, MMM D, YYYY"}:"weekly"===period?formatConfig={period:"week",interval:"weeks",format:"MM-DD-YYYY",d3Format:"%m-%d-%Y",tooltip:"[W]ww gggg"}:"monthly"===period?formatConfig={period:"month",interval:"months",format:"MM-YYYY",d3Format:"%m-%Y",tooltip:"MMMM YYYY"}:"quarterly"===period?formatConfig={period:"quarter",interval:"quarters",format:"MM-YYYY",d3Format:"%m-%Y",tooltip:"[Q]Q YYYY"}:"yearly"===period?formatConfig={period:"year",interval:"years",format:"YYYY",d3Format:"%Y",tooltip:"YYYY"}:"hourofday"===period?formatConfig={period:"hourofday",interval:"hours",format:"HH",d3Format:"%H",tooltip:"h a"}:"dayofweek"===period?formatConfig={period:"dayofweek",interval:"days",format:"ddd",d3Format:"%a",
// format: 'MM-DD-YYYY',
// d3Format: '%m-%d-%Y',
tooltip:"ddd"}:"dayofmonth"===period?formatConfig={period:"dayofmonth",interval:"days",format:"DD",d3Format:"%d",tooltip:"Do"}:"weekofyear"===period?formatConfig={period:"weekofyear",interval:"weeks",format:"WW",d3Format:"%V",tooltip:"[W]WW"}:"monthofyear"===period&&(formatConfig={period:"monthofyear",interval:"months",format:"MMM",d3Format:"%b",tooltip:"MMM"}),formatConfig||(formatConfig={period:"minute",interval:"minutes",format:"MM-DD-YYYY HH:mm",d3Format:"%m-%d-%Y %H:%M",tooltip:"LLLL"}),formatConfig},getStringWithCaps:function(string){var firstChar=string.charAt(0),remaining=string.slice(1);return firstChar.toUpperCase()+remaining.toLowerCase()},getLowestYValue:function(result,dataPoints){var _step66,_iterator66=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dataPoints);try{for(_iterator66.s();!(_step66=_iterator66.n()).done;){var dataPoint=_step66.value;if((2===dataPoint.yAxis.dataType||3===dataPoint.yAxis.dataType)&&!1===this.isDataEmpty(result)){var yAlias=dataPoint.aliases.actual,min=0,isGroupBy=result.report.dataPoints[0].groupByFields&&result.report.dataPoints[0].groupByFields.length;if(isGroupBy){var firstLevelGroupName=result.report.dataPoints[0].groupByFields[0].alias;min=result.reportData.data[0][firstLevelGroupName][0][yAlias]}else min=result.reportData.data[0][yAlias];if(isGroupBy){var _step67,_firstLevelGroupName=result.report.dataPoints[0].groupByFields[0].alias,_iterator67=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(result.reportData.data);try{for(_iterator67.s();!(_step67=_iterator67.n()).done;){var _step68,data=_step67.value,groupData=data[_firstLevelGroupName],_iterator68=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(groupData);try{for(_iterator68.s();!(_step68=_iterator68.n()).done;){var group=_step68.value;Number.isInteger(group[yAlias])&&group[yAlias]<min&&(min=group[yAlias])}}catch(err){_iterator68.e(err)}finally{_iterator68.f()}}}catch(err){_iterator67.e(err)}finally{_iterator67.f()}}else{var _step69,_iterator69=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(result.reportData.data);try{for(_iterator69.s();!(_step69=_iterator69.n()).done;){var _data3=_step69.value;_data3[yAlias]<min&&(min=_data3[yAlias])}}catch(err){_iterator69.e(err)}finally{_iterator69.f()}}return min}}}catch(err){_iterator66.e(err)}finally{_iterator66.f()}},specialTimeFormatter:function(valueInSeconds,unitEnum,convertTo,milliseconds){var conversionEnum={day:4,hour:3,minute:2,second:1},multiplier=milliseconds?1e3:1;return"HOUR"===unitEnum?valueInSeconds=60*valueInSeconds*60:"MIN"===unitEnum&&(valueInSeconds*=60),4===conversionEnum[convertTo]?parseFloat(valueInSeconds/(86400*multiplier+"")).toFixed(9):3===conversionEnum[convertTo]?parseFloat(valueInSeconds/(3600*multiplier+"")).toFixed(9):2===conversionEnum[convertTo]?parseFloat(valueInSeconds/(60*multiplier+"")).toFixed(9):Math.floor(valueInSeconds)},isDataEmpty:function(result){return 0===result.reportData.data.length},specialHandler:function(result,chartData){var _result$report,_this8=this,convertTo=null,chartStateObj=null,dataPointName_convertUnit={},report_chart_data=chartData||(null!==result&&void 0!==result&&null!==(_result$report=result.report)&&void 0!==_result$report&&_result$report.chartState?result.report.chartState:null);if(report_chart_data){var _chartStateObj;try{chartStateObj=JSON.parse(report_chart_data)}catch(e){}(null===(_chartStateObj=chartStateObj)||void 0===_chartStateObj||null===(_chartStateObj=_chartStateObj.dataPoints)||void 0===_chartStateObj?void 0:_chartStateObj.length)>0&&(dataPointName_convertUnit={},chartStateObj.dataPoints.forEach((function(element){var _element$aliases;null!==element&&void 0!==element&&element.convertTounit&&(null!==element&&void 0!==element&&null!==(_element$aliases=element.aliases)&&void 0!==_element$aliases&&_element$aliases.actual?dataPointName_convertUnit[element.aliases.actual]=element.convertTounit:null!==element&&void 0!==element&&element.alias&&(dataPointName_convertUnit[element.alias]=element.convertTounit))})))}var _step70,lowestYValue=this.getLowestYValue(result,result.report.dataPoints),_iterator70=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(result.report.dataPoints);try{for(_iterator70.s();!(_step70=_iterator70.n()).done;){var dataPoint=_step70.value,durationFields=["duration","actualWorkDuration","estimatedduration","firstresponsetime"];if(("DURATION"===dataPoint.yAxis.metricEnum||"duration"===dataPoint.yAxis.unitStr||dataPoint.yAxis.field&&"DURATION"===dataPoint.yAxis.field.displayType||dataPoint.yAxis.fieldName&&durationFields.indexOf(dataPoint.yAxis.fieldName)>=0||dataPoint.yAxis.field&&"DURATION"===dataPoint.yAxis.field.metricEnum)&&!1===this.isDataEmpty(result)){var yAlias=dataPoint.aliases.actual,isMilli=!1,unitEnum=dataPoint.yAxis.unitEnum||dataPoint.yAxis.field.unitEnum;unitEnum||(unitEnum=-1===dataPoint.yAxis.fieldId?"MILLIS":"SEC");var unitStr="";if("YEAR"==unitEnum?(convertTo=null,unitStr="years"):"WEEK"==unitEnum?(convertTo=null,unitStr="weeks"):"DAY"==unitEnum?(convertTo=null,unitStr="days"):"HOUR"==unitEnum?lowestYValue>24?(unitStr="days",convertTo="day"):(unitStr="hours",convertTo=null):"MIN"==unitEnum?lowestYValue>1440?(unitStr="days",convertTo="day"):lowestYValue>60?(unitStr="hours",convertTo="hour"):(unitStr="minutes",convertTo=null):"SEC"==unitEnum?lowestYValue>86400?(unitStr="days",convertTo="day"):lowestYValue>3600?(unitStr="hours",convertTo="hour"):(unitStr="minutes",convertTo="minute"):"MILLIS"==unitEnum?(isMilli=!0,lowestYValue>864e5?(unitStr="days",convertTo="day"):lowestYValue>36e5?(unitStr="hours",convertTo="hour"):(unitStr="minutes",convertTo="minute")):
// default seconds
lowestYValue>86400?(unitStr="days",convertTo="day"):lowestYValue>3600?(unitStr="hours",convertTo="hour"):(unitStr="minutes",convertTo="minute"),result.convertTo&&(convertTo=result.convertTo,unitStr=convertTo+"s"),dataPointName_convertUnit&&yAlias in dataPointName_convertUnit){var convertUnit=dataPointName_convertUnit[yAlias].toLowerCase();unitStr=convertUnit,convertTo=convertUnit.substring(0,convertUnit.length-1)}if(convertTo){var isGroupBy=result.report.dataPoints[0].groupByFields&&result.report.dataPoints[0].groupByFields.length;if(isGroupBy){var _step72,firstLevelGroupName=result.report.dataPoints[0].groupByFields[0].alias,_iterator72=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(result.reportData.data);try{for(_iterator72.s();!(_step72=_iterator72.n()).done;){var _step73,data=_step72.value,groupData=data[firstLevelGroupName],_iterator73=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(groupData);try{for(_iterator73.s();!(_step73=_iterator73.n()).done;){var group=_step73.value,formattedValue=this.specialTimeFormatter(group[yAlias],unitEnum,convertTo,isMilli);group[yAlias]=formattedValue}}catch(err){_iterator73.e(err)}finally{_iterator73.f()}}}catch(err){_iterator72.e(err)}finally{_iterator72.f()}}else{var _step74,tempData=[],isSecond=!1,_iterator74=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(result.reportData.data);try{for(_iterator74.s();!(_step74=_iterator74.n()).done;){var _data6=_step74.value,_formattedValue2=this.specialTimeFormatter(_data6[yAlias],unitEnum,convertTo,isMilli);tempData.push(_formattedValue2)}}catch(err){_iterator74.e(err)}finally{_iterator74.f()}if("minute"===convertTo&&(isSecond=0===tempData.filter((function(d){return d>0})).length),isSecond){convertTo="second";var _step75,_iterator75=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(result.reportData.data);try{for(_iterator75.s();!(_step75=_iterator75.n()).done;){var _data4=_step75.value,_formattedValue=this.specialTimeFormatter(_data4[yAlias],unitEnum,convertTo,isMilli);_data4[yAlias]=_formattedValue}}catch(err){_iterator75.e(err)}finally{_iterator75.f()}}else{var _step76,_iterator76=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(result.reportData.data);try{for(_iterator76.s();!(_step76=_iterator76.n()).done;){var _data5=_step76.value,index=result.reportData.data.indexOf(_data5);-1!==index&&(_data5[yAlias]=tempData[index])}}catch(err){_iterator76.e(err)}finally{_iterator76.f()}}}}dataPoint.yAxis.unitEnum||dataPoint.yAxis.field.unitEnum||(result.report.defaultDurationUnit=-1),dataPoint.yAxis.unitStr=unitStr}dataPoint.yAxis.field&&13===dataPoint.yAxis.field.type&&(dataPoint.yAxis.unitStr="%")}}catch(err){_iterator70.e(err)}finally{_iterator70.f()}var _step71,_iterator71=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(result.report.dataPoints);try{var _loop32=function(){var dataPoint=_step71.value;if("resource"===dataPoint.xAxis.fieldName?dataPoint.xAxis.label=_this8.getStringWithCaps(result.report.xAggrEnum):dataPoint.yAxis.fieldName&&"actualworkduration"===dataPoint.yAxis.fieldName.toLowerCase()?dataPoint.yAxis.label="Work Duration":dataPoint.xAxis.fieldName&&"actualworkstart"===dataPoint.xAxis.fieldName.toLowerCase()?dataPoint.xAxis.label="Start Time":"siteid"===dataPoint.xAxis.fieldName.toLowerCase()&&(dataPoint.xAxis.label="Site"),"id"===dataPoint.yAxis.fieldName)if(result.moduleTypes&&0!==result.moduleTypes.length&&-1!==result.report.moduleType)dataPoint.yAxis.label=result.moduleTypes.filter((function(type){return type.type===result.report.moduleType}))[0].displayName;else if(result.moduleDisplayName)dataPoint.yAxis.label="Number of "+result.moduleDisplayName;else if(result.report&&result.report.chartState&&null!==result.report.chartState&&"null"!==result.report.chartState){var stateDataPoint=JSON.parse(result.report.chartState).dataPoints.find((function(dp){return dp.key===dataPoint.aliases.actual}));"undefined"!==typeof stateDataPoint&&stateDataPoint.label?dataPoint.yAxis.label=stateDataPoint.label:dataPoint.yAxis.label="Number of "+result.module.name+"s"}else dataPoint.yAxis.label="Number of "+result.module.name+"s";dataPoint.name=dataPoint.yAxis.label};for(_iterator71.s();!(_step71=_iterator71.n()).done;)_loop32()}catch(err){_iterator71.e(err)}finally{_iterator71.f()}return result},prepareTimeGroupedDataOptions:function(columns,reportObj,options){options["timeGroupOptions"]={};var _step77,_iterator77=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(columns);try{for(_iterator77.s();!(_step77=_iterator77.n()).done;){var column=_step77.value;options["timeGroupOptions"][column]={},reportObj.report.chartState&&reportObj.report.chartState.timeGroupOptions&&null!=reportObj.report.chartState.timeGroupOptions[column]?(options["timeGroupOptions"][column].color=reportObj.report.chartState.timeGroupOptions[column].color,void 0!==(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(reportObj.report.chartState.timeGroupOptions[column].visible)?options["timeGroupOptions"][column].visible=reportObj.report.chartState.timeGroupOptions[column].visible:options["timeGroupOptions"][column].visible=!0):(options["timeGroupOptions"][column].color=newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.newColorPicker(1)[0],options["timeGroupOptions"][column].visible=!0);var namesplit=column.split("_");options["timeGroupOptions"][column].name=namesplit[1]}}catch(err){_iterator77.e(err)}finally{_iterator77.f()}},prepareDataForSpecialScatter:function(reportObj){var data={},xValues=[];if(reportObj&&reportObj.reportData.data){var xPoint=reportObj.report.dataPoints[0],yPoint=reportObj.report.dataPoints[0];reportObj.report.dataPoints.length>1&&(yPoint=reportObj.report.dataPoints[1]);var xAlias=xPoint.aliases.actual,yAlias=yPoint.aliases.actual;for(var rkey in reportObj.reportData.data){var record=reportObj.reportData.data[rkey],temp=reportObj.reportData.data.map((function(d){return null}));temp[rkey]=record[yAlias]?record[yAlias]:null,data[record["X"]]=temp,xValues.push(record[xAlias]?record[xAlias]:null)}data["x"]=xValues}return data}}}},
/***/562023:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(103336),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(488478),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(566347),vue__WEBPACK_IMPORTED_MODULE_25__=(__webpack_require__(169358),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(162506),__webpack_require__(228436),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(450886),__webpack_require__(506203),__webpack_require__(947522),__webpack_require__(677049),__webpack_require__(720144)),newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(374575),moment_timezone__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(480008),moment_timezone__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_21__),util_deepmerge__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(708634),newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(794211),_mixins_NewDateHelper__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(105534),MomentRange=__webpack_require__(923542);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={methods:{prepareReport:function(reportObj){reportObj.report.chartState&&"string"===typeof reportObj.report.chartState&&(reportObj.report.chartState=JSON.parse(reportObj.report.chartState),reportObj.report.chartState.common&&reportObj.report.chartState.common.mode&&(reportObj.mode=reportObj.report.chartState.common.mode,reportObj.filters=reportObj.report.chartState.common.filters,reportObj.sorting=reportObj.report.chartState.common.sorting));var report={options:this.prepareReportOptions(reportObj),data:this.prepareReportData(reportObj),dateRange:this.prepareDateRange(reportObj),analyticsType:reportObj.report.analyticsType},xDataPoint=report.options.dataPoints.find((function(dp){return"x"===dp.axes}));
// reading as x axis
if(xDataPoint&&report.data){var reportDataPoint=reportObj.report.dataPoints.find((function(rdp){return rdp.name===xDataPoint.key}));reportDataPoint&&(report.options.axis.x.datatype=reportDataPoint.yAxis.dataTypeEnum.toLowerCase(),report.data.x=report.data[xDataPoint.key],xDataPoint.visible=!1,report.options.axis.x.label.text===reportDataPoint.xAxis.label&&(report.options.axis.x.label.text=reportDataPoint.yAxis.label))}return report},prepareDateRange:function(reportObj){var period=this.getTimePeriod(reportObj);return{operatorId:reportObj.dateRange.operatorId,value:reportObj.dateRange.offset,offset:-reportObj.dateRange.offset,time:reportObj.dateRange.value,rangeType:_mixins_NewDateHelper__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */.Z.DateType.properties[reportObj.dateRange.operationOnId].code,period:period,range:this.isSeriesMode(reportObj.mode)?null:this.getDateRange(reportObj.dateRange.value,period)}},prepareReportOptions:function(reportObj){var reportOptions=this.getReportOptions(reportObj);reportObj.mode&&(reportOptions.common||(reportOptions.common={}),reportOptions.common.mode=reportObj.mode,reportObj.filters&&(reportOptions.common.filters=reportObj.filters,reportOptions.common.sorting=reportObj.sorting)
/* reportOptions.common = {
          mode: reportObj.mode,
          buildingIds: reportObj.buildingIds
        } */);var defaultOptions={},mergedOptions=util_deepmerge__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */.Z.objectAssignDeep(defaultOptions,newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z.options,{style:newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z.style},reportOptions);return reportObj.report.chartState&&reportObj.report.chartState.settings&&!reportObj.report.chartState.settings.enableAlarm&&(mergedOptions.settings.alarm=!1),mergedOptions},prepareBooleanReport:function(alarmContext){var alarmData={x:[],alarms:[]},alarmRegions=[];if(alarmContext){var _step,index=0,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarmContext);try{for(_iterator.s();!(_step=_iterator.n()).done;){var d=_step.value,endTime=d.endTime?d.endTime:d.startTime;endTime=d.startTime===endTime?endTime+3e5:endTime,alarmData.x.push(this.formatDate(new Date(d.startTime),null)),alarmData.alarms.push(index),alarmRegions.push({start:this.formatDate(new Date(d.startTime),null),end:this.formatDate(new Date(endTime),null),value:d.order,alarms:d.alarmContexts}),index++}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return{data:alarmData,regions:alarmRegions}},getReportOptions:function(reportObj){var yAxisOptions={},y2AxisOptions={},unitVsAxes={};if(reportObj.report.chartState)yAxisOptions=reportObj.report.chartState.axis.y,y2AxisOptions=reportObj.report.chartState.axis.y2,
// TODO migrate
yAxisOptions.label.type||(yAxisOptions.label.type="custom",y2AxisOptions.label.type="custom"),reportObj.report.chartState.axis.y2.unit&&(unitVsAxes[reportObj.report.chartState.axis.y2.unit]="y2");else{var _step2,yAxis=null,y2Axis=null,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.report.dataPoints);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var dataPoint=_step2.value;unitVsAxes[dataPoint.yAxis.unitStr]||(yAxis?y2Axis||(y2Axis=dataPoint.yAxis,unitVsAxes[y2Axis.unitStr]="y2"):(yAxis=dataPoint.yAxis,unitVsAxes[yAxis.unitStr]="y"))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}yAxisOptions={label:{text:yAxis.label.toUpperCase(),type:"auto"},datatype:yAxis.dataTypeEnum.toLowerCase(),unit:yAxis.unitStr},y2Axis&&(y2AxisOptions={show:!0,label:{text:y2Axis.label.toUpperCase(),type:"auto"},datatype:y2Axis.dataTypeEnum.toLowerCase(),unit:y2Axis.unitStr})}var axisOptions={},xAxis=reportObj.report.dataPoints[0].xAxis;if(reportObj.report.chartState?axisOptions.x=reportObj.report.chartState.axis.x:axisOptions.x={label:{text:xAxis.label}},axisOptions.x.datatype=xAxis.dataTypeEnum.toLowerCase(),this.isSeriesMode(reportObj.mode)&&(axisOptions.x.datatype="string"),-1!==axisOptions.x.datatype.indexOf("date")){var period=this.getTimePeriod(reportObj);axisOptions.x.time={period:period,format:this.getDateFormat(period)}}axisOptions.y=yAxisOptions,axisOptions.y2=y2AxisOptions;var dataPoints=this.prepareDataPoints(reportObj,unitVsAxes);this.isSeriesMode(reportObj.mode)||this.prepareYAxes(axisOptions,dataPoints,reportObj.report.dataPoints);var multichartOptions={};this.isSeriesMode(reportObj.mode)||(multichartOptions=this.getMultichartOptions(axisOptions,dataPoints,reportObj.report.dataPoints,reportObj.report.chartState));var widgetLegend=this.prepareWidgetLegends(reportObj,dataPoints),safeLimit=this.prepareSafelimit(reportObj);if(reportObj.report.chartState)return reportObj.report.chartState.axis=axisOptions,reportObj.report.chartState.dataPoints=dataPoints,reportObj.report.chartState.multichart=multichartOptions,reportObj.report.chartState.widgetLegend=widgetLegend,reportObj.report.chartState.safeLimit=safeLimit,reportObj.report.chartState;var defaultChartType=this.isSeriesMode(reportObj.mode)||reportObj.xAggr>0?"bar":"area";return{type:reportObj.report.chartState?reportObj.report.chartState.type:defaultChartType,axis:axisOptions,multichart:multichartOptions,dataPoints:dataPoints,widgetLegend:widgetLegend,safeLimit:safeLimit}},getMultichartOptions:function(mainAxisOptions,dataPoints,reportDataPoints,chartState){var _step3,multichartOptions={},_iterator3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoints);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var dp=_step3.value,dpList=[];if("datapoint"===dp.type)
// dp.axes = 'y'
dpList.push(dp);else{var _step4,yAxis=null,y2Axis=null,unitVsAxes={},_iterator4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dp.children);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var c=_step4.value;c.unit&&(unitVsAxes[c.unit]||(yAxis?y2Axis||(unitVsAxes[c.unit]="y2",y2Axis=c.unit):(unitVsAxes[c.unit]="y",yAxis=c.unit)),c.axes=unitVsAxes[c.unit])}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}dpList.push.apply(dpList,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children))}var axisOptions={y:{label:{type:"auto"}},y2:{label:{type:"auto"}}};this.prepareYAxes(axisOptions,dpList,reportDataPoints);var multichartYTickcount={y:{ticks:{count:3}},y2:{ticks:{count:3}}},newAxisOptions={};util_deepmerge__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */.Z.objectAssignDeep(newAxisOptions,newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z.options.axis,multichartYTickcount,mainAxisOptions,axisOptions);var mKey=dp.type+"_"+(dp.key?dp.key:dp.label);chartState&&chartState.multichart&&chartState.multichart[mKey]?(multichartOptions[mKey]={axis:chartState.multichart[mKey].axis},multichartOptions[mKey].axis.y.label.type||(multichartOptions[mKey].axis.y.label.type="custom",multichartOptions[mKey].axis.y2.label.type="custom")):multichartOptions[mKey]={axis:newAxisOptions}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return multichartOptions},countUnits:function(dataPoints){var initialUnitCount={};for(var index in dataPoints)if("group"===dataPoints[index].type)for(var childIndex in dataPoints[index].children)initialUnitCount.hasOwnProperty(dataPoints[index].unitStr)?initialUnitCount[dataPoints[index].children[childIndex].unitStr]=initialUnitCount[dataPoints[index].children[childIndex].unitStr]+1:initialUnitCount[dataPoints[index].children[childIndex].unitStr]=1;else initialUnitCount.hasOwnProperty(dataPoints[index].unitStr)?initialUnitCount[dataPoints[index].unitStr]=initialUnitCount[dataPoints[index].unitStr]+1:initialUnitCount[dataPoints[index].unitStr]=1;return initialUnitCount},getLastGroupKey:function(dataPoints){var largestGroupKey=0,groups=dataPoints.filter((function(db){return"group"===db.type}));if(0===groups.length)return largestGroupKey;for(var index in dataPoints)if("group"===dataPoints[index].type){if(!(dataPoints[index].groupId>largestGroupKey))continue;largestGroupKey=dataPoints[index].groupId}return largestGroupKey},groupPoints:function(unitCount,dataPoints){for(var lastGroupKey=this.getLastGroupKey(dataPoints),_loop=function(index){if("group"===dataPoints[index].type&&(""===dataPoints[index].unit||null===dataPoints[index].unit))return 0;// continue
if(unitCount[dataPoints[index].unitStr]>1&&null!==dataPoints[index].unitStr){var group=dataPoints.filter((function(db){return"group"===db.type&&db.unit===dataPoints[index].unitStr&&""!==db.unit}));if(0!==group.length){
// add to already existing group
var removedDataPoint=dataPoints.splice(index,1),groupIndex=dataPoints.indexOf(group[0]);dataPoints[groupIndex].children.push(removedDataPoint[0])}else{
// add a new group
var dataPoint=dataPoints.splice(index,1),temp={label:dataPoint[0].unitStr,children:[],type:"group",chartType:"",dataType:dataPoint[0].dataType,groupKey:lastGroupKey+=1,unit:dataPoint[0].unitStr};
// new group temp object
temp.children.push(dataPoint[0]),dataPoints.push(temp)}}else{if(1===unitCount[dataPoints[index].unitStr]&&null!==dataPoints[index].unitStr)return 0;// continue
// dataType check if unitStr is null and dataType is boolean
if("boolean"!==dataPoints[index].dataType.trim().toLowerCase())return 0;// continue
// create new group for boolean
var _group=dataPoints.filter((function(db){return"group"===db.type&&null===db.unit&&"boolean"===db.dataType.trim().toLowerCase()}));if(0!==_group.length){var _dataPoint=dataPoints.splice(index,1),_groupIndex=dataPoints.indexOf(_group[0]);dataPoints[_groupIndex].children.push(_dataPoint[0])}else{var _dataPoint2=dataPoints.splice(index,1),_temp={label:"status",children:[],type:"group",chartType:"",groupKey:lastGroupKey+=1,unit:null,dataType:_dataPoint2[0].dataType};_temp.children.push(_dataPoint2[0]),dataPoints.push(_temp)}}},index=Object.keys(dataPoints).length-1
// grouping
;index>=0;index--)_loop(index);return dataPoints},hasDiffUnit:function(newDataPoints,finalDataPoints){var newDataPointsUnitKeys=Object.keys(this.countUnits(newDataPoints)),finalDataPointsUnitKeys=Object.keys(this.countUnits(finalDataPoints));for(var newUnit in newDataPointsUnitKeys)if(!finalDataPointsUnitKeys.includes(newDataPointsUnitKeys[newUnit]))return!0;return!1},setColorForNonExisting:function(finalDataPoints,colors){var _step5,colorIndex=0,_iterator5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(finalDataPoints);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var dataPoint=_step5.value;if("datapoint"===dataPoint.type)dataPoint.color||(dataPoint.color=colors[colorIndex],colorIndex++);else{var _step6,_iterator6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var dp=_step6.value;dp.color||(dp.color=colors[colorIndex],colorIndex++)}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}return finalDataPoints},prepareDataPoints:function(reportObj,unitVsAxes){var existingColors=[];if(1===reportObj.mode||4===reportObj.mode||5===reportObj.mode||6===reportObj.mode||7===reportObj.mode||8===reportObj.mode){var newDataPoints=[],noOfDataPoints=reportObj.report.dataPoints.length;reportObj.report.baseLines&&(noOfDataPoints+=reportObj.report.baseLines.length);
// let colorIndex = 0
for(var i=0;i<reportObj.report.dataPoints.length;i++){var dataPoint=reportObj.report.dataPoints[i],point={visible:!0,label:dataPoint.name,key:dataPoint.name,alias:dataPoint.aliases?dataPoint.aliases.actual:"",type:"datapoint",chartType:"",
// color: colors[colorIndex]
color:null,axes:unitVsAxes[dataPoint.yAxis.unitStr]?unitVsAxes[dataPoint.yAxis.unitStr]:"y",aggr:dataPoint.yAxis.aggr,parentId:dataPoint.criteria?parseInt(dataPoint.criteria.conditions["1"].value.trim()):null,
// TODO remove
fieldId:dataPoint.yAxis.fieldId,
// TODO remove
fieldName:dataPoint.yAxis.fieldName,
// TODO remove
metric:dataPoint.yAxis.metricEnum,pointType:dataPoint.type,unitStr:dataPoint.yAxis.unitStr,unitObj:dataPoint.yAxis.unitObj,dataType:dataPoint.yAxis.dataTypeEnum,enumMap:dataPoint.yAxis.enumMap};
// colorIndex++
if(
// if (point.unitObj) {
//   point['customFormat'] = defaults.buildFormatObject(point)
// }
// else {
//   if (defaults.fetchDefaultFormat(point.dataType.trim().toLowerCase()) !== null) {
//     point['customFormat'] = defaults.fetchDefaultFormat(point.dataType.trim().toLowerCase())
//   }
// }
newDataPoints.push(point),reportObj.report.baseLines){var _step7,_iterator7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var bl=_step7.value;if(2!==dataPoint.type){var blKey=dataPoint.name+" - "+bl.baseLine.name,_point={visible:!0,label:blKey,key:blKey,alias:dataPoint.aliases?dataPoint.aliases[bl.baseLine.name]:"",dpKey:dataPoint.name,dpAlias:dataPoint.aliases?dataPoint.aliases.actual:"",type:"datapoint",chartType:"",
// color: colors[colorIndex],
color:null,axes:unitVsAxes[dataPoint.yAxis.unitStr]?unitVsAxes[dataPoint.yAxis.unitStr]:"y",isBaseLine:!0,baseLineName:bl.baseLine.name,parentId:dataPoint.criteria?parseInt(dataPoint.criteria.conditions["1"].value.trim()):null,fieldId:dataPoint.yAxis.fieldId,fieldName:dataPoint.yAxis.fieldName,metric:dataPoint.yAxis.metricEnum,pointType:dataPoint.type,unitStr:dataPoint.yAxis.unitStr,unitObj:dataPoint.yAxis.unitObj,dataType:dataPoint.yAxis.dataTypeEnum,enumMap:dataPoint.yAxis.enumMap};
// if (point.unitObj) {
//   point['customFormat'] = defaults.buildFormatObject(point)
// }
// else {
//   if (defaults.fetchDefaultFormat(point.dataType.trim().toLowerCase()) !== null) {
//     point['customFormat'] = defaults.fetchDefaultFormat(point.dataType.trim().toLowerCase())
//   }
// }
newDataPoints.push(_point)}}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}}}var finalDataPoints=[];if(reportObj.report.chartState){var _step8,newDataPointMap={},_iterator8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(newDataPoints);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _newDp5=_step8.value;newDataPointMap[_newDp5.key]=_newDp5}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}for(var stateDataPointMap={},stateDataPoints=reportObj.report.chartState.dataPoints,_i=0;_i<stateDataPoints.length;_i++){var dp=stateDataPoints[_i];if("datapoint"===dp.type){stateDataPointMap[dp.key]=!0;var newDp=newDataPointMap[dp.key];newDp&&(newDp.label=dp.label,newDp.visible=dp.visible,newDp.chartType=dp.chartType,newDp.color=dp.color,newDp.axes=dp.axes,existingColors.push(dp.color),
// if (dp.customFormat) {
//   newDp.customFormat = dp.customFormat
// }
finalDataPoints.push(newDp))}else{for(var childList=[],j=0;j<dp.children.length;j++){var subDp=dp.children[j];stateDataPointMap[subDp.key]=!0;var _newDp=newDataPointMap[subDp.key];_newDp&&(_newDp.label=subDp.label,_newDp.visible=subDp.visible,_newDp.chartType=subDp.chartType,_newDp.color=subDp.color,existingColors.push(subDp.color),_newDp.axes=subDp.axes,
// if (dp.customFormat) {
//   newDp.customFormat = dp.customFormat
// }
childList.push(_newDp))}finalDataPoints.push({label:dp.label,type:"group",groupKey:dp.groupKey,chartType:"",children:childList,unit:dp.unit,dataType:""===dp.dataType?"":dp.dataType})}}if(reportObj.report.chartState.settings&&reportObj.report.chartState.settings.chartMode&&"multi"===reportObj.report.chartState.settings.chartMode&&this.hasDiffUnit(newDataPoints,finalDataPoints)&&reportObj.report.chartState.settings.hasOwnProperty("autoGroup")&&!1===reportObj.report.chartState.settings.autoGroup){reportObj.report.chartState.settings.autoGroup=!0;var _step9,_iterator9=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(newDataPoints);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _newDp2=_step9.value;stateDataPointMap[_newDp2.key]||finalDataPoints.push(_newDp2)}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}finalDataPoints=this.groupPoints(this.countUnits(finalDataPoints),finalDataPoints)}else if(reportObj.report.chartState.settings&&reportObj.report.chartState.settings.hasOwnProperty("autoGroup")&&!0===reportObj.report.chartState.settings.autoGroup){var _step10,onlyNewDataPoints=[],_iterator10=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(newDataPoints);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _newDp3=_step10.value;stateDataPointMap[_newDp3.key]||onlyNewDataPoints.push(_newDp3)}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}if(0!==onlyNewDataPoints.length){var _step11,_iterator11=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(onlyNewDataPoints);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _dataPoint3=_step11.value;finalDataPoints.push(_dataPoint3)}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}finalDataPoints=this.groupPoints(this.countUnits(finalDataPoints),finalDataPoints)}}else{var _step12,_iterator12=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(newDataPoints);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _newDp4=_step12.value;stateDataPointMap[_newDp4.key]||finalDataPoints.push(_newDp4)}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}}}else finalDataPoints=newDataPoints;var colors=newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */.Z.newColorPicker(noOfDataPoints,existingColors);return finalDataPoints=this.setColorForNonExisting(finalDataPoints,colors),finalDataPoints}var _newDataPoints=[],keys=Object.keys(reportObj.reportData),noOfColors=reportObj.report.baseLines?reportObj.report.baseLines.length:0;if(noOfColors+=1,keys.length){var _dataPoint4=reportObj.report.dataPoints[0],_point2={visible:!0,label:_dataPoint4.yAxis.label,alias:_dataPoint4.aliases?_dataPoint4.aliases.actual:"",key:this.isSeriesMode(reportObj.mode)?"actual":_dataPoint4.yAxis.label,type:"datapoint",chartType:"",
// color: colors[colorIndex],
color:null,axes:"y",aggr:_dataPoint4.yAxis.aggr,parentId:_dataPoint4.criteria?parseInt(_dataPoint4.criteria.conditions["1"].value.trim()):null,fieldId:_dataPoint4.yAxis.fieldId,fieldName:_dataPoint4.yAxis.fieldName,metric:_dataPoint4.yAxis.metricEnum,unitStr:_dataPoint4.yAxis.unitStr,unitObj:_dataPoint4.yAxis.dataObj,dataType:_dataPoint4.yAxis.dataTypeEnum,enumMap:_dataPoint4.yAxis.enumMap};if(
// if (point.unitObj) {
//   point['customFormat'] = defaults.buildFormatObject(point)
// }
// else {
//   if (defaults.fetchDefaultFormat(point.dataType.trim().toLowerCase()) !== null) {
//     point['customFormat'] = defaults.fetchDefaultFormat(point.dataType.trim().toLowerCase())
//   }
// }
_newDataPoints.push(_point2),reportObj.report.baseLines){var _step13,_iterator13=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _bl=_step13.value,_point3={visible:!0,label:_bl.baseLine.name,alias:_dataPoint4.aliases?_dataPoint4.aliases[_bl.baseLine.name]:"",key:this.isSeriesMode(reportObj.mode)?_bl.baseLine.name:_dataPoint4.name+" - "+_bl.baseLine.name,dpKey:_dataPoint4.name,dpAlias:_dataPoint4.aliases?_dataPoint4.aliases.actual:"",type:"datapoint",chartType:"",
// color: colors[colorIndex]
color:null,axes:"y",isBaseLine:!0,baseLineName:_bl.baseLine.name,parentId:_dataPoint4.criteria?parseInt(_dataPoint4.criteria.conditions["1"].value.trim()):null,fieldId:_dataPoint4.yAxis.fieldId,fieldName:_dataPoint4.yAxis.fieldName,metric:_dataPoint4.yAxis.metricEnum,unitStr:_dataPoint4.yAxis.unitStr,unitObj:_dataPoint4.yAxis.unitObj,dataType:_dataPoint4.yAxis.dataTypeEnum,enumMap:_dataPoint4.yAxis.enumMap};
// if (point.unitObj) {
//   point['customFormat'] = defaults.buildFormatObject(point)
// }
// else {
//   if (defaults.fetchDefaultFormat(point.dataType.trim().toLowerCase()) !== null) {
//     point['customFormat'] = defaults.fetchDefaultFormat(point.dataType.trim().toLowerCase())
//   }
// }
_newDataPoints.push(_point3)}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}}}var _stateDataPointMap={},stateDataPointGroupMap={};if(reportObj.report.chartState)for(var _stateDataPoints=reportObj.report.chartState.dataPoints,_i2=0;_i2<_stateDataPoints.length;_i2++){var _dp=_stateDataPoints[_i2];if("datapoint"===_dp.type)_stateDataPointMap[_dp.key]=_dp;else for(var _j=0;_j<_dp.children.length;_j++){var _subDp=_dp.children[_j];_stateDataPointMap[_subDp.key]=_subDp,stateDataPointGroupMap[_subDp.key]=_dp.label}}for(var _finalDataPoints=[],groupVsList={},_i3=0,_newDataPoints2=_newDataPoints;_i3<_newDataPoints2.length;_i3++){var _newDp6=_newDataPoints2[_i3];if(_stateDataPointMap[_newDp6.key]){var stateDp=_stateDataPointMap[_newDp6.key];_newDp6.label=stateDp.label,_newDp6.visible=stateDp.visible,_newDp6.chartType=stateDp.chartType,_newDp6.color=stateDp.color,existingColors.push(stateDp.color),_newDp6.axes=stateDp.axes}else if(stateDataPointGroupMap[_newDp6.key]){var groupLabel=stateDataPointGroupMap[_newDp6.key];groupVsList[groupLabel]||(groupVsList[groupLabel]={label:groupLabel,type:"group",chartType:"",children:[]}),groupVsList[groupLabel].children.push(_newDp6)}else _finalDataPoints.push(_newDp6)}var _colors=newcharts_helpers_color_helper__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */.Z.newColorPicker(noOfColors,existingColors);_finalDataPoints=this.setColorForNonExisting(_finalDataPoints,_colors);for(var groupKeys=Object.keys(groupVsList),_i4=0,_groupKeys=groupKeys;_i4<_groupKeys.length;_i4++){var gk=_groupKeys[_i4];groupVsList[gk].children.length&&_finalDataPoints.push(groupVsList[gk])}return _finalDataPoints},prepareYAxes:function(axisOptions,dataPoints,reportDataPoints){var _step14,axes=["y","y2"],allPoints=[],_iterator14=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoints);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var dp=_step14.value;"group"!==dp.type?"x"!==dp.axes&&!1!==dp.visible&&allPoints.push(dp):allPoints.push.apply(allPoints,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children.filter((function(child){return"x"!==child.axes&&!1!==child.visible}))))}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}axes.forEach((function(axis){var yAxis=axisOptions[axis],yPoints=allPoints.filter((function(dp){return dp.axes===axis}));if(yPoints.length){yAxis.show=!0;var _step15,rdPoints=[],rdLabels=new Set,_iterator15=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(yPoints);try{var _loop2=function(){var point=_step15.value,dp=reportDataPoints.find((function(rdp){return point.dpKey===rdp.name||point.key===rdp.name}));dp.yAxis.unitStr&&rdPoints.push(dp),dp.yAxis.label&&rdLabels.add(dp.yAxis.label.toUpperCase())};for(_iterator15.s();!(_step15=_iterator15.n()).done;)_loop2()}catch(err){_iterator15.e(err)}finally{_iterator15.f()}var units=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(new Set(rdPoints.map((function(rp){return rp.yAxis.unitStr}))));1===units.length?(yAxis.unit=units[0],yAxis.datatype=rdPoints[0].yAxis.dataTypeEnum.toLowerCase()):(yAxis.unit=null,yAxis.datatype=null),"auto"===yAxis.label.type&&(yAxis.label.text=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(rdLabels).join(" & "))}else yAxis.show=!1}))},prepareSafelimit:function(reportObj){var safeLimits=[];if(reportObj&&reportObj.safeLimits)for(var key in reportObj.safeLimits){var range=reportObj.safeLimits[key];range&&(range[0]&&safeLimits.push({value:range[0],label:"Min",key:"min",datapoint:key}),range[1]&&safeLimits.push({value:range[1],label:"Max",key:"max",datapoint:key}))}return safeLimits},prepareWidgetLegends:function(reportObj,dataPoints){var stateLegend=reportObj.report.chartState?reportObj.report.chartState.widgetLegend:null,widgetLegend={show:stateLegend?stateLegend.show:2===reportObj.report.analyticsType&&!this.isSeriesMode(reportObj.mode),variances:{}},sumDefaultUnits=["AED","kWh","co2","kg"],sumDefaultFields=["cdd","hdd","wdd","cost"],sumMetricFields=["ENERGY","LENGTH","MASS","CURRENCY"],points=[];return dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):points.push(dp)})),1===points.length?widgetLegend.variances[dataPoints[0].alias]=["min","max","sum","avg"]:points.forEach((function(dp){var showSumAggr=sumDefaultUnits.includes(dp.unitStr)||sumDefaultFields.includes(dp.fieldName)||sumMetricFields.includes(dp.metric);widgetLegend.variances[dp.alias]=2!==dp.pointType?[showSumAggr?"sum":"avg"]:[]})),stateLegend&&this.$helpers.copy(widgetLegend.variances,stateLegend.variances),widgetLegend},getTimePeriod:function(reportObj){var period=null;return reportObj.xAggr&&(20===reportObj.xAggr?period="hourly":12===reportObj.xAggr?period="daily":11===reportObj.xAggr?period="weekly":10===reportObj.xAggr?period="monthly":8===reportObj.xAggr?period="yearly":25===reportObj.xAggr&&(period="quarterly")),period},isEmptyData:function(reportObj){for(var key in reportObj.reportData){var dp=reportObj.reportData[key],keys=Object.keys(dp);if(keys.length){var _step16,_iterator16=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(keys);try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var k=_step16.value,d=reportObj.reportData[key][k];if("object"!==(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d))return!1;if(Object.keys(d).length)return!1}}catch(err){_iterator16.e(err)}finally{_iterator16.f()}}}return!0},isSeriesMode:function(mode){return 2===mode||6===mode||7===mode||8===mode},prepareReportData:function(reportObj){var _this=this;if(this.isEmptyData(reportObj))return null;var x=[],data={};if(this.isSeriesMode(reportObj.mode)){var dataList=[],xMap={};if(reportObj.report.baseLines)if(reportObj.filters){var _step17,_iterator17=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var bl=_step17.value,baseLineData={};for(var key in reportObj.reportData){if(reportObj.reportData[key][bl.baseLine.name])for(var blData=reportObj.reportData[key][bl.baseLine.name],_i5=0,_Object$keys=Object.keys(blData);_i5<_Object$keys.length;_i5++){var d=_Object$keys[_i5];xMap[d]=key,baseLineData[d]=blData[d]}dataList.push({name:key+" - "+bl.baseLine.name,data:baseLineData})}}}catch(err){_iterator17.e(err)}finally{_iterator17.f()}}else{var _step18,_iterator18=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _bl2=_step18.value,_baseLineData={};for(var _key in reportObj.reportData)if(reportObj.reportData[_key][_bl2.baseLine.name])for(var _blData=reportObj.reportData[_key][_bl2.baseLine.name],_i6=0,_Object$keys2=Object.keys(_blData);_i6<_Object$keys2.length;_i6++){var _d=_Object$keys2[_i6];xMap[_d]=_key,_baseLineData[_d]=_blData[_d]}dataList.push({name:_bl2.baseLine.name,data:_baseLineData})}}catch(err){_iterator18.e(err)}finally{_iterator18.f()}}if(reportObj.filters)for(var _key2 in reportObj.reportData){var actualData={};if(reportObj.reportData[_key2]["actual"])for(var actualDataObj=reportObj.reportData[_key2]["actual"],_i7=0,_Object$keys3=Object.keys(actualDataObj);_i7<_Object$keys3.length;_i7++){var _d2=_Object$keys3[_i7];xMap[_d2]=_key2,actualData[_d2]=actualDataObj[_d2]}dataList.push({name:_key2,data:actualData})}else{var _actualData={};for(var _key3 in reportObj.reportData)if(reportObj.reportData[_key3]["actual"])for(var _actualDataObj=reportObj.reportData[_key3]["actual"],_i8=0,_Object$keys4=Object.keys(_actualDataObj);_i8<_Object$keys4.length;_i8++){var _d3=_Object$keys4[_i8];xMap[_d3]=_key3,_actualData[_d3]=_actualDataObj[_d3]}dataList.push({name:"actual",data:_actualData})}var _step19,_iterator19=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.reportXValues);try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var xVal=_step19.value;reportObj.filters?x.push(xVal):x.push(xMap[xVal]);var _step20,_iterator20=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataList);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var dataObj=_step20.value;data[dataObj.name]||(data[dataObj.name]=[]),dataObj.data[xVal]?data[dataObj.name].push(dataObj.data[xVal]):data[dataObj.name].push(null)}}catch(err){_iterator20.e(err)}finally{_iterator20.f()}}}catch(err){_iterator19.e(err)}finally{_iterator19.f()}}else{var period=this.getTimePeriod(reportObj);if(period){var dataPointKeys=[],tmpData={};if(reportObj.report.baseLines){var _step24,_iterator24=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var _bl4=_step24.value,_loop4=function(_key6){var dp=reportObj.report.dataPoints.find((function(dp){return dp.name===_key6}));if(2!==dp.type){var blKey=_key6+" - "+_bl4.baseLine.name;dataPointKeys.push(blKey),tmpData[blKey]={};var _blData2=reportObj.reportData[_key6][_bl4.baseLine.name];if(_blData2)for(var _i10=0,_Object$keys5=Object.keys(_blData2);_i10<_Object$keys5.length;_i10++){var _d4=_Object$keys5[_i10],cd=parseInt(_d4),dateStr=_this.formatDate(new Date(cd),period);tmpData[blKey][dateStr]=reportObj.reportData[_key6][_bl4.baseLine.name][_d4]}}};for(var _key6 in reportObj.reportData)_loop4(_key6)}}catch(err){_iterator24.e(err)}finally{_iterator24.f()}}var _step25,_iterator25=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.reportXValues);try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _time3=_step25.value,dateStr=this.formatDate(new Date(_time3),period);for(var _key7 in reportObj.reportData)-1===dataPointKeys.indexOf(_key7)&&dataPointKeys.push(_key7),tmpData[_key7]||(tmpData[_key7]={}),reportObj.reportData[_key7]["actual"]&&reportObj.reportData[_key7]["actual"][_time3]&&(tmpData[_key7][dateStr]=reportObj.reportData[_key7]["actual"][_time3])}}catch(err){_iterator25.e(err)}finally{_iterator25.f()}var range=this.getDateRange(reportObj.dateRange.value,period);x=range.domain;var _step26,_iterator26=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(x);try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _step27,val=_step26.value,_iterator27=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPointKeys);try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var _key8=_step27.value;data[_key8]||(data[_key8]=[]),tmpData[_key8]&&tmpData[_key8][val]?data[_key8].push(tmpData[_key8][val]):data[_key8].push(null)}}catch(err){_iterator27.e(err)}finally{_iterator27.f()}}}catch(err){_iterator26.e(err)}finally{_iterator26.f()}}else{var _step21,xValues=[],_iterator21=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.reportXValues);try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _time2=_step21.value;xValues.push(_time2)}}catch(err){_iterator21.e(err)}finally{_iterator21.f()}if(reportObj.report.baseLines){var _step22,_iterator22=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(xValues);try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var _step23,time=_step22.value,_iterator23=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObj.report.baseLines);try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var _bl3=_step23.value,_loop3=function(_key4){var dp=reportObj.report.dataPoints.find((function(dp){return dp.name===_key4}));if(2!==dp.type){var blKey=_key4+" - "+_bl3.baseLine.name;data[blKey]||(data[blKey]=[]),reportObj.reportData[_key4][_bl3.baseLine.name]&&reportObj.reportData[_key4][_bl3.baseLine.name][time]?data[blKey].push(reportObj.reportData[_key4][_bl3.baseLine.name][time]):data[blKey].push(null)}};for(var _key4 in reportObj.reportData)_loop3(_key4)}}catch(err){_iterator23.e(err)}finally{_iterator23.f()}}}catch(err){_iterator22.e(err)}finally{_iterator22.f()}}for(var _i9=0,_xValues=xValues;_i9<_xValues.length;_i9++){var _time=_xValues[_i9];for(var _key5 in x.push(this.formatDate(new Date(_time),period)),reportObj.reportData)data[_key5]||(data[_key5]=[]),reportObj.reportData[_key5]["actual"]&&reportObj.reportData[_key5]["actual"][_time]?data[_key5].push(reportObj.reportData[_key5]["actual"][_time]):data[_key5].push(null)}}}return x.length?(data.x=x,data):null},getDateRange:function(dateRange,period){var momentRange=MomentRange.extendMoment(moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()),range=momentRange.range(new Date(dateRange[0]),new Date(dateRange[1])),dateFormat=this.getDateFormat(period),dateAxis={};if(dateAxis.min=this.formatDate(new Date(dateRange[0]),period),dateAxis.max=this.formatDate(new Date(dateRange[1]),period),dateFormat.interval){var domain=null;domain="weekly"===period?Array.from(range.by(dateFormat.interval)).map((function(r){return moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(r.valueOf()).tz(vue__WEBPACK_IMPORTED_MODULE_25__["default"].prototype.$timezone).startOf("week").format(dateFormat.format)})):"monthly"===period?Array.from(range.by(dateFormat.interval)).map((function(r){return moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(r.valueOf()).tz(vue__WEBPACK_IMPORTED_MODULE_25__["default"].prototype.$timezone).startOf("month").format(dateFormat.format)})):"quarterly"===period?Array.from(range.by(dateFormat.interval)).map((function(r){return moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(r.valueOf()).tz(vue__WEBPACK_IMPORTED_MODULE_25__["default"].prototype.$timezone).startOf("quarter").format(dateFormat.format)})):Array.from(range.by(dateFormat.interval)).map((function(r){return moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(r.valueOf()).tz(vue__WEBPACK_IMPORTED_MODULE_25__["default"].prototype.$timezone).format(dateFormat.format)})),2===domain.length&&domain[0]===domain[1]&&(domain=[domain[0]]),dateAxis.domain=domain}return dateAxis},formatDate:function(date,period){var dateFormat=this.getDateFormat(period);return moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(date).tz(vue__WEBPACK_IMPORTED_MODULE_25__["default"].prototype.$timezone).format(dateFormat.format)},getDateFormat:function(period){var formatConfig=null;return"hourly"===period?formatConfig={period:"hour",interval:"hours",format:"MM-DD-YYYY HH",d3Format:"%m-%d-%Y %H",tooltip:"dddd, MMM D, YYYY h a"}:"daily"===period?formatConfig={period:"day",interval:"days",format:"MM-DD-YYYY",d3Format:"%m-%d-%Y",tooltip:"dddd, MMM D, YYYY"}:"weekly"===period?formatConfig={period:"week",interval:"weeks",format:"MM-DD-YYYY",d3Format:"%m-%d-%Y",tooltip:"ww gggg"}:"monthly"===period?formatConfig={period:"month",interval:"months",format:"MM-YYYY",d3Format:"%m-%Y",tooltip:"MMMM YYYY"}:"quarterly"===period?formatConfig={period:"quarter",interval:"quarters",format:"MM-YYYY",d3Format:"%m-%Y",tooltip:"[Q]Q YYYY"}:"yearly"===period&&(formatConfig={period:"year",interval:"years",format:"YYYY",d3Format:"%Y",tooltip:"YYYY"}),formatConfig||(formatConfig={period:"minute",interval:"minutes",format:"MM-DD-YYYY HH:mm",d3Format:"%m-%d-%Y %H:%M",tooltip:"LLL"}),formatConfig}}}},
/***/601458:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(566347);
/* harmony import */__webpack_require__(670560),__webpack_require__(228436),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(169358),__webpack_require__(212826),__webpack_require__(434284),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(506203),__webpack_require__(76265),__webpack_require__(648324),__webpack_require__(919649),__webpack_require__(821694);
/* harmony default export */__webpack_exports__.Z={computed:{showOnlyImage:function(){return"true"===this.$route.query.showOnlyImage||!0===this.$route.query.showOnlyImage},isPrinting:function(){return"true"===this.$route.query.print||!0===this.$route.query.print},showHeader:function(){return"false"!==this.$route.query.showHeader},showPrintDetails:function(){return"false"!==this.$route.query.showPrintDetails}},methods:{getDuplicateCases:function(){return{SASP:1,
// Single Point Single Asset
SAMP:2,
// Single Point Multiple asset
MASP:3,
// Multiple Asset Single Point
MPMA:4}},getFields:function(id){var fields=[];for(var dataPointIndex in this.resultObj.report.dataPoints)fields.push(this.getField(id,this.resultObj.report.dataPoints[dataPointIndex]));return fields},groupDataPoints:function(oldDataPoints,newDataPoints){var result=[];if(1===this.duplicateCase.case||2===this.duplicateCase.case){var _loop=function(dataPointIndex){if("datapoint"===oldDataPoints[dataPointIndex].type.trim().toLowerCase()){var match=newDataPoints.filter((function(element){return oldDataPoints[dataPointIndex].fieldId===element.fieldId}));result.push(match[0])}else{
// loop through group
var groupChildren=[],_loop2=function(childIndex){var match=newDataPoints.filter((function(element){return oldDataPoints[dataPointIndex].children[childIndex].fieldId===element.fieldId}));groupChildren.push(match[0])};for(var childIndex in oldDataPoints[dataPointIndex].children)_loop2(childIndex);var tempGroup=oldDataPoints[dataPointIndex];tempGroup.children=groupChildren,result.push(tempGroup)}};for(var dataPointIndex in oldDataPoints)_loop(dataPointIndex);return result}if(3===this.duplicateCase.case){var _loop3=function(_dataPointIndex){if("dataPoint"===oldDataPoints[_dataPointIndex].type.trim().toLowerCase()){var match=newDataPoints.filter((function(element){return element.parentId===oldDataPoints[_dataPointIndex].parentId}));result.push(match[0])}else{
// loop through group
var groupChildren=[],_loop4=function(childIndex){var match=newDataPoints.filter((function(element){return element.parentId===oldDataPoints[_dataPointIndex].children[childIndex].parentId}));groupChildren.push(match[0])};for(var childIndex in oldDataPoints[_dataPointIndex].children)_loop4(childIndex);var tempGroup=oldDataPoints[_dataPointIndex];tempGroup.children=groupChildren,result.push(tempGroup)}};for(var _dataPointIndex in oldDataPoints)_loop3(_dataPointIndex);return result}},getFieldStats:function(id){var _step,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(this.loadedFields);try{for(_iterator.s();!(_step=_iterator.n()).done;){var readings=_step.value;if(Object.keys(readings.readings).includes(id.toString()))return readings.readings[id]}}catch(err){_iterator.e(err)}finally{_iterator.f()}},getParentFromCriteria:function(dataPoint){var _step2,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.criteria.conditions);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var condition=_step2.value;if("parentId"===condition.fieldName)return condition.value}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return null},getField:function(id,dataPoint){var field={};field["parentId"]=[1===this.duplicateCase.case||2===this.duplicateCase.case?id:dataPoint.metaData?dataPoint.metaData.parentIds[0]:this.getParentFromCriteria(dataPoint)];var yAxis={};return yAxis["fieldId"]=1===this.duplicateCase.case||2===this.duplicateCase.case?dataPoint.yAxis.fieldId:id,yAxis["aggr"]=1===this.duplicateCase.case||2===this.duplicateCase.case?dataPoint.yAxis.aggr:this.resultObj.report.dataPoints[0].yAxis.aggr,yAxis["unitStr"]=1===this.duplicateCase.case||2===this.duplicateCase.case?dataPoint.yAxis.unitStr:this.getFieldStats(id).unitStr,yAxis["dataType"]=1===this.duplicateCase.case||2===this.duplicateCase.case?dataPoint.yAxis.dataType:this.getFieldStats(id).dataType,field["yAxis"]=yAxis,field["aliases"]={actual:dataPoint.aliases.actual},field["transformWorkflow"]=1===this.duplicateCase.case||2===this.duplicateCase.case?dataPoint.transformWorkflow:null,field["type"]=1===this.duplicateCase.case||2===this.duplicateCase.case?dataPoint.type:this.resultObj.report.dataPoints[0].type,field},getNewAssetName:function(listOfAssets,id){for(var index in listOfAssets)if(listOfAssets[index].id===id)return listOfAssets[index].name},getFieldName:function(listOfFields,id){for(var index in listOfFields)if(Object.keys(listOfFields[index].readings).includes(id.toString()))return listOfFields[index].readings[id].displayName;return null},getDuplicateCase:function(reportObj){var parentIds=[],fieldIds=[],result={},duplicateCases=this.getDuplicateCases();if(reportObj&&reportObj.options)for(var index in reportObj.options.dataPoints){var dataPoint=reportObj.options.dataPoints[index];if("datapoint"===dataPoint.type.trim().toLowerCase())parentIds.includes(dataPoint.parentId)||null===dataPoint.parentId||parentIds.push(dataPoint.parentId),fieldIds.includes(dataPoint.fieldId)||null===dataPoint.fieldId||fieldIds.push(dataPoint.fieldId);else if(dataPoint.children.length>0)for(var childIndex in dataPoint.children)parentIds.includes(dataPoint.children[childIndex].parentId)||parentIds.push(dataPoint.children[childIndex].parentId),fieldIds.includes(dataPoint.children[childIndex].fieldId)||fieldIds.push(dataPoint.children[childIndex].fieldId)}return result["parentIds"]=parentIds,result["fieldIds"]=fieldIds,0===parentIds.length?null:(1===parentIds.length&&1===fieldIds.length?result["case"]=duplicateCases.SASP:1===parentIds.length&&fieldIds.length>1?result["case"]=duplicateCases.SAMP:parentIds.length>1&&1===fieldIds.length?result["case"]=duplicateCases.MASP:result["case"]=duplicateCases.MPMA,result)},getDefaultReportParams:function(resultObj){var reportParams={},reportContext={name:""};return reportContext["description"]="Auto created report with "+resultObj.report.name+" as reference",reportContext["reportFolderId"]=resultObj.report.reportFolderId,reportContext["analyticsType"]=resultObj.report.analyticsType,reportParams["reportContext"]=reportContext,resultObj.dateRange.operatorId&&(reportParams["dateOperator"]=resultObj.dateRange.operatorId,42===resultObj.dateRange.operatorId||49===resultObj.dateRange.operatorId||50===resultObj.dateRange.operatorId||51===resultObj.dateRange.operatorId?
// last N days/weeks/months/quarters/years
reportParams["dateOperatorValue"]=resultObj.report.dateRange.offset:62===resultObj.dateRange.operatorId||63===resultObj.dateRange.operatorId||64===resultObj.dateRange.operatorId||65===resultObj.dateRange.operatorId?
// custom date/week/month/quarter/year
reportParams["dateOperatorValue"]=resultObj.report.dateRange.startTime?resultObj.report.dateRange.startTime:resultObj.report.dateRange.time[0]:"R"===resultObj.dateRange.rangeType&&(reportParams["dateOperatorValue"]=resultObj.report.dateRange.time.join(","))),reportParams["mode"]=resultObj.mode,reportParams["xAggr"]=resultObj.xAggr,reportParams},getReadingReportDefaultParams:function(resultObj){var reportParams={newFormat:!0};return reportParams["startTime"]=resultObj.report.dateRange.startTime,reportParams["endTime"]=resultObj.report.dateRange.endTime,reportParams["mode"]=resultObj.mode,reportParams["xAggr"]=resultObj.report.xAggr,reportParams},copyNamesToyAxis:function(fields,newReport){for(var index in fields){var field=fields[index];field["name"]=newReport[index].name}return fields},prepareReportTemplate:function(resultObject,duplicateCase){var _this=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(){var temp,parentId,response;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(temp={},!resultObject||!resultObject.report.dataPoints||0==resultObject.report.dataPoints.length){_context.next=15;break}if(1!==duplicateCase&&2!==duplicateCase){_context.next=15;break}return resultObject.report.dataPoints[0].yAxis.module.name,parentId=resultObject.report.dataPoints[0].metaData.parentIds[0],_context.next=7,_this.$http.get("/asset/summary/"+parentId);case 7:response=_context.sent,temp["show"]=!0,temp["categoryId"]=response.data.asset.category.id,temp["defaultValue"]=resultObject.report.dataPoints[0].metaData.parentIds[0],temp["parentId"]=null,temp["siteId"]=null,temp["chooseValues"]=["all"],temp["buildingId"]=resultObject.report.dataPoints[0].buildingId&&-1!==resultObject.report.dataPoints[0].buildingId?resultObject.report.dataPoints[0].buildingId:-1;case 15:return _context.abrupt("return",temp);case 16:case"end":return _context.stop()}}),_callee)})))()},loadReportTemplateValues:function(reportTemplate,fieldVsValueList){var _this2=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(){var categoryId,request,_iterator3,_step3,key,values,_iterator4,_step4,val,url,response,_reportTemplate$choos;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!reportTemplate){_context2.next=11;break}if(categoryId=reportTemplate.categoryId,request={},
/* request['category'] = {
               operatorId:36,
               value:[categoryId + ''],
               orFilters: [{field: 'id', operatorId: 9, value: [reportTemplate.defaultValue + '']}]
              } */
reportTemplate.buildingId&&-1!==reportTemplate.buildingId?request["space"]={operatorId:38,value:[reportTemplate.buildingId+""]}:reportTemplate.siteId&&-1!==reportTemplate.siteId&&(request["space"]={operatorId:36,value:[reportTemplate.siteId+""]}),reportTemplate.defaultValue&&(request["id"]={operatorId:9,value:[reportTemplate.defaultValue+""],orFilters:[{field:"category",operatorId:36,value:[categoryId+""]}]}),fieldVsValueList&&0!==fieldVsValueList.length){_iterator3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(fieldVsValueList);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){if(key=_step3.value,values=[],key.values)if("string"===typeof key.values)values=5===key.operatorId?key.values.split(","):[key.values];else{_iterator4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(key.values);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;)val=_step4.value,values.push(val+"")}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}else values=null;request[key.fieldName]={operatorId:key.operatorId,value:values}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}return url="/asset/all?filters="+encodeURIComponent(JSON.stringify(request))+"&orderType=desc&overrideViewOrderBy=true",_context2.next=9,_this2.$http.get(url);case 9:response=_context2.sent,response&&response.data&&(1==(null===reportTemplate||void 0===reportTemplate||null===(_reportTemplate$choos=reportTemplate.chooseValues)||void 0===_reportTemplate$choos?void 0:_reportTemplate$choos.length)?(reportTemplate.chooseValues=[reportTemplate.chooseValues[0]],Array.prototype.push.apply(reportTemplate.chooseValues,response.data.assets)):reportTemplate.chooseValues=response.data.assets);case 11:case"end":return _context2.stop()}}),_callee2)})))()},getFiltersFromCriteria:function(reportTemplate){if(reportTemplate.criteria){var filters=[];for(var key in reportTemplate.criteria.conditions){var condition=reportTemplate.criteria.conditions[key],temp={};temp={fieldName:condition.fieldName,operatorId:condition.operatorId,values:condition.value?5===condition.operatorId?condition.value.split(","):[condition.value]:null},filters.push(temp)}return filters}return null},checkFilterFeasibility:function(reportObject){var duplicateCase;if(reportObject&&reportObject.reportType&&2!==reportObject.reportType&&3!==reportObject.reportType){var _step5,currentLocation=new Set,_iterator5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObject.options.dataPoints);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _dataPoint=_step5.value;_dataPoint.buildingId&&-1!==_dataPoint.buildingId&&currentLocation.add(_dataPoint.buildingId)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}if(1===currentLocation.size){var _duplicateCase,_duplicateCase2;if(duplicateCase=this.getDuplicateCase(reportObject),1===(null===(_duplicateCase=duplicateCase)||void 0===_duplicateCase?void 0:_duplicateCase.case)||2===(null===(_duplicateCase2=duplicateCase)||void 0===_duplicateCase2?void 0:_duplicateCase2.case)){var _step6,isSpaceReadingPresent=!1,_iterator6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(reportObject.options.dataPoints);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var dataPoint=_step6.value,parentId=dataPoint.parentId;if(currentLocation.has(parentId)){isSpaceReadingPresent=!0;break}}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}return!isSpaceReadingPresent}return!1}return!1}return!1}}}},
/***/760396:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(488478),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(103336),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(566347),d3__WEBPACK_IMPORTED_MODULE_24__=(__webpack_require__(169358),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(670560),__webpack_require__(821057),__webpack_require__(648324),__webpack_require__(162506),__webpack_require__(865137),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(677049),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(186466),__webpack_require__(897389),__webpack_require__(348727)),src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(146371),src_pages_report_mixins_NewDataFormatHelper__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(804911),moment__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(730381),moment__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_27__),vue__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(720144),MomentRange=__webpack_require__(923542);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={mixins:[src_pages_report_mixins_NewDataFormatHelper__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */.Z],methods:{transformData:function(reportObj,data){var _step,_this=this,finalData=new Array(data[Object.keys(data)[0]].length),dataPoints=this.getAllDataPoints(reportObj.options),_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(dataPoints);try{var _loop=function(){var point=_step.value;if(point.type&&point.pointType&&point.type===_this.dataTypes().DATAPOINT&&point.pointType===_this.contextNames().REGRESSION){var regressionGroup=reportObj.options.dataPoints.find((function(dp){return dp.key===point.alias})),xDataPoint=null;if(regressionGroup&&(xDataPoint=regressionGroup.children.find((function(d){return"x"===d.axes}))),xDataPoint)for(var index2=0;index2<data[xDataPoint.alias].length;index2++){var d=data[xDataPoint.alias][index2],value=d3__WEBPACK_IMPORTED_MODULE_24__.format(",.4f")(point.evaluator(point.coefficients,d,_this.contextNames().LINEAR));if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(finalData[index2]))finalData[index2][point.alias]=value;else{var temp={};temp[point.alias]=value,finalData[index2]=temp}}}else for(var index=0;index<data[point.alias].length;index++){var _d=data[point.alias][index];if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(finalData[index]))finalData[index][point.alias]=_d;else{var _temp={};_temp[point.alias]=_d,finalData[index]=_temp}}};for(_iterator.s();!(_step=_iterator.n()).done;)_loop();
// console.log('TRANSFORMED DATA')
// console.log(finalData)
}catch(err){_iterator.e(err)}finally{_iterator.f()}return finalData},cleanArray:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];
// args is a list of arrays
for(var maxArraySize=args[0].length,removeIndex=new Set,finalArray=[],j=0;j<args.length;j++)for(var currentArray=args[j],i=0;i<maxArraySize;i++)"undefined"===typeof currentArray[i]||null===currentArray[i]?removeIndex.add(i):currentArray[i]=parseFloat(currentArray[i]);
// console.log('Remove indexes')
// console.log(removeIndex)
for(var k=0;k<args.length;k++){for(var _currentArray=args[k],newArray=[],index=0;index<_currentArray.length;index++)removeIndex.has(index)||newArray.push(_currentArray[index]);finalArray.push(newArray)}
// console.log('Arrays cleaned')
// console.log(finalArray)
return finalArray},sumOfSquares:function(data,yPoint,modelPoint){for(var sqauresOfDifference=[],xLength=data["x"].length,index=0;index<xLength;index++){var yData=data[yPoint.alias?yPoint.alias:yPoint.aliases.actual][index],y2Data=modelPoint.evaluator(modelPoint.coefficients,data["x"][index],this.contextNames().LINEAR);yData&&y2Data&&sqauresOfDifference.push(Math.pow(yData-y2Data,2))}var sumOfSquares=this.getSum(sqauresOfDifference);return sumOfSquares},computeMeanSquaredError:function(data,yPoint,modelPoint){var sumOfSquares=this.sumOfSquares(data,yPoint,modelPoint),average=sumOfSquares/data.x.length;return average},computeRsquared:function(data,yPoint,modelPoint){for(var meanSquaredError=this.sumOfSquares(data,yPoint,modelPoint),yAlias=yPoint.alias?yPoint.alias:yPoint.aliases.actual,yMean=this.getArithematicMean(data[yAlias]),SSyy=[],index=0;index<data[yAlias].length;index++)SSyy.push(Math.pow(data[yAlias][index]-yMean,2));var ssyy=this.getSum(SSyy);return 1-meanSquaredError/ssyy},getLinearFit:function(idp,dep){
// idp x
// dep y
// console.log('ARRAYS')
// console.log(idp)
// console.log(dep)
var linearCoefficient={},idpSum=this.getSum(idp),depSum=this.getSum(dep),idpMean=this.getArithematicMean(idp),depMean=this.getArithematicMean(dep),sum_of_products=this.getSumOfProducts(idp,dep),idp_variance=this.getVariance(idp);return linearCoefficient["a"]=(sum_of_products-idpSum*depSum/idp.length)/idp_variance,linearCoefficient["b"]=depMean-linearCoefficient.a*idpMean,linearCoefficient},getVariance:function(data){for(var squares=[],i=0,l=data.length;i<l;i++)squares[i]=Math.pow(data[i],2);var sum_of_squares=this.getSum(squares),mean=this.getSum(data),square_of_mean=Math.pow(mean,2),variance=sum_of_squares-square_of_mean/data.length;return variance},getSum:function(data){var _step2,sum=0,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var d=_step2.value;sum+=d}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return sum},getSumOfProducts:function(data1,data2){var total=0;try{if(data1.length===data2.length){for(var i=0;i<data1.length;i++)total+=data1[i]*data2[i];return total}throw new Error("Error!! Mean of products cannot be computed")}catch(e){throw new Error("Error!! Mean of products cannot be computed")}},getArithematicMean:function(data){var total=data.reduce((function(acc,current){return acc+current}));return total/data.length},sortDataByX:function(options,data){var finalData={},dataStructure={},xDataPoint=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.getAllDataPoints(options).find((function(dataPoint){return"x"===dataPoint.axes})),finalDataPoints=JSON.parse(JSON.stringify(src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.getAllDataPoints(options))),xDataPointIndex=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.getAllDataPoints(options).indexOf(xDataPoint),xCount={},count=0;if(xDataPoint){finalDataPoints.splice(xDataPointIndex,1);for(var i=0;i<data[xDataPoint.alias].length;i++){var d=data[xDataPoint.alias][i];if(options.timeValues&&(dataStructure[d]||(dataStructure[d]={},dataStructure[d].timeValues=[]),dataStructure[d].timeValues.push(options.timeValues[i])),d){xCount[d]?(xCount[d]++,count++):(xCount[d]=1,0!==count?count++:count=1);var _step3,_iterator3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(finalDataPoints);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var dataPoint=_step3.value;data[dataPoint.alias]&&(dataStructure[d]?(dataStructure[d][dataPoint.alias]||(dataStructure[d][dataPoint.alias]=[]),dataStructure[d][dataPoint.alias].push(data[dataPoint.alias][i])):(dataStructure[d]={},dataStructure[d][dataPoint.alias]=[],dataStructure[d][dataPoint.alias].push(data[dataPoint.alias][i])))}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}var orderedX=Object.keys(dataStructure).sort((function(a,b){return a-b})),timeValues=[];finalData[xDataPoint.alias]=[];var _step4,_iterator4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(orderedX);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){for(var oX=_step4.value,length=xCount[oX],j=0
// finalData[xDataPoint.alias].push(oX)
;j<length;j++)finalData[xDataPoint.alias].push(parseFloat(oX));if(options.timeValues){var tValues=dataStructure[oX].timeValues;timeValues.push.apply(timeValues,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(tValues))}
// finalData['timeValues'].push(... tValues)
for(var key in dataStructure[oX])if("timeValues"!==key){var _finalData$key,_finalData$key2,temp=dataStructure[oX][key].map((function(p){return p?parseFloat(p):null}));if(finalData[key])(_finalData$key=finalData[key]).push.apply(_finalData$key,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(temp));else finalData[key]=[],(_finalData$key2=finalData[key]).push.apply(_finalData$key2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(temp))}}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}return options.timeValues=timeValues,finalData}},computeRegressionValues:function(reportObj,options,data){var tabularData={},allDataPoints=[];reportObj.filterRegression&&(data=this.sortDataByX(options,data));var _step5,xList=new Set,_iterator5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(options.dataPoints);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var dataPoint=_step5.value;"group"===dataPoint.type?allDataPoints.push.apply(allDataPoints,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dataPoint.children)):allDataPoints.push(dataPoint)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}var _step6,_iterator6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(reportObj.regressionConfig);try{var _ret,_loop2=function(){var rConfig=_step6.value,xAxis=reportObj.report.dataPoints.filter((function(dP){return dP.yAxis.fieldId===rConfig.xAxis.readingId&&dP.metaData.parentIds[0]===rConfig.xAxis.parentId})),lr_coefficients=null,yAxis=reportObj.report.dataPoints.filter((function(dP){return dP.yAxis.fieldId===rConfig.yAxis.readingId&&dP.metaData.parentIds[0]===rConfig.yAxis.parentId})),actualDataPoint=allDataPoints.filter((function(dP){return dP.alias===xAxis[0].aliases.actual+"_"+yAxis[0].aliases.actual+"regr"}));if(0!==xAxis.length&&0!==yAxis.length)try{tabularData[xAxis[0].aliases.actual]=data[xAxis[0].aliases.actual],tabularData[yAxis[0].aliases.actual]=data[yAxis[0].aliases.actual],xList.add(xAxis[0].aliases.actual);var cleanedArrays=null;cleanedArrays=reportObj.filterRegression?src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.cleanArray(data[xAxis[0].aliases.actual],data[yAxis[0].aliases.actual],options.timeValues):src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.cleanArray(data[xAxis[0].aliases.actual],data[yAxis[0].aliases.actual]),data[xAxis[0].aliases.actual]=cleanedArrays[0],data[yAxis[0].aliases.actual]=cleanedArrays[1],reportObj.filterRegression&&(options.timeValues=cleanedArrays[2]),lr_coefficients=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.getLinearFit(data[xAxis[0].aliases.actual],data[yAxis[0].aliases.actual]);var modelData=data[xAxis[0].aliases.actual],regressionData=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.evaluateLinearData(lr_coefficients,modelData,"linear");data["x"]=data[xAxis[0].aliases.actual],data[xAxis[0].aliases.actual+"_"+yAxis[0].aliases.actual+"regr"]=regressionData,0!==actualDataPoint.length&&(actualDataPoint[0].evaluator=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z["evaluateLinearData"],actualDataPoint[0].coefficients=lr_coefficients,actualDataPoint[0]["MSR"]=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.computeMeanSquaredError(data,yAxis[0],actualDataPoint[0]),actualDataPoint[0]["rSquared"]=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.computeRsquared(data,yAxis[0],actualDataPoint[0]),actualDataPoint[0].label=src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.getEquationString(lr_coefficients,actualDataPoint[0]["rSquared"],src_pages_report_mixins_FNewAnalyticsModelHelper__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */.Z.contextNames().LINEAR))}catch(e){return{v:void 0}}};for(_iterator6.s();!(_step6=_iterator6.n()).done;)if(_ret=_loop2(),_ret)return _ret.v}catch(err){_iterator6.e(err)}finally{_iterator6.f()}0!==Object.keys(tabularData).length&&(reportObj["tabularData"]=tabularData);var _step7,_iterator7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(xList);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var alias=_step7.value;delete data[alias]}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}return options.dataPoints=this.sortBasedOnRSqr(options.dataPoints),data},getMomentFormatter:function(operationOn){switch(operationOn){case"hour":return"kk";case"day":return"ddd";case"month":return"MM";case"week":return"ww";case"quarter":return"MM";case"year":return"YYYY"}},getxAliasFormatter:function(period,operationOn,xformat){switch(period){case"hourly":return"hh a";case"daily":return"week"===operationOn?"ddd":"month"===operationOn||"year"===operationOn||"quarter"===operationOn?"weeks"===xformat?"ddd":"DD":"weeks"===xformat?"ddd":"days"===xformat?"DD":"ddd";case"monthly":return"MMM YYYY";case"quarterly":return"[Q]Q YYYY";case"yearly":return"YYYY"}},DateFormatter:function(period){switch(period){case"hourly":return"MMM DD YYYY, hh a";case"daily":return"MMM DD YYYY";case"weekly":return"[W]ww gggg";case"monthly":return"MMM YYYY";case"quarterly":return"[Q]Q YYYY";case"yearly":return"YYYY"}},getyAliasFormatter:function(period,operationOn,xformat){switch(period){case"hourly":return"MMM DD";case"daily":return"week"===operationOn?"[W]ww":"month"===operationOn||"quarter"===operationOn?"weeks"===xformat?"[W]ww":"MMM":"year"===operationOn?"weeks"===xformat?"[W]ww gggg":"MMM":"weeks"===xformat?"[W]ww gggg":"days"===xformat?"MMM":"MMM DD"}},getxAxisData:function(xformat,operationOn){switch(xformat){case"hours":return["12 am","01 am","02 am","03 am","04 am","05 am","06 am","07 am","08 am","09 am","10 am","11 am","12 pm","01 pm","02 pm","03 pm","04 pm","05 pm","06 pm","07 pm","08 pm","09 pm","10 pm","11 pm"];case"days":return"week"===operationOn?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"];case"weeks":return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},getyAxisData:function(period,operationOn,range,xformat,offset){var currentTimezone=vue__WEBPACK_IMPORTED_MODULE_28__["default"].prototype.$timezone;switch(period){case"hourly":if("month"===operationOn||"year"===operationOn||"quarter"===operationOn||"day"===operationOn&&offset>=32){var domain=[];return domain.push(Array.from(range.by("days")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).format("MMM DD")}))),domain.push(Array.from(range.by("months")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).startOf("month").format("MMM")}))),domain}var _domain=Array.from(range.by("days")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).format("MMM DD")}));return _domain;case"daily":if("week"===operationOn){var _domain2=Array.from(range.by("weeks")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).startOf("week").format("[W]ww")}));return _domain2}if("month"===operationOn||"quarter"===operationOn){if("weeks"===xformat){var _domain3=[];return _domain3.push(Array.from(range.by("weeks")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).startOf("week").format("[W]ww")}))),_domain3.push(Array.from(range.by("months")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).startOf("month").format("MMM")}))),_domain3}var _domain4=Array.from(range.by("months")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).startOf("month").format("MMM")}));return _domain4}if("year"===operationOn){if("weeks"===xformat){var _domain5=[];return _domain5.push(Array.from(range.by("weeks")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).format("[W]ww gggg")}))),_domain5.push(Array.from(range.by("months")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).startOf("month").format("MMM")}))),_domain5}var _domain6=Array.from(range.by("months")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).startOf("month").format("MMM")}));return _domain6}var _domain7=[];return"weeks"===xformat?(_domain7=Array.from(range.by("days")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).format("[W]ww gggg")})),_domain7=_domain7.filter((function(month,index){return _domain7.indexOf(month)===index}))):"days"===xformat?(_domain7=Array.from(range.by("days")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).format("MMM")})),_domain7=_domain7.filter((function(month,index){return _domain7.indexOf(month)===index}))):_domain7=Array.from(range.by("days")).map((function(r){return moment__WEBPACK_IMPORTED_MODULE_27___default()(r.valueOf()).tz(currentTimezone).format("MMM DD")})),_domain7}},transformDataForHeatMap:function(reportObj,data,xAlias,yAlias,isContinous,xformat){var transformedData=[],dataWithAxis=[],currentTimezone=vue__WEBPACK_IMPORTED_MODULE_28__["default"].prototype.$timezone,momentRange=MomentRange.extendMoment(moment__WEBPACK_IMPORTED_MODULE_27___default()),range=momentRange.range(new Date(reportObj.dateRange.time[0]),new Date(reportObj.dateRange.time[1]));if(data&&0!=data.length){if(isContinous&&reportObj.dateRange&&reportObj.dateRange.period){var yFormatter=this.getyAliasFormatter(reportObj.dateRange.period,reportObj.dateRange.operationOn,xformat),xFormatter=this.getxAliasFormatter(reportObj.dateRange.period,reportObj.dateRange.operationOn,xformat),dateFormat=this.getDateFormat(reportObj.dateRange.period);if(dateFormat){var _step8,_iterator8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(data);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var record=_step8.value;if(record[xAlias]){var groupedData={},formattedDate=moment__WEBPACK_IMPORTED_MODULE_27___default()(record[xAlias]).tz(currentTimezone).format(yFormatter);groupedData["Y"]=formattedDate,groupedData[xAlias]=moment__WEBPACK_IMPORTED_MODULE_27___default()(record[xAlias]).tz(currentTimezone).format(xFormatter),groupedData["value"]=record[yAlias]?parseFloat(record[yAlias]):null,groupedData["xTitle"]=reportObj.options.axis.x.label.text,groupedData["yTitle"]=reportObj.options.dataPoints[0].label,groupedData["originalValue"]=record[xAlias],groupedData["violated_value"]=record["violated_value"]?record["violated_value"]:null,transformedData.push(groupedData)}}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}}var xAxisData=this.getxAxisData(xformat,reportObj.dateRange.operationOn),yAxisData=this.getyAxisData(reportObj.dateRange.period,reportObj.dateRange.operationOn,range,xformat,reportObj.dateRange.offset);dataWithAxis.push(transformedData,xAxisData,yAxisData)}return dataWithAxis}},transformDataforTreeMap:function(reportObj,resultObject,data,xAlias,yAlias,colorAlias,sizePoint,colorPoint,mode){var transformedData=[],currentTimezone=vue__WEBPACK_IMPORTED_MODULE_28__["default"].prototype.$timezone;if(data&&0!=data.length){var _step9,_iterator9=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(data);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var record=_step9.value;if(record[xAlias]){var temp={};temp["mode"]=mode,temp["name"]=4===resultObject.mode?moment__WEBPACK_IMPORTED_MODULE_27___default()(record[xAlias]).tz(currentTimezone).format(this.DateFormatter(reportObj.dateRange.period)):record[xAlias],temp["sizePoint"]=sizePoint.name,temp["colorPoint"]=sizePoint.name!==colorPoint.name?colorPoint.name:null,temp["colorUnit"]=colorPoint.yAxis.unitStr?" "+colorPoint.yAxis.unitStr:"",temp["value"]=record[yAlias]?this.DecimalRoundOff(parseFloat(record[yAlias])):null,temp["colorValue"]=record[colorAlias]?this.DecimalRoundOff(parseFloat(record[colorAlias])):null,temp["unit"]=resultObject.report.dataPoints[0].yAxis.unitStr?" "+resultObject.report.dataPoints[0].yAxis.unitStr:"",transformedData.push(temp)}}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}}return transformedData.length>1&&transformedData.sort((function(a,b){return b["value"]-a["value"]})),{name:resultObject.report.dataPoints[0].name,children:transformedData,unit:resultObject.report.dataPoints[0].yAxis.unitStr}},getWorkpplaceTreeMapData:function(_ref){var _this2=this,resultObject=_ref.resultObject,data=_ref.data,xAlias=_ref.xAlias,yAlias=_ref.yAlias,colorAlias=_ref.colorAlias,sizePoint=_ref.sizePoint,colorPoint=_ref.colorPoint,colorMap=(_ref.mode,_ref.colorMap),lookupMap=this.getLookupMap(resultObject),transformedData=[];return data&&0!=data.length&&data.forEach((function(record,index){var d=_this2.getTreemapData({record:record,sizePoint:sizePoint,colorPoint:colorPoint,colorAlias:colorAlias,lookupMap:lookupMap,yAlias:yAlias,xAlias:xAlias,colorMap:colorMap});transformedData.push(d)})),{name:resultObject.report.dataPoints[0].name,children:transformedData,unit:resultObject.report.dataPoints[0].yAxis.unitStr}},transformWorkorderDataforTreeMap:function(reportObj,resultObject,data,xAlias,yAlias,colorAlias,sizePoint,colorPoint,mode){var _this3=this,lookupMap=this.getLookupMap(resultObject),transformedData=[];return data&&0!=data.length&&data.forEach((function(record,index){if(reportObj.report&&4170===reportObj.report.id||4158===reportObj.report.id){
// to be removed
if(record[xAlias]){var temp={mode:"Building"};temp["name"]=reportObj.data&&reportObj.data.x?reportObj.data.x[index]:record[xAlias],temp["sizePoint"]=sizePoint.name,temp["colorPoint"]=sizePoint.name!==colorPoint.name?colorPoint.name:null,temp["value"]=record[yAlias],temp["colorValue"]=record[colorAlias],temp["colorUnit"]="kWh/ft",temp["unit"]=resultObject.report.dataPoints[0].yAxis.unitStr,transformedData.push(temp)}}else if(_this3.isContainsArray(record)){var d=_this3.getTreemapData({record:record,sizePoint:sizePoint,colorPoint:colorPoint,colorAlias:colorAlias,lookupMap:lookupMap,yAlias:yAlias,xAlias:xAlias});transformedData.push(d)}else if(record[xAlias]){var _temp2={mode:"Building"};_temp2["name"]=record[xAlias],_temp2["sizePoint"]=sizePoint.name,_temp2["colorPoint"]=sizePoint.name!==colorPoint.name?colorPoint.name:null,_temp2["value"]=record[yAlias],_temp2["colorValue"]=record[colorAlias],_temp2["unit"]=resultObject.report.dataPoints[0].yAxis.unitStr,transformedData.push(_temp2)}})),{name:resultObject.report.dataPoints[0].name,children:transformedData,unit:resultObject.report.dataPoints[0].yAxis.unitStr}},getLookupMap:function(resultObject){var _resultObject$report,result={};if(null!==resultObject&&void 0!==resultObject&&null!==(_resultObject$report=resultObject.report)&&void 0!==_resultObject$report&&_resultObject$report.dataPoints&&resultObject.report.dataPoints.length){var _dataPoint$xAxis,dataPoint=resultObject.report.dataPoints[0];null!==dataPoint&&void 0!==dataPoint&&null!==(_dataPoint$xAxis=dataPoint.xAxis)&&void 0!==_dataPoint$xAxis&&_dataPoint$xAxis.lookupMap&&(result["X"]=dataPoint.xAxis.lookupMap),null!==dataPoint&&void 0!==dataPoint&&dataPoint.groupByFields&&dataPoint.groupByFields.length&&dataPoint.groupByFields.forEach((function(rt){rt.lookupMap&&(result[rt.alias]=rt.lookupMap)}))}return result},getTreemapData:function(_ref2){var _this4=this,record=(_ref2.colorPoint,_ref2.record),sizePoint=_ref2.sizePoint,colorAlias=_ref2.colorAlias,lookupMap=_ref2.lookupMap,yAlias=_ref2.yAlias,xAlias=_ref2.xAlias,colorMap=_ref2.colorMap,temp={};if(Array.isArray(record)){var dataArray=[];return record.forEach((function(rt){var data=_this4.getTreemapData((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},{record:rt}),{},{sizePoint:sizePoint,colorAlias:colorAlias,lookupMap:lookupMap,yAlias:yAlias,xAlias:xAlias,colorMap:colorMap}));dataArray.push(data)})),dataArray}return Object.keys(record).forEach((function(key){if(Array.isArray(record[key])){var value=record[key];temp["mode"]="Status",temp["name"]=_this4.getNameFromLookup(lookupMap,record,xAlias),temp["sizePoint"]=sizePoint.name,temp["children"]=_this4.getTreemapData((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},{record:value}),{},{sizePoint:sizePoint},{colorAlias:key}),{},{lookupMap:lookupMap,yAlias:yAlias,xAlias:xAlias,colorMap:colorMap}))}else key===xAlias?(temp["mode"]="Status",temp["name"]=_this4.getNameFromLookup(lookupMap,record,key),temp["key"]=record[key]||-1,temp["sizePoint"]=sizePoint.name,
// temp['value'] = 0
temp["color"]="transparent"):(temp["name"]=_this4.getNameFromLookup(lookupMap,record,key),temp["sizePoint"]=sizePoint.name,temp["mode"]="Status",temp["key"]=record[key]||-1,temp["value"]=record[yAlias],temp["color"]=_this4.getColorFromMap({colorAlias:colorAlias,colorMap:colorMap,xAlias:xAlias,yAlias:yAlias,record:record}))})),temp},getColorFromMap:function(_ref3){var colorAlias=_ref3.colorAlias,colorMap=_ref3.colorMap,xAlias=_ref3.xAlias,yAlias=_ref3.yAlias,record=_ref3.record;if(![xAlias,yAlias].includes(colorAlias)){var value=record[colorAlias];if(value)return""===value?"#d9d9d9":colorMap[value]}return null},getNameFromLookup:function(lookupMap,record,key){var value=record[key],lookupMapValues=lookupMap[key];return value&&lookupMapValues&&lookupMapValues[value]?lookupMapValues[value]:"Empty"},isContainsArray:function(data){var isArray=!1;return Object.values(data).forEach((function(value){Array.isArray(value)&&(isArray=!0)})),isArray},transformWorkorderDataForHeatMap:function(resultObject,reportObject,label,isContinous,xformat){vue__WEBPACK_IMPORTED_MODULE_28__["default"].prototype.$timezone;var momentRange=MomentRange.extendMoment(moment__WEBPACK_IMPORTED_MODULE_27___default());momentRange.range(new Date(reportObj.dateRange.time[0]),new Date(reportObj.dateRange.time[1]))},fillRemainingXValues:function(xData,transformedData,alias){var _step10,finalData=[],dateFormat=this.getDateFormat(this.reportObject.dateRange.period),_iterator10=(this.reportObject.dateRange&&this.reportObject.dateRange.period,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(xData));try{var _loop3=function(){var rec=_step10.value,existingRecord=transformedData.find((function(x){return x["X"]===rec}));if(existingRecord)finalData.push(existingRecord);else{var temp={};temp["X"]=moment__WEBPACK_IMPORTED_MODULE_27___default()(rec,dateFormat.format).format("MM-DD-YYYY"),temp[alias]=rec,temp["value"]="0",finalData.push(temp)}};for(_iterator10.s();!(_step10=_iterator10.n()).done;)_loop3()}catch(err){_iterator10.e(err)}finally{_iterator10.f()}return finalData},getheatMapData:function(xData,yData,transformedData,reportObj){var _step11,finalData=[],_iterator11=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(xData);try{var _loop4=function(){var _step12,x=_step11.value,_iterator12=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(yData);try{var _loop5=function(){var y=_step12.value,existingRecord=transformedData.find((function(r){return r["X"]===x&&r["Y"]===y}));if(existingRecord)finalData.push(existingRecord);else{var temp={};temp["Y"]=y,temp["X"]=x,temp["value"]=null,temp["xTitle"]=reportObj.options.axis.x.label.text,temp["yTitle"]=reportObj.options.axis.y.label.text,temp["originalValue"]=moment__WEBPACK_IMPORTED_MODULE_27___default()(y).tz(vue__WEBPACK_IMPORTED_MODULE_28__["default"].prototype.$timezone).format("x"),finalData.push(temp)}};for(_iterator12.s();!(_step12=_iterator12.n()).done;)_loop5()}catch(err){_iterator12.e(err)}finally{_iterator12.f()}};for(_iterator11.s();!(_step11=_iterator11.n()).done;)_loop4()}catch(err){_iterator11.e(err)}finally{_iterator11.f()}return finalData},getRoundedNumber:function(number,round){number=parseFloat(number);var length=Math.log(number)*Math.LOG10E+1|0,pow=Math.pow(10,length-1);switch(round){case"ceil":var max=Math.ceil(number/pow)*pow;return max-Math.floor(max)!==0?max.toFixed(2):max;case"floor":var _min=Math.floor(number/pow)*pow;return _min-Math.floor(_min)!==0?_min.toFixed(2):_min;default:var common_num=Math.ceil(number/pow)*pow;return common_num-Math.floor(common_num)!==0?common_num.toFixed(2):common_num}},sampletreemapdata:function(){return{name:"flare",children:[{name:"analytics",children:[{name:"cluster",children:[{name:"AgglomerativeCluster",value:3938,colorValue:3938},{name:"CommunityStructure",value:3812,colorValue:3812},{name:"HierarchicalCluster",value:6714,colorValue:6714},{name:"MergeEdge",value:743,colorValue:743}]},{name:"graph",children:[{name:"BetweennessCentrality",value:3534,colorValue:3534},{name:"LinkDistance",value:5731,colorValue:5731},{name:"MaxFlowMinCut",value:7840,colorValue:7840},{name:"ShortestPaths",value:5914,colorValue:5914},{name:"SpanningTree",value:3416,colorValue:3416}]},{name:"optimization",children:[{name:"AspectRatioBanker",value:7074,colorValue:7074}]}]},{name:"animate",children:[{name:"Easing",value:17010},{name:"FunctionSequence",value:5842},{name:"interpolate",children:[{name:"ArrayInterpolator",value:1983},{name:"ColorInterpolator",value:2047},{name:"DateInterpolator",value:1375},{name:"Interpolator",value:8746},{name:"MatrixInterpolator",value:2202},{name:"NumberInterpolator",value:1382},{name:"ObjectInterpolator",value:1629},{name:"PointInterpolator",value:1675},{name:"RectangleInterpolator",value:2042}]},{name:"ISchedulable",value:1041},{name:"Parallel",value:5176},{name:"Pause",value:449},{name:"Scheduler",value:5593},{name:"Sequence",value:5534},{name:"Transition",value:9201},{name:"Transitioner",value:19975},{name:"TransitionEvent",value:1116},{name:"Tween",value:6006}]},{name:"data",children:[{name:"converters",children:[{name:"Converters",value:721},{name:"DelimitedTextConverter",value:4294},{name:"GraphMLConverter",value:9800},{name:"IDataConverter",value:1314},{name:"JSONConverter",value:2220}]},{name:"DataField",value:1759},{name:"DataSchema",value:2165},{name:"DataSet",value:586},{name:"DataSource",value:3331},{name:"DataTable",value:772},{name:"DataUtil",value:3322}]},{name:"display",children:[{name:"DirtySprite",value:8833},{name:"LineSprite",value:1732},{name:"RectSprite",value:3623},{name:"TextSprite",value:10066}]},{name:"flex",children:[{name:"FlareVis",value:4116}]},{name:"physics",children:[{name:"DragForce",value:1082},{name:"GravityForce",value:1336},{name:"IForce",value:319},{name:"NBodyForce",value:10498},{name:"Particle",value:2822},{name:"Simulation",value:9983},{name:"Spring",value:2213},{name:"SpringForce",value:1681}]},{name:"query",children:[{name:"AggregateExpression",value:1616},{name:"And",value:1027},{name:"Arithmetic",value:3891},{name:"Average",value:891},{name:"BinaryExpression",value:2893},{name:"Comparison",value:5103},{name:"CompositeExpression",value:3677},{name:"Count",value:781},{name:"DateUtil",value:4141},{name:"Distinct",value:933},{name:"Expression",value:5130},{name:"ExpressionIterator",value:3617},{name:"Fn",value:3240},{name:"If",value:2732},{name:"IsA",value:2039},{name:"Literal",value:1214},{name:"Match",value:3748},{name:"Maximum",value:843},{name:"methods",children:[{name:"add",value:593},{name:"and",value:330},{name:"average",value:287},{name:"count",value:277},{name:"distinct",value:292},{name:"div",value:595},{name:"eq",value:594},{name:"fn",value:460},{name:"gt",value:603},{name:"gte",value:625},{name:"iff",value:748},{name:"isa",value:461},{name:"lt",value:597},{name:"lte",value:619},{name:"max",value:283},{name:"min",value:283},{name:"mod",value:591},{name:"mul",value:603},{name:"neq",value:599},{name:"not",value:386},{name:"or",value:323},{name:"orderby",value:307},{name:"range",value:772},{name:"select",value:296},{name:"stddev",value:363},{name:"sub",value:600},{name:"sum",value:280},{name:"update",value:307},{name:"variance",value:335},{name:"where",value:299},{name:"xor",value:354},{name:"_",value:264}]},{name:"Minimum",value:843},{name:"Not",value:1554},{name:"Or",value:970},{name:"Query",value:13896},{name:"Range",value:1594},{name:"StringUtil",value:4130},{name:"Sum",value:791},{name:"Variable",value:1124},{name:"Variance",value:1876},{name:"Xor",value:1101}]},{name:"scale",children:[{name:"IScaleMap",value:2105},{name:"LinearScale",value:1316},{name:"LogScale",value:3151},{name:"OrdinalScale",value:3770},{name:"QuantileScale",value:2435},{name:"QuantitativeScale",value:4839},{name:"RootScale",value:1756},{name:"Scale",value:4268},{name:"ScaleType",value:1821},{name:"TimeScale",value:5833}]},{name:"util",children:[{name:"Arrays",value:8258},{name:"Colors",value:10001},{name:"Dates",value:8217},{name:"Displays",value:12555},{name:"Filter",value:2324},{name:"Geometry",value:10993},{name:"heap",children:[{name:"FibonacciHeap",value:9354},{name:"HeapNode",value:1233}]},{name:"IEvaluable",value:335},{name:"IPredicate",value:383},{name:"IValueProxy",value:874},{name:"math",children:[{name:"DenseMatrix",value:3165},{name:"IMatrix",value:2815},{name:"SparseMatrix",value:3366}]},{name:"Maths",value:17705},{name:"Orientation",value:1486},{name:"palette",children:[{name:"ColorPalette",value:6367},{name:"Palette",value:1229},{name:"ShapePalette",value:2059},{name:"SizePalette",value:2291}]},{name:"Property",value:5559},{name:"Shapes",value:19118},{name:"Sort",value:6887},{name:"Stats",value:6557},{name:"Strings",value:22026}]},{name:"vis",children:[{name:"axis",children:[{name:"Axes",value:1302},{name:"Axis",value:24593},{name:"AxisGridLine",value:652},{name:"AxisLabel",value:636},{name:"CartesianAxes",value:6703}]},{name:"controls",children:[{name:"AnchorControl",value:2138},{name:"ClickControl",value:3824},{name:"Control",value:1353},{name:"ControlList",value:4665},{name:"DragControl",value:2649},{name:"ExpandControl",value:2832},{name:"HoverControl",value:4896},{name:"IControl",value:763},{name:"PanZoomControl",value:5222},{name:"SelectionControl",value:7862},{name:"TooltipControl",value:8435}]},{name:"data",children:[{name:"Data",value:20544},{name:"DataList",value:19788},{name:"DataSprite",value:10349},{name:"EdgeSprite",value:3301},{name:"NodeSprite",value:19382},{name:"render",children:[{name:"ArrowType",value:698},{name:"EdgeRenderer",value:5569},{name:"IRenderer",value:353},{name:"ShapeRenderer",value:2247}]},{name:"ScaleBinding",value:11275},{name:"Tree",value:7147},{name:"TreeBuilder",value:9930}]},{name:"events",children:[{name:"DataEvent",value:2313},{name:"SelectionEvent",value:1880},{name:"TooltipEvent",value:1701},{name:"VisualizationEvent",value:1117}]},{name:"legend",children:[{name:"Legend",value:20859},{name:"LegendItem",value:4614},{name:"LegendRange",value:10530}]},{name:"operator",children:[{name:"distortion",children:[{name:"BifocalDistortion",value:4461},{name:"Distortion",value:6314},{name:"FisheyeDistortion",value:3444}]},{name:"encoder",children:[{name:"ColorEncoder",value:3179},{name:"Encoder",value:4060},{name:"PropertyEncoder",value:4138},{name:"ShapeEncoder",value:1690},{name:"SizeEncoder",value:1830}]},{name:"filter",children:[{name:"FisheyeTreeFilter",value:5219},{name:"GraphDistanceFilter",value:3165},{name:"VisibilityFilter",value:3509}]},{name:"IOperator",value:1286},{name:"label",children:[{name:"Labeler",value:9956},{name:"RadialLabeler",value:3899},{name:"StackedAreaLabeler",value:3202}]},{name:"layout",children:[{name:"AxisLayout",value:6725},{name:"BundledEdgeRouter",value:3727},{name:"CircleLayout",value:9317},{name:"CirclePackingLayout",value:12003},{name:"DendrogramLayout",value:4853},{name:"ForceDirectedLayout",value:8411},{name:"IcicleTreeLayout",value:4864},{name:"IndentedTreeLayout",value:3174},{name:"Layout",value:7881},{name:"NodeLinkTreeLayout",value:12870},{name:"PieLayout",value:2728},{name:"RadialTreeLayout",value:12348},{name:"RandomLayout",value:870},{name:"StackedAreaLayout",value:9121},{name:"TreeMapLayout",value:9191}]},{name:"Operator",value:2490},{name:"OperatorList",value:5248},{name:"OperatorSequence",value:4190},{name:"OperatorSwitch",value:2581},{name:"SortOperator",value:2023}]},{name:"Visualization",value:16540}]}]}},getAllTreeMapDataValues:function(data,valueArray){var _this5=this;if(data.value&&valueArray.push(parseFloat(data.value)),data.children)return data.children.forEach((function(child){return _this5.getAllTreeMapDataValues(child,valueArray)})),valueArray},DecimalRoundOff:function(number){return parseFloat(parseInt(100*number)/100)},formatZeroesInData:function(data){for(var formattedData={},_i=0,_Object$keys=Object.keys(data);_i<_Object$keys.length;_i++){var column=_Object$keys[_i];formattedData[column]="x"!==column?data[column].map((function(val){return 0===val?null:val})):data[column]}return formattedData}}}},
/***/425157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(566347),dlv__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(689730),__webpack_require__(976801),__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(670560),__webpack_require__(843843),__webpack_require__(538077),__webpack_require__(226905)),dlv__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_9__),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(990260),src_components_mixins_NewDateHelper__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(105534);
/* harmony import */
// Requires ModularAnalyticsMixin and NewDataformat helper
/* harmony default export */__webpack_exports__.Z={data:function(){return{drilldownParams:null,drilldownDatePickerObj:!1,
//date picker range used to generate X axis range(domain),so generate for each step of date drilldown
// drilldownParams: {
//   criteria: [],
//   xField: {},
//   xAggr: null,
// },
drilldownStepCount:0,drilldownactionslist:[]}},methods:{resetDrillDown:function(){this.drilldownDatePickerObj=null,this.drilldownStepCount=0,this.drilldownParams=null,this.drilldownactionslist=[]},drillFromCrumb:function(crumbIndex){if(-1==crumbIndex)this.resetDrillDown();else{this.drilldownStepCount=crumbIndex+1,//crumb index starts from  zero, drilldown steps start from 1
this.drilldownParams.drilldownCriteria=this.drilldownParams.drilldownCriteria.slice(0,this.drilldownStepCount);var drillStepToRevert=this.drilldownPath[crumbIndex];this.drilldownParams.xAggr=drillStepToRevert.xAggr,this.drilldownParams.xField=drillStepToRevert.xField}},drillReport:function(clickData,isShowListAtDrillEnd,resultObj,reportObj){var _this=this;if(this.drilldownPath&&this.drilldownStepCount<this.drilldownPath.length){this.drilldownParams||(
//first drilldown step
this.drilldownParams={drilldownCriteria:[],xField:null,xAggr:null,seriesAlias:null});var nextDrillStep=this.drilldownPath[this.drilldownStepCount],xAxis=resultObj.report.dataPoints[0].xAxis,dimensionXAggr=resultObj.report.xAggr,clickedXVal=null,dimensionValueLabel=null,formulaFieldName=null,formulaModuleName=null,formulaFieldOperator=null,drilldownhistory={};
//generate criteria and breadcrumb label based on xAxis type
if(-1!=xAxis.fieldId||["sysCreatedBy","sysModifiedBy","sysCreatedTime","sysModifiedTime","siteId"].includes(xAxis.fieldName))if(5===xAxis.dataType||6==xAxis.dataType){
//DATE FIELD DRILL DOWN
// neet to convert X date point like Nov 4 to "startTime,endTime" format
var clickedDateValue=reportObj.dateRange.range.domain[clickData.index],dateRangePeriod=reportObj.dateRange.period,xAxisDateFormatConfig=this.getDateFormat(dateRangePeriod),xMilliseconds=this.getMillis(clickedDateValue,xAxisDateFormatConfig.format,dateRangePeriod);clickedXVal=xMilliseconds[0]+","+xMilliseconds[1],dimensionValueLabel=this.convertToTooltipFormat(xMilliseconds[0],dateRangePeriod),this.drilldownDatePickerObj=src_components_mixins_NewDateHelper__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.Z.getDatePickerObjectFromDateAggregation(dimensionXAggr,clickedXVal)}else if(4===xAxis.dataType){clickedXVal=resultObj.reportData.data[clickData.index].X,dimensionValueLabel=this.getLabelFromReportField(clickedXVal,xAxis),1===clickedXVal?clickedXVal=!0:0===clickedXVal&&(clickedXVal=!1);var _drilldowndata={operatorId:36};_drilldowndata.value=[[clickedXVal].toString()],drilldownhistory[xAxis.fieldName]=_drilldowndata,this.drilldownactionslist.push(drilldownhistory)}else if(14===xAxis.dataType){clickedXVal=resultObj.reportData.data[clickData.index].X,dimensionValueLabel=this.getLabelFromReportField(clickedXVal,xAxis);var _drilldowndata2={operatorId:90};_drilldowndata2.value=[[clickedXVal].toString()],drilldownhistory[xAxis.fieldName]=_drilldowndata2,this.drilldownactionslist.push(drilldownhistory)}else{clickedXVal=resultObj.reportData.data[clickData.index].X,dimensionValueLabel=this.getLabelFromReportField(clickedXVal,xAxis);var _drilldowndata3={};_drilldowndata3.operatorId="Resources"==xAxis.field.tableName||"resource"==xAxis.fieldName?38:36,_drilldowndata3.value=[[clickedXVal].toString()],drilldownhistory[xAxis.fieldName]=_drilldowndata3,this.drilldownactionslist.push(drilldownhistory)}else{
//formula field
var forumalaName=resultObj.reportData.data[clickData.index].X;dimensionValueLabel=forumalaName;var condition=resultObj.report.dataPoints[0].xAxis.field.conditions[forumalaName];formulaFieldName=condition.fieldName,formulaModuleName=xAxis.field.module.name,formulaFieldOperator=condition.operatorId,clickedXVal=null!==condition&&void 0!==condition&&condition.value?condition.value.toString():"";var values=[[clickedXVal].toString()],drilldowndata={},val=values[0].split(",");for(var id in drilldowndata.value=[],drilldowndata.operatorId=condition.operatorId,val)drilldowndata.value.push(val[id]);drilldownhistory[condition.fieldName]=drilldowndata,this.drilldownactionslist.push(drilldownhistory)}var dimensionValues=[clickedXVal].toString(),breadcrumbLabel=dimensionValueLabel,groupByValueLabel=null,xFieldId=xAxis.fieldId,xModuleId=xAxis.moduleId,groupByValues=null,groupByFieldId=null,groupByModuleId=null,groupByXAgg=null,groupByFieldCol=null;this.drilldownParams.xField=nextDrillStep.xField,this.drilldownParams.xAggr=nextDrillStep.xAggr;var isGroupByPresent=this.isGroupByFieldPresent(resultObj);if(["pie","donut","gauge"].includes(reportObj.report.chartState.type))this.drilldownParams.seriesAlias=resultObj.report.dataPoints[0].aliases.actual;else if(isGroupByPresent){var _groupByMeta$group2,groupByMeta=this.getGroupFromName(clickData.id,resultObj),groupByReportField=groupByMeta.group,_groupByMeta$group=groupByMeta.group,fieldId=_groupByMeta$group.fieldId,moduleId=_groupByMeta$group.moduleId,aggr=_groupByMeta$group.aggr,value=groupByMeta.value;if(groupByFieldId=fieldId,groupByFieldCol=null!==groupByMeta&&void 0!==groupByMeta&&null!==(_groupByMeta$group2=groupByMeta.group)&&void 0!==_groupByMeta$group2&&_groupByMeta$group2.fieldName?groupByMeta.group.fieldName:"",groupByModuleId=moduleId,groupByXAgg=-1==aggr?0:aggr,groupByValues=[value].toString(),groupByValueLabel=this.getLabelFromReportField(value,groupByReportField),-1!=fieldId||!groupByFieldCol.includes("overdue")&&"openvsclose"!=groupByFieldCol||"group_total"===groupByValues){var _drilldowndata5={},_drill={},groubyData=reportObj.report.dataPoints[0].groupByFields[0];if("LOOKUP"===groubyData.field.dataTypeEnum||"NUMBER"===groubyData.field.dataTypeEnum)_drilldowndata5.value=[groupByValues];else if("SYSTEM_ENUM"===groubyData.field.dataTypeEnum)for(var _val2 in groubyData.enumMap)groubyData.enumMap[_val2]===groupByValues&&(_drilldowndata5.value=[_val2]);else if("BOOLEAN"===groubyData.field.dataTypeEnum||"ENUM"===groubyData.field.dataTypeEnum||"MULTI_ENUM"===groubyData.field.dataTypeEnum)for(var _val3 in groubyData.enumMap)groubyData.enumMap[_val3]===groupByValueLabel&&(_drilldowndata5.value="BOOLEAN"===groubyData.field.dataTypeEnum?[groupByValueLabel.toLowerCase()]:[_val3]);else _drilldowndata5.value=[groupByValues];_drilldowndata5.operatorId=36,_drill[groupByFieldCol]=_drilldowndata5,this.drilldownactionslist.push(_drill),breadcrumbLabel+=" & "+groupByValueLabel}
//only one series when GROUP BY  present ,so always first series only clicked
else{var drill={},drilldownObj=resultObj.report.dataPoints[0].groupByFields[0].field.conditions[clickData.id],_drilldowndata4={},_val=drilldownObj.value.split(",");for(var _id in _drilldowndata4.value=[],_drilldowndata4.operatorId=drilldownObj.operatorId,_val)_drilldowndata4.value.push(_val[_id]);drill[drilldownObj.fieldName]=_drilldowndata4,this.drilldownactionslist.push(drill),breadcrumbLabel+=" & "+groupByValues}this.drilldownParams.seriesAlias=resultObj.report.dataPoints[0].aliases.actual}else
//NO group by , can have multiple series(multiple metric),drill down and show only clicked series in corresponding(child) report
this.drilldownParams.seriesAlias=clickData.id;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(reportObj)&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(reportObj.report)){var isPresent=reportObj.report.dataPoints.filter((function(dp){return dp.aliases.actual==_this.drilldownParams.seriesAlias}));if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(isPresent))return}var criteria={xField:{field_id:xFieldId,module_id:xModuleId,xAggr:dimensionXAggr},breadcrumbLabel:breadcrumbLabel,dimensionValues:dimensionValues,formulaFieldOperator:formulaFieldOperator,
//formula type fields
formulaFieldName:formulaFieldName,formulaModuleName:formulaModuleName};return isGroupByPresent&&!["pie","donut","gauge"].includes(reportObj.report.chartState.type)&&(criteria.groupBy={field_id:groupByFieldId,module_id:groupByModuleId,xAggr:groupByXAgg,colName:groupByFieldCol},criteria.groupByValues=groupByValues),this.drilldownParams.drilldownCriteria.push(criteria),this.drilldownStepCount++,!0}return!1},
//ReportXAxis and ReportGroupBy->Extend ReportField
getLabelFromReportField:function(value,reportField){return"LOOKUP"==reportField.dataTypeEnum?reportField.lookupMap[value]:"ENUM"==reportField.dataTypeEnum||"BOOLEAN"==reportField.dataTypeEnum||"MULTI_ENUM"==reportField.dataTypeEnum?reportField.enumMap[value]:value},isGroupByFieldPresent:function(resultObj){return!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(resultObj.report.dataPoints[0].groupByFields)},getGroupFromName:function(groupName,resultObject){if(resultObject.report.dataPoints[0].hasOwnProperty("groupByFields")){var _step,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(resultObject.report.dataPoints[0].groupByFields);try{for(_iterator.s();!(_step=_iterator.n()).done;){var group=_step.value;if("lookup"===group.dataTypeEnum.toLowerCase()){var groupMap=group.lookupMap;for(var id in groupMap)if(groupMap[id]===groupName)return{group:group,value:id}}else{if("enum"!==group.dataTypeEnum.toLowerCase()&&"boolean"!==group.dataTypeEnum.toLowerCase())return{group:group,value:groupName};var _groupMap=group.enumMap;for(var _id2 in _groupMap)if(_groupMap[_id2]===groupName)return{group:group,value:_id2}}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}},computed:{drilldownPath:function(){var drillPath=dlv__WEBPACK_IMPORTED_MODULE_9___default()(this,"resultObj.report.reportDrilldownPath");return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(drillPath)?null:drillPath}}}},
/***/507815:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(103336),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(566347),moment_timezone__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(480008)),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={PARENT_MODULE_VS_DEPENDENT_MODULE_FOR_REPORT:{workorder:"workorder",workorderLabour:"workorder",workorderCost:"workorder",workorderItem:"workorder",workorderTools:"workorder",workorderService:"workorder",workorderTimeLog:"workorder",workorderHazard:"workorder",workOrderPlannedItems:"workorder",workOrderPlannedServices:"workorder",workorderFailureClassRelationship:"workorder",workOrderPlannedTools:"workorder",workorderLabourPlan:"workorder",purchaseorder:"purchaseorder",poterms:"purchaseorder",purchaseorderlineitems:"purchaseorder",purchaserequest:"purchaseorder",purchaserequestlineitems:"purchaseorder",inspectionTemplate:"inspectionTemplate",inspectionResponse:"inspectionTemplate",budget:"budget",budgetamount:"budget",item:"item",tool:"item",itemTransactions:"item",tootTransactions:"item",itemTypes:"item",toolTypes:"item",storeRoom:"item",shipment:"item",transferrequest:"item",transferrequestpurchaseditems:"item",transferrequestshipmentreceivables:"item",alarm:"alarm",newreadingalarm:"alarm",readingalarmoccurrence:"alarm",bmsalarm:"alarm",mlAnomalyAlarm:"alarm",anomalyalarmoccurrence:"alarm",violationalarm:"alarm",violationalarmoccurrence:"alarm",operationalarm:"alarm",operationalarmoccurrence:"alarm",sensoralarm:"alarm",sensoralarmoccurrence:"alarm",sensorrollupalarm:"alarm",sensorrollupalarmoccurrence:"alarm",basealarm:"alarm",alarmoccurrence:"alarm",readingevent:"alarm",bmsevent:"alarm",mlAnomalyEvent:"alarm",violationevent:"alarm",operationevent:"alarm",sensorevent:"alarm",baseevent:"alarm",serviceRequest:"serviceRequest",asset:"asset",assetbreakdown:"asset",controlGroupAsset:"asset",assetmovement:"asset",budgetmonthlyamount:"asset",inspectionTriggerResourceInclExcl:"asset",faultImpactFields:"asset",inductionTriggerResourceInclExcl:"asset",assetHazard:"asset",surveyTriggerResourceInclExcl:"asset",assetdepreciationCalculation:"asset",vendors:"asset",visitor:"visitor",visitorlog:"visitor",invitevisitor:"visitor",watchlist:"visitor",tenant:"tenant",tenantunit:"tenant",tenantcontact:"tenant",quote:"tenant",contact:"tenant",tenantspaces:"tenant",quotelineitems:"tenant",quoteterms:"tenant",people:"tenant",newsandinformationsharing:"tenant",neighbourhoodsharing:"tenant",dealsandofferssharing:"tenant",contactdirectorysharing:"tenant",admindocumentsharing:"tenant",audienceSharing:"tenant",contracts:"contracts",purchasecontracts:"contracts",purchasecontractlineitems:"contracts",labourcontracts:"contracts",labourcontractlineitems:"contracts",warrantycontracts:"contracts",warrantycontractlineitems:"contracts",rentalleasecontracts:"contracts",rentalleasecontractlineitems:"contracts"},methods:{getCurrentModule:function(fromRouteObj){if(this.$helpers.isLicenseEnabled("NEW_LAYOUT")&&this.moduleName&&!fromRouteObj)return{module:this.moduleName,rootPath:""};if(this.currentDashboard)return{module:this.currentDashboard.moduleName,rootPath:""};var routeObj=this.$route;if(null!==routeObj&&void 0!==routeObj&&routeObj.path.includes("/em/pivot"))return"pivot";var module=null,rootPath=null;if(this.$helpers.isLicenseEnabled("NEW_LAYOUT")){if(routeObj.params.moduleName)module=routeObj.params.moduleName,rootPath=routeObj.path;else if(routeObj.matched){var _step,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(routeObj.matched);try{for(_iterator.s();!(_step=_iterator.n()).done;){var matchedRoute=_step.value;if(matchedRoute.meta.module){module=matchedRoute.meta.module,rootPath=matchedRoute.path;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}else if(routeObj.meta.module)module=routeObj.meta.module,rootPath=routeObj.path;else if(routeObj.matched){var _step2,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(routeObj.matched);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _matchedRoute=_step2.value;if(_matchedRoute.meta.module){module=_matchedRoute.meta.module,rootPath=_matchedRoute.path;break}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}return rootPath=rootPath.replace("/new",""),rootPath=rootPath.replace("/newmatrix",""),rootPath=rootPath.replace("/newtabular",""),rootPath=rootPath.replace("/scheduled",""),{module:module,rootPath:rootPath}},getOperator:function(){var operator=[{index:0,label:"Today",trimLabel:"D",value:22,uptoNowValue:43,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("day").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("day").valueOf()]},{index:1,label:"This Week",trimLabel:"W",value:31,uptoNowValue:47,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("week").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("week").valueOf()]},{index:2,label:"This Month",trimLabel:"M",value:28,uptoNowValue:48,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("month").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("month").valueOf()]},{index:3,label:"Last Month",trimLabel:"M",value:27,uptoNowValue:48,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().subtract(1,"month").startOf("month").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().subtract(1,"month").endOf("month").valueOf()]},{index:3,label:"This Year",trimLabel:"Y",value:44,uptoNowValue:46,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("year").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("year").valueOf()]},{index:4,label:"Last N displayUnkownValueAs",trimLabel:"C",value:49,uptoNowValue:49,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("day").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("day").valueOf()]},{index:5,label:"Last N displayUnkownValueAs",trimLabel:"C",value:42,uptoNowValue:42,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("day").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("day").valueOf()]},{index:6,label:"Last N displayUnkownValueAs",trimLabel:"C",value:50,uptoNowValue:50,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("day").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("day").valueOf()]},{index:7,label:"Last N displayUnkownValueAs",trimLabel:"C",value:51,uptoNowValue:51,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("day").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("day").valueOf()]},{index:8,label:"Range",trimLabel:"R",value:100,uptoNowValue:100,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("year").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("year").valueOf()]},{index:9,label:"Yesterday",option:"D",value:25,days:"30",uptoNowValue:25,timestamp:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().subtract(1,"day").startOf("day").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().subtract(1,"day").endOf("day").valueOf()]}];return operator},getMills:function(obj){var id,value;obj.operatorId&&obj.value?(id=obj.operatorId,value=obj.value):id=obj.operatorId;var self=this,options={},time=[];id=43===id||22===id?22:47===id||31===id?31:48===id||28===id?28:27===id?27:46===id||44===id?44:42===id?42:49===id?49:50===id?50:51===id?51:25===id?25:100===id||101===id?100:22;var mills1=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(this.operaterIdTOmills(id));if(void 0!==mills1){var data=self.operaterIdTOmills(id);time=42===id||49===id||50===id||51===id?this.getNimes(id,value):data.timestamp,options.filter=data.trimLabel}else time=[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().startOf("day").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().endOf("day").valueOf()];return options.time=time,options},operaterIdTOmills:function(id){return this.getOperator().find((function(sb){return sb.value===id}))},operaterIdUpTOmills:function(id){return this.getOperator().find((function(sb){return sb.uptoNowValue===id}))},getNimes:function(id,value){var val,time;return value&&(val=parseInt(value)),time=42===id?[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).subtract(val-1,"hour").startOf("hour").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).endOf("hour").valueOf()]:49===id?[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).subtract(val-1,"day").startOf("day").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).endOf("day").valueOf()]:50===id?[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).subtract(val-1,"week").startOf("week").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).endOf("week").valueOf()]:51===id?[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).subtract(val-1,"month").startOf("month").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).endOf("month").valueOf()]:[moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).subtract(0,"hour").startOf("hour").valueOf(),moment_timezone__WEBPACK_IMPORTED_MODULE_8___default()().tz(this.$timezone).endOf("hour").valueOf()],time}},findModuleFromSubmodule:function(submoduleName){return this.PARENT_MODULE_VS_DEPENDENT_MODULE_FOR_REPORT[submoduleName]?this.PARENT_MODULE_VS_DEPENDENT_MODULE_FOR_REPORT[submoduleName]:"workorder"},isHiddenModule:function(submoduleName){return this.PARENT_MODULE_VS_DEPENDENT_MODULE_FOR_REPORT[submoduleName]}}},
/***/902040:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),vuex__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(420629),_facilio_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(329435);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={computed:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_2__/* .mapState */.rn)({currentTab:function(state){return state.webtabs.selectedTab}})),(0,vuex__WEBPACK_IMPORTED_MODULE_2__/* .mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{hasCreateEditPermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("CREATE_EDIT",currentTab)}return!0},hasDeletePermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("DELETE",currentTab)}return!0},hasViewPermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("VIEW",currentTab)}return!0},hasSharePermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("SHARE",currentTab)}return!0},hasSchedulePermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("SCHEDULE",currentTab)}return!0},hasExportPermission:function(){if((0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("EXPORT",currentTab)}return!0}})}},
/***/86254:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(566347),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(595082),moment_timezone__WEBPACK_IMPORTED_MODULE_21__=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(976801),__webpack_require__(879288),__webpack_require__(228436),__webpack_require__(897389),__webpack_require__(425728),__webpack_require__(538077),__webpack_require__(450886),__webpack_require__(169358),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(480008)),moment_timezone__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_21__),charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(676240),_mixins_DateHelper__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(281230),charts_helpers_colors__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(519898),_facilio_api__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(32284),vuex__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(420629),util_picklist__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(961358);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={mixins:[_mixins_DateHelper__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */.Z],data:function(){return{assets:[],folderState:{}}},created:function(){this.loadAssetPickListData(),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadTicketStatus","workorder"),this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAssetDepartment"),this.$store.dispatch("loadAssetType"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadServiceList"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadBuildings")},computed:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_27__/* .mapGetters */.Se)(["getTicketPriority","getTicketCategory"])),methods:{loadAssetPickListData:function(){var _this=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,util_picklist__WEBPACK_IMPORTED_MODULE_26__/* .getFieldOptions */._K)({field:{lookupModuleName:"asset",skipDeserialize:!0}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this.$message.error(error.message||"Error Occured"):_this.assets=options;case 6:case"end":return _context.stop()}}),_callee)})))()},deleteReport:function(id){var _this2=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee2(){var promptObj,deleteConfirmation,_yield$API$delete,data,error,confirmObj,widgetDeleteConfirm,resp;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return promptObj={title:"Delete Report",message:"Are you sure you want to delete this Report?",rbDanger:!0,rbLabel:"Delete"},_context2.next=3,_this2.$dialog.confirm(promptObj);case 3:if(deleteConfirmation=_context2.sent,!deleteConfirmation){_context2.next=29;break}return _context2.next=7,_facilio_api__WEBPACK_IMPORTED_MODULE_25__/* .API */.bl.delete("/v3/report/delete",{reportId:id});case 7:if(_yield$API$delete=_context2.sent,data=_yield$API$delete.data,error=_yield$API$delete.error,!error){_context2.next=14;break}_this2.$message.error("Failed to delete report, please try again.",error),_context2.next=28;break;case 14:if(!data||!data.errorString){_context2.next=26;break}return confirmObj={title:"Delete Report",message:"This report is associated to a dashboard widget. Deleting this report will remove the widget from the dashboard. Are you sure you want to continue?",rbLabel:"Yes, delete",lbLabel:"No, cancel"},_context2.next=18,_this2.$dialog.confirm(confirmObj);case 18:if(widgetDeleteConfirm=_context2.sent,!widgetDeleteConfirm){_context2.next=24;break}return _context2.next=22,_facilio_api__WEBPACK_IMPORTED_MODULE_25__/* .API */.bl.delete("/v3/report/delete",{reportId:id,deleteWithWidget:!0});case 22:resp=_context2.sent,resp.error?_this2.$message.error("Failed to delete report, please try again.",error):(_this2.$emit("reportDeleted",{type:"new",reportId:id}),_this2.$message.success("Report deleted successfully"));case 24:_context2.next=28;break;case 26:_this2.$emit("reportDeleted",{type:"new",reportId:id}),_this2.$message.success("Report deleted successfully");case 28:_this2.handleDelete(id);case 29:case"end":return _context2.stop()}}),_callee2)})))()},handleDelete:function(id){var _this3=this;this.reportlist.forEach((function(report,index){report.id===id&&_this3.reportlist.splice(index,1)}))},prepareDateFilter:function(reportContext){var dateFilter=null;return reportContext.dateFilter&&(dateFilter={},dateFilter.operatorId=reportContext.dateFilter.operatorId,reportContext.dateFilter.value&&(dateFilter.value=reportContext.dateFilter.value),dateFilter.field=reportContext.dateFilter.field,20===dateFilter.operatorId&&(dateFilter.dateRange=[],dateFilter.dateRange.push(new Date(reportContext.dateFilter.val.split(",")[0])),dateFilter.dateRange.push(new Date(reportContext.dateFilter.val.split(",")[1]))),reportContext.dateFilter.startTime&&reportContext.dateFilter.endTime&&(dateFilter.startTime=reportContext.dateFilter.startTime,dateFilter.endTime=reportContext.dateFilter.endTime)),dateFilter},prepareReportOptions:function(responseData,time,filterName){var _this4=this,reportContext=responseData.reportContext,entityName=responseData.entityName,variance=responseData.variance;entityName||(entityName=reportContext.name);var chartOptions={};if(chartOptions.id=reportContext.id,chartOptions.name=reportContext.name,chartOptions.entityName=entityName,chartOptions.description=reportContext.description,chartOptions.type=reportContext.reportChartType?reportContext.reportChartType.name:"line",chartOptions.is_highres_data=reportContext.isHighResolutionReport,chartOptions.is_combo=reportContext.isCombinationReport||"combo"===chartOptions.type,chartOptions.date_range=time,chartOptions.color=reportContext.reportColor,responseData.heatMapRange&&(chartOptions.heatMapRange=responseData.heatMapRange),chartOptions.xaxis={title:reportContext.xAxisLabel?reportContext.xAxisLabel:"",unit:reportContext.xAxisUnit?reportContext.xAxisUnit:"",field:reportContext.xAxisField?reportContext.xAxisField.field:null,datatype:reportContext.xAxisField&&reportContext.xAxisField.field.dataTypeEnum?reportContext.xAxisField.field.dataTypeEnum._name.toLowerCase():"string",operation:reportContext.XAxisAggregateOpperator?reportContext.XAxisAggregateOpperator._name.toLowerCase():"",isTitle:!reportContext.xAxisTitleEnable||reportContext.xAxisTitleEnable,is_highres_data:reportContext.isHighResolutionReport},filterName&&(chartOptions.xaxis.filterName=filterName),reportContext.y1AxisField&&(chartOptions.y1axis={title:reportContext.y1AxisLabel?reportContext.y1AxisLabel:"",title1:reportContext.y1AxisField?reportContext.y1AxisField.fieldLabel:null,unit:reportContext.y1AxisUnit?reportContext.y1AxisUnit:reportContext.y1AxisField.field.unit?"AED"===reportContext.y1AxisField.field.unit?reportContext.y1AxisField.field.unit:reportContext.y1AxisField.field.unit.toLowerCase():"",field:reportContext.y1AxisField?reportContext.y1AxisField.field:null,datatype:reportContext.y1AxisUnit&&"cost"===reportContext.y1AxisUnit?"currency":reportContext.y1AxisField&&reportContext.y1AxisField.field.dataTypeEnum?reportContext.y1AxisField.field.dataTypeEnum._name.toLowerCase():"number",operation:reportContext.y1AxisAggregateOpperator?reportContext.y1AxisAggregateOpperator._name.toLowerCase():"",isTitle:!reportContext.yAxisTitleEnable||reportContext.yAxisTitleEnable}),reportContext.y2AxisField&&(chartOptions.y2axis={title:reportContext.y2AxisLabel?reportContext.y2AxisLabel:"",unit:reportContext.y2AxisUnit?reportContext.y2AxisUnit:reportContext.y2AxisField.field.unit?reportContext.y2AxisField.field.unit.toLowerCase():"",field:reportContext.y2AxisField?reportContext.y2AxisField.field:null,datatype:reportContext.y2AxisUnit&&"cost"===reportContext.y2AxisUnit?"currency":reportContext.y2AxisField&&reportContext.y2AxisField.field.dataTypeEnum?reportContext.y2AxisField.field.dataTypeEnum._name.toLowerCase():"number",operation:reportContext.y2AxisAggregateOpperator?reportContext.y2AxisAggregateOpperator._name.toLowerCase():""}),reportContext.y3AxisField&&(chartOptions.y3axis={title:reportContext.y3AxisLabel?reportContext.y3AxisLabel:"",unit:reportContext.y3AxisField?reportContext.y3AxisUnit:reportContext.y3AxisField.field.unit?reportContext.y3AxisField.field.unit.toLowerCase():"",field:reportContext.y3AxisField?reportContext.y3AxisField.field:null,datatype:reportContext.y3AxisUnit&&"cost"===reportContext.y3AxisUnit?"currency":reportContext.y3AxisField&&reportContext.y3AxisField.field.dataTypeEnum?reportContext.y3AxisField.field.dataTypeEnum._name.toLowerCase():"number",operation:reportContext.y3AxisAggregateOpperator?reportContext.y3AxisAggregateOpperator._name.toLowerCase():""}),reportContext.groupByField&&null!==reportContext.groupByField.field&&(chartOptions.groupby={title:reportContext.groupByLabel?reportContext.groupByLabel:"",unit:reportContext.groupByUnit?reportContext.groupByUnit:"",field:reportContext.groupByField?reportContext.groupByField.field:null,datatype:reportContext.groupByField&&reportContext.groupByField.field.dataTypeEnum?reportContext.groupByField.field.dataTypeEnum._name.toLowerCase():"string",operation:reportContext.groupByAggregateOpperator?reportContext.groupByAggregateOpperator._name.toLowerCase():""}),reportContext.isComparisionReport&&(chartOptions.groupby={title:reportContext.groupByLabel?reportContext.groupByLabel:"",unit:reportContext.groupByUnit?reportContext.groupByUnit:"",datatype:reportContext.groupByField&&reportContext.groupByField.field.dataTypeEnum?reportContext.groupByField.field.dataTypeEnum._name.toLowerCase():"string",operation:reportContext.groupByAggregateOpperator?reportContext.groupByAggregateOpperator._name.toLowerCase():""}),reportContext.metaJson&&(chartOptions.metaJson=reportContext.metaJson),reportContext.colorSchema&&(chartOptions.colorSchema=reportContext.colorSchema),chartOptions.timeObject={time:time,field:this.filterName},variance&&variance.sum||[3944,4067,4063,4066,3940].includes(reportContext.id)&&responseData.reportData){var sum=0;variance&&variance.sum?sum=variance.sum:responseData.reportData.forEach((function(data){sum+=Number(data.value)})),chartOptions.innerText=!0,chartOptions.centerText=this.formatValue(sum,chartOptions.y1axis),"currency"===chartOptions.y1axis.datatype&&sum>1e4?(chartOptions.centerValue=this.formatValue(parseInt(sum/1e3),chartOptions.y1axis,"json").value,chartOptions.centerValue=chartOptions.centerValue.substring(0,chartOptions.centerValue.indexOf("."))+"K"):chartOptions.centerValue=this.formatValue(sum,chartOptions.y1axis,"json").value,chartOptions.y1axis.unit?chartOptions.centerLabel=(chartOptions.y1axis&&""!==chartOptions.y1axis.unit?this.formatValue(sum,chartOptions.y1axis,"json").unit:chartOptions.y1axis.title)+"":(chartOptions.centerText+=" "+chartOptions.y1axis.title,chartOptions.centerLabel=(chartOptions.y1axis&&""!==chartOptions.y1axis.unit?chartOptions.y1axis.unit:chartOptions.y1axis.title)+""),!0===chartOptions.innerText&&(chartOptions.arcSliceEnable=!1,chartOptions.arcSliceValueFormat="percent")}reportContext.baseLineContexts&&reportContext.baseLineContexts.length&&(chartOptions.isBaseLine=!0,chartOptions.baseLineDiff=responseData.baseLineComparisionDiff,chartOptions.criteria=reportContext.criteria,chartOptions.baseLineContexts=reportContext.baseLineContexts);var legendTypes=["number","celsius","decimal","percentage"];if(chartOptions.showWidgetLegends=!!variance&&legendTypes.includes(chartOptions.y1axis.datatype)&&(88!==this.$org.id||3992!==reportContext.id)&&(78!==this.$org.id||["portfolio","buildingdashboard"].includes(this.$route.params.dashboardlink)),chartOptions.showWidgetLegends){chartOptions.variance=variance,chartOptions.widgetLegends={};var labels={min:"MIN",max:"MAX",sum:"TOTAL",avg:"AVG",eui:"EUI",total_cost:"COST",total_kwh:"ENERGY",yesterday_cost:"COST",yesterday_kwh:"ENERGY"},setWidgetLegends=function(key){if(variance&&variance.hasOwnProperty(key)&&null!==variance[key]){var yaxis=_this4.$helpers.cloneObject(chartOptions.y1axis);["total_kwh","yesterday_kwh"].includes(key)&&(yaxis.unit="kwh");var varianceLabel,formattedValue=_this4.formatValue(variance[key],yaxis,"json"),yest=new Date;if(yest.setDate(yest.getDate()-1),"yesterday_cost"===key||"yesterday_kwh"===key)varianceLabel=_this4.$options.filters.formatDate(yest,!0);else if(("total_cost"===key||"total_kwh"===key)&&reportContext.dateFilter){var operator=_this4.getDateOperatorFromId(reportContext.dateFilter.operatorId,reportContext.dateFilter.value);operator&&(varianceLabel=operator.label)}chartOptions.widgetLegends[key]={label:labels[key],value:formattedValue.value||0,varianceLabel:varianceLabel||"",unit:"eui"===key?formattedValue.unit+(78===_this4.$account.org.id?"/m<sup>2</sup>":"/ft<sup>2</sup>"+(88===_this4.$account.org.id&&1012===reportContext.id?"/hr":"")):formattedValue.unit}}};variance.hasOwnProperty("total_cost")?(setWidgetLegends("total_cost"),setWidgetLegends("total_kwh"),setWidgetLegends("yesterday_cost"),setWidgetLegends("yesterday_kwh")):responseData.reportData&&responseData.reportData.length&&(setWidgetLegends("min"),setWidgetLegends("max"),setWidgetLegends("sum"),variance.hasOwnProperty("eui")?setWidgetLegends("eui"):"doughnut"!==chartOptions.type&&setWidgetLegends("avg"))}if(responseData.safelimit){var safelimit=[];safelimit=responseData.safelimit,chartOptions.safelimit=[];for(var i=0;i<safelimit.length;i++)if(null!==safelimit[i]){var data={header:"SafeLimit",title:chartOptions.y1axis.field&&chartOptions.y1axis.field.displayName?chartOptions.y1axis.field.displayName:"",safelimitName:0===i?"Min":1===i?"Max":"",formated_value:this.formatValue(safelimit[i],chartOptions.y1axis),safelimitValue:safelimit[i],lineStyle:0===i?"dashed":"line",color:chartOptions.color,index:0};chartOptions.safelimit.push(data)}}if(responseData.benchmarks)if(chartOptions.safelimit){var benchmarks=[];benchmarks=responseData.benchmarks;for(var _i=0;_i<benchmarks.length;_i++)if(null!==benchmarks[_i]){var _data={header:"benchmark",title:benchmarks[_i].name,safelimitName:"Value",formated_value:this.formatValue(benchmarks[_i].value,chartOptions.y1axis),safelimitValue:benchmarks[_i].value,lineStyle:"line",color:chartOptions.color,index:19};chartOptions.safelimit.push(_data)}}else chartOptions.safelimit=[];return chartOptions},prepareMultiwidgetLegends:function(report){var dataList=report.data;if(report.multi&&1!==dataList.length){var unit=report.options.y1axis.unit?report.options.y1axis.unit.toLowerCase():"",aggr=["currency","kwh","co2","kg","mwh"].includes(unit.trim())?"sum":"avg";if(report.options.isBaseLine&&dataList.length<=2){var total,baseLineTotal,label;if(report.options.variance&&report.options.variance.hasOwnProperty("total_cost")?(total=report.options.widgetLegends["total_cost"],baseLineTotal=report.data[1].options.widgetLegends["total_cost"],label="COST"):(total=report.options.widgetLegends[aggr],baseLineTotal=report.data[1].options.widgetLegends[aggr],label="sum"===aggr?"TOTAL":"AVG"),!total)return;report.options.widgetLegends={current:{value:total.value,unit:total.unit,type:"baseLine",legendColor:report.options.color,numValue:Number(total.value),convertedValue:"mwh"===total.unit.toLowerCase()?1e3*Number(total.value):Number(total.value),label:label,index:0,name:report.data[0].options.entityName,stack:!0},baseLine:{value:baseLineTotal?baseLineTotal.value:0,unit:baseLineTotal?baseLineTotal.unit:total.unit,type:"baseLine",baseLineDiff:report.data[1].options.baseLineDiff,legendColor:report.data[1].options.color,numValue:Number(total.value),convertedValue:"mwh"===total.unit.toLowerCase()?1e3*Number(total.value):Number(total.value),label:label,index:1,name:report.data[1].options.entityName,stack:!0}}}else{var widgetLegends={};report.options.variance&&report.options.variance.hasOwnProperty("total_cost")?dataList.forEach((function(data,index){widgetLegends["total_cost"]?(widgetLegends["total_cost"].value=(Number(widgetLegends["total_cost"].value)+Number(data.options.widgetLegends["total_cost"].value)).toFixed(2),widgetLegends["yesterday_cost"].value=(Number(widgetLegends["yesterday_cost"].value)+Number(data.options.widgetLegends["yesterday_cost"].value)).toFixed(2)):(widgetLegends["total_cost"]=data.options.widgetLegends["total_cost"],widgetLegends["total_kwh"]=data.options.widgetLegends["total_kwh"],widgetLegends["yesterday_cost"]=data.options.widgetLegends["yesterday_cost"],widgetLegends["yesterday_kwh"]=data.options.widgetLegends["yesterday_kwh"])})):dataList.forEach((function(data,index){if(data.options.widgetLegends){var total=data.options.widgetLegends[aggr];total&&(data.options.widgetLegends=total,widgetLegends[aggr+"_"+index]={value:total.value,numValue:Number(total.value),convertedValue:"mwh"===total.unit.toLowerCase()?1e3*Number(total.value):Number(total.value),unit:total.unit,label:"sum"===aggr?"TOTAL":"AVG",legendColor:data.options.color,type:aggr,index:index,name:data.options.entityName})}})),report.options.widgetLegends=widgetLegends}}},setMinMaxVarianceLabel:function(options,label,value){var variance,formattedLabel;options.variance&&options.widgetLegends.min&&(value===options.variance.min?variance="min":value===options.variance.max&&(variance="max"),variance&&(!options.is_highres_data||"date_time"!==options.xaxis.datatype&&"date"!==options.xaxis.datatype?(options.widgetLegends[variance].legendColor=options.color,formattedLabel=this.formatValue(label,options.xaxis)):formattedLabel=this.$options.filters.toDateFormat(label,"DD MMM YYYY HH:mm A"),options.widgetLegends[variance].varianceLabel=formattedLabel,options.variance.min===options.variance.max&&(options.widgetLegends["max"].varianceLabel=formattedLabel)))},prepareBooleanReportData:function(reportData,reportContext,reportOptions,yAxis,diff){var lb=reportData.find((function(r){return null===r.label}));lb&&reportData.splice(reportData.indexOf(lb),1),reportData=reportData.filter((function(rd){return!rd.marked}));var sublabels=[];if(Array.isArray(reportData))for(var i=0;i<reportData.length;i++){var row=reportData[i];row.orig_label=row.label,row.name=reportOptions.entityName,row.title=reportOptions.entityName,diff&&-1!==reportOptions.xaxis.datatype.indexOf("date")&&"number"===typeof row.label&&(row.label=row.label+diff),row.orgLabel=row.label;var operationIdDate=void 0;if(reportContext.dateFilter&&(operationIdDate=reportContext.dateFilter.operatorId),row.label=this.formatLabel(row.label,reportContext.xAxisField,reportOptions.xaxis,operationIdDate),Array.isArray(row.value))for(var j=0;j<row.value.length;j++){var col=row.value[j];col.orig_label=col.label,col.name=reportOptions.entityName,col.title=reportOptions.name,col.label=this.formatLabel(col.label,reportContext.groupByField,reportOptions.groupby,operationIdDate),col.formatted_value=this.formatValue(col.value,reportOptions[yAxis]),-1===sublabels.indexOf(col.label)&&sublabels.push(col.label)}else this.setMinMaxVarianceLabel(reportOptions,row.label,row.value),row.formatted_value=this.formatValue(row.value,reportOptions[yAxis])}if(sublabels.length)for(var _i2=0;_i2<reportData.length;_i2++){var _row=reportData[_i2];if(Array.isArray(_row.value)){var _step,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(sublabels);try{var _loop=function(){var sublabel=_step.value,sv=_row.value.find((function(v){return v.label===sublabel}));sv||_row.value.push({label:sublabel,value:0})};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}}return reportData},prepareReportData:function(reportData,reportContext,reportOptions,yAxis,diff,call){var lb=reportData.find((function(r){return null===r.label}));lb&&reportData.splice(reportData.indexOf(lb),1),reportData=reportData.filter((function(rd){return!rd.marked}));var sublabels=[],ignoreDip=!0,reptId=reportContext.id;
/* temp fix only */if(!reptId||3990!==reptId&&3991!==reptId&&3992!==reptId&&3993!==reptId||(ignoreDip=!1),Array.isArray(reportData))for(var i=0;i<reportData.length;i++)if(ignoreDip){var _row2=reportData[i];_row2.orig_label=_row2.label,diff&&-1!==reportOptions.xaxis.datatype.indexOf("date")&&"number"===typeof _row2.label&&(_row2.label=_row2.label+diff),_row2.orgLabel=_row2.label;var _operationIdDate=void 0;if(reportContext.dateFilter&&(_operationIdDate=reportContext.dateFilter.operatorId),_row2.label=this.formatLabel(_row2.label,reportContext.xAxisField,reportOptions.xaxis,_operationIdDate),Array.isArray(_row2.value))for(var _j=0;_j<_row2.value.length;_j++){var _col=_row2.value[_j];_col.orig_label=_col.label,_col.label=this.formatLabel(_col.label,reportContext.groupByField,reportOptions.groupby,_operationIdDate),_col.formatted_value=this.formatValue(_col.value,reportOptions[yAxis]),-1===sublabels.indexOf(_col.label)&&sublabels.push(_col.label)}else this.setMinMaxVarianceLabel(reportOptions,_row2.label,_row2.value),_row2.formatted_value=this.formatValue(_row2.value,reportOptions[yAxis])}else{var row=reportData[i];row.orig_label=row.label,diff&&-1!==reportOptions.xaxis.datatype.indexOf("date")&&"number"===typeof row.label&&(row.label=row.label+diff),row.orgLabel=row.label;var operationIdDate=void 0;if(reportContext.dateFilter&&(operationIdDate=reportContext.dateFilter.operatorId),row.label=this.formatLabel(row.label,reportContext.xAxisField,reportOptions.xaxis,operationIdDate),Array.isArray(row.value))for(var j=0;j<row.value.length;j++){var col=row.value[j];col.orig_label=col.label,col.label=this.formatLabel(col.label,reportContext.groupByField,reportOptions.groupby,operationIdDate),col.formatted_value=this.formatValue(col.value,reportOptions[yAxis]),-1===sublabels.indexOf(col.label)&&sublabels.push(col.label)}else this.setMinMaxVarianceLabel(reportOptions,row.label,row.value),row.formatted_value=this.formatValue(row.value,reportOptions[yAxis])}if(sublabels.length)for(var _i3=0;_i3<reportData.length;_i3++){var _row3=reportData[_i3];if(Array.isArray(_row3.value)){var _step2,_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(sublabels);try{var _loop2=function(){var sublabel=_step2.value,sv=_row3.value.find((function(v){return v.label===sublabel}));sv||_row3.value.push({label:sublabel,value:0})};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop2()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}return reportData},repoveChartDip:function(report){if(report&&report.options&&("date_time"===report.options.xaxis.datatype||"date"===report.options.xaxis.datatype)&&!1===report.options.is_highres_data&&"hoursofday"===report.options.xaxis.operation){var currentHour=moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(new Date).tz(this.$timezone).startOf("hour").valueOf();if(report.data&&report.data.length)for(var i=0;i<report.data.length;i++)if(report.data[i].data&&report.data[i].data.length)for(var j=0;j<report.data[i].data.length;j++)report.data[i].data[j].orig_label>=currentHour&&report.data[i].data.splice(j,1);if(report.alarms&&report.alarms.length)for(var _i4=0;_i4<report.alarms.length;_i4++){var mills=moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(report.alarms[_i4].from).tz(this.$timezone).valueOf();mills>currentHour&&report.alarms.splice(_i4,1)}}},prepareBooleanKey:function(key,reportContext,reportOptions,yAxis,diff,call){var keys=[],col=reportOptions.color&&reportOptions.color.split(",");if(key&&key.length)for(var color=null,i=0;i<key.length;i++)color=reportOptions.color?reportOptions.color:charts_helpers_colors__WEBPACK_IMPORTED_MODULE_24__/* ["default"]["default"] */.Z["default"][i],"1"!==key[i]&&1!==key[i]&&!0!==key[i]&&"true"!==key[i]&&"on"!==key[i]&&"ON"!==key[i]||(color=col&&2===col.length?col[0]:"#74d2c8",key[i]="ON"),"0"!==key[i]&&!1!==key[i]&&"false"!==key[i]&&"off"!==key[i]&&"OFF"!==key[i]||(key[i]=col&&2===col.length?col[1]:"#f3fafa",color="#74d2c8"),keys.push({value:key[i],color:color});return[{value:"ON",color:col&&2===col.length?col[0]:"#74d2c8"},{value:"OFF",color:col&&2===col.length?col[1]:"#f3fafa"}]},setBooleanKey:function(data){var key=[];if(data&&data.length){var options=data.map((function(rt){return rt.options.booleanKey1}));if(options&&options.length)for(var _loop3=function(){for(var color=options.color?options.color:charts_helpers_colors__WEBPACK_IMPORTED_MODULE_24__/* ["default"]["default"] */.Z["default"][i],op=options[i],_loop4=function(j){"1"!==op[j]&&1!==op[j]&&"ON"!==op[j]&&!0!==op[j]&&"true"!==key[i]&&"on"!==key[i]&&"ON"!==key[i]||(color="#74d2c8",op[j]="ON"),"0"!==op[j]&&0!==op[j]&&"OFF"!==op[j]&&!1!==op[j]&&"false"!==key[i]&&"off"!==key[i]&&"OFF"!==key[i]||(op[j]="OFF",color="#f3fafa"),key.filter((function(rt){return rt.value===op[j]})).length<1&&key.push({value:op[j],color:color})},j=0;j<op.length;j++)_loop4(j)},i=0;i<options.length;i++)_loop3()}return key},combineReportData:function(report){this.repoveChartDip(report),1015===report.options.id&&(report.options.is_combo=!0);var dataList=report.data;if(!dataList||!dataList.length)return report;if(3354===report.options.id||3357===report.options.id||3578===report.options.id||3580===report.options.id||3582===report.options.id||3584===report.options.id||3586===report.options.id){var tmpReport={multi:!0};return tmpReport.title=report.title,tmpReport.options=report.data[1].options,tmpReport.options.id=report.data[0].options.id,tmpReport.data=[report.data[1]],tmpReport.options.type="bar",tmpReport.datefilter=report.datefilter,report.data[0].options.color&&(tmpReport.options.color=report.data[0].options.color),tmpReport.tabledata=report.data,tmpReport.tabledata[0].data.length>tmpReport.tabledata[1].data.length&&tmpReport.tabledata[0].data.splice(-1,1),tmpReport}if(1===dataList.length||!report.multi)return dataList[0].data.length||(report.data=[]),1===dataList.length&&(report.multi=!1),report;if(report&&report.options.showWidgetLegends&&this.prepareMultiwidgetLegends(report),"regression"===report.options.type&&2===dataList.length)return this.prepareRegressionData(report);if(dataList.length>1&&report.options.is_highres_data)return report.options.booleanchart||report.options.enumChart?report.options.type="boolean":report.options.type="timeseries",report;if("timeseries"===report.options.type)return report;if(report.options.is_combo){for(var y2Axis=!1,unitList={},i=0;i<dataList.length;i++){var serie=dataList[i];0===i?["bar","stackedbar","line","area"].indexOf(serie.options.type)<0&&(serie.options.type="bar"):["line","area"].indexOf(serie.options.type)<0&&(serie.options.type="line"),serie.options.y1axis.title=serie.title,serie.options.withPoints=!0,unitList[serie.options.y1axis.unit]||y2Axis||(unitList[serie.options.y1axis.unit]=!0,Object.keys(unitList).length>1&&(serie.options.y2axis=serie.options.y1axis,serie.options.y1axis=null,y2Axis=!0))}return report}if(2===dataList.length&&dataList[0].options.baseLineContexts&&dataList[0].options.baseLineContexts.length>0&&dataList[1].options.baseLineContexts&&dataList[1].options.baseLineContexts.length>0){var a=moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(report.options.timeObject.time[0]).tz(this.$timezone).format("MM"),b=moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(report.options.timeObject.time[0]-dataList[1].options.baseLineDiff).tz(this.$timezone).format("MM");"D"===report.options.timeObject.field?0===moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()().tz(this.$timezone).diff(report.options.timeObject.time[0],"days")?(dataList[0].options.entityName="Today",dataList[1].options.entityName="Yesterday"):(dataList[0].options.entityName=this.$options.filters.formatDate(report.options.timeObject.time[0],!0,!1),dataList[1].options.entityName=this.$options.filters.formatDate(report.options.timeObject.time[0]-dataList[1].options.baseLineDiff,!0,!1)):"M"===report.options.timeObject.field?parseInt(a)-parseInt(b)===1?(dataList[0].options.entityName="This month",dataList[1].options.entityName="Last month"):(dataList[0].options.entityName=moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(report.options.timeObject.time[0]).tz(this.$timezone).format("MMM YYYY"),dataList[1].options.entityName=moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(report.options.timeObject.time[0]-dataList[1].options.baseLineDiff).tz(this.$timezone).format("MMM YYYY")):(dataList[0].options.entityName=this.$options.filters.formatDate(report.options.timeObject.time[0],!0,!1)+"  -  "+this.$options.filters.formatDate(report.options.timeObject.time[1],!0,!1),dataList[1].options.entityName=this.$options.filters.formatDate(dataList[1].options.date_range[0]-dataList[1].options.baseLineDiff,!0,!1)+"  -  "+this.$options.filters.formatDate(dataList[0].options.date_range[1]-dataList[1].options.baseLineDiff,!0,!1))}if(3481!==report.options.id&&3943!==report.options.id||("D"===report.options.timeObject.field?0===moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()().tz(this.$timezone).diff(report.options.timeObject.time[0],"days")?(dataList[0].options.entityName="Today",dataList[1].options.entityName="Yesterday"):(dataList[0].options.entityName=this.$options.filters.formatDate(report.options.timeObject.time[0],!0,!1),dataList[1].options.entityName=this.$options.filters.formatDate(report.options.timeObject.time[0]-dataList[1].options.baseLineDiff,!0,!1)):(dataList[0].options.entityName=this.$options.filters.formatDate(report.options.timeObject.time[0],!0,!1)+"  -  "+this.$options.filters.formatDate(report.options.timeObject.time[1],!0,!1),dataList[1].options.entityName=this.$options.filters.formatDate(dataList[1].options.date_range[0]-dataList[1].options.baseLineDiff,!0,!1)+"  -  "+this.$options.filters.formatDate(dataList[0].options.date_range[1]-dataList[1].options.baseLineDiff,!0,!1))),(3664===report.options.id||3663===report.options.id)&&(report.options.xaxis.datatype="string",report.data[0].options.xaxis.datatype="string",report.data[1].options.xaxis.datatype="string",!report.data[0].data.length)){var _step3,newData=[],_iterator3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(report.data[1].data);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var d=_step3.value;newData.push({label:d.label,orig_label:d.orig_label,orgLabel:d.orgLabel,value:0,formatted_value:"0"})}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}report.data[0].data=newData}for(var mapping={},keyList=[],sublabels=[],formatConfig=-1!==dataList[0].options.xaxis.datatype.indexOf("date")?charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */.ZP.getDateFormatConfig(dataList[0].options.xaxis):null,_i5=0;_i5<dataList.length;_i5++)for(var comp=dataList[_i5].data,j=0;j<comp.length;j++){var key=formatConfig?moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(comp[j].orgLabel).tz(this.$timezone).startOf(formatConfig.period).format(formatConfig.tooltip):comp[j].label,_d=comp[j];_d.key=key;var tooltipLabel=formatConfig?moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(comp[j].orig_label).tz(this.$timezone).startOf(formatConfig.period).format(formatConfig.tooltip):comp[j].label,label=dataList[_i5].options.entityName,newd={key:key,label:label,tooltip_label:tooltipLabel,orgLabel:_d.orgLabel,value:_d.value,formatted_value:_d.formatted_value},val=null;mapping[key]?val=mapping[key]:(val=[],mapping[key]=val,keyList.push([key,comp[j].label,comp[j].orgLabel])),val.push(newd),-1===sublabels.indexOf(label)&&sublabels.push(label)}for(var cdata=[],_i6=0;_i6<keyList.length;_i6++){var _d2=keyList[_i6];cdata.push({label:_d2[1],orgLabel:_d2[2],tooltip_label:"Energy Consumption",value:mapping[_d2[0]]?mapping[_d2[0]]:[]})}if(sublabels.length)for(var _i7=0;_i7<cdata.length;_i7++){var row=cdata[_i7];if(Array.isArray(row.value)){var _step4,_iterator4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(sublabels);try{var _loop5=function(){var sublabel=_step4.value,sv=row.value.find((function(v){return v.label===sublabel}));sv||row.value.push({label:sublabel,tooltip_label:null,value:0})};for(_iterator4.s();!(_step4=_iterator4.n()).done;)_loop5()}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}var options=dataList[0].options;return options.groupby||(options.groupby={title:"Baseline",unit:"",datatype:"string",operation:""}),{datefilter:report.datefilter,options:options,combined:!0,data:[{data:cdata,options:options}]}},prepareRegressionData:function(report){var _step5,dataList=report.data,data=[],dateMapping={},formatConfig=charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */.ZP.getDateFormatConfig(dataList[0].options),_iterator5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(dataList[0].data);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var entry=_step5.value,date=moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(entry.label).tz(this.$timezone).startOf(formatConfig.period).format(formatConfig.tooltip);data.push({label:entry.value,formatted_date:moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(entry.label).tz(this.$timezone).startOf(formatConfig.period).format(formatConfig.tooltip),value:null}),dateMapping[date]=data.length-1}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}var _step6,_iterator6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(dataList[1].data);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _entry=_step6.value,_date=moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(_entry.label).tz(this.$timezone).startOf(formatConfig.period).format(formatConfig.tooltip),idx=dateMapping[_date];idx&&(data[idx].value=_entry.value)}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}var options=this.$helpers.cloneObject(dataList[0].options);options.trendline=!0,options.xaxis=dataList[0].options.y1axis,options.y1axis=dataList[1].options.y1axis;var cdata={options:options,datefilter:report.datefilter,data:[{data:data.filter((function(d){return null!==d.value})),options:options}]};return cdata.data[0].data&&cdata.data[0].data.length||(cdata.data=null),cdata},prepareRelatedAlarms:function(alarmsData,reportContext,reportOptions){var operationIdDate,newAlarms=[];if(reportContext.dateFilter&&(operationIdDate=reportContext.dateFilter.operatorId),alarmsData){var _step7,_iterator7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(alarmsData);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var row=_step7.value;newAlarms.push({id:row.id,from:this.formatLabel(row.startTime,reportContext.xAxisField,reportOptions.xaxis,operationIdDate),to:this.formatLabel(row.endTime,reportContext.xAxisField,reportOptions.xaxis,operationIdDate),message:row.readingMessage})}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}return newAlarms}},formatLabel:function(label,axis,axisOptions,operatorId){var displayUnkownValueAs="Unknown";if(null===label)return label=displayUnkownValueAs,label;if(!axis)return label;if("DATE"===axis.field.dataTypeEnum._name||"DATE_TIME"===axis.field.dataTypeEnum._name){var formatConfig=charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */.ZP.getDateFormatConfig(axisOptions);return axisOptions.is_highres_data||"dateandtime"===axisOptions.operation||"actual"===axisOptions.operation?new Date(label):new Date(moment_timezone__WEBPACK_IMPORTED_MODULE_21___default()(label).tz(this.$timezone).startOf(formatConfig.period).valueOf())}if("STRING"===axis.field.dataTypeEnum._name)return label;if("PARENT_METER_ID"===axis.field.columnName||"BUILDING_ID"===axis.field.columnName||"RESOURCE_ID"===axis.field.columnName||"PARENT_ID"===axis.field.columnName){if("Building"===axis.field.displayName||"Parent"===axis.field.displayName){axisOptions.datatype="lookup";var building=this.$store.getters.getBuildingsPickList()[label];return building||(building=displayUnkownValueAs),building}if("Service"===axis.field.displayName){var service=this.$store.state.serviceList[label];return axisOptions.datatype="lookup",service||(service=label),service}}else if("LOOKUP"===axis.field.dataTypeEnum._name){if(null!==axis.field.lookupModule){var lookupModule=axis.field.lookupModule.name,_newLabel2=null;if("ticketstatus"===lookupModule)_newLabel2=this.$store.getters.getTicketStatus(label,"workorder").displayName;else if("ticketpriority"===lookupModule)_newLabel2=this.getTicketPriority(label).displayName;else if("ticketcategory"===lookupModule)_newLabel2=this.getTicketCategory(label).displayName;else if("tickettype"===lookupModule)_newLabel2=this.$store.getters.getTicketTypePickList()[label];else if("asset"===lookupModule)_newLabel2=this.assets[label];else if("basespace"===lookupModule)_newLabel2=this.$store.getters.getSpace(label).name;else if("alarmseverity"===lookupModule){var sev=this.$store.state.alarmSeverity.find((function(as){return as.id===label}));sev&&(_newLabel2=sev.severity)}else if("assetcategory"===lookupModule){var category=this.$store.state.assetCategory.find((function(as){return as.id===label}));category&&(_newLabel2=category.name)}else if("assetdepartment"===lookupModule){var dept=this.$store.state.assetDepartment.find((function(as){return as.id===label}));dept&&(_newLabel2=dept.name)}else if("assettype"===lookupModule){var type=this.$store.state.assetType.find((function(as){return as.id===label}));type&&(_newLabel2=type.name)}return _newLabel2||label}if("users"===axis.field.specialType){var newLabel=null;return newLabel=this.$store.getters.getUser(label).name,newLabel||label}if("groups"===axis.field.specialType){var _newLabel=null;return _newLabel=this.$store.getters.getGroup(label).name,_newLabel||label}}return label},formatValue:function(value,axis){var returnType=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string";return charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */.ZP.formatValue(value,axis,returnType)},getCurrentModule:function(){if(this.config&&this.config.currentDashboard)return{module:this.config.currentDashboard.moduleName,rootPath:""};var routeObj=this.$route,module=null,rootPath=null;if(this.$helpers.isLicenseEnabled("NEW_LAYOUT")){if(routeObj.params.moduleName)module=routeObj.params.moduleName,rootPath=routeObj.path;else if(routeObj.matched){var _step8,_iterator8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(routeObj.matched);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var matchedRoute=_step8.value;if(matchedRoute.meta.module){module=matchedRoute.meta.module,rootPath=matchedRoute.path;break}}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}}}else if(routeObj.meta.module)module=routeObj.meta.module,rootPath=routeObj.path;else if(routeObj.matched){var _step9,_iterator9=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(routeObj.matched);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _matchedRoute=_step9.value;if(_matchedRoute.meta.module){module=_matchedRoute.meta.module,rootPath=_matchedRoute.path;break}}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}}return rootPath=rootPath.replace("/new",""),rootPath=rootPath.replace("/newmatrix",""),rootPath=rootPath.replace("/newtabular",""),rootPath=rootPath.replace("/scheduled",""),{module:module,rootPath:rootPath}}}}},
/***/884900:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(566347),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(595082),vuex__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(420629)),util_picklist__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(961358);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={computed:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_10__/* .mapGetters */.Se)(["getTicketStatusPickList"])),methods:{loadAllValues:function(conf){var _this=this,existingConfig=conf["userFilters"];this.$http("/module/meta?moduleName="+this.moduleName).then((function(response){var _step,fields=response.data.meta.fields,promises=[],_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(existingConfig);try{var _loop=function(){var config=_step.value;config["allValues"]=[];var field=fields.filter((function(field){return field.fieldId===config.fieldId&&7===field.dataType}));if(0!==field.length){var lookupModuleName=field[0].lookupModule.name;if("ticketstatus"===lookupModuleName){for(var statusObj=_this.getTicketStatusPickList(_this.moduleName),_i=0,_Object$keys=Object.keys(statusObj);_i<_Object$keys.length;_i++){var key=_Object$keys[_i],temp={};temp[parseInt(key)]=statusObj[key],config.allValues.push(temp)}return 1;// continue
}config.lookupModuleName=lookupModuleName;var picklist=(0,util_picklist__WEBPACK_IMPORTED_MODULE_9__/* .getFieldOptions */._K)({field:{lookupModuleName:lookupModuleName,skipDeserialize:!0}}).then((function(_ref){var error=_ref.error,options=_ref.options;if(error)_this.$message.error(error.message||"Error Occured");else for(var _i2=0,_Object$keys2=Object.keys(options);_i2<_Object$keys2.length;_i2++){var _key=_Object$keys2[_i2],_temp={};_temp[parseInt(_key)]=options[_key],config.allValues.push(_temp)}}));promises.push(picklist)}};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.metaField=response.data.meta.fields,Promise.all(promises).then((function(){_this.config&&_this.config.dimension&&null===_this.config.dimension.dimension?(conf["userFilters"]=existingConfig,_this.config=conf,_this.currentUserFilter=_this.config.userFilters[0],_this.build(_this.config,_this.moduleResourceField)):_this.hasOwnProperty("userFilters")&&null===_this.userFilters&&(_this.userFilters=existingConfig)}))}))},getDefaultSettingsForField:function(facilioField,moduleName){var _facilioField$dataTyp,setting=null;setting=this.$helpers.cloneObject(this.getDefaultFilterSettings(facilioField.dataTypeEnum.typeAsString.toUpperCase())),"lookup"===(null===facilioField||void 0===facilioField||null===(_facilioField$dataTyp=facilioField.dataTypeEnum)||void 0===_facilioField$dataTyp||null===(_facilioField$dataTyp=_facilioField$dataTyp.typeAsString)||void 0===_facilioField$dataTyp?void 0:_facilioField$dataTyp.toLowerCase())&&(setting.lookupModuleName=facilioField.lookupModule.name),setting.name=facilioField.displayName,setting.fieldId=facilioField.fieldId,7===facilioField.dataType||8===facilioField.dataType?this.loadDefaultValues(facilioField,setting,moduleName):this.fieldConfigs[facilioField.fieldId]=setting},getDefaultFilterSettings:function(dataType){return this.defaultSettings[dataType]},getComponent:function(componentType){return this.componentType[componentType].element},loadDefaultValues:function(facilioField,settings,moduleName){var _this2=this,lookupModuleName=facilioField.lookupModule.name;if(this.$set(this.fieldConfigs,facilioField.fieldId,settings),"ticketstatus"!==lookupModuleName)(0,util_picklist__WEBPACK_IMPORTED_MODULE_9__/* .getFieldOptions */._K)({field:{lookupModuleName:lookupModuleName,skipDeserialize:!0}}).then((function(_ref2){var error=_ref2.error,options=_ref2.options;if(error)_this2.$message.error(error.message||"Error Occured");else{for(var _i4=0,_Object$keys4=Object.keys(options);_i4<_Object$keys4.length;_i4++){var _key2=_Object$keys4[_i4],_temp2={};_temp2[parseInt(_key2)]=options[_key2],settings.allValues.push(_temp2)}_this2.fieldConfigs[facilioField.fieldId].allValues=settings.allValues}}));else{for(var statusObj=this.getTicketStatusPickList(moduleName),_i3=0,_Object$keys3=Object.keys(statusObj);_i3<_Object$keys3.length;_i3++){var key=_Object$keys3[_i3],temp={};temp[parseInt(key)]=statusObj[key],settings.allValues.push(temp)}this.fieldConfigs[facilioField.fieldId].allValues=settings.allValues}}},data:function(){return{dataStructureForComponent:{1:null,2:[],3:null},componentType:{1:{label:"singleselect",displayLabel:"Single Select",element:"el-select"},2:{label:"multipleselect",displayLabel:"Multiple Select",element:"el-select"},3:{label:"inputbox",displayLabel:"Input box",element:"el-input"}},type:{all:1,any:2},defaultSettings:{ENUM:{fieldId:null,dataType:8,chooseValue:{type:1,values:[],otherEnabled:!1},name:null,component:{componentType:1,availableComponents:[1,2],dataType:8},defaultValues:[],values:[],allValues:[]},LOOKUP:{fieldId:null,dataType:7,chooseValue:{type:1,values:[],otherEnabled:!1},name:null,component:{componentType:1,availableComponents:[1,2],dataType:7},defaultValues:[],values:[],allValues:[]},DATE:{fieldId:null,chooseValue:{type:1,values:[],otherEnabled:!1},component:{componentType:1,availableComponents:[1,2],dataType:5},dataType:5,name:null,defaultValues:[],values:[],allValues:[]},DATETIME:{fieldId:null,chooseValue:{type:1,values:[],otherEnabled:!1},component:{componentType:1,availableComponents:[1,2],dataType:6},dataType:6,name:null,defaultValues:[],values:[],allValues:[]}}}}}},
/***/362273:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */__webpack_require__(103336),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(689730),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(506203)
/* harmony import */;var chroma_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(428670);
/* harmony default export */__webpack_exports__.Z={simulateCache:{},confusionLines:{Protanope:{x:.7465,y:.2535,m:1.273463,yint:-.073894},Deuteranope:{x:1.4,y:-.4,m:.968437,yint:.003331},Tritanope:{x:.1748,y:0,m:.062921,yint:.292119}},checkForThis:function(){},checkLab:function(lab,checkColor){
// It will be necessary to check if a Lab color exists in the rgb space.
var color=chroma_js__WEBPACK_IMPORTED_MODULE_7__.lab(lab[0],lab[1],lab[2]);return this.validateLab(lab)&&checkColor(color)},checkColor2:function(lab,checkColor){var color=chroma_js__WEBPACK_IMPORTED_MODULE_7__.lab(lab);return this.validateLab(lab)&&checkColor(color)},generate:function(colorsCount,checkColor,forceMode,quality,ultraPrecision,distanceType){var _this=this;if(void 0===colorsCount&&(colorsCount=8),void 0===checkColor&&(checkColor=function(x){return!0}),void 0===forceMode&&(forceMode=!1),void 0===quality&&(quality=50),void 0===distanceType&&(distanceType="Default"),ultraPrecision=ultraPrecision||!1,forceMode){for(
// Force Vector Mode
var colors=[],vectors={},i=0
// Init
;i<colorsCount;i++){
// Find a valid Lab color
var color=[100*Math.random(),100*(2*Math.random()-1),100*(2*Math.random()-1)];while(!this.checkLab(color,checkColor))color=[100*Math.random(),100*(2*Math.random()-1),100*(2*Math.random()-1)];colors.push(color)}
// Force vector: repulsion
var repulsion=100,speed=100,steps=20*quality;while(steps-- >0){
// Init
for(var _i=0;_i<colors.length;_i++)vectors[_i]={dl:0,da:0,db:0};
// Compute Force
for(var _i2=0;_i2<colors.length;_i2++)for(var colorA=colors[_i2],j=0;j<_i2;j++){var colorB=colors[j],dl=colorA[0]-colorB[0],da=colorA[1]-colorB[1],db=colorA[2]-colorB[2],d=this.getColorDistance(colorA,colorB,distanceType);
// repulsion force
if(d>0){var force=repulsion/Math.pow(d,2);vectors[_i2].dl+=dl*force/d,vectors[_i2].da+=da*force/d,vectors[_i2].db+=db*force/d,vectors[j].dl-=dl*force/d,vectors[j].da-=da*force/d,vectors[j].db-=db*force/d}else
// Jitter
vectors[j].dl+=2-4*Math.random(),vectors[j].da+=2-4*Math.random(),vectors[j].db+=2-4*Math.random()}
// Apply Force
for(var _i3=0;_i3<colors.length;_i3++){var _color=colors[_i3],displacement=speed*Math.sqrt(Math.pow(vectors[_i3].dl,2)+Math.pow(vectors[_i3].da,2)+Math.pow(vectors[_i3].db,2));if(displacement>0){var ratio=speed*Math.min(.1,displacement)/displacement,candidateLab=[_color[0]+vectors[_i3].dl*ratio,_color[1]+vectors[_i3].da*ratio,_color[2]+vectors[_i3].db*ratio];this.checkLab(candidateLab,checkColor)&&(colors[_i3]=candidateLab)}}}return colors.map((function(lab){return chroma_js__WEBPACK_IMPORTED_MODULE_7__.lab(lab[0],lab[1],lab[2])}))}for(
// K-Means Mode
var kMeans=[],_i4=0;_i4<colorsCount;_i4++){var lab=[100*Math.random(),100*(2*Math.random()-1),100*(2*Math.random()-1)],failsafe=10;while(!this.checkColor2(lab,checkColor)&&failsafe-- >0)lab=[100*Math.random(),100*(2*Math.random()-1),100*(2*Math.random()-1)];kMeans.push(lab)}var colorSamples=[],samplesClosest=[];if(ultraPrecision)for(var l=0;l<=100;l+=1)for(var a=-100;a<=100;a+=5)for(var b=-100;b<=100;b+=5)this.checkColor2([l,a,b],checkColor)&&(colorSamples.push([l,a,b]),samplesClosest.push(null));else for(var _l=0;_l<=100;_l+=5)for(var _a=-100;_a<=100;_a+=10)for(var _b=-100;_b<=100;_b+=10)this.checkColor2([_l,_a,_b],checkColor)&&(colorSamples.push([_l,_a,_b]),samplesClosest.push(null));
// Steps
var _steps=quality;while(_steps-- >0){
// kMeans -> Samples Closest
for(var _i5=0;_i5<colorSamples.length;_i5++)for(var _lab=colorSamples[_i5],minDistance=1/0,_j=0;_j<kMeans.length;_j++){var kMean=kMeans[_j],distance=this.getColorDistance(_lab,kMean,distanceType);distance<minDistance&&(minDistance=distance,samplesClosest[_i5]=_j)}
// Samples -> kMeans
for(var freeColorSamples=colorSamples.slice(0),_loop=function(_j2){for(var count=0,candidateKMean=[0,0,0],_i6=0;_i6<colorSamples.length;_i6++)samplesClosest[_i6]===_j2&&(count++,candidateKMean[0]+=colorSamples[_i6][0],candidateKMean[1]+=colorSamples[_i6][1],candidateKMean[2]+=colorSamples[_i6][2]);if(0!==count&&(candidateKMean[0]/=count,candidateKMean[1]/=count,candidateKMean[2]/=count),0!==count&&_this.checkColor2([candidateKMean[0],candidateKMean[1],candidateKMean[2]],checkColor)&&candidateKMean)kMeans[_j2]=candidateKMean;else
// The candidate kMean is out of the boundaries of the color space, or unfound.
if(freeColorSamples.length>0){for(
// We just search for the closest FREE color of the candidate kMean
var _minDistance=1/0,closest=-1,_i7=0;_i7<freeColorSamples.length;_i7++){var _distance=_this.getColorDistance(freeColorSamples[_i7],candidateKMean,distanceType);_distance<_minDistance&&(_minDistance=_distance,closest=_i7)}closest>=0&&(kMeans[_j2]=colorSamples[closest])}else{for(
// Then we just search for the closest color of the candidate kMean
var _minDistance2=1/0,_closest=-1,_i8=0;_i8<colorSamples.length;_i8++){var _distance2=_this.getColorDistance(colorSamples[_i8],candidateKMean,distanceType);_distance2<_minDistance2&&(_minDistance2=_distance2,_closest=_i8)}_closest>=0&&(kMeans[_j2]=colorSamples[_closest])}freeColorSamples=freeColorSamples.filter((function(color){return color[0]!==kMeans[_j2][0]||color[1]!==kMeans[_j2][1]||color[2]!==kMeans[_j2][2]}))},_j2=0;_j2<kMeans.length;_j2++)_loop(_j2)}return kMeans.map((function(lab){return chroma_js__WEBPACK_IMPORTED_MODULE_7__.lab(lab[0],lab[1],lab[2])}))},diffSort:function(colorsToSort,distanceType){var _this2=this,diffColors=[colorsToSort.shift()],_loop2=function(){for(var index=-1,maxDistance=-1,candidateIndex=0;candidateIndex<colorsToSort.length;candidateIndex++){for(var d=1/0,i=0;i<diffColors.length;i++){var colorA=colorsToSort[candidateIndex].lab(),colorB=diffColors[i].lab();d=_this2.getColorDistance(colorA,colorB,distanceType)}d>maxDistance&&(maxDistance=d,index=candidateIndex)}var color=colorsToSort[index];diffColors.push(color),colorsToSort=colorsToSort.filter((function(c,i){return i!==index}))};
// Sort
while(colorsToSort.length>0)_loop2();return diffColors},distanceColorblind:function(lab1,lab2,type){var lab1Cb=this.simulate(lab1,type),lab2Cb=this.simulate(lab2,type);return this._cmcDistance(lab1Cb,lab2Cb,2,1)},compromiseDistance:function(lab1,lab2){var distances=[],coeffs=[];distances.push(this._cmcDistance(lab1,lab2,2,1)),coeffs.push(1e3);var types=["Protanope","Deuteranope","Tritanope"];types.forEach((function(type){var lab1Cb=this.simulate(lab1,type),lab2Cb=this.simulate(lab2,type);if(!lab1Cb.some(isNaN)&&!lab2Cb.some(isNaN)){var c;switch(type){case"Protanope":c=100;break;case"Deuteranope":c=500;break;case"Tritanope":c=1;break}distances.push(this._cmcDistance(lab1Cb,lab2Cb,2,1)),coeffs.push(c)}}));var total=0,count=0;return distances.forEach((function(d,i){total+=coeffs[i]*d,count+=coeffs[i]})),total/count},_cmcDistance:function(lab1,lab2,l,c){var L1=lab1[0],L2=lab2[0],a1=lab1[1],a2=lab2[1],b1=lab1[2],b2=lab2[2],C1=Math.sqrt(Math.pow(a1,2)+Math.pow(b1,2)),C2=Math.sqrt(Math.pow(a2,2)+Math.pow(b2,2)),deltaC=C1-C2,deltaL=L1-L2,deltaa=a1-a2,deltab=b1-b2,deltaH=Math.sqrt(Math.pow(deltaa,2)+Math.pow(deltab,2)+Math.pow(deltaC,2)),H1=Math.atan2(b1,a1)*(180/Math.PI);while(H1<0)H1+=360;var F=Math.sqrt(Math.pow(C1,4)/(Math.pow(C1,4)+1900)),T=H1>=164&&H1<=345?.56+Math.abs(.2*Math.cos(H1+168)):.36+Math.abs(.4*Math.cos(H1+35)),S_L=lab1[0]<16?.511:.040975*L1/(1+.01765*L1),S_C=.0638*C1/(1+.0131*C1)+.638,S_H=S_C*(F*T+1-F),result=Math.sqrt(Math.pow(deltaL/(l*S_L),2)+Math.pow(deltaC/(c*S_C),2)+Math.pow(deltaH/S_H,2));return result},_euclidianDistance:function(lab1,lab2){return Math.sqrt(Math.pow(lab1[0]-lab2[0],2)+Math.pow(lab1[1]-lab2[1],2)+Math.pow(lab1[2]-lab2[2],2))},getColorDistance:function(lab1,lab2,_type){var type=_type||"Default";return"Default"===type||"Euclidian"===type?this._euclidianDistance(lab1,lab2):"CMC"===type?this._cmcDistance(lab1,lab2,2,1):"Compromise"===type?this.compromiseDistance(lab1,lab2):this.distanceColorblind(lab1,lab2,type)},simulate:function(lab,type,_amount){
// WARNING: may return [NaN, NaN, NaN]
var amount=_amount||1,key=lab.join("-")+"-"+type+"-"+amount,cache=this.simulateCache[key];
// Cache
if(cache)return cache;
// Get data from type
var confuseX=this.confusionLines[type].x,confuseY=this.confusionLines[type].y,confuseM=this.confusionLines[type].m,confuseYint=this.confusionLines[type].yint,color=chroma_js__WEBPACK_IMPORTED_MODULE_7__.lab(lab[0],lab[1],lab[2]),sr=color.rgb()[0],sg=color.rgb()[1],sb=color.rgb()[2],dr=sr,dg=sg,db=sb,powR=Math.pow(sr,2.2),powG=Math.pow(sg,2.2),powB=Math.pow(sb,2.2),X=.412424*powR+.357579*powG+.180464*powB,Y=.212656*powR+.715158*powG+.0721856*powB,Z=.0193324*powR+.119193*powG+.950444*powB,chromaX=X/(X+Y+Z),chromaY=Y/(X+Y+Z),m=(chromaY-confuseY)/(chromaX-confuseX),yint=chromaY-chromaX*m,deviateX=(confuseYint-yint)/(m-confuseM),deviateY=m*deviateX+yint;
// Compute the simulated color's XYZ coords
X=deviateX*Y/deviateY,Z=(1-(deviateX+deviateY))*Y/deviateY;
// Neutral grey calculated from luminance (in D65)
var neutralX=.312713*Y/.329016,neutralZ=.358271*Y/.329016,diffX=neutralX-X,diffZ=neutralZ-Z,diffR=3.24071*diffX+-.498571*diffZ,diffG=-.969258*diffX+.0415557*diffZ,diffB=.0556352*diffX+1.05707*diffZ;
// Convert to RGB color space
dr=3.24071*X+-1.53726*Y+-.498571*Z,// XYZ->RGB (sRGB:D65)
dg=-.969258*X+1.87599*Y+.0415557*Z,db=.0556352*X+-.203996*Y+1.05707*Z;
// Compensate simulated color towards a neutral fit in RGB space
var fitR=((dr<0?0:1)-dr)/diffR,fitG=((dg<0?0:1)-dg)/diffG,fitB=((db<0?0:1)-db)/diffB,adjust=Math.max(
// highest value
fitR>1||fitR<0?0:fitR,fitG>1||fitG<0?0:fitG,fitB>1||fitB<0?0:fitB);
// Shift proportional to the greatest shift
dr+=adjust*diffR,dg+=adjust*diffG,db+=adjust*diffB,
// Apply gamma correction
dr=Math.pow(dr,1/2.2),dg=Math.pow(dg,1/2.2),db=Math.pow(db,1/2.2),
// Anomylize colors
dr=sr*(1-amount)+dr*amount,dg=sg*(1-amount)+dg*amount,db=sb*(1-amount)+db*amount;var dcolor=chroma_js__WEBPACK_IMPORTED_MODULE_7__.rgb(dr,dg,db),result=dcolor.lab();return this.simulateCache[key]=result,result},xyz_rgb:function(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))},lab_xyz:function(t,LAB_CONSTANTS){return t>LAB_CONSTANTS.t1?t*t*t:LAB_CONSTANTS.t2*(t-LAB_CONSTANTS.t0)},validateLab:function(lab){
// Code from Chroma.js 2016
var LAB_CONSTANTS={
// Corresponds roughly to RGB brighter/darker
Kn:18,
// D65 standard referent
Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,
// 4 / 29
t1:.206896552,
// 6 / 29
t2:.12841855,
// 3 * t1 * t1
t3:.008856452},l=lab[0],a=lab[1],b=lab[2],y=(l+16)/116,x=isNaN(a)?y:y+a/500,z=isNaN(b)?y:y-b/200;y=LAB_CONSTANTS.Yn*this.lab_xyz(y,LAB_CONSTANTS),x=LAB_CONSTANTS.Xn*this.lab_xyz(x,LAB_CONSTANTS),z=LAB_CONSTANTS.Zn*this.lab_xyz(z,LAB_CONSTANTS);var r=this.xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z),g=this.xyz_rgb(-.969266*x+1.8760108*y+.041556*z);// D65 -> sRGB
return b=this.xyz_rgb(.0556434*x-.2040259*y+1.0572252*z),r>=0&&r<=255&&g>=0&&g<=255&&b>=0&&b<=255}}},
/***/595915:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _facilio_router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(329435);
/* harmony default export */__webpack_exports__.Z={computed:{subheaderMenu:function(){var appName=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_0__/* .getApp */.wx)().linkName;return appName="newapp"===appName?"app":appName,[{label:"Category",path:{path:"/".concat(appName,"/setup/workordersettings/category")}},{label:"Priority",path:{path:"/".concat(appName,"/setup/workordersettings/priority")}},{label:"Types",path:{path:"/".concat(appName,"/setup/workordersettings/types")}}]}}}},
/***/683038:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(488478),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(548534),_facilio_api__WEBPACK_IMPORTED_MODULE_15__=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(843843),__webpack_require__(947522),__webpack_require__(32284)),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(990260);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={props:["rule","mode","configName","module"],data:function(){return{notifConfig:{"Approve Workrequest_11":{options:[Fields.REQUESTER],module:Modules.WORKREQUEST,isUsersEditable:!0},"Reject Workrequest_11":{options:[Fields.REQUESTER],module:Modules.WORKREQUEST,isUsersEditable:!0},"Notify Requester on Closing Workorder_11":{options:[Fields.REQUESTER],module:Modules.WORKORDER,isUsersEditable:!0},"Technician Closes Workorder_11":{options:[Fields.ASSIGNED_TO,Fields.ASSIGNED_BY],module:Modules.WORKORDER},"Assign Tech_11":{options:[Fields.ASSIGNED_TO],module:Modules.WORKORDER,isUsersEditable:!0},"Assign Team_11":{options:[Fields.ASSIGNED_GROUP],module:Modules.WORKORDER,isUsersEditable:!0},"Add Comment_11":{options:[Fields.ASSIGNED_TO,Fields.ASSIGNED_BY],module:Modules.WORKORDER},"Technician Resolves Workorder_11":{options:[Fields.ASSIGNED_TO,Fields.ASSIGNED_BY],module:Modules.WORKORDER},"Workorder on hold_11":{options:[Fields.ASSIGNED_BY],module:Modules.WORKORDER},Approval:{options:[Fields.REQUESTED_BY,Fields.REQUESTER],module:Modules.WORKORDER}},sysCreatedByUserOption:{label:"Created By",field:Fields.SYS_CREATED_BY},field:{mail:"email",primaryEmail:"primaryContactEmail",primaryPhone:"primaryContactPhone",sms:"phone",web:"id",mobile:"id"},tenantFields:[],vendorsFields:[],userFields:[],clientFields:[],audienceFields:[]}},created:function(){var _this=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(){var module,_yield$API$get,data,fields,userFields,requesterField,peopleFields,tenantFields,clientFields,vendorsFields;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return module=_this.module,_context.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_15__/* .API */.bl.get("/module/metafields?moduleName=".concat(module));case 3:_yield$API$get=_context.sent,data=_yield$API$get.data,fields=_this.$getProperty(data,"meta.fields",[]),fields=fields.filter((function(field){var displayTypeEnum=_this.$getProperty(field,"displayType._name");return"MULTI_LOOKUP_SIMPLE"!==displayTypeEnum})),userFields=fields.filter((function(field){var _field$lookupModule=field.lookupModule,_field$lookupModule2=void 0===_field$lookupModule?{}:_field$lookupModule,lookupModulename=_field$lookupModule2.name;return["users","groups"].includes(lookupModulename)})),"workorder"===module&&(requesterField=fields.find((function(field){var _ref=field||{},name=_ref.name;return"requester"===name})),userFields.push(requesterField)),peopleFields=fields.filter((function(field){var _field$lookupModule3=field.lookupModule,_field$lookupModule4=void 0===_field$lookupModule3?{}:_field$lookupModule3,lookupModulename=_field$lookupModule4.name;return"people"===lookupModulename})),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_16__/* .isEmpty */.xb)(peopleFields)||(userFields=[].concat((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(peopleFields),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(userFields))),_this.userFields=userFields,tenantFields=fields.filter((function(field){var _field$lookupModule5=field.lookupModule,_field$lookupModule6=void 0===_field$lookupModule5?{}:_field$lookupModule5,lookupModulename=_field$lookupModule6.name;return"tenant"===lookupModulename})),_this.tenantFields=tenantFields,clientFields=fields.filter((function(field){var _field$lookupModule7=field.lookupModule,_field$lookupModule8=void 0===_field$lookupModule7?{}:_field$lookupModule7,lookupModulename=_field$lookupModule8.name;return"client"===lookupModulename})),_this.clientFields=clientFields,vendorsFields=fields.filter((function(field){var _field$lookupModule9=field.lookupModule,_field$lookupModule10=void 0===_field$lookupModule9?{}:_field$lookupModule9,lookupModulename=_field$lookupModule10.name;return"vendors"===lookupModulename})),_this.vendorsFields=vendorsFields,_this.audienceFields=fields.filter((function(field){var _field$lookupModule11=field.lookupModule,_field$lookupModule12=void 0===_field$lookupModule11?{}:_field$lookupModule11,lookupModulename=_field$lookupModule12.name;return"audience"===lookupModulename}));case 19:case"end":return _context.stop()}}),_callee)})))()},computed:{users:function(){return this.$store.state.users},userList:function(){if(this.users){var users=this.$helpers.cloneObject(this.users).filter((function(user){return user.inviteAcceptStatus})).map((function(user){return{label:user.name,value:user.id,displayLabel:user.name+" ("+user.email+")"}})),usersGroups={label:"",options:users};return[usersGroups].concat((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(this.userTemplateOptions))}return[]},configRuleName:function(){return this.configName||(this.rule?this.rule.name+"_"+this.rule.ruleType:"")},userTemplateOptions:function(){var _this2=this,options=[];if(!this.rule||!this.notifConfig.hasOwnProperty(this.configRuleName)){var usersGroup=this.constructOptionGroup(this.userFields,this.getValue,"Fields");if(options.push(usersGroup),"mobile"!==this.mode){if(this.$helpers.isLicenseEnabled("VENDOR")){var vendorGroup=this.constructOptionGroup(this.vendorsFields,this.getPrimaryEmailValue,"Vendors");options.push(vendorGroup)}if(this.$helpers.isLicenseEnabled("TENANTS")){var tenantGroup=this.constructOptionGroup(this.tenantFields,this.getPrimaryEmailValue,"Tenants");options.push(tenantGroup)}if(this.$helpers.isLicenseEnabled("CLIENT")){var clientGroup=this.constructOptionGroup(this.clientFields,this.getPrimaryEmailValue,"Client");options.push(clientGroup)}var audienceGroup=this.constructOptionGroup(this.audienceFields,this.getFieldNameValue,"Audience");options.push(audienceGroup)}if("quote"===this.module){var fieldsGroupIndex=options.findIndex((function(groups){return"Fields"===groups.label})),createdByUser={label:"Fields",options:options[fieldsGroupIndex].options?[].concat((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(options[fieldsGroupIndex].options),[{label:this.sysCreatedByUserOption.label,value:this.getValue(this.sysCreatedByUserOption,this.module)}]):[{label:this.sysCreatedByUserOption.label,value:this.getValue(this.sysCreatedByUserOption,this.module)}],isGroup:!0};options.splice(fieldsGroupIndex,1,createdByUser)}return options}var conf=this.notifConfig[this.configRuleName];return options=this.userFields.filter((function(user){return conf.options.includes(user.field)})).map((function(user){return{label:user.label,value:_this2.getValue(user,conf.module)}})),options},isUserNonEditable:function(){return this.rule&&this.notifConfig[this.configRuleName]&&!1===this.notifConfig[this.configRuleName].isUsersEditable},isDefaultRule:function(){return this.rule&&this.notifConfig.hasOwnProperty(this.configRuleName)}},methods:{constructOptionGroup:function(fields,getValue,groupLabel){var _this3=this,fieldsList=[];return fields.forEach((function(field){var options={label:field.displayName,value:getValue(field,_this3.module)};fieldsList.push(options)})),{label:groupLabel,options:fieldsList,isGroup:!0}},getValue:function(user,module){return"${"+(user.value?user.value:module+"."+(user.field||user.name))+"."+this.field[this.mode]+":-}"},getPrimaryEmailValue:function(user,module){return"${"+(user.value?user.value:module+"."+(user.field||user.name))+"."+this.field["mail"===this.mode?"primaryEmail":"primaryPhone"]+":-}"},getFieldNameValue:function(field,module){var _ref2=field||{},name=_ref2.name,lookupModule=_ref2.lookupModule,_ref3=lookupModule||{},lookupModuleName=_ref3.name;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_16__/* .isEmpty */.xb)(name)?module:"".concat(name,".notif_mod_").concat(lookupModuleName)}}};var Modules={WORKORDER:"workorder",WORKREQUEST:"workorderrequest",ALARM:"alarm"},Fields={REQUESTER:"requester",REQUESTED_BY:"requestedBy",ASSIGNED_BY:"assignedBy",ASSIGNED_TO:"assignedTo",ASSIGNED_GROUP:"assignmentGroup",VENDOR:"vendor",TENANT:"tenant",SYS_CREATED_BY:"sysCreatedBy"}},
/***/351343:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */K:function(){/* binding */return ClassificationListModel}
/* harmony export */});
/* harmony import */var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_class2,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(482482),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(424590),_facilio_data__WEBPACK_IMPORTED_MODULE_13__=(__webpack_require__(177377),__webpack_require__(634338),__webpack_require__(480390)),_facilio_api__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(32284),dlv__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_12__),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(990260),ClassificationListModel=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_13__/* .prop */.vg)({primary:!0}),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_13__/* .prop */.vg)(),_dec3=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_13__/* .prop */.vg)(),_dec4=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_13__/* .prop */.vg)(),_dec5=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_13__/* .prop */.vg)({serialize:null}),_dec6=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_13__/* .prop */.vg)(),_dec7=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_13__/* .prop */.vg)({serialize:null}),_dec8=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_13__/* .prop */.vg)(),_class2=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(ClassificationListModel,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(ClassificationListModel);function ClassificationListModel(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(this,ClassificationListModel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"id",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"name",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"description",_descriptor3,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"appliedModuleIds",_descriptor4,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"hasChild",_descriptor5,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"parentClassification",_descriptor6,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"classificationPath",_descriptor7,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"attributes",_descriptor8,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(ClassificationListModel,[{key:"saveRecord",value:function(){var _saveRecord=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(serializedData){var _ref,id,moduleName,response,_response,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_ref=serializedData||{},id=_ref.id,moduleName="classification",response=[],!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(id)){_context.next=9;break}return _context.next=6,_facilio_api__WEBPACK_IMPORTED_MODULE_11__/* .API */.bl.createRecord(moduleName,{data:serializedData});case 6:response=_context.sent,_context.next=12;break;case 9:return _context.next=11,_facilio_api__WEBPACK_IMPORTED_MODULE_11__/* .API */.bl.updateRecord(moduleName,{id:id,data:serializedData});case 11:response=_context.sent;case 12:if(_response=response,error=_response.error,!error){_context.next=15;break}throw error;case 15:case"end":return _context.stop()}}),_callee)})));function saveRecord(_x){return _saveRecord.apply(this,arguments)}return saveRecord}()}],[{key:"fetchAllRecords",value:function(){var _fetchAllRecords=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(payload){var _yield$API$fetchAll,error,list,meta;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_11__/* .API */.bl.fetchAll(this.moduleName,payload);case 2:if(_yield$API$fetchAll=_context2.sent,error=_yield$API$fetchAll.error,list=_yield$API$fetchAll.list,meta=_yield$API$fetchAll.meta,!error){_context2.next=10;break}throw error;case 10:return this.totalCount=dlv__WEBPACK_IMPORTED_MODULE_12___default()(meta,"pagination.totalCount",null),_context2.abrupt("return",{data:list||[]});case 12:case"end":return _context2.stop()}}),_callee2,this)})));function fetchAllRecords(_x2){return _fetchAllRecords.apply(this,arguments)}return fetchAllRecords}()},{key:"fetchRecord",value:function(){var _fetchRecord=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee3(payload){var _yield$API$fetchRecor,classification,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_11__/* .API */.bl.fetchRecord(this.moduleName,payload);case 2:if(_yield$API$fetchRecor=_context3.sent,classification=_yield$API$fetchRecor.classification,error=_yield$API$fetchRecor.error,!error){_context3.next=9;break}throw error;case 9:return _context3.abrupt("return",{data:classification||{}});case 10:case"end":return _context3.stop()}}),_callee3,this)})));function fetchRecord(_x3){return _fetchRecord.apply(this,arguments)}return fetchRecord}()}]),ClassificationListModel}(_facilio_data__WEBPACK_IMPORTED_MODULE_13__/* .SetupData */.vW),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */.Z)(_class2,"totalCount",null),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */.Z)(_class2,"moduleName","classification"),_class=_class2,_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"id",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"name",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"description",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"appliedModuleIds",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_descriptor5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"hasChild",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"parentClassification",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"classificationPath",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"attributes",[_dec8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_class);
/* harmony import */},
/***/746095:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */Pw:function(){/* binding */return getActionType},
/* harmony export */Qv:function(){/* binding */return POSITION_LABELS},
/* harmony export */Rz:function(){/* binding */return POSITION_TYPE},
/* harmony export */aI:function(){/* binding */return ACTION_TYPES}
/* harmony export */});
/* harmony import */var _POSITION_LABELS,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(482482),dlv__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_1__),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(990260);
/* harmony import */function getActionType(button){var formModuleName=dlv__WEBPACK_IMPORTED_MODULE_1___default()(button,"formModuleName"),buttonType=dlv__WEBPACK_IMPORTED_MODULE_1___default()(button,"buttonType");if(1===buttonType){if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(formModuleName)&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(button.formId))return ACTION_TYPES.CREATE_RECORD;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(formModuleName)&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(button.formId))return ACTION_TYPES.UPDATE_RECORD;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(button.formId))return ACTION_TYPES.OTHER_ACTIONS}else if(2===buttonType&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_2__/* .isEmpty */.xb)(button.config)){if(button.config.actionType===ACTION_TYPES.REDIRECT_URL)return ACTION_TYPES.REDIRECT_URL;if("Form"===button.config.navigateTo)return ACTION_TYPES.OPEN_FORM;if("Summary"===button.config.navigateTo)return ACTION_TYPES.OPEN_SUMMARY;if(button.config.actionType===ACTION_TYPES.CONNECTED_APPS)return ACTION_TYPES.CONNECTED_APPS}}var ACTION_TYPES={CREATE_RECORD:"Create Record",UPDATE_RECORD:"Update Record",REDIRECT_URL:"Redirect URL",CONNECTED_APPS:"Connected App",OPEN_FORM:"Open Form",OPEN_SUMMARY:"Open Summary",OTHER_ACTIONS:"Other Actions"},POSITION_TYPE={SUMMARY:1,LIST_ITEM:2,LIST_BAR:3,LIST_TOP:4},POSITION_LABELS=(_POSITION_LABELS={},(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(_POSITION_LABELS,POSITION_TYPE.SUMMARY,"Summary Page"),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(_POSITION_LABELS,POSITION_TYPE.LIST_ITEM,"List Page - Each Record"),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(_POSITION_LABELS,POSITION_TYPE.LIST_BAR,"List Page - Bulk Actions"),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(_POSITION_LABELS,POSITION_TYPE.LIST_TOP,"List Page - Top Bar"),_POSITION_LABELS)},
/***/793428:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */ik:function(){/* binding */return DEPRECIATION_TYPES},
/* harmony export */u5:function(){/* binding */return QUARTERLY_FREQUENCY},
/* harmony export */ze:function(){/* binding */return FREQUENCY_TYPES}
/* harmony export */});var DEPRECIATION_TYPES={1:"Straight Line",2:"Double Declining Balance"},FREQUENCY_TYPES={MONTHLY:{label:"Monthly",id:1},QUARTERLY:{label:"Quarterly",id:2},HALFYEARLY:{label:"Half Yearly",id:3},YEARLY:{label:"Yearly",id:4}},QUARTERLY_FREQUENCY={FIRSTHALFYEAR:[1,2],SECONDHALFYEAR:[3,4]}},
/***/580066:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */I:function(){/* binding */return FormValidation}
/* harmony export */});
/* harmony import */var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(482482),__webpack_require__(424590)),_facilio_data__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__(177377),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(821057),__webpack_require__(480390)),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(990260),_facilio_api__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(32284),FormValidation=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .prop */.vg)({primary:!0}),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .prop */.vg)(),_dec3=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .prop */.vg)(),_dec4=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .prop */.vg)(),_dec5=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .prop */.vg)(),_dec6=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .prop */.vg)({deserialize:function(validation){var _validation$errorMess,_validation$errorMess2,_validation$errorMess3;return{errorMessagePlaceHolderScript:{isV2Script:(null===validation||void 0===validation||null===(_validation$errorMess=validation.errorMessagePlaceHolderScript)||void 0===_validation$errorMess?void 0:_validation$errorMess.isV2Script)||!1,workflowV2String:(null===validation||void 0===validation||null===(_validation$errorMess2=validation.errorMessagePlaceHolderScript)||void 0===_validation$errorMess2?void 0:_validation$errorMess2.workflowV2String)||"",id:(null===validation||void 0===validation||null===(_validation$errorMess3=validation.errorMessagePlaceHolderScript)||void 0===_validation$errorMess3?void 0:_validation$errorMess3.id)||null}}},serialize:function(placeHolderScript){var _ref=placeHolderScript||{},workflowV2String=_ref.workflowV2String;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_15__/* .isEmpty */.xb)(workflowV2String)?{}:{errorMessagePlaceHolderScript:placeHolderScript}}}),_dec7=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .prop */.vg)({deserialize:function(validation){var _validation$namedCrit;return{namedCriteriaDisplayName:(null===validation||void 0===validation||null===(_validation$namedCrit=validation.namedCriteria)||void 0===_validation$namedCrit?void 0:_validation$namedCrit.name)||""}},serialize:null}),_class=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(FormValidation,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(FormValidation);function FormValidation(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(this,FormValidation);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"id",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"name",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"errorMessage",_descriptor3,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"namedCriteriaId",_descriptor4,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"parentId",_descriptor5,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"errorMessagePlaceHolderScript",_descriptor6,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"namedCriteriaDisplayName",_descriptor7,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(FormValidation,[{key:"saveRecord",value:function(){var _saveRecord=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(){var serializedData,_yield$API$post,data,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return serializedData=this.serialize(),_context.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_13__/* .API */.bl.post("v2/form/validationrule/add",{validationRule:serializedData});case 3:if(_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,!error){_context.next=10;break}throw new Error(error.message||"Error Occurred");case 10:return _context.abrupt("return",data.formValidationRuleResult||{});case 11:case"end":return _context.stop()}}),_callee,this)})));function saveRecord(){return _saveRecord.apply(this,arguments)}return saveRecord}()},{key:"patchUpdate",value:function(){var _patchUpdate=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(){var serializedData,_yield$API$put,data,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return serializedData=this.serialize(),_context2.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_13__/* .API */.bl.put("/v2/form/validationrule/update",{validationRule:serializedData});case 3:if(_yield$API$put=_context2.sent,data=_yield$API$put.data,error=_yield$API$put.error,!error){_context2.next=10;break}throw new Error(error.message||"Error Occurred");case 10:return _context2.abrupt("return",data.formValidationRuleResult||{});case 11:case"end":return _context2.stop()}}),_callee2,this)})));function patchUpdate(){return _patchUpdate.apply(this,arguments)}return patchUpdate}()}],[{key:"fetchAllRecords",value:function(){var _fetchAllRecords=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee3(payload){var _yield$API$get,data,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_13__/* .API */.bl.get("v2/form/validationrule/list",payload);case 2:if(_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error){_context3.next=9;break}throw new Error(error.message||"Error Occurred");case 9:return _context3.abrupt("return",{data:data.formValidationRuleContexts||[]});case 10:case"end":return _context3.stop()}}),_callee3)})));function fetchAllRecords(_x){return _fetchAllRecords.apply(this,arguments)}return fetchAllRecords}()},{key:"fetchRecord",value:function(){var _fetchRecord=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee4(payload){var _yield$API$get2,data,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_13__/* .API */.bl.get("v2/form/validationrule/get",payload);case 2:if(_yield$API$get2=_context4.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,!error){_context4.next=9;break}throw new Error(error.message||"Error Occurred");case 9:return _context4.abrupt("return",{data:data.formValidationRuleContext||{}});case 10:case"end":return _context4.stop()}}),_callee4)})));function fetchRecord(_x2){return _fetchRecord.apply(this,arguments)}return fetchRecord}()},{key:"deleteRecord",value:function(){var _deleteRecord=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee5(_ref2){var id,_yield$API$delete,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return id=_ref2.id,_context5.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_13__/* .API */.bl.delete("/v2/form/validationrule/delete",{id:id});case 3:if(_yield$API$delete=_context5.sent,error=_yield$API$delete.error,!error){_context5.next=7;break}throw new Error(error.message||"Error Occurred");case 7:case"end":return _context5.stop()}}),_callee5)})));function deleteRecord(_x3){return _deleteRecord.apply(this,arguments)}return deleteRecord}()}]),FormValidation}(_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .SetupData */.vW),_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"id",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"name",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"errorMessage",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"namedCriteriaId",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"parentId",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"errorMessagePlaceHolderScript",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isV2Script:!0,workflowV2String:""}}}),_descriptor7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"namedCriteriaDisplayName",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_class);
/* harmony import */},
/***/579959:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */A:function(){/* binding */return CurrencyListModel}
/* harmony export */});
/* harmony import */var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_descriptor9,_class2,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(482482),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(424590),_facilio_data__WEBPACK_IMPORTED_MODULE_16__=(__webpack_require__(177377),__webpack_require__(634338),__webpack_require__(821057),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(480390)),_facilio_api__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(32284),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(990260),CurrencyListModel=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .prop */.vg)({primary:!0}),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .prop */.vg)({serialize:null}),_dec3=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .prop */.vg)({serialize:null}),_dec4=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .prop */.vg)({deserialize:function(currency){return{exchangeRate:parseFloat(currency.exchangeRate)}},serialize:function(exchangeRate){return{exchangeRate:"".concat(exchangeRate)}}}),_dec5=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .prop */.vg)({serialize:null}),_dec6=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .prop */.vg)({serialize:null}),_dec7=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .prop */.vg)(),_dec8=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .prop */.vg)({serialize:null}),_dec9=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .prop */.vg)(),_class2=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(CurrencyListModel,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */.Z)(CurrencyListModel);function CurrencyListModel(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(this,CurrencyListModel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"id",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"displayName",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"displaySymbol",_descriptor3,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"exchangeRate",_descriptor4,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"sysModifiedBy",_descriptor5,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"status",_descriptor6,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"currencyCode",_descriptor7,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"baseCurrency",_descriptor8,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"decimalPlaces",_descriptor9,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(CurrencyListModel,[{key:"saveRecord",value:function(){var _saveRecord=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee(serializedData){var url;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return url="v2/multicurrency/addOrUpdate",_context.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_15__/* .API */.bl.post(url,{currency:serializedData});case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)})));function saveRecord(_x){return _saveRecord.apply(this,arguments)}return saveRecord}()},{key:"patchUpdate",value:function(){var _patchUpdate=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee2(payload){var url;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return url="v2/multicurrency/updateStatus",_context2.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_15__/* .API */.bl.post(url,payload);case 3:return _context2.abrupt("return",_context2.sent);case 4:case"end":return _context2.stop()}}),_callee2)})));function patchUpdate(_x2){return _patchUpdate.apply(this,arguments)}return patchUpdate}()}],[{key:"fetchAllRecords",value:function(){var _fetchAllRecords=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee3(payload){var url,_yield$API$get,error,data,result;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return url="v2/".concat(this.moduleName,"/list"),_context3.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_15__/* .API */.bl.get(url,payload);case 3:if(_yield$API$get=_context3.sent,error=_yield$API$get.error,data=_yield$API$get.data,!error){_context3.next=10;break}throw new Error(error.message||"Error Occurred");case 10:return result=((null===data||void 0===data?void 0:data.currencies)||[]).map((function(currency){var _currency=currency,sysModifiedBy=_currency.sysModifiedBy;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_18__/* .isEmpty */.xb)(sysModifiedBy)){var _modifiedBy$sysModifi,_ref=(null===data||void 0===data?void 0:data.supplements)||{},modifiedBy=_ref.sysModifiedBy;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_18__/* .isEmpty */.xb)(modifiedBy[sysModifiedBy]))currency=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},currency),{},{sysModifiedBy:null===(_modifiedBy$sysModifi=modifiedBy[sysModifiedBy])||void 0===_modifiedBy$sysModifi?void 0:_modifiedBy$sysModifi.name})}return currency})),_context3.abrupt("return",{data:result||{}});case 12:case"end":return _context3.stop()}}),_callee3,this)})));function fetchAllRecords(_x3){return _fetchAllRecords.apply(this,arguments)}return fetchAllRecords}()},{key:"fetchCount",value:function(){var _fetchCount=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee4(params){var url,_yield$API$get2,error,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return url="v2/multicurrency/list/count",_context4.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_15__/* .API */.bl.get(url,params);case 3:if(_yield$API$get2=_context4.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,!error){_context4.next=10;break}throw new Error(error.message||"Error Occurred");case 10:return _context4.abrupt("return",(null===data||void 0===data?void 0:data.count)||null);case 11:case"end":return _context4.stop()}}),_callee4)})));function fetchCount(_x4){return _fetchCount.apply(this,arguments)}return fetchCount}()},{key:"loadMetrics",value:function(){var _loadMetrics=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee5(){var _yield$API$get3,error,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_15__/* .API */.bl.get("v2/multicurrency/list/filter");case 2:if(_yield$API$get3=_context5.sent,error=_yield$API$get3.error,data=_yield$API$get3.data,!error){_context5.next=9;break}throw new Error(error.message||"Error Occurred");case 9:return _context5.abrupt("return",(null===data||void 0===data?void 0:data.currencies)||[]);case 10:case"end":return _context5.stop()}}),_callee5)})));function loadMetrics(){return _loadMetrics.apply(this,arguments)}return loadMetrics}()}]),CurrencyListModel}(_facilio_data__WEBPACK_IMPORTED_MODULE_16__/* .SetupData */.vW),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class2,"totalCount",null),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class2,"moduleName","multicurrency"),_class=_class2,_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"id",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"displayName",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"displaySymbol",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"exchangeRate",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_descriptor5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"sysModifiedBy",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"status",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"currencyCode",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"baseCurrency",[_dec8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor9=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"decimalPlaces",[_dec9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_class);
/* harmony import */},
/***/15426:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */Dg:function(){/* binding */return getCurrencyForCurrencyCode},
/* harmony export */Jg:function(){/* binding */return getCurrencyInDecimalValue},
/* harmony export */en:function(){/* binding */return getMetaFieldMapForModules},
/* harmony export */eu:function(){/* binding */return checkForMultiCurrency},
/* harmony export */sd:function(){/* binding */return getCalculatedCurrencyValue}
/* harmony export */});
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(897389),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(990260)),src_store_index_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(572602),_facilio_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(32284),metaFieldMap={},getCurrencyInDecimalValue=function(value,currentCurrency){var _ref=currentCurrency||{},decimalPlaces=_ref.decimalPlaces;if(0===decimalPlaces||value%1===0)return parseInt(value);if(decimalPlaces>0&&value%1){var decimalCount=value.toString().split(".")[1].length;return decimalCount>decimalPlaces?parseFloat(value).toFixed(decimalPlaces):value}return value},getCalculatedCurrencyValue=function(rateObj,value){var _ref2=rateObj||{},exchangeRate=_ref2.exchangeRate,oldExchangeRate=_ref2.oldExchangeRate,isBaseCurrencyCode=_ref2.isBaseCurrencyCode,isPrevBaseCurrencyCode=_ref2.isPrevBaseCurrencyCode,isValid=!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_9__/* .isEmpty */.xb)(oldExchangeRate);return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_9__/* .isEmpty */.xb)(value)||(isBaseCurrencyCode?value=isValid?value/oldExchangeRate:value:isPrevBaseCurrencyCode?value*=exchangeRate:isValid&&(value/=oldExchangeRate,value*=exchangeRate)),value},getCurrencyForCurrencyCode=function(currencyCode){var currencies=src_store_index_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */.Z.state.activeCurrencies,currency=(currencies||[]).find((function(currency){return currencyCode===currency.currencyCode}));return null===currency||void 0===currency?void 0:currency.displaySymbol},getMetaFieldMapForModules=function(){var _ref3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(moduleName){var _yield$API$get,error,data,_ref4,meta,_ref5,fields,fieldMap;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_9__/* .isEmpty */.xb)(metaFieldMap[moduleName])){_context.next=2;break}return _context.abrupt("return",metaFieldMap[moduleName]);case 2:return _context.next=4,_facilio_api__WEBPACK_IMPORTED_MODULE_8__/* .API */.bl.get("/module/metafields",{moduleName:moduleName});case 4:if(_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error){_context.next=13;break}return _ref4=data||{},meta=_ref4.meta,_ref5=meta||{},fields=_ref5.fields,fieldMap=(fields||[]).reduce((function(fieldMap,fld){var _ref6=fld||{},displayType=_ref6.displayType,name=_ref6.name,_ref7=displayType||{},_name=_ref7._name;return fieldMap[name]=_name,fieldMap}),{}),metaFieldMap[moduleName]=fieldMap,_context.abrupt("return",fieldMap);case 13:return _context.abrupt("return",{});case 14:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref3.apply(this,arguments)}}(),checkForMultiCurrency=function(fieldName,metaFieldTypeMap){return"MULTI_CURRENCY"===(null===metaFieldTypeMap||void 0===metaFieldTypeMap?void 0:metaFieldTypeMap[fieldName])};
/* harmony import */},
/***/98608:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */$7:function(){/* binding */return monthOfQuarterMap},
/* harmony export */$o:function(){/* binding */return skipEveryMap},
/* harmony export */AJ:function(){/* binding */return basedOnMap},
/* harmony export */C3:function(){/* binding */return monthOfHalfMap},
/* harmony export */MG:function(){/* binding */return weekListMap},
/* harmony export */j2:function(){/* binding */return frequencyTypes},
/* harmony export */lI:function(){/* binding */return weekDaysMap},
/* harmony export */nq:function(){/* binding */return fullMonthsMap},
/* harmony export */wF:function(){/* binding */return frequencyTypeMap}
/* harmony export */});var frequencyTypes={DO_NOT_REPEAT:0,DAILY:1,WEEKLY:2,MONTHLY:3,QUARTERLY:4,HALF_YEARLY:5,ANNUALLY:6},weekDaysMap={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",7:"Sunday"},weekListMap={1:"First",2:"Second",3:"Third",4:"Fourth",5:"Last"},fullMonthsMap={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},frequencyTypeMap={0:"Do not repeat",1:"Daily",2:"Weekly",3:"Monthly",4:"Quarterly",5:"Half Yearly",6:"Annually"},monthOfQuarterMap={1:"January / April / July / October",2:"February / May / August / November",3:"March / June / September / December"},monthOfHalfMap={1:"January / July",2:"February / August",3:"March / September",4:"April / October",5:"May / November",6:"June / December"},basedOnMap={0:"Date",1:"Week"},skipEveryMap=[{label:"Do not skip",value:-1},{label:"Second Cycle",value:2},{label:"Third Cycle",value:3},{label:"Fourth Cycle",value:4},{label:"Fifth Cycle",value:5},{label:"Sixth Cycle",value:6},{label:"Seventh Cycle",value:7},{label:"Eighth Cycle",value:8},{label:"Ninth Cycle",value:9},{label:"Tenth Cycle",value:10}]},
/***/655268:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */f:function(){/* binding */return ScoreConditionManager}
/* harmony export */});
/* harmony import */var _dec,_dec2,_dec3,_dec4,_dec5,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(482482),__webpack_require__(424590)),_facilio_data__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(177377),__webpack_require__(634338),__webpack_require__(480390)),ScoreConditionManager=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_9__/* .prop */.vg)({primary:!0}),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_9__/* .prop */.vg)(),_dec3=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_9__/* .prop */.vg)(),_dec4=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_9__/* .prop */.vg)(),_dec5=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_9__/* .prop */.vg)(),_class=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(ScoreConditionManager,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(ScoreConditionManager);function ScoreConditionManager(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(this,ScoreConditionManager);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this),"id",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this),"namedCriteriaId",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this),"namedCriteria",_descriptor3,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this),"type",_descriptor4,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this),"weightage",_descriptor5,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(ScoreConditionManager)}(_facilio_data__WEBPACK_IMPORTED_MODULE_9__/* .SetupData */.vW),_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(_class.prototype,"id",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(_class.prototype,"namedCriteriaId",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(_class.prototype,"namedCriteria",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_descriptor4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(_class.prototype,"type",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_descriptor5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(_class.prototype,"weightage",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_class);
/* harmony import */},
/***/225615:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */O:function(){/* binding */return ScoreDependency}
/* harmony export */});
/* harmony import */var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_descriptor9,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(482482),__webpack_require__(424590)),_facilio_data__WEBPACK_IMPORTED_MODULE_19__=(__webpack_require__(177377),__webpack_require__(634338),__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(821057),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(480390)),_facilio_api__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(32284),util_validation__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(586529),nodeTypes={MODULE:2,SUB_MODULE:1},ScoreDependency=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .prop */.vg)(),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .prop */.vg)(),_dec3=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .prop */.vg)(),_dec4=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .prop */.vg)(),_dec5=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .prop */.vg)(),_dec6=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .prop */.vg)({serialize:function(value,instance){return instance.nodeType===nodeTypes.SUB_MODULE?{fieldId:value}:{}}}),_dec7=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .prop */.vg)({serialize:function(value,instance){return instance.nodeType===nodeTypes.SUB_MODULE?{fieldModuleId:value}:{}}}),_dec8=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .prop */.vg)({serialize:function(value,instance){return instance.nodeType===nodeTypes.SUB_MODULE?{shouldBePropagated:value}:{}}}),_dec9=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .prop */.vg)({serialize:function(value,instance){return instance.nodeType===nodeTypes.SUB_MODULE?{criteria:instance.serializeCriteria(value)}:{}}}),_class=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(ScoreDependency,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(ScoreDependency);function ScoreDependency(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(this,ScoreDependency);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"name",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"type",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"weightage",_descriptor3,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"nodeType",_descriptor4,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"scoreRuleId",_descriptor5,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"fieldId",_descriptor6,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"fieldModuleId",_descriptor7,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"shouldBePropagated",_descriptor8,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"criteria",_descriptor9,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(ScoreDependency,[{key:"serializeCriteria",value:function(criteria){for(var _loop=function(){var condition=_Object$keys[_i],hasValidFieldName=Object.prototype.hasOwnProperty.call(criteria.conditions[condition],"fieldName")&&!(0,util_validation__WEBPACK_IMPORTED_MODULE_18__/* .isEmpty */.xb)(criteria.conditions[condition].fieldName);if(hasValidFieldName){var discardKeys=["valueArray","operatorsDataType","operatorLabel","operator"];discardKeys.forEach((function(key){delete criteria.conditions[condition][key]}))}else delete criteria.conditions[condition]},_i=0,_Object$keys=Object.keys(criteria.conditions);_i<_Object$keys.length;_i++)_loop();return criteria&&criteria.conditions&&0===Object.keys(criteria.conditions).length&&(criteria=null),criteria}}],[{key:"loadSubModuleFieldOptions",value:function(){var _loadSubModuleFieldOptions=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(moduleName,extendedModuleIds){var _yield$API$get,error,data,_ref,fields,lookupFields,currentModuleLookups,firstLookup;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_17__/* .API */.bl.get("/module/meta",{moduleName:moduleName});case 2:if(_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,!error){_context.next=9;break}throw new Error(error.message||"Error Occurred");case 9:return _ref=data.meta||{},fields=_ref.fields,lookupFields=fields.filter((function(f){return 7===f.dataType})),//lookup type
currentModuleLookups=lookupFields.filter((function(field){return extendedModuleIds.includes(field.lookupModuleId)})),firstLookup=(0,util_validation__WEBPACK_IMPORTED_MODULE_18__/* .isEmpty */.xb)(currentModuleLookups)?null:currentModuleLookups[0].id,this.fieldId=firstLookup,_context.abrupt("return",currentModuleLookups);case 15:case"end":return _context.stop()}}),_callee,this)})));function loadSubModuleFieldOptions(_x,_x2){return _loadSubModuleFieldOptions.apply(this,arguments)}return loadSubModuleFieldOptions}()},{key:"getSubModulesList",value:function(){var _getSubModulesList=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(moduleName){var _yield$API$get2,error,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_17__/* .API */.bl.get("/v2/forms/subFormModules",{moduleName:moduleName});case 2:if(_yield$API$get2=_context2.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,!error){_context2.next=9;break}throw new Error(error.message||"Error Occurred");case 9:return _context2.abrupt("return",data.modules||[]);case 10:case"end":return _context2.stop()}}),_callee2)})));function getSubModulesList(_x3){return _getSubModulesList.apply(this,arguments)}return getSubModulesList}()}]),ScoreDependency}(_facilio_data__WEBPACK_IMPORTED_MODULE_19__/* .SetupData */.vW),_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"name",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"type",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),_descriptor3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"weightage",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"nodeType",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return nodeTypes.MODULE}}),_descriptor5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"scoreRuleId",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"fieldId",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"fieldModuleId",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"shouldBePropagated",[_dec8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor9=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"criteria",[_dec9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_class);
/* harmony import */},
/***/398780:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{s:function(){/* binding */return ScoringRule}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var _dec,_dec2,_dec3,_dec4,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,ScoringRuleModel_dec,ScoringRuleModel_dec2,ScoringRuleModel_dec3,ScoringRuleModel_dec4,_dec5,ScoringRuleModel_class,ScoringRuleModel_descriptor,ScoringRuleModel_descriptor2,ScoringRuleModel_descriptor3,ScoringRuleModel_descriptor4,_descriptor5,regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),initializerDefineProperty=__webpack_require__(900251),classCallCheck=__webpack_require__(513087),createClass=__webpack_require__(862833),assertThisInitialized=__webpack_require__(352417),inherits=__webpack_require__(793806),createSuper=__webpack_require__(624343),applyDecoratedDescriptor=(__webpack_require__(482482),__webpack_require__(424590)),data=(__webpack_require__(177377),__webpack_require__(434284),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(634338),__webpack_require__(821057),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(947522),__webpack_require__(480390)),api=__webpack_require__(32284),validation=__webpack_require__(586529),ConditionManagerModel=__webpack_require__(655268),DependencyModel=__webpack_require__(225615),scoreTypes={CONDITION:1,DEPENDENCY:2},ScoreContext=(_dec=(0,data/* prop */.vg)(),_dec2=(0,data/* prop */.vg)({deserialize:function(scoreContext){return{baseScoringContexts:scoreContext.baseScoringContexts.map((function(baseContext){var type=baseContext.type;return type===scoreTypes.CONDITION?new ConditionManagerModel/* ScoreConditionManager */.f(baseContext):new DependencyModel/* ScoreDependency */.O(baseContext)}))}},serialize:function(baseScoringContexts){return{baseScoringContexts:baseScoringContexts.map((function(baseContext){return baseContext.serialize()}))}}}),_dec3=(0,data/* prop */.vg)(),_dec4=(0,data/* prop */.vg)({deserialize:function(context){return{namedCriteriaId:context.namedCriteriaId,iscriteriaEnable:!(0,validation/* isEmpty */.xb)(context.namedCriteriaId)}},serialize:function(value){return{namedCriteriaId:(0,validation/* isEmpty */.xb)(value)?-1:value}}}),_class=function(_SetupData){(0,inherits/* default */.Z)(ScoreContext,_SetupData);var _super=(0,createSuper/* default */.Z)(ScoreContext);function ScoreContext(){var _this;(0,classCallCheck/* default */.Z)(this,ScoreContext);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,initializerDefineProperty/* default */.Z)((0,assertThisInitialized/* default */.Z)(_this),"name",_descriptor,(0,assertThisInitialized/* default */.Z)(_this)),(0,initializerDefineProperty/* default */.Z)((0,assertThisInitialized/* default */.Z)(_this),"baseScoringContexts",_descriptor2,(0,assertThisInitialized/* default */.Z)(_this)),(0,initializerDefineProperty/* default */.Z)((0,assertThisInitialized/* default */.Z)(_this),"order",_descriptor3,(0,assertThisInitialized/* default */.Z)(_this)),(0,initializerDefineProperty/* default */.Z)((0,assertThisInitialized/* default */.Z)(_this),"namedCriteriaId",_descriptor4,(0,assertThisInitialized/* default */.Z)(_this)),_this}return(0,createClass/* default */.Z)(ScoreContext,[{key:"getGroupTotalWeightage",value:function(){var totalWeightage=(this.baseScoringContexts||[]).reduce((function(total,scoreContext){var _ref=scoreContext||{},_ref$weightage=_ref.weightage,weightage=void 0===_ref$weightage?0:_ref$weightage;return total+=parseInt(weightage),total}),0);return totalWeightage}},{key:"saveDependency",value:function(dependency,dependencyIdx){(0,validation/* isEmpty */.xb)(dependencyIdx)?this.baseScoringContexts.push(dependency):this.baseScoringContexts.splice(dependencyIdx,1,dependency)}},{key:"removeDependency",value:function(dependencyIdx){this.baseScoringContexts.splice(dependencyIdx,1)}},{key:"saveCondition",value:function(condition,criteriaIdx){(0,validation/* isEmpty */.xb)(criteriaIdx)?this.baseScoringContexts.push(condition):this.baseScoringContexts.splice(criteriaIdx,1,condition)}},{key:"removeCondition",value:function(criteriaIdx){this.baseScoringContexts.splice(criteriaIdx,1)}}]),ScoreContext}(data/* SetupData */.vW),_descriptor=(0,applyDecoratedDescriptor/* default */.Z)(_class.prototype,"name",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor2=(0,applyDecoratedDescriptor/* default */.Z)(_class.prototype,"baseScoringContexts",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_descriptor3=(0,applyDecoratedDescriptor/* default */.Z)(_class.prototype,"order",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_descriptor4=(0,applyDecoratedDescriptor/* default */.Z)(_class.prototype,"namedCriteriaId",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_class),ScoringRule=(ScoringRuleModel_dec=(0,data/* prop */.vg)({deserialize:function(rule){var _ref=rule||{},name=_ref.name,description=_ref.description,siteId=_ref.siteId,scoreType=_ref.scoreType,scoreRange=_ref.scoreRange,id=_ref.id;return{scoreDetails:{name:name,description:description,siteId:siteId,scoreType:scoreType,scoreRange:scoreRange,id:id}}}}),ScoringRuleModel_dec2=(0,data/* prop */.vg)({deserialize:function(rule){return{triggers:(rule.triggers||[]).map((function(trigger){var name=trigger.name,id=trigger.id,internal=trigger.internal,eventType=trigger.eventType;return{name:name,id:id,internal:internal,eventType:eventType}}))}},serialize:function(selectedTriggers){return{triggers:selectedTriggers.filter((function(t){return!t.internal})).map((function(trigger){var id=trigger.id;return{id:id}}))}}}),ScoringRuleModel_dec3=(0,data/* hasMany */.TY)(ScoreContext,{deserialize:function(rule){return{data:rule.scoringCommitmentContexts||[{}]}}}),ScoringRuleModel_dec4=(0,data/* prop */.vg)(),_dec5=(0,data/* prop */.vg)({serialize:null}),ScoringRuleModel_class=function(_SetupData){(0,inherits/* default */.Z)(ScoringRule,_SetupData);var _super=(0,createSuper/* default */.Z)(ScoringRule);function ScoringRule(){var _this;(0,classCallCheck/* default */.Z)(this,ScoringRule);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,initializerDefineProperty/* default */.Z)((0,assertThisInitialized/* default */.Z)(_this),"scoreDetails",ScoringRuleModel_descriptor,(0,assertThisInitialized/* default */.Z)(_this)),(0,initializerDefineProperty/* default */.Z)((0,assertThisInitialized/* default */.Z)(_this),"triggers",ScoringRuleModel_descriptor2,(0,assertThisInitialized/* default */.Z)(_this)),(0,initializerDefineProperty/* default */.Z)((0,assertThisInitialized/* default */.Z)(_this),"scoringContexts",ScoringRuleModel_descriptor3,(0,assertThisInitialized/* default */.Z)(_this)),(0,initializerDefineProperty/* default */.Z)((0,assertThisInitialized/* default */.Z)(_this),"status",ScoringRuleModel_descriptor4,(0,assertThisInitialized/* default */.Z)(_this)),(0,initializerDefineProperty/* default */.Z)((0,assertThisInitialized/* default */.Z)(_this),"moduleName",_descriptor5,(0,assertThisInitialized/* default */.Z)(_this)),_this}return(0,createClass/* default */.Z)(ScoringRule,[{key:"saveRecord",value:function(){var _saveRecord=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(serilaizedData){var moduleName,scoreDetails,triggers,scoringContexts,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return moduleName=this.moduleName,scoreDetails=serilaizedData.scoreDetails,triggers=serilaizedData.triggers,scoringContexts=serilaizedData.scoringContexts,params={moduleName:moduleName,scoringRule:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},scoreDetails),{},{triggers:triggers}),scoringContexts:scoringContexts},_context.next=5,api/* API */.bl.post("v2/scoringRule/addOrUpdate",params);case 5:if(_yield$API$post=_context.sent,error=_yield$API$post.error,!error){_context.next=9;break}throw new Error(error.message||"Error Occurred");case 9:case"end":return _context.stop()}}),_callee,this)})));function saveRecord(_x){return _saveRecord.apply(this,arguments)}return saveRecord}()},{key:"patchUpdate",value:function(){var _patchUpdate=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var id,status,url,params,_yield$API$post2,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return id=this.scoreDetails.id,status=this.status,url=status?"setup/turnonrule":"setup/turnoffrule",params={workflowId:id},_context2.next=5,api/* API */.bl.post(url,params);case 5:if(_yield$API$post2=_context2.sent,error=_yield$API$post2.error,data=_yield$API$post2.data,!error||"success"===data.result){_context2.next=11;break}throw this.status=!this.status,new Error(error.message);case 11:case"end":return _context2.stop()}}),_callee2,this)})));function patchUpdate(){return _patchUpdate.apply(this,arguments)}return patchUpdate}()},{key:"addGroup",value:function(){var currentGroupNum=this.scoringContexts.length+1,name="Group ".concat(currentGroupNum);this.scoringContexts.push(new ScoreContext({name:name,order:currentGroupNum}))}},{key:"removeGrp",value:function(index){this.scoringContexts.splice(index,1),this.scoringContexts.forEach((function(context,idx){context.order=idx+1}))}}],[{key:"fetchAllRecords",value:function(){var _fetchAllRecords=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(moduleName){var _yield$API$post3,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,api/* API */.bl.post("v2/scoringRule/list",{moduleName:moduleName});case 2:if(_yield$API$post3=_context3.sent,error=_yield$API$post3.error,data=_yield$API$post3.data,!error){_context3.next=9;break}throw new Error(error.message||"Error Occurred");case 9:return _context3.abrupt("return",{data:data.workflowRuleList||[],moduleName:moduleName});case 10:case"end":return _context3.stop()}}),_callee3)})));function fetchAllRecords(_x2){return _fetchAllRecords.apply(this,arguments)}return fetchAllRecords}()},{key:"fetchRecord",value:function(){var _fetchRecord=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(moduleName,id){var _yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,api/* API */.bl.get("v2/scoringRule/view",{ruleId:id});case 2:if(_yield$API$get=_context4.sent,error=_yield$API$get.error,data=_yield$API$get.data,!error){_context4.next=9;break}throw new Error(error.message||"Error Occurred");case 9:return _context4.abrupt("return",{data:data.workflowRule||{},moduleName:moduleName});case 10:case"end":return _context4.stop()}}),_callee4)})));function fetchRecord(_x3,_x4){return _fetchRecord.apply(this,arguments)}return fetchRecord}()},{key:"deleteRecord",value:function(){var _deleteRecord=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(id){var _yield$API$post4,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,api/* API */.bl.post("v2/scoringRule/delete",{ruleId:id});case 2:if(_yield$API$post4=_context5.sent,error=_yield$API$post4.error,!error){_context5.next=6;break}throw new Error(error.message||"Error Occurred");case 6:case"end":return _context5.stop()}}),_callee5)})));function deleteRecord(_x5){return _deleteRecord.apply(this,arguments)}return deleteRecord}()}]),ScoringRule}(data/* SetupData */.vW),ScoringRuleModel_descriptor=(0,applyDecoratedDescriptor/* default */.Z)(ScoringRuleModel_class.prototype,"scoreDetails",[ScoringRuleModel_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{name:null,description:null,siteId:-1,scoreType:1,scoreRange:100}}}),ScoringRuleModel_descriptor2=(0,applyDecoratedDescriptor/* default */.Z)(ScoringRuleModel_class.prototype,"triggers",[ScoringRuleModel_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ScoringRuleModel_descriptor3=(0,applyDecoratedDescriptor/* default */.Z)(ScoringRuleModel_class.prototype,"scoringContexts",[ScoringRuleModel_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ScoringRuleModel_descriptor4=(0,applyDecoratedDescriptor/* default */.Z)(ScoringRuleModel_class.prototype,"status",[ScoringRuleModel_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_descriptor5=(0,applyDecoratedDescriptor/* default */.Z)(ScoringRuleModel_class.prototype,"moduleName",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ScoringRuleModel_class);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
},
/***/872125:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(990260)),pages_setup_survey_SurveyUtil__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(575369);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={data:function(){return{surveyDetails:{answeredSurveys:[]},showSurveyDialog:!1,surveyLoading:!1,showIndividualResponse:!1,selectedSurvey:{},responseStatusHash:{1:"DISABLED",2:"NOT_ANSWERED",3:"PARIALLY_ANSWERED",4:"COMPLETED"},showAllResponses:!1}},computed:{checkIfSurveyLicenseEnabled:function(){var $helpers=this.$helpers,isLicenseEnabled=$helpers.isLicenseEnabled;return isLicenseEnabled("SURVEY")},isViewAnswersEnabled:function(){var surveyDetails=this.surveyDetails;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__/* .isEmpty */.xb)(surveyDetails)){var _ref=surveyDetails||{},answeredSurveys=_ref.answeredSurveys;return answeredSurveys.length>0}return!1},showViewAllSurvey:function(){var _this=this,_ref2=this.surveyDetails||{},response=_ref2.response,filteredResponse=(response||[]).filter((function(survey){var _ref3=survey||{},responseStatus=_ref3.responseStatus,isRetakeAllowed=_ref3.isRetakeAllowed,expiryDate=_ref3.expiryDate,currentTimeInMs=Date.now();return(["PARIALLY_ANSWERED","NOT_ANSWERED"].includes(_this.responseStatusHash[responseStatus])||"COMPLETED"===_this.responseStatusHash[responseStatus]&&isRetakeAllowed)&&expiryDate>currentTimeInMs})),resLength=this.$getProperty(filteredResponse,"length",0);return resLength>0},isSurveyEnabled:function(){var surveyDetails=this.surveyDetails;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_6__/* .isEmpty */.xb)(surveyDetails)){var _ref4=surveyDetails||{},isSurveyAvailable=_ref4.isSurveyAvailable;return isSurveyAvailable}return!1}},methods:{setshowSurveyDialog:function(){this.showSurveyDialog=!0},loadSurveyResponse:function(selectedSurvey){var _this2=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(){return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this2.surveyLoading=!0,_context.next=3,(0,pages_setup_survey_SurveyUtil__WEBPACK_IMPORTED_MODULE_5__/* .getSurveyDetails */["if"])(selectedSurvey);case 3:_this2.selectedSurvey=_context.sent,_this2.surveyLoading=!1;case 5:case"end":return _context.stop()}}),_callee)})))()},showAnswers:function(){var _this3=this;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(){var surveyDetails,_ref5,_ref5$answeredSurveys,answeredSurveys;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:surveyDetails=_this3.surveyDetails,_ref5=surveyDetails||{},_ref5$answeredSurveys=_ref5.answeredSurveys,answeredSurveys=void 0===_ref5$answeredSurveys?[]:_ref5$answeredSurveys,1===answeredSurveys.length?(_this3.showIndividualResponse=!0,_this3.loadSurveyResponse(answeredSurveys[0])):_this3.showAllResponses=!0;case 3:case"end":return _context2.stop()}}),_callee2)})))()}}}},
/***/575369:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */It:function(){/* binding */return loadSurveyForSurveyBar},
/* harmony export */UI:function(){/* binding */return loadAllSurveys},
/* harmony export */if:function(){/* binding */return getSurveyDetails},
/* harmony export */qd:function(){/* binding */return loadAllTemplates}
/* harmony export */});
/* unused harmony export responseStatusHash */
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(595082),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(548534),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__(648324),__webpack_require__(634338),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(990260)),_facilio_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(32284),element_ui__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(364720),src_util_helpers_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(778390),dset__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(444806);
/* harmony import */
//returns moduleId Key for using in list API  params
// export function getModuleIdKey(moduleName) {
//   let moduleIdKey = ''
//   if (!isEmpty(moduleName)) {
//     //Add Checks for modules like workorder,vendorcontact etc...
//     if (moduleName === 'workorder') {
//       moduleName = 'workOrder'
//     }
//     return `${moduleName}Id`
//   }
//   return moduleIdKey
// }
//loads all surveys
/*
parentModuleName: parentModuleName(eg: workorder)
recordId: record Id of parent module (eg:workOrderId)
type: define type of survey list needed (viewAllSurveys/viewAllSurveyResults)
*/
function loadAllSurveys(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8){return _loadAllSurveys.apply(this,arguments)}
//loads all surveys
/*
parentModuleName: parentModuleName(eg: workorder)
*/function _loadAllSurveys(){return _loadAllSurveys=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(parentModuleName,recordId,type,page,perPage,viewName,clientCriteria,filters){var moduleName,url,params,_yield$API$get,error,data,_ref,_ref$moduleName,surveys;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return moduleName="surveyResponse",url="v3/modules/data/list",params={page:page,perPage:perPage,withCount:!0,viewName:viewName,force:!1,moduleName:moduleName},(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(type)||(params=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},params),type)),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(parentModuleName)||(params=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},params),{},{currentModuleName:parentModuleName})),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(recordId)||(params=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},params),{},{recordId:recordId})),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(clientCriteria)||(params=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},params),{},{clientCriteria:JSON.stringify(clientCriteria)})),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(filters)||(params=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},params),{},{filters:JSON.stringify(filters)})),_context.next=10,_facilio_api__WEBPACK_IMPORTED_MODULE_8__/* .API */.bl.get(url,params);case 10:if(_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,!error){_context.next=17;break}element_ui__WEBPACK_IMPORTED_MODULE_9__.Message.error(error.message||"Error Occured"),_context.next=20;break;case 17:if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(data)){_context.next=20;break}return _ref=data||{},_ref$moduleName=_ref[moduleName],surveys=void 0===_ref$moduleName?[]:_ref$moduleName,_context.abrupt("return",surveys);case 20:return _context.abrupt("return",[]);case 21:case"end":return _context.stop()}}),_callee)}))),_loadAllSurveys.apply(this,arguments)}function loadAllTemplates(_x9,_x10,_x11,_x12){return _loadAllTemplates.apply(this,arguments)}function _loadAllTemplates(){return _loadAllTemplates=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(parentModuleName,page,perPage,viewName){var url,moduleName,params,_yield$API$get2,error,data,_ref2,_ref2$moduleName,templates;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return url="v3/modules/data/list",moduleName="surveyTemplate",params={page:page,perPage:perPage,withCount:!0,viewName:viewName,force:!1,moduleName:moduleName},(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(parentModuleName)||(params=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},params),{},{currentModuleName:parentModuleName})),_context2.next=6,_facilio_api__WEBPACK_IMPORTED_MODULE_8__/* .API */.bl.get(url,params);case 6:if(_yield$API$get2=_context2.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,!error){_context2.next=13;break}element_ui__WEBPACK_IMPORTED_MODULE_9__.Message.error(error.message||"Error Occured"),_context2.next=16;break;case 13:if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(data)){_context2.next=16;break}return _ref2=data||{},_ref2$moduleName=_ref2[moduleName],templates=void 0===_ref2$moduleName?[]:_ref2$moduleName,_context2.abrupt("return",templates);case 16:return _context2.abrupt("return",[]);case 17:case"end":return _context2.stop()}}),_callee2)}))),_loadAllTemplates.apply(this,arguments)}function getSurveyDetails(_x13){return _getSurveyDetails.apply(this,arguments)}
// export async function getTemplateDetails(moduleName, template) {
//   let { id } = template || {}
//   let responseTemplateName = 'surveyTemplate'
//   let params = { id, moduleName: responseTemplateName }
//   let { error, data } = await API.get('v3/modules/data/summary', params)
//   if (error) {
//     Message.error(error.message || 'Error Occured')
//   } else {
//     if (!isEmpty(data)) {
//       let { [responseTemplateName]: template = {} } = data || {}
//       return template
//     }
//   }
//   return {}
// }
function _getSurveyDetails(){return _getSurveyDetails=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee3(selectedSurvey){var _ref3,id,responseModuleName,params,_yield$API$get3,error,data,_ref4,survey;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _ref3=selectedSurvey||{},id=_ref3.id,responseModuleName="surveyResponse",params={id:id,moduleName:responseModuleName},_context3.next=5,_facilio_api__WEBPACK_IMPORTED_MODULE_8__/* .API */.bl.get("v3/modules/data/summary",params);case 5:if(_yield$API$get3=_context3.sent,error=_yield$API$get3.error,data=_yield$API$get3.data,!error){_context3.next=12;break}element_ui__WEBPACK_IMPORTED_MODULE_9__.Message.error("Error Occured"),_context3.next=15;break;case 12:if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(data)){_context3.next=15;break}return _ref4=data||{},survey=_ref4[responseModuleName],_context3.abrupt("return",survey);case 15:return _context3.abrupt("return",{});case 16:case"end":return _context3.stop()}}),_callee3)}))),_getSurveyDetails.apply(this,arguments)}function loadSurveyForSurveyBar(){return _loadSurveyForSurveyBar.apply(this,arguments)}function _loadSurveyForSurveyBar(){return _loadSurveyForSurveyBar=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee4(){var force,moduleName,recordId,surveyDetails,_yield$API$get4,error,data,survey,_ref5,_ref5$response,response,answeredSurveys,_args4=arguments;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(force=_args4.length>0&&void 0!==_args4[0]&&_args4[0],moduleName=_args4.length>1?_args4[1]:void 0,recordId=_args4.length>2?_args4[2]:void 0,surveyDetails=_args4.length>3?_args4[3]:void 0,!checkIfLicenseEnabled()||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(recordId)){_context4.next=21;break}return _context4.next=7,_facilio_api__WEBPACK_IMPORTED_MODULE_8__/* .API */.bl.get("v2/survey/fetch/".concat(moduleName,"/").concat(recordId),{force:force});case 7:if(_yield$API$get4=_context4.sent,error=_yield$API$get4.error,data=_yield$API$get4.data,!error){_context4.next=14;break}this.$message(error.message||"Error Occured"),_context4.next=21;break;case 14:if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(data)){_context4.next=21;break}return survey=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)({},surveyDetails),data),_ref5=survey||{},_ref5$response=_ref5.response,response=void 0===_ref5$response?[]:_ref5$response,answeredSurveys=[],(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_11__/* .isEmpty */.xb)(response)||response.forEach((function(survey){
//filtering partially answered and completed surveys
survey.responseStatus>2&&answeredSurveys.push(survey)})),(0,dset__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */.Z)(survey,"answeredSurveys",answeredSurveys),_context4.abrupt("return",survey);case 21:return _context4.abrupt("return",{answeredSurveys:[]});case 22:case"end":return _context4.stop()}}),_callee4,this)}))),_loadSurveyForSurveyBar.apply(this,arguments)}function checkIfLicenseEnabled(){var isLicenseEnabled=src_util_helpers_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.ZP.isLicenseEnabled;return isLicenseEnabled("SURVEY")}
/***/},
/***/362218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */x:function(){/* binding */return Trigger}
/* harmony export */});
/* harmony import */var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(482482),__webpack_require__(424590)),_facilio_data__WEBPACK_IMPORTED_MODULE_15__=(__webpack_require__(177377),__webpack_require__(634338),__webpack_require__(821057),__webpack_require__(450886),__webpack_require__(480390)),_facilio_api__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(32284),Trigger=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_15__/* .prop */.vg)({primary:!0}),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_15__/* .prop */.vg)(),_dec3=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_15__/* .prop */.vg)(),_dec4=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_15__/* .prop */.vg)(),_dec5=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_15__/* .prop */.vg)(),_dec6=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_15__/* .prop */.vg)({deserialize:function(trigger){return{triggerActions:trigger.triggerActions||[]}}}),_dec7=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_15__/* .prop */.vg)({serialize:null}),_dec8=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_15__/* .prop */.vg)({serialize:null}),_class=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(Trigger,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */.Z)(Trigger);function Trigger(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(this,Trigger);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"id",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"name",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"type",_descriptor3,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"eventType",_descriptor4,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"status",_descriptor5,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"triggerActions",_descriptor6,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"isDefault",_descriptor7,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"moduleName",_descriptor8,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(Trigger,[{key:"saveRecord",value:function(){var _saveRecord=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee(serilaizedData){var moduleName,url,params,_yield$API$post,error,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return moduleName=this.moduleName,url="v3/trigger/addOrUpdate",params={moduleName:moduleName,trigger:serilaizedData},_context.next=5,_facilio_api__WEBPACK_IMPORTED_MODULE_14__/* .API */.bl.post(url,params);case 5:if(_yield$API$post=_context.sent,error=_yield$API$post.error,data=_yield$API$post.data,!error){_context.next=12;break}throw new Error(error.message||"Error Occurred");case 12:return _context.abrupt("return",data.triggerContext);case 13:case"end":return _context.stop()}}),_callee,this)})));function saveRecord(_x){return _saveRecord.apply(this,arguments)}return saveRecord}()},{key:"patchUpdate",value:function(){var _patchUpdate=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee2(){var id,status,url,params,_yield$API$post2,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return id=this.id,status=this.status,url="v3/trigger/changeStatus",params={status:status,id:id},_context2.next=5,_facilio_api__WEBPACK_IMPORTED_MODULE_14__/* .API */.bl.post(url,params);case 5:if(_yield$API$post2=_context2.sent,error=_yield$API$post2.error,!error){_context2.next=9;break}throw new Error(error.message||"Failed to change trigger status");case 9:case"end":return _context2.stop()}}),_callee2,this)})));function patchUpdate(){return _patchUpdate.apply(this,arguments)}return patchUpdate}()},{key:"saveActionsOrder",value:function(){var _saveActionsOrder=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee3(triggerActionsList){var moduleName,_this$serialize,id,triggerActions,params,_yield$API$post3,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return this.triggerActions=triggerActionsList,moduleName=this.moduleName,_this$serialize=this.serialize(["triggerActions","id"]),id=_this$serialize.id,triggerActions=_this$serialize.triggerActions,//return only keys passed as attribute in array
params={moduleName:moduleName,id:id,actionList:triggerActions.map((function(action){return{id:action.id}}))},_context3.next=6,_facilio_api__WEBPACK_IMPORTED_MODULE_14__/* .API */.bl.post("v3/trigger/rearrange",params);case 6:if(_yield$API$post3=_context3.sent,error=_yield$API$post3.error,!error){_context3.next=12;break}throw new Error(error.message||"Failed to rearrange actions");case 12:this.triggerActions=triggerActionsList.map((function(triggerAction,idx){return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},triggerAction),{},{executionOrder:idx+1})}));case 13:return _context3.abrupt("return",this);case 14:case"end":return _context3.stop()}}),_callee3,this)})));function saveActionsOrder(_x2){return _saveActionsOrder.apply(this,arguments)}return saveActionsOrder}()}],[{key:"fetchAllRecords",value:function(){var _fetchAllRecords=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee4(moduleName){var _yield$API$post4,error,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_14__/* .API */.bl.post("v3/trigger/list",{moduleName:moduleName});case 2:if(_yield$API$post4=_context4.sent,error=_yield$API$post4.error,data=_yield$API$post4.data,!error){_context4.next=9;break}throw new Error(error.message||"Error Occurred");case 9:return _context4.abrupt("return",{data:data.triggerList||[],moduleName:moduleName});case 10:case"end":return _context4.stop()}}),_callee4)})));function fetchAllRecords(_x3){return _fetchAllRecords.apply(this,arguments)}return fetchAllRecords}()},{key:"deleteRecord",value:function(){var _deleteRecord=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee5(_ref){var id,_yield$API$post5,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return id=_ref.id,_context5.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_14__/* .API */.bl.post("v3/trigger/delete",{id:id});case 3:if(_yield$API$post5=_context5.sent,error=_yield$API$post5.error,!error){_context5.next=7;break}throw new Error(error.message||"Error Occurred");case 7:case"end":return _context5.stop()}}),_callee5)})));function deleteRecord(_x4){return _deleteRecord.apply(this,arguments)}return deleteRecord}()}]),Trigger}(_facilio_data__WEBPACK_IMPORTED_MODULE_15__/* .SetupData */.vW),_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"id",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"name",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"type",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),_descriptor4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"eventType",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1073741824}}),_descriptor5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"status",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_descriptor6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"triggerActions",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_descriptor7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"isDefault",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"moduleName",[_dec8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_class);
/* harmony import */},
/***/414577:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */__webpack_require__(670560);
/* harmony import */var _facilio_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(329435);
/* harmony default export */__webpack_exports__.Z={methods:{readingSpaceAssetChoosing:function(){var appName=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .getApp */.wx)().linkName;if(appName="newapp"===appName?"app":appName,"assetreadings"===this.readinglist){var url="/".concat(appName,"/setup/assetsettings/readings");this.$router.push({path:url})}else if("spacereadings"===this.readinglist){var _url="/".concat(appName,"/setup/assetsettings/spacereadings");this.$router.push({path:_url})}else if("weatherreadings"===this.readinglist){var _url2="/".concat(appName,"/setup/assetsettings/weatherreadings");this.$router.push({path:_url2})}},assetReadingChooser:function(){var appName=(0,_facilio_router__WEBPACK_IMPORTED_MODULE_1__/* .getApp */.wx)().linkName;if(appName="newapp"===appName?"app":appName,"site"===this.readingFilter){var url="/".concat(appName,"/setup/assetsettings/sitereadings");this.$router.push({path:url})}else if("building"===this.readingFilter){var _url3="/".concat(appName,"/setup/assetsettings/buildingreadings");this.$router.push({path:_url3})}else if("floor"===this.readingFilter){var _url4="/".concat(appName,"/setup/assetsettings/floorreadings");this.$router.push({path:_url4})}else if("space"===this.readingFilter){var _url5="/".concat(appName,"/setup/assetsettings/spacereadings");this.$router.push({path:_url5})}}}}},
/***/144945:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */A2:function(){/* binding */return makeBg},
/* harmony export */Lp:function(){/* binding */return commonObjProps},
/* harmony export */O9:function(){/* binding */return colors},
/* harmony export */PZ:function(){/* binding */return makePlusSign},
/* harmony export */_W:function(){/* binding */return getArrowCoords}
/* harmony export */});
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),fabric__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(260228),__webpack_require__(232777)),commonObjProps={hasRotatingPoint:!1,lockRotation:!0,hasControls:!1,hasBorders:!1,lockScalingX:!0,lockScalingY:!0,perPixelTargetFind:!0,excludeFromExport:!0},colors={state:{bg:{default:"#fff",active:"#FF6660"},text:{default:"#3995e2",active:"#2d2d52"}},transition:{bg:{default:"#6071db",active:"#FF6660"},condition:{default:"#45bec4",active:"#FF6660"},time:{default:"#4eb871",active:"#FF6660"},text:{default:"#fff",active:"#fff"}},line:{default:"#3995e2",active:"#FF6660"}},makeBg=function(){return new Promise((function(resolve){var img=new Image;img.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAVFBMVEXr6/8AAAD29/3r6//r6//r6//r6//r6//r6//u7v7y8v7r6//29/329/3r6//u7v73+P329/329/329/329/3y8v729/329/329/329/3r6/////+v4k9qAAAAG3RSTlMAAAAAAK9ucG+CqG4hZHCCHh89eB6oYmOgYnDbLnXkAAAAAWJLR0QbAmDUpAAAAAd0SU1FB+MJBQoVBFuF9hQAAABASURBVAjXY2BlY+fg5OJmZ2dnYGdgZOLhZWJkZERm8jHDmfwCPIJCwiI8PDwMomK84sISkry8vAxSLNi0YWUCAKQaAtqfMEELAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA5LTA1VDEwOjIxOjA0KzAwOjAwruZKXgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wOS0wNVQxMDoyMTowNCswMDowMN+78uIAAAAASUVORK5CYII=",img.onload=function(){return resolve(new fabric__WEBPACK_IMPORTED_MODULE_2__.fabric.Pattern({source:img,offsetY:4,offsetX:1}))}}))},makePlusSign=function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},bgColor=_ref.bgColor,color=_ref.color;bgColor||(bgColor=colors.line.active),color||(color="#fff");var circle=new fabric__WEBPACK_IMPORTED_MODULE_2__.fabric.Circle((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},commonObjProps),{},{objType:"bg",originX:"center",originY:"center",radius:10,fill:bgColor,stroke:bgColor,objectCaching:!1})),plus=new fabric__WEBPACK_IMPORTED_MODULE_2__.fabric.Path("M 0, -6 V 6 M -6, 0 H 6",(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},commonObjProps),{},{objType:"sign",originX:"center",originY:"center",stroke:color,strokeWidth:3})),group=new fabric__WEBPACK_IMPORTED_MODULE_2__.fabric.Group([circle,plus],(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},commonObjProps),{},{objType:"plus",originX:"center",originY:"center"}));return group.onHoverStart=function(){this.set("fill",colors.line.active),this.set("stroke",colors.line.active)}.bind(circle),group.onHoverEnd=function(){this.set("fill",bgColor),this.set("stroke",bgColor)}.bind(circle),group},getArrowCoords=function(pt){var direction=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",needsEdgeShift=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],priAxisOffset=4,secAxisOffset=3;switch(direction){case"bottom":return pt=needsEdgeShift?(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},pt),{},{y:pt.y-(priAxisOffset+secAxisOffset)}):pt,[pt,{x:pt.x+priAxisOffset,y:pt.y-secAxisOffset},{x:pt.x,y:pt.y+(priAxisOffset+secAxisOffset)},{x:pt.x-priAxisOffset,y:pt.y-secAxisOffset}];case"top":return pt=needsEdgeShift?(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},pt),{},{y:pt.y+(priAxisOffset+secAxisOffset)}):pt,[pt,{x:pt.x+priAxisOffset,y:pt.y+secAxisOffset},{x:pt.x,y:pt.y-(priAxisOffset+secAxisOffset)},{x:pt.x-priAxisOffset,y:pt.y+secAxisOffset}];case"left":return pt=needsEdgeShift?(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},pt),{},{x:pt.x-(priAxisOffset+secAxisOffset)}):pt,[pt,{x:pt.x-secAxisOffset,y:pt.y-priAxisOffset},{x:pt.x+(priAxisOffset+secAxisOffset),y:pt.y},{x:pt.x-secAxisOffset,y:pt.y+priAxisOffset}];case"right":return pt=needsEdgeShift?(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},pt),{},{x:pt.x+(priAxisOffset+secAxisOffset)}):pt,[pt,{x:pt.x+secAxisOffset,y:pt.y-priAxisOffset},{x:pt.x-(priAxisOffset+secAxisOffset),y:pt.y},{x:pt.x+secAxisOffset,y:pt.y+priAxisOffset}]}};
/* harmony import */},
/***/32996:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */G:function(){/* binding */return getLayout}
/* harmony export */});
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(554621),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(488478),dagre__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(947522),__webpack_require__(689730),__webpack_require__(870681)),dagre__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(dagre__WEBPACK_IMPORTED_MODULE_8__),treeverse__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(483465),graphSort=function(nodes,edges,start){var sortedNodes=[],sortedEdges=[];return(0,treeverse__WEBPACK_IMPORTED_MODULE_9__.breadth)({tree:start,visit:function(node){sortedNodes.push(node),sortedEdges.push.apply(sortedEdges,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(edges.filter((function(e){return e[0]===node}))))},getChildren:function(node){return edges.filter((function(e){return e[0]===node})).map((function(e){return e[1]}))}}),[sortedNodes,sortedEdges]},createGraph=function(nodes,edges){var g=new(dagre__WEBPACK_IMPORTED_MODULE_8___default().graphlib.Graph)({directed:!0,multigraph:!0});g.setGraph({ranker:"network-simplex",nodesep:100,ranksep:100,edgesep:100,align:"UL",marginx:100,marginy:50}),g.setDefaultEdgeLabel((function(){return{labelpos:"c",minLen:1,weight:1}}));var nodeLabel=function(){return{width:140,height:40}};
// Add nodes and make edges between them to graph
return nodes.forEach((function(id){return g.setNode(id,nodeLabel())})),edges.forEach((function(_ref){var _ref2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(_ref,2),from=_ref2[0],to=_ref2[1];return g.setEdge(from,to)})),
// Calculates layout coords for each node and edge
dagre__WEBPACK_IMPORTED_MODULE_8___default().layout(g),g},getLayout=function(states,transitions,startStateId){var _graphSort=graphSort(states.map((function(s){return"s".concat(s.id)})),transitions.map((function(t){return["s".concat(t.fromStateId),"s".concat(t.toStateId)]})),"s".concat(startStateId)),_graphSort2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(_graphSort,2),nodes=_graphSort2[0],edges=_graphSort2[1],graph=createGraph(nodes,edges),stateCoords=graph.nodes().reduce((function(res,id){
// slice is to remove 's' added during graph sort
return res[id.slice(1)]=graph.node(id),res}),{});
// 's' is added because id's that start with numbers dont work with graphlib
return stateCoords};
/* harmony import */},
/***/126577:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */I7:function(){/* binding */return smoothenPath},
/* harmony export */X8:function(){/* binding */return getUsedStates},
/* harmony export */bg:function(){/* binding */return getUnusedStates},
/* harmony export */c:function(){/* binding */return isValidAnchor},
/* harmony export */cU:function(){/* binding */return getObjById},
/* harmony export */gc:function(){/* binding */return isObjIntesecting},
/* harmony export */us:function(){/* binding */return getCenterCoords},
/* harmony export */xG:function(){/* binding */return getStubCoords}
/* harmony export */});
/* unused harmony exports getLayout, stubLength, getMouseAdjustedEndPoint */
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),getUsedStates=(__webpack_require__(260228),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(947522),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(670560),function(states,transitions,defaultStateId){var usedStates=new Set;return transitions.forEach((function(_ref){var toStateId=_ref.toStateId,fromStateId=_ref.fromStateId;!usedStates.has(toStateId)&&usedStates.add(toStateId),!usedStates.has(fromStateId)&&usedStates.add(fromStateId)})),states.filter((function(state){return usedStates.has(state.id)||state.id===defaultStateId})).map((function(state){return state.id===defaultStateId&&(state.isDefaultState=!0),state}))}),getUnusedStates=function(states,transitions,defaultStateId){var usedStates=new Set;return transitions.forEach((function(_ref2){var toStateId=_ref2.toStateId,fromStateId=_ref2.fromStateId;!usedStates.has(toStateId)&&usedStates.add(toStateId),!usedStates.has(fromStateId)&&usedStates.add(fromStateId)})),states.filter((function(state){return!usedStates.has(state.id)&&String(state.id)!==String(defaultStateId)}))},getObjById=function(canvas,id){for(var object=null,objects=canvas.getObjects(),i=0,len=canvas.size();i<len;i++)if(objects[i].id&&String(objects[i].id)===String(id)){object=objects[i];break}return object},getCenterCoords=function(obj){var _obj$getCenterPoint=obj.getCenterPoint(),x=_obj$getCenterPoint.x,y=_obj$getCenterPoint.y;return{x:x,y:y}},stubLength=20,portOffsetHash=[{x:0,y:-stubLength},{x:0,y:-stubLength},{x:0,y:-stubLength},{x:stubLength,y:0},{x:0,y:stubLength},{x:0,y:stubLength},{x:0,y:stubLength},{x:-stubLength,y:0}],getStubCoords=function(coord,anchorId){var portOffset=anchorId>-1&&anchorId<8?portOffsetHash[anchorId]:{x:0,y:0};return{x:Math.round(coord.x+portOffset.x),y:Math.round(coord.y+portOffset.y)}},isObjIntesecting=function(canvasObj,point){var isIntersecting=canvasObj.containsPoint(point,null,!0,!0);return isIntersecting},smoothenPath=function(path){var reducer=function(res,pt,index){if(0===index||index===path.length-1)res.push(pt);else{var newPt=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},pt),prevPt=res[res.length-1],xAxisDiff=Math.abs(pt.x-prevPt.x),yAxisDiff=Math.abs(pt.y-prevPt.y);xAxisDiff>yAxisDiff?newPt={x:pt.x,y:prevPt.y}:xAxisDiff<yAxisDiff&&(newPt={x:prevPt.x,y:pt.y}),res.push(newPt)}return res},newPath=path.reduce(reducer,[]);return newPath.length>3&&(newPath=newPath.reduceRight(reducer,[]).reverse()),newPath},isValidAnchor=function(anchorId){return anchorId>=0&&anchorId<8};
/* harmony import */},
/***/308530:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */Dm:function(){/* binding */return getDirectionBetweenPoints},
/* harmony export */LW:function(){/* binding */return normalizeAngle},
/* harmony export */Xy:function(){/* binding */return isEqual},
/* harmony export */_f:function(){/* binding */return getCombinedDirection},
/* harmony export */_l:function(){/* binding */return getDirectionChange},
/* harmony export */cu:function(){/* binding */return snapPointToGrid},
/* harmony export */e5:function(){/* binding */return difference},
/* harmony export */eN:function(){/* binding */return getLineMidPoint},
/* harmony export */j0:function(){/* binding */return normalizePoint},
/* harmony export */jj:function(){/* binding */return offsetPoint},
/* harmony export */mV:function(){/* binding */return getPathMidPt},
/* harmony export */nk:function(){/* binding */return manhattanDistance},
/* harmony export */q0:function(){/* binding */return theta},
/* harmony export */uh:function(){/* binding */return scaleDown},
/* harmony export */up:function(){/* binding */return getAbsoluteCoords},
/* harmony export */wK:function(){/* binding */return scaleUp},
/* harmony export */ws:function(){/* binding */return findClosestPathEnd},
/* harmony export */xU:function(){/* binding */return getPointsOnLine},
/* harmony export */x_:function(){/* binding */return getDistBtwPoints},
/* harmony export */xn:function(){/* binding */return snapToGrid}
/* harmony export */});
/* unused harmony exports toDeg, toRad, getRectCenter, isPointInRect */
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(554621),vec_la_fp__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(670560),__webpack_require__(114932)),getDistBtwPoints=function(pt1,pt2){var distance=(0,vec_la_fp__WEBPACK_IMPORTED_MODULE_2__/* .vDist */.cl)([pt1.x,pt1.y],[pt2.x,pt2.y]);return distance},getPointAtDistOnLine=function(pt1,pt2,d){var v=(0,vec_la_fp__WEBPACK_IMPORTED_MODULE_2__/* .vSub */.AS)([pt2.x,pt2.y],[pt1.x,pt1.y]),_vAdd=(0,vec_la_fp__WEBPACK_IMPORTED_MODULE_2__/* .vAdd */.cO)([pt1.x,pt1.y],(0,vec_la_fp__WEBPACK_IMPORTED_MODULE_2__/* .vScale */.Kc)(d,(0,vec_la_fp__WEBPACK_IMPORTED_MODULE_2__/* .vNorm */.pv)(v))),_vAdd2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(_vAdd,2),x=_vAdd2[0],y=_vAdd2[1];return{x:x,y:y}},getPointsOnLine=function(pt1,pt2,pointCount){for(var dist=(0,vec_la_fp__WEBPACK_IMPORTED_MODULE_2__/* .vDist */.cl)([pt1.x,pt1.y],[pt2.x,pt2.y]),partDist=dist/(pointCount+1),points=[],i=1;i<=pointCount;i++){var point=getPointAtDistOnLine(pt1,pt2,partDist*i);points.push(point)}return points},getLineMidPoint=function(from,to){return getPointsOnLine(from,to,1)},getPathMidPt=function(coords){for(var segmentDist=[],totalDist=0,i=0;i<coords.length-1;i++){var pt1=coords[i],pt2=coords[i+1],dist=(0,vec_la_fp__WEBPACK_IMPORTED_MODULE_2__/* .vDist */.cl)([pt1.x,pt1.y],[pt2.x,pt2.y]);segmentDist.push(dist),totalDist+=dist}for(var midPoint,midLength=totalDist/2,_i=0;_i<segmentDist.length;_i++){var _dist=segmentDist[_i];if(!(midLength>=_dist)){var _pt=coords[_i],_pt2=coords[_i+1];midPoint=getPointAtDistOnLine(_pt,_pt2,midLength);break}midLength-=_dist}return midPoint},getAbsoluteCoords=function(parent,child){return{x:parent.x+child.x,y:parent.y+child.y}},findClosestPathEnd=function(path,mouseCoord){var src=path[0],dest=path[path.length-1],distFromSrc=(0,vec_la_fp__WEBPACK_IMPORTED_MODULE_2__/* .vDist */.cl)([src.x,src.y],[mouseCoord.x,mouseCoord.y]),distToDest=(0,vec_la_fp__WEBPACK_IMPORTED_MODULE_2__/* .vDist */.cl)([mouseCoord.x,mouseCoord.y],[dest.x,dest.y]);return distFromSrc<distToDest},scaleDown=function(value){var cellSize=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Math.round(value/cellSize)},scaleUp=function(value){var cellSize=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Math.round(value*cellSize)},snapToGrid=function(value){var cellSize=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return cellSize*Math.round(value/cellSize)},snapPointToGrid=function(_ref,gridUnit){var x=_ref.x,y=_ref.y;return{x:snapToGrid(x,gridUnit),y:snapToGrid(y,gridUnit)}},isEqual=function(p1,p2){return p1.x===p2.x&&p1.y===p2.y},manhattanDistance=function(p1,p2){return Math.abs(p2.x-p1.x)+Math.abs(p2.y-p1.y)},difference=function(p1,p2){return{x:p1.x-(p2.x||0),y:p1.y-(p2.y||0)}},theta=function(p1,p2){
// Invert the y-axis
var y=-(p2.y-p1.y),x=p2.x-p1.x,rad=Math.atan2(y,x);// defined for all 0 corner cases
// Correction for III and IV quadrants
return rad<0&&(rad=2*Math.PI+rad),180*rad/Math.PI},normalizeAngle=function(angle){return angle%360+(angle<0?360:0)},normalizePoint=function(point){return{x:0===point.x?0:Math.abs(point.x)/point.x,y:0===point.y?0:Math.abs(point.y)/point.y}},getDirectionChange=function(angle1,angle2){var directionChange=Math.abs(angle1-angle2);return directionChange>180?360-directionChange:directionChange},offsetPoint=function(point,dx,dy){return Object(dx)===dx&&(dy=dx.y,dx=dx.x),{x:point.x+(dx||0),y:point.y+(dy||0)}},getDirectionBetweenPoints=function(p1,p2){var xDir=null,yDir=null,deltaX=p2.x-p1.x,deltaY=p2.y-p1.y;return deltaX>0?xDir="right":deltaX<0&&(xDir="left"),deltaY>0?yDir="bottom":deltaY<0&&(yDir="top"),{x:xDir,y:yDir}},getCombinedDirection=function(_ref4){var x=_ref4.x,y=_ref4.y;return y?y+(x||""):x};
/* harmony import */}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/chunk-common-081df769.js.map