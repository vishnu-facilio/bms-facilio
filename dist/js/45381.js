"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[45381,32686,80865,53021],{
/***/42525:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/approval/ApprovalBar.vue?vue&type=template&id=4fea8923&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:["sidebar-loader",(_vm.loading||_vm.isSaving)&&"on"]}),_vm.loading?_c("div",{staticClass:"d-flex approval-bar"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex approval-bar"},[_c("div",{staticClass:"approval-desc mR30 f14"},[_vm.isRejected?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" "+_vm._s(_vm.$t("panel.was"))+" "),_c("span",{staticClass:"bold",staticStyle:{color:"#dd7171"}},[_vm._v(_vm._s(_vm.$t("panel.rejected")))]),_vm._v(" for this "+_vm._s(_vm.moduleDisplayName||_vm.moduleName)+". "),_vm.resendApproval?[_c("span",[_vm._v("You can")]),_vm.canShowEdit?[_c("span",{staticClass:"mL5"},[_vm._v("either")]),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.$emit("onEdit")}}},[_vm._v(" edit ")])]),_c("span",{staticClass:"mL5"},[_vm._v("or")])]:_vm._e(),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.resendApproval)}}},[_vm._v(" resend ")])]),_c("span",{staticClass:"mL5"},[_vm._v("for approval.")])]:_vm._e()]:_vm.hasApprovalList&&!_vm.hideApprovers?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending from "),_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.approvers[0].name))]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"mL5 approvers-more-icon"},[_vm._v(" +"+_vm._s(_vm.approvers.length-1)+" ")])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApproverTypeAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()]:(_vm.$validation.isEmpty(_vm.transitions),[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending ")])],2),_vm.$validation.isEmpty(_vm.transitions)?_vm._e():_c("div",{staticClass:"approval-links text-uppercase f12 bold"},[_c("div",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_vm.approveTransition?_c("a",{class:["link-approve mR15",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.approveTransition)}}},[_c("inline-svg",{attrs:{src:"tick-sign",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.approveTransition.name)+" ")],1):_vm._e(),_vm.rejectTransition?_c("a",{class:["link-reject",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.rejectTransition)}}},[_c("inline-svg",{attrs:{src:"svgs/close",iconClass:"icon icon-xxs"}}),_vm._v(" "+_vm._s(_vm.rejectTransition.name)+" ")],1):_vm._e()])])]),_vm.canShowForm?[_c("TransitionForm",{attrs:{moduleName:_vm.selectedTransition.moduleName,recordId:_vm.record.recordId,formId:_vm.selectedTransition.formId,record:_vm.record,transition:_vm.selectedTransition,approvalRule:_vm.approvalRule,saveAction:_vm.saveAction,closeAction:_vm.closeStateFlowForm,isV3:_vm.isV3}})]:_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),ApprovalButtons=(__webpack_require__(689730),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(840889)),ApprovalForm=__webpack_require__(548127),ApprovalUserAvatar=__webpack_require__(400438),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),ApprovalBarvue_type_script_lang_js={extends:ApprovalButtons/* default */.Z,props:["hideApprovers","canShowEdit","canHideMsg"],components:{TransitionForm:ApprovalForm/* default */.Z,ApproverTypeAvatar:ApprovalUserAvatar/* default */.Z},data:function(){return{isSaving:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{transitions:function(){return(0,validation/* isEmpty */.xb)(this.stateTransitions)?[]:(0,toConsumableArray/* default */.Z)(this.stateTransitions).slice(0,2)},policyName:function(){return(0,validation/* isEmpty */.xb)(this.approvalRule)?"Approval":this.$getProperty(this.approvalRule,"name")},shouldCurrentUserApprove:function(){return!(0,validation/* isEmpty */.xb)(this.transitions)},hasApprovalList:function(){return!(0,validation/* isEmpty */.xb)(this.approvers)},approvalMeta:function(){return{approvalList:this.pendingApprovalList}},approvers:function(){var approvers=[];return this.pendingApprovalList.forEach((function(approver){var value=approver.value,type=approver.type;(0,validation/* isEmpty */.xb)(value)?"TENANT"===type?approvers.push({name:"Tenant",type:"TENANT"}):"VENDOR"===type&&approvers.push({name:"Vendor",type:"VENDOR"}):(0,validation/* isArray */.kJ)(value)?approvers.push.apply(approvers,(0,toConsumableArray/* default */.Z)(value)):approvers.push(value)})),approvers},isRejected:function(){return"Rejected"===this.$getProperty(this.currentState,"status")},shouldCreateModuleRecord:function(){return!1},shouldCreateNotes:function(){return!1},approveTransition:function(){return this.transitions.find((function(t){return"Approve"===t.name}))},rejectTransition:function(){return this.transitions.find((function(t){return"Reject"===t.name}))},resendApproval:function(){return this.transitions.find((function(t){return!["Approve","Reject"].includes(t.name)}))},moduleDisplayName:function(){var _this$metaInfo;return null===(_this$metaInfo=this.metaInfo)||void 0===_this$metaInfo?void 0:_this$metaInfo.displayName}}),methods:{showMessage:function(transition){
/* override */
var name=transition.name,action="";["Approve","Reject"].includes(name)?"Approve"===name?action="approved":"Reject"===name&&(action="rejected"):action="resent for approval",this.$message.success("".concat(this.moduleDisplayName||this.moduleName," was ").concat(action))},requestToSave:function(transition){var _this=this;this.isSaving=!0,this.startTransition(transition).finally((function(){return _this.isSaving=!1}))},saveAction:function(formData){return this.transitionToState(formData)},getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver},defaultResponseHandler:function(_ref,transition){var error=_ref.error,canShowForm=this.canShowForm;error?(!this.canHideMsg&&this.$message.error(error.message),this.$emit("onFailure",{error:error,transition:transition})):(canShowForm&&this.closeStateFlowForm(),this.fetchAvailableStates(),this.$emit("onSuccess",{error:error,transition:transition}),!this.canHideMsg&&this.showMessage(transition))}}},approval_ApprovalBarvue_type_script_lang_js=ApprovalBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(approval_ApprovalBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"4fea8923",null)
/* harmony default export */,ApprovalBar=component.exports},
/***/760218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilder.vue?vue&type=template&id=0dd0982f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showPage&&_vm.pagebuilderComponent?_c(_vm.pagebuilderComponent,_vm._b({tag:"component",attrs:{module:_vm.module},on:{forceOldPage:function($event){_vm.forceOld=!0}}},"component",_vm.$attrs,!1)):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),PageBuildervue_type_script_lang_js={props:["module"],data:function(){return{forceOld:!1,showPage:!1}},components:{NewPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(88506)]).then(__webpack_require__.bind(__webpack_require__,110570))},OldPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(23803),__webpack_require__.e(55246)]).then(__webpack_require__.bind(__webpack_require__,223803))}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!_this.$helpers.isLicenseEnabled("PAGE_BUILDER")){_context.next=4;break}return _context.next=4,_this.$store.dispatch("pagebuilder/loadNewPageEnabledModules");case 4:_context.next=8;break;case 6:_context.prev=6,_context.t0=_context["catch"](0);case 8:_this.$nextTick((function(){_this.showPage=!0}));case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({newPageEnabledModules:function(state){return state.pagebuilder.newPageEnabledModules}})),{},{pagebuilderComponent:function(){var newPageEnabledModules=this.newPageEnabledModules,module=this.module,forceOld=this.forceOld,isNew=(newPageEnabledModules||[]).includes(module),showNew=!forceOld&&(this.showNewPageBuilder||isNew);return showNew?"NewPageBuilder":"OldPageBuilder"},showNewPageBuilder:function(){var query=this.$route.query,_query$showNewPageBui=query.showNewPageBuilder,showNewPageBuilder=void 0!==_query$showNewPageBui&&_query$showNewPageBui;return!0===showNewPageBuilder||"true"===showNewPageBuilder}})},page_PageBuildervue_type_script_lang_js=PageBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilder=component.exports},
/***/301082:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return InventoryRequestSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/Inventory/InventoryRequest/InventoryRequestSummary.vue?vue&type=template&id=5a8d40af&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"custom-modules-overview overflow-y-scroll"},[_c("div",{staticClass:"header pT10 pB15 pL20 pR20"},[_vm.$validation.isEmpty(_vm.inventoryRequest)?_vm._e():_c("div",{staticClass:"asset-details"},[_c("div",{staticClass:"d-flex flex-middle"},[_c("div",{staticClass:"mL5"},[_c("div",{staticClass:"asset-id mT10"},[_vm._v("#"+_vm._s(_vm.inventoryrequestId))]),_c("div",{staticClass:"asset-name d-flex mb5 mT5"},[_vm.isRecordLocked?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fa fa-lock locked-wo mT0",attrs:{"data-arrow":"true",title:_vm.$t("common._common.locked_state")}}):_vm._e(),_c("el-tooltip",{attrs:{placement:"bottom",effect:"dark",content:_vm.inventoryRequest.name}},[_c("span",{staticClass:"whitespace-pre-wrap custom-header"},[_vm._v(_vm._s(_vm.inventoryRequest.name))])]),_vm.currentModuleState?_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.currentModuleState)+" ")]):_vm._e()],1)])])]),_vm.isLoading?_vm._e():_c("div",{staticClass:"d-flex flex-direction-row align-center",staticStyle:{"margin-left":"auto"}},[_c("CustomButton",{key:_vm.inventoryrequestId+"-custom-button",staticClass:"p10",attrs:{record:_vm.inventoryRequest,moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY}}),_vm.isStateFlowEnabled?[_c("TransitionButtons",{key:_vm.inventoryrequestId,staticClass:"mR10",attrs:{moduleName:_vm.moduleName,record:_vm.inventoryRequest,transformFn:_vm.transformFn,disabled:_vm.isApprovalEnabled,buttonClass:"asset-el-btn"},on:{currentState:function(){},transitionSuccess:function($event){return _vm.loadInventoryRequest(!0)},transitionFailure:function(){}}})]:_vm._e(),_vm.isApprovalEnabled?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_c("ApprovalBar",{key:_vm.inventoryrequestId+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:_vm.moduleName,record:_vm.inventoryRequest,transformFn:_vm.transformFn},on:{onSuccess:function($event){return _vm.loadInventoryRequest(!0)},onFailure:function(){}}})],1):_vm._e()],2)]),_vm.inventoryRequest&&_vm.inventoryRequest.id?_c("page",{key:_vm.inventoryrequestId,attrs:{module:_vm.moduleName,id:_vm.inventoryrequestId,details:_vm.inventoryRequest,primaryFields:["name"],notesModuleName:"inventoryrequestnotes",isV3Api:!0,attachmentsModuleName:"inventoryrequestattachments"}}):_vm._e(),_vm.rotatingItemChooserDialog?_c("RotatingItemDialog",{ref:"rotatingItemDialog",attrs:{rotatingLineItemsList:_vm.rotatingLineItemsList,inventoryrequest:_vm.inventoryRequest,selectedStoreId:_vm.selectedStoreId},on:{nextStep:_vm.nextStep,requestIssue:_vm.issueInventoryRequest,onClose:_vm.closeDialog}}):_vm._e(),_vm.storeRoomChooserDialogVisibility?_c("StoreRoomDetailsDialog",{attrs:{selectedStoreId:_vm.selectedStoreId,inventoryrequest:_vm.inventoryRequest,updateStatus:_vm.updateStatus},on:{"update:selectedStoreId":function($event){_vm.selectedStoreId=$event},"update:selected-store-id":function($event){_vm.selectedStoreId=$event},onClose:_vm.closeDialog}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),api=(__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(32284)),validation=__webpack_require__(990260),RotatingItemDialogvue_type_template_id_6e5d6815_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:!0,"before-close":_vm.closeDialog,fullscreen:!1,title:_vm.$t("common.header.issue_inventory_request"),open:"top","custom-class":"fc-dialog-center-container","append-to-body":!0}},[_c("div",{staticClass:"height400"},[_c("el-steps",{attrs:{active:_vm.stepStatus,"finish-status":"success"}},_vm._l(_vm.lineItemList,(function(lineItem){return _c("el-step",{key:lineItem.id,attrs:{title:lineItem.title,description:lineItem.description}})})),1),_c("el-table",{directives:[{name:"loading",rawName:"v-loading",value:_vm.iTloading,expression:"iTloading"}],ref:"issueTable",staticClass:"width100 inventory-inner-table",attrs:{height:"200",data:_vm.rotatingItemList,"empty-text":"No Rotating assets available.","default-sort":{prop:"costDate",order:"descending"}},on:{"selection-change":_vm.selectRotatingAsset}},[_c("el-table-column",{attrs:{type:"selection",width:"60"}}),_c("el-table-column",{attrs:{prop:"serialNumber",sortable:"",label:"SERIAL NUMBER"}}),_c("el-table-column",{attrs:{sortable:"",label:"PRICE"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("currency",{attrs:{value:scope.row.unitPrice>0?scope.row.unitPrice:0}})]}}])}),_c("el-table-column",{attrs:{sortable:"",prop:"purchasedDate",formatter:_vm.getDateTimePurchasedDate,label:"PURCHASED TIME"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.nextStep()}}},[_vm._v(" "+_vm._s(_vm.issueBtnText)+" ")])],1)],1)])},RotatingItemDialogvue_type_template_id_6e5d6815_staticRenderFns=[],inventoryTypes=(__webpack_require__(450886),{ITEM_TYPE:1,TOOL_TYPE:2}),RotatingItemDialogvue_type_script_lang_js={props:["rotatingLineItemsList","inventoryrequest","selectedStoreId"],data:function(){return{iTloading:!1,rotatingItemList:[],stepStatus:0,selectedItem:[],saving:!1}},created:function(){this.loadRotatingAsset()},computed:{lineItemList:function(){var rotatingLineItemsList=this.rotatingLineItemsList,selectedItem=this.selectedItem,stepStatus=this.stepStatus;return rotatingLineItemsList.map((function(lineItem,idx){var inventoryType=lineItem.inventoryType,itemType=lineItem.itemType,toolType=lineItem.toolType,assetIds=lineItem.assetIds,quantity=lineItem.quantity,id=lineItem.id,_ref=itemType||{},itemName=_ref.name,_ref2=toolType||{},toolName=_ref2.name,title=inventoryType===inventoryTypes.ITEM_TYPE?itemName:toolName,description="".concat(idx===stepStatus?selectedItem.length:assetIds?assetIds.length:"0","/").concat(quantity);return{id:id,title:title,description:description}}))},issueBtnText:function(){var stepStatus=this.stepStatus,rotatingLineItemsList=this.rotatingLineItemsList,listItemLength=rotatingLineItemsList.length-1;return stepStatus>=listItemLength?"Issue":"Next"}},methods:{loadRotatingAsset:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var rotatingLineItemsList,stepStatus,selectedStoreId,_this$inventoryreques,_this$inventoryreques2,storeRoom,_ref3,inventoryType,itemType,toolType,queryObj,_yield$API$post,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.iTloading=!0,rotatingLineItemsList=_this.rotatingLineItemsList,stepStatus=_this.stepStatus,selectedStoreId=_this.selectedStoreId,_this$inventoryreques=_this.inventoryrequest,_this$inventoryreques2=void 0===_this$inventoryreques?{}:_this$inventoryreques,storeRoom=_this$inventoryreques2.storeRoom,_ref3=rotatingLineItemsList[stepStatus]||{},inventoryType=_ref3.inventoryType,itemType=_ref3.itemType,toolType=_ref3.toolType,queryObj={inventoryType:inventoryType,storeRoomId:selectedStoreId||(storeRoom||{}).id},inventoryType===inventoryTypes.ITEM_TYPE?queryObj.itemTypeId=(itemType||{}).id:queryObj.toolTypeId=(toolType||{}).id,_context.next=7,api/* API */.bl.post("/v2/assets/typeAndStore",queryObj);case 7:_yield$API$post=_context.sent,error=_yield$API$post.error,data=_yield$API$post.data,error?_this.$message.error(error.message||"Error Occurred"):_this.rotatingItemList=data.assets||[],_this.iTloading=!1;case 12:case"end":return _context.stop()}}),_callee)})))()},getDateTimePurchasedDate:function(val){var value=val.purchasedDate;return value&&-1!==value?this.$options.filters.formatDate(value,!0):""},selectRotatingAsset:function(val){var selectedCount=val.length,rotatingLineItemsList=this.rotatingLineItemsList,stepStatus=this.stepStatus,quantity=rotatingLineItemsList[stepStatus].quantity;selectedCount<=quantity?this.selectedItem=val:(this.$refs.issueTable.clearSelection(),this.$message.error("Approved Count ".concat(quantity," Selected Count ").concat(selectedCount)),this.selectedItem=[])},nextStep:function(){var stepStatus=this.stepStatus,selectedItem=this.selectedItem,assetIds=selectedItem.map((function(item){return item.id}));this.$emit("nextStep",assetIds,stepStatus),this.selectedItem=[],this.stepStatus+=1,this.stepStatus===this.rotatingLineItemsList.length?(this.saving=!0,this.$emit("requestIssue")):this.loadRotatingAsset()},closeDialog:function(){this.$emit("onClose")}}},InventoryRequest_RotatingItemDialogvue_type_script_lang_js=RotatingItemDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(InventoryRequest_RotatingItemDialogvue_type_script_lang_js,RotatingItemDialogvue_type_template_id_6e5d6815_render,RotatingItemDialogvue_type_template_id_6e5d6815_staticRenderFns,!1,null,null,null)
/* harmony default export */,RotatingItemDialog=component.exports,StoreRoomDetailsDialogvue_type_template_id_7735f0e4_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:!0,fullscreen:!1,title:_vm.$t("common.header.input_storeroom_details"),open:"top",width:"30%","before-close":_vm.closeDialog,"custom-class":"inventory-dialog fc-web-form-dialog"}},[_c("div",{staticClass:"inventory-select-item-con"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width500px",attrs:{filterable:"",clearable:""},model:{value:_vm.selectedStore,callback:function($$v){_vm.selectedStore=$$v},expression:"selectedStore"}},_vm._l(_vm.storeRoom,(function(store,index){return _c("el-option",{key:index,attrs:{label:store.name,value:store.id}})})),1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.selectStoreRoom()}}},[_vm._v(_vm._s(_vm.$t("common._common.ok")))])],1)])},StoreRoomDetailsDialogvue_type_template_id_7735f0e4_staticRenderFns=[],InventoryUtil=(__webpack_require__(425728),__webpack_require__(976195)),StoreRoomDetailsDialogvue_type_script_lang_js={props:["selectedStoreId","inventoryrequest","updateStatus"],data:function(){return{storeRoom:[],saving:!1}},computed:{selectedStore:{get:function(){return this.selectedStoreId},set:function(value){this.$emit("update:selectedStoreId",value)}}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,InventoryUtil/* getFilteredStoreRoomList */.HG)();case 2:_this.storeRoom=_context.sent;case 3:case"end":return _context.stop()}}),_callee)})))()},methods:{selectStoreRoom:function(){var _this2=this;if(this.selectedStore){var store=this.storeRoom.find((function(store){return store.id===_this2.selectedStore}));this.saving=!0,this.updateStatus({store:store})}},closeDialog:function(){this.$emit("onClose")}}},InventoryRequest_StoreRoomDetailsDialogvue_type_script_lang_js=StoreRoomDetailsDialogvue_type_script_lang_js,StoreRoomDetailsDialog_component=(0,componentNormalizer/* default */.Z)(InventoryRequest_StoreRoomDetailsDialogvue_type_script_lang_js,StoreRoomDetailsDialogvue_type_template_id_7735f0e4_render,StoreRoomDetailsDialogvue_type_template_id_7735f0e4_staticRenderFns,!1,null,null,null)
/* harmony default export */,StoreRoomDetailsDialog=StoreRoomDetailsDialog_component.exports,PageBuilder=__webpack_require__(760218),TransitionButtons=__webpack_require__(987612),ApprovalBar=__webpack_require__(42525),vuex_esm=__webpack_require__(420629),CustomButton=__webpack_require__(623857),CustomButtonUtil=__webpack_require__(746095),eventBus=__webpack_require__(398011),InventoryRequestSummaryvue_type_script_lang_js_inventoryTypes={ITEM_TYPE:1,TOOL_TYPE:2},InventoryRequestSummaryvue_type_script_lang_js={props:["moduleName","viewname","id"],components:{RotatingItemDialog:RotatingItemDialog,StoreRoomDetailsDialog:StoreRoomDetailsDialog,Page:PageBuilder/* default */.Z,TransitionButtons:TransitionButtons/* default */.Z,ApprovalBar:ApprovalBar/* default */.Z,CustomButton:CustomButton/* default */.Z},data:function(){return{inventoryRequest:null,isLoading:!1,rotatingItemChooserDialog:!1,storeRoomChooserDialogVisibility:!1,rotatingLineItemsList:[],selectedStoreId:null,issueBtnLoading:!1,POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz}},created:function(){this.$store.dispatch("loadTicketStatus",this.moduleName)},mounted:function(){var _this=this;eventBus/* eventBus */.Y.$on("refresh-inventory-request-summary",(function(){_this.loadInventoryRequest()}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatus","isStatusLocked"])),{},{inventoryrequestId:function(){return this.id},currentModuleState:function(){var moduleName=this.moduleName,inventoryRequest=this.inventoryRequest,currentStateId=this.$getProperty(inventoryRequest,"moduleState.id"),currentState=this.getTicketStatus(currentStateId,moduleName),_ref=currentState||{},displayName=_ref.displayName;return displayName||null},isRecordLocked:function(){var moduleName=this.moduleName,inventoryRequest=this.inventoryRequest;if(this.isStateFlowEnabled){var hasState=this.$getProperty(inventoryRequest,"moduleState.id");return hasState&&this.isStatusLocked(hasState,moduleName)}return!1},canShowIssueBtn:function(){var inventoryRequest=this.inventoryRequest,_ref2=inventoryRequest||{},approvalFlowId=_ref2.approvalFlowId,isIssued=_ref2.isIssued;return(0,validation/* isEmpty */.xb)(approvalFlowId)&&!isIssued},isStateFlowEnabled:function(){var hasState=this.$getProperty(this.inventoryRequest,"moduleState.id");return hasState},isApprovalEnabled:function(){var inventoryRequest=this.inventoryRequest,_ref3=inventoryRequest||{},approvalFlowId=_ref3.approvalFlowId,approvalStatus=_ref3.approvalStatus;return!(0,validation/* isEmpty */.xb)(approvalFlowId)&&!(0,validation/* isEmpty */.xb)(approvalStatus)}}),watch:{inventoryrequestId:{handler:function(newVal){(0,validation/* isEmpty */.xb)(newVal)||this.loadInventoryRequest()},immediate:!0}},methods:{loadInventoryRequest:function(force){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleName,inventoryrequestId,_yield$API$fetchRecor,error,data,_ref4,id,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this2.isLoading=!0,moduleName=_this2.moduleName,inventoryrequestId=_this2.inventoryrequestId,_context.next=4,api/* API */.bl.fetchRecord(moduleName,{id:inventoryrequestId},{force:force});case 4:_yield$API$fetchRecor=_context.sent,error=_yield$API$fetchRecor.error,data=_yield$API$fetchRecor[moduleName],error?_this2.$message.error(error.message||"Error Occurred"):(_ref4=data||{},id=_ref4.id,name=_ref4.name,_this2.inventoryRequest=data||{},_this2.setTitle("[#".concat(id,"] ").concat(name))),_this2.isLoading=!1;case 9:case"end":return _context.stop()}}),_callee)})))()},transformFn:function(data){var formValues=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return data["inventoryRequest"]=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},data["inventoryRequest"]||{}),{},{id:data.id},formValues),data},issueInventoryRequestActions:function(){var _this3=this,lineItems=this.inventoryRequest.inventoryrequestlineitems;(lineItems||[]).forEach((function(lineItem){var inventoryType=lineItem.inventoryType,itemType=lineItem.itemType,toolType=lineItem.toolType,_ref5=itemType||{},itemIsRotating=_ref5.isRotating,_ref6=toolType||{},toolIsRotating=_ref6.isRotating,canAddLineItem=inventoryType===InventoryRequestSummaryvue_type_script_lang_js_inventoryTypes.ITEM_TYPE&&itemIsRotating||inventoryType===InventoryRequestSummaryvue_type_script_lang_js_inventoryTypes.TOOL_TYPE&&toolIsRotating;canAddLineItem&&_this3.rotatingLineItemsList.push(lineItem)})),this.openIssueDialog()},openIssueDialog:function(){var storeRoom=this.inventoryRequest.storeRoom;storeRoom?this.rotatingLineItemsList.length>0?(this.storeRoomChooserDialogVisibility=!1,this.rotatingItemChooserDialog=!0):this.issueInventoryRequest():this.storeRoomChooserDialogVisibility=!0},issueInventoryRequest:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this4$inventoryReque,id,inventoryrequestlineitems,storeRoom,parentId,requestedFor,requestedBy,inventoryRequest,_yield$API$updateReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this4.issueBtnLoading=!0,_this4$inventoryReque=_this4.inventoryRequest,id=_this4$inventoryReque.id,inventoryrequestlineitems=_this4$inventoryReque.inventoryrequestlineitems,storeRoom=_this4$inventoryReque.storeRoom,parentId=_this4$inventoryReque.parentId,requestedFor=_this4$inventoryReque.requestedFor,requestedBy=_this4$inventoryReque.requestedBy,inventoryRequest={id:id,inventoryrequestlineitems:inventoryrequestlineitems,storeRoom:storeRoom,parentId:parentId,requestedFor:requestedFor,requestedBy:requestedBy},_context2.next=5,api/* API */.bl.updateRecord("inventoryrequest",{id:id,data:(0,objectSpread2/* default */.Z)({},inventoryRequest),params:{issue:!0}});case 5:if(_yield$API$updateReco=_context2.sent,error=_yield$API$updateReco.error,!error){_context2.next=11;break}_this4.$message.error(error.message||"Error Occurred"),_context2.next=14;break;case 11:return _this4.$message.success("Items Issued Successfully"),_context2.next=14,_this4.loadInventoryRequest(!0);case 14:_this4.closeDialog();case 15:case"end":return _context2.stop()}}),_callee2)})))()},nextStep:function(assetIds,idx){var id=this.rotatingLineItemsList[idx].id;this.rotatingLineItemsList[idx].assetIds=assetIds,this.inventoryRequest.inventoryrequestlineitems.forEach((function(lineItem){lineItem.id===id&&(lineItem.assetIds=assetIds)}))},updateStatus:function(_ref7){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref7$store,store,inventoryRequest,storeRoom;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_ref7$store=_ref7.store,store=void 0===_ref7$store?null:_ref7$store,inventoryRequest=_this5.inventoryRequest,storeRoom=inventoryRequest.storeRoom,!storeRoom&&store&&(_this5.inventoryRequest.storeRoom=store),_this5.openIssueDialog();case 5:case"end":return _context3.stop()}}),_callee3)})))()},closeDialog:function(){this.rotatingItemChooserDialog=!1,this.rotatingLineItemsList=[],this.selectedStoreId=null,this.storeRoomChooserDialogVisibility=!1,this.issueBtnLoading=!1}}},InventoryRequest_InventoryRequestSummaryvue_type_script_lang_js=InventoryRequestSummaryvue_type_script_lang_js,InventoryRequestSummary_component=(0,componentNormalizer/* default */.Z)(InventoryRequest_InventoryRequestSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,"5a8d40af",null)
/* harmony default export */,InventoryRequestSummary=InventoryRequestSummary_component.exports},
/***/400438:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalUserAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/approvals/components/ApprovalUserAvatar.vue?vue&type=template&id=443099a5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.hasUser?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_vm.fieldType?_c("avatarPopover",{attrs:{user:_vm.fieldTypeUserValue,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.fieldTypeUserValue,color:_vm.color}})],1)]):_c("div",{class:["icon-border",_vm.userTypeIcon[_vm.userType.type].background]},[_c("inline-svg",{class:["mT2",_vm.userTypeIcon[_vm.userType.type].marginLeft],attrs:{src:_vm.userTypeIcon[_vm.userType.type].icon,iconClass:"icon text-center fc-fill-path fill-path-white "+_vm.userTypeIcon[_vm.userType.type].iconSize}})],1)],1),_c("div",{staticClass:"flex-middle"},[_vm.$validation.isObject(_vm.typeLabel)?_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(" "+_vm._s(_vm.typeLabel.value)+"Â  "),_vm.typeLabel.type?_c("span",{staticClass:"text-fc-grey mL5"},[_vm._v(" ("+_vm._s(_vm.typeLabel.type)+") ")]):_vm._e()]):_c("span",{staticClass:"q-item-label d-flex flex-wrap user-type"},[_vm._v(" "+_vm._s(_vm.typeLabel)+" ")]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"approvers-more-icon"},[_vm._v("+"+_vm._s(_vm.approvers.length-1))])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApprovalUserAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()],1)])])},staticRenderFns=[],validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),User=__webpack_require__(426803),ApprovalUserAvatarvue_type_script_lang_js={name:"ApprovalUserAvatar",extends:User/* default */.Z,props:["userType","approvalMeta","approverObj"],computed:{hasUser:function(){var id=this.$getProperty(this.userObj,"id");return!(0,validation/* isEmpty */.xb)(id)},fieldType:function(){var _this$userType=this.userType,type=_this$userType.type,value=_this$userType.value;return"FIELD"===type&&!(0,validation/* isEmpty */.xb)(value)},fieldTypeUserValue:function(){var fieldType=this.fieldType,userType=this.userType,value=userType.value;return fieldType?(0,validation/* isArray */.kJ)(value)&&!(0,validation/* isEmpty */.xb)(value)?value[0]:value:null},fieldName:function(){var approverObj=this.approverObj,approvalMeta=this.approvalMeta,_ref=approvalMeta||{},_ref$approvalList=_ref.approvalList,approvalList=void 0===_ref$approvalList?[]:_ref$approvalList;if(!(0,validation/* isEmpty */.xb)(approvalList)){var displayName=approvalList.find((function(list){return list.approverGroup===approverObj.approverGroup})).field.displayName;return displayName}return null},color:function(){return-1!==this.userObj.id||this.fieldType?"":this.group?"#c3c3c3":"#e3e3e3"},userTypeIcon:function(){var userIcon={TENANT:{icon:"svgs/tenant",background:"green",iconSize:"icon-lg",marginLeft:"mL4"},VENDOR:{icon:"svgs/apps/vendor",background:"orange",iconSize:"icon-lg",marginLeft:"mL4"},ROLE:{icon:"svgs/role",background:"yellow",iconSize:"icon-xl",marginLeft:"mL3"},GROUP:{icon:"svgs/team",background:"blue",iconSize:"icon-xl",marginLeft:"mL3"},FIELD:{icon:"user",background:"brown",iconSize:"icon-lg",marginLeft:"mL4"}};return userIcon},typeLabel:function(){var _this$userType2=this.userType,type=_this$userType2.type,value=_this$userType2.value;if("USER"===type)return{value:this.userObj.name,type:null};if("TENANT"===type)return value?{value:value.name,type:"Tenant"}:"Tenant";if("VENDOR"===type)return value?{value:value.name,type:"Vendor"}:"Vendor";if("FIELD"===type){var _ref2=this.fieldTypeUserValue||{},name=_ref2.name;return{value:name||this.fieldName,type:"Field"}}return value.name},approvers:function(){var _this$userType3=this.userType,type=_this$userType3.type,value=_this$userType3.value;return"USER"===type?[this.userObj]:(0,validation/* isArray */.kJ)(value)?value:[value]}},methods:{getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver}}},components_ApprovalUserAvatarvue_type_script_lang_js=ApprovalUserAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ApprovalUserAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"443099a5",null)
/* harmony default export */,ApprovalUserAvatar=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/45381.js.map