"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[31385],{
/***/88364:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return EnpiAnalysis}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/tools/EnpiAnalysis.vue?vue&type=template&id=55868f36
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_c("div",{staticClass:"analytics-page-header"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-7"},[_c("div",{staticClass:"analytics-page-header-title"},[_vm._v(" "+_vm._s(_vm.analyticsConfig.name)+" ")]),_c("div",{staticClass:"analytics-page-header-filters"},[_c("el-select",{attrs:{filterable:"",placeholder:"Select Building"},on:{change:_vm.selectBuilding},model:{value:_vm.enpiDataPoint.buildingId,callback:function($$v){_vm.$set(_vm.enpiDataPoint,"buildingId",$$v)},expression:"enpiDataPoint.buildingId"}},[_c("el-option-group",{attrs:{label:"Building"}},_vm._l(_vm.buildingList,(function(building,key){return _c("el-option",{key:key,attrs:{label:building,value:key}})})),1)],1),_vm.enpiDataPoint.buildingId?_c("el-select",{attrs:{filterable:"",placeholder:"Select EnPI"},on:{change:_vm.selectEnPI},model:{value:_vm.enpiDataPoint.readingFieldId,callback:function($$v){_vm.$set(_vm.enpiDataPoint,"readingFieldId",$$v)},expression:"enpiDataPoint.readingFieldId"}},[_c("el-option-group",{attrs:{label:"EnPI"}},_vm._l(_vm.buildingEnPIList,(function(enpi,index){return _c("el-option",{key:index,attrs:{label:enpi.name,value:enpi.readingFieldId}},[_c("span",{staticStyle:{float:"left"}},[_vm._v(_vm._s(enpi.name))]),_c("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"15px"}},[_vm._v(_vm._s(_vm.$helpers.capitalize(enpi.frequencyEnum.toLowerCase())))])])})),1)],1):_vm._e()],1)]),_c("div",{staticClass:"col-5",staticStyle:{"text-align":"right"}},[_c("el-button",{staticClass:"freport-btn analytics-save-as-report",attrs:{disabled:_vm.isActionsDisabled},on:{click:function($event){_vm.visibility.saveAsDialog=!0}}},[_vm._v(_vm._s(_vm.$t("common.wo_report.save_as_report")))]),_c("div",{staticClass:"analytics-page-options"},[_c("el-dropdown",{class:{"action-disabled":_vm.isActionsDisabled},on:{command:function($event){return _vm.exportData($event,_vm.analyticsConfig,_vm.iframeLoader)}}},[_c("el-button",{staticClass:"fc-chart-btn",attrs:{size:"small",type:"text"}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(153813)}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"1",disabled:_vm.isActionsDisabled}},[_vm._v(_vm._s(_vm.$t("common.wo_report.export_csv")))]),_c("el-dropdown-item",{attrs:{command:"2",disabled:_vm.isActionsDisabled}},[_vm._v(_vm._s(_vm.$t("common.wo_report.export_xcl")))])],1)],1),_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-chart-btn",attrs:{size:"small",disabled:_vm.isActionsDisabled,type:"text",title:_vm.$t("common.wo_report.email_this_report"),"data-position":"bottom","data-arrow":"true"},on:{click:function($event){_vm.visibility.emailReport=!0}}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(2175)}})]),_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-chart-btn",attrs:{size:"small",disabled:_vm.isActionsDisabled,type:"text",title:"Print","data-position":"bottom","data-arrow":"true"},on:{click:_vm.printReport}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(467511)}})]),_c("email-report",{attrs:{visibility:_vm.visibility.emailReport,analyticsConfig:_vm.analyticsConfig},on:{"update:visibility":function($event){return _vm.$set(_vm.visibility,"emailReport",$event)}}}),_c("f-save-as-report",{attrs:{visibility:_vm.visibility.saveAsDialog,config:_vm.analyticsConfig},on:{"update:visibility":function($event){return _vm.$set(_vm.visibility,"saveAsDialog",$event)}}})],1)],1)])]),_c("div",{ref:"chartSection",staticClass:"self-center fchart-section scrollable"},[_vm.analyticsConfig.dataPoints.length?_c("f-analytic-report",{attrs:{config:_vm.analyticsConfig},on:{"update:config":function($event){_vm.analyticsConfig=$event}}}):_c("div",{staticClass:"text-center"},[_c("div",{staticClass:"p15"},[_vm._v("Please select an EnPI to analyze.")])])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),FAnalyticReport=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(523163)),FSaveAsReport=__webpack_require__(101699),EmailReport=__webpack_require__(150406),AnalyticsMixin=__webpack_require__(244936),vuex_esm=__webpack_require__(420629),EnpiAnalysisvue_type_script_lang_js={mixins:[AnalyticsMixin/* default */.Z],components:{FAnalyticReport:FAnalyticReport/* default */.Z,FSaveAsReport:FSaveAsReport/* default */.Z,EmailReport:EmailReport/* default */.Z},title:function(){return"EnPI Analysis"},data:function(){return{analyticsConfig:{name:"EnPI Analysis",period:0,dateFilter:this.getDefaultDateFilter("M"),dataPoints:[],chartType:"bar"},enpiDataPoint:{buildingId:"",readingFieldId:"",readingField:null,parentId:"",parent:null,parentType:"space",name:"EnPI",yAggr:3},enpiList:[],visibility:{saveAsDialog:!1,emailReport:!1},exportDownloadUrl:null}},created:function(){var _this=this;this.$store.dispatch("loadBuildings").then((function(){_this.$store.getters.getBuildingsPickList().length&&(_this.enpiDataPoint.buildingId=_this.$store.getters.getBuildingsPickList()[0]),_this.loadEnPI()}))},mounted:function(){},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getBuildingsPickList"])),{},{buildingList:function(){return this.getBuildingsPickList()},buildingEnPIList:function(){var _this2=this;return this.enpiList&&this.enpiDataPoint.buildingId?this.enpiList.filter((function(en){return en.resourceId===parseInt(_this2.enpiDataPoint.buildingId)})):[]}}),methods:{loadEnPI:function(){var self=this;self.$http.get("/reading/allformulas?type=1").then((function(response){200===response.status&&(self.enpiList=response.data&&response.data.formulaList?response.data.formulaList:[])}))},iframeLoader:function(url){this.exportDownloadUrl=url},selectBuilding:function(){this.enpiDataPoint.parentId=this.enpiDataPoint.buildingId,this.enpiDataPoint.readingFieldId=""},selectEnPI:function(){var _this3=this,enpi=this.enpiList.find((function(en){return en.readingFieldId===_this3.enpiDataPoint.readingFieldId}));this.enpiDataPoint.name=enpi.name,this.enpiDataPoint.readingField=enpi.readingField;var period=0,chartType="bar";"DAILY"===enpi.frequencyEnum?period=12:"WEEKLY"===enpi.frequencyEnum?period=11:"MONTHLY"===enpi.frequencyEnum?period=10:(period=0,chartType="area"),this.enpiDataPoint.readingField=enpi.readingField,this.analyticsConfig.period=period,this.analyticsConfig.chartType=chartType,this.analyticsConfig.dataPoints=[this.$helpers.cloneObject(this.enpiDataPoint)]}}},tools_EnpiAnalysisvue_type_script_lang_js=EnpiAnalysisvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(tools_EnpiAnalysisvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,EnpiAnalysis=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/31385.js.map