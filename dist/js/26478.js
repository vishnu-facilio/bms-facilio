"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[26478],{
/***/718725:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Layout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/rules/Layout.vue?vue&type=template&id=35fee088
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"layout container maxwidth100"},[_vm.$route.path.includes("summary")?_vm._e():_c("subheader",{attrs:{menu:_vm.subheaderMenu,newbtn:"false",type:"rules",parent:"/app/fa/rules",listCount:_vm.listCount,showCurrentViewOnly:_vm.showQuickSearch},on:{rearrange:function($event){_vm.showViewSettings=!0}}},[_c("template",{slot:"prefix"},[_c("div",{staticClass:"fL fc-subheader-left"},[_c("div",{staticClass:"pR15 pointer"},[_c("img",{staticClass:"wo-three-line",attrs:{src:__webpack_require__(358413),width:"14",height:"14"},on:{click:function($event){$event.stopPropagation(),_vm.showSideView=!0}}}),"System Views"!==_vm.selectedList&&_vm.views?_c("el-dropdown",{staticClass:"fc-dropdown-menu pL10",attrs:{trigger:"click"},on:{command:_vm.openChild}},[_c("span",{staticClass:"el-dropdown-link"},[_vm._v(" "+_vm._s(_vm.selectedList)+" "),_vm.showQuickSearch?_vm._e():_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_vm.views&&!_vm.showQuickSearch?_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.views,(function(view,key){return _c("el-dropdown-item",{key:key,attrs:{command:view.displayName}},[_vm._v(_vm._s(view.displayName))])})),1):_vm._e()],1):_vm._e()],1),_vm.views&&"System Views"!==_vm.selectedList?_c("div",{staticClass:"fc-separator-lg mL10 mR10"}):_vm._e()])]),_c("div",{staticClass:"fR fc-subheader-right"},[_vm.showQuickSearch?_vm._e():[_c("div",{staticClass:"pL15 fc-black-small-txt-12"},[_c("pagination",{attrs:{total:_vm.listCount,perPage:30}}),_c("div",{staticClass:"block"})],1),_vm.listCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("div",[_c("i",{staticClass:"el-icon-search fc-black-2 f16 pointer fw-bold",on:{click:function($event){return $event.stopPropagation(),_vm.toggleQuickSearch()}}})]),_c("div",{directives:[{name:"show",rawName:"v-show",value:!_vm.showQuickSearch,expression:"!showQuickSearch"}],staticClass:"pL10"},[_c("el-dropdown",{on:{command:_vm.handleNewRule}},[_vm.$hasPermission("alarmrules:CREATE")?_c("button",{staticClass:"fc-create-btn create-btn mL20"},[_vm._v(" "+_vm._s(_vm.$t("common.products.new_rule"))+" "),_c("i",{staticClass:"el-icon-arrow-down pL10 fc-white-14 bold"})]):_vm._e(),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"library"}},[_vm._v(_vm._s(_vm.$t("common.products.add_from_library")))]),_c("el-dropdown-item",{attrs:{command:"custom"}},[_vm._v(_vm._s(_vm.$t("common.products.new_custom_rule")))])],1)],1)],1)],_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],staticClass:"fc-black-small-txt-12 fc-subheader-right-search"},[_c("new-search",{attrs:{config:_vm.filterConfig,isAssetsCategory:!0,loadViews:!0,quickSearchQuery:_vm.quickSearchQuery,save:_vm.save,saveAs:_vm.saveAs,resetFilters:_vm.resetFilters,showSearch:_vm.showQuickSearch,defaultFilter:_vm.defaultFilter,moduleName:"readingrule"},on:{loadView:function($event){return _vm.loadViews()},hideSearch:function($event){_vm.showQuickSearch=!1}}}),_c("div",{staticClass:"filter-search-close"})],1)],2)],2),_c("div",{staticClass:"height100 row"},[null!==_vm.appliedFilters?_c("div",{staticClass:"width100"},[_c("div",{staticClass:"fL",staticStyle:{width:"84%"}},[_c("new-tag",{staticClass:"layout-new-tag",attrs:{config:_vm.filterConfig,isAssetsCategory:!0,filters:_vm.appliedFilters,showFilterAdd:_vm.showAddFilter,showCloseIcon:!0}})],1),_c("div",{staticClass:"save-btn-section"},[_vm.appliedFilters?_c("div",[_c("div",[Object.keys(_vm.appliedFilters).length>"0"?_c("div",{staticClass:"clear-filter",on:{click:function($event){_vm.resetFilters=!_vm.resetFilters}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.clear_all_filters"))+" ")]):_vm._e()])]):_vm._e()])]):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showSideView,expression:"showSideView"}]},[_c("views-list",{staticClass:"rule-views-list",attrs:{config:_vm.filterConfig,newGroup:!0,preparingViews:_vm.preparingViews,views:_vm.views,showEditIcon:_vm.showEditIcon,showListWorkorder:_vm.showSideView,moduleName:"readingRule",mainViewsList:_vm.mainViewsList},on:{"update:preparingViews":function($event){_vm.preparingViews=$event},"update:preparing-views":function($event){_vm.preparingViews=$event},"update:views":function($event){_vm.views=$event},"update:showListWorkorder":function($event){_vm.showSideView=$event},"update:show-list-workorder":function($event){_vm.showSideView=$event}}})],1),_c("div",{staticClass:"height100 f-list-view",class:{"":_vm.showFilter}},[_c("router-view",{ref:"rulesLayout",on:{syncCount:_vm.callbackMethod}})],1)])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Subheader=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(857267),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(785869)),ViewsList=__webpack_require__(795214),vuex_esm=__webpack_require__(420629),FPagination=__webpack_require__(929593),NewSearch=__webpack_require__(521816),NewTag=__webpack_require__(588633),router=__webpack_require__(329435),validation=__webpack_require__(990260),Layoutvue_type_script_lang_js={data:function(){return{listCount:"",quickSearchQuery:null,showQuickSearch:!1,showSideView:!1,showAddFilter:!0,selectedList:null,filterSelected:!1,showMail:!0,defaultFilter:"name",showEditIcon:!1,save:!1,saveAs:!1,resetFilters:!1,showViewSettings:!1,mainViewsList:{systemviews:"System Views",customviews:"Custom Views"},filterConfig:{moduleName:"readingrule",path:"/app/fa/rules/",data:{name:{label:this.$t("common.products.name"),displayType:"string",value:[]},assetCategory:{label:this.$t("maintenance.wr_list.category"),displayType:"select",options:{},value:[],key:"assetCategoryId"},severity:{label:this.$t("alarm.alarm.severity"),displayType:"select",options:{},value:[],key:"alarmSeverityId"}},availableColumns:[],saveView:!0,includeParentCriteria:!0,
// Temporary
disableColumnCustomization:!0}}},created:function(){this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("view/clearViews")},watch:{filters:function(val){null==val||this.filterSelected||this.toggleViewFilter()},currentView:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.getViewDetail()}},components:{Subheader:Subheader/* default */.Z,NewSearch:NewSearch/* default */.Z,Pagination:FPagination/* default */.Z,ViewsList:ViewsList/* default */.Z,NewTag:NewTag/* default */.Z},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({loadModuleMeta:"view/loadModuleMeta",loadViewDetail:"view/loadViewDetail",savesorting:"view/savesorting"})),(0,vuex_esm/* mapState */.rn)({viewDetail:function(state){return state.view.currentViewDetail}})),{},{showFilter:function(){return this.filterSelected&&-1===this.$route.path.indexOf("/summary/")},filters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},currentView:function(){return this.$route.params.viewname?this.$route.params.viewname:null},views:function(){return this.$store.state.view.groupViews},preparingViews:function(){return this.views},subheaderMenu:function(){return this.getSubHeaderMenu()},showSubheader:function(){return-1===this.$route.path.indexOf("/rules/new")},appliedFilters:function(){return this.$route.query.search&&!this.$route.fullPath.includes("newsummary")?JSON.parse(this.$route.query.search):null}}),mounted:function(){this.loadViews(),this.$store.dispatch("view/loadModuleMeta","readingrule"),this.getViewDetail(),!this.filterSelected&&this.filters&&this.toggleViewFilter()},methods:{callMethod:function(){this.loadViews()},loadViews:function(){var _this=this,param={moduleName:"readingrule"};this.$store.dispatch("view/loadGroupViews",param).then((function(){_this.defaultViews()}))},defaultViews:function(){var _this$$route;if((null===(_this$$route=this.$route)||void 0===_this$$route||null===(_this$$route=_this$$route.params)||void 0===_this$$route||!_this$$route.viewname)&&this.views.length){var firstFolder=this.views[0],firstView=this.$getProperty(firstFolder,"views.0.name");if(firstFolder.views&&!(0,validation/* isEmpty */.xb)(firstView))if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.RULES_LIST)||{},path=_ref.path;this.$router.push({path:"/maintenance/"+path.replace(":viewname?",firstView.name)})}else this.$router.push({path:"/app/fa/rules/"+firstView.name})}},openChild:function(command){var a2,self=this;self.selectedList=null,self.selectedList=command;var key1=self.views.find((function(rt){return rt.displayName===command}));if(key1.displayName===command&&(a2=key1.views),a2)if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.RULES_LIST)||{},path=_ref2.path;self.$router.push({path:"/maintenance/"+path.replace(":viewname?",a2[0].name)})}else self.$router.push({path:"/app/fa/rules/"+a2[0].name})},openRulesSummary:function(){
// this.$refs.rulesLayout.showDialog = true
var url="/app/fa/rules/templates";this.$router.push({path:url})},callbackMethod:function(newVal){this.listCount=newVal},getViewDetail:function(){this.$store.dispatch("view/loadViewDetail",{viewName:this.currentView,moduleName:"readingrule"})},closeSearch:function(){this.toggleQuickSearch(),this.quickSearchQuery=null,this.quickSearch()},toggleQuickSearch:function(){this.showQuickSearch=!this.showQuickSearch},quickSearch:function(){
// let queryParam = this.$route.query
// queryParam.searchText
// queryParam.searchText = this.quickSearchQuery
// this.$router.push({path: this.$route.path, query: queryParam})
this.$router.replace({query:{searchText:this.quickSearchQuery}})},toggleViewFilter:function(){this.filterSelected=!this.filterSelected},getSubHeaderMenu:function(){var a1=[],self=this;if(self.currentView)for(var i=0;i<self.views.length;i++){var lists=self.views[i].views;if(lists){var key1=lists.find((function(rt){return rt.name===self.currentView}));key1&&(self.selectedList=self.views[i].displayName,a1=self.views[i].views),self.mainViewsList[self.views[i].name]=self.views[i].displayName}}else{for(var _i=0;_i<self.views.length;_i++){var _lists=self.views[_i].views;if(_lists){var primaryView=_lists.find((function(view){return view.primary}));primaryView&&(self.selectedList=self.views[_i].displayName,a1=self.views[_i].views),self.mainViewsList[self.views[_i].name]=self.views[_i].displayName}}if(!self.selectedList&&self.views.length){var a="systemviews",_key=self.views.find((function(rt){return rt.name===a}));_key&&(self.selectedList=_key.displayName,a1=_key.views)}}if(!self.selectedList)return[];if(a1.length>0){var routePath={},_ref3={},path=_ref3.path;return(0,router/* isWebTabsEnabled */.tj)()?path=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.RULES_LIST)||{}:routePath="/app/fa/rules/",a1.map((function(view){return{label:view.displayName,path:{path:(0,router/* isWebTabsEnabled */.tj)()?"/maintenance/"+path.path.replace(":viewname?",view.name):routePath+view.name},permission:"alarm:READ,READ_TEAM,READ_OWN",id:view.id,name:view.name,isCustom:!view.isDefault,primary:view.primary}}))}return[]},handleNewRule:function(option){if("library"==option&&this.openRulesSummary(),"custom"==option)if((0,router/* isWebTabsEnabled */.tj)()){var _ref4=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.RULES_CREATE)||{},name=_ref4.name;name&&this.$router.push({name:name,query:this.$route.query})}else this.$router.push({path:"/app/fa/rule/new"})}}},rules_Layoutvue_type_script_lang_js=Layoutvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(rules_Layoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Layout=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/26478.js.map